var L7=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var YT=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var Xe=(e,t,n)=>(YT(e,t,"read from private field"),n?n.call(e):t.get(e)),cn=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},rn=(e,t,n,r)=>(YT(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);var by=(e,t,n,r)=>({set _(i){rn(e,t,i,n)},get _(){return Xe(e,t,r)}}),En=(e,t,n)=>(YT(e,t,"access private method"),n);var Jge=L7((zl,Fl)=>{function K5(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var wr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var X5={exports:{}},PE={},Y5={exports:{}},_r={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ax=Symbol.for("react.element"),A7=Symbol.for("react.portal"),O7=Symbol.for("react.fragment"),k7=Symbol.for("react.strict_mode"),R7=Symbol.for("react.profiler"),M7=Symbol.for("react.provider"),N7=Symbol.for("react.context"),D7=Symbol.for("react.forward_ref"),z7=Symbol.for("react.suspense"),F7=Symbol.for("react.memo"),B7=Symbol.for("react.lazy"),lR=Symbol.iterator;function j7(e){return e===null||typeof e!="object"?null:(e=lR&&e[lR]||e["@@iterator"],typeof e=="function"?e:null)}var J5={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q5=Object.assign,e4={};function Q_(e,t,n){this.props=e,this.context=t,this.refs=e4,this.updater=n||J5}Q_.prototype.isReactComponent={};Q_.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Q_.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function t4(){}t4.prototype=Q_.prototype;function HP(e,t,n){this.props=e,this.context=t,this.refs=e4,this.updater=n||J5}var ZP=HP.prototype=new t4;ZP.constructor=HP;Q5(ZP,Q_.prototype);ZP.isPureReactComponent=!0;var uR=Array.isArray,n4=Object.prototype.hasOwnProperty,WP={current:null},r4={key:!0,ref:!0,__self:!0,__source:!0};function i4(e,t,n){var r,i={},o=null,u=null;if(t!=null)for(r in t.ref!==void 0&&(u=t.ref),t.key!==void 0&&(o=""+t.key),t)n4.call(t,r)&&!r4.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var p=Array(l),g=0;g<l;g++)p[g]=arguments[g+2];i.children=p}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:ax,type:e,key:o,ref:u,props:i,_owner:WP.current}}function $7(e,t){return{$$typeof:ax,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function KP(e){return typeof e=="object"&&e!==null&&e.$$typeof===ax}function U7(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var cR=/\/+/g;function JT(e,t){return typeof e=="object"&&e!==null&&e.key!=null?U7(""+e.key):t.toString(36)}function Zb(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var u=!1;if(e===null)u=!0;else switch(o){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case ax:case A7:u=!0}}if(u)return u=e,i=i(u),e=r===""?"."+JT(u,0):r,uR(i)?(n="",e!=null&&(n=e.replace(cR,"$&/")+"/"),Zb(i,t,n,"",function(g){return g})):i!=null&&(KP(i)&&(i=$7(i,n+(!i.key||u&&u.key===i.key?"":(""+i.key).replace(cR,"$&/")+"/")+e)),t.push(i)),1;if(u=0,r=r===""?".":r+":",uR(e))for(var l=0;l<e.length;l++){o=e[l];var p=r+JT(o,l);u+=Zb(o,t,n,p,i)}else if(p=j7(e),typeof p=="function")for(e=p.call(e),l=0;!(o=e.next()).done;)o=o.value,p=r+JT(o,l++),u+=Zb(o,t,n,p,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function Qx(e,t,n){if(e==null)return e;var r=[],i=0;return Zb(e,r,"","",function(o){return t.call(n,o,i++)}),r}function q7(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Fa={current:null},Wb={transition:null},V7={ReactCurrentDispatcher:Fa,ReactCurrentBatchConfig:Wb,ReactCurrentOwner:WP};_r.Children={map:Qx,forEach:function(e,t,n){Qx(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Qx(e,function(){t++}),t},toArray:function(e){return Qx(e,function(t){return t})||[]},only:function(e){if(!KP(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};_r.Component=Q_;_r.Fragment=O7;_r.Profiler=R7;_r.PureComponent=HP;_r.StrictMode=k7;_r.Suspense=z7;_r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V7;_r.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Q5({},e.props),i=e.key,o=e.ref,u=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,u=WP.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(p in t)n4.call(t,p)&&!r4.hasOwnProperty(p)&&(r[p]=t[p]===void 0&&l!==void 0?l[p]:t[p])}var p=arguments.length-2;if(p===1)r.children=n;else if(1<p){l=Array(p);for(var g=0;g<p;g++)l[g]=arguments[g+2];r.children=l}return{$$typeof:ax,type:e.type,key:i,ref:o,props:r,_owner:u}};_r.createContext=function(e){return e={$$typeof:N7,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:M7,_context:e},e.Consumer=e};_r.createElement=i4;_r.createFactory=function(e){var t=i4.bind(null,e);return t.type=e,t};_r.createRef=function(){return{current:null}};_r.forwardRef=function(e){return{$$typeof:D7,render:e}};_r.isValidElement=KP;_r.lazy=function(e){return{$$typeof:B7,_payload:{_status:-1,_result:e},_init:q7}};_r.memo=function(e,t){return{$$typeof:F7,type:e,compare:t===void 0?null:t}};_r.startTransition=function(e){var t=Wb.transition;Wb.transition={};try{e()}finally{Wb.transition=t}};_r.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};_r.useCallback=function(e,t){return Fa.current.useCallback(e,t)};_r.useContext=function(e){return Fa.current.useContext(e)};_r.useDebugValue=function(){};_r.useDeferredValue=function(e){return Fa.current.useDeferredValue(e)};_r.useEffect=function(e,t){return Fa.current.useEffect(e,t)};_r.useId=function(){return Fa.current.useId()};_r.useImperativeHandle=function(e,t,n){return Fa.current.useImperativeHandle(e,t,n)};_r.useInsertionEffect=function(e,t){return Fa.current.useInsertionEffect(e,t)};_r.useLayoutEffect=function(e,t){return Fa.current.useLayoutEffect(e,t)};_r.useMemo=function(e,t){return Fa.current.useMemo(e,t)};_r.useReducer=function(e,t,n){return Fa.current.useReducer(e,t,n)};_r.useRef=function(e){return Fa.current.useRef(e)};_r.useState=function(e){return Fa.current.useState(e)};_r.useSyncExternalStore=function(e,t,n){return Fa.current.useSyncExternalStore(e,t,n)};_r.useTransition=function(){return Fa.current.useTransition()};_r.version="18.2.0";Y5.exports=_r;var qe=Y5.exports;const Bt=xd(qe),aC=K5({__proto__:null,default:Bt},[qe]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G7=qe,H7=Symbol.for("react.element"),Z7=Symbol.for("react.fragment"),W7=Object.prototype.hasOwnProperty,K7=G7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,X7={key:!0,ref:!0,__self:!0,__source:!0};function o4(e,t,n){var r,i={},o=null,u=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(u=t.ref);for(r in t)W7.call(t,r)&&!X7.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:H7,type:e,key:o,ref:u,props:i,_owner:K7.current}}PE.Fragment=Z7;PE.jsx=o4;PE.jsxs=o4;X5.exports=PE;var he=X5.exports,lC={},s4={exports:{}},Jl={},a4={exports:{}},l4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(De,Ae){var ve=De.length;De.push(Ae);e:for(;0<ve;){var ce=ve-1>>>1,xe=De[ce];if(0<i(xe,Ae))De[ce]=Ae,De[ve]=xe,ve=ce;else break e}}function n(De){return De.length===0?null:De[0]}function r(De){if(De.length===0)return null;var Ae=De[0],ve=De.pop();if(ve!==Ae){De[0]=ve;e:for(var ce=0,xe=De.length,Ee=xe>>>1;ce<Ee;){var Ge=2*(ce+1)-1,$e=De[Ge],be=Ge+1,He=De[be];if(0>i($e,ve))be<xe&&0>i(He,$e)?(De[ce]=He,De[be]=ve,ce=be):(De[ce]=$e,De[Ge]=ve,ce=Ge);else if(be<xe&&0>i(He,ve))De[ce]=He,De[be]=ve,ce=be;else break e}}return Ae}function i(De,Ae){var ve=De.sortIndex-Ae.sortIndex;return ve!==0?ve:De.id-Ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var u=Date,l=u.now();e.unstable_now=function(){return u.now()-l}}var p=[],g=[],x=1,y=null,_=3,T=!1,A=!1,O=!1,N=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function z(De){for(var Ae=n(g);Ae!==null;){if(Ae.callback===null)r(g);else if(Ae.startTime<=De)r(g),Ae.sortIndex=Ae.expirationTime,t(p,Ae);else break;Ae=n(g)}}function D(De){if(O=!1,z(De),!A)if(n(p)!==null)A=!0,Ne(U);else{var Ae=n(g);Ae!==null&&Be(D,Ae.startTime-De)}}function U(De,Ae){A=!1,O&&(O=!1,k(H),H=-1),T=!0;var ve=_;try{for(z(Ae),y=n(p);y!==null&&(!(y.expirationTime>Ae)||De&&!X());){var ce=y.callback;if(typeof ce=="function"){y.callback=null,_=y.priorityLevel;var xe=ce(y.expirationTime<=Ae);Ae=e.unstable_now(),typeof xe=="function"?y.callback=xe:y===n(p)&&r(p),z(Ae)}else r(p);y=n(p)}if(y!==null)var Ee=!0;else{var Ge=n(g);Ge!==null&&Be(D,Ge.startTime-Ae),Ee=!1}return Ee}finally{y=null,_=ve,T=!1}}var q=!1,G=null,H=-1,J=5,Y=-1;function X(){return!(e.unstable_now()-Y<J)}function ee(){if(G!==null){var De=e.unstable_now();Y=De;var Ae=!0;try{Ae=G(!0,De)}finally{Ae?ue():(q=!1,G=null)}}else q=!1}var ue;if(typeof R=="function")ue=function(){R(ee)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,we=oe.port2;oe.port1.onmessage=ee,ue=function(){we.postMessage(null)}}else ue=function(){N(ee,0)};function Ne(De){G=De,q||(q=!0,ue())}function Be(De,Ae){H=N(function(){De(e.unstable_now())},Ae)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(De){De.callback=null},e.unstable_continueExecution=function(){A||T||(A=!0,Ne(U))},e.unstable_forceFrameRate=function(De){0>De||125<De?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<De?Math.floor(1e3/De):5},e.unstable_getCurrentPriorityLevel=function(){return _},e.unstable_getFirstCallbackNode=function(){return n(p)},e.unstable_next=function(De){switch(_){case 1:case 2:case 3:var Ae=3;break;default:Ae=_}var ve=_;_=Ae;try{return De()}finally{_=ve}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(De,Ae){switch(De){case 1:case 2:case 3:case 4:case 5:break;default:De=3}var ve=_;_=De;try{return Ae()}finally{_=ve}},e.unstable_scheduleCallback=function(De,Ae,ve){var ce=e.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?ce+ve:ce):ve=ce,De){case 1:var xe=-1;break;case 2:xe=250;break;case 5:xe=1073741823;break;case 4:xe=1e4;break;default:xe=5e3}return xe=ve+xe,De={id:x++,callback:Ae,priorityLevel:De,startTime:ve,expirationTime:xe,sortIndex:-1},ve>ce?(De.sortIndex=ve,t(g,De),n(p)===null&&De===n(g)&&(O?(k(H),H=-1):O=!0,Be(D,ve-ce))):(De.sortIndex=xe,t(p,De),A||T||(A=!0,Ne(U))),De},e.unstable_shouldYield=X,e.unstable_wrapCallback=function(De){var Ae=_;return function(){var ve=_;_=Ae;try{return De.apply(this,arguments)}finally{_=ve}}}})(l4);a4.exports=l4;var Y7=a4.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u4=qe,Ul=Y7;function jt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var c4=new Set,X0={};function Dg(e,t){y_(e,t),y_(e+"Capture",t)}function y_(e,t){for(X0[e]=t,e=0;e<t.length;e++)c4.add(t[e])}var id=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),uC=Object.prototype.hasOwnProperty,J7=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hR={},fR={};function Q7(e){return uC.call(fR,e)?!0:uC.call(hR,e)?!1:J7.test(e)?fR[e]=!0:(hR[e]=!0,!1)}function e9(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function t9(e,t,n,r){if(t===null||typeof t>"u"||e9(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ba(e,t,n,r,i,o,u){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=u}var Bs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Bs[e]=new Ba(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Bs[t]=new Ba(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Bs[e]=new Ba(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Bs[e]=new Ba(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Bs[e]=new Ba(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Bs[e]=new Ba(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Bs[e]=new Ba(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Bs[e]=new Ba(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Bs[e]=new Ba(e,5,!1,e.toLowerCase(),null,!1,!1)});var XP=/[\-:]([a-z])/g;function YP(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(XP,YP);Bs[t]=new Ba(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(XP,YP);Bs[t]=new Ba(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(XP,YP);Bs[t]=new Ba(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Bs[e]=new Ba(e,1,!1,e.toLowerCase(),null,!1,!1)});Bs.xlinkHref=new Ba("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Bs[e]=new Ba(e,1,!1,e.toLowerCase(),null,!0,!0)});function JP(e,t,n,r){var i=Bs.hasOwnProperty(t)?Bs[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(t9(t,n,i,r)&&(n=null),r||i===null?Q7(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var bd=u4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,eb=Symbol.for("react.element"),Ay=Symbol.for("react.portal"),Oy=Symbol.for("react.fragment"),QP=Symbol.for("react.strict_mode"),cC=Symbol.for("react.profiler"),h4=Symbol.for("react.provider"),f4=Symbol.for("react.context"),eL=Symbol.for("react.forward_ref"),hC=Symbol.for("react.suspense"),fC=Symbol.for("react.suspense_list"),tL=Symbol.for("react.memo"),sp=Symbol.for("react.lazy"),d4=Symbol.for("react.offscreen"),dR=Symbol.iterator;function Kv(e){return e===null||typeof e!="object"?null:(e=dR&&e[dR]||e["@@iterator"],typeof e=="function"?e:null)}var Ki=Object.assign,QT;function y0(e){if(QT===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);QT=t&&t[1]||""}return`
`+QT+e}var e2=!1;function t2(e,t){if(!e||e2)return"";e2=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(g){var r=g}Reflect.construct(e,[],t)}else{try{t.call()}catch(g){r=g}e.call(t.prototype)}else{try{throw Error()}catch(g){r=g}e()}}catch(g){if(g&&r&&typeof g.stack=="string"){for(var i=g.stack.split(`
`),o=r.stack.split(`
`),u=i.length-1,l=o.length-1;1<=u&&0<=l&&i[u]!==o[l];)l--;for(;1<=u&&0<=l;u--,l--)if(i[u]!==o[l]){if(u!==1||l!==1)do if(u--,l--,0>l||i[u]!==o[l]){var p=`
`+i[u].replace(" at new "," at ");return e.displayName&&p.includes("<anonymous>")&&(p=p.replace("<anonymous>",e.displayName)),p}while(1<=u&&0<=l);break}}}finally{e2=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?y0(e):""}function n9(e){switch(e.tag){case 5:return y0(e.type);case 16:return y0("Lazy");case 13:return y0("Suspense");case 19:return y0("SuspenseList");case 0:case 2:case 15:return e=t2(e.type,!1),e;case 11:return e=t2(e.type.render,!1),e;case 1:return e=t2(e.type,!0),e;default:return""}}function dC(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Oy:return"Fragment";case Ay:return"Portal";case cC:return"Profiler";case QP:return"StrictMode";case hC:return"Suspense";case fC:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case f4:return(e.displayName||"Context")+".Consumer";case h4:return(e._context.displayName||"Context")+".Provider";case eL:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case tL:return t=e.displayName||null,t!==null?t:dC(e.type)||"Memo";case sp:t=e._payload,e=e._init;try{return dC(e(t))}catch{}}return null}function r9(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return dC(t);case 8:return t===QP?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Np(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function p4(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function i9(e){var t=p4(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(u){r=""+u,o.call(this,u)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(u){r=""+u},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function tb(e){e._valueTracker||(e._valueTracker=i9(e))}function m4(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=p4(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ew(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function pC(e,t){var n=t.checked;return Ki({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function pR(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Np(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function g4(e,t){t=t.checked,t!=null&&JP(e,"checked",t,!1)}function mC(e,t){g4(e,t);var n=Np(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?gC(e,t.type,n):t.hasOwnProperty("defaultValue")&&gC(e,t.type,Np(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function mR(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function gC(e,t,n){(t!=="number"||Ew(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var _0=Array.isArray;function Hy(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Np(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function yC(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(jt(91));return Ki({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function gR(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(jt(92));if(_0(n)){if(1<n.length)throw Error(jt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Np(n)}}function y4(e,t){var n=Np(t.value),r=Np(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function yR(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function _4(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _C(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?_4(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var nb,v4=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(nb=nb||document.createElement("div"),nb.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=nb.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Y0(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var O0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},o9=["Webkit","ms","Moz","O"];Object.keys(O0).forEach(function(e){o9.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),O0[t]=O0[e]})});function x4(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||O0.hasOwnProperty(e)&&O0[e]?(""+t).trim():t+"px"}function b4(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=x4(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var s9=Ki({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vC(e,t){if(t){if(s9[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(jt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(jt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(jt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(jt(62))}}function xC(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bC=null;function nL(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var wC=null,Zy=null,Wy=null;function _R(e){if(e=cx(e)){if(typeof wC!="function")throw Error(jt(280));var t=e.stateNode;t&&(t=RE(t),wC(e.stateNode,e.type,t))}}function w4(e){Zy?Wy?Wy.push(e):Wy=[e]:Zy=e}function E4(){if(Zy){var e=Zy,t=Wy;if(Wy=Zy=null,_R(e),t)for(e=0;e<t.length;e++)_R(t[e])}}function S4(e,t){return e(t)}function T4(){}var n2=!1;function C4(e,t,n){if(n2)return e(t,n);n2=!0;try{return S4(e,t,n)}finally{n2=!1,(Zy!==null||Wy!==null)&&(T4(),E4())}}function J0(e,t){var n=e.stateNode;if(n===null)return null;var r=RE(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(jt(231,t,typeof n));return n}var EC=!1;if(id)try{var Xv={};Object.defineProperty(Xv,"passive",{get:function(){EC=!0}}),window.addEventListener("test",Xv,Xv),window.removeEventListener("test",Xv,Xv)}catch{EC=!1}function a9(e,t,n,r,i,o,u,l,p){var g=Array.prototype.slice.call(arguments,3);try{t.apply(n,g)}catch(x){this.onError(x)}}var k0=!1,Sw=null,Tw=!1,SC=null,l9={onError:function(e){k0=!0,Sw=e}};function u9(e,t,n,r,i,o,u,l,p){k0=!1,Sw=null,a9.apply(l9,arguments)}function c9(e,t,n,r,i,o,u,l,p){if(u9.apply(this,arguments),k0){if(k0){var g=Sw;k0=!1,Sw=null}else throw Error(jt(198));Tw||(Tw=!0,SC=g)}}function zg(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function I4(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function vR(e){if(zg(e)!==e)throw Error(jt(188))}function h9(e){var t=e.alternate;if(!t){if(t=zg(e),t===null)throw Error(jt(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return vR(i),e;if(o===r)return vR(i),t;o=o.sibling}throw Error(jt(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,l=i.child;l;){if(l===n){u=!0,n=i,r=o;break}if(l===r){u=!0,r=i,n=o;break}l=l.sibling}if(!u){for(l=o.child;l;){if(l===n){u=!0,n=o,r=i;break}if(l===r){u=!0,r=o,n=i;break}l=l.sibling}if(!u)throw Error(jt(189))}}if(n.alternate!==r)throw Error(jt(190))}if(n.tag!==3)throw Error(jt(188));return n.stateNode.current===n?e:t}function P4(e){return e=h9(e),e!==null?L4(e):null}function L4(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=L4(e);if(t!==null)return t;e=e.sibling}return null}var A4=Ul.unstable_scheduleCallback,xR=Ul.unstable_cancelCallback,f9=Ul.unstable_shouldYield,d9=Ul.unstable_requestPaint,bo=Ul.unstable_now,p9=Ul.unstable_getCurrentPriorityLevel,rL=Ul.unstable_ImmediatePriority,O4=Ul.unstable_UserBlockingPriority,Cw=Ul.unstable_NormalPriority,m9=Ul.unstable_LowPriority,k4=Ul.unstable_IdlePriority,LE=null,Zh=null;function g9(e){if(Zh&&typeof Zh.onCommitFiberRoot=="function")try{Zh.onCommitFiberRoot(LE,e,void 0,(e.current.flags&128)===128)}catch{}}var Mc=Math.clz32?Math.clz32:v9,y9=Math.log,_9=Math.LN2;function v9(e){return e>>>=0,e===0?32:31-(y9(e)/_9|0)|0}var rb=64,ib=4194304;function v0(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Iw(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,u=n&268435455;if(u!==0){var l=u&~i;l!==0?r=v0(l):(o&=u,o!==0&&(r=v0(o)))}else u=n&~i,u!==0?r=v0(u):o!==0&&(r=v0(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Mc(t),i=1<<n,r|=e[n],t&=~i;return r}function x9(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function b9(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var u=31-Mc(o),l=1<<u,p=i[u];p===-1?(!(l&n)||l&r)&&(i[u]=x9(l,t)):p<=t&&(e.expiredLanes|=l),o&=~l}}function TC(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function R4(){var e=rb;return rb<<=1,!(rb&4194240)&&(rb=64),e}function r2(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function lx(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Mc(t),e[t]=n}function w9(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Mc(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function iL(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Mc(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Zr=0;function M4(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var N4,oL,D4,z4,F4,CC=!1,ob=[],Sp=null,Tp=null,Cp=null,Q0=new Map,e1=new Map,lp=[],E9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bR(e,t){switch(e){case"focusin":case"focusout":Sp=null;break;case"dragenter":case"dragleave":Tp=null;break;case"mouseover":case"mouseout":Cp=null;break;case"pointerover":case"pointerout":Q0.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":e1.delete(t.pointerId)}}function Yv(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=cx(t),t!==null&&oL(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function S9(e,t,n,r,i){switch(t){case"focusin":return Sp=Yv(Sp,e,t,n,r,i),!0;case"dragenter":return Tp=Yv(Tp,e,t,n,r,i),!0;case"mouseover":return Cp=Yv(Cp,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Q0.set(o,Yv(Q0.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,e1.set(o,Yv(e1.get(o)||null,e,t,n,r,i)),!0}return!1}function B4(e){var t=Gm(e.target);if(t!==null){var n=zg(t);if(n!==null){if(t=n.tag,t===13){if(t=I4(n),t!==null){e.blockedOn=t,F4(e.priority,function(){D4(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Kb(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=IC(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);bC=r,n.target.dispatchEvent(r),bC=null}else return t=cx(n),t!==null&&oL(t),e.blockedOn=n,!1;t.shift()}return!0}function wR(e,t,n){Kb(e)&&n.delete(t)}function T9(){CC=!1,Sp!==null&&Kb(Sp)&&(Sp=null),Tp!==null&&Kb(Tp)&&(Tp=null),Cp!==null&&Kb(Cp)&&(Cp=null),Q0.forEach(wR),e1.forEach(wR)}function Jv(e,t){e.blockedOn===t&&(e.blockedOn=null,CC||(CC=!0,Ul.unstable_scheduleCallback(Ul.unstable_NormalPriority,T9)))}function t1(e){function t(i){return Jv(i,e)}if(0<ob.length){Jv(ob[0],e);for(var n=1;n<ob.length;n++){var r=ob[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Sp!==null&&Jv(Sp,e),Tp!==null&&Jv(Tp,e),Cp!==null&&Jv(Cp,e),Q0.forEach(t),e1.forEach(t),n=0;n<lp.length;n++)r=lp[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<lp.length&&(n=lp[0],n.blockedOn===null);)B4(n),n.blockedOn===null&&lp.shift()}var Ky=bd.ReactCurrentBatchConfig,Pw=!0;function C9(e,t,n,r){var i=Zr,o=Ky.transition;Ky.transition=null;try{Zr=1,sL(e,t,n,r)}finally{Zr=i,Ky.transition=o}}function I9(e,t,n,r){var i=Zr,o=Ky.transition;Ky.transition=null;try{Zr=4,sL(e,t,n,r)}finally{Zr=i,Ky.transition=o}}function sL(e,t,n,r){if(Pw){var i=IC(e,t,n,r);if(i===null)d2(e,t,r,Lw,n),bR(e,r);else if(S9(i,e,t,n,r))r.stopPropagation();else if(bR(e,r),t&4&&-1<E9.indexOf(e)){for(;i!==null;){var o=cx(i);if(o!==null&&N4(o),o=IC(e,t,n,r),o===null&&d2(e,t,r,Lw,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else d2(e,t,r,null,n)}}var Lw=null;function IC(e,t,n,r){if(Lw=null,e=nL(r),e=Gm(e),e!==null)if(t=zg(e),t===null)e=null;else if(n=t.tag,n===13){if(e=I4(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Lw=e,null}function j4(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(p9()){case rL:return 1;case O4:return 4;case Cw:case m9:return 16;case k4:return 536870912;default:return 16}default:return 16}}var vp=null,aL=null,Xb=null;function $4(){if(Xb)return Xb;var e,t=aL,n=t.length,r,i="value"in vp?vp.value:vp.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var u=n-e;for(r=1;r<=u&&t[n-r]===i[o-r];r++);return Xb=i.slice(e,1<r?1-r:void 0)}function Yb(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function sb(){return!0}function ER(){return!1}function Ql(e){function t(n,r,i,o,u){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=u,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?sb:ER,this.isPropagationStopped=ER,this}return Ki(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=sb)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=sb)},persist:function(){},isPersistent:sb}),t}var ev={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lL=Ql(ev),ux=Ki({},ev,{view:0,detail:0}),P9=Ql(ux),i2,o2,Qv,AE=Ki({},ux,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uL,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qv&&(Qv&&e.type==="mousemove"?(i2=e.screenX-Qv.screenX,o2=e.screenY-Qv.screenY):o2=i2=0,Qv=e),i2)},movementY:function(e){return"movementY"in e?e.movementY:o2}}),SR=Ql(AE),L9=Ki({},AE,{dataTransfer:0}),A9=Ql(L9),O9=Ki({},ux,{relatedTarget:0}),s2=Ql(O9),k9=Ki({},ev,{animationName:0,elapsedTime:0,pseudoElement:0}),R9=Ql(k9),M9=Ki({},ev,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),N9=Ql(M9),D9=Ki({},ev,{data:0}),TR=Ql(D9),z9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},F9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},B9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function j9(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=B9[e])?!!t[e]:!1}function uL(){return j9}var $9=Ki({},ux,{key:function(e){if(e.key){var t=z9[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Yb(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?F9[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uL,charCode:function(e){return e.type==="keypress"?Yb(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Yb(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),U9=Ql($9),q9=Ki({},AE,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),CR=Ql(q9),V9=Ki({},ux,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uL}),G9=Ql(V9),H9=Ki({},ev,{propertyName:0,elapsedTime:0,pseudoElement:0}),Z9=Ql(H9),W9=Ki({},AE,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),K9=Ql(W9),X9=[9,13,27,32],cL=id&&"CompositionEvent"in window,R0=null;id&&"documentMode"in document&&(R0=document.documentMode);var Y9=id&&"TextEvent"in window&&!R0,U4=id&&(!cL||R0&&8<R0&&11>=R0),IR=" ",PR=!1;function q4(e,t){switch(e){case"keyup":return X9.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function V4(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ky=!1;function J9(e,t){switch(e){case"compositionend":return V4(t);case"keypress":return t.which!==32?null:(PR=!0,IR);case"textInput":return e=t.data,e===IR&&PR?null:e;default:return null}}function Q9(e,t){if(ky)return e==="compositionend"||!cL&&q4(e,t)?(e=$4(),Xb=aL=vp=null,ky=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return U4&&t.locale!=="ko"?null:t.data;default:return null}}var eq={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function LR(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!eq[e.type]:t==="textarea"}function G4(e,t,n,r){w4(r),t=Aw(t,"onChange"),0<t.length&&(n=new lL("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var M0=null,n1=null;function tq(e){nz(e,0)}function OE(e){var t=Ny(e);if(m4(t))return e}function nq(e,t){if(e==="change")return t}var H4=!1;if(id){var a2;if(id){var l2="oninput"in document;if(!l2){var AR=document.createElement("div");AR.setAttribute("oninput","return;"),l2=typeof AR.oninput=="function"}a2=l2}else a2=!1;H4=a2&&(!document.documentMode||9<document.documentMode)}function OR(){M0&&(M0.detachEvent("onpropertychange",Z4),n1=M0=null)}function Z4(e){if(e.propertyName==="value"&&OE(n1)){var t=[];G4(t,n1,e,nL(e)),C4(tq,t)}}function rq(e,t,n){e==="focusin"?(OR(),M0=t,n1=n,M0.attachEvent("onpropertychange",Z4)):e==="focusout"&&OR()}function iq(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return OE(n1)}function oq(e,t){if(e==="click")return OE(t)}function sq(e,t){if(e==="input"||e==="change")return OE(t)}function aq(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Bc=typeof Object.is=="function"?Object.is:aq;function r1(e,t){if(Bc(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!uC.call(t,i)||!Bc(e[i],t[i]))return!1}return!0}function kR(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function RR(e,t){var n=kR(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=kR(n)}}function W4(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?W4(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function K4(){for(var e=window,t=Ew();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ew(e.document)}return t}function hL(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function lq(e){var t=K4(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&W4(n.ownerDocument.documentElement,n)){if(r!==null&&hL(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=RR(n,o);var u=RR(n,r);i&&u&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==u.node||e.focusOffset!==u.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(u.node,u.offset)):(t.setEnd(u.node,u.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var uq=id&&"documentMode"in document&&11>=document.documentMode,Ry=null,PC=null,N0=null,LC=!1;function MR(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;LC||Ry==null||Ry!==Ew(r)||(r=Ry,"selectionStart"in r&&hL(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),N0&&r1(N0,r)||(N0=r,r=Aw(PC,"onSelect"),0<r.length&&(t=new lL("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ry)))}function ab(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var My={animationend:ab("Animation","AnimationEnd"),animationiteration:ab("Animation","AnimationIteration"),animationstart:ab("Animation","AnimationStart"),transitionend:ab("Transition","TransitionEnd")},u2={},X4={};id&&(X4=document.createElement("div").style,"AnimationEvent"in window||(delete My.animationend.animation,delete My.animationiteration.animation,delete My.animationstart.animation),"TransitionEvent"in window||delete My.transitionend.transition);function kE(e){if(u2[e])return u2[e];if(!My[e])return e;var t=My[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in X4)return u2[e]=t[n];return e}var Y4=kE("animationend"),J4=kE("animationiteration"),Q4=kE("animationstart"),ez=kE("transitionend"),tz=new Map,NR="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jp(e,t){tz.set(e,t),Dg(t,[e])}for(var c2=0;c2<NR.length;c2++){var h2=NR[c2],cq=h2.toLowerCase(),hq=h2[0].toUpperCase()+h2.slice(1);Jp(cq,"on"+hq)}Jp(Y4,"onAnimationEnd");Jp(J4,"onAnimationIteration");Jp(Q4,"onAnimationStart");Jp("dblclick","onDoubleClick");Jp("focusin","onFocus");Jp("focusout","onBlur");Jp(ez,"onTransitionEnd");y_("onMouseEnter",["mouseout","mouseover"]);y_("onMouseLeave",["mouseout","mouseover"]);y_("onPointerEnter",["pointerout","pointerover"]);y_("onPointerLeave",["pointerout","pointerover"]);Dg("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Dg("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Dg("onBeforeInput",["compositionend","keypress","textInput","paste"]);Dg("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Dg("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Dg("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var x0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fq=new Set("cancel close invalid load scroll toggle".split(" ").concat(x0));function DR(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,c9(r,t,void 0,e),e.currentTarget=null}function nz(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var u=r.length-1;0<=u;u--){var l=r[u],p=l.instance,g=l.currentTarget;if(l=l.listener,p!==o&&i.isPropagationStopped())break e;DR(i,l,g),o=p}else for(u=0;u<r.length;u++){if(l=r[u],p=l.instance,g=l.currentTarget,l=l.listener,p!==o&&i.isPropagationStopped())break e;DR(i,l,g),o=p}}}if(Tw)throw e=SC,Tw=!1,SC=null,e}function Ei(e,t){var n=t[MC];n===void 0&&(n=t[MC]=new Set);var r=e+"__bubble";n.has(r)||(rz(t,e,2,!1),n.add(r))}function f2(e,t,n){var r=0;t&&(r|=4),rz(n,e,r,t)}var lb="_reactListening"+Math.random().toString(36).slice(2);function i1(e){if(!e[lb]){e[lb]=!0,c4.forEach(function(n){n!=="selectionchange"&&(fq.has(n)||f2(n,!1,e),f2(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[lb]||(t[lb]=!0,f2("selectionchange",!1,t))}}function rz(e,t,n,r){switch(j4(t)){case 1:var i=C9;break;case 4:i=I9;break;default:i=sL}n=i.bind(null,t,n,e),i=void 0,!EC||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function d2(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var u=r.tag;if(u===3||u===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(u===4)for(u=r.return;u!==null;){var p=u.tag;if((p===3||p===4)&&(p=u.stateNode.containerInfo,p===i||p.nodeType===8&&p.parentNode===i))return;u=u.return}for(;l!==null;){if(u=Gm(l),u===null)return;if(p=u.tag,p===5||p===6){r=o=u;continue e}l=l.parentNode}}r=r.return}C4(function(){var g=o,x=nL(n),y=[];e:{var _=tz.get(e);if(_!==void 0){var T=lL,A=e;switch(e){case"keypress":if(Yb(n)===0)break e;case"keydown":case"keyup":T=U9;break;case"focusin":A="focus",T=s2;break;case"focusout":A="blur",T=s2;break;case"beforeblur":case"afterblur":T=s2;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=SR;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=A9;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=G9;break;case Y4:case J4:case Q4:T=R9;break;case ez:T=Z9;break;case"scroll":T=P9;break;case"wheel":T=K9;break;case"copy":case"cut":case"paste":T=N9;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=CR}var O=(t&4)!==0,N=!O&&e==="scroll",k=O?_!==null?_+"Capture":null:_;O=[];for(var R=g,z;R!==null;){z=R;var D=z.stateNode;if(z.tag===5&&D!==null&&(z=D,k!==null&&(D=J0(R,k),D!=null&&O.push(o1(R,D,z)))),N)break;R=R.return}0<O.length&&(_=new T(_,A,null,n,x),y.push({event:_,listeners:O}))}}if(!(t&7)){e:{if(_=e==="mouseover"||e==="pointerover",T=e==="mouseout"||e==="pointerout",_&&n!==bC&&(A=n.relatedTarget||n.fromElement)&&(Gm(A)||A[od]))break e;if((T||_)&&(_=x.window===x?x:(_=x.ownerDocument)?_.defaultView||_.parentWindow:window,T?(A=n.relatedTarget||n.toElement,T=g,A=A?Gm(A):null,A!==null&&(N=zg(A),A!==N||A.tag!==5&&A.tag!==6)&&(A=null)):(T=null,A=g),T!==A)){if(O=SR,D="onMouseLeave",k="onMouseEnter",R="mouse",(e==="pointerout"||e==="pointerover")&&(O=CR,D="onPointerLeave",k="onPointerEnter",R="pointer"),N=T==null?_:Ny(T),z=A==null?_:Ny(A),_=new O(D,R+"leave",T,n,x),_.target=N,_.relatedTarget=z,D=null,Gm(x)===g&&(O=new O(k,R+"enter",A,n,x),O.target=z,O.relatedTarget=N,D=O),N=D,T&&A)t:{for(O=T,k=A,R=0,z=O;z;z=wy(z))R++;for(z=0,D=k;D;D=wy(D))z++;for(;0<R-z;)O=wy(O),R--;for(;0<z-R;)k=wy(k),z--;for(;R--;){if(O===k||k!==null&&O===k.alternate)break t;O=wy(O),k=wy(k)}O=null}else O=null;T!==null&&zR(y,_,T,O,!1),A!==null&&N!==null&&zR(y,N,A,O,!0)}}e:{if(_=g?Ny(g):window,T=_.nodeName&&_.nodeName.toLowerCase(),T==="select"||T==="input"&&_.type==="file")var U=nq;else if(LR(_))if(H4)U=sq;else{U=iq;var q=rq}else(T=_.nodeName)&&T.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(U=oq);if(U&&(U=U(e,g))){G4(y,U,n,x);break e}q&&q(e,_,g),e==="focusout"&&(q=_._wrapperState)&&q.controlled&&_.type==="number"&&gC(_,"number",_.value)}switch(q=g?Ny(g):window,e){case"focusin":(LR(q)||q.contentEditable==="true")&&(Ry=q,PC=g,N0=null);break;case"focusout":N0=PC=Ry=null;break;case"mousedown":LC=!0;break;case"contextmenu":case"mouseup":case"dragend":LC=!1,MR(y,n,x);break;case"selectionchange":if(uq)break;case"keydown":case"keyup":MR(y,n,x)}var G;if(cL)e:{switch(e){case"compositionstart":var H="onCompositionStart";break e;case"compositionend":H="onCompositionEnd";break e;case"compositionupdate":H="onCompositionUpdate";break e}H=void 0}else ky?q4(e,n)&&(H="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(H="onCompositionStart");H&&(U4&&n.locale!=="ko"&&(ky||H!=="onCompositionStart"?H==="onCompositionEnd"&&ky&&(G=$4()):(vp=x,aL="value"in vp?vp.value:vp.textContent,ky=!0)),q=Aw(g,H),0<q.length&&(H=new TR(H,e,null,n,x),y.push({event:H,listeners:q}),G?H.data=G:(G=V4(n),G!==null&&(H.data=G)))),(G=Y9?J9(e,n):Q9(e,n))&&(g=Aw(g,"onBeforeInput"),0<g.length&&(x=new TR("onBeforeInput","beforeinput",null,n,x),y.push({event:x,listeners:g}),x.data=G))}nz(y,t)})}function o1(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Aw(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=J0(e,n),o!=null&&r.unshift(o1(e,o,i)),o=J0(e,t),o!=null&&r.push(o1(e,o,i))),e=e.return}return r}function wy(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function zR(e,t,n,r,i){for(var o=t._reactName,u=[];n!==null&&n!==r;){var l=n,p=l.alternate,g=l.stateNode;if(p!==null&&p===r)break;l.tag===5&&g!==null&&(l=g,i?(p=J0(n,o),p!=null&&u.unshift(o1(n,p,l))):i||(p=J0(n,o),p!=null&&u.push(o1(n,p,l)))),n=n.return}u.length!==0&&e.push({event:t,listeners:u})}var dq=/\r\n?/g,pq=/\u0000|\uFFFD/g;function FR(e){return(typeof e=="string"?e:""+e).replace(dq,`
`).replace(pq,"")}function ub(e,t,n){if(t=FR(t),FR(e)!==t&&n)throw Error(jt(425))}function Ow(){}var AC=null,OC=null;function kC(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var RC=typeof setTimeout=="function"?setTimeout:void 0,mq=typeof clearTimeout=="function"?clearTimeout:void 0,BR=typeof Promise=="function"?Promise:void 0,gq=typeof queueMicrotask=="function"?queueMicrotask:typeof BR<"u"?function(e){return BR.resolve(null).then(e).catch(yq)}:RC;function yq(e){setTimeout(function(){throw e})}function p2(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),t1(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);t1(t)}function Ip(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function jR(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var tv=Math.random().toString(36).slice(2),qh="__reactFiber$"+tv,s1="__reactProps$"+tv,od="__reactContainer$"+tv,MC="__reactEvents$"+tv,_q="__reactListeners$"+tv,vq="__reactHandles$"+tv;function Gm(e){var t=e[qh];if(t)return t;for(var n=e.parentNode;n;){if(t=n[od]||n[qh]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=jR(e);e!==null;){if(n=e[qh])return n;e=jR(e)}return t}e=n,n=e.parentNode}return null}function cx(e){return e=e[qh]||e[od],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ny(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(jt(33))}function RE(e){return e[s1]||null}var NC=[],Dy=-1;function Qp(e){return{current:e}}function Ii(e){0>Dy||(e.current=NC[Dy],NC[Dy]=null,Dy--)}function _i(e,t){Dy++,NC[Dy]=e.current,e.current=t}var Dp={},ra=Qp(Dp),rl=Qp(!1),pg=Dp;function __(e,t){var n=e.type.contextTypes;if(!n)return Dp;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function il(e){return e=e.childContextTypes,e!=null}function kw(){Ii(rl),Ii(ra)}function $R(e,t,n){if(ra.current!==Dp)throw Error(jt(168));_i(ra,t),_i(rl,n)}function iz(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(jt(108,r9(e)||"Unknown",i));return Ki({},n,r)}function Rw(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Dp,pg=ra.current,_i(ra,e),_i(rl,rl.current),!0}function UR(e,t,n){var r=e.stateNode;if(!r)throw Error(jt(169));n?(e=iz(e,t,pg),r.__reactInternalMemoizedMergedChildContext=e,Ii(rl),Ii(ra),_i(ra,e)):Ii(rl),_i(rl,n)}var Hf=null,ME=!1,m2=!1;function oz(e){Hf===null?Hf=[e]:Hf.push(e)}function xq(e){ME=!0,oz(e)}function em(){if(!m2&&Hf!==null){m2=!0;var e=0,t=Zr;try{var n=Hf;for(Zr=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Hf=null,ME=!1}catch(i){throw Hf!==null&&(Hf=Hf.slice(e+1)),A4(rL,em),i}finally{Zr=t,m2=!1}}return null}var zy=[],Fy=0,Mw=null,Nw=0,Au=[],Ou=0,mg=null,Wf=1,Kf="";function zm(e,t){zy[Fy++]=Nw,zy[Fy++]=Mw,Mw=e,Nw=t}function sz(e,t,n){Au[Ou++]=Wf,Au[Ou++]=Kf,Au[Ou++]=mg,mg=e;var r=Wf;e=Kf;var i=32-Mc(r)-1;r&=~(1<<i),n+=1;var o=32-Mc(t)+i;if(30<o){var u=i-i%5;o=(r&(1<<u)-1).toString(32),r>>=u,i-=u,Wf=1<<32-Mc(t)+i|n<<i|r,Kf=o+e}else Wf=1<<o|n<<i|r,Kf=e}function fL(e){e.return!==null&&(zm(e,1),sz(e,1,0))}function dL(e){for(;e===Mw;)Mw=zy[--Fy],zy[Fy]=null,Nw=zy[--Fy],zy[Fy]=null;for(;e===mg;)mg=Au[--Ou],Au[Ou]=null,Kf=Au[--Ou],Au[Ou]=null,Wf=Au[--Ou],Au[Ou]=null}var Bl=null,Ml=null,Ni=!1,Ac=null;function az(e,t){var n=Mu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function qR(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Bl=e,Ml=Ip(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Bl=e,Ml=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=mg!==null?{id:Wf,overflow:Kf}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Mu(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Bl=e,Ml=null,!0):!1;default:return!1}}function DC(e){return(e.mode&1)!==0&&(e.flags&128)===0}function zC(e){if(Ni){var t=Ml;if(t){var n=t;if(!qR(e,t)){if(DC(e))throw Error(jt(418));t=Ip(n.nextSibling);var r=Bl;t&&qR(e,t)?az(r,n):(e.flags=e.flags&-4097|2,Ni=!1,Bl=e)}}else{if(DC(e))throw Error(jt(418));e.flags=e.flags&-4097|2,Ni=!1,Bl=e}}}function VR(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Bl=e}function cb(e){if(e!==Bl)return!1;if(!Ni)return VR(e),Ni=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!kC(e.type,e.memoizedProps)),t&&(t=Ml)){if(DC(e))throw lz(),Error(jt(418));for(;t;)az(e,t),t=Ip(t.nextSibling)}if(VR(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(jt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ml=Ip(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ml=null}}else Ml=Bl?Ip(e.stateNode.nextSibling):null;return!0}function lz(){for(var e=Ml;e;)e=Ip(e.nextSibling)}function v_(){Ml=Bl=null,Ni=!1}function pL(e){Ac===null?Ac=[e]:Ac.push(e)}var bq=bd.ReactCurrentBatchConfig;function Tc(e,t){if(e&&e.defaultProps){t=Ki({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var Dw=Qp(null),zw=null,By=null,mL=null;function gL(){mL=By=zw=null}function yL(e){var t=Dw.current;Ii(Dw),e._currentValue=t}function FC(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Xy(e,t){zw=e,mL=By=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(nl=!0),e.firstContext=null)}function $u(e){var t=e._currentValue;if(mL!==e)if(e={context:e,memoizedValue:t,next:null},By===null){if(zw===null)throw Error(jt(308));By=e,zw.dependencies={lanes:0,firstContext:e}}else By=By.next=e;return t}var Hm=null;function _L(e){Hm===null?Hm=[e]:Hm.push(e)}function uz(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,_L(t)):(n.next=i.next,i.next=n),t.interleaved=n,sd(e,r)}function sd(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ap=!1;function vL(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cz(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Qf(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Pp(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Or&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,sd(e,n)}return i=r.interleaved,i===null?(t.next=t,_L(r)):(t.next=i.next,i.next=t),r.interleaved=t,sd(e,n)}function Jb(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,iL(e,n)}}function GR(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var u={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=u:o=o.next=u,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fw(e,t,n,r){var i=e.updateQueue;ap=!1;var o=i.firstBaseUpdate,u=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var p=l,g=p.next;p.next=null,u===null?o=g:u.next=g,u=p;var x=e.alternate;x!==null&&(x=x.updateQueue,l=x.lastBaseUpdate,l!==u&&(l===null?x.firstBaseUpdate=g:l.next=g,x.lastBaseUpdate=p))}if(o!==null){var y=i.baseState;u=0,x=g=p=null,l=o;do{var _=l.lane,T=l.eventTime;if((r&_)===_){x!==null&&(x=x.next={eventTime:T,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var A=e,O=l;switch(_=t,T=n,O.tag){case 1:if(A=O.payload,typeof A=="function"){y=A.call(T,y,_);break e}y=A;break e;case 3:A.flags=A.flags&-65537|128;case 0:if(A=O.payload,_=typeof A=="function"?A.call(T,y,_):A,_==null)break e;y=Ki({},y,_);break e;case 2:ap=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,_=i.effects,_===null?i.effects=[l]:_.push(l))}else T={eventTime:T,lane:_,tag:l.tag,payload:l.payload,callback:l.callback,next:null},x===null?(g=x=T,p=y):x=x.next=T,u|=_;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;_=l,l=_.next,_.next=null,i.lastBaseUpdate=_,i.shared.pending=null}}while(!0);if(x===null&&(p=y),i.baseState=p,i.firstBaseUpdate=g,i.lastBaseUpdate=x,t=i.shared.interleaved,t!==null){i=t;do u|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);yg|=u,e.lanes=u,e.memoizedState=y}}function HR(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(jt(191,i));i.call(r)}}}var hz=new u4.Component().refs;function BC(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ki({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var NE={isMounted:function(e){return(e=e._reactInternals)?zg(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Aa(),i=Ap(e),o=Qf(r,i);o.payload=t,n!=null&&(o.callback=n),t=Pp(e,o,i),t!==null&&(Nc(t,e,i,r),Jb(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Aa(),i=Ap(e),o=Qf(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Pp(e,o,i),t!==null&&(Nc(t,e,i,r),Jb(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Aa(),r=Ap(e),i=Qf(n,r);i.tag=2,t!=null&&(i.callback=t),t=Pp(e,i,r),t!==null&&(Nc(t,e,r,n),Jb(t,e,r))}};function ZR(e,t,n,r,i,o,u){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,u):t.prototype&&t.prototype.isPureReactComponent?!r1(n,r)||!r1(i,o):!0}function fz(e,t,n){var r=!1,i=Dp,o=t.contextType;return typeof o=="object"&&o!==null?o=$u(o):(i=il(t)?pg:ra.current,r=t.contextTypes,o=(r=r!=null)?__(e,i):Dp),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=NE,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function WR(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&NE.enqueueReplaceState(t,t.state,null)}function jC(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=hz,vL(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=$u(o):(o=il(t)?pg:ra.current,i.context=__(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(BC(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&NE.enqueueReplaceState(i,i.state,null),Fw(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function e0(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(jt(309));var r=n.stateNode}if(!r)throw Error(jt(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(u){var l=i.refs;l===hz&&(l=i.refs={}),u===null?delete l[o]:l[o]=u},t._stringRef=o,t)}if(typeof e!="string")throw Error(jt(284));if(!n._owner)throw Error(jt(290,e))}return e}function hb(e,t){throw e=Object.prototype.toString.call(t),Error(jt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function KR(e){var t=e._init;return t(e._payload)}function dz(e){function t(k,R){if(e){var z=k.deletions;z===null?(k.deletions=[R],k.flags|=16):z.push(R)}}function n(k,R){if(!e)return null;for(;R!==null;)t(k,R),R=R.sibling;return null}function r(k,R){for(k=new Map;R!==null;)R.key!==null?k.set(R.key,R):k.set(R.index,R),R=R.sibling;return k}function i(k,R){return k=Op(k,R),k.index=0,k.sibling=null,k}function o(k,R,z){return k.index=z,e?(z=k.alternate,z!==null?(z=z.index,z<R?(k.flags|=2,R):z):(k.flags|=2,R)):(k.flags|=1048576,R)}function u(k){return e&&k.alternate===null&&(k.flags|=2),k}function l(k,R,z,D){return R===null||R.tag!==6?(R=w2(z,k.mode,D),R.return=k,R):(R=i(R,z),R.return=k,R)}function p(k,R,z,D){var U=z.type;return U===Oy?x(k,R,z.props.children,D,z.key):R!==null&&(R.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===sp&&KR(U)===R.type)?(D=i(R,z.props),D.ref=e0(k,R,z),D.return=k,D):(D=iw(z.type,z.key,z.props,null,k.mode,D),D.ref=e0(k,R,z),D.return=k,D)}function g(k,R,z,D){return R===null||R.tag!==4||R.stateNode.containerInfo!==z.containerInfo||R.stateNode.implementation!==z.implementation?(R=E2(z,k.mode,D),R.return=k,R):(R=i(R,z.children||[]),R.return=k,R)}function x(k,R,z,D,U){return R===null||R.tag!==7?(R=sg(z,k.mode,D,U),R.return=k,R):(R=i(R,z),R.return=k,R)}function y(k,R,z){if(typeof R=="string"&&R!==""||typeof R=="number")return R=w2(""+R,k.mode,z),R.return=k,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case eb:return z=iw(R.type,R.key,R.props,null,k.mode,z),z.ref=e0(k,null,R),z.return=k,z;case Ay:return R=E2(R,k.mode,z),R.return=k,R;case sp:var D=R._init;return y(k,D(R._payload),z)}if(_0(R)||Kv(R))return R=sg(R,k.mode,z,null),R.return=k,R;hb(k,R)}return null}function _(k,R,z,D){var U=R!==null?R.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return U!==null?null:l(k,R,""+z,D);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case eb:return z.key===U?p(k,R,z,D):null;case Ay:return z.key===U?g(k,R,z,D):null;case sp:return U=z._init,_(k,R,U(z._payload),D)}if(_0(z)||Kv(z))return U!==null?null:x(k,R,z,D,null);hb(k,z)}return null}function T(k,R,z,D,U){if(typeof D=="string"&&D!==""||typeof D=="number")return k=k.get(z)||null,l(R,k,""+D,U);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case eb:return k=k.get(D.key===null?z:D.key)||null,p(R,k,D,U);case Ay:return k=k.get(D.key===null?z:D.key)||null,g(R,k,D,U);case sp:var q=D._init;return T(k,R,z,q(D._payload),U)}if(_0(D)||Kv(D))return k=k.get(z)||null,x(R,k,D,U,null);hb(R,D)}return null}function A(k,R,z,D){for(var U=null,q=null,G=R,H=R=0,J=null;G!==null&&H<z.length;H++){G.index>H?(J=G,G=null):J=G.sibling;var Y=_(k,G,z[H],D);if(Y===null){G===null&&(G=J);break}e&&G&&Y.alternate===null&&t(k,G),R=o(Y,R,H),q===null?U=Y:q.sibling=Y,q=Y,G=J}if(H===z.length)return n(k,G),Ni&&zm(k,H),U;if(G===null){for(;H<z.length;H++)G=y(k,z[H],D),G!==null&&(R=o(G,R,H),q===null?U=G:q.sibling=G,q=G);return Ni&&zm(k,H),U}for(G=r(k,G);H<z.length;H++)J=T(G,k,H,z[H],D),J!==null&&(e&&J.alternate!==null&&G.delete(J.key===null?H:J.key),R=o(J,R,H),q===null?U=J:q.sibling=J,q=J);return e&&G.forEach(function(X){return t(k,X)}),Ni&&zm(k,H),U}function O(k,R,z,D){var U=Kv(z);if(typeof U!="function")throw Error(jt(150));if(z=U.call(z),z==null)throw Error(jt(151));for(var q=U=null,G=R,H=R=0,J=null,Y=z.next();G!==null&&!Y.done;H++,Y=z.next()){G.index>H?(J=G,G=null):J=G.sibling;var X=_(k,G,Y.value,D);if(X===null){G===null&&(G=J);break}e&&G&&X.alternate===null&&t(k,G),R=o(X,R,H),q===null?U=X:q.sibling=X,q=X,G=J}if(Y.done)return n(k,G),Ni&&zm(k,H),U;if(G===null){for(;!Y.done;H++,Y=z.next())Y=y(k,Y.value,D),Y!==null&&(R=o(Y,R,H),q===null?U=Y:q.sibling=Y,q=Y);return Ni&&zm(k,H),U}for(G=r(k,G);!Y.done;H++,Y=z.next())Y=T(G,k,H,Y.value,D),Y!==null&&(e&&Y.alternate!==null&&G.delete(Y.key===null?H:Y.key),R=o(Y,R,H),q===null?U=Y:q.sibling=Y,q=Y);return e&&G.forEach(function(ee){return t(k,ee)}),Ni&&zm(k,H),U}function N(k,R,z,D){if(typeof z=="object"&&z!==null&&z.type===Oy&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case eb:e:{for(var U=z.key,q=R;q!==null;){if(q.key===U){if(U=z.type,U===Oy){if(q.tag===7){n(k,q.sibling),R=i(q,z.props.children),R.return=k,k=R;break e}}else if(q.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===sp&&KR(U)===q.type){n(k,q.sibling),R=i(q,z.props),R.ref=e0(k,q,z),R.return=k,k=R;break e}n(k,q);break}else t(k,q);q=q.sibling}z.type===Oy?(R=sg(z.props.children,k.mode,D,z.key),R.return=k,k=R):(D=iw(z.type,z.key,z.props,null,k.mode,D),D.ref=e0(k,R,z),D.return=k,k=D)}return u(k);case Ay:e:{for(q=z.key;R!==null;){if(R.key===q)if(R.tag===4&&R.stateNode.containerInfo===z.containerInfo&&R.stateNode.implementation===z.implementation){n(k,R.sibling),R=i(R,z.children||[]),R.return=k,k=R;break e}else{n(k,R);break}else t(k,R);R=R.sibling}R=E2(z,k.mode,D),R.return=k,k=R}return u(k);case sp:return q=z._init,N(k,R,q(z._payload),D)}if(_0(z))return A(k,R,z,D);if(Kv(z))return O(k,R,z,D);hb(k,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,R!==null&&R.tag===6?(n(k,R.sibling),R=i(R,z),R.return=k,k=R):(n(k,R),R=w2(z,k.mode,D),R.return=k,k=R),u(k)):n(k,R)}return N}var x_=dz(!0),pz=dz(!1),hx={},Wh=Qp(hx),a1=Qp(hx),l1=Qp(hx);function Zm(e){if(e===hx)throw Error(jt(174));return e}function xL(e,t){switch(_i(l1,t),_i(a1,e),_i(Wh,hx),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:_C(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=_C(t,e)}Ii(Wh),_i(Wh,t)}function b_(){Ii(Wh),Ii(a1),Ii(l1)}function mz(e){Zm(l1.current);var t=Zm(Wh.current),n=_C(t,e.type);t!==n&&(_i(a1,e),_i(Wh,n))}function bL(e){a1.current===e&&(Ii(Wh),Ii(a1))}var qi=Qp(0);function Bw(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var g2=[];function wL(){for(var e=0;e<g2.length;e++)g2[e]._workInProgressVersionPrimary=null;g2.length=0}var Qb=bd.ReactCurrentDispatcher,y2=bd.ReactCurrentBatchConfig,gg=0,Wi=null,jo=null,ts=null,jw=!1,D0=!1,u1=0,wq=0;function Qs(){throw Error(jt(321))}function EL(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Bc(e[n],t[n]))return!1;return!0}function SL(e,t,n,r,i,o){if(gg=o,Wi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Qb.current=e===null||e.memoizedState===null?Cq:Iq,e=n(r,i),D0){o=0;do{if(D0=!1,u1=0,25<=o)throw Error(jt(301));o+=1,ts=jo=null,t.updateQueue=null,Qb.current=Pq,e=n(r,i)}while(D0)}if(Qb.current=$w,t=jo!==null&&jo.next!==null,gg=0,ts=jo=Wi=null,jw=!1,t)throw Error(jt(300));return e}function TL(){var e=u1!==0;return u1=0,e}function kh(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ts===null?Wi.memoizedState=ts=e:ts=ts.next=e,ts}function Uu(){if(jo===null){var e=Wi.alternate;e=e!==null?e.memoizedState:null}else e=jo.next;var t=ts===null?Wi.memoizedState:ts.next;if(t!==null)ts=t,jo=e;else{if(e===null)throw Error(jt(310));jo=e,e={memoizedState:jo.memoizedState,baseState:jo.baseState,baseQueue:jo.baseQueue,queue:jo.queue,next:null},ts===null?Wi.memoizedState=ts=e:ts=ts.next=e}return ts}function c1(e,t){return typeof t=="function"?t(e):t}function _2(e){var t=Uu(),n=t.queue;if(n===null)throw Error(jt(311));n.lastRenderedReducer=e;var r=jo,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var l=u=null,p=null,g=o;do{var x=g.lane;if((gg&x)===x)p!==null&&(p=p.next={lane:0,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null}),r=g.hasEagerState?g.eagerState:e(r,g.action);else{var y={lane:x,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null};p===null?(l=p=y,u=r):p=p.next=y,Wi.lanes|=x,yg|=x}g=g.next}while(g!==null&&g!==o);p===null?u=r:p.next=l,Bc(r,t.memoizedState)||(nl=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=p,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,Wi.lanes|=o,yg|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function v2(e){var t=Uu(),n=t.queue;if(n===null)throw Error(jt(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var u=i=i.next;do o=e(o,u.action),u=u.next;while(u!==i);Bc(o,t.memoizedState)||(nl=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function gz(){}function yz(e,t){var n=Wi,r=Uu(),i=t(),o=!Bc(r.memoizedState,i);if(o&&(r.memoizedState=i,nl=!0),r=r.queue,CL(xz.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||ts!==null&&ts.memoizedState.tag&1){if(n.flags|=2048,h1(9,vz.bind(null,n,r,i,t),void 0,null),ls===null)throw Error(jt(349));gg&30||_z(n,t,i)}return i}function _z(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Wi.updateQueue,t===null?(t={lastEffect:null,stores:null},Wi.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function vz(e,t,n,r){t.value=n,t.getSnapshot=r,bz(t)&&wz(e)}function xz(e,t,n){return n(function(){bz(t)&&wz(e)})}function bz(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Bc(e,n)}catch{return!0}}function wz(e){var t=sd(e,1);t!==null&&Nc(t,e,1,-1)}function XR(e){var t=kh();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c1,lastRenderedState:e},t.queue=e,e=e.dispatch=Tq.bind(null,Wi,e),[t.memoizedState,e]}function h1(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Wi.updateQueue,t===null?(t={lastEffect:null,stores:null},Wi.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Ez(){return Uu().memoizedState}function ew(e,t,n,r){var i=kh();Wi.flags|=e,i.memoizedState=h1(1|t,n,void 0,r===void 0?null:r)}function DE(e,t,n,r){var i=Uu();r=r===void 0?null:r;var o=void 0;if(jo!==null){var u=jo.memoizedState;if(o=u.destroy,r!==null&&EL(r,u.deps)){i.memoizedState=h1(t,n,o,r);return}}Wi.flags|=e,i.memoizedState=h1(1|t,n,o,r)}function YR(e,t){return ew(8390656,8,e,t)}function CL(e,t){return DE(2048,8,e,t)}function Sz(e,t){return DE(4,2,e,t)}function Tz(e,t){return DE(4,4,e,t)}function Cz(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Iz(e,t,n){return n=n!=null?n.concat([e]):null,DE(4,4,Cz.bind(null,t,e),n)}function IL(){}function Pz(e,t){var n=Uu();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&EL(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Lz(e,t){var n=Uu();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&EL(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Az(e,t,n){return gg&21?(Bc(n,t)||(n=R4(),Wi.lanes|=n,yg|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,nl=!0),e.memoizedState=n)}function Eq(e,t){var n=Zr;Zr=n!==0&&4>n?n:4,e(!0);var r=y2.transition;y2.transition={};try{e(!1),t()}finally{Zr=n,y2.transition=r}}function Oz(){return Uu().memoizedState}function Sq(e,t,n){var r=Ap(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},kz(e))Rz(t,n);else if(n=uz(e,t,n,r),n!==null){var i=Aa();Nc(n,e,r,i),Mz(n,t,r)}}function Tq(e,t,n){var r=Ap(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(kz(e))Rz(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var u=t.lastRenderedState,l=o(u,n);if(i.hasEagerState=!0,i.eagerState=l,Bc(l,u)){var p=t.interleaved;p===null?(i.next=i,_L(t)):(i.next=p.next,p.next=i),t.interleaved=i;return}}catch{}finally{}n=uz(e,t,i,r),n!==null&&(i=Aa(),Nc(n,e,r,i),Mz(n,t,r))}}function kz(e){var t=e.alternate;return e===Wi||t!==null&&t===Wi}function Rz(e,t){D0=jw=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Mz(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,iL(e,n)}}var $w={readContext:$u,useCallback:Qs,useContext:Qs,useEffect:Qs,useImperativeHandle:Qs,useInsertionEffect:Qs,useLayoutEffect:Qs,useMemo:Qs,useReducer:Qs,useRef:Qs,useState:Qs,useDebugValue:Qs,useDeferredValue:Qs,useTransition:Qs,useMutableSource:Qs,useSyncExternalStore:Qs,useId:Qs,unstable_isNewReconciler:!1},Cq={readContext:$u,useCallback:function(e,t){return kh().memoizedState=[e,t===void 0?null:t],e},useContext:$u,useEffect:YR,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ew(4194308,4,Cz.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ew(4194308,4,e,t)},useInsertionEffect:function(e,t){return ew(4,2,e,t)},useMemo:function(e,t){var n=kh();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=kh();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Sq.bind(null,Wi,e),[r.memoizedState,e]},useRef:function(e){var t=kh();return e={current:e},t.memoizedState=e},useState:XR,useDebugValue:IL,useDeferredValue:function(e){return kh().memoizedState=e},useTransition:function(){var e=XR(!1),t=e[0];return e=Eq.bind(null,e[1]),kh().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Wi,i=kh();if(Ni){if(n===void 0)throw Error(jt(407));n=n()}else{if(n=t(),ls===null)throw Error(jt(349));gg&30||_z(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,YR(xz.bind(null,r,o,e),[e]),r.flags|=2048,h1(9,vz.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=kh(),t=ls.identifierPrefix;if(Ni){var n=Kf,r=Wf;n=(r&~(1<<32-Mc(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=u1++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=wq++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Iq={readContext:$u,useCallback:Pz,useContext:$u,useEffect:CL,useImperativeHandle:Iz,useInsertionEffect:Sz,useLayoutEffect:Tz,useMemo:Lz,useReducer:_2,useRef:Ez,useState:function(){return _2(c1)},useDebugValue:IL,useDeferredValue:function(e){var t=Uu();return Az(t,jo.memoizedState,e)},useTransition:function(){var e=_2(c1)[0],t=Uu().memoizedState;return[e,t]},useMutableSource:gz,useSyncExternalStore:yz,useId:Oz,unstable_isNewReconciler:!1},Pq={readContext:$u,useCallback:Pz,useContext:$u,useEffect:CL,useImperativeHandle:Iz,useInsertionEffect:Sz,useLayoutEffect:Tz,useMemo:Lz,useReducer:v2,useRef:Ez,useState:function(){return v2(c1)},useDebugValue:IL,useDeferredValue:function(e){var t=Uu();return jo===null?t.memoizedState=e:Az(t,jo.memoizedState,e)},useTransition:function(){var e=v2(c1)[0],t=Uu().memoizedState;return[e,t]},useMutableSource:gz,useSyncExternalStore:yz,useId:Oz,unstable_isNewReconciler:!1};function w_(e,t){try{var n="",r=t;do n+=n9(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function x2(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function $C(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Lq=typeof WeakMap=="function"?WeakMap:Map;function Nz(e,t,n){n=Qf(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){qw||(qw=!0,YC=r),$C(e,t)},n}function Dz(e,t,n){n=Qf(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){$C(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){$C(e,t),typeof r!="function"&&(Lp===null?Lp=new Set([this]):Lp.add(this));var u=t.stack;this.componentDidCatch(t.value,{componentStack:u!==null?u:""})}),n}function JR(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Lq;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=qq.bind(null,e,t,n),t.then(e,e))}function QR(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function eM(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Qf(-1,1),t.tag=2,Pp(n,t,1))),n.lanes|=1),e)}var Aq=bd.ReactCurrentOwner,nl=!1;function Ta(e,t,n,r){t.child=e===null?pz(t,null,n,r):x_(t,e.child,n,r)}function tM(e,t,n,r,i){n=n.render;var o=t.ref;return Xy(t,i),r=SL(e,t,n,r,o,i),n=TL(),e!==null&&!nl?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ad(e,t,i)):(Ni&&n&&fL(t),t.flags|=1,Ta(e,t,r,i),t.child)}function nM(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!NL(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,zz(e,t,o,r,i)):(e=iw(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var u=o.memoizedProps;if(n=n.compare,n=n!==null?n:r1,n(u,r)&&e.ref===t.ref)return ad(e,t,i)}return t.flags|=1,e=Op(o,r),e.ref=t.ref,e.return=t,t.child=e}function zz(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(r1(o,r)&&e.ref===t.ref)if(nl=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(nl=!0);else return t.lanes=e.lanes,ad(e,t,i)}return UC(e,t,n,r,i)}function Fz(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_i($y,kl),kl|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_i($y,kl),kl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,_i($y,kl),kl|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,_i($y,kl),kl|=r;return Ta(e,t,i,n),t.child}function Bz(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function UC(e,t,n,r,i){var o=il(n)?pg:ra.current;return o=__(t,o),Xy(t,i),n=SL(e,t,n,r,o,i),r=TL(),e!==null&&!nl?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ad(e,t,i)):(Ni&&r&&fL(t),t.flags|=1,Ta(e,t,n,i),t.child)}function rM(e,t,n,r,i){if(il(n)){var o=!0;Rw(t)}else o=!1;if(Xy(t,i),t.stateNode===null)tw(e,t),fz(t,n,r),jC(t,n,r,i),r=!0;else if(e===null){var u=t.stateNode,l=t.memoizedProps;u.props=l;var p=u.context,g=n.contextType;typeof g=="object"&&g!==null?g=$u(g):(g=il(n)?pg:ra.current,g=__(t,g));var x=n.getDerivedStateFromProps,y=typeof x=="function"||typeof u.getSnapshotBeforeUpdate=="function";y||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(l!==r||p!==g)&&WR(t,u,r,g),ap=!1;var _=t.memoizedState;u.state=_,Fw(t,r,u,i),p=t.memoizedState,l!==r||_!==p||rl.current||ap?(typeof x=="function"&&(BC(t,n,x,r),p=t.memoizedState),(l=ap||ZR(t,n,l,r,_,p,g))?(y||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=p),u.props=r,u.state=p,u.context=g,r=l):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{u=t.stateNode,cz(e,t),l=t.memoizedProps,g=t.type===t.elementType?l:Tc(t.type,l),u.props=g,y=t.pendingProps,_=u.context,p=n.contextType,typeof p=="object"&&p!==null?p=$u(p):(p=il(n)?pg:ra.current,p=__(t,p));var T=n.getDerivedStateFromProps;(x=typeof T=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(l!==y||_!==p)&&WR(t,u,r,p),ap=!1,_=t.memoizedState,u.state=_,Fw(t,r,u,i);var A=t.memoizedState;l!==y||_!==A||rl.current||ap?(typeof T=="function"&&(BC(t,n,T,r),A=t.memoizedState),(g=ap||ZR(t,n,g,r,_,A,p)||!1)?(x||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(r,A,p),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(r,A,p)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||l===e.memoizedProps&&_===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&_===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=A),u.props=r,u.state=A,u.context=p,r=g):(typeof u.componentDidUpdate!="function"||l===e.memoizedProps&&_===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&_===e.memoizedState||(t.flags|=1024),r=!1)}return qC(e,t,n,r,o,i)}function qC(e,t,n,r,i,o){Bz(e,t);var u=(t.flags&128)!==0;if(!r&&!u)return i&&UR(t,n,!1),ad(e,t,o);r=t.stateNode,Aq.current=t;var l=u&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&u?(t.child=x_(t,e.child,null,o),t.child=x_(t,null,l,o)):Ta(e,t,l,o),t.memoizedState=r.state,i&&UR(t,n,!0),t.child}function jz(e){var t=e.stateNode;t.pendingContext?$R(e,t.pendingContext,t.pendingContext!==t.context):t.context&&$R(e,t.context,!1),xL(e,t.containerInfo)}function iM(e,t,n,r,i){return v_(),pL(i),t.flags|=256,Ta(e,t,n,r),t.child}var VC={dehydrated:null,treeContext:null,retryLane:0};function GC(e){return{baseLanes:e,cachePool:null,transitions:null}}function $z(e,t,n){var r=t.pendingProps,i=qi.current,o=!1,u=(t.flags&128)!==0,l;if((l=u)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),_i(qi,i&1),e===null)return zC(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(u=r.children,e=r.fallback,o?(r=t.mode,o=t.child,u={mode:"hidden",children:u},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=u):o=BE(u,r,0,null),e=sg(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=GC(n),t.memoizedState=VC,e):PL(t,u));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return Oq(e,t,u,r,l,i,n);if(o){o=r.fallback,u=t.mode,i=e.child,l=i.sibling;var p={mode:"hidden",children:r.children};return!(u&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=p,t.deletions=null):(r=Op(i,p),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?o=Op(l,o):(o=sg(o,u,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,u=e.child.memoizedState,u=u===null?GC(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},o.memoizedState=u,o.childLanes=e.childLanes&~n,t.memoizedState=VC,r}return o=e.child,e=o.sibling,r=Op(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function PL(e,t){return t=BE({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function fb(e,t,n,r){return r!==null&&pL(r),x_(t,e.child,null,n),e=PL(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Oq(e,t,n,r,i,o,u){if(n)return t.flags&256?(t.flags&=-257,r=x2(Error(jt(422))),fb(e,t,u,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=BE({mode:"visible",children:r.children},i,0,null),o=sg(o,i,u,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&x_(t,e.child,null,u),t.child.memoizedState=GC(u),t.memoizedState=VC,o);if(!(t.mode&1))return fb(e,t,u,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(jt(419)),r=x2(o,r,void 0),fb(e,t,u,r)}if(l=(u&e.childLanes)!==0,nl||l){if(r=ls,r!==null){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|u)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,sd(e,i),Nc(r,e,i,-1))}return ML(),r=x2(Error(jt(421))),fb(e,t,u,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Vq.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,Ml=Ip(i.nextSibling),Bl=t,Ni=!0,Ac=null,e!==null&&(Au[Ou++]=Wf,Au[Ou++]=Kf,Au[Ou++]=mg,Wf=e.id,Kf=e.overflow,mg=t),t=PL(t,r.children),t.flags|=4096,t)}function oM(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),FC(e.return,t,n)}function b2(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Uz(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Ta(e,t,r.children,n),r=qi.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&oM(e,n,t);else if(e.tag===19)oM(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(_i(qi,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Bw(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),b2(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Bw(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}b2(t,!0,n,null,o);break;case"together":b2(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function tw(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ad(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),yg|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(jt(153));if(t.child!==null){for(e=t.child,n=Op(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Op(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function kq(e,t,n){switch(t.tag){case 3:jz(t),v_();break;case 5:mz(t);break;case 1:il(t.type)&&Rw(t);break;case 4:xL(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;_i(Dw,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(_i(qi,qi.current&1),t.flags|=128,null):n&t.child.childLanes?$z(e,t,n):(_i(qi,qi.current&1),e=ad(e,t,n),e!==null?e.sibling:null);_i(qi,qi.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Uz(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),_i(qi,qi.current),r)break;return null;case 22:case 23:return t.lanes=0,Fz(e,t,n)}return ad(e,t,n)}var qz,HC,Vz,Gz;qz=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};HC=function(){};Vz=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Zm(Wh.current);var o=null;switch(n){case"input":i=pC(e,i),r=pC(e,r),o=[];break;case"select":i=Ki({},i,{value:void 0}),r=Ki({},r,{value:void 0}),o=[];break;case"textarea":i=yC(e,i),r=yC(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ow)}vC(n,r);var u;n=null;for(g in i)if(!r.hasOwnProperty(g)&&i.hasOwnProperty(g)&&i[g]!=null)if(g==="style"){var l=i[g];for(u in l)l.hasOwnProperty(u)&&(n||(n={}),n[u]="")}else g!=="dangerouslySetInnerHTML"&&g!=="children"&&g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(X0.hasOwnProperty(g)?o||(o=[]):(o=o||[]).push(g,null));for(g in r){var p=r[g];if(l=i!=null?i[g]:void 0,r.hasOwnProperty(g)&&p!==l&&(p!=null||l!=null))if(g==="style")if(l){for(u in l)!l.hasOwnProperty(u)||p&&p.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in p)p.hasOwnProperty(u)&&l[u]!==p[u]&&(n||(n={}),n[u]=p[u])}else n||(o||(o=[]),o.push(g,n)),n=p;else g==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,l=l?l.__html:void 0,p!=null&&l!==p&&(o=o||[]).push(g,p)):g==="children"?typeof p!="string"&&typeof p!="number"||(o=o||[]).push(g,""+p):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&(X0.hasOwnProperty(g)?(p!=null&&g==="onScroll"&&Ei("scroll",e),o||l===p||(o=[])):(o=o||[]).push(g,p))}n&&(o=o||[]).push("style",n);var g=o;(t.updateQueue=g)&&(t.flags|=4)}};Gz=function(e,t,n,r){n!==r&&(t.flags|=4)};function t0(e,t){if(!Ni)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ea(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Rq(e,t,n){var r=t.pendingProps;switch(dL(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ea(t),null;case 1:return il(t.type)&&kw(),ea(t),null;case 3:return r=t.stateNode,b_(),Ii(rl),Ii(ra),wL(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(cb(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ac!==null&&(eI(Ac),Ac=null))),HC(e,t),ea(t),null;case 5:bL(t);var i=Zm(l1.current);if(n=t.type,e!==null&&t.stateNode!=null)Vz(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(jt(166));return ea(t),null}if(e=Zm(Wh.current),cb(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[qh]=t,r[s1]=o,e=(t.mode&1)!==0,n){case"dialog":Ei("cancel",r),Ei("close",r);break;case"iframe":case"object":case"embed":Ei("load",r);break;case"video":case"audio":for(i=0;i<x0.length;i++)Ei(x0[i],r);break;case"source":Ei("error",r);break;case"img":case"image":case"link":Ei("error",r),Ei("load",r);break;case"details":Ei("toggle",r);break;case"input":pR(r,o),Ei("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ei("invalid",r);break;case"textarea":gR(r,o),Ei("invalid",r)}vC(n,o),i=null;for(var u in o)if(o.hasOwnProperty(u)){var l=o[u];u==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&ub(r.textContent,l,e),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&ub(r.textContent,l,e),i=["children",""+l]):X0.hasOwnProperty(u)&&l!=null&&u==="onScroll"&&Ei("scroll",r)}switch(n){case"input":tb(r),mR(r,o,!0);break;case"textarea":tb(r),yR(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Ow)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{u=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=_4(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=u.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),n==="select"&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[qh]=t,e[s1]=r,qz(e,t,!1,!1),t.stateNode=e;e:{switch(u=xC(n,r),n){case"dialog":Ei("cancel",e),Ei("close",e),i=r;break;case"iframe":case"object":case"embed":Ei("load",e),i=r;break;case"video":case"audio":for(i=0;i<x0.length;i++)Ei(x0[i],e);i=r;break;case"source":Ei("error",e),i=r;break;case"img":case"image":case"link":Ei("error",e),Ei("load",e),i=r;break;case"details":Ei("toggle",e),i=r;break;case"input":pR(e,r),i=pC(e,r),Ei("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Ki({},r,{value:void 0}),Ei("invalid",e);break;case"textarea":gR(e,r),i=yC(e,r),Ei("invalid",e);break;default:i=r}vC(n,i),l=i;for(o in l)if(l.hasOwnProperty(o)){var p=l[o];o==="style"?b4(e,p):o==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,p!=null&&v4(e,p)):o==="children"?typeof p=="string"?(n!=="textarea"||p!=="")&&Y0(e,p):typeof p=="number"&&Y0(e,""+p):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(X0.hasOwnProperty(o)?p!=null&&o==="onScroll"&&Ei("scroll",e):p!=null&&JP(e,o,p,u))}switch(n){case"input":tb(e),mR(e,r,!1);break;case"textarea":tb(e),yR(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Np(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Hy(e,!!r.multiple,o,!1):r.defaultValue!=null&&Hy(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Ow)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ea(t),null;case 6:if(e&&t.stateNode!=null)Gz(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(jt(166));if(n=Zm(l1.current),Zm(Wh.current),cb(t)){if(r=t.stateNode,n=t.memoizedProps,r[qh]=t,(o=r.nodeValue!==n)&&(e=Bl,e!==null))switch(e.tag){case 3:ub(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ub(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[qh]=t,t.stateNode=r}return ea(t),null;case 13:if(Ii(qi),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ni&&Ml!==null&&t.mode&1&&!(t.flags&128))lz(),v_(),t.flags|=98560,o=!1;else if(o=cb(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(jt(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(jt(317));o[qh]=t}else v_(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ea(t),o=!1}else Ac!==null&&(eI(Ac),Ac=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||qi.current&1?$o===0&&($o=3):ML())),t.updateQueue!==null&&(t.flags|=4),ea(t),null);case 4:return b_(),HC(e,t),e===null&&i1(t.stateNode.containerInfo),ea(t),null;case 10:return yL(t.type._context),ea(t),null;case 17:return il(t.type)&&kw(),ea(t),null;case 19:if(Ii(qi),o=t.memoizedState,o===null)return ea(t),null;if(r=(t.flags&128)!==0,u=o.rendering,u===null)if(r)t0(o,!1);else{if($o!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(u=Bw(e),u!==null){for(t.flags|=128,t0(o,!1),r=u.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,u=o.alternate,u===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return _i(qi,qi.current&1|2),t.child}e=e.sibling}o.tail!==null&&bo()>E_&&(t.flags|=128,r=!0,t0(o,!1),t.lanes=4194304)}else{if(!r)if(e=Bw(u),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t0(o,!0),o.tail===null&&o.tailMode==="hidden"&&!u.alternate&&!Ni)return ea(t),null}else 2*bo()-o.renderingStartTime>E_&&n!==1073741824&&(t.flags|=128,r=!0,t0(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(n=o.last,n!==null?n.sibling=u:t.child=u,o.last=u)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=bo(),t.sibling=null,n=qi.current,_i(qi,r?n&1|2:n&1),t):(ea(t),null);case 22:case 23:return RL(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?kl&1073741824&&(ea(t),t.subtreeFlags&6&&(t.flags|=8192)):ea(t),null;case 24:return null;case 25:return null}throw Error(jt(156,t.tag))}function Mq(e,t){switch(dL(t),t.tag){case 1:return il(t.type)&&kw(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return b_(),Ii(rl),Ii(ra),wL(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return bL(t),null;case 13:if(Ii(qi),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(jt(340));v_()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ii(qi),null;case 4:return b_(),null;case 10:return yL(t.type._context),null;case 22:case 23:return RL(),null;case 24:return null;default:return null}}var db=!1,ta=!1,Nq=typeof WeakSet=="function"?WeakSet:Set,fn=null;function jy(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ao(e,t,r)}else n.current=null}function ZC(e,t,n){try{n()}catch(r){ao(e,t,r)}}var sM=!1;function Dq(e,t){if(AC=Pw,e=K4(),hL(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var u=0,l=-1,p=-1,g=0,x=0,y=e,_=null;t:for(;;){for(var T;y!==n||i!==0&&y.nodeType!==3||(l=u+i),y!==o||r!==0&&y.nodeType!==3||(p=u+r),y.nodeType===3&&(u+=y.nodeValue.length),(T=y.firstChild)!==null;)_=y,y=T;for(;;){if(y===e)break t;if(_===n&&++g===i&&(l=u),_===o&&++x===r&&(p=u),(T=y.nextSibling)!==null)break;y=_,_=y.parentNode}y=T}n=l===-1||p===-1?null:{start:l,end:p}}else n=null}n=n||{start:0,end:0}}else n=null;for(OC={focusedElem:e,selectionRange:n},Pw=!1,fn=t;fn!==null;)if(t=fn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,fn=e;else for(;fn!==null;){t=fn;try{var A=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(A!==null){var O=A.memoizedProps,N=A.memoizedState,k=t.stateNode,R=k.getSnapshotBeforeUpdate(t.elementType===t.type?O:Tc(t.type,O),N);k.__reactInternalSnapshotBeforeUpdate=R}break;case 3:var z=t.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(jt(163))}}catch(D){ao(t,t.return,D)}if(e=t.sibling,e!==null){e.return=t.return,fn=e;break}fn=t.return}return A=sM,sM=!1,A}function z0(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&ZC(t,n,o)}i=i.next}while(i!==r)}}function zE(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function WC(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Hz(e){var t=e.alternate;t!==null&&(e.alternate=null,Hz(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[qh],delete t[s1],delete t[MC],delete t[_q],delete t[vq])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Zz(e){return e.tag===5||e.tag===3||e.tag===4}function aM(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Zz(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function KC(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ow));else if(r!==4&&(e=e.child,e!==null))for(KC(e,t,n),e=e.sibling;e!==null;)KC(e,t,n),e=e.sibling}function XC(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(XC(e,t,n),e=e.sibling;e!==null;)XC(e,t,n),e=e.sibling}var ks=null,Ic=!1;function Jd(e,t,n){for(n=n.child;n!==null;)Wz(e,t,n),n=n.sibling}function Wz(e,t,n){if(Zh&&typeof Zh.onCommitFiberUnmount=="function")try{Zh.onCommitFiberUnmount(LE,n)}catch{}switch(n.tag){case 5:ta||jy(n,t);case 6:var r=ks,i=Ic;ks=null,Jd(e,t,n),ks=r,Ic=i,ks!==null&&(Ic?(e=ks,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ks.removeChild(n.stateNode));break;case 18:ks!==null&&(Ic?(e=ks,n=n.stateNode,e.nodeType===8?p2(e.parentNode,n):e.nodeType===1&&p2(e,n),t1(e)):p2(ks,n.stateNode));break;case 4:r=ks,i=Ic,ks=n.stateNode.containerInfo,Ic=!0,Jd(e,t,n),ks=r,Ic=i;break;case 0:case 11:case 14:case 15:if(!ta&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,u=o.destroy;o=o.tag,u!==void 0&&(o&2||o&4)&&ZC(n,t,u),i=i.next}while(i!==r)}Jd(e,t,n);break;case 1:if(!ta&&(jy(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ao(n,t,l)}Jd(e,t,n);break;case 21:Jd(e,t,n);break;case 22:n.mode&1?(ta=(r=ta)||n.memoizedState!==null,Jd(e,t,n),ta=r):Jd(e,t,n);break;default:Jd(e,t,n)}}function lM(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Nq),t.forEach(function(r){var i=Gq.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function bc(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,l=u;e:for(;l!==null;){switch(l.tag){case 5:ks=l.stateNode,Ic=!1;break e;case 3:ks=l.stateNode.containerInfo,Ic=!0;break e;case 4:ks=l.stateNode.containerInfo,Ic=!0;break e}l=l.return}if(ks===null)throw Error(jt(160));Wz(o,u,i),ks=null,Ic=!1;var p=i.alternate;p!==null&&(p.return=null),i.return=null}catch(g){ao(i,t,g)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Kz(t,e),t=t.sibling}function Kz(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(bc(t,e),Ph(e),r&4){try{z0(3,e,e.return),zE(3,e)}catch(O){ao(e,e.return,O)}try{z0(5,e,e.return)}catch(O){ao(e,e.return,O)}}break;case 1:bc(t,e),Ph(e),r&512&&n!==null&&jy(n,n.return);break;case 5:if(bc(t,e),Ph(e),r&512&&n!==null&&jy(n,n.return),e.flags&32){var i=e.stateNode;try{Y0(i,"")}catch(O){ao(e,e.return,O)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,u=n!==null?n.memoizedProps:o,l=e.type,p=e.updateQueue;if(e.updateQueue=null,p!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&g4(i,o),xC(l,u);var g=xC(l,o);for(u=0;u<p.length;u+=2){var x=p[u],y=p[u+1];x==="style"?b4(i,y):x==="dangerouslySetInnerHTML"?v4(i,y):x==="children"?Y0(i,y):JP(i,x,y,g)}switch(l){case"input":mC(i,o);break;case"textarea":y4(i,o);break;case"select":var _=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var T=o.value;T!=null?Hy(i,!!o.multiple,T,!1):_!==!!o.multiple&&(o.defaultValue!=null?Hy(i,!!o.multiple,o.defaultValue,!0):Hy(i,!!o.multiple,o.multiple?[]:"",!1))}i[s1]=o}catch(O){ao(e,e.return,O)}}break;case 6:if(bc(t,e),Ph(e),r&4){if(e.stateNode===null)throw Error(jt(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(O){ao(e,e.return,O)}}break;case 3:if(bc(t,e),Ph(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{t1(t.containerInfo)}catch(O){ao(e,e.return,O)}break;case 4:bc(t,e),Ph(e);break;case 13:bc(t,e),Ph(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(OL=bo())),r&4&&lM(e);break;case 22:if(x=n!==null&&n.memoizedState!==null,e.mode&1?(ta=(g=ta)||x,bc(t,e),ta=g):bc(t,e),Ph(e),r&8192){if(g=e.memoizedState!==null,(e.stateNode.isHidden=g)&&!x&&e.mode&1)for(fn=e,x=e.child;x!==null;){for(y=fn=x;fn!==null;){switch(_=fn,T=_.child,_.tag){case 0:case 11:case 14:case 15:z0(4,_,_.return);break;case 1:jy(_,_.return);var A=_.stateNode;if(typeof A.componentWillUnmount=="function"){r=_,n=_.return;try{t=r,A.props=t.memoizedProps,A.state=t.memoizedState,A.componentWillUnmount()}catch(O){ao(r,n,O)}}break;case 5:jy(_,_.return);break;case 22:if(_.memoizedState!==null){cM(y);continue}}T!==null?(T.return=_,fn=T):cM(y)}x=x.sibling}e:for(x=null,y=e;;){if(y.tag===5){if(x===null){x=y;try{i=y.stateNode,g?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=y.stateNode,p=y.memoizedProps.style,u=p!=null&&p.hasOwnProperty("display")?p.display:null,l.style.display=x4("display",u))}catch(O){ao(e,e.return,O)}}}else if(y.tag===6){if(x===null)try{y.stateNode.nodeValue=g?"":y.memoizedProps}catch(O){ao(e,e.return,O)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===e)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===e)break e;for(;y.sibling===null;){if(y.return===null||y.return===e)break e;x===y&&(x=null),y=y.return}x===y&&(x=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:bc(t,e),Ph(e),r&4&&lM(e);break;case 21:break;default:bc(t,e),Ph(e)}}function Ph(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Zz(n)){var r=n;break e}n=n.return}throw Error(jt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Y0(i,""),r.flags&=-33);var o=aM(e);XC(e,o,i);break;case 3:case 4:var u=r.stateNode.containerInfo,l=aM(e);KC(e,l,u);break;default:throw Error(jt(161))}}catch(p){ao(e,e.return,p)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function zq(e,t,n){fn=e,Xz(e)}function Xz(e,t,n){for(var r=(e.mode&1)!==0;fn!==null;){var i=fn,o=i.child;if(i.tag===22&&r){var u=i.memoizedState!==null||db;if(!u){var l=i.alternate,p=l!==null&&l.memoizedState!==null||ta;l=db;var g=ta;if(db=u,(ta=p)&&!g)for(fn=i;fn!==null;)u=fn,p=u.child,u.tag===22&&u.memoizedState!==null?hM(i):p!==null?(p.return=u,fn=p):hM(i);for(;o!==null;)fn=o,Xz(o),o=o.sibling;fn=i,db=l,ta=g}uM(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,fn=o):uM(e)}}function uM(e){for(;fn!==null;){var t=fn;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ta||zE(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ta)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Tc(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&HR(t,o,r);break;case 3:var u=t.updateQueue;if(u!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}HR(t,u,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var p=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":p.autoFocus&&n.focus();break;case"img":p.src&&(n.src=p.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var g=t.alternate;if(g!==null){var x=g.memoizedState;if(x!==null){var y=x.dehydrated;y!==null&&t1(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(jt(163))}ta||t.flags&512&&WC(t)}catch(_){ao(t,t.return,_)}}if(t===e){fn=null;break}if(n=t.sibling,n!==null){n.return=t.return,fn=n;break}fn=t.return}}function cM(e){for(;fn!==null;){var t=fn;if(t===e){fn=null;break}var n=t.sibling;if(n!==null){n.return=t.return,fn=n;break}fn=t.return}}function hM(e){for(;fn!==null;){var t=fn;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{zE(4,t)}catch(p){ao(t,n,p)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(p){ao(t,i,p)}}var o=t.return;try{WC(t)}catch(p){ao(t,o,p)}break;case 5:var u=t.return;try{WC(t)}catch(p){ao(t,u,p)}}}catch(p){ao(t,t.return,p)}if(t===e){fn=null;break}var l=t.sibling;if(l!==null){l.return=t.return,fn=l;break}fn=t.return}}var Fq=Math.ceil,Uw=bd.ReactCurrentDispatcher,LL=bd.ReactCurrentOwner,Du=bd.ReactCurrentBatchConfig,Or=0,ls=null,Ao=null,Fs=0,kl=0,$y=Qp(0),$o=0,f1=null,yg=0,FE=0,AL=0,F0=null,el=null,OL=0,E_=1/0,Gf=null,qw=!1,YC=null,Lp=null,pb=!1,xp=null,Vw=0,B0=0,JC=null,nw=-1,rw=0;function Aa(){return Or&6?bo():nw!==-1?nw:nw=bo()}function Ap(e){return e.mode&1?Or&2&&Fs!==0?Fs&-Fs:bq.transition!==null?(rw===0&&(rw=R4()),rw):(e=Zr,e!==0||(e=window.event,e=e===void 0?16:j4(e.type)),e):1}function Nc(e,t,n,r){if(50<B0)throw B0=0,JC=null,Error(jt(185));lx(e,n,r),(!(Or&2)||e!==ls)&&(e===ls&&(!(Or&2)&&(FE|=n),$o===4&&up(e,Fs)),ol(e,r),n===1&&Or===0&&!(t.mode&1)&&(E_=bo()+500,ME&&em()))}function ol(e,t){var n=e.callbackNode;b9(e,t);var r=Iw(e,e===ls?Fs:0);if(r===0)n!==null&&xR(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&xR(n),t===1)e.tag===0?xq(fM.bind(null,e)):oz(fM.bind(null,e)),gq(function(){!(Or&6)&&em()}),n=null;else{switch(M4(r)){case 1:n=rL;break;case 4:n=O4;break;case 16:n=Cw;break;case 536870912:n=k4;break;default:n=Cw}n=iF(n,Yz.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Yz(e,t){if(nw=-1,rw=0,Or&6)throw Error(jt(327));var n=e.callbackNode;if(Yy()&&e.callbackNode!==n)return null;var r=Iw(e,e===ls?Fs:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Gw(e,r);else{t=r;var i=Or;Or|=2;var o=Qz();(ls!==e||Fs!==t)&&(Gf=null,E_=bo()+500,og(e,t));do try{$q();break}catch(l){Jz(e,l)}while(!0);gL(),Uw.current=o,Or=i,Ao!==null?t=0:(ls=null,Fs=0,t=$o)}if(t!==0){if(t===2&&(i=TC(e),i!==0&&(r=i,t=QC(e,i))),t===1)throw n=f1,og(e,0),up(e,r),ol(e,bo()),n;if(t===6)up(e,r);else{if(i=e.current.alternate,!(r&30)&&!Bq(i)&&(t=Gw(e,r),t===2&&(o=TC(e),o!==0&&(r=o,t=QC(e,o))),t===1))throw n=f1,og(e,0),up(e,r),ol(e,bo()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(jt(345));case 2:Fm(e,el,Gf);break;case 3:if(up(e,r),(r&130023424)===r&&(t=OL+500-bo(),10<t)){if(Iw(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Aa(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=RC(Fm.bind(null,e,el,Gf),t);break}Fm(e,el,Gf);break;case 4:if(up(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-Mc(r);o=1<<u,u=t[u],u>i&&(i=u),r&=~o}if(r=i,r=bo()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Fq(r/1960))-r,10<r){e.timeoutHandle=RC(Fm.bind(null,e,el,Gf),r);break}Fm(e,el,Gf);break;case 5:Fm(e,el,Gf);break;default:throw Error(jt(329))}}}return ol(e,bo()),e.callbackNode===n?Yz.bind(null,e):null}function QC(e,t){var n=F0;return e.current.memoizedState.isDehydrated&&(og(e,t).flags|=256),e=Gw(e,t),e!==2&&(t=el,el=n,t!==null&&eI(t)),e}function eI(e){el===null?el=e:el.push.apply(el,e)}function Bq(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Bc(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function up(e,t){for(t&=~AL,t&=~FE,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Mc(t),r=1<<n;e[n]=-1,t&=~r}}function fM(e){if(Or&6)throw Error(jt(327));Yy();var t=Iw(e,0);if(!(t&1))return ol(e,bo()),null;var n=Gw(e,t);if(e.tag!==0&&n===2){var r=TC(e);r!==0&&(t=r,n=QC(e,r))}if(n===1)throw n=f1,og(e,0),up(e,t),ol(e,bo()),n;if(n===6)throw Error(jt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Fm(e,el,Gf),ol(e,bo()),null}function kL(e,t){var n=Or;Or|=1;try{return e(t)}finally{Or=n,Or===0&&(E_=bo()+500,ME&&em())}}function _g(e){xp!==null&&xp.tag===0&&!(Or&6)&&Yy();var t=Or;Or|=1;var n=Du.transition,r=Zr;try{if(Du.transition=null,Zr=1,e)return e()}finally{Zr=r,Du.transition=n,Or=t,!(Or&6)&&em()}}function RL(){kl=$y.current,Ii($y)}function og(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,mq(n)),Ao!==null)for(n=Ao.return;n!==null;){var r=n;switch(dL(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&kw();break;case 3:b_(),Ii(rl),Ii(ra),wL();break;case 5:bL(r);break;case 4:b_();break;case 13:Ii(qi);break;case 19:Ii(qi);break;case 10:yL(r.type._context);break;case 22:case 23:RL()}n=n.return}if(ls=e,Ao=e=Op(e.current,null),Fs=kl=t,$o=0,f1=null,AL=FE=yg=0,el=F0=null,Hm!==null){for(t=0;t<Hm.length;t++)if(n=Hm[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var u=o.next;o.next=i,r.next=u}n.pending=r}Hm=null}return e}function Jz(e,t){do{var n=Ao;try{if(gL(),Qb.current=$w,jw){for(var r=Wi.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}jw=!1}if(gg=0,ts=jo=Wi=null,D0=!1,u1=0,LL.current=null,n===null||n.return===null){$o=1,f1=t,Ao=null;break}e:{var o=e,u=n.return,l=n,p=t;if(t=Fs,l.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){var g=p,x=l,y=x.tag;if(!(x.mode&1)&&(y===0||y===11||y===15)){var _=x.alternate;_?(x.updateQueue=_.updateQueue,x.memoizedState=_.memoizedState,x.lanes=_.lanes):(x.updateQueue=null,x.memoizedState=null)}var T=QR(u);if(T!==null){T.flags&=-257,eM(T,u,l,o,t),T.mode&1&&JR(o,g,t),t=T,p=g;var A=t.updateQueue;if(A===null){var O=new Set;O.add(p),t.updateQueue=O}else A.add(p);break e}else{if(!(t&1)){JR(o,g,t),ML();break e}p=Error(jt(426))}}else if(Ni&&l.mode&1){var N=QR(u);if(N!==null){!(N.flags&65536)&&(N.flags|=256),eM(N,u,l,o,t),pL(w_(p,l));break e}}o=p=w_(p,l),$o!==4&&($o=2),F0===null?F0=[o]:F0.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var k=Nz(o,p,t);GR(o,k);break e;case 1:l=p;var R=o.type,z=o.stateNode;if(!(o.flags&128)&&(typeof R.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(Lp===null||!Lp.has(z)))){o.flags|=65536,t&=-t,o.lanes|=t;var D=Dz(o,l,t);GR(o,D);break e}}o=o.return}while(o!==null)}tF(n)}catch(U){t=U,Ao===n&&n!==null&&(Ao=n=n.return);continue}break}while(!0)}function Qz(){var e=Uw.current;return Uw.current=$w,e===null?$w:e}function ML(){($o===0||$o===3||$o===2)&&($o=4),ls===null||!(yg&268435455)&&!(FE&268435455)||up(ls,Fs)}function Gw(e,t){var n=Or;Or|=2;var r=Qz();(ls!==e||Fs!==t)&&(Gf=null,og(e,t));do try{jq();break}catch(i){Jz(e,i)}while(!0);if(gL(),Or=n,Uw.current=r,Ao!==null)throw Error(jt(261));return ls=null,Fs=0,$o}function jq(){for(;Ao!==null;)eF(Ao)}function $q(){for(;Ao!==null&&!f9();)eF(Ao)}function eF(e){var t=rF(e.alternate,e,kl);e.memoizedProps=e.pendingProps,t===null?tF(e):Ao=t,LL.current=null}function tF(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Mq(n,t),n!==null){n.flags&=32767,Ao=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{$o=6,Ao=null;return}}else if(n=Rq(n,t,kl),n!==null){Ao=n;return}if(t=t.sibling,t!==null){Ao=t;return}Ao=t=e}while(t!==null);$o===0&&($o=5)}function Fm(e,t,n){var r=Zr,i=Du.transition;try{Du.transition=null,Zr=1,Uq(e,t,n,r)}finally{Du.transition=i,Zr=r}return null}function Uq(e,t,n,r){do Yy();while(xp!==null);if(Or&6)throw Error(jt(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(jt(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(w9(e,o),e===ls&&(Ao=ls=null,Fs=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||pb||(pb=!0,iF(Cw,function(){return Yy(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Du.transition,Du.transition=null;var u=Zr;Zr=1;var l=Or;Or|=4,LL.current=null,Dq(e,n),Kz(n,e),lq(OC),Pw=!!AC,OC=AC=null,e.current=n,zq(n),d9(),Or=l,Zr=u,Du.transition=o}else e.current=n;if(pb&&(pb=!1,xp=e,Vw=i),o=e.pendingLanes,o===0&&(Lp=null),g9(n.stateNode),ol(e,bo()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(qw)throw qw=!1,e=YC,YC=null,e;return Vw&1&&e.tag!==0&&Yy(),o=e.pendingLanes,o&1?e===JC?B0++:(B0=0,JC=e):B0=0,em(),null}function Yy(){if(xp!==null){var e=M4(Vw),t=Du.transition,n=Zr;try{if(Du.transition=null,Zr=16>e?16:e,xp===null)var r=!1;else{if(e=xp,xp=null,Vw=0,Or&6)throw Error(jt(331));var i=Or;for(Or|=4,fn=e.current;fn!==null;){var o=fn,u=o.child;if(fn.flags&16){var l=o.deletions;if(l!==null){for(var p=0;p<l.length;p++){var g=l[p];for(fn=g;fn!==null;){var x=fn;switch(x.tag){case 0:case 11:case 15:z0(8,x,o)}var y=x.child;if(y!==null)y.return=x,fn=y;else for(;fn!==null;){x=fn;var _=x.sibling,T=x.return;if(Hz(x),x===g){fn=null;break}if(_!==null){_.return=T,fn=_;break}fn=T}}}var A=o.alternate;if(A!==null){var O=A.child;if(O!==null){A.child=null;do{var N=O.sibling;O.sibling=null,O=N}while(O!==null)}}fn=o}}if(o.subtreeFlags&2064&&u!==null)u.return=o,fn=u;else e:for(;fn!==null;){if(o=fn,o.flags&2048)switch(o.tag){case 0:case 11:case 15:z0(9,o,o.return)}var k=o.sibling;if(k!==null){k.return=o.return,fn=k;break e}fn=o.return}}var R=e.current;for(fn=R;fn!==null;){u=fn;var z=u.child;if(u.subtreeFlags&2064&&z!==null)z.return=u,fn=z;else e:for(u=R;fn!==null;){if(l=fn,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:zE(9,l)}}catch(U){ao(l,l.return,U)}if(l===u){fn=null;break e}var D=l.sibling;if(D!==null){D.return=l.return,fn=D;break e}fn=l.return}}if(Or=i,em(),Zh&&typeof Zh.onPostCommitFiberRoot=="function")try{Zh.onPostCommitFiberRoot(LE,e)}catch{}r=!0}return r}finally{Zr=n,Du.transition=t}}return!1}function dM(e,t,n){t=w_(n,t),t=Nz(e,t,1),e=Pp(e,t,1),t=Aa(),e!==null&&(lx(e,1,t),ol(e,t))}function ao(e,t,n){if(e.tag===3)dM(e,e,n);else for(;t!==null;){if(t.tag===3){dM(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Lp===null||!Lp.has(r))){e=w_(n,e),e=Dz(t,e,1),t=Pp(t,e,1),e=Aa(),t!==null&&(lx(t,1,e),ol(t,e));break}}t=t.return}}function qq(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Aa(),e.pingedLanes|=e.suspendedLanes&n,ls===e&&(Fs&n)===n&&($o===4||$o===3&&(Fs&130023424)===Fs&&500>bo()-OL?og(e,0):AL|=n),ol(e,t)}function nF(e,t){t===0&&(e.mode&1?(t=ib,ib<<=1,!(ib&130023424)&&(ib=4194304)):t=1);var n=Aa();e=sd(e,t),e!==null&&(lx(e,t,n),ol(e,n))}function Vq(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),nF(e,n)}function Gq(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(jt(314))}r!==null&&r.delete(t),nF(e,n)}var rF;rF=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||rl.current)nl=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return nl=!1,kq(e,t,n);nl=!!(e.flags&131072)}else nl=!1,Ni&&t.flags&1048576&&sz(t,Nw,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;tw(e,t),e=t.pendingProps;var i=__(t,ra.current);Xy(t,n),i=SL(null,t,r,e,i,n);var o=TL();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,il(r)?(o=!0,Rw(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,vL(t),i.updater=NE,t.stateNode=i,i._reactInternals=t,jC(t,r,e,n),t=qC(null,t,r,!0,o,n)):(t.tag=0,Ni&&o&&fL(t),Ta(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(tw(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=Zq(r),e=Tc(r,e),i){case 0:t=UC(null,t,r,e,n);break e;case 1:t=rM(null,t,r,e,n);break e;case 11:t=tM(null,t,r,e,n);break e;case 14:t=nM(null,t,r,Tc(r.type,e),n);break e}throw Error(jt(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Tc(r,i),UC(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Tc(r,i),rM(e,t,r,i,n);case 3:e:{if(jz(t),e===null)throw Error(jt(387));r=t.pendingProps,o=t.memoizedState,i=o.element,cz(e,t),Fw(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=w_(Error(jt(423)),t),t=iM(e,t,r,n,i);break e}else if(r!==i){i=w_(Error(jt(424)),t),t=iM(e,t,r,n,i);break e}else for(Ml=Ip(t.stateNode.containerInfo.firstChild),Bl=t,Ni=!0,Ac=null,n=pz(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(v_(),r===i){t=ad(e,t,n);break e}Ta(e,t,r,n)}t=t.child}return t;case 5:return mz(t),e===null&&zC(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,u=i.children,kC(r,i)?u=null:o!==null&&kC(r,o)&&(t.flags|=32),Bz(e,t),Ta(e,t,u,n),t.child;case 6:return e===null&&zC(t),null;case 13:return $z(e,t,n);case 4:return xL(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=x_(t,null,r,n):Ta(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Tc(r,i),tM(e,t,r,i,n);case 7:return Ta(e,t,t.pendingProps,n),t.child;case 8:return Ta(e,t,t.pendingProps.children,n),t.child;case 12:return Ta(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,_i(Dw,r._currentValue),r._currentValue=u,o!==null)if(Bc(o.value,u)){if(o.children===i.children&&!rl.current){t=ad(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){u=o.child;for(var p=l.firstContext;p!==null;){if(p.context===r){if(o.tag===1){p=Qf(-1,n&-n),p.tag=2;var g=o.updateQueue;if(g!==null){g=g.shared;var x=g.pending;x===null?p.next=p:(p.next=x.next,x.next=p),g.pending=p}}o.lanes|=n,p=o.alternate,p!==null&&(p.lanes|=n),FC(o.return,n,t),l.lanes|=n;break}p=p.next}}else if(o.tag===10)u=o.type===t.type?null:o.child;else if(o.tag===18){if(u=o.return,u===null)throw Error(jt(341));u.lanes|=n,l=u.alternate,l!==null&&(l.lanes|=n),FC(u,n,t),u=o.sibling}else u=o.child;if(u!==null)u.return=o;else for(u=o;u!==null;){if(u===t){u=null;break}if(o=u.sibling,o!==null){o.return=u.return,u=o;break}u=u.return}o=u}Ta(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Xy(t,n),i=$u(i),r=r(i),t.flags|=1,Ta(e,t,r,n),t.child;case 14:return r=t.type,i=Tc(r,t.pendingProps),i=Tc(r.type,i),nM(e,t,r,i,n);case 15:return zz(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Tc(r,i),tw(e,t),t.tag=1,il(r)?(e=!0,Rw(t)):e=!1,Xy(t,n),fz(t,r,i),jC(t,r,i,n),qC(null,t,r,!0,e,n);case 19:return Uz(e,t,n);case 22:return Fz(e,t,n)}throw Error(jt(156,t.tag))};function iF(e,t){return A4(e,t)}function Hq(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mu(e,t,n,r){return new Hq(e,t,n,r)}function NL(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Zq(e){if(typeof e=="function")return NL(e)?1:0;if(e!=null){if(e=e.$$typeof,e===eL)return 11;if(e===tL)return 14}return 2}function Op(e,t){var n=e.alternate;return n===null?(n=Mu(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function iw(e,t,n,r,i,o){var u=2;if(r=e,typeof e=="function")NL(e)&&(u=1);else if(typeof e=="string")u=5;else e:switch(e){case Oy:return sg(n.children,i,o,t);case QP:u=8,i|=8;break;case cC:return e=Mu(12,n,t,i|2),e.elementType=cC,e.lanes=o,e;case hC:return e=Mu(13,n,t,i),e.elementType=hC,e.lanes=o,e;case fC:return e=Mu(19,n,t,i),e.elementType=fC,e.lanes=o,e;case d4:return BE(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case h4:u=10;break e;case f4:u=9;break e;case eL:u=11;break e;case tL:u=14;break e;case sp:u=16,r=null;break e}throw Error(jt(130,e==null?e:typeof e,""))}return t=Mu(u,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function sg(e,t,n,r){return e=Mu(7,e,r,t),e.lanes=n,e}function BE(e,t,n,r){return e=Mu(22,e,r,t),e.elementType=d4,e.lanes=n,e.stateNode={isHidden:!1},e}function w2(e,t,n){return e=Mu(6,e,null,t),e.lanes=n,e}function E2(e,t,n){return t=Mu(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Wq(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=r2(0),this.expirationTimes=r2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=r2(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function DL(e,t,n,r,i,o,u,l,p){return e=new Wq(e,t,n,l,p),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Mu(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},vL(o),e}function Kq(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ay,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function oF(e){if(!e)return Dp;e=e._reactInternals;e:{if(zg(e)!==e||e.tag!==1)throw Error(jt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(il(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(jt(171))}if(e.tag===1){var n=e.type;if(il(n))return iz(e,n,t)}return t}function sF(e,t,n,r,i,o,u,l,p){return e=DL(n,r,!0,e,i,o,u,l,p),e.context=oF(null),n=e.current,r=Aa(),i=Ap(n),o=Qf(r,i),o.callback=t??null,Pp(n,o,i),e.current.lanes=i,lx(e,i,r),ol(e,r),e}function jE(e,t,n,r){var i=t.current,o=Aa(),u=Ap(i);return n=oF(n),t.context===null?t.context=n:t.pendingContext=n,t=Qf(o,u),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Pp(i,t,u),e!==null&&(Nc(e,i,u,o),Jb(e,i,u)),u}function Hw(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function pM(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function zL(e,t){pM(e,t),(e=e.alternate)&&pM(e,t)}function Xq(){return null}var aF=typeof reportError=="function"?reportError:function(e){console.error(e)};function FL(e){this._internalRoot=e}$E.prototype.render=FL.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(jt(409));jE(e,t,null,null)};$E.prototype.unmount=FL.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;_g(function(){jE(null,e,null,null)}),t[od]=null}};function $E(e){this._internalRoot=e}$E.prototype.unstable_scheduleHydration=function(e){if(e){var t=z4();e={blockedOn:null,target:e,priority:t};for(var n=0;n<lp.length&&t!==0&&t<lp[n].priority;n++);lp.splice(n,0,e),n===0&&B4(e)}};function BL(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function UE(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function mM(){}function Yq(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var g=Hw(u);o.call(g)}}var u=sF(t,r,e,0,null,!1,!1,"",mM);return e._reactRootContainer=u,e[od]=u.current,i1(e.nodeType===8?e.parentNode:e),_g(),u}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var g=Hw(p);l.call(g)}}var p=DL(e,0,!1,null,null,!1,!1,"",mM);return e._reactRootContainer=p,e[od]=p.current,i1(e.nodeType===8?e.parentNode:e),_g(function(){jE(t,p,n,r)}),p}function qE(e,t,n,r,i){var o=n._reactRootContainer;if(o){var u=o;if(typeof i=="function"){var l=i;i=function(){var p=Hw(u);l.call(p)}}jE(t,u,e,i)}else u=Yq(n,t,e,i,r);return Hw(u)}N4=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=v0(t.pendingLanes);n!==0&&(iL(t,n|1),ol(t,bo()),!(Or&6)&&(E_=bo()+500,em()))}break;case 13:_g(function(){var r=sd(e,1);if(r!==null){var i=Aa();Nc(r,e,1,i)}}),zL(e,1)}};oL=function(e){if(e.tag===13){var t=sd(e,134217728);if(t!==null){var n=Aa();Nc(t,e,134217728,n)}zL(e,134217728)}};D4=function(e){if(e.tag===13){var t=Ap(e),n=sd(e,t);if(n!==null){var r=Aa();Nc(n,e,t,r)}zL(e,t)}};z4=function(){return Zr};F4=function(e,t){var n=Zr;try{return Zr=e,t()}finally{Zr=n}};wC=function(e,t,n){switch(t){case"input":if(mC(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=RE(r);if(!i)throw Error(jt(90));m4(r),mC(r,i)}}}break;case"textarea":y4(e,n);break;case"select":t=n.value,t!=null&&Hy(e,!!n.multiple,t,!1)}};S4=kL;T4=_g;var Jq={usingClientEntryPoint:!1,Events:[cx,Ny,RE,w4,E4,kL]},n0={findFiberByHostInstance:Gm,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Qq={bundleType:n0.bundleType,version:n0.version,rendererPackageName:n0.rendererPackageName,rendererConfig:n0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bd.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=P4(e),e===null?null:e.stateNode},findFiberByHostInstance:n0.findFiberByHostInstance||Xq,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mb.isDisabled&&mb.supportsFiber)try{LE=mb.inject(Qq),Zh=mb}catch{}}Jl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jq;Jl.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!BL(t))throw Error(jt(200));return Kq(e,t,null,n)};Jl.createRoot=function(e,t){if(!BL(e))throw Error(jt(299));var n=!1,r="",i=aF;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=DL(e,1,!1,null,null,n,!1,r,i),e[od]=t.current,i1(e.nodeType===8?e.parentNode:e),new FL(t)};Jl.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(jt(188)):(e=Object.keys(e).join(","),Error(jt(268,e)));return e=P4(t),e=e===null?null:e.stateNode,e};Jl.flushSync=function(e){return _g(e)};Jl.hydrate=function(e,t,n){if(!UE(t))throw Error(jt(200));return qE(null,e,t,!0,n)};Jl.hydrateRoot=function(e,t,n){if(!BL(e))throw Error(jt(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",u=aF;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(u=n.onRecoverableError)),t=sF(t,null,e,1,n??null,i,!1,o,u),e[od]=t.current,i1(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $E(t)};Jl.render=function(e,t,n){if(!UE(t))throw Error(jt(200));return qE(null,e,t,!1,n)};Jl.unmountComponentAtNode=function(e){if(!UE(e))throw Error(jt(40));return e._reactRootContainer?(_g(function(){qE(null,null,e,!1,function(){e._reactRootContainer=null,e[od]=null})}),!0):!1};Jl.unstable_batchedUpdates=kL;Jl.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!UE(n))throw Error(jt(200));if(e==null||e._reactInternals===void 0)throw Error(jt(38));return qE(e,t,n,!1,r)};Jl.version="18.2.0-next-9e3b772b8-20220608";function lF(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lF)}catch(e){console.error(e)}}lF(),s4.exports=Jl;var VE=s4.exports;const eV=xd(VE),tV=K5({__proto__:null,default:eV},[VE]);var gM=VE;lC.createRoot=gM.createRoot,lC.hydrateRoot=gM.hydrateRoot;/**
 * @remix-run/router v1.15.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lo(){return lo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lo.apply(this,arguments)}var vo;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(vo||(vo={}));const yM="popstate";function nV(e){e===void 0&&(e={});function t(r,i){let{pathname:o,search:u,hash:l}=r.location;return d1("",{pathname:o,search:u,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:vg(i)}return iV(t,n,null,e)}function Qn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function S_(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function rV(){return Math.random().toString(36).substr(2,8)}function _M(e,t){return{usr:e.state,key:e.key,idx:t}}function d1(e,t,n,r){return n===void 0&&(n=null),lo({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?wd(t):t,{state:n,key:t&&t.key||r||rV()})}function vg(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function wd(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function iV(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,u=i.history,l=vo.Pop,p=null,g=x();g==null&&(g=0,u.replaceState(lo({},u.state,{idx:g}),""));function x(){return(u.state||{idx:null}).idx}function y(){l=vo.Pop;let N=x(),k=N==null?null:N-g;g=N,p&&p({action:l,location:O.location,delta:k})}function _(N,k){l=vo.Push;let R=d1(O.location,N,k);n&&n(R,N),g=x()+1;let z=_M(R,g),D=O.createHref(R);try{u.pushState(z,"",D)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;i.location.assign(D)}o&&p&&p({action:l,location:O.location,delta:1})}function T(N,k){l=vo.Replace;let R=d1(O.location,N,k);n&&n(R,N),g=x();let z=_M(R,g),D=O.createHref(R);u.replaceState(z,"",D),o&&p&&p({action:l,location:O.location,delta:0})}function A(N){let k=i.location.origin!=="null"?i.location.origin:i.location.href,R=typeof N=="string"?N:vg(N);return R=R.replace(/ $/,"%20"),Qn(k,"No window.location.(origin|href) available to create URL for href: "+R),new URL(R,k)}let O={get action(){return l},get location(){return e(i,u)},listen(N){if(p)throw new Error("A history only accepts one active listener");return i.addEventListener(yM,y),p=N,()=>{i.removeEventListener(yM,y),p=null}},createHref(N){return t(i,N)},createURL:A,encodeLocation(N){let k=A(N);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:_,replace:T,go(N){return u.go(N)}};return O}var so;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(so||(so={}));const oV=new Set(["lazy","caseSensitive","path","id","index","children"]);function sV(e){return e.index===!0}function tI(e,t,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),e.map((i,o)=>{let u=[...n,o],l=typeof i.id=="string"?i.id:u.join("-");if(Qn(i.index!==!0||!i.children,"Cannot specify children on an index route"),Qn(!r[l],'Found a route id collision on id "'+l+`".  Route id's must be globally unique within Data Router usages`),sV(i)){let p=lo({},i,t(i),{id:l});return r[l]=p,p}else{let p=lo({},i,t(i),{id:l,children:void 0});return r[l]=p,i.children&&(p.children=tI(i.children,t,u,r)),p}})}function Uy(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?wd(t):t,i=nv(r.pathname||"/",n);if(i==null)return null;let o=uF(e);lV(o);let u=null;for(let l=0;u==null&&l<o.length;++l){let p=xV(i);u=yV(o[l],p)}return u}function aV(e,t){let{route:n,pathname:r,params:i}=e;return{id:n.id,pathname:r,params:i,data:t[n.id],handle:n.handle}}function uF(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,u,l)=>{let p={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:u,route:o};p.relativePath.startsWith("/")&&(Qn(p.relativePath.startsWith(r),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(r.length));let g=ed([r,p.relativePath]),x=n.concat(p);o.children&&o.children.length>0&&(Qn(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),uF(o.children,t,x,g)),!(o.path==null&&!o.index)&&t.push({path:g,score:mV(g,o.index),routesMeta:x})};return e.forEach((o,u)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))i(o,u);else for(let p of cF(o.path))i(o,u,p)}),t}function cF(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let u=cF(r.join("/")),l=[];return l.push(...u.map(p=>p===""?o:[o,p].join("/"))),i&&l.push(...u),l.map(p=>e.startsWith("/")&&p===""?"/":p)}function lV(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:gV(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const uV=/^:[\w-]+$/,cV=3,hV=2,fV=1,dV=10,pV=-2,vM=e=>e==="*";function mV(e,t){let n=e.split("/"),r=n.length;return n.some(vM)&&(r+=pV),t&&(r+=hV),n.filter(i=>!vM(i)).reduce((i,o)=>i+(uV.test(o)?cV:o===""?fV:dV),r)}function gV(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function yV(e,t){let{routesMeta:n}=e,r={},i="/",o=[];for(let u=0;u<n.length;++u){let l=n[u],p=u===n.length-1,g=i==="/"?t:t.slice(i.length)||"/",x=_V({path:l.relativePath,caseSensitive:l.caseSensitive,end:p},g);if(!x)return null;Object.assign(r,x.params);let y=l.route;o.push({params:r,pathname:ed([i,x.pathname]),pathnameBase:EV(ed([i,x.pathnameBase])),route:y}),x.pathnameBase!=="/"&&(i=ed([i,x.pathnameBase]))}return o}function _V(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=vV(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],u=o.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((g,x,y)=>{let{paramName:_,isOptional:T}=x;if(_==="*"){let O=l[y]||"";u=o.slice(0,o.length-O.length).replace(/(.)\/+$/,"$1")}const A=l[y];return T&&!A?g[_]=void 0:g[_]=(A||"").replace(/%2F/g,"/"),g},{}),pathname:o,pathnameBase:u,pattern:e}}function vV(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),S_(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,l,p)=>(r.push({paramName:l,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function xV(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return S_(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function nv(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function bV(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?wd(e):e;return{pathname:n?n.startsWith("/")?n:wV(n,t):t,search:SV(r),hash:TV(i)}}function wV(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function S2(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function hF(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function GE(e,t){let n=hF(e);return t?n.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function HE(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=wd(e):(i=lo({},e),Qn(!i.pathname||!i.pathname.includes("?"),S2("?","pathname","search",i)),Qn(!i.pathname||!i.pathname.includes("#"),S2("#","pathname","hash",i)),Qn(!i.search||!i.search.includes("#"),S2("#","search","hash",i)));let o=e===""||i.pathname==="",u=o?"/":i.pathname,l;if(u==null)l=n;else{let y=t.length-1;if(!r&&u.startsWith("..")){let _=u.split("/");for(;_[0]==="..";)_.shift(),y-=1;i.pathname=_.join("/")}l=y>=0?t[y]:"/"}let p=bV(i,l),g=u&&u!=="/"&&u.endsWith("/"),x=(o||u===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(g||x)&&(p.pathname+="/"),p}const ed=e=>e.join("/").replace(/\/\/+/g,"/"),EV=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),SV=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,TV=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class jL{constructor(t,n,r,i){i===void 0&&(i=!1),this.status=t,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function fF(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const dF=["post","put","patch","delete"],CV=new Set(dF),IV=["get",...dF],PV=new Set(IV),LV=new Set([301,302,303,307,308]),AV=new Set([307,308]),T2={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},OV={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},r0={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},pF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kV=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),mF="remix-router-transitions";function RV(e){const t=e.window?e.window:typeof window<"u"?window:void 0,n=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",r=!n;Qn(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(e.mapRouteProperties)i=e.mapRouteProperties;else if(e.detectErrorBoundary){let K=e.detectErrorBoundary;i=te=>({hasErrorBoundary:K(te)})}else i=kV;let o={},u=tI(e.routes,i,void 0,o),l,p=e.basename||"/",g=lo({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1},e.future),x=null,y=new Set,_=null,T=null,A=null,O=e.hydrationData!=null,N=Uy(u,e.history.location,p),k=null;if(N==null){let K=Iu(404,{pathname:e.history.location.pathname}),{matches:te,route:ae}=IM(u);N=te,k={[ae.id]:K}}let R,z=N.some(K=>K.route.lazy),D=N.some(K=>K.route.loader);if(z)R=!1;else if(!D)R=!0;else if(g.v7_partialHydration){let K=e.hydrationData?e.hydrationData.loaderData:null,te=e.hydrationData?e.hydrationData.errors:null,ae=pe=>pe.route.loader?pe.route.loader.hydrate===!0?!1:K&&K[pe.route.id]!==void 0||te&&te[pe.route.id]!==void 0:!0;if(te){let pe=N.findIndex(ke=>te[ke.route.id]!==void 0);R=N.slice(0,pe+1).every(ae)}else R=N.every(ae)}else R=e.hydrationData!=null;let U,q={historyAction:e.history.action,location:e.history.location,matches:N,initialized:R,navigation:T2,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||k,fetchers:new Map,blockers:new Map},G=vo.Pop,H=!1,J,Y=!1,X=new Map,ee=null,ue=!1,oe=!1,we=[],Ne=[],Be=new Map,De=0,Ae=-1,ve=new Map,ce=new Set,xe=new Map,Ee=new Map,Ge=new Set,$e=new Map,be=new Map,He=!1;function it(){if(x=e.history.listen(K=>{let{action:te,location:ae,delta:pe}=K;if(He){He=!1;return}S_(be.size===0||pe!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ke=Pn({currentLocation:q.location,nextLocation:ae,historyAction:te});if(ke&&pe!=null){He=!0,e.history.go(pe*-1),_n(ke,{state:"blocked",location:ae,proceed(){_n(ke,{state:"proceeding",proceed:void 0,reset:void 0,location:ae}),e.history.go(pe)},reset(){let ge=new Map(q.blockers);ge.set(ke,r0),Dt({blockers:ge})}});return}return Gt(te,ae)}),n){VV(t,X);let K=()=>GV(t,X);t.addEventListener("pagehide",K),ee=()=>t.removeEventListener("pagehide",K)}return q.initialized||Gt(vo.Pop,q.location,{initialHydration:!0}),U}function ct(){x&&x(),ee&&ee(),y.clear(),J&&J.abort(),q.fetchers.forEach((K,te)=>wn(te)),q.blockers.forEach((K,te)=>kt(te))}function xt(K){return y.add(K),()=>y.delete(K)}function Dt(K,te){te===void 0&&(te={}),q=lo({},q,K);let ae=[],pe=[];g.v7_fetcherPersist&&q.fetchers.forEach((ke,ge)=>{ke.state==="idle"&&(Ge.has(ge)?pe.push(ge):ae.push(ge))}),[...y].forEach(ke=>ke(q,{deletedFetchers:pe,unstable_viewTransitionOpts:te.viewTransitionOpts,unstable_flushSync:te.flushSync===!0})),g.v7_fetcherPersist&&(ae.forEach(ke=>q.fetchers.delete(ke)),pe.forEach(ke=>wn(ke)))}function Qt(K,te,ae){var pe,ke;let{flushSync:ge}=ae===void 0?{}:ae,ze=q.actionData!=null&&q.navigation.formMethod!=null&&Pc(q.navigation.formMethod)&&q.navigation.state==="loading"&&((pe=K.state)==null?void 0:pe._isRedirect)!==!0,Ie;te.actionData?Object.keys(te.actionData).length>0?Ie=te.actionData:Ie=null:ze?Ie=q.actionData:Ie=null;let Ve=te.loaderData?CM(q.loaderData,te.loaderData,te.matches||[],te.errors):q.loaderData,Qe=q.blockers;Qe.size>0&&(Qe=new Map(Qe),Qe.forEach((ht,Zt)=>Qe.set(Zt,r0)));let ot=H===!0||q.navigation.formMethod!=null&&Pc(q.navigation.formMethod)&&((ke=K.state)==null?void 0:ke._isRedirect)!==!0;l&&(u=l,l=void 0),ue||G===vo.Pop||(G===vo.Push?e.history.push(K,K.state):G===vo.Replace&&e.history.replace(K,K.state));let et;if(G===vo.Pop){let ht=X.get(q.location.pathname);ht&&ht.has(K.pathname)?et={currentLocation:q.location,nextLocation:K}:X.has(K.pathname)&&(et={currentLocation:K,nextLocation:q.location})}else if(Y){let ht=X.get(q.location.pathname);ht?ht.add(K.pathname):(ht=new Set([K.pathname]),X.set(q.location.pathname,ht)),et={currentLocation:q.location,nextLocation:K}}Dt(lo({},te,{actionData:Ie,loaderData:Ve,historyAction:G,location:K,initialized:!0,navigation:T2,revalidation:"idle",restoreScrollPosition:Vr(K,te.matches||q.matches),preventScrollReset:ot,blockers:Qe}),{viewTransitionOpts:et,flushSync:ge===!0}),G=vo.Pop,H=!1,Y=!1,ue=!1,oe=!1,we=[],Ne=[]}async function Ft(K,te){if(typeof K=="number"){e.history.go(K);return}let ae=nI(q.location,q.matches,p,g.v7_prependBasename,K,g.v7_relativeSplatPath,te==null?void 0:te.fromRouteId,te==null?void 0:te.relative),{path:pe,submission:ke,error:ge}=xM(g.v7_normalizeFormMethod,!1,ae,te),ze=q.location,Ie=d1(q.location,pe,te&&te.state);Ie=lo({},Ie,e.history.encodeLocation(Ie));let Ve=te&&te.replace!=null?te.replace:void 0,Qe=vo.Push;Ve===!0?Qe=vo.Replace:Ve===!1||ke!=null&&Pc(ke.formMethod)&&ke.formAction===q.location.pathname+q.location.search&&(Qe=vo.Replace);let ot=te&&"preventScrollReset"in te?te.preventScrollReset===!0:void 0,et=(te&&te.unstable_flushSync)===!0,ht=Pn({currentLocation:ze,nextLocation:Ie,historyAction:Qe});if(ht){_n(ht,{state:"blocked",location:Ie,proceed(){_n(ht,{state:"proceeding",proceed:void 0,reset:void 0,location:Ie}),Ft(K,te)},reset(){let Zt=new Map(q.blockers);Zt.set(ht,r0),Dt({blockers:Zt})}});return}return await Gt(Qe,Ie,{submission:ke,pendingError:ge,preventScrollReset:ot,replace:te&&te.replace,enableViewTransition:te&&te.unstable_viewTransition,flushSync:et})}function Kt(){if(vt(),Dt({revalidation:"loading"}),q.navigation.state!=="submitting"){if(q.navigation.state==="idle"){Gt(q.historyAction,q.location,{startUninterruptedRevalidation:!0});return}Gt(G||q.historyAction,q.navigation.location,{overrideNavigation:q.navigation})}}async function Gt(K,te,ae){J&&J.abort(),J=null,G=K,ue=(ae&&ae.startUninterruptedRevalidation)===!0,Gs(q.location,q.matches),H=(ae&&ae.preventScrollReset)===!0,Y=(ae&&ae.enableViewTransition)===!0;let pe=l||u,ke=ae&&ae.overrideNavigation,ge=Uy(pe,te,p),ze=(ae&&ae.flushSync)===!0;if(!ge){let Zt=Iu(404,{pathname:te.pathname}),{matches:an,route:sn}=IM(pe);Cr(),Qt(te,{matches:an,loaderData:{},errors:{[sn.id]:Zt}},{flushSync:ze});return}if(q.initialized&&!oe&&FV(q.location,te)&&!(ae&&ae.submission&&Pc(ae.submission.formMethod))){Qt(te,{matches:ge},{flushSync:ze});return}J=new AbortController;let Ie=o0(e.history,te,J.signal,ae&&ae.submission),Ve,Qe;if(ae&&ae.pendingError)Qe={[j0(ge).route.id]:ae.pendingError};else if(ae&&ae.submission&&Pc(ae.submission.formMethod)){let Zt=await Tr(Ie,te,ae.submission,ge,{replace:ae.replace,flushSync:ze});if(Zt.shortCircuited)return;Ve=Zt.pendingActionData,Qe=Zt.pendingActionError,ke=C2(te,ae.submission),ze=!1,Ie=new Request(Ie.url,{signal:Ie.signal})}let{shortCircuited:ot,loaderData:et,errors:ht}=await rt(Ie,te,ge,ke,ae&&ae.submission,ae&&ae.fetcherSubmission,ae&&ae.replace,ae&&ae.initialHydration===!0,ze,Ve,Qe);ot||(J=null,Qt(te,lo({matches:ge},Ve?{actionData:Ve}:{},{loaderData:et,errors:ht})))}async function Tr(K,te,ae,pe,ke){ke===void 0&&(ke={}),vt();let ge=UV(te,ae);Dt({navigation:ge},{flushSync:ke.flushSync===!0});let ze,Ie=iI(pe,te);if(!Ie.route.action&&!Ie.route.lazy)ze={type:so.error,error:Iu(405,{method:K.method,pathname:te.pathname,routeId:Ie.route.id})};else if(ze=await i0("action",K,Ie,pe,o,i,p,g.v7_relativeSplatPath),K.signal.aborted)return{shortCircuited:!0};if(Km(ze)){let Ve;return ke&&ke.replace!=null?Ve=ke.replace:Ve=ze.location===q.location.pathname+q.location.search,await Pt(q,ze,{submission:ae,replace:Ve}),{shortCircuited:!0}}if(qy(ze)){let Ve=j0(pe,Ie.route.id);return(ke&&ke.replace)!==!0&&(G=vo.Push),{pendingActionData:{},pendingActionError:{[Ve.route.id]:ze.error}}}if(Wm(ze))throw Iu(400,{type:"defer-action"});return{pendingActionData:{[Ie.route.id]:ze.data}}}async function rt(K,te,ae,pe,ke,ge,ze,Ie,Ve,Qe,ot){let et=pe||C2(te,ke),ht=ke||ge||AM(et),Zt=l||u,[an,sn]=bM(e.history,q,ae,ht,te,g.v7_partialHydration&&Ie===!0,oe,we,Ne,Ge,xe,ce,Zt,p,Qe,ot);if(Cr(Fn=>!(ae&&ae.some(ur=>ur.route.id===Fn))||an&&an.some(ur=>ur.route.id===Fn)),Ae=++De,an.length===0&&sn.length===0){let Fn=yr();return Qt(te,lo({matches:ae,loaderData:{},errors:ot||null},Qe?{actionData:Qe}:{},Fn?{fetchers:new Map(q.fetchers)}:{}),{flushSync:Ve}),{shortCircuited:!0}}if(!ue&&(!g.v7_partialHydration||!Ie)){sn.forEach(ur=>{let To=q.fetchers.get(ur.key),or=s0(void 0,To?To.data:void 0);q.fetchers.set(ur.key,or)});let Fn=Qe||q.actionData;Dt(lo({navigation:et},Fn?Object.keys(Fn).length===0?{actionData:null}:{actionData:Fn}:{},sn.length>0?{fetchers:new Map(q.fetchers)}:{}),{flushSync:Ve})}sn.forEach(Fn=>{Be.has(Fn.key)&&bt(Fn.key),Fn.controller&&Be.set(Fn.key,Fn.controller)});let kn=()=>sn.forEach(Fn=>bt(Fn.key));J&&J.signal.addEventListener("abort",kn);let{results:ir,loaderResults:hr,fetcherResults:lr}=await je(q.matches,ae,an,sn,K);if(K.signal.aborted)return{shortCircuited:!0};J&&J.signal.removeEventListener("abort",kn),sn.forEach(Fn=>Be.delete(Fn.key));let vn=PM(ir);if(vn){if(vn.idx>=an.length){let Fn=sn[vn.idx-an.length].key;ce.add(Fn)}return await Pt(q,vn.result,{replace:ze}),{shortCircuited:!0}}let{loaderData:Nr,errors:Gr}=TM(q,ae,an,hr,ot,sn,lr,$e);$e.forEach((Fn,ur)=>{Fn.subscribe(To=>{(To||Fn.done)&&$e.delete(ur)})}),g.v7_partialHydration&&Ie&&q.errors&&Object.entries(q.errors).filter(Fn=>{let[ur]=Fn;return!an.some(To=>To.route.id===ur)}).forEach(Fn=>{let[ur,To]=Fn;Gr=Object.assign(Gr||{},{[ur]:To})});let ji=yr(),bi=Vs(Ae),Yr=ji||bi||sn.length>0;return lo({loaderData:Nr,errors:Gr},Yr?{fetchers:new Map(q.fetchers)}:{})}function lt(K,te,ae,pe){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Be.has(K)&&bt(K);let ke=(pe&&pe.unstable_flushSync)===!0,ge=l||u,ze=nI(q.location,q.matches,p,g.v7_prependBasename,ae,g.v7_relativeSplatPath,te,pe==null?void 0:pe.relative),Ie=Uy(ge,ze,p);if(!Ie){Lt(K,te,Iu(404,{pathname:ze}),{flushSync:ke});return}let{path:Ve,submission:Qe,error:ot}=xM(g.v7_normalizeFormMethod,!0,ze,pe);if(ot){Lt(K,te,ot,{flushSync:ke});return}let et=iI(Ie,Ve);if(H=(pe&&pe.preventScrollReset)===!0,Qe&&Pc(Qe.formMethod)){gt(K,te,Ve,et,Ie,ke,Qe);return}xe.set(K,{routeId:te,path:Ve}),_t(K,te,Ve,et,Ie,ke,Qe)}async function gt(K,te,ae,pe,ke,ge,ze){if(vt(),xe.delete(K),!pe.route.action&&!pe.route.lazy){let ur=Iu(405,{method:ze.formMethod,pathname:ae,routeId:te});Lt(K,te,ur,{flushSync:ge});return}let Ie=q.fetchers.get(K);St(K,qV(ze,Ie),{flushSync:ge});let Ve=new AbortController,Qe=o0(e.history,ae,Ve.signal,ze);Be.set(K,Ve);let ot=De,et=await i0("action",Qe,pe,ke,o,i,p,g.v7_relativeSplatPath);if(Qe.signal.aborted){Be.get(K)===Ve&&Be.delete(K);return}if(g.v7_fetcherPersist&&Ge.has(K)){if(Km(et)||qy(et)){St(K,np(void 0));return}}else{if(Km(et))if(Be.delete(K),Ae>ot){St(K,np(void 0));return}else return ce.add(K),St(K,s0(ze)),Pt(q,et,{fetcherSubmission:ze});if(qy(et)){Lt(K,te,et.error);return}}if(Wm(et))throw Iu(400,{type:"defer-action"});let ht=q.navigation.location||q.location,Zt=o0(e.history,ht,Ve.signal),an=l||u,sn=q.navigation.state!=="idle"?Uy(an,q.navigation.location,p):q.matches;Qn(sn,"Didn't find any matches after fetcher action");let kn=++De;ve.set(K,kn);let ir=s0(ze,et.data);q.fetchers.set(K,ir);let[hr,lr]=bM(e.history,q,sn,ze,ht,!1,oe,we,Ne,Ge,xe,ce,an,p,{[pe.route.id]:et.data},void 0);lr.filter(ur=>ur.key!==K).forEach(ur=>{let To=ur.key,or=q.fetchers.get(To),cf=s0(void 0,or?or.data:void 0);q.fetchers.set(To,cf),Be.has(To)&&bt(To),ur.controller&&Be.set(To,ur.controller)}),Dt({fetchers:new Map(q.fetchers)});let vn=()=>lr.forEach(ur=>bt(ur.key));Ve.signal.addEventListener("abort",vn);let{results:Nr,loaderResults:Gr,fetcherResults:ji}=await je(q.matches,sn,hr,lr,Zt);if(Ve.signal.aborted)return;Ve.signal.removeEventListener("abort",vn),ve.delete(K),Be.delete(K),lr.forEach(ur=>Be.delete(ur.key));let bi=PM(Nr);if(bi){if(bi.idx>=hr.length){let ur=lr[bi.idx-hr.length].key;ce.add(ur)}return Pt(q,bi.result)}let{loaderData:Yr,errors:Fn}=TM(q,q.matches,hr,Gr,void 0,lr,ji,$e);if(q.fetchers.has(K)){let ur=np(et.data);q.fetchers.set(K,ur)}Vs(kn),q.navigation.state==="loading"&&kn>Ae?(Qn(G,"Expected pending action"),J&&J.abort(),Qt(q.navigation.location,{matches:sn,loaderData:Yr,errors:Fn,fetchers:new Map(q.fetchers)})):(Dt({errors:Fn,loaderData:CM(q.loaderData,Yr,sn,Fn),fetchers:new Map(q.fetchers)}),oe=!1)}async function _t(K,te,ae,pe,ke,ge,ze){let Ie=q.fetchers.get(K);St(K,s0(ze,Ie?Ie.data:void 0),{flushSync:ge});let Ve=new AbortController,Qe=o0(e.history,ae,Ve.signal);Be.set(K,Ve);let ot=De,et=await i0("loader",Qe,pe,ke,o,i,p,g.v7_relativeSplatPath);if(Wm(et)&&(et=await _F(et,Qe.signal,!0)||et),Be.get(K)===Ve&&Be.delete(K),!Qe.signal.aborted){if(Ge.has(K)){St(K,np(void 0));return}if(Km(et))if(Ae>ot){St(K,np(void 0));return}else{ce.add(K),await Pt(q,et);return}if(qy(et)){Lt(K,te,et.error);return}Qn(!Wm(et),"Unhandled fetcher deferred data"),St(K,np(et.data))}}async function Pt(K,te,ae){let{submission:pe,fetcherSubmission:ke,replace:ge}=ae===void 0?{}:ae;te.revalidate&&(oe=!0);let ze=d1(K.location,te.location,{_isRedirect:!0});if(Qn(ze,"Expected a location on the redirect navigation"),n){let ht=!1;if(te.reloadDocument)ht=!0;else if(pF.test(te.location)){const Zt=e.history.createURL(te.location);ht=Zt.origin!==t.location.origin||nv(Zt.pathname,p)==null}if(ht){ge?t.location.replace(te.location):t.location.assign(te.location);return}}J=null;let Ie=ge===!0?vo.Replace:vo.Push,{formMethod:Ve,formAction:Qe,formEncType:ot}=K.navigation;!pe&&!ke&&Ve&&Qe&&ot&&(pe=AM(K.navigation));let et=pe||ke;if(AV.has(te.status)&&et&&Pc(et.formMethod))await Gt(Ie,ze,{submission:lo({},et,{formAction:te.location}),preventScrollReset:H});else{let ht=C2(ze,pe);await Gt(Ie,ze,{overrideNavigation:ht,fetcherSubmission:ke,preventScrollReset:H})}}async function je(K,te,ae,pe,ke){let ge=await Promise.all([...ae.map(Ve=>i0("loader",ke,Ve,te,o,i,p,g.v7_relativeSplatPath)),...pe.map(Ve=>Ve.matches&&Ve.match&&Ve.controller?i0("loader",o0(e.history,Ve.path,Ve.controller.signal),Ve.match,Ve.matches,o,i,p,g.v7_relativeSplatPath):{type:so.error,error:Iu(404,{pathname:Ve.path})})]),ze=ge.slice(0,ae.length),Ie=ge.slice(ae.length);return await Promise.all([LM(K,ae,ze,ze.map(()=>ke.signal),!1,q.loaderData),LM(K,pe.map(Ve=>Ve.match),Ie,pe.map(Ve=>Ve.controller?Ve.controller.signal:null),!0)]),{results:ge,loaderResults:ze,fetcherResults:Ie}}function vt(){oe=!0,we.push(...Cr()),xe.forEach((K,te)=>{Be.has(te)&&(Ne.push(te),bt(te))})}function St(K,te,ae){ae===void 0&&(ae={}),q.fetchers.set(K,te),Dt({fetchers:new Map(q.fetchers)},{flushSync:(ae&&ae.flushSync)===!0})}function Lt(K,te,ae,pe){pe===void 0&&(pe={});let ke=j0(q.matches,te);wn(K),Dt({errors:{[ke.route.id]:ae},fetchers:new Map(q.fetchers)},{flushSync:(pe&&pe.flushSync)===!0})}function en(K){return g.v7_fetcherPersist&&(Ee.set(K,(Ee.get(K)||0)+1),Ge.has(K)&&Ge.delete(K)),q.fetchers.get(K)||OV}function wn(K){let te=q.fetchers.get(K);Be.has(K)&&!(te&&te.state==="loading"&&ve.has(K))&&bt(K),xe.delete(K),ve.delete(K),ce.delete(K),Ge.delete(K),q.fetchers.delete(K)}function gn(K){if(g.v7_fetcherPersist){let te=(Ee.get(K)||0)-1;te<=0?(Ee.delete(K),Ge.add(K)):Ee.set(K,te)}else wn(K);Dt({fetchers:new Map(q.fetchers)})}function bt(K){let te=Be.get(K);Qn(te,"Expected fetch controller: "+K),te.abort(),Be.delete(K)}function Un(K){for(let te of K){let ae=en(te),pe=np(ae.data);q.fetchers.set(te,pe)}}function yr(){let K=[],te=!1;for(let ae of ce){let pe=q.fetchers.get(ae);Qn(pe,"Expected fetcher: "+ae),pe.state==="loading"&&(ce.delete(ae),K.push(ae),te=!0)}return Un(K),te}function Vs(K){let te=[];for(let[ae,pe]of ve)if(pe<K){let ke=q.fetchers.get(ae);Qn(ke,"Expected fetcher: "+ae),ke.state==="loading"&&(bt(ae),ve.delete(ae),te.push(ae))}return Un(te),te.length>0}function Xr(K,te){let ae=q.blockers.get(K)||r0;return be.get(K)!==te&&be.set(K,te),ae}function kt(K){q.blockers.delete(K),be.delete(K)}function _n(K,te){let ae=q.blockers.get(K)||r0;Qn(ae.state==="unblocked"&&te.state==="blocked"||ae.state==="blocked"&&te.state==="blocked"||ae.state==="blocked"&&te.state==="proceeding"||ae.state==="blocked"&&te.state==="unblocked"||ae.state==="proceeding"&&te.state==="unblocked","Invalid blocker state transition: "+ae.state+" -> "+te.state);let pe=new Map(q.blockers);pe.set(K,te),Dt({blockers:pe})}function Pn(K){let{currentLocation:te,nextLocation:ae,historyAction:pe}=K;if(be.size===0)return;be.size>1&&S_(!1,"A router only supports one blocker at a time");let ke=Array.from(be.entries()),[ge,ze]=ke[ke.length-1],Ie=q.blockers.get(ge);if(!(Ie&&Ie.state==="proceeding")&&ze({currentLocation:te,nextLocation:ae,historyAction:pe}))return ge}function Cr(K){let te=[];return $e.forEach((ae,pe)=>{(!K||K(pe))&&(ae.cancel(),te.push(pe),$e.delete(pe))}),te}function Zo(K,te,ae){if(_=K,A=te,T=ae||null,!O&&q.navigation===T2){O=!0;let pe=Vr(q.location,q.matches);pe!=null&&Dt({restoreScrollPosition:pe})}return()=>{_=null,A=null,T=null}}function Tn(K,te){return T&&T(K,te.map(pe=>aV(pe,q.loaderData)))||K.key}function Gs(K,te){if(_&&A){let ae=Tn(K,te);_[ae]=A()}}function Vr(K,te){if(_){let ae=Tn(K,te),pe=_[ae];if(typeof pe=="number")return pe}return null}function Oe(K){o={},l=tI(K,i,void 0,o)}return U={get basename(){return p},get future(){return g},get state(){return q},get routes(){return u},get window(){return t},initialize:it,subscribe:xt,enableScrollRestoration:Zo,navigate:Ft,fetch:lt,revalidate:Kt,createHref:K=>e.history.createHref(K),encodeLocation:K=>e.history.encodeLocation(K),getFetcher:en,deleteFetcher:gn,dispose:ct,getBlocker:Xr,deleteBlocker:kt,_internalFetchControllers:Be,_internalActiveDeferreds:$e,_internalSetRoutes:Oe},U}function MV(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function nI(e,t,n,r,i,o,u,l){let p,g;if(u){p=[];for(let y of t)if(p.push(y),y.route.id===u){g=y;break}}else p=t,g=t[t.length-1];let x=HE(i||".",GE(p,o),nv(e.pathname,n)||e.pathname,l==="path");return i==null&&(x.search=e.search,x.hash=e.hash),(i==null||i===""||i===".")&&g&&g.route.index&&!$L(x.search)&&(x.search=x.search?x.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(x.pathname=x.pathname==="/"?n:ed([n,x.pathname])),vg(x)}function xM(e,t,n,r){if(!r||!MV(r))return{path:n};if(r.formMethod&&!$V(r.formMethod))return{path:n,error:Iu(405,{method:r.formMethod})};let i=()=>({path:n,error:Iu(400,{type:"invalid-body"})}),o=r.formMethod||"get",u=e?o.toUpperCase():o.toLowerCase(),l=yF(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Pc(u))return i();let _=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((T,A)=>{let[O,N]=A;return""+T+O+"="+N+`
`},""):String(r.body);return{path:n,submission:{formMethod:u,formAction:l,formEncType:r.formEncType,formData:void 0,json:void 0,text:_}}}else if(r.formEncType==="application/json"){if(!Pc(u))return i();try{let _=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:u,formAction:l,formEncType:r.formEncType,formData:void 0,json:_,text:void 0}}}catch{return i()}}}Qn(typeof FormData=="function","FormData is not available in this environment");let p,g;if(r.formData)p=rI(r.formData),g=r.formData;else if(r.body instanceof FormData)p=rI(r.body),g=r.body;else if(r.body instanceof URLSearchParams)p=r.body,g=SM(p);else if(r.body==null)p=new URLSearchParams,g=new FormData;else try{p=new URLSearchParams(r.body),g=SM(p)}catch{return i()}let x={formMethod:u,formAction:l,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:g,json:void 0,text:void 0};if(Pc(x.formMethod))return{path:n,submission:x};let y=wd(n);return t&&y.search&&$L(y.search)&&p.append("index",""),y.search="?"+p,{path:vg(y),submission:x}}function NV(e,t){let n=e;if(t){let r=e.findIndex(i=>i.route.id===t);r>=0&&(n=e.slice(0,r))}return n}function bM(e,t,n,r,i,o,u,l,p,g,x,y,_,T,A,O){let N=O?Object.values(O)[0]:A?Object.values(A)[0]:void 0,k=e.createURL(t.location),R=e.createURL(i),z=O?Object.keys(O)[0]:void 0,U=NV(n,z).filter((G,H)=>{let{route:J}=G;if(J.lazy)return!0;if(J.loader==null)return!1;if(o)return J.loader.hydrate?!0:t.loaderData[J.id]===void 0&&(!t.errors||t.errors[J.id]===void 0);if(DV(t.loaderData,t.matches[H],G)||l.some(ee=>ee===G.route.id))return!0;let Y=t.matches[H],X=G;return wM(G,lo({currentUrl:k,currentParams:Y.params,nextUrl:R,nextParams:X.params},r,{actionResult:N,defaultShouldRevalidate:u||k.pathname+k.search===R.pathname+R.search||k.search!==R.search||gF(Y,X)}))}),q=[];return x.forEach((G,H)=>{if(o||!n.some(ue=>ue.route.id===G.routeId)||g.has(H))return;let J=Uy(_,G.path,T);if(!J){q.push({key:H,routeId:G.routeId,path:G.path,matches:null,match:null,controller:null});return}let Y=t.fetchers.get(H),X=iI(J,G.path),ee=!1;y.has(H)?ee=!1:p.includes(H)?ee=!0:Y&&Y.state!=="idle"&&Y.data===void 0?ee=u:ee=wM(X,lo({currentUrl:k,currentParams:t.matches[t.matches.length-1].params,nextUrl:R,nextParams:n[n.length-1].params},r,{actionResult:N,defaultShouldRevalidate:u})),ee&&q.push({key:H,routeId:G.routeId,path:G.path,matches:J,match:X,controller:new AbortController})}),[U,q]}function DV(e,t,n){let r=!t||n.route.id!==t.route.id,i=e[n.route.id]===void 0;return r||i}function gF(e,t){let n=e.route.path;return e.pathname!==t.pathname||n!=null&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function wM(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if(typeof n=="boolean")return n}return t.defaultShouldRevalidate}async function EM(e,t,n){if(!e.lazy)return;let r=await e.lazy();if(!e.lazy)return;let i=n[e.id];Qn(i,"No route found in manifest");let o={};for(let u in r){let p=i[u]!==void 0&&u!=="hasErrorBoundary";S_(!p,'Route "'+i.id+'" has a static property "'+u+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+u+'" will be ignored.')),!p&&!oV.has(u)&&(o[u]=r[u])}Object.assign(i,o),Object.assign(i,lo({},t(i),{lazy:void 0}))}async function i0(e,t,n,r,i,o,u,l,p){p===void 0&&(p={});let g,x,y,_=O=>{let N,k=new Promise((R,z)=>N=z);return y=()=>N(),t.signal.addEventListener("abort",y),Promise.race([O({request:t,params:n.params,context:p.requestContext}),k])};try{let O=n.route[e];if(n.route.lazy)if(O){let N,k=await Promise.all([_(O).catch(R=>{N=R}),EM(n.route,o,i)]);if(N)throw N;x=k[0]}else if(await EM(n.route,o,i),O=n.route[e],O)x=await _(O);else if(e==="action"){let N=new URL(t.url),k=N.pathname+N.search;throw Iu(405,{method:t.method,pathname:k,routeId:n.route.id})}else return{type:so.data,data:void 0};else if(O)x=await _(O);else{let N=new URL(t.url),k=N.pathname+N.search;throw Iu(404,{pathname:k})}Qn(x!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(O){g=so.error,x=O}finally{y&&t.signal.removeEventListener("abort",y)}if(jV(x)){let O=x.status;if(LV.has(O)){let k=x.headers.get("Location");if(Qn(k,"Redirects returned/thrown from loaders/actions must have a Location header"),!pF.test(k))k=nI(new URL(t.url),r.slice(0,r.indexOf(n)+1),u,!0,k,l);else if(!p.isStaticRequest){let R=new URL(t.url),z=k.startsWith("//")?new URL(R.protocol+k):new URL(k),D=nv(z.pathname,u)!=null;z.origin===R.origin&&D&&(k=z.pathname+z.search+z.hash)}if(p.isStaticRequest)throw x.headers.set("Location",k),x;return{type:so.redirect,status:O,location:k,revalidate:x.headers.get("X-Remix-Revalidate")!==null,reloadDocument:x.headers.get("X-Remix-Reload-Document")!==null}}if(p.isRouteRequest)throw{type:g===so.error?so.error:so.data,response:x};let N;try{let k=x.headers.get("Content-Type");k&&/\bapplication\/json\b/.test(k)?x.body==null?N=null:N=await x.json():N=await x.text()}catch(k){return{type:so.error,error:k}}return g===so.error?{type:g,error:new jL(O,x.statusText,N),headers:x.headers}:{type:so.data,data:N,statusCode:x.status,headers:x.headers}}if(g===so.error)return{type:g,error:x};if(BV(x)){var T,A;return{type:so.deferred,deferredData:x,statusCode:(T=x.init)==null?void 0:T.status,headers:((A=x.init)==null?void 0:A.headers)&&new Headers(x.init.headers)}}return{type:so.data,data:x}}function o0(e,t,n,r){let i=e.createURL(yF(t)).toString(),o={signal:n};if(r&&Pc(r.formMethod)){let{formMethod:u,formEncType:l}=r;o.method=u.toUpperCase(),l==="application/json"?(o.headers=new Headers({"Content-Type":l}),o.body=JSON.stringify(r.json)):l==="text/plain"?o.body=r.text:l==="application/x-www-form-urlencoded"&&r.formData?o.body=rI(r.formData):o.body=r.formData}return new Request(i,o)}function rI(e){let t=new URLSearchParams;for(let[n,r]of e.entries())t.append(n,typeof r=="string"?r:r.name);return t}function SM(e){let t=new FormData;for(let[n,r]of e.entries())t.append(n,r);return t}function zV(e,t,n,r,i){let o={},u=null,l,p=!1,g={};return n.forEach((x,y)=>{let _=t[y].route.id;if(Qn(!Km(x),"Cannot handle redirect results in processLoaderData"),qy(x)){let T=j0(e,_),A=x.error;r&&(A=Object.values(r)[0],r=void 0),u=u||{},u[T.route.id]==null&&(u[T.route.id]=A),o[_]=void 0,p||(p=!0,l=fF(x.error)?x.error.status:500),x.headers&&(g[_]=x.headers)}else Wm(x)?(i.set(_,x.deferredData),o[_]=x.deferredData.data):o[_]=x.data,x.statusCode!=null&&x.statusCode!==200&&!p&&(l=x.statusCode),x.headers&&(g[_]=x.headers)}),r&&(u=r,o[Object.keys(r)[0]]=void 0),{loaderData:o,errors:u,statusCode:l||200,loaderHeaders:g}}function TM(e,t,n,r,i,o,u,l){let{loaderData:p,errors:g}=zV(t,n,r,i,l);for(let x=0;x<o.length;x++){let{key:y,match:_,controller:T}=o[x];Qn(u!==void 0&&u[x]!==void 0,"Did not find corresponding fetcher result");let A=u[x];if(!(T&&T.signal.aborted))if(qy(A)){let O=j0(e.matches,_==null?void 0:_.route.id);g&&g[O.route.id]||(g=lo({},g,{[O.route.id]:A.error})),e.fetchers.delete(y)}else if(Km(A))Qn(!1,"Unhandled fetcher revalidation redirect");else if(Wm(A))Qn(!1,"Unhandled fetcher deferred data");else{let O=np(A.data);e.fetchers.set(y,O)}}return{loaderData:p,errors:g}}function CM(e,t,n,r){let i=lo({},t);for(let o of n){let u=o.route.id;if(t.hasOwnProperty(u)?t[u]!==void 0&&(i[u]=t[u]):e[u]!==void 0&&o.route.loader&&(i[u]=e[u]),r&&r.hasOwnProperty(u))break}return i}function j0(e,t){return(t?e.slice(0,e.findIndex(r=>r.route.id===t)+1):[...e]).reverse().find(r=>r.route.hasErrorBoundary===!0)||e[0]}function IM(e){let t=e.length===1?e[0]:e.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Iu(e,t){let{pathname:n,routeId:r,method:i,type:o}=t===void 0?{}:t,u="Unknown Server Error",l="Unknown @remix-run/router error";return e===400?(u="Bad Request",i&&n&&r?l="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":o==="defer-action"?l="defer() is not supported in actions":o==="invalid-body"&&(l="Unable to encode submission body")):e===403?(u="Forbidden",l='Route "'+r+'" does not match URL "'+n+'"'):e===404?(u="Not Found",l='No route matches URL "'+n+'"'):e===405&&(u="Method Not Allowed",i&&n&&r?l="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(l='Invalid request method "'+i.toUpperCase()+'"')),new jL(e||500,u,new Error(l),!0)}function PM(e){for(let t=e.length-1;t>=0;t--){let n=e[t];if(Km(n))return{result:n,idx:t}}}function yF(e){let t=typeof e=="string"?wd(e):e;return vg(lo({},t,{hash:""}))}function FV(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function Wm(e){return e.type===so.deferred}function qy(e){return e.type===so.error}function Km(e){return(e&&e.type)===so.redirect}function BV(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function jV(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function $V(e){return PV.has(e.toLowerCase())}function Pc(e){return CV.has(e.toLowerCase())}async function LM(e,t,n,r,i,o){for(let u=0;u<n.length;u++){let l=n[u],p=t[u];if(!p)continue;let g=e.find(y=>y.route.id===p.route.id),x=g!=null&&!gF(g,p)&&(o&&o[p.route.id])!==void 0;if(Wm(l)&&(i||x)){let y=r[u];Qn(y,"Expected an AbortSignal for revalidating fetcher deferred result"),await _F(l,y,i).then(_=>{_&&(n[u]=_||n[u])})}}}async function _F(e,t,n){if(n===void 0&&(n=!1),!await e.deferredData.resolveData(t)){if(n)try{return{type:so.data,data:e.deferredData.unwrappedData}}catch(i){return{type:so.error,error:i}}return{type:so.data,data:e.deferredData.data}}}function $L(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function iI(e,t){let n=typeof t=="string"?wd(t).search:t.search;if(e[e.length-1].route.index&&$L(n||""))return e[e.length-1];let r=hF(e);return r[r.length-1]}function AM(e){let{formMethod:t,formAction:n,formEncType:r,text:i,formData:o,json:u}=e;if(!(!t||!n||!r)){if(i!=null)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(o!=null)return{formMethod:t,formAction:n,formEncType:r,formData:o,json:void 0,text:void 0};if(u!==void 0)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:u,text:void 0}}}function C2(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function UV(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function s0(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function qV(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function np(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function VV(e,t){try{let n=e.sessionStorage.getItem(mF);if(n){let r=JSON.parse(n);for(let[i,o]of Object.entries(r||{}))o&&Array.isArray(o)&&t.set(i,new Set(o||[]))}}catch{}}function GV(e,t){if(t.size>0){let n={};for(let[r,i]of t)n[r]=[...i];try{e.sessionStorage.setItem(mF,JSON.stringify(n))}catch(r){S_(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function p1(){return p1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p1.apply(this,arguments)}const ZE=qe.createContext(null),vF=qe.createContext(null),tm=qe.createContext(null),WE=qe.createContext(null),rf=qe.createContext({outlet:null,matches:[],isDataRoute:!1}),xF=qe.createContext(null);function HV(e,t){let{relative:n}=t===void 0?{}:t;rv()||Qn(!1);let{basename:r,navigator:i}=qe.useContext(tm),{hash:o,pathname:u,search:l}=wF(e,{relative:n}),p=u;return r!=="/"&&(p=u==="/"?r:ed([r,u])),i.createHref({pathname:p,search:l,hash:o})}function rv(){return qe.useContext(WE)!=null}function Ed(){return rv()||Qn(!1),qe.useContext(WE).location}function bF(e){qe.useContext(tm).static||qe.useLayoutEffect(e)}function Yc(){let{isDataRoute:e}=qe.useContext(rf);return e?aG():ZV()}function ZV(){rv()||Qn(!1);let e=qe.useContext(ZE),{basename:t,future:n,navigator:r}=qe.useContext(tm),{matches:i}=qe.useContext(rf),{pathname:o}=Ed(),u=JSON.stringify(GE(i,n.v7_relativeSplatPath)),l=qe.useRef(!1);return bF(()=>{l.current=!0}),qe.useCallback(function(g,x){if(x===void 0&&(x={}),!l.current)return;if(typeof g=="number"){r.go(g);return}let y=HE(g,JSON.parse(u),o,x.relative==="path");e==null&&t!=="/"&&(y.pathname=y.pathname==="/"?t:ed([t,y.pathname])),(x.replace?r.replace:r.push)(y,x.state,x)},[t,r,u,o,e])}const WV=qe.createContext(null);function KV(e){let t=qe.useContext(rf).outlet;return t&&qe.createElement(WV.Provider,{value:e},t)}function XV(){let{matches:e}=qe.useContext(rf),t=e[e.length-1];return t?t.params:{}}function wF(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=qe.useContext(tm),{matches:i}=qe.useContext(rf),{pathname:o}=Ed(),u=JSON.stringify(GE(i,r.v7_relativeSplatPath));return qe.useMemo(()=>HE(e,JSON.parse(u),o,n==="path"),[e,u,o,n])}function YV(e,t,n,r){rv()||Qn(!1);let{navigator:i}=qe.useContext(tm),{matches:o}=qe.useContext(rf),u=o[o.length-1],l=u?u.params:{};u&&u.pathname;let p=u?u.pathnameBase:"/";u&&u.route;let g=Ed(),x;if(t){var y;let N=typeof t=="string"?wd(t):t;p==="/"||(y=N.pathname)!=null&&y.startsWith(p)||Qn(!1),x=N}else x=g;let _=x.pathname||"/",T=_;if(p!=="/"){let N=p.replace(/^\//,"").split("/");T="/"+_.replace(/^\//,"").split("/").slice(N.length).join("/")}let A=Uy(e,{pathname:T}),O=nG(A&&A.map(N=>Object.assign({},N,{params:Object.assign({},l,N.params),pathname:ed([p,i.encodeLocation?i.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?p:ed([p,i.encodeLocation?i.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),o,n,r);return t&&O?qe.createElement(WE.Provider,{value:{location:p1({pathname:"/",search:"",hash:"",state:null,key:"default"},x),navigationType:vo.Pop}},O):O}function JV(){let e=sG(),t=fF(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return qe.createElement(qe.Fragment,null,qe.createElement("h2",null,"Unexpected Application Error!"),qe.createElement("h3",{style:{fontStyle:"italic"}},t),n?qe.createElement("pre",{style:i},n):null,null)}const QV=qe.createElement(JV,null);class eG extends qe.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?qe.createElement(rf.Provider,{value:this.props.routeContext},qe.createElement(xF.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function tG(e){let{routeContext:t,match:n,children:r}=e,i=qe.useContext(ZE);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),qe.createElement(rf.Provider,{value:t},r)}function nG(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var o;if((o=n)!=null&&o.errors)e=n.matches;else return null}let u=e,l=(i=n)==null?void 0:i.errors;if(l!=null){let x=u.findIndex(y=>y.route.id&&(l==null?void 0:l[y.route.id]));x>=0||Qn(!1),u=u.slice(0,Math.min(u.length,x+1))}let p=!1,g=-1;if(n&&r&&r.v7_partialHydration)for(let x=0;x<u.length;x++){let y=u[x];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(g=x),y.route.id){let{loaderData:_,errors:T}=n,A=y.route.loader&&_[y.route.id]===void 0&&(!T||T[y.route.id]===void 0);if(y.route.lazy||A){p=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}return u.reduceRight((x,y,_)=>{let T,A=!1,O=null,N=null;n&&(T=l&&y.route.id?l[y.route.id]:void 0,O=y.route.errorElement||QV,p&&(g<0&&_===0?(lG("route-fallback",!1),A=!0,N=null):g===_&&(A=!0,N=y.route.hydrateFallbackElement||null)));let k=t.concat(u.slice(0,_+1)),R=()=>{let z;return T?z=O:A?z=N:y.route.Component?z=qe.createElement(y.route.Component,null):y.route.element?z=y.route.element:z=x,qe.createElement(tG,{match:y,routeContext:{outlet:x,matches:k,isDataRoute:n!=null},children:z})};return n&&(y.route.ErrorBoundary||y.route.errorElement||_===0)?qe.createElement(eG,{location:n.location,revalidation:n.revalidation,component:O,error:T,children:R(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):R()},null)}var EF=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(EF||{}),Zw=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Zw||{});function rG(e){let t=qe.useContext(ZE);return t||Qn(!1),t}function iG(e){let t=qe.useContext(vF);return t||Qn(!1),t}function oG(e){let t=qe.useContext(rf);return t||Qn(!1),t}function SF(e){let t=oG(),n=t.matches[t.matches.length-1];return n.route.id||Qn(!1),n.route.id}function sG(){var e;let t=qe.useContext(xF),n=iG(Zw.UseRouteError),r=SF(Zw.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function aG(){let{router:e}=rG(EF.UseNavigateStable),t=SF(Zw.UseNavigateStable),n=qe.useRef(!1);return bF(()=>{n.current=!0}),qe.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,p1({fromRouteId:t},o)))},[e,t])}const OM={};function lG(e,t,n){!t&&!OM[e]&&(OM[e]=!0)}function uG(e){let{to:t,replace:n,state:r,relative:i}=e;rv()||Qn(!1);let{future:o,static:u}=qe.useContext(tm),{matches:l}=qe.useContext(rf),{pathname:p}=Ed(),g=Yc(),x=HE(t,GE(l,o.v7_relativeSplatPath),p,i==="path"),y=JSON.stringify(x);return qe.useEffect(()=>g(JSON.parse(y),{replace:n,state:r,relative:i}),[g,y,i,n,r]),null}function cG(e){return KV(e.context)}function vu(e){Qn(!1)}function hG(e){let{basename:t="/",children:n=null,location:r,navigationType:i=vo.Pop,navigator:o,static:u=!1,future:l}=e;rv()&&Qn(!1);let p=t.replace(/^\/*/,"/"),g=qe.useMemo(()=>({basename:p,navigator:o,static:u,future:p1({v7_relativeSplatPath:!1},l)}),[p,l,o,u]);typeof r=="string"&&(r=wd(r));let{pathname:x="/",search:y="",hash:_="",state:T=null,key:A="default"}=r,O=qe.useMemo(()=>{let N=nv(x,p);return N==null?null:{location:{pathname:N,search:y,hash:_,state:T,key:A},navigationType:i}},[p,x,y,_,T,A,i]);return O==null?null:qe.createElement(tm.Provider,{value:g},qe.createElement(WE.Provider,{children:n,value:O}))}new Promise(()=>{});function oI(e,t){t===void 0&&(t=[]);let n=[];return qe.Children.forEach(e,(r,i)=>{if(!qe.isValidElement(r))return;let o=[...t,i];if(r.type===qe.Fragment){n.push.apply(n,oI(r.props.children,o));return}r.type!==vu&&Qn(!1),!r.props.index||!r.props.children||Qn(!1);let u={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=oI(r.props.children,o)),n.push(u)}),n}function fG(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:qe.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:qe.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:qe.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function m1(){return m1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m1.apply(this,arguments)}function dG(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function pG(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function mG(e,t){return e.button===0&&(!t||t==="_self")&&!pG(e)}function sI(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function gG(e,t){let n=sI(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(o=>{n.append(i,o)})}),n}const yG=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],_G="6";try{window.__reactRouterVersion=_G}catch{}function vG(e,t){return RV({basename:t==null?void 0:t.basename,future:m1({},t==null?void 0:t.future,{v7_prependBasename:!0}),history:nV({window:t==null?void 0:t.window}),hydrationData:(t==null?void 0:t.hydrationData)||xG(),routes:e,mapRouteProperties:fG,window:t==null?void 0:t.window}).initialize()}function xG(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=m1({},t,{errors:bG(t.errors)})),t}function bG(e){if(!e)return null;let t=Object.entries(e),n={};for(let[r,i]of t)if(i&&i.__type==="RouteErrorResponse")n[r]=new jL(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let o=window[i.__subType];if(typeof o=="function")try{let u=new o(i.message);u.stack="",n[r]=u}catch{}}if(n[r]==null){let o=new Error(i.message);o.stack="",n[r]=o}}else n[r]=i;return n}const wG=qe.createContext({isTransitioning:!1}),EG=qe.createContext(new Map),SG="startTransition",kM=aC[SG],TG="flushSync",RM=tV[TG];function CG(e){kM?kM(e):e()}function a0(e){RM?RM(e):e()}class IG{constructor(){this.status="pending",this.promise=new Promise((t,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",t(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}}function MM(e){let{fallbackElement:t,router:n,future:r}=e,[i,o]=qe.useState(n.state),[u,l]=qe.useState(),[p,g]=qe.useState({isTransitioning:!1}),[x,y]=qe.useState(),[_,T]=qe.useState(),[A,O]=qe.useState(),N=qe.useRef(new Map),{v7_startTransition:k}=r||{},R=qe.useCallback(G=>{k?CG(G):G()},[k]),z=qe.useCallback((G,H)=>{let{deletedFetchers:J,unstable_flushSync:Y,unstable_viewTransitionOpts:X}=H;J.forEach(ue=>N.current.delete(ue)),G.fetchers.forEach((ue,oe)=>{ue.data!==void 0&&N.current.set(oe,ue.data)});let ee=n.window==null||typeof n.window.document.startViewTransition!="function";if(!X||ee){Y?a0(()=>o(G)):R(()=>o(G));return}if(Y){a0(()=>{_&&(x&&x.resolve(),_.skipTransition()),g({isTransitioning:!0,flushSync:!0,currentLocation:X.currentLocation,nextLocation:X.nextLocation})});let ue=n.window.document.startViewTransition(()=>{a0(()=>o(G))});ue.finished.finally(()=>{a0(()=>{y(void 0),T(void 0),l(void 0),g({isTransitioning:!1})})}),a0(()=>T(ue));return}_?(x&&x.resolve(),_.skipTransition(),O({state:G,currentLocation:X.currentLocation,nextLocation:X.nextLocation})):(l(G),g({isTransitioning:!0,flushSync:!1,currentLocation:X.currentLocation,nextLocation:X.nextLocation}))},[n.window,_,x,N,R]);qe.useLayoutEffect(()=>n.subscribe(z),[n,z]),qe.useEffect(()=>{p.isTransitioning&&!p.flushSync&&y(new IG)},[p]),qe.useEffect(()=>{if(x&&u&&n.window){let G=u,H=x.promise,J=n.window.document.startViewTransition(async()=>{R(()=>o(G)),await H});J.finished.finally(()=>{y(void 0),T(void 0),l(void 0),g({isTransitioning:!1})}),T(J)}},[R,u,x,n.window]),qe.useEffect(()=>{x&&u&&i.location.key===u.location.key&&x.resolve()},[x,_,i.location,u]),qe.useEffect(()=>{!p.isTransitioning&&A&&(l(A.state),g({isTransitioning:!0,flushSync:!1,currentLocation:A.currentLocation,nextLocation:A.nextLocation}),O(void 0))},[p.isTransitioning,A]),qe.useEffect(()=>{},[]);let D=qe.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:G=>n.navigate(G),push:(G,H,J)=>n.navigate(G,{state:H,preventScrollReset:J==null?void 0:J.preventScrollReset}),replace:(G,H,J)=>n.navigate(G,{replace:!0,state:H,preventScrollReset:J==null?void 0:J.preventScrollReset})}),[n]),U=n.basename||"/",q=qe.useMemo(()=>({router:n,navigator:D,static:!1,basename:U}),[n,D,U]);return qe.createElement(qe.Fragment,null,qe.createElement(ZE.Provider,{value:q},qe.createElement(vF.Provider,{value:i},qe.createElement(EG.Provider,{value:N.current},qe.createElement(wG.Provider,{value:p},qe.createElement(hG,{basename:U,location:i.location,navigationType:i.historyAction,navigator:D,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},i.initialized||n.future.v7_partialHydration?qe.createElement(PG,{routes:n.routes,future:n.future,state:i}):t))))),null)}function PG(e){let{routes:t,future:n,state:r}=e;return YV(t,void 0,r,n)}const LG=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",AG=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,oo=qe.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:o,replace:u,state:l,target:p,to:g,preventScrollReset:x,unstable_viewTransition:y}=t,_=dG(t,yG),{basename:T}=qe.useContext(tm),A,O=!1;if(typeof g=="string"&&AG.test(g)&&(A=g,LG))try{let z=new URL(window.location.href),D=g.startsWith("//")?new URL(z.protocol+g):new URL(g),U=nv(D.pathname,T);D.origin===z.origin&&U!=null?g=U+D.search+D.hash:O=!0}catch{}let N=HV(g,{relative:i}),k=OG(g,{replace:u,state:l,target:p,preventScrollReset:x,relative:i,unstable_viewTransition:y});function R(z){r&&r(z),z.defaultPrevented||k(z)}return qe.createElement("a",m1({},_,{href:A||N,onClick:O||o?r:R,ref:n,target:p}))});var NM;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(NM||(NM={}));var DM;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(DM||(DM={}));function OG(e,t){let{target:n,replace:r,state:i,preventScrollReset:o,relative:u,unstable_viewTransition:l}=t===void 0?{}:t,p=Yc(),g=Ed(),x=wF(e,{relative:u});return qe.useCallback(y=>{if(mG(y,n)){y.preventDefault();let _=r!==void 0?r:vg(g)===vg(x);p(e,{replace:_,state:i,preventScrollReset:o,relative:u,unstable_viewTransition:l})}},[g,p,x,r,i,n,e,o,u,l])}function TF(e){let t=qe.useRef(sI(e)),n=qe.useRef(!1),r=Ed(),i=qe.useMemo(()=>gG(r.search,n.current?null:t.current),[r.search]),o=Yc(),u=qe.useCallback((l,p)=>{const g=sI(typeof l=="function"?l(i):l);n.current=!0,o("?"+g,p)},[o,i]);return[i,u]}const eu=qe.createContext();function kG({children:e}){const[t,n]=qe.useState(JSON.parse(localStorage.getItem("user")));function r(i){n(i),localStorage.setItem("user",JSON.stringify(i))}return he.jsx(eu.Provider,{value:{userAuth:t,updateUser:r},children:e})}var CF={exports:{}},IF={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fx=qe;function RG(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var MG=typeof Object.is=="function"?Object.is:RG,NG=fx.useSyncExternalStore,DG=fx.useRef,zG=fx.useEffect,FG=fx.useMemo,BG=fx.useDebugValue;IF.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var o=DG(null);if(o.current===null){var u={hasValue:!1,value:null};o.current=u}else u=o.current;o=FG(function(){function p(T){if(!g){if(g=!0,x=T,T=r(T),i!==void 0&&u.hasValue){var A=u.value;if(i(A,T))return y=A}return y=T}if(A=y,MG(x,T))return A;var O=r(T);return i!==void 0&&i(A,O)?A:(x=T,y=O)}var g=!1,x,y,_=n===void 0?null:n;return[function(){return p(t())},_===null?void 0:function(){return p(_())}]},[t,n,r,i]);var l=NG(e,o[0],o[1]);return zG(function(){u.hasValue=!0,u.value=l},[l]),BG(l),l};CF.exports=IF;var jG=CF.exports,Nl="default"in aC?Bt:aC,zM=Symbol.for("react-redux-context"),FM=typeof globalThis<"u"?globalThis:{};function $G(){if(!Nl.createContext)return{};const e=FM[zM]??(FM[zM]=new Map);let t=e.get(Nl.createContext);return t||(t=Nl.createContext(null),e.set(Nl.createContext,t)),t}var zp=$G(),UG=()=>{throw new Error("uSES not initialized!")};function UL(e=zp){return function(){return Nl.useContext(e)}}var PF=UL(),LF=UG,qG=e=>{LF=e},VG=(e,t)=>e===t;function GG(e=zp){const t=e===zp?PF:UL(e),n=(r,i={})=>{const{equalityFn:o=VG,devModeChecks:u={}}=typeof i=="function"?{equalityFn:i}:i,{store:l,subscription:p,getServerState:g,stabilityCheck:x,identityFunctionCheck:y}=t();Nl.useRef(!0);const _=Nl.useCallback({[r.name](A){return r(A)}}[r.name],[r,x,u.stabilityCheck]),T=LF(p.addNestedSub,l.getState,g||l.getState,_,o);return Nl.useDebugValue(T),T};return Object.assign(n,{withTypes:()=>n}),n}var HG=GG();function ZG(e){e()}function WG(){let e=null,t=null;return{clear(){e=null,t=null},notify(){ZG(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var BM={notify(){},get:()=>[]};function KG(e,t){let n,r=BM,i=0,o=!1;function u(O){x();const N=r.subscribe(O);let k=!1;return()=>{k||(k=!0,N(),y())}}function l(){r.notify()}function p(){A.onStateChange&&A.onStateChange()}function g(){return o}function x(){i++,n||(n=t?t.addNestedSub(p):e.subscribe(p),r=WG())}function y(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=BM)}function _(){o||(o=!0,x())}function T(){o&&(o=!1,y())}const A={addNestedSub:u,notifyNestedSubs:l,handleChangeWrapper:p,isSubscribed:g,trySubscribe:_,tryUnsubscribe:T,getListeners:()=>r};return A}var XG=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",YG=typeof navigator<"u"&&navigator.product==="ReactNative",JG=XG||YG?Nl.useLayoutEffect:Nl.useEffect;function QG({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:o="once"}){const u=Nl.useMemo(()=>{const g=KG(e);return{store:e,subscription:g,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:o}},[e,r,i,o]),l=Nl.useMemo(()=>e.getState(),[e]);JG(()=>{const{subscription:g}=u;return g.onStateChange=g.notifyNestedSubs,g.trySubscribe(),l!==e.getState()&&g.notifyNestedSubs(),()=>{g.tryUnsubscribe(),g.onStateChange=void 0}},[u,l]);const p=t||zp;return Nl.createElement(p.Provider,{value:u},n)}var eH=QG;function AF(e=zp){const t=e===zp?PF:UL(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var tH=AF();function nH(e=zp){const t=e===zp?tH:AF(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var qL=nH();qG(jG.useSyncExternalStoreWithSelector);function As(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var rH=typeof Symbol=="function"&&Symbol.observable||"@@observable",jM=rH,I2=()=>Math.random().toString(36).substring(7).split("").join("."),iH={INIT:`@@redux/INIT${I2()}`,REPLACE:`@@redux/REPLACE${I2()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${I2()}`},Ww=iH;function VL(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function OF(e,t,n){if(typeof e!="function")throw new Error(As(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(As(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(As(1));return n(OF)(e,t)}let r=e,i=t,o=new Map,u=o,l=0,p=!1;function g(){u===o&&(u=new Map,o.forEach((N,k)=>{u.set(k,N)}))}function x(){if(p)throw new Error(As(3));return i}function y(N){if(typeof N!="function")throw new Error(As(4));if(p)throw new Error(As(5));let k=!0;g();const R=l++;return u.set(R,N),function(){if(k){if(p)throw new Error(As(6));k=!1,g(),u.delete(R),o=null}}}function _(N){if(!VL(N))throw new Error(As(7));if(typeof N.type>"u")throw new Error(As(8));if(typeof N.type!="string")throw new Error(As(17));if(p)throw new Error(As(9));try{p=!0,i=r(i,N)}finally{p=!1}return(o=u).forEach(R=>{R()}),N}function T(N){if(typeof N!="function")throw new Error(As(10));r=N,_({type:Ww.REPLACE})}function A(){const N=y;return{subscribe(k){if(typeof k!="object"||k===null)throw new Error(As(11));function R(){const D=k;D.next&&D.next(x())}return R(),{unsubscribe:N(R)}},[jM](){return this}}}return _({type:Ww.INIT}),{dispatch:_,subscribe:y,getState:x,replaceReducer:T,[jM]:A}}function oH(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:Ww.INIT})>"u")throw new Error(As(12));if(typeof n(void 0,{type:Ww.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(As(13))})}function sH(e){const t=Object.keys(e),n={};for(let o=0;o<t.length;o++){const u=t[o];typeof e[u]=="function"&&(n[u]=e[u])}const r=Object.keys(n);let i;try{oH(n)}catch(o){i=o}return function(u={},l){if(i)throw i;let p=!1;const g={};for(let x=0;x<r.length;x++){const y=r[x],_=n[y],T=u[y],A=_(T,l);if(typeof A>"u")throw l&&l.type,new Error(As(14));g[y]=A,p=p||A!==T}return p=p||r.length!==Object.keys(u).length,p?g:u}}function Kw(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function aH(...e){return t=>(n,r)=>{const i=t(n,r);let o=()=>{throw new Error(As(15))};const u={getState:i.getState,dispatch:(p,...g)=>o(p,...g)},l=e.map(p=>p(u));return o=Kw(...l)(i.dispatch),{...i,dispatch:o}}}function lH(e){return VL(e)&&"type"in e&&typeof e.type=="string"}var kF=Symbol.for("immer-nothing"),$M=Symbol.for("immer-draftable"),ql=Symbol.for("immer-state");function kc(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var T_=Object.getPrototypeOf;function Fp(e){return!!e&&!!e[ql]}function ld(e){var t;return e?RF(e)||Array.isArray(e)||!!e[$M]||!!((t=e.constructor)!=null&&t[$M])||XE(e)||YE(e):!1}var uH=Object.prototype.constructor.toString();function RF(e){if(!e||typeof e!="object")return!1;const t=T_(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===uH}function Xw(e,t){KE(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function KE(e){const t=e[ql];return t?t.type_:Array.isArray(e)?1:XE(e)?2:YE(e)?3:0}function aI(e,t){return KE(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function MF(e,t,n){const r=KE(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function cH(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function XE(e){return e instanceof Map}function YE(e){return e instanceof Set}function Bm(e){return e.copy_||e.base_}function lI(e,t){if(XE(e))return new Map(e);if(YE(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=RF(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[ql];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const u=i[o],l=r[u];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(r[u]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[u]})}return Object.create(T_(e),r)}else{const r=T_(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function GL(e,t=!1){return JE(e)||Fp(e)||!ld(e)||(KE(e)>1&&(e.set=e.add=e.clear=e.delete=hH),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>GL(r,!0))),e}function hH(){kc(2)}function JE(e){return Object.isFrozen(e)}var fH={};function xg(e){const t=fH[e];return t||kc(0,e),t}var g1;function NF(){return g1}function dH(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function UM(e,t){t&&(xg("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function uI(e){cI(e),e.drafts_.forEach(pH),e.drafts_=null}function cI(e){e===g1&&(g1=e.parent_)}function qM(e){return g1=dH(g1,e)}function pH(e){const t=e[ql];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function VM(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[ql].modified_&&(uI(t),kc(4)),ld(e)&&(e=Yw(t,e),t.parent_||Jw(t,e)),t.patches_&&xg("Patches").generateReplacementPatches_(n[ql].base_,e,t.patches_,t.inversePatches_)):e=Yw(t,n,[]),uI(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==kF?e:void 0}function Yw(e,t,n){if(JE(t))return t;const r=t[ql];if(!r)return Xw(t,(i,o)=>GM(e,r,t,i,o,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return Jw(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,u=!1;r.type_===3&&(o=new Set(i),i.clear(),u=!0),Xw(o,(l,p)=>GM(e,r,i,l,p,n,u)),Jw(e,i,!1),n&&e.patches_&&xg("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function GM(e,t,n,r,i,o,u){if(Fp(i)){const l=o&&t&&t.type_!==3&&!aI(t.assigned_,r)?o.concat(r):void 0,p=Yw(e,i,l);if(MF(n,r,p),Fp(p))e.canAutoFreeze_=!1;else return}else u&&n.add(i);if(ld(i)&&!JE(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Yw(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&Jw(e,i)}}function Jw(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&GL(t,n)}function mH(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:NF(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=HL;n&&(i=[r],o=y1);const{revoke:u,proxy:l}=Proxy.revocable(i,o);return r.draft_=l,r.revoke_=u,l}var HL={get(e,t){if(t===ql)return e;const n=Bm(e);if(!aI(n,t))return gH(e,n,t);const r=n[t];return e.finalized_||!ld(r)?r:r===P2(e.base_,t)?(L2(e),e.copy_[t]=fI(r,e)):r},has(e,t){return t in Bm(e)},ownKeys(e){return Reflect.ownKeys(Bm(e))},set(e,t,n){const r=DF(Bm(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=P2(Bm(e),t),o=i==null?void 0:i[ql];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(cH(n,i)&&(n!==void 0||aI(e.base_,t)))return!0;L2(e),hI(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return P2(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,L2(e),hI(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Bm(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){kc(11)},getPrototypeOf(e){return T_(e.base_)},setPrototypeOf(){kc(12)}},y1={};Xw(HL,(e,t)=>{y1[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});y1.deleteProperty=function(e,t){return y1.set.call(this,e,t,void 0)};y1.set=function(e,t,n){return HL.set.call(this,e[0],t,n,e[0])};function P2(e,t){const n=e[ql];return(n?Bm(n):e)[t]}function gH(e,t,n){var i;const r=DF(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function DF(e,t){if(!(t in e))return;let n=T_(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=T_(n)}}function hI(e){e.modified_||(e.modified_=!0,e.parent_&&hI(e.parent_))}function L2(e){e.copy_||(e.copy_=lI(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var yH=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const o=n;n=t;const u=this;return function(p=o,...g){return u.produce(p,x=>n.call(this,x,...g))}}typeof n!="function"&&kc(6),r!==void 0&&typeof r!="function"&&kc(7);let i;if(ld(t)){const o=qM(this),u=fI(t,void 0);let l=!0;try{i=n(u),l=!1}finally{l?uI(o):cI(o)}return UM(o,r),VM(i,o)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===kF&&(i=void 0),this.autoFreeze_&&GL(i,!0),r){const o=[],u=[];xg("Patches").generateReplacementPatches_(t,i,o,u),r(o,u)}return i}else kc(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(u,...l)=>this.produceWithPatches(u,p=>t(p,...l));let r,i;return[this.produce(t,n,(u,l)=>{r=u,i=l}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){ld(e)||kc(8),Fp(e)&&(e=zF(e));const t=qM(this),n=fI(e,void 0);return n[ql].isManual_=!0,cI(t),n}finishDraft(e,t){const n=e&&e[ql];(!n||!n.isManual_)&&kc(9);const{scope_:r}=n;return UM(r,t),VM(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=xg("Patches").applyPatches_;return Fp(e)?r(e,t):this.produce(e,i=>r(i,t))}};function fI(e,t){const n=XE(e)?xg("MapSet").proxyMap_(e,t):YE(e)?xg("MapSet").proxySet_(e,t):mH(e,t);return(t?t.scope_:NF()).drafts_.push(n),n}function zF(e){return Fp(e)||kc(10,e),FF(e)}function FF(e){if(!ld(e)||JE(e))return e;const t=e[ql];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=lI(e,t.scope_.immer_.useStrictShallowCopy_)}else n=lI(e,!0);return Xw(n,(r,i)=>{MF(n,r,FF(i))}),t&&(t.finalized_=!1),n}var Vl=new yH,BF=Vl.produce;Vl.produceWithPatches.bind(Vl);Vl.setAutoFreeze.bind(Vl);Vl.setUseStrictShallowCopy.bind(Vl);Vl.applyPatches.bind(Vl);Vl.createDraft.bind(Vl);Vl.finishDraft.bind(Vl);function _H(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function vH(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function xH(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var HM=e=>Array.isArray(e)?e:[e];function bH(e){const t=Array.isArray(e[0])?e[0]:e;return xH(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function wH(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var EH=class{constructor(e){this.value=e}deref(){return this.value}},SH=typeof WeakRef<"u"?WeakRef:EH,TH=0,ZM=1;function gb(){return{s:TH,v:void 0,o:null,p:null}}function ZL(e,t={}){let n=gb();const{resultEqualityCheck:r}=t;let i,o=0;function u(){var y;let l=n;const{length:p}=arguments;for(let _=0,T=p;_<T;_++){const A=arguments[_];if(typeof A=="function"||typeof A=="object"&&A!==null){let O=l.o;O===null&&(l.o=O=new WeakMap);const N=O.get(A);N===void 0?(l=gb(),O.set(A,l)):l=N}else{let O=l.p;O===null&&(l.p=O=new Map);const N=O.get(A);N===void 0?(l=gb(),O.set(A,l)):l=N}}const g=l;let x;if(l.s===ZM?x=l.v:(x=e.apply(null,arguments),o++),g.s=ZM,r){const _=((y=i==null?void 0:i.deref)==null?void 0:y.call(i))??i;_!=null&&r(_,x)&&(x=_,o!==0&&o--),i=typeof x=="object"&&x!==null||typeof x=="function"?new SH(x):x}return g.v=x,x}return u.clearCache=()=>{n=gb(),u.resetResultsCount()},u.resultsCount=()=>o,u.resetResultsCount=()=>{o=0},u}function jF(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let o=0,u=0,l,p={},g=i.pop();typeof g=="object"&&(p=g,g=i.pop()),_H(g,`createSelector expects an output function after the inputs, but received: [${typeof g}]`);const x={...n,...p},{memoize:y,memoizeOptions:_=[],argsMemoize:T=ZL,argsMemoizeOptions:A=[],devModeChecks:O={}}=x,N=HM(_),k=HM(A),R=bH(i),z=y(function(){return o++,g.apply(null,arguments)},...N),D=T(function(){u++;const q=wH(R,arguments);return l=z.apply(null,q),l},...k);return Object.assign(D,{resultFunc:g,memoizedResultFunc:z,dependencies:R,dependencyRecomputations:()=>u,resetDependencyRecomputations:()=>{u=0},lastResult:()=>l,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:y,argsMemoize:T})};return Object.assign(r,{withTypes:()=>r}),r}var CH=jF(ZL),IH=Object.assign((e,t=CH)=>{vH(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(o=>e[o]);return t(r,(...o)=>o.reduce((u,l,p)=>(u[n[p]]=l,u),{}))},{withTypes:()=>IH});function $F(e){return({dispatch:n,getState:r})=>i=>o=>typeof o=="function"?o(n,r,e):i(o)}var PH=$F(),LH=$F,AH=(...e)=>{const t=jF(...e),n=Object.assign((...r)=>{const i=t(...r),o=(u,...l)=>i(Fp(u)?zF(u):u,...l);return Object.assign(o,i),o},{withTypes:()=>n});return n};AH(ZL);var OH=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Kw:Kw.apply(null,arguments)};function C_(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(sl(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>lH(r)&&r.type===e,n}var UF=class b0 extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,b0.prototype)}static get[Symbol.species](){return b0}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new b0(...t[0].concat(this)):new b0(...t.concat(this))}};function WM(e){return ld(e)?BF(e,()=>{}):e}function KM(e,t,n){if(e.has(t)){let i=e.get(t);return n.update&&(i=n.update(i,t,e),e.set(t,i)),i}if(!n.insert)throw new Error(sl(10));const r=n.insert(t,e);return e.set(t,r),r}function kH(e){return typeof e=="boolean"}var RH=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:o=!0}=t??{};let u=new UF;return n&&(kH(n)?u.push(PH):u.push(LH(n.extraArgument))),u},MH="RTK_autoBatch",qF=e=>t=>{setTimeout(t,e)},NH=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:qF(10),DH=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,o=!1,u=!1;const l=new Set,p=e.type==="tick"?queueMicrotask:e.type==="raf"?NH:e.type==="callback"?e.queueNotification:qF(e.timeout),g=()=>{u=!1,o&&(o=!1,l.forEach(x=>x()))};return Object.assign({},r,{subscribe(x){const y=()=>i&&x(),_=r.subscribe(y);return l.add(x),()=>{_(),l.delete(x)}},dispatch(x){var y;try{return i=!((y=x==null?void 0:x.meta)!=null&&y[MH]),o=!i,o&&(u||(u=!0,p(g))),r.dispatch(x)}finally{i=!0}}})},zH=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new UF(e);return r&&i.push(DH(typeof r=="object"?r:void 0)),i},FH=!0;function BH(e){const t=RH(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:o=void 0,enhancers:u=void 0}=e||{};let l;if(typeof n=="function")l=n;else if(VL(n))l=sH(n);else throw new Error(sl(1));let p;typeof r=="function"?p=r(t):p=t();let g=Kw;i&&(g=OH({trace:!FH,...typeof i=="object"&&i}));const x=aH(...p),y=zH(x);let _=typeof u=="function"?u(y):y();const T=g(..._);return OF(l,o,T)}function VF(e){const t={},n=[];let r;const i={addCase(o,u){const l=typeof o=="string"?o:o.type;if(!l)throw new Error(sl(28));if(l in t)throw new Error(sl(29));return t[l]=u,i},addMatcher(o,u){return n.push({matcher:o,reducer:u}),i},addDefaultCase(o){return r=o,i}};return e(i),[t,n,r]}function jH(e){return typeof e=="function"}function $H(e,t){let[n,r,i]=VF(t),o;if(jH(e))o=()=>WM(e());else{const l=WM(e);o=()=>l}function u(l=o(),p){let g=[n[p.type],...r.filter(({matcher:x})=>x(p)).map(({reducer:x})=>x)];return g.filter(x=>!!x).length===0&&(g=[i]),g.reduce((x,y)=>{if(y)if(Fp(x)){const T=y(x,p);return T===void 0?x:T}else{if(ld(x))return BF(x,_=>y(_,p));{const _=y(x,p);if(_===void 0){if(x===null)return x;throw new Error(sl(9))}return _}}return x},l)}return u.getInitialState=o,u}var UH="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",qH=(e=21)=>{let t="",n=e;for(;n--;)t+=UH[Math.random()*64|0];return t},VH=Symbol.for("rtk-slice-createasyncthunk");function GH(e,t){return`${e}/${t}`}function HH({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[VH];return function(i){const{name:o,reducerPath:u=o}=i;if(!o)throw new Error(sl(11));typeof process<"u";const l=(typeof i.reducers=="function"?i.reducers(KH()):i.reducers)||{},p=Object.keys(l),g={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},x={addCase(z,D){const U=typeof z=="string"?z:z.type;if(!U)throw new Error(sl(12));if(U in g.sliceCaseReducersByType)throw new Error(sl(13));return g.sliceCaseReducersByType[U]=D,x},addMatcher(z,D){return g.sliceMatchers.push({matcher:z,reducer:D}),x},exposeAction(z,D){return g.actionCreators[z]=D,x},exposeCaseReducer(z,D){return g.sliceCaseReducersByName[z]=D,x}};p.forEach(z=>{const D=l[z],U={reducerName:z,type:GH(o,z),createNotation:typeof i.reducers=="function"};YH(D)?QH(U,D,x,t):XH(U,D,x)});function y(){const[z={},D=[],U=void 0]=typeof i.extraReducers=="function"?VF(i.extraReducers):[i.extraReducers],q={...z,...g.sliceCaseReducersByType};return $H(i.initialState,G=>{for(let H in q)G.addCase(H,q[H]);for(let H of g.sliceMatchers)G.addMatcher(H.matcher,H.reducer);for(let H of D)G.addMatcher(H.matcher,H.reducer);U&&G.addDefaultCase(U)})}const _=z=>z,T=new Map;let A;function O(z,D){return A||(A=y()),A(z,D)}function N(){return A||(A=y()),A.getInitialState()}function k(z,D=!1){function U(G){let H=G[z];return typeof H>"u"&&D&&(H=N()),H}function q(G=_){const H=KM(T,D,{insert:()=>new WeakMap});return KM(H,G,{insert:()=>{const J={};for(const[Y,X]of Object.entries(i.selectors??{}))J[Y]=ZH(X,G,N,D);return J}})}return{reducerPath:z,getSelectors:q,get selectors(){return q(U)},selectSlice:U}}const R={name:o,reducer:O,actions:g.actionCreators,caseReducers:g.sliceCaseReducersByName,getInitialState:N,...k(u),injectInto(z,{reducerPath:D,...U}={}){const q=D??u;return z.inject({reducerPath:q,reducer:O},U),{...R,...k(q,!0)}}};return R}}function ZH(e,t,n,r){function i(o,...u){let l=t(o);return typeof l>"u"&&r&&(l=n()),e(l,...u)}return i.unwrapped=e,i}var WH=HH();function KH(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function XH({type:e,reducerName:t,createNotation:n},r,i){let o,u;if("reducer"in r){if(n&&!JH(r))throw new Error(sl(17));o=r.reducer,u=r.prepare}else o=r;i.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,u?C_(e,u):C_(e))}function YH(e){return e._reducerDefinitionType==="asyncThunk"}function JH(e){return e._reducerDefinitionType==="reducerWithPrepare"}function QH({type:e,reducerName:t},n,r,i){if(!i)throw new Error(sl(18));const{payloadCreator:o,fulfilled:u,pending:l,rejected:p,settled:g,options:x}=n,y=i(e,o,x);r.exposeAction(t,y),u&&r.addCase(y.fulfilled,u),l&&r.addCase(y.pending,l),p&&r.addCase(y.rejected,p),g&&r.addMatcher(y.settled,g),r.exposeCaseReducer(t,{fulfilled:u||yb,pending:l||yb,rejected:p||yb,settled:g||yb})}function yb(){}var eZ=(e,t)=>{if(typeof e!="function")throw new Error(sl(32))},WL="listenerMiddleware",tZ=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:o}=e;if(t)i=C_(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(sl(21));return eZ(o),{predicate:i,type:t,effect:o}},nZ=Object.assign(e=>{const{type:t,predicate:n,effect:r}=tZ(e);return{id:qH(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(sl(22))}}},{withTypes:()=>nZ}),rZ=Object.assign(C_(`${WL}/add`),{withTypes:()=>rZ});C_(`${WL}/removeAll`);var iZ=Object.assign(C_(`${WL}/remove`),{withTypes:()=>iZ});function sl(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const oZ=0,GF=WH({name:"notificationCount",initialState:oZ,reducers:{setCount(e,t){return t.payload},decreaseCount(e,t){return e-t.payload},increaseCount(e,t){return e+t.payload}}}),{setCount:sZ,decreaseCount:aZ,increaseCount:lZ}=GF.actions,uZ=GF.reducer;function HF(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=HF(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function bp(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=HF(e))&&(r&&(r+=" "),r+=t);return r}const _1=e=>typeof e=="number"&&!isNaN(e),ag=e=>typeof e=="string",Dl=e=>typeof e=="function",ow=e=>ag(e)||Dl(e)?e:null,dI=e=>qe.isValidElement(e)||ag(e)||Dl(e)||_1(e);function cZ(e,t,n){n===void 0&&(n=300);const{scrollHeight:r,style:i}=e;requestAnimationFrame(()=>{i.minHeight="initial",i.height=r+"px",i.transition=`all ${n}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(t,n)})})}function QE(e){let{enter:t,exit:n,appendPosition:r=!1,collapse:i=!0,collapseDuration:o=300}=e;return function(u){let{children:l,position:p,preventExitTransition:g,done:x,nodeRef:y,isIn:_,playToast:T}=u;const A=r?`${t}--${p}`:t,O=r?`${n}--${p}`:n,N=qe.useRef(0);return qe.useLayoutEffect(()=>{const k=y.current,R=A.split(" "),z=D=>{D.target===y.current&&(T(),k.removeEventListener("animationend",z),k.removeEventListener("animationcancel",z),N.current===0&&D.type!=="animationcancel"&&k.classList.remove(...R))};k.classList.add(...R),k.addEventListener("animationend",z),k.addEventListener("animationcancel",z)},[]),qe.useEffect(()=>{const k=y.current,R=()=>{k.removeEventListener("animationend",R),i?cZ(k,x,o):x()};_||(g?R():(N.current=1,k.className+=` ${O}`,k.addEventListener("animationend",R)))},[_]),Bt.createElement(Bt.Fragment,null,l)}}function XM(e,t){return e!=null?{content:e.content,containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,status:t}:{}}const La=new Map;let v1=[];const pI=new Set,hZ=e=>pI.forEach(t=>t(e)),ZF=()=>La.size>0;function WF(e,t){var n;if(t)return!((n=La.get(t))==null||!n.isToastActive(e));let r=!1;return La.forEach(i=>{i.isToastActive(e)&&(r=!0)}),r}function KF(e,t){dI(e)&&(ZF()||v1.push({content:e,options:t}),La.forEach(n=>{n.buildToast(e,t)}))}function YM(e,t){La.forEach(n=>{t!=null&&t!=null&&t.containerId?(t==null?void 0:t.containerId)===n.id&&n.toggle(e,t==null?void 0:t.id):n.toggle(e,t==null?void 0:t.id)})}function fZ(e){const{subscribe:t,getSnapshot:n,setProps:r}=qe.useRef(function(o){const u=o.containerId||1;return{subscribe(l){const p=function(x,y,_){let T=1,A=0,O=[],N=[],k=[],R=y;const z=new Map,D=new Set,U=()=>{k=Array.from(z.values()),D.forEach(H=>H())},q=H=>{N=H==null?[]:N.filter(J=>J!==H),U()},G=H=>{const{toastId:J,onOpen:Y,updateId:X,children:ee}=H.props,ue=X==null;H.staleId&&z.delete(H.staleId),z.set(J,H),N=[...N,H.props.toastId].filter(oe=>oe!==H.staleId),U(),_(XM(H,ue?"added":"updated")),ue&&Dl(Y)&&Y(qe.isValidElement(ee)&&ee.props)};return{id:x,props:R,observe:H=>(D.add(H),()=>D.delete(H)),toggle:(H,J)=>{z.forEach(Y=>{J!=null&&J!==Y.props.toastId||Dl(Y.toggle)&&Y.toggle(H)})},removeToast:q,toasts:z,clearQueue:()=>{A-=O.length,O=[]},buildToast:(H,J)=>{if((xe=>{let{containerId:Ee,toastId:Ge,updateId:$e}=xe;const be=Ee?Ee!==x:x!==1,He=z.has(Ge)&&$e==null;return be||He})(J))return;const{toastId:Y,updateId:X,data:ee,staleId:ue,delay:oe}=J,we=()=>{q(Y)},Ne=X==null;Ne&&A++;const Be={...R,style:R.toastStyle,key:T++,...Object.fromEntries(Object.entries(J).filter(xe=>{let[Ee,Ge]=xe;return Ge!=null})),toastId:Y,updateId:X,data:ee,closeToast:we,isIn:!1,className:ow(J.className||R.toastClassName),bodyClassName:ow(J.bodyClassName||R.bodyClassName),progressClassName:ow(J.progressClassName||R.progressClassName),autoClose:!J.isLoading&&(De=J.autoClose,Ae=R.autoClose,De===!1||_1(De)&&De>0?De:Ae),deleteToast(){const xe=z.get(Y),{onClose:Ee,children:Ge}=xe.props;Dl(Ee)&&Ee(qe.isValidElement(Ge)&&Ge.props),_(XM(xe,"removed")),z.delete(Y),A--,A<0&&(A=0),O.length>0?G(O.shift()):U()}};var De,Ae;Be.closeButton=R.closeButton,J.closeButton===!1||dI(J.closeButton)?Be.closeButton=J.closeButton:J.closeButton===!0&&(Be.closeButton=!dI(R.closeButton)||R.closeButton);let ve=H;qe.isValidElement(H)&&!ag(H.type)?ve=qe.cloneElement(H,{closeToast:we,toastProps:Be,data:ee}):Dl(H)&&(ve=H({closeToast:we,toastProps:Be,data:ee}));const ce={content:ve,props:Be,staleId:ue};R.limit&&R.limit>0&&A>R.limit&&Ne?O.push(ce):_1(oe)?setTimeout(()=>{G(ce)},oe):G(ce)},setProps(H){R=H},setToggle:(H,J)=>{z.get(H).toggle=J},isToastActive:H=>N.some(J=>J===H),getSnapshot:()=>R.newestOnTop?k.reverse():k}}(u,o,hZ);La.set(u,p);const g=p.observe(l);return v1.forEach(x=>KF(x.content,x.options)),v1=[],()=>{g(),La.delete(u)}},setProps(l){var p;(p=La.get(u))==null||p.setProps(l)},getSnapshot(){var l;return(l=La.get(u))==null?void 0:l.getSnapshot()}}}(e)).current;r(e);const i=qe.useSyncExternalStore(t,n,n);return{getToastToRender:function(o){if(!i)return[];const u=new Map;return i.forEach(l=>{const{position:p}=l.props;u.has(p)||u.set(p,[]),u.get(p).push(l)}),Array.from(u,l=>o(l[0],l[1]))},isToastActive:WF,count:i==null?void 0:i.length}}function dZ(e){const[t,n]=qe.useState(!1),[r,i]=qe.useState(!1),o=qe.useRef(null),u=qe.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:l,pauseOnHover:p,closeToast:g,onClick:x,closeOnClick:y}=e;var _,T;function A(){n(!0)}function O(){n(!1)}function N(z){const D=o.current;u.canDrag&&D&&(u.didMove=!0,t&&O(),u.delta=e.draggableDirection==="x"?z.clientX-u.start:z.clientY-u.start,u.start!==z.clientX&&(u.canCloseOnClick=!1),D.style.transform=`translate3d(${e.draggableDirection==="x"?`${u.delta}px, var(--y)`:`0, calc(${u.delta}px + var(--y))`},0)`,D.style.opacity=""+(1-Math.abs(u.delta/u.removalDistance)))}function k(){document.removeEventListener("pointermove",N),document.removeEventListener("pointerup",k);const z=o.current;if(u.canDrag&&u.didMove&&z){if(u.canDrag=!1,Math.abs(u.delta)>u.removalDistance)return i(!0),e.closeToast(),void e.collapseAll();z.style.transition="transform 0.2s, opacity 0.2s",z.style.removeProperty("transform"),z.style.removeProperty("opacity")}}(T=La.get((_={id:e.toastId,containerId:e.containerId,fn:n}).containerId||1))==null||T.setToggle(_.id,_.fn),qe.useEffect(()=>{if(e.pauseOnFocusLoss)return document.hasFocus()||O(),window.addEventListener("focus",A),window.addEventListener("blur",O),()=>{window.removeEventListener("focus",A),window.removeEventListener("blur",O)}},[e.pauseOnFocusLoss]);const R={onPointerDown:function(z){if(e.draggable===!0||e.draggable===z.pointerType){u.didMove=!1,document.addEventListener("pointermove",N),document.addEventListener("pointerup",k);const D=o.current;u.canCloseOnClick=!0,u.canDrag=!0,D.style.transition="none",e.draggableDirection==="x"?(u.start=z.clientX,u.removalDistance=D.offsetWidth*(e.draggablePercent/100)):(u.start=z.clientY,u.removalDistance=D.offsetHeight*(e.draggablePercent===80?1.5*e.draggablePercent:e.draggablePercent)/100)}},onPointerUp:function(z){const{top:D,bottom:U,left:q,right:G}=o.current.getBoundingClientRect();z.nativeEvent.type!=="touchend"&&e.pauseOnHover&&z.clientX>=q&&z.clientX<=G&&z.clientY>=D&&z.clientY<=U?O():A()}};return l&&p&&(R.onMouseEnter=O,e.stacked||(R.onMouseLeave=A)),y&&(R.onClick=z=>{x&&x(z),u.canCloseOnClick&&g()}),{playToast:A,pauseToast:O,isRunning:t,preventExitTransition:r,toastRef:o,eventHandlers:R}}function pZ(e){let{delay:t,isRunning:n,closeToast:r,type:i="default",hide:o,className:u,style:l,controlledProgress:p,progress:g,rtl:x,isIn:y,theme:_}=e;const T=o||p&&g===0,A={...l,animationDuration:`${t}ms`,animationPlayState:n?"running":"paused"};p&&(A.transform=`scaleX(${g})`);const O=bp("Toastify__progress-bar",p?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${_}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":x}),N=Dl(u)?u({rtl:x,type:i,defaultClassName:O}):bp(O,u),k={[p&&g>=1?"onTransitionEnd":"onAnimationEnd"]:p&&g<1?null:()=>{y&&r()}};return Bt.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":T},Bt.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${_} Toastify__progress-bar--${i}`}),Bt.createElement("div",{role:"progressbar","aria-hidden":T?"true":"false","aria-label":"notification timer",className:N,style:A,...k}))}let mZ=1;const XF=()=>""+mZ++;function gZ(e){return e&&(ag(e.toastId)||_1(e.toastId))?e.toastId:XF()}function $0(e,t){return KF(e,t),t.toastId}function Qw(e,t){return{...t,type:t&&t.type||e,toastId:gZ(t)}}function _b(e){return(t,n)=>$0(t,Qw(e,n))}function ar(e,t){return $0(e,Qw("default",t))}ar.loading=(e,t)=>$0(e,Qw("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t})),ar.promise=function(e,t,n){let r,{pending:i,error:o,success:u}=t;i&&(r=ag(i)?ar.loading(i,n):ar.loading(i.render,{...n,...i}));const l={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},p=(x,y,_)=>{if(y==null)return void ar.dismiss(r);const T={type:x,...l,...n,data:_},A=ag(y)?{render:y}:y;return r?ar.update(r,{...T,...A}):ar(A.render,{...T,...A}),_},g=Dl(e)?e():e;return g.then(x=>p("success",u,x)).catch(x=>p("error",o,x)),g},ar.success=_b("success"),ar.info=_b("info"),ar.error=_b("error"),ar.warning=_b("warning"),ar.warn=ar.warning,ar.dark=(e,t)=>$0(e,Qw("default",{theme:"dark",...t})),ar.dismiss=function(e){(function(t){var n;if(ZF()){if(t==null||ag(n=t)||_1(n))La.forEach(r=>{r.removeToast(t)});else if(t&&("containerId"in t||"id"in t)){const r=La.get(t.containerId);r?r.removeToast(t.id):La.forEach(i=>{i.removeToast(t.id)})}}else v1=v1.filter(r=>t!=null&&r.options.toastId!==t)})(e)},ar.clearWaitingQueue=function(e){e===void 0&&(e={}),La.forEach(t=>{!t.props.limit||e.containerId&&t.id!==e.containerId||t.clearQueue()})},ar.isActive=WF,ar.update=function(e,t){t===void 0&&(t={});const n=((r,i)=>{var o;let{containerId:u}=i;return(o=La.get(u||1))==null?void 0:o.toasts.get(r)})(e,t);if(n){const{props:r,content:i}=n,o={delay:100,...r,...t,toastId:t.toastId||e,updateId:XF()};o.toastId!==e&&(o.staleId=e);const u=o.render||i;delete o.render,$0(u,o)}},ar.done=e=>{ar.update(e,{progress:1})},ar.onChange=function(e){return pI.add(e),()=>{pI.delete(e)}},ar.play=e=>YM(!0,e),ar.pause=e=>YM(!1,e);const yZ=typeof window<"u"?qe.useLayoutEffect:qe.useEffect,vb=e=>{let{theme:t,type:n,isLoading:r,...i}=e;return Bt.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:t==="colored"?"currentColor":`var(--toastify-icon-color-${n})`,...i})},A2={info:function(e){return Bt.createElement(vb,{...e},Bt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return Bt.createElement(vb,{...e},Bt.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return Bt.createElement(vb,{...e},Bt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return Bt.createElement(vb,{...e},Bt.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return Bt.createElement("div",{className:"Toastify__spinner"})}},_Z=e=>{const{isRunning:t,preventExitTransition:n,toastRef:r,eventHandlers:i,playToast:o}=dZ(e),{closeButton:u,children:l,autoClose:p,onClick:g,type:x,hideProgressBar:y,closeToast:_,transition:T,position:A,className:O,style:N,bodyClassName:k,bodyStyle:R,progressClassName:z,progressStyle:D,updateId:U,role:q,progress:G,rtl:H,toastId:J,deleteToast:Y,isIn:X,isLoading:ee,closeOnClick:ue,theme:oe}=e,we=bp("Toastify__toast",`Toastify__toast-theme--${oe}`,`Toastify__toast--${x}`,{"Toastify__toast--rtl":H},{"Toastify__toast--close-on-click":ue}),Ne=Dl(O)?O({rtl:H,position:A,type:x,defaultClassName:we}):bp(we,O),Be=function(ce){let{theme:xe,type:Ee,isLoading:Ge,icon:$e}=ce,be=null;const He={theme:xe,type:Ee};return $e===!1||(Dl($e)?be=$e({...He,isLoading:Ge}):qe.isValidElement($e)?be=qe.cloneElement($e,He):Ge?be=A2.spinner():(it=>it in A2)(Ee)&&(be=A2[Ee](He))),be}(e),De=!!G||!p,Ae={closeToast:_,type:x,theme:oe};let ve=null;return u===!1||(ve=Dl(u)?u(Ae):qe.isValidElement(u)?qe.cloneElement(u,Ae):function(ce){let{closeToast:xe,theme:Ee,ariaLabel:Ge="close"}=ce;return Bt.createElement("button",{className:`Toastify__close-button Toastify__close-button--${Ee}`,type:"button",onClick:$e=>{$e.stopPropagation(),xe($e)},"aria-label":Ge},Bt.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Bt.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(Ae)),Bt.createElement(T,{isIn:X,done:Y,position:A,preventExitTransition:n,nodeRef:r,playToast:o},Bt.createElement("div",{id:J,onClick:g,"data-in":X,className:Ne,...i,style:N,ref:r},Bt.createElement("div",{...X&&{role:q},className:Dl(k)?k({type:x}):bp("Toastify__toast-body",k),style:R},Be!=null&&Bt.createElement("div",{className:bp("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!ee})},Be),Bt.createElement("div",null,l)),ve,Bt.createElement(pZ,{...U&&!De?{key:`pb-${U}`}:{},rtl:H,theme:oe,delay:p,isRunning:t,isIn:X,closeToast:_,hide:y,type:x,style:D,className:z,controlledProgress:De,progress:G||0})))},eS=function(e,t){return t===void 0&&(t=!1),{enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}},vZ=QE(eS("bounce",!0));QE(eS("slide",!0));QE(eS("zoom"));QE(eS("flip"));const xZ={position:"top-right",transition:vZ,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};function bZ(e){let t={...xZ,...e};const n=e.stacked,[r,i]=qe.useState(!0),o=qe.useRef(null),{getToastToRender:u,isToastActive:l,count:p}=fZ(t),{className:g,style:x,rtl:y,containerId:_}=t;function T(O){const N=bp("Toastify__toast-container",`Toastify__toast-container--${O}`,{"Toastify__toast-container--rtl":y});return Dl(g)?g({position:O,rtl:y,defaultClassName:N}):bp(N,ow(g))}function A(){n&&(i(!0),ar.play())}return yZ(()=>{if(n){var O;const N=o.current.querySelectorAll('[data-in="true"]'),k=12,R=(O=t.position)==null?void 0:O.includes("top");let z=0,D=0;Array.from(N).reverse().forEach((U,q)=>{const G=U;G.classList.add("Toastify__toast--stacked"),q>0&&(G.dataset.collapsed=`${r}`),G.dataset.pos||(G.dataset.pos=R?"top":"bot");const H=z*(r?.2:1)+(r?0:k*q);G.style.setProperty("--y",`${R?H:-1*H}px`),G.style.setProperty("--g",`${k}`),G.style.setProperty("--s",""+(1-(r?D:0))),z+=G.offsetHeight,D+=.025})}},[r,p,n]),Bt.createElement("div",{ref:o,className:"Toastify",id:_,onMouseEnter:()=>{n&&(i(!1),ar.pause())},onMouseLeave:A},u((O,N)=>{const k=N.length?{...x}:{...x,pointerEvents:"none"};return Bt.createElement("div",{className:T(O),style:k,key:`container-${O}`},N.map(R=>{let{content:z,props:D}=R;return Bt.createElement(_Z,{...D,stacked:n,collapseAll:A,isIn:l(D.toastId,D.containerId),style:D.style,key:`toast-${D.key}`},z)}))}))}function YF(e,t){return function(){return e.apply(t,arguments)}}const{toString:wZ}=Object.prototype,{getPrototypeOf:KL}=Object,tS=(e=>t=>{const n=wZ.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),of=e=>(e=e.toLowerCase(),t=>tS(t)===e),nS=e=>t=>typeof t===e,{isArray:iv}=Array,x1=nS("undefined");function EZ(e){return e!==null&&!x1(e)&&e.constructor!==null&&!x1(e.constructor)&&zu(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const JF=of("ArrayBuffer");function SZ(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&JF(e.buffer),t}const TZ=nS("string"),zu=nS("function"),QF=nS("number"),rS=e=>e!==null&&typeof e=="object",CZ=e=>e===!0||e===!1,sw=e=>{if(tS(e)!=="object")return!1;const t=KL(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},IZ=of("Date"),PZ=of("File"),LZ=of("Blob"),AZ=of("FileList"),OZ=e=>rS(e)&&zu(e.pipe),kZ=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||zu(e.append)&&((t=tS(e))==="formdata"||t==="object"&&zu(e.toString)&&e.toString()==="[object FormData]"))},RZ=of("URLSearchParams"),MZ=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function dx(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),iv(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{const o=n?Object.getOwnPropertyNames(e):Object.keys(e),u=o.length;let l;for(r=0;r<u;r++)l=o[r],t.call(null,e[l],l,e)}}function eB(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,i;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const tB=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,nB=e=>!x1(e)&&e!==tB;function mI(){const{caseless:e}=nB(this)&&this||{},t={},n=(r,i)=>{const o=e&&eB(t,i)||i;sw(t[o])&&sw(r)?t[o]=mI(t[o],r):sw(r)?t[o]=mI({},r):iv(r)?t[o]=r.slice():t[o]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&dx(arguments[r],n);return t}const NZ=(e,t,n,{allOwnKeys:r}={})=>(dx(t,(i,o)=>{n&&zu(i)?e[o]=YF(i,n):e[o]=i},{allOwnKeys:r}),e),DZ=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),zZ=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},FZ=(e,t,n,r)=>{let i,o,u;const l={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)u=i[o],(!r||r(u,e,t))&&!l[u]&&(t[u]=e[u],l[u]=!0);e=n!==!1&&KL(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},BZ=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},jZ=e=>{if(!e)return null;if(iv(e))return e;let t=e.length;if(!QF(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},$Z=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&KL(Uint8Array)),UZ=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=r.next())&&!i.done;){const o=i.value;t.call(e,o[0],o[1])}},qZ=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},VZ=of("HTMLFormElement"),GZ=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),JM=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),HZ=of("RegExp"),rB=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};dx(n,(i,o)=>{let u;(u=t(i,o,e))!==!1&&(r[o]=u||i)}),Object.defineProperties(e,r)},ZZ=e=>{rB(e,(t,n)=>{if(zu(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(zu(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},WZ=(e,t)=>{const n={},r=i=>{i.forEach(o=>{n[o]=!0})};return iv(e)?r(e):r(String(e).split(t)),n},KZ=()=>{},XZ=(e,t)=>(e=+e,Number.isFinite(e)?e:t),O2="abcdefghijklmnopqrstuvwxyz",QM="0123456789",iB={DIGIT:QM,ALPHA:O2,ALPHA_DIGIT:O2+O2.toUpperCase()+QM},YZ=(e=16,t=iB.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n};function JZ(e){return!!(e&&zu(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const QZ=e=>{const t=new Array(10),n=(r,i)=>{if(rS(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[i]=r;const o=iv(r)?[]:{};return dx(r,(u,l)=>{const p=n(u,i+1);!x1(p)&&(o[l]=p)}),t[i]=void 0,o}}return r};return n(e,0)},eW=of("AsyncFunction"),tW=e=>e&&(rS(e)||zu(e))&&zu(e.then)&&zu(e.catch),Ct={isArray:iv,isArrayBuffer:JF,isBuffer:EZ,isFormData:kZ,isArrayBufferView:SZ,isString:TZ,isNumber:QF,isBoolean:CZ,isObject:rS,isPlainObject:sw,isUndefined:x1,isDate:IZ,isFile:PZ,isBlob:LZ,isRegExp:HZ,isFunction:zu,isStream:OZ,isURLSearchParams:RZ,isTypedArray:$Z,isFileList:AZ,forEach:dx,merge:mI,extend:NZ,trim:MZ,stripBOM:DZ,inherits:zZ,toFlatObject:FZ,kindOf:tS,kindOfTest:of,endsWith:BZ,toArray:jZ,forEachEntry:UZ,matchAll:qZ,isHTMLForm:VZ,hasOwnProperty:JM,hasOwnProp:JM,reduceDescriptors:rB,freezeMethods:ZZ,toObjectSet:WZ,toCamelCase:GZ,noop:KZ,toFiniteNumber:XZ,findKey:eB,global:tB,isContextDefined:nB,ALPHABET:iB,generateString:YZ,isSpecCompliantForm:JZ,toJSONObject:QZ,isAsyncFn:eW,isThenable:tW};function Pr(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}Ct.inherits(Pr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ct.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const oB=Pr.prototype,sB={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{sB[e]={value:e}});Object.defineProperties(Pr,sB);Object.defineProperty(oB,"isAxiosError",{value:!0});Pr.from=(e,t,n,r,i,o)=>{const u=Object.create(oB);return Ct.toFlatObject(e,u,function(p){return p!==Error.prototype},l=>l!=="isAxiosError"),Pr.call(u,e.message,t,n,r,i),u.cause=e,u.name=e.name,o&&Object.assign(u,o),u};const nW=null;function gI(e){return Ct.isPlainObject(e)||Ct.isArray(e)}function aB(e){return Ct.endsWith(e,"[]")?e.slice(0,-2):e}function eN(e,t,n){return e?e.concat(t).map(function(i,o){return i=aB(i),!n&&o?"["+i+"]":i}).join(n?".":""):t}function rW(e){return Ct.isArray(e)&&!e.some(gI)}const iW=Ct.toFlatObject(Ct,{},null,function(t){return/^is[A-Z]/.test(t)});function iS(e,t,n){if(!Ct.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=Ct.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(O,N){return!Ct.isUndefined(N[O])});const r=n.metaTokens,i=n.visitor||x,o=n.dots,u=n.indexes,p=(n.Blob||typeof Blob<"u"&&Blob)&&Ct.isSpecCompliantForm(t);if(!Ct.isFunction(i))throw new TypeError("visitor must be a function");function g(A){if(A===null)return"";if(Ct.isDate(A))return A.toISOString();if(!p&&Ct.isBlob(A))throw new Pr("Blob is not supported. Use a Buffer instead.");return Ct.isArrayBuffer(A)||Ct.isTypedArray(A)?p&&typeof Blob=="function"?new Blob([A]):Buffer.from(A):A}function x(A,O,N){let k=A;if(A&&!N&&typeof A=="object"){if(Ct.endsWith(O,"{}"))O=r?O:O.slice(0,-2),A=JSON.stringify(A);else if(Ct.isArray(A)&&rW(A)||(Ct.isFileList(A)||Ct.endsWith(O,"[]"))&&(k=Ct.toArray(A)))return O=aB(O),k.forEach(function(z,D){!(Ct.isUndefined(z)||z===null)&&t.append(u===!0?eN([O],D,o):u===null?O:O+"[]",g(z))}),!1}return gI(A)?!0:(t.append(eN(N,O,o),g(A)),!1)}const y=[],_=Object.assign(iW,{defaultVisitor:x,convertValue:g,isVisitable:gI});function T(A,O){if(!Ct.isUndefined(A)){if(y.indexOf(A)!==-1)throw Error("Circular reference detected in "+O.join("."));y.push(A),Ct.forEach(A,function(k,R){(!(Ct.isUndefined(k)||k===null)&&i.call(t,k,Ct.isString(R)?R.trim():R,O,_))===!0&&T(k,O?O.concat(R):[R])}),y.pop()}}if(!Ct.isObject(e))throw new TypeError("data must be an object");return T(e),t}function tN(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function XL(e,t){this._pairs=[],e&&iS(e,this,t)}const lB=XL.prototype;lB.append=function(t,n){this._pairs.push([t,n])};lB.toString=function(t){const n=t?function(r){return t.call(this,r,tN)}:tN;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function oW(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function uB(e,t,n){if(!t)return e;const r=n&&n.encode||oW,i=n&&n.serialize;let o;if(i?o=i(t,n):o=Ct.isURLSearchParams(t)?t.toString():new XL(t,n).toString(r),o){const u=e.indexOf("#");u!==-1&&(e=e.slice(0,u)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class nN{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Ct.forEach(this.handlers,function(r){r!==null&&t(r)})}}const cB={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},sW=typeof URLSearchParams<"u"?URLSearchParams:XL,aW=typeof FormData<"u"?FormData:null,lW=typeof Blob<"u"?Blob:null,uW={isBrowser:!0,classes:{URLSearchParams:sW,FormData:aW,Blob:lW},protocols:["http","https","file","blob","url","data"]},hB=typeof window<"u"&&typeof document<"u",cW=(e=>hB&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),hW=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",fW=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:hB,hasStandardBrowserEnv:cW,hasStandardBrowserWebWorkerEnv:hW},Symbol.toStringTag,{value:"Module"})),Vh={...fW,...uW};function dW(e,t){return iS(e,new Vh.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,o){return Vh.isNode&&Ct.isBuffer(n)?(this.append(r,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function pW(e){return Ct.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function mW(e){const t={},n=Object.keys(e);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],t[o]=e[o];return t}function fB(e){function t(n,r,i,o){let u=n[o++];if(u==="__proto__")return!0;const l=Number.isFinite(+u),p=o>=n.length;return u=!u&&Ct.isArray(i)?i.length:u,p?(Ct.hasOwnProp(i,u)?i[u]=[i[u],r]:i[u]=r,!l):((!i[u]||!Ct.isObject(i[u]))&&(i[u]=[]),t(n,r,i[u],o)&&Ct.isArray(i[u])&&(i[u]=mW(i[u])),!l)}if(Ct.isFormData(e)&&Ct.isFunction(e.entries)){const n={};return Ct.forEachEntry(e,(r,i)=>{t(pW(r),i,n,0)}),n}return null}function gW(e,t,n){if(Ct.isString(e))try{return(t||JSON.parse)(e),Ct.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const YL={transitional:cB,adapter:["xhr","http"],transformRequest:[function(t,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,o=Ct.isObject(t);if(o&&Ct.isHTMLForm(t)&&(t=new FormData(t)),Ct.isFormData(t))return i?JSON.stringify(fB(t)):t;if(Ct.isArrayBuffer(t)||Ct.isBuffer(t)||Ct.isStream(t)||Ct.isFile(t)||Ct.isBlob(t))return t;if(Ct.isArrayBufferView(t))return t.buffer;if(Ct.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return dW(t,this.formSerializer).toString();if((l=Ct.isFileList(t))||r.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return iS(l?{"files[]":t}:t,p&&new p,this.formSerializer)}}return o||i?(n.setContentType("application/json",!1),gW(t)):t}],transformResponse:[function(t){const n=this.transitional||YL.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(t&&Ct.isString(t)&&(r&&!this.responseType||i)){const u=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(l){if(u)throw l.name==="SyntaxError"?Pr.from(l,Pr.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Vh.classes.FormData,Blob:Vh.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ct.forEach(["delete","get","head","post","put","patch"],e=>{YL.headers[e]={}});const JL=YL,yW=Ct.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),_W=e=>{const t={};let n,r,i;return e&&e.split(`
`).forEach(function(u){i=u.indexOf(":"),n=u.substring(0,i).trim().toLowerCase(),r=u.substring(i+1).trim(),!(!n||t[n]&&yW[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},rN=Symbol("internals");function l0(e){return e&&String(e).trim().toLowerCase()}function aw(e){return e===!1||e==null?e:Ct.isArray(e)?e.map(aw):String(e)}function vW(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const xW=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function k2(e,t,n,r,i){if(Ct.isFunction(r))return r.call(this,t,n);if(i&&(t=n),!!Ct.isString(t)){if(Ct.isString(r))return t.indexOf(r)!==-1;if(Ct.isRegExp(r))return r.test(t)}}function bW(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function wW(e,t){const n=Ct.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(i,o,u){return this[r].call(this,t,i,o,u)},configurable:!0})})}class oS{constructor(t){t&&this.set(t)}set(t,n,r){const i=this;function o(l,p,g){const x=l0(p);if(!x)throw new Error("header name must be a non-empty string");const y=Ct.findKey(i,x);(!y||i[y]===void 0||g===!0||g===void 0&&i[y]!==!1)&&(i[y||p]=aw(l))}const u=(l,p)=>Ct.forEach(l,(g,x)=>o(g,x,p));return Ct.isPlainObject(t)||t instanceof this.constructor?u(t,n):Ct.isString(t)&&(t=t.trim())&&!xW(t)?u(_W(t),n):t!=null&&o(n,t,r),this}get(t,n){if(t=l0(t),t){const r=Ct.findKey(this,t);if(r){const i=this[r];if(!n)return i;if(n===!0)return vW(i);if(Ct.isFunction(n))return n.call(this,i,r);if(Ct.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=l0(t),t){const r=Ct.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||k2(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let i=!1;function o(u){if(u=l0(u),u){const l=Ct.findKey(r,u);l&&(!n||k2(r,r[l],l,n))&&(delete r[l],i=!0)}}return Ct.isArray(t)?t.forEach(o):o(t),i}clear(t){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const o=n[r];(!t||k2(this,this[o],o,t,!0))&&(delete this[o],i=!0)}return i}normalize(t){const n=this,r={};return Ct.forEach(this,(i,o)=>{const u=Ct.findKey(r,o);if(u){n[u]=aw(i),delete n[o];return}const l=t?bW(o):String(o).trim();l!==o&&delete n[o],n[l]=aw(i),r[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return Ct.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=t&&Ct.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(i=>r.set(i)),r}static accessor(t){const r=(this[rN]=this[rN]={accessors:{}}).accessors,i=this.prototype;function o(u){const l=l0(u);r[l]||(wW(i,u),r[l]=!0)}return Ct.isArray(t)?t.forEach(o):o(t),this}}oS.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ct.reduceDescriptors(oS.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});Ct.freezeMethods(oS);const td=oS;function R2(e,t){const n=this||JL,r=t||n,i=td.from(r.headers);let o=r.data;return Ct.forEach(e,function(l){o=l.call(n,o,i.normalize(),t?t.status:void 0)}),i.normalize(),o}function dB(e){return!!(e&&e.__CANCEL__)}function px(e,t,n){Pr.call(this,e??"canceled",Pr.ERR_CANCELED,t,n),this.name="CanceledError"}Ct.inherits(px,Pr,{__CANCEL__:!0});function EW(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new Pr("Request failed with status code "+n.status,[Pr.ERR_BAD_REQUEST,Pr.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const SW=Vh.hasStandardBrowserEnv?{write(e,t,n,r,i,o){const u=[e+"="+encodeURIComponent(t)];Ct.isNumber(n)&&u.push("expires="+new Date(n).toGMTString()),Ct.isString(r)&&u.push("path="+r),Ct.isString(i)&&u.push("domain="+i),o===!0&&u.push("secure"),document.cookie=u.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function TW(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function CW(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function pB(e,t){return e&&!TW(t)?CW(e,t):t}const IW=Vh.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function i(o){let u=o;return t&&(n.setAttribute("href",u),u=n.href),n.setAttribute("href",u),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(u){const l=Ct.isString(u)?i(u):u;return l.protocol===r.protocol&&l.host===r.host}}():function(){return function(){return!0}}();function PW(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function LW(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i=0,o=0,u;return t=t!==void 0?t:1e3,function(p){const g=Date.now(),x=r[o];u||(u=g),n[i]=p,r[i]=g;let y=o,_=0;for(;y!==i;)_+=n[y++],y=y%e;if(i=(i+1)%e,i===o&&(o=(o+1)%e),g-u<t)return;const T=x&&g-x;return T?Math.round(_*1e3/T):void 0}}function iN(e,t){let n=0;const r=LW(50,250);return i=>{const o=i.loaded,u=i.lengthComputable?i.total:void 0,l=o-n,p=r(l),g=o<=u;n=o;const x={loaded:o,total:u,progress:u?o/u:void 0,bytes:l,rate:p||void 0,estimated:p&&u&&g?(u-o)/p:void 0,event:i};x[t?"download":"upload"]=!0,e(x)}}const AW=typeof XMLHttpRequest<"u",OW=AW&&function(e){return new Promise(function(n,r){let i=e.data;const o=td.from(e.headers).normalize();let{responseType:u,withXSRFToken:l}=e,p;function g(){e.cancelToken&&e.cancelToken.unsubscribe(p),e.signal&&e.signal.removeEventListener("abort",p)}let x;if(Ct.isFormData(i)){if(Vh.hasStandardBrowserEnv||Vh.hasStandardBrowserWebWorkerEnv)o.setContentType(!1);else if((x=o.getContentType())!==!1){const[O,...N]=x?x.split(";").map(k=>k.trim()).filter(Boolean):[];o.setContentType([O||"multipart/form-data",...N].join("; "))}}let y=new XMLHttpRequest;if(e.auth){const O=e.auth.username||"",N=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.set("Authorization","Basic "+btoa(O+":"+N))}const _=pB(e.baseURL,e.url);y.open(e.method.toUpperCase(),uB(_,e.params,e.paramsSerializer),!0),y.timeout=e.timeout;function T(){if(!y)return;const O=td.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),k={data:!u||u==="text"||u==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:O,config:e,request:y};EW(function(z){n(z),g()},function(z){r(z),g()},k),y=null}if("onloadend"in y?y.onloadend=T:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(T)},y.onabort=function(){y&&(r(new Pr("Request aborted",Pr.ECONNABORTED,e,y)),y=null)},y.onerror=function(){r(new Pr("Network Error",Pr.ERR_NETWORK,e,y)),y=null},y.ontimeout=function(){let N=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const k=e.transitional||cB;e.timeoutErrorMessage&&(N=e.timeoutErrorMessage),r(new Pr(N,k.clarifyTimeoutError?Pr.ETIMEDOUT:Pr.ECONNABORTED,e,y)),y=null},Vh.hasStandardBrowserEnv&&(l&&Ct.isFunction(l)&&(l=l(e)),l||l!==!1&&IW(_))){const O=e.xsrfHeaderName&&e.xsrfCookieName&&SW.read(e.xsrfCookieName);O&&o.set(e.xsrfHeaderName,O)}i===void 0&&o.setContentType(null),"setRequestHeader"in y&&Ct.forEach(o.toJSON(),function(N,k){y.setRequestHeader(k,N)}),Ct.isUndefined(e.withCredentials)||(y.withCredentials=!!e.withCredentials),u&&u!=="json"&&(y.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&y.addEventListener("progress",iN(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&y.upload&&y.upload.addEventListener("progress",iN(e.onUploadProgress)),(e.cancelToken||e.signal)&&(p=O=>{y&&(r(!O||O.type?new px(null,e,y):O),y.abort(),y=null)},e.cancelToken&&e.cancelToken.subscribe(p),e.signal&&(e.signal.aborted?p():e.signal.addEventListener("abort",p)));const A=PW(_);if(A&&Vh.protocols.indexOf(A)===-1){r(new Pr("Unsupported protocol "+A+":",Pr.ERR_BAD_REQUEST,e));return}y.send(i||null)})},yI={http:nW,xhr:OW};Ct.forEach(yI,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const oN=e=>`- ${e}`,kW=e=>Ct.isFunction(e)||e===null||e===!1,mB={getAdapter:e=>{e=Ct.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let o=0;o<t;o++){n=e[o];let u;if(r=n,!kW(n)&&(r=yI[(u=String(n)).toLowerCase()],r===void 0))throw new Pr(`Unknown adapter '${u}'`);if(r)break;i[u||"#"+o]=r}if(!r){const o=Object.entries(i).map(([l,p])=>`adapter ${l} `+(p===!1?"is not supported by the environment":"is not available in the build"));let u=t?o.length>1?`since :
`+o.map(oN).join(`
`):" "+oN(o[0]):"as no adapter specified";throw new Pr("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return r},adapters:yI};function M2(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new px(null,e)}function sN(e){return M2(e),e.headers=td.from(e.headers),e.data=R2.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),mB.getAdapter(e.adapter||JL.adapter)(e).then(function(r){return M2(e),r.data=R2.call(e,e.transformResponse,r),r.headers=td.from(r.headers),r},function(r){return dB(r)||(M2(e),r&&r.response&&(r.response.data=R2.call(e,e.transformResponse,r.response),r.response.headers=td.from(r.response.headers))),Promise.reject(r)})}const aN=e=>e instanceof td?{...e}:e;function I_(e,t){t=t||{};const n={};function r(g,x,y){return Ct.isPlainObject(g)&&Ct.isPlainObject(x)?Ct.merge.call({caseless:y},g,x):Ct.isPlainObject(x)?Ct.merge({},x):Ct.isArray(x)?x.slice():x}function i(g,x,y){if(Ct.isUndefined(x)){if(!Ct.isUndefined(g))return r(void 0,g,y)}else return r(g,x,y)}function o(g,x){if(!Ct.isUndefined(x))return r(void 0,x)}function u(g,x){if(Ct.isUndefined(x)){if(!Ct.isUndefined(g))return r(void 0,g)}else return r(void 0,x)}function l(g,x,y){if(y in t)return r(g,x);if(y in e)return r(void 0,g)}const p={url:o,method:o,data:o,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:l,headers:(g,x)=>i(aN(g),aN(x),!0)};return Ct.forEach(Object.keys(Object.assign({},e,t)),function(x){const y=p[x]||i,_=y(e[x],t[x],x);Ct.isUndefined(_)&&y!==l||(n[x]=_)}),n}const gB="1.6.8",QL={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{QL[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const lN={};QL.transitional=function(t,n,r){function i(o,u){return"[Axios v"+gB+"] Transitional option '"+o+"'"+u+(r?". "+r:"")}return(o,u,l)=>{if(t===!1)throw new Pr(i(u," has been removed"+(n?" in "+n:"")),Pr.ERR_DEPRECATED);return n&&!lN[u]&&(lN[u]=!0,console.warn(i(u," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(o,u,l):!0}};function RW(e,t,n){if(typeof e!="object")throw new Pr("options must be an object",Pr.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const o=r[i],u=t[o];if(u){const l=e[o],p=l===void 0||u(l,o,e);if(p!==!0)throw new Pr("option "+o+" must be "+p,Pr.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Pr("Unknown option "+o,Pr.ERR_BAD_OPTION)}}const _I={assertOptions:RW,validators:QL},Qd=_I.validators;class eE{constructor(t){this.defaults=t,this.interceptors={request:new nN,response:new nN}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=I_(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:o}=n;r!==void 0&&_I.assertOptions(r,{silentJSONParsing:Qd.transitional(Qd.boolean),forcedJSONParsing:Qd.transitional(Qd.boolean),clarifyTimeoutError:Qd.transitional(Qd.boolean)},!1),i!=null&&(Ct.isFunction(i)?n.paramsSerializer={serialize:i}:_I.assertOptions(i,{encode:Qd.function,serialize:Qd.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let u=o&&Ct.merge(o.common,o[n.method]);o&&Ct.forEach(["delete","get","head","post","put","patch","common"],A=>{delete o[A]}),n.headers=td.concat(u,o);const l=[];let p=!0;this.interceptors.request.forEach(function(O){typeof O.runWhen=="function"&&O.runWhen(n)===!1||(p=p&&O.synchronous,l.unshift(O.fulfilled,O.rejected))});const g=[];this.interceptors.response.forEach(function(O){g.push(O.fulfilled,O.rejected)});let x,y=0,_;if(!p){const A=[sN.bind(this),void 0];for(A.unshift.apply(A,l),A.push.apply(A,g),_=A.length,x=Promise.resolve(n);y<_;)x=x.then(A[y++],A[y++]);return x}_=l.length;let T=n;for(y=0;y<_;){const A=l[y++],O=l[y++];try{T=A(T)}catch(N){O.call(this,N);break}}try{x=sN.call(this,T)}catch(A){return Promise.reject(A)}for(y=0,_=g.length;y<_;)x=x.then(g[y++],g[y++]);return x}getUri(t){t=I_(this.defaults,t);const n=pB(t.baseURL,t.url);return uB(n,t.params,t.paramsSerializer)}}Ct.forEach(["delete","get","head","options"],function(t){eE.prototype[t]=function(n,r){return this.request(I_(r||{},{method:t,url:n,data:(r||{}).data}))}});Ct.forEach(["post","put","patch"],function(t){function n(r){return function(o,u,l){return this.request(I_(l||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:u}))}}eE.prototype[t]=n(),eE.prototype[t+"Form"]=n(!0)});const lw=eE;class eA{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const r=this;this.promise.then(i=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](i);r._listeners=null}),this.promise.then=i=>{let o;const u=new Promise(l=>{r.subscribe(l),o=l}).then(i);return u.cancel=function(){r.unsubscribe(o)},u},t(function(o,u,l){r.reason||(r.reason=new px(o,u,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new eA(function(i){t=i}),cancel:t}}}const MW=eA;function NW(e){return function(n){return e.apply(null,n)}}function DW(e){return Ct.isObject(e)&&e.isAxiosError===!0}const vI={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(vI).forEach(([e,t])=>{vI[t]=e});const zW=vI;function yB(e){const t=new lw(e),n=YF(lw.prototype.request,t);return Ct.extend(n,lw.prototype,t,{allOwnKeys:!0}),Ct.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return yB(I_(e,i))},n}const Er=yB(JL);Er.Axios=lw;Er.CanceledError=px;Er.CancelToken=MW;Er.isCancel=dB;Er.VERSION=gB;Er.toFormData=iS;Er.AxiosError=Pr;Er.Cancel=Er.CanceledError;Er.all=function(t){return Promise.all(t)};Er.spread=NW;Er.isAxiosError=DW;Er.mergeConfig=I_;Er.AxiosHeaders=td;Er.formToJSON=e=>fB(Ct.isHTMLForm(e)?new FormData(e):e);Er.getAdapter=mB.getAdapter;Er.HttpStatusCode=zW;Er.default=Er;function FW(){const[e,t]=qe.useState(!1),{userAuth:n}=qe.useContext(eu),r=qL(),i=HG(o=>o.unreadNotifications);return qe.useEffect(()=>{if(!n)return;async function o(){try{const u=await Er.get("https://magic-estate-server.onrender.com/api/messages/unread/count");r(sZ(u.data))}catch{ar.error("Something went wrong",{autoClose:2e3})}}o()},[n]),he.jsxs("nav",{children:[he.jsxs("div",{className:"left-nav",children:[he.jsx(oo,{to:"/",children:he.jsxs("div",{className:"logo",children:[he.jsx("img",{src:"/logo.png",alt:"logo"}),he.jsx("span",{children:"MagicEstate"})]})}),he.jsx(oo,{to:"/",children:"Home"}),he.jsx(oo,{to:"/list",children:"Property"}),he.jsx(oo,{to:"/about",children:"About"})]}),he.jsxs("div",{className:"right-nav",children:[n?he.jsxs("div",{className:"logged-user",children:[he.jsx(oo,{to:"/profile",children:he.jsx("img",{className:"user-image",src:n.avatar,alt:"avatar-image"})}),he.jsx("span",{children:n.username}),he.jsxs(oo,{to:"/profile",className:"link-css",children:["Profile",i>0&&he.jsx("span",{className:"notification",children:i})]})]}):he.jsxs(he.Fragment,{children:[he.jsx(oo,{to:"/login",children:"Sign in"}),he.jsx(oo,{className:"link-css",to:"/register",children:"Sign up"})]}),he.jsx("div",{className:"hamburger-menu",onClick:()=>t(!e),children:he.jsx("img",{src:"/menu.png",alt:"menu"})}),he.jsx("div",{className:"menu-list",style:{right:e?"0%":"-50%"},children:n?he.jsxs(he.Fragment,{children:[he.jsx(oo,{to:"/",children:"Home"}),he.jsx(oo,{to:"/list",children:"Property"}),he.jsx(oo,{to:"/about",children:"About"}),he.jsxs(oo,{to:"/profile",children:["Profile",i>0&&he.jsx("span",{className:"notification",children:i})]})]}):he.jsxs(he.Fragment,{children:[he.jsx(oo,{to:"/",children:"Home"}),he.jsx(oo,{to:"/list",children:"Property"}),he.jsx(oo,{to:"/about",children:"About"}),he.jsx(oo,{to:"/login",children:"Sign in"}),he.jsx(oo,{to:"/register",children:"Sign up"})]})})]})]})}var mx=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},P_=typeof window>"u"||"Deno"in globalThis;function Pu(){}function BW(e,t){return typeof e=="function"?e(t):e}function xI(e){return typeof e=="number"&&e>=0&&e!==1/0}function _B(e,t){return Math.max(e+(t||0)-Date.now(),0)}function uN(e,t){const{type:n="all",exact:r,fetchStatus:i,predicate:o,queryKey:u,stale:l}=e;if(u){if(r){if(t.queryHash!==tA(u,t.options))return!1}else if(!w1(t.queryKey,u))return!1}if(n!=="all"){const p=t.isActive();if(n==="active"&&!p||n==="inactive"&&p)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||i&&i!==t.state.fetchStatus||o&&!o(t))}function cN(e,t){const{exact:n,status:r,predicate:i,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(n){if(b1(t.options.mutationKey)!==b1(o))return!1}else if(!w1(t.options.mutationKey,o))return!1}return!(r&&t.state.status!==r||i&&!i(t))}function tA(e,t){return((t==null?void 0:t.queryKeyHashFn)||b1)(e)}function b1(e){return JSON.stringify(e,(t,n)=>wI(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function w1(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!w1(e[n],t[n])):!1}function vB(e,t){if(e===t)return e;const n=hN(e)&&hN(t);if(n||wI(e)&&wI(t)){const r=n?e:Object.keys(e),i=r.length,o=n?t:Object.keys(t),u=o.length,l=n?[]:{};let p=0;for(let g=0;g<u;g++){const x=n?g:o[g];!n&&e[x]===void 0&&t[x]===void 0&&r.includes(x)?(l[x]=void 0,p++):(l[x]=vB(e[x],t[x]),l[x]===e[x]&&e[x]!==void 0&&p++)}return i===u&&p===i?e:l}return t}function bI(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function hN(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function wI(e){if(!fN(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!fN(n)||!n.hasOwnProperty("isPrototypeOf"))}function fN(e){return Object.prototype.toString.call(e)==="[object Object]"}function jW(e){return new Promise(t=>{setTimeout(t,e)})}function EI(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?vB(e,t):t}function $W(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function UW(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var nA=Symbol(),Ym,hp,i_,j5,qW=(j5=class extends mx{constructor(){super();cn(this,Ym,void 0);cn(this,hp,void 0);cn(this,i_,void 0);rn(this,i_,t=>{if(!P_&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Xe(this,hp)||this.setEventListener(Xe(this,i_))}onUnsubscribe(){var t;this.hasListeners()||((t=Xe(this,hp))==null||t.call(this),rn(this,hp,void 0))}setEventListener(t){var n;rn(this,i_,t),(n=Xe(this,hp))==null||n.call(this),rn(this,hp,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){Xe(this,Ym)!==t&&(rn(this,Ym,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof Xe(this,Ym)=="boolean"?Xe(this,Ym):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Ym=new WeakMap,hp=new WeakMap,i_=new WeakMap,j5),rA=new qW,o_,fp,s_,$5,VW=($5=class extends mx{constructor(){super();cn(this,o_,!0);cn(this,fp,void 0);cn(this,s_,void 0);rn(this,s_,t=>{if(!P_&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){Xe(this,fp)||this.setEventListener(Xe(this,s_))}onUnsubscribe(){var t;this.hasListeners()||((t=Xe(this,fp))==null||t.call(this),rn(this,fp,void 0))}setEventListener(t){var n;rn(this,s_,t),(n=Xe(this,fp))==null||n.call(this),rn(this,fp,t(this.setOnline.bind(this)))}setOnline(t){Xe(this,o_)!==t&&(rn(this,o_,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return Xe(this,o_)}},o_=new WeakMap,fp=new WeakMap,s_=new WeakMap,$5),tE=new VW;function GW(e){return Math.min(1e3*2**e,3e4)}function xB(e){return(e??"online")==="online"?tE.isOnline():!0}var bB=class{constructor(e){this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function N2(e){return e instanceof bB}function wB(e){let t=!1,n=0,r=!1,i,o,u;const l=new Promise((k,R)=>{o=k,u=R}),p=k=>{var R;r||(A(new bB(k)),(R=e.abort)==null||R.call(e))},g=()=>{t=!0},x=()=>{t=!1},y=()=>rA.isFocused()&&(e.networkMode==="always"||tE.isOnline())&&e.canRun(),_=()=>xB(e.networkMode)&&e.canRun(),T=k=>{var R;r||(r=!0,(R=e.onSuccess)==null||R.call(e,k),i==null||i(),o(k))},A=k=>{var R;r||(r=!0,(R=e.onError)==null||R.call(e,k),i==null||i(),u(k))},O=()=>new Promise(k=>{var R;i=z=>{(r||y())&&k(z)},(R=e.onPause)==null||R.call(e)}).then(()=>{var k;i=void 0,r||(k=e.onContinue)==null||k.call(e)}),N=()=>{if(r)return;let k;try{k=e.fn()}catch(R){k=Promise.reject(R)}Promise.resolve(k).then(T).catch(R=>{var G;if(r)return;const z=e.retry??(P_?0:3),D=e.retryDelay??GW,U=typeof D=="function"?D(n,R):D,q=z===!0||typeof z=="number"&&n<z||typeof z=="function"&&z(n,R);if(t||!q){A(R);return}n++,(G=e.onFail)==null||G.call(e,n,R),jW(U).then(()=>y()?void 0:O()).then(()=>{t?A(R):N()})})};return{promise:l,cancel:p,continue:()=>(i==null||i(),l),cancelRetry:g,continueRetry:x,canStart:_,start:()=>(_()?N():O().then(N),l)}}function HW(){let e=[],t=0,n=_=>{_()},r=_=>{_()},i=_=>setTimeout(_,0);const o=_=>{i=_},u=_=>{let T;t++;try{T=_()}finally{t--,t||g()}return T},l=_=>{t?e.push(_):i(()=>{n(_)})},p=_=>(...T)=>{l(()=>{_(...T)})},g=()=>{const _=e;e=[],_.length&&i(()=>{r(()=>{_.forEach(T=>{n(T)})})})};return{batch:u,batchCalls:p,schedule:l,setNotifyFunction:_=>{n=_},setBatchNotifyFunction:_=>{r=_},setScheduler:o}}var Ds=HW(),Jm,U5,EB=(U5=class{constructor(){cn(this,Jm,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),xI(this.gcTime)&&rn(this,Jm,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(P_?1/0:5*60*1e3))}clearGcTimeout(){Xe(this,Jm)&&(clearTimeout(Xe(this,Jm)),rn(this,Jm,void 0))}},Jm=new WeakMap,U5),a_,l_,Tu,wa,V1,Qm,Cc,Vf,q5,ZW=(q5=class extends EB{constructor(t){super();cn(this,Cc);cn(this,a_,void 0);cn(this,l_,void 0);cn(this,Tu,void 0);cn(this,wa,void 0);cn(this,V1,void 0);cn(this,Qm,void 0);rn(this,Qm,!1),rn(this,V1,t.defaultOptions),this.setOptions(t.options),this.observers=[],rn(this,Tu,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,rn(this,a_,t.state||WW(this.options)),this.state=Xe(this,a_),this.scheduleGc()}get meta(){return this.options.meta}setOptions(t){this.options={...Xe(this,V1),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Xe(this,Tu).remove(this)}setData(t,n){const r=EI(this.state.data,t,this.options);return En(this,Cc,Vf).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){En(this,Cc,Vf).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,i;const n=(r=Xe(this,wa))==null?void 0:r.promise;return(i=Xe(this,wa))==null||i.cancel(t),n?n.then(Pu).catch(Pu):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Xe(this,a_))}isActive(){return this.observers.some(t=>t.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!_B(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=Xe(this,wa))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=Xe(this,wa))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Xe(this,Tu).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(Xe(this,wa)&&(Xe(this,Qm)?Xe(this,wa).cancel({revert:!0}):Xe(this,wa).cancelRetry()),this.scheduleGc()),Xe(this,Tu).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||En(this,Cc,Vf).call(this,{type:"invalidate"})}fetch(t,n){var g,x,y;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(Xe(this,wa))return Xe(this,wa).continueRetry(),Xe(this,wa).promise}if(t&&this.setOptions(t),!this.options.queryFn){const _=this.observers.find(T=>T.options.queryFn);_&&this.setOptions(_.options)}const r=new AbortController,i={queryKey:this.queryKey,meta:this.meta},o=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(rn(this,Qm,!0),r.signal)})};o(i);const u=()=>!this.options.queryFn||this.options.queryFn===nA?Promise.reject(new Error(`Missing queryFn: '${this.options.queryHash}'`)):(rn(this,Qm,!1),this.options.persister?this.options.persister(this.options.queryFn,i,this):this.options.queryFn(i)),l={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:u};o(l),(g=this.options.behavior)==null||g.onFetch(l,this),rn(this,l_,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((x=l.fetchOptions)==null?void 0:x.meta))&&En(this,Cc,Vf).call(this,{type:"fetch",meta:(y=l.fetchOptions)==null?void 0:y.meta});const p=_=>{var T,A,O,N;N2(_)&&_.silent||En(this,Cc,Vf).call(this,{type:"error",error:_}),N2(_)||((A=(T=Xe(this,Tu).config).onError)==null||A.call(T,_,this),(N=(O=Xe(this,Tu).config).onSettled)==null||N.call(O,this.state.data,_,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return rn(this,wa,wB({fn:l.fetchFn,abort:r.abort.bind(r),onSuccess:_=>{var T,A,O,N;if(_===void 0){p(new Error(`${this.queryHash} data is undefined`));return}this.setData(_),(A=(T=Xe(this,Tu).config).onSuccess)==null||A.call(T,_,this),(N=(O=Xe(this,Tu).config).onSettled)==null||N.call(O,_,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:p,onFail:(_,T)=>{En(this,Cc,Vf).call(this,{type:"failed",failureCount:_,error:T})},onPause:()=>{En(this,Cc,Vf).call(this,{type:"pause"})},onContinue:()=>{En(this,Cc,Vf).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),Xe(this,wa).start()}},a_=new WeakMap,l_=new WeakMap,Tu=new WeakMap,wa=new WeakMap,V1=new WeakMap,Qm=new WeakMap,Cc=new WeakSet,Vf=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...SB(r.data,this.options),fetchMeta:t.meta??null};case"success":return{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return N2(i)&&i.revert&&Xe(this,l_)?{...Xe(this,l_),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),Ds.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),Xe(this,Tu).notify({query:this,type:"updated",action:t})})},q5);function SB(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:xB(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function WW(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Bh,V5,KW=(V5=class extends mx{constructor(t={}){super();cn(this,Bh,void 0);this.config=t,rn(this,Bh,new Map)}build(t,n,r){const i=n.queryKey,o=n.queryHash??tA(i,n);let u=this.get(o);return u||(u=new ZW({cache:this,queryKey:i,queryHash:o,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(i)}),this.add(u)),u}add(t){Xe(this,Bh).has(t.queryHash)||(Xe(this,Bh).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=Xe(this,Bh).get(t.queryHash);n&&(t.destroy(),n===t&&Xe(this,Bh).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Ds.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Xe(this,Bh).get(t)}getAll(){return[...Xe(this,Bh).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>uN(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>uN(t,r)):n}notify(t){Ds.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Ds.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Ds.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Bh=new WeakMap,V5),jh,Ea,eg,$h,rp,G5,XW=(G5=class extends EB{constructor(t){super();cn(this,$h);cn(this,jh,void 0);cn(this,Ea,void 0);cn(this,eg,void 0);this.mutationId=t.mutationId,rn(this,Ea,t.mutationCache),rn(this,jh,[]),this.state=t.state||YW(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Xe(this,jh).includes(t)||(Xe(this,jh).push(t),this.clearGcTimeout(),Xe(this,Ea).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){rn(this,jh,Xe(this,jh).filter(n=>n!==t)),this.scheduleGc(),Xe(this,Ea).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Xe(this,jh).length||(this.state.status==="pending"?this.scheduleGc():Xe(this,Ea).remove(this))}continue(){var t;return((t=Xe(this,eg))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,o,u,l,p,g,x,y,_,T,A,O,N,k,R,z,D,U,q,G;rn(this,eg,wB({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(H,J)=>{En(this,$h,rp).call(this,{type:"failed",failureCount:H,error:J})},onPause:()=>{En(this,$h,rp).call(this,{type:"pause"})},onContinue:()=>{En(this,$h,rp).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Xe(this,Ea).canRun(this)}));const n=this.state.status==="pending",r=!Xe(this,eg).canStart();try{if(!n){En(this,$h,rp).call(this,{type:"pending",variables:t,isPaused:r}),await((o=(i=Xe(this,Ea).config).onMutate)==null?void 0:o.call(i,t,this));const J=await((l=(u=this.options).onMutate)==null?void 0:l.call(u,t));J!==this.state.context&&En(this,$h,rp).call(this,{type:"pending",context:J,variables:t,isPaused:r})}const H=await Xe(this,eg).start();return await((g=(p=Xe(this,Ea).config).onSuccess)==null?void 0:g.call(p,H,t,this.state.context,this)),await((y=(x=this.options).onSuccess)==null?void 0:y.call(x,H,t,this.state.context)),await((T=(_=Xe(this,Ea).config).onSettled)==null?void 0:T.call(_,H,null,this.state.variables,this.state.context,this)),await((O=(A=this.options).onSettled)==null?void 0:O.call(A,H,null,t,this.state.context)),En(this,$h,rp).call(this,{type:"success",data:H}),H}catch(H){try{throw await((k=(N=Xe(this,Ea).config).onError)==null?void 0:k.call(N,H,t,this.state.context,this)),await((z=(R=this.options).onError)==null?void 0:z.call(R,H,t,this.state.context)),await((U=(D=Xe(this,Ea).config).onSettled)==null?void 0:U.call(D,void 0,H,this.state.variables,this.state.context,this)),await((G=(q=this.options).onSettled)==null?void 0:G.call(q,void 0,H,t,this.state.context)),H}finally{En(this,$h,rp).call(this,{type:"error",error:H})}}finally{Xe(this,Ea).runNext(this)}}},jh=new WeakMap,Ea=new WeakMap,eg=new WeakMap,$h=new WeakSet,rp=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Ds.batch(()=>{Xe(this,jh).forEach(r=>{r.onMutationUpdate(t)}),Xe(this,Ea).notify({mutation:this,type:"updated",action:t})})},G5);function YW(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Al,G1,H5,JW=(H5=class extends mx{constructor(t={}){super();cn(this,Al,void 0);cn(this,G1,void 0);this.config=t,rn(this,Al,new Map),rn(this,G1,Date.now())}build(t,n,r){const i=new XW({mutationCache:this,mutationId:++by(this,G1)._,options:t.defaultMutationOptions(n),state:r});return this.add(i),i}add(t){const n=xb(t),r=Xe(this,Al).get(n)??[];r.push(t),Xe(this,Al).set(n,r),this.notify({type:"added",mutation:t})}remove(t){var r;const n=xb(t);if(Xe(this,Al).has(n)){const i=(r=Xe(this,Al).get(n))==null?void 0:r.filter(o=>o!==t);i&&(i.length===0?Xe(this,Al).delete(n):Xe(this,Al).set(n,i))}this.notify({type:"removed",mutation:t})}canRun(t){var r;const n=(r=Xe(this,Al).get(xb(t)))==null?void 0:r.find(i=>i.state.status==="pending");return!n||n===t}runNext(t){var r;const n=(r=Xe(this,Al).get(xb(t)))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){Ds.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...Xe(this,Al).values()].flat()}find(t){const n={exact:!0,...t};return this.getAll().find(r=>cN(n,r))}findAll(t={}){return this.getAll().filter(n=>cN(t,n))}notify(t){Ds.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Ds.batch(()=>Promise.all(t.map(n=>n.continue().catch(Pu))))}},Al=new WeakMap,G1=new WeakMap,H5);function xb(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function QW(e){return{onFetch:(t,n)=>{const r=async()=>{var A,O,N,k,R;const i=t.options,o=(N=(O=(A=t.fetchOptions)==null?void 0:A.meta)==null?void 0:O.fetchMore)==null?void 0:N.direction,u=((k=t.state.data)==null?void 0:k.pages)||[],l=((R=t.state.data)==null?void 0:R.pageParams)||[],p={pages:[],pageParams:[]};let g=!1;const x=z=>{Object.defineProperty(z,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},y=t.options.queryFn&&t.options.queryFn!==nA?t.options.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${t.options.queryHash}'`)),_=async(z,D,U)=>{if(g)return Promise.reject();if(D==null&&z.pages.length)return Promise.resolve(z);const q={queryKey:t.queryKey,pageParam:D,direction:U?"backward":"forward",meta:t.options.meta};x(q);const G=await y(q),{maxPages:H}=t.options,J=U?UW:$W;return{pages:J(z.pages,G,H),pageParams:J(z.pageParams,D,H)}};let T;if(o&&u.length){const z=o==="backward",D=z?eK:dN,U={pages:u,pageParams:l},q=D(i,U);T=await _(U,q,z)}else{T=await _(p,l[0]??i.initialPageParam);const z=e??u.length;for(let D=1;D<z;D++){const U=dN(i,T);T=await _(T,U)}}return T};t.options.persister?t.fetchFn=()=>{var i,o;return(o=(i=t.options).persister)==null?void 0:o.call(i,r,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=r}}}function dN(e,{pages:t,pageParams:n}){const r=t.length-1;return e.getNextPageParam(t[r],t,n[r],n)}function eK(e,{pages:t,pageParams:n}){var r;return(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n)}var ro,dp,pp,u_,c_,mp,h_,f_,Z5,tK=(Z5=class{constructor(e={}){cn(this,ro,void 0);cn(this,dp,void 0);cn(this,pp,void 0);cn(this,u_,void 0);cn(this,c_,void 0);cn(this,mp,void 0);cn(this,h_,void 0);cn(this,f_,void 0);rn(this,ro,e.queryCache||new KW),rn(this,dp,e.mutationCache||new JW),rn(this,pp,e.defaultOptions||{}),rn(this,u_,new Map),rn(this,c_,new Map),rn(this,mp,0)}mount(){by(this,mp)._++,Xe(this,mp)===1&&(rn(this,h_,rA.subscribe(async e=>{e&&(await this.resumePausedMutations(),Xe(this,ro).onFocus())})),rn(this,f_,tE.subscribe(async e=>{e&&(await this.resumePausedMutations(),Xe(this,ro).onOnline())})))}unmount(){var e,t;by(this,mp)._--,Xe(this,mp)===0&&((e=Xe(this,h_))==null||e.call(this),rn(this,h_,void 0),(t=Xe(this,f_))==null||t.call(this),rn(this,f_,void 0))}isFetching(e){return Xe(this,ro).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Xe(this,dp).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=Xe(this,ro).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),r=Xe(this,ro).build(this,n);return e.revalidateIfStale&&r.isStaleByTime(n.staleTime)&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return Xe(this,ro).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),i=Xe(this,ro).get(r.queryHash),o=i==null?void 0:i.state.data,u=BW(t,o);if(u!==void 0)return Xe(this,ro).build(this,r).setData(u,{...n,manual:!0})}setQueriesData(e,t,n){return Ds.batch(()=>Xe(this,ro).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=Xe(this,ro).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=Xe(this,ro);Ds.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=Xe(this,ro),r={type:"active",...e};return Ds.batch(()=>(n.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries(r,t)))}cancelQueries(e={},t={}){const n={revert:!0,...t},r=Ds.batch(()=>Xe(this,ro).findAll(e).map(i=>i.cancel(n)));return Promise.all(r).then(Pu).catch(Pu)}invalidateQueries(e={},t={}){return Ds.batch(()=>{if(Xe(this,ro).findAll(e).forEach(r=>{r.invalidate()}),e.refetchType==="none")return Promise.resolve();const n={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){const n={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},r=Ds.batch(()=>Xe(this,ro).findAll(e).filter(i=>!i.isDisabled()).map(i=>{let o=i.fetch(void 0,n);return n.throwOnError||(o=o.catch(Pu)),i.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(Pu)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=Xe(this,ro).build(this,t);return n.isStaleByTime(t.staleTime)?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Pu).catch(Pu)}fetchInfiniteQuery(e){return e.behavior=QW(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Pu).catch(Pu)}resumePausedMutations(){return tE.isOnline()?Xe(this,dp).resumePausedMutations():Promise.resolve()}getQueryCache(){return Xe(this,ro)}getMutationCache(){return Xe(this,dp)}getDefaultOptions(){return Xe(this,pp)}setDefaultOptions(e){rn(this,pp,e)}setQueryDefaults(e,t){Xe(this,u_).set(b1(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Xe(this,u_).values()];let n={};return t.forEach(r=>{w1(e,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(e,t){Xe(this,c_).set(b1(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Xe(this,c_).values()];let n={};return t.forEach(r=>{w1(e,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Xe(this,pp).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=tA(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===nA&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Xe(this,pp).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Xe(this,ro).clear(),Xe(this,dp).clear()}},ro=new WeakMap,dp=new WeakMap,pp=new WeakMap,u_=new WeakMap,c_=new WeakMap,mp=new WeakMap,h_=new WeakMap,f_=new WeakMap,Z5),Ja,mi,H1,Sa,tg,d_,Uh,Z1,p_,m_,ng,rg,gp,g_,ig,w0,W1,SI,K1,TI,X1,CI,Y1,II,J1,PI,Q1,LI,ex,AI,TE,TB,W5,nK=(W5=class extends mx{constructor(t,n){super();cn(this,ig);cn(this,W1);cn(this,K1);cn(this,X1);cn(this,Y1);cn(this,J1);cn(this,Q1);cn(this,ex);cn(this,TE);cn(this,Ja,void 0);cn(this,mi,void 0);cn(this,H1,void 0);cn(this,Sa,void 0);cn(this,tg,void 0);cn(this,d_,void 0);cn(this,Uh,void 0);cn(this,Z1,void 0);cn(this,p_,void 0);cn(this,m_,void 0);cn(this,ng,void 0);cn(this,rg,void 0);cn(this,gp,void 0);cn(this,g_,new Set);this.options=n,rn(this,Ja,t),rn(this,Uh,null),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Xe(this,mi).addObserver(this),pN(Xe(this,mi),this.options)?En(this,ig,w0).call(this):this.updateResult(),En(this,Y1,II).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return OI(Xe(this,mi),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return OI(Xe(this,mi),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,En(this,J1,PI).call(this),En(this,Q1,LI).call(this),Xe(this,mi).removeObserver(this)}setOptions(t,n){const r=this.options,i=Xe(this,mi);if(this.options=Xe(this,Ja).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");En(this,ex,AI).call(this),Xe(this,mi).setOptions(this.options),r._defaulted&&!bI(this.options,r)&&Xe(this,Ja).getQueryCache().notify({type:"observerOptionsUpdated",query:Xe(this,mi),observer:this});const o=this.hasListeners();o&&mN(Xe(this,mi),i,this.options,r)&&En(this,ig,w0).call(this),this.updateResult(n),o&&(Xe(this,mi)!==i||this.options.enabled!==r.enabled||this.options.staleTime!==r.staleTime)&&En(this,W1,SI).call(this);const u=En(this,K1,TI).call(this);o&&(Xe(this,mi)!==i||this.options.enabled!==r.enabled||u!==Xe(this,gp))&&En(this,X1,CI).call(this,u)}getOptimisticResult(t){const n=Xe(this,Ja).getQueryCache().build(Xe(this,Ja),t),r=this.createResult(n,t);return iK(this,r)&&(rn(this,Sa,r),rn(this,d_,this.options),rn(this,tg,Xe(this,mi).state)),r}getCurrentResult(){return Xe(this,Sa)}trackResult(t,n){const r={};return Object.keys(t).forEach(i=>{Object.defineProperty(r,i,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(i),n==null||n(i),t[i])})}),r}trackProp(t){Xe(this,g_).add(t)}getCurrentQuery(){return Xe(this,mi)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=Xe(this,Ja).defaultQueryOptions(t),r=Xe(this,Ja).getQueryCache().build(Xe(this,Ja),n);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,n))}fetch(t){return En(this,ig,w0).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),Xe(this,Sa)))}createResult(t,n){var G;const r=Xe(this,mi),i=this.options,o=Xe(this,Sa),u=Xe(this,tg),l=Xe(this,d_),g=t!==r?t.state:Xe(this,H1),{state:x}=t;let y={...x},_=!1,T;if(n._optimisticResults){const H=this.hasListeners(),J=!H&&pN(t,n),Y=H&&mN(t,r,n,i);(J||Y)&&(y={...y,...SB(x.data,t.options)}),n._optimisticResults==="isRestoring"&&(y.fetchStatus="idle")}let{error:A,errorUpdatedAt:O,status:N}=y;if(n.select&&y.data!==void 0)if(o&&y.data===(u==null?void 0:u.data)&&n.select===Xe(this,Z1))T=Xe(this,p_);else try{rn(this,Z1,n.select),T=n.select(y.data),T=EI(o==null?void 0:o.data,T,n),rn(this,p_,T),rn(this,Uh,null)}catch(H){rn(this,Uh,H)}else T=y.data;if(n.placeholderData!==void 0&&T===void 0&&N==="pending"){let H;if(o!=null&&o.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData))H=o.data;else if(H=typeof n.placeholderData=="function"?n.placeholderData((G=Xe(this,m_))==null?void 0:G.state.data,Xe(this,m_)):n.placeholderData,n.select&&H!==void 0)try{H=n.select(H),rn(this,Uh,null)}catch(J){rn(this,Uh,J)}H!==void 0&&(N="success",T=EI(o==null?void 0:o.data,H,n),_=!0)}Xe(this,Uh)&&(A=Xe(this,Uh),T=Xe(this,p_),O=Date.now(),N="error");const k=y.fetchStatus==="fetching",R=N==="pending",z=N==="error",D=R&&k,U=T!==void 0;return{status:N,fetchStatus:y.fetchStatus,isPending:R,isSuccess:N==="success",isError:z,isInitialLoading:D,isLoading:D,data:T,dataUpdatedAt:y.dataUpdatedAt,error:A,errorUpdatedAt:O,failureCount:y.fetchFailureCount,failureReason:y.fetchFailureReason,errorUpdateCount:y.errorUpdateCount,isFetched:y.dataUpdateCount>0||y.errorUpdateCount>0,isFetchedAfterMount:y.dataUpdateCount>g.dataUpdateCount||y.errorUpdateCount>g.errorUpdateCount,isFetching:k,isRefetching:k&&!R,isLoadingError:z&&!U,isPaused:y.fetchStatus==="paused",isPlaceholderData:_,isRefetchError:z&&U,isStale:iA(t,n),refetch:this.refetch}}updateResult(t){const n=Xe(this,Sa),r=this.createResult(Xe(this,mi),this.options);if(rn(this,tg,Xe(this,mi).state),rn(this,d_,this.options),Xe(this,tg).data!==void 0&&rn(this,m_,Xe(this,mi)),bI(r,n))return;rn(this,Sa,r);const i={},o=()=>{if(!n)return!0;const{notifyOnChangeProps:u}=this.options,l=typeof u=="function"?u():u;if(l==="all"||!l&&!Xe(this,g_).size)return!0;const p=new Set(l??Xe(this,g_));return this.options.throwOnError&&p.add("error"),Object.keys(Xe(this,Sa)).some(g=>{const x=g;return Xe(this,Sa)[x]!==n[x]&&p.has(x)})};(t==null?void 0:t.listeners)!==!1&&o()&&(i.listeners=!0),En(this,TE,TB).call(this,{...i,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&En(this,Y1,II).call(this)}},Ja=new WeakMap,mi=new WeakMap,H1=new WeakMap,Sa=new WeakMap,tg=new WeakMap,d_=new WeakMap,Uh=new WeakMap,Z1=new WeakMap,p_=new WeakMap,m_=new WeakMap,ng=new WeakMap,rg=new WeakMap,gp=new WeakMap,g_=new WeakMap,ig=new WeakSet,w0=function(t){En(this,ex,AI).call(this);let n=Xe(this,mi).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(Pu)),n},W1=new WeakSet,SI=function(){if(En(this,J1,PI).call(this),P_||Xe(this,Sa).isStale||!xI(this.options.staleTime))return;const n=_B(Xe(this,Sa).dataUpdatedAt,this.options.staleTime)+1;rn(this,ng,setTimeout(()=>{Xe(this,Sa).isStale||this.updateResult()},n))},K1=new WeakSet,TI=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Xe(this,mi)):this.options.refetchInterval)??!1},X1=new WeakSet,CI=function(t){En(this,Q1,LI).call(this),rn(this,gp,t),!(P_||this.options.enabled===!1||!xI(Xe(this,gp))||Xe(this,gp)===0)&&rn(this,rg,setInterval(()=>{(this.options.refetchIntervalInBackground||rA.isFocused())&&En(this,ig,w0).call(this)},Xe(this,gp)))},Y1=new WeakSet,II=function(){En(this,W1,SI).call(this),En(this,X1,CI).call(this,En(this,K1,TI).call(this))},J1=new WeakSet,PI=function(){Xe(this,ng)&&(clearTimeout(Xe(this,ng)),rn(this,ng,void 0))},Q1=new WeakSet,LI=function(){Xe(this,rg)&&(clearInterval(Xe(this,rg)),rn(this,rg,void 0))},ex=new WeakSet,AI=function(){const t=Xe(this,Ja).getQueryCache().build(Xe(this,Ja),this.options);if(t===Xe(this,mi))return;const n=Xe(this,mi);rn(this,mi,t),rn(this,H1,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},TE=new WeakSet,TB=function(t){Ds.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(Xe(this,Sa))}),Xe(this,Ja).getQueryCache().notify({query:Xe(this,mi),type:"observerResultsUpdated"})})},W5);function rK(e,t){return t.enabled!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function pN(e,t){return rK(e,t)||e.state.data!==void 0&&OI(e,t,t.refetchOnMount)}function OI(e,t,n){if(t.enabled!==!1){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&iA(e,t)}return!1}function mN(e,t,n,r){return(e!==t||r.enabled===!1)&&(!n.suspense||e.state.status!=="error")&&iA(e,n)}function iA(e,t){return t.enabled!==!1&&e.isStaleByTime(t.staleTime)}function iK(e,t){return!bI(e.getCurrentResult(),t)}var CB=qe.createContext(void 0),nm=e=>{const t=qe.useContext(CB);if(e)return e;if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},oK=({client:e,children:t})=>(qe.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),he.jsx(CB.Provider,{value:e,children:t})),IB=qe.createContext(!1),sK=()=>qe.useContext(IB);IB.Provider;function aK(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var lK=qe.createContext(aK()),uK=()=>qe.useContext(lK);function cK(e,t){return typeof e=="function"?e(...t):!!e}var hK=(e,t)=>{(e.suspense||e.throwOnError)&&(t.isReset()||(e.retryOnMount=!1))},fK=e=>{qe.useEffect(()=>{e.clearReset()},[e])},dK=({result:e,errorResetBoundary:t,throwOnError:n,query:r})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&cK(n,[e.error,r]),pK=e=>{e.suspense&&typeof e.staleTime!="number"&&(e.staleTime=1e3)},mK=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,gK=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function yK(e,t,n){const r=nm(n),i=sK(),o=uK(),u=r.defaultQueryOptions(e);u._optimisticResults=i?"isRestoring":"optimistic",pK(u),hK(u,o),fK(o);const[l]=qe.useState(()=>new t(r,u)),p=l.getOptimisticResult(u);if(qe.useSyncExternalStore(qe.useCallback(g=>{const x=i?()=>{}:l.subscribe(Ds.batchCalls(g));return l.updateResult(),x},[l,i]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),qe.useEffect(()=>{l.setOptions(u,{listeners:!1})},[u,l]),mK(u,p))throw gK(u,l,o);if(dK({result:p,errorResetBoundary:o,throwOnError:u.throwOnError,query:r.getQueryCache().get(u.queryHash)}))throw p.error;return u.notifyOnChangeProps?p:l.trackResult(p)}function gx(e,t){return yK(e,nK,t)}const Xh=Object.create(null);Xh.open="0";Xh.close="1";Xh.ping="2";Xh.pong="3";Xh.message="4";Xh.upgrade="5";Xh.noop="6";const uw=Object.create(null);Object.keys(Xh).forEach(e=>{uw[Xh[e]]=e});const kI={type:"error",data:"parser error"},PB=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",LB=typeof ArrayBuffer=="function",AB=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,oA=({type:e,data:t},n,r)=>PB&&t instanceof Blob?n?r(t):gN(t,r):LB&&(t instanceof ArrayBuffer||AB(t))?n?r(t):gN(new Blob([t]),r):r(Xh[e]+(t||"")),gN=(e,t)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];t("b"+(r||""))},n.readAsDataURL(e)};function yN(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let D2;function _K(e,t){if(PB&&e.data instanceof Blob)return e.data.arrayBuffer().then(yN).then(t);if(LB&&(e.data instanceof ArrayBuffer||AB(e.data)))return t(yN(e.data));oA(e,!1,n=>{D2||(D2=new TextEncoder),t(D2.encode(n))})}const _N="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",E0=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<_N.length;e++)E0[_N.charCodeAt(e)]=e;const vK=e=>{let t=e.length*.75,n=e.length,r,i=0,o,u,l,p;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const g=new ArrayBuffer(t),x=new Uint8Array(g);for(r=0;r<n;r+=4)o=E0[e.charCodeAt(r)],u=E0[e.charCodeAt(r+1)],l=E0[e.charCodeAt(r+2)],p=E0[e.charCodeAt(r+3)],x[i++]=o<<2|u>>4,x[i++]=(u&15)<<4|l>>2,x[i++]=(l&3)<<6|p&63;return g},xK=typeof ArrayBuffer=="function",sA=(e,t)=>{if(typeof e!="string")return{type:"message",data:OB(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:bK(e.substring(1),t)}:uw[n]?e.length>1?{type:uw[n],data:e.substring(1)}:{type:uw[n]}:kI},bK=(e,t)=>{if(xK){const n=vK(e);return OB(n,t)}else return{base64:!0,data:e}},OB=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},kB="",wK=(e,t)=>{const n=e.length,r=new Array(n);let i=0;e.forEach((o,u)=>{oA(o,!1,l=>{r[u]=l,++i===n&&t(r.join(kB))})})},EK=(e,t)=>{const n=e.split(kB),r=[];for(let i=0;i<n.length;i++){const o=sA(n[i],t);if(r.push(o),o.type==="error")break}return r};function SK(){return new TransformStream({transform(e,t){_K(e,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const o=new DataView(i.buffer);o.setUint8(0,126),o.setUint16(1,r)}else{i=new Uint8Array(9);const o=new DataView(i.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(r))}e.data&&typeof e.data!="string"&&(i[0]|=128),t.enqueue(i),t.enqueue(n)})}})}let z2;function bb(e){return e.reduce((t,n)=>t+n.length,0)}function wb(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let i=0;i<t;i++)n[i]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function TK(e,t){z2||(z2=new TextDecoder);const n=[];let r=0,i=-1,o=!1;return new TransformStream({transform(u,l){for(n.push(u);;){if(r===0){if(bb(n)<1)break;const p=wb(n,1);o=(p[0]&128)===128,i=p[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(bb(n)<2)break;const p=wb(n,2);i=new DataView(p.buffer,p.byteOffset,p.length).getUint16(0),r=3}else if(r===2){if(bb(n)<8)break;const p=wb(n,8),g=new DataView(p.buffer,p.byteOffset,p.length),x=g.getUint32(0);if(x>Math.pow(2,21)-1){l.enqueue(kI);break}i=x*Math.pow(2,32)+g.getUint32(4),r=3}else{if(bb(n)<i)break;const p=wb(n,i);l.enqueue(sA(o?p:z2.decode(p),t)),r=0}if(i===0||i>e){l.enqueue(kI);break}}}})}const RB=4;function ko(e){if(e)return CK(e)}function CK(e){for(var t in ko.prototype)e[t]=ko.prototype[t];return e}ko.prototype.on=ko.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};ko.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};ko.prototype.off=ko.prototype.removeListener=ko.prototype.removeAllListeners=ko.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===t||r.fn===t){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+e],this};ko.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,t)}return this};ko.prototype.emitReserved=ko.prototype.emit;ko.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};ko.prototype.hasListeners=function(e){return!!this.listeners(e).length};const ku=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function MB(e,...t){return t.reduce((n,r)=>(e.hasOwnProperty(r)&&(n[r]=e[r]),n),{})}const IK=ku.setTimeout,PK=ku.clearTimeout;function sS(e,t){t.useNativeTimers?(e.setTimeoutFn=IK.bind(ku),e.clearTimeoutFn=PK.bind(ku)):(e.setTimeoutFn=ku.setTimeout.bind(ku),e.clearTimeoutFn=ku.clearTimeout.bind(ku))}const LK=1.33;function AK(e){return typeof e=="string"?OK(e):Math.ceil((e.byteLength||e.size)*LK)}function OK(e){let t=0,n=0;for(let r=0,i=e.length;r<i;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}function kK(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function RK(e){let t={},n=e.split("&");for(let r=0,i=n.length;r<i;r++){let o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}class MK extends Error{constructor(t,n,r){super(t),this.description=n,this.context=r,this.type="TransportError"}}class aA extends ko{constructor(t){super(),this.writable=!1,sS(this,t),this.opts=t,this.query=t.query,this.socket=t.socket}onError(t,n,r){return super.emitReserved("error",new MK(t,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=sA(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=kK(t);return n.length?"?"+n:""}}const NB="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),RI=64,NK={};let vN=0,Eb=0,xN;function bN(e){let t="";do t=NB[e%RI]+t,e=Math.floor(e/RI);while(e>0);return t}function DB(){const e=bN(+new Date);return e!==xN?(vN=0,xN=e):e+"."+bN(vN++)}for(;Eb<RI;Eb++)NK[NB[Eb]]=Eb;let zB=!1;try{zB=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const DK=zB;function FB(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||DK))return new XMLHttpRequest}catch{}if(!t)try{return new ku[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function zK(){}const FK=function(){return new FB({xdomain:!1}).responseType!=null}();class BK extends aA{constructor(t){if(super(t),this.polling=!1,typeof location<"u"){const r=location.protocol==="https:";let i=location.port;i||(i=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||i!==t.port}const n=t&&t.forceBase64;this.supportsBinary=FK&&!n,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let r=0;this.polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};EK(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,wK(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=DB()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}request(t={}){return Object.assign(t,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new Jy(this.uri(),t)}doWrite(t,n){const r=this.request({method:"POST",data:t});r.on("success",n),r.on("error",(i,o)=>{this.onError("xhr post error",i,o)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=t}}let Jy=class cw extends ko{constructor(t,n){super(),sS(this,n),this.opts=n,this.method=n.method||"GET",this.uri=t,this.data=n.data!==void 0?n.data:null,this.create()}create(){var t;const n=MB(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this.opts.xd;const r=this.xhr=new FB(n);try{r.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this.opts.extraHeaders[i])}}catch{}if(this.method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(t=this.opts.cookieJar)===null||t===void 0||t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this.opts.cookieJar)===null||i===void 0||i.parseCookies(r)),r.readyState===4&&(r.status===200||r.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof r.status=="number"?r.status:0)},0))},r.send(this.data)}catch(i){this.setTimeoutFn(()=>{this.onError(i)},0);return}typeof document<"u"&&(this.index=cw.requestsCount++,cw.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=zK,t)try{this.xhr.abort()}catch{}typeof document<"u"&&delete cw.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}};Jy.requestsCount=0;Jy.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",wN);else if(typeof addEventListener=="function"){const e="onpagehide"in ku?"pagehide":"unload";addEventListener(e,wN,!1)}}function wN(){for(let e in Jy.requests)Jy.requests.hasOwnProperty(e)&&Jy.requests[e].abort()}const lA=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),Sb=ku.WebSocket||ku.MozWebSocket,EN=!0,jK="arraybuffer",SN=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class $K extends aA{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),n=this.opts.protocols,r=SN?{}:MB(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=EN&&!SN?n?new Sb(t,n):new Sb(t):new Sb(t,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],i=n===t.length-1;oA(r,this.supportsBinary,o=>{const u={};try{EN&&this.ws.send(o)}catch{}i&&lA(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=DB()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}check(){return!!Sb}}class UK extends aA{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(t=>{const n=TK(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=t.readable.pipeThrough(n).getReader(),i=SK();i.readable.pipeTo(t.writable),this.writer=i.writable.getWriter();const o=()=>{r.read().then(({done:l,value:p})=>{l||(this.onPacket(p),o())}).catch(l=>{})};o();const u={type:"open"};this.query.sid&&(u.data=`{"sid":"${this.query.sid}"}`),this.writer.write(u).then(()=>this.onOpen())})}))}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],i=n===t.length-1;this.writer.write(r).then(()=>{i&&lA(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this.transport)===null||t===void 0||t.close()}}const qK={websocket:$K,webtransport:UK,polling:BK},VK=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,GK=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function MI(e){if(e.length>2e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]");n!=-1&&r!=-1&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let i=VK.exec(e||""),o={},u=14;for(;u--;)o[GK[u]]=i[u]||"";return n!=-1&&r!=-1&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=HK(o,o.path),o.queryKey=ZK(o,o.query),o}function HK(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function ZK(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,o){i&&(n[i]=o)}),n}let BB=class Cy extends ko{constructor(t,n={}){super(),this.binaryType=jK,this.writeBuffer=[],t&&typeof t=="object"&&(n=t,t=null),t?(t=MI(t),n.hostname=t.host,n.secure=t.protocol==="https"||t.protocol==="wss",n.port=t.port,t.query&&(n.query=t.query)):n.host&&(n.hostname=MI(n.host).host),sS(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=n.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=RK(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=RB,n.transport=t,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new qK[t](r)}open(){let t;if(this.opts.rememberUpgrade&&Cy.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)t="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else t=this.transports[0];this.readyState="opening";try{t=this.createTransport(t)}catch{this.transports.shift(),this.open();return}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",n=>this.onClose("transport close",n))}probe(t){let n=this.createTransport(t),r=!1;Cy.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",y=>{if(!r)if(y.type==="pong"&&y.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Cy.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(x(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const _=new Error("probe error");_.transport=n.name,this.emitReserved("upgradeError",_)}}))};function o(){r||(r=!0,x(),n.close(),n=null)}const u=y=>{const _=new Error("probe error: "+y);_.transport=n.name,o(),this.emitReserved("upgradeError",_)};function l(){u("transport closed")}function p(){u("socket closed")}function g(y){n&&y.name!==n.name&&o()}const x=()=>{n.removeListener("open",i),n.removeListener("error",u),n.removeListener("close",l),this.off("close",p),this.off("upgrading",g)};n.once("open",i),n.once("error",u),n.once("close",l),this.once("close",p),this.once("upgrading",g),this.upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onOpen(){if(this.readyState="open",Cy.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let t=0;const n=this.upgrades.length;for(;t<n;t++)this.probe(this.upgrades[t])}}onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),this.resetPingTimeout(),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const n=new Error("server error");n.code=t.data,this.onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=AK(i)),r>0&&n>this.maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}write(t,n,r){return this.sendPacket("message",t,n,r),this}send(t,n,r){return this.sendPacket("message",t,n,r),this}sendPacket(t,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const o={type:t,data:n,options:r};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this.onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}onError(t){Cy.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,n){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const n=[];let r=0;const i=t.length;for(;r<i;r++)~this.transports.indexOf(t[r])&&n.push(t[r]);return n}};BB.protocol=RB;function WK(e,t="",n){let r=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),r=MI(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const o=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+o+":"+r.port+t,r.href=r.protocol+"://"+o+(n&&n.port===r.port?"":":"+r.port),r}const KK=typeof ArrayBuffer=="function",XK=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,jB=Object.prototype.toString,YK=typeof Blob=="function"||typeof Blob<"u"&&jB.call(Blob)==="[object BlobConstructor]",JK=typeof File=="function"||typeof File<"u"&&jB.call(File)==="[object FileConstructor]";function uA(e){return KK&&(e instanceof ArrayBuffer||XK(e))||YK&&e instanceof Blob||JK&&e instanceof File}function hw(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,r=e.length;n<r;n++)if(hw(e[n]))return!0;return!1}if(uA(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return hw(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&hw(e[n]))return!0;return!1}function QK(e){const t=[],n=e.data,r=e;return r.data=NI(n,t),r.attachments=t.length,{packet:r,buffers:t}}function NI(e,t){if(!e)return e;if(uA(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=NI(e[r],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=NI(e[r],t));return n}return e}function eX(e,t){return e.data=DI(e.data,t),delete e.attachments,e}function DI(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=DI(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=DI(e[n],t));return e}const tX=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],nX=5;var xr;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(xr||(xr={}));class rX{constructor(t){this.replacer=t}encode(t){return(t.type===xr.EVENT||t.type===xr.ACK)&&hw(t)?this.encodeAsBinary({type:t.type===xr.EVENT?xr.BINARY_EVENT:xr.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===xr.BINARY_EVENT||t.type===xr.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=QK(t),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}function TN(e){return Object.prototype.toString.call(e)==="[object Object]"}class cA extends ko{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const r=n.type===xr.BINARY_EVENT;r||n.type===xr.BINARY_ACK?(n.type=r?xr.EVENT:xr.ACK,this.reconstructor=new iX(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(uA(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const r={type:Number(t.charAt(0))};if(xr[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===xr.BINARY_EVENT||r.type===xr.BINARY_ACK){const o=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const u=t.substring(o,n);if(u!=Number(u)||t.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(u)}if(t.charAt(n+1)==="/"){const o=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););r.nsp=t.substring(o,n)}else r.nsp="/";const i=t.charAt(n+1);if(i!==""&&Number(i)==i){const o=n+1;for(;++n;){const u=t.charAt(n);if(u==null||Number(u)!=u){--n;break}if(n===t.length)break}r.id=Number(t.substring(o,n+1))}if(t.charAt(++n)){const o=this.tryParse(t.substr(n));if(cA.isPayloadValid(r.type,o))r.data=o;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case xr.CONNECT:return TN(n);case xr.DISCONNECT:return n===void 0;case xr.CONNECT_ERROR:return typeof n=="string"||TN(n);case xr.EVENT:case xr.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&tX.indexOf(n[0])===-1);case xr.ACK:case xr.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class iX{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=eX(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const oX=Object.freeze(Object.defineProperty({__proto__:null,Decoder:cA,Encoder:rX,get PacketType(){return xr},protocol:nX},Symbol.toStringTag,{value:"Module"}));function Lc(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const sX=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});let $B=class extends ko{constructor(t,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Lc(t,"open",this.onopen.bind(this)),Lc(t,"packet",this.onpacket.bind(this)),Lc(t,"error",this.onerror.bind(this)),Lc(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){if(sX.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const r={type:xr.EVENT,data:n};if(r.options={},r.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const u=this.ids++,l=n.pop();this._registerAckCallback(u,l),r.id=u}const i=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!i||!this.connected)||(this.connected?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(t,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[t]=n;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},i),u=(...l)=>{this.io.clearTimeoutFn(o),n.apply(this,l)};u.withError=!0,this.acks[t]=u}emitWithAck(t,...n){return new Promise((r,i)=>{const o=(u,l)=>u?i(u):r(l);o.withError=!0,n.push(o),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((i,...o)=>r!==this._queue[0]?void 0:(i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...o)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:xr.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(r=>String(r.id)===t)){const r=this.acks[t];delete this.acks[t],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case xr.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case xr.EVENT:case xr.BINARY_EVENT:this.onevent(t);break;case xr.ACK:case xr.BINARY_ACK:this.onack(t);break;case xr.DISCONNECT:this.ondisconnect();break;case xr.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:xr.ACK,id:t,data:i}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:xr.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,t.data)}}};function ov(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}ov.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+n:e-n}return Math.min(e,this.max)|0};ov.prototype.reset=function(){this.attempts=0};ov.prototype.setMin=function(e){this.ms=e};ov.prototype.setMax=function(e){this.max=e};ov.prototype.setJitter=function(e){this.jitter=e};class zI extends ko{constructor(t,n){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,sS(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new ov({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const i=n.parser||oX;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new BB(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=Lc(n,"open",function(){r.onopen(),t&&t()}),o=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},u=Lc(n,"error",o);if(this._timeout!==!1){const l=this._timeout,p=this.setTimeoutFn(()=>{i(),o(new Error("timeout")),n.close()},l);this.opts.autoUnref&&p.unref(),this.subs.push(()=>{this.clearTimeoutFn(p)})}return this.subs.push(i),this.subs.push(u),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Lc(t,"ping",this.onping.bind(this)),Lc(t,"data",this.ondata.bind(this)),Lc(t,"error",this.onerror.bind(this)),Lc(t,"close",this.onclose.bind(this)),Lc(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){lA(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new $B(this,t,n),this.nsps[t]=r),r}_destroy(t){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let r=0;r<n.length;r++)this.engine.write(n[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,n){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(i=>{i?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",i)):t.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const u0={};function fw(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=WK(e,t.path||"/socket.io"),r=n.source,i=n.id,o=n.path,u=u0[i]&&o in u0[i].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||u;let p;return l?p=new zI(r,t):(u0[i]||(u0[i]=new zI(r,t)),p=u0[i]),n.query&&!t.query&&(t.query=n.queryKey),p.socket(n.path,t)}Object.assign(fw,{Manager:zI,Socket:$B,io:fw,connect:fw});const aS=qe.createContext();function aX({children:e}){const{userAuth:t}=qe.useContext(eu),[n,r]=qe.useState(),i=fw("https://magic-estate-server.onrender.com");return qe.useEffect(()=>{const o=function(){i.emit("user-disconnect",t==null?void 0:t._id),i.disconnect()};return i.on("connect",()=>{r(i),i.emit("user-connected",{socketId:i.id,userId:t._id})}),window.addEventListener("beforeunload",o),()=>{console.log("User Disconnected"),o(),window.removeEventListener("beforeunload",o)}},[]),he.jsx(aS.Provider,{value:n,children:e})}function lX(){const e=qe.useContext(aS),t=nm(),[n,r]=qe.useState(navigator.onLine),i=qL();return qe.useEffect(()=>{const o=()=>{r(!1)};window.addEventListener("offline",o);const u=()=>{r(!0)};return window.addEventListener("online",u),()=>{removeEventListener("offline",o),removeEventListener("online",u)}},[]),qe.useEffect(()=>(e==null||e.on("receive-notification",o=>{t.getQueryData(["chats"])&&t.setQueryData(["chats"],u=>u.map(l=>(l==null?void 0:l._id)===(o==null?void 0:o.chatId)?{...l,lastMessage:o==null?void 0:o.message.content,messages:[...l.messages,o==null?void 0:o.message]}:l)),t.getQueryData(["chat",o.chatId])&&t.setQueryData(["chat",o.chatId],u=>({...u,messages:[...u.messages,o.message]})),i(lZ(1))}),function(){e==null||e.off("receive-notification")}),[e]),he.jsxs(he.Fragment,{children:[!n&&he.jsx("div",{className:"network",children:"Network connection failed it happens if you are not connected to a internet connection"}),he.jsxs("div",{className:"layout",children:[he.jsx("div",{className:"header",children:he.jsx(FW,{})}),he.jsxs("div",{className:"content",children:[he.jsx(cG,{}),he.jsx(bZ,{})]})]})]})}function F2({children:e}){const{userAuth:t}=qe.useContext(eu);return t?he.jsx(he.Fragment,{children:e}):he.jsx(uG,{to:"/register",state:location.pathname})}function uX(){return he.jsxs("div",{className:"about-container",children:[he.jsx("div",{className:"right-container",children:he.jsxs("div",{className:"wrapper",children:[he.jsx("h2",{children:"About Us"}),he.jsx("p",{children:"Welcome to MagicEstate Realty, your ultimate destination for all things real estate. Whether you're looking to buy your dream home, sell a property, or invest in the booming real estate market, HomeNest Realty is here to guide you every step of the way. Our platform is designed to simplify the real estate experience by providing comprehensive tools and resources to help you make informed decisions with confidence."}),he.jsx("h2",{children:"Our Mission"}),he.jsx("p",{children:"At  MagicEstate Realty, our mission is to revolutionize the real estate industry by leveraging technology, data, and expertise to offer an unparalleled customer experience. We strive to empower buyers, sellers, and investors with the knowledge and support they need to achieve their real estate goals efficiently and effectively."}),he.jsx("h2",{children:"Who We Are"}),he.jsx("p",{children:"HomeNest Realty was founded by a team of seasoned real estate professionals and tech enthusiasts who recognized the need for a more integrated and user-friendly real estate platform. Our team combines decades of experience in the real estate market with cutting-edge technology to deliver a seamless and transparent experience for our users."})]})}),he.jsx("div",{className:"left-container",children:he.jsx("img",{src:"/about-us.png",alt:"about-us"})})]})}async function cX(e,t){const n={method:"GET",url:"https://forward-reverse-geocoding.p.rapidapi.com/v1/reverse",params:{lat:t,lon:e,"accept-language":"en",polygon_threshold:"0.0"},headers:{"X-RapidAPI-Key":"a4482dc2f1msh259b149196cc2f6p15402ajsn703c7e0383c7","X-RapidAPI-Host":"forward-reverse-geocoding.p.rapidapi.com"}};try{const r=await Er.request(n),{address:i,lat:o,lon:u,display_name:l}=r.data;return{city:i==null?void 0:i.city,longitude:u,latitude:o,address:l}}catch(r){return r}}const hA=["buy","rent"],UB=["Apartment","House","Condo","Land"],hX=["Allowed","Not allowed"],fX=["Renter is responsible","Owner is responsible"],dX=["Must deposit 2X of the rent to owner","Must deposit 3X of the rent to owner","Must deposit 4X of the rent to owner","Must deposit 5X of the rent to owner"],pX="https://cdn3.iconfinder.com/data/icons/home-62/48/Sale-Home-Property-Smart-512.png",mX="https://cdn-icons-png.flaticon.com/512/6231/6231224.png",gX=[{name:"username",type:"text",id:"username",labelText:"username",placeholder:"Enter your username"},{name:"email",type:"email",id:"email",labelText:"email",placeholder:"Enter your email"},{name:"password",type:"password",id:"password",labelText:"password",placeholder:"Enter your password"}],yX=[{name:"username",type:"text",id:"username",labelText:"username",placeholder:"Enter your username"},{name:"password",type:"password",id:"password",labelText:"password",placeholder:"Enter your password"}],_X=[{name:"username",type:"text",id:"username",labelText:"username"},{name:"email",type:"email",id:"email",labelText:"email"}],vX=[{name:"title",type:"text",id:"title",labelText:"Title"},{name:"price",type:"number",id:"price",labelText:"Price"},{name:"bedroom",type:"number",id:"bedroom",labelText:"Bedroom Number"},{name:"bathroom",type:"number",id:"bathroom",labelText:"Bathroom Number"},{name:"size",type:"number",id:"size",labelText:"Total Size(sqft)"},{name:"school",type:"number",id:"school",labelText:"School close by"},{name:"bus",type:"number",id:"bus",labelText:"Bus Stop close by"},{name:"restraunt",type:"number",id:"restraunt",labelText:"Restraunt close by"}],xX={title:"",price:null,type:"",property:"",size:null,bedroom:null,bathroom:null,desc:"",images:[]},qB="https://www.its.ac.id/tmesin/wp-content/uploads/sites/22/2022/07/no-image.png";var bX=function(t){return wX(t)&&!EX(t)};function wX(e){return!!e&&typeof e=="object"}function EX(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||CX(e)}var SX=typeof Symbol=="function"&&Symbol.for,TX=SX?Symbol.for("react.element"):60103;function CX(e){return e.$$typeof===TX}function IX(e){return Array.isArray(e)?[]:{}}function nE(e,t){return t.clone!==!1&&t.isMergeableObject(e)?E1(IX(e),e,t):e}function PX(e,t,n){return e.concat(t).map(function(r){return nE(r,n)})}function LX(e,t,n){var r={};return n.isMergeableObject(e)&&Object.keys(e).forEach(function(i){r[i]=nE(e[i],n)}),Object.keys(t).forEach(function(i){!n.isMergeableObject(t[i])||!e[i]?r[i]=nE(t[i],n):r[i]=E1(e[i],t[i],n)}),r}function E1(e,t,n){n=n||{},n.arrayMerge=n.arrayMerge||PX,n.isMergeableObject=n.isMergeableObject||bX;var r=Array.isArray(t),i=Array.isArray(e),o=r===i;return o?r?n.arrayMerge(e,t,n):LX(e,t,n):nE(t,n)}E1.all=function(t,n){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(r,i){return E1(r,i,n)},{})};var FI=E1,VB=typeof global=="object"&&global&&global.Object===Object&&global,AX=typeof self=="object"&&self&&self.Object===Object&&self,sf=VB||AX||Function("return this")(),Bp=sf.Symbol,GB=Object.prototype,OX=GB.hasOwnProperty,kX=GB.toString,c0=Bp?Bp.toStringTag:void 0;function RX(e){var t=OX.call(e,c0),n=e[c0];try{e[c0]=void 0;var r=!0}catch{}var i=kX.call(e);return r&&(t?e[c0]=n:delete e[c0]),i}var MX=Object.prototype,NX=MX.toString;function DX(e){return NX.call(e)}var zX="[object Null]",FX="[object Undefined]",CN=Bp?Bp.toStringTag:void 0;function Fg(e){return e==null?e===void 0?FX:zX:CN&&CN in Object(e)?RX(e):DX(e)}function HB(e,t){return function(n){return e(t(n))}}var fA=HB(Object.getPrototypeOf,Object);function Bg(e){return e!=null&&typeof e=="object"}var BX="[object Object]",jX=Function.prototype,$X=Object.prototype,ZB=jX.toString,UX=$X.hasOwnProperty,qX=ZB.call(Object);function IN(e){if(!Bg(e)||Fg(e)!=BX)return!1;var t=fA(e);if(t===null)return!0;var n=UX.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&ZB.call(n)==qX}function VX(){this.__data__=[],this.size=0}function WB(e,t){return e===t||e!==e&&t!==t}function lS(e,t){for(var n=e.length;n--;)if(WB(e[n][0],t))return n;return-1}var GX=Array.prototype,HX=GX.splice;function ZX(e){var t=this.__data__,n=lS(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():HX.call(t,n,1),--this.size,!0}function WX(e){var t=this.__data__,n=lS(t,e);return n<0?void 0:t[n][1]}function KX(e){return lS(this.__data__,e)>-1}function XX(e,t){var n=this.__data__,r=lS(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function Sd(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Sd.prototype.clear=VX;Sd.prototype.delete=ZX;Sd.prototype.get=WX;Sd.prototype.has=KX;Sd.prototype.set=XX;function YX(){this.__data__=new Sd,this.size=0}function JX(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function QX(e){return this.__data__.get(e)}function eY(e){return this.__data__.has(e)}function yx(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var tY="[object AsyncFunction]",nY="[object Function]",rY="[object GeneratorFunction]",iY="[object Proxy]";function KB(e){if(!yx(e))return!1;var t=Fg(e);return t==nY||t==rY||t==tY||t==iY}var B2=sf["__core-js_shared__"],PN=function(){var e=/[^.]+$/.exec(B2&&B2.keys&&B2.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function oY(e){return!!PN&&PN in e}var sY=Function.prototype,aY=sY.toString;function jg(e){if(e!=null){try{return aY.call(e)}catch{}try{return e+""}catch{}}return""}var lY=/[\\^$.*+?()[\]{}|]/g,uY=/^\[object .+?Constructor\]$/,cY=Function.prototype,hY=Object.prototype,fY=cY.toString,dY=hY.hasOwnProperty,pY=RegExp("^"+fY.call(dY).replace(lY,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function mY(e){if(!yx(e)||oY(e))return!1;var t=KB(e)?pY:uY;return t.test(jg(e))}function gY(e,t){return e==null?void 0:e[t]}function $g(e,t){var n=gY(e,t);return mY(n)?n:void 0}var S1=$g(sf,"Map"),T1=$g(Object,"create");function yY(){this.__data__=T1?T1(null):{},this.size=0}function _Y(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var vY="__lodash_hash_undefined__",xY=Object.prototype,bY=xY.hasOwnProperty;function wY(e){var t=this.__data__;if(T1){var n=t[e];return n===vY?void 0:n}return bY.call(t,e)?t[e]:void 0}var EY=Object.prototype,SY=EY.hasOwnProperty;function TY(e){var t=this.__data__;return T1?t[e]!==void 0:SY.call(t,e)}var CY="__lodash_hash_undefined__";function IY(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=T1&&t===void 0?CY:t,this}function bg(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}bg.prototype.clear=yY;bg.prototype.delete=_Y;bg.prototype.get=wY;bg.prototype.has=TY;bg.prototype.set=IY;function PY(){this.size=0,this.__data__={hash:new bg,map:new(S1||Sd),string:new bg}}function LY(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function uS(e,t){var n=e.__data__;return LY(t)?n[typeof t=="string"?"string":"hash"]:n.map}function AY(e){var t=uS(this,e).delete(e);return this.size-=t?1:0,t}function OY(e){return uS(this,e).get(e)}function kY(e){return uS(this,e).has(e)}function RY(e,t){var n=uS(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function rm(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}rm.prototype.clear=PY;rm.prototype.delete=AY;rm.prototype.get=OY;rm.prototype.has=kY;rm.prototype.set=RY;var MY=200;function NY(e,t){var n=this.__data__;if(n instanceof Sd){var r=n.__data__;if(!S1||r.length<MY-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new rm(r)}return n.set(e,t),this.size=n.size,this}function sv(e){var t=this.__data__=new Sd(e);this.size=t.size}sv.prototype.clear=YX;sv.prototype.delete=JX;sv.prototype.get=QX;sv.prototype.has=eY;sv.prototype.set=NY;function DY(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}var LN=function(){try{var e=$g(Object,"defineProperty");return e({},"",{}),e}catch{}}();function XB(e,t,n){t=="__proto__"&&LN?LN(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var zY=Object.prototype,FY=zY.hasOwnProperty;function YB(e,t,n){var r=e[t];(!(FY.call(e,t)&&WB(r,n))||n===void 0&&!(t in e))&&XB(e,t,n)}function cS(e,t,n,r){var i=!n;n||(n={});for(var o=-1,u=t.length;++o<u;){var l=t[o],p=r?r(n[l],e[l],l,n,e):void 0;p===void 0&&(p=e[l]),i?XB(n,l,p):YB(n,l,p)}return n}function BY(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var jY="[object Arguments]";function AN(e){return Bg(e)&&Fg(e)==jY}var JB=Object.prototype,$Y=JB.hasOwnProperty,UY=JB.propertyIsEnumerable,qY=AN(function(){return arguments}())?AN:function(e){return Bg(e)&&$Y.call(e,"callee")&&!UY.call(e,"callee")},_x=Array.isArray;function VY(){return!1}var QB=typeof zl=="object"&&zl&&!zl.nodeType&&zl,ON=QB&&typeof Fl=="object"&&Fl&&!Fl.nodeType&&Fl,GY=ON&&ON.exports===QB,kN=GY?sf.Buffer:void 0,HY=kN?kN.isBuffer:void 0,e6=HY||VY,ZY=9007199254740991,WY=/^(?:0|[1-9]\d*)$/;function KY(e,t){var n=typeof e;return t=t??ZY,!!t&&(n=="number"||n!="symbol"&&WY.test(e))&&e>-1&&e%1==0&&e<t}var XY=9007199254740991;function t6(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=XY}var YY="[object Arguments]",JY="[object Array]",QY="[object Boolean]",eJ="[object Date]",tJ="[object Error]",nJ="[object Function]",rJ="[object Map]",iJ="[object Number]",oJ="[object Object]",sJ="[object RegExp]",aJ="[object Set]",lJ="[object String]",uJ="[object WeakMap]",cJ="[object ArrayBuffer]",hJ="[object DataView]",fJ="[object Float32Array]",dJ="[object Float64Array]",pJ="[object Int8Array]",mJ="[object Int16Array]",gJ="[object Int32Array]",yJ="[object Uint8Array]",_J="[object Uint8ClampedArray]",vJ="[object Uint16Array]",xJ="[object Uint32Array]",Ti={};Ti[fJ]=Ti[dJ]=Ti[pJ]=Ti[mJ]=Ti[gJ]=Ti[yJ]=Ti[_J]=Ti[vJ]=Ti[xJ]=!0;Ti[YY]=Ti[JY]=Ti[cJ]=Ti[QY]=Ti[hJ]=Ti[eJ]=Ti[tJ]=Ti[nJ]=Ti[rJ]=Ti[iJ]=Ti[oJ]=Ti[sJ]=Ti[aJ]=Ti[lJ]=Ti[uJ]=!1;function bJ(e){return Bg(e)&&t6(e.length)&&!!Ti[Fg(e)]}function dA(e){return function(t){return e(t)}}var n6=typeof zl=="object"&&zl&&!zl.nodeType&&zl,U0=n6&&typeof Fl=="object"&&Fl&&!Fl.nodeType&&Fl,wJ=U0&&U0.exports===n6,j2=wJ&&VB.process,L_=function(){try{var e=U0&&U0.require&&U0.require("util").types;return e||j2&&j2.binding&&j2.binding("util")}catch{}}(),RN=L_&&L_.isTypedArray,EJ=RN?dA(RN):bJ,SJ=Object.prototype,TJ=SJ.hasOwnProperty;function r6(e,t){var n=_x(e),r=!n&&qY(e),i=!n&&!r&&e6(e),o=!n&&!r&&!i&&EJ(e),u=n||r||i||o,l=u?BY(e.length,String):[],p=l.length;for(var g in e)(t||TJ.call(e,g))&&!(u&&(g=="length"||i&&(g=="offset"||g=="parent")||o&&(g=="buffer"||g=="byteLength"||g=="byteOffset")||KY(g,p)))&&l.push(g);return l}var CJ=Object.prototype;function pA(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||CJ;return e===n}var IJ=HB(Object.keys,Object),PJ=Object.prototype,LJ=PJ.hasOwnProperty;function AJ(e){if(!pA(e))return IJ(e);var t=[];for(var n in Object(e))LJ.call(e,n)&&n!="constructor"&&t.push(n);return t}function i6(e){return e!=null&&t6(e.length)&&!KB(e)}function mA(e){return i6(e)?r6(e):AJ(e)}function OJ(e,t){return e&&cS(t,mA(t),e)}function kJ(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var RJ=Object.prototype,MJ=RJ.hasOwnProperty;function NJ(e){if(!yx(e))return kJ(e);var t=pA(e),n=[];for(var r in e)r=="constructor"&&(t||!MJ.call(e,r))||n.push(r);return n}function gA(e){return i6(e)?r6(e,!0):NJ(e)}function DJ(e,t){return e&&cS(t,gA(t),e)}var o6=typeof zl=="object"&&zl&&!zl.nodeType&&zl,MN=o6&&typeof Fl=="object"&&Fl&&!Fl.nodeType&&Fl,zJ=MN&&MN.exports===o6,NN=zJ?sf.Buffer:void 0,DN=NN?NN.allocUnsafe:void 0;function FJ(e,t){if(t)return e.slice();var n=e.length,r=DN?DN(n):new e.constructor(n);return e.copy(r),r}function s6(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}function BJ(e,t){for(var n=-1,r=e==null?0:e.length,i=0,o=[];++n<r;){var u=e[n];t(u,n,e)&&(o[i++]=u)}return o}function a6(){return[]}var jJ=Object.prototype,$J=jJ.propertyIsEnumerable,zN=Object.getOwnPropertySymbols,yA=zN?function(e){return e==null?[]:(e=Object(e),BJ(zN(e),function(t){return $J.call(e,t)}))}:a6;function UJ(e,t){return cS(e,yA(e),t)}function l6(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var qJ=Object.getOwnPropertySymbols,u6=qJ?function(e){for(var t=[];e;)l6(t,yA(e)),e=fA(e);return t}:a6;function VJ(e,t){return cS(e,u6(e),t)}function c6(e,t,n){var r=t(e);return _x(e)?r:l6(r,n(e))}function GJ(e){return c6(e,mA,yA)}function HJ(e){return c6(e,gA,u6)}var BI=$g(sf,"DataView"),jI=$g(sf,"Promise"),$I=$g(sf,"Set"),UI=$g(sf,"WeakMap"),FN="[object Map]",ZJ="[object Object]",BN="[object Promise]",jN="[object Set]",$N="[object WeakMap]",UN="[object DataView]",WJ=jg(BI),KJ=jg(S1),XJ=jg(jI),YJ=jg($I),JJ=jg(UI),jm=Fg;(BI&&jm(new BI(new ArrayBuffer(1)))!=UN||S1&&jm(new S1)!=FN||jI&&jm(jI.resolve())!=BN||$I&&jm(new $I)!=jN||UI&&jm(new UI)!=$N)&&(jm=function(e){var t=Fg(e),n=t==ZJ?e.constructor:void 0,r=n?jg(n):"";if(r)switch(r){case WJ:return UN;case KJ:return FN;case XJ:return BN;case YJ:return jN;case JJ:return $N}return t});const _A=jm;var QJ=Object.prototype,eQ=QJ.hasOwnProperty;function tQ(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&eQ.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var qN=sf.Uint8Array;function vA(e){var t=new e.constructor(e.byteLength);return new qN(t).set(new qN(e)),t}function nQ(e,t){var n=t?vA(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var rQ=/\w*$/;function iQ(e){var t=new e.constructor(e.source,rQ.exec(e));return t.lastIndex=e.lastIndex,t}var VN=Bp?Bp.prototype:void 0,GN=VN?VN.valueOf:void 0;function oQ(e){return GN?Object(GN.call(e)):{}}function sQ(e,t){var n=t?vA(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var aQ="[object Boolean]",lQ="[object Date]",uQ="[object Map]",cQ="[object Number]",hQ="[object RegExp]",fQ="[object Set]",dQ="[object String]",pQ="[object Symbol]",mQ="[object ArrayBuffer]",gQ="[object DataView]",yQ="[object Float32Array]",_Q="[object Float64Array]",vQ="[object Int8Array]",xQ="[object Int16Array]",bQ="[object Int32Array]",wQ="[object Uint8Array]",EQ="[object Uint8ClampedArray]",SQ="[object Uint16Array]",TQ="[object Uint32Array]";function CQ(e,t,n){var r=e.constructor;switch(t){case mQ:return vA(e);case aQ:case lQ:return new r(+e);case gQ:return nQ(e,n);case yQ:case _Q:case vQ:case xQ:case bQ:case wQ:case EQ:case SQ:case TQ:return sQ(e,n);case uQ:return new r;case cQ:case dQ:return new r(e);case hQ:return iQ(e);case fQ:return new r;case pQ:return oQ(e)}}var HN=Object.create,IQ=function(){function e(){}return function(t){if(!yx(t))return{};if(HN)return HN(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function PQ(e){return typeof e.constructor=="function"&&!pA(e)?IQ(fA(e)):{}}var LQ="[object Map]";function AQ(e){return Bg(e)&&_A(e)==LQ}var ZN=L_&&L_.isMap,OQ=ZN?dA(ZN):AQ,kQ="[object Set]";function RQ(e){return Bg(e)&&_A(e)==kQ}var WN=L_&&L_.isSet,MQ=WN?dA(WN):RQ,NQ=1,DQ=2,zQ=4,h6="[object Arguments]",FQ="[object Array]",BQ="[object Boolean]",jQ="[object Date]",$Q="[object Error]",f6="[object Function]",UQ="[object GeneratorFunction]",qQ="[object Map]",VQ="[object Number]",d6="[object Object]",GQ="[object RegExp]",HQ="[object Set]",ZQ="[object String]",WQ="[object Symbol]",KQ="[object WeakMap]",XQ="[object ArrayBuffer]",YQ="[object DataView]",JQ="[object Float32Array]",QQ="[object Float64Array]",eee="[object Int8Array]",tee="[object Int16Array]",nee="[object Int32Array]",ree="[object Uint8Array]",iee="[object Uint8ClampedArray]",oee="[object Uint16Array]",see="[object Uint32Array]",gi={};gi[h6]=gi[FQ]=gi[XQ]=gi[YQ]=gi[BQ]=gi[jQ]=gi[JQ]=gi[QQ]=gi[eee]=gi[tee]=gi[nee]=gi[qQ]=gi[VQ]=gi[d6]=gi[GQ]=gi[HQ]=gi[ZQ]=gi[WQ]=gi[ree]=gi[iee]=gi[oee]=gi[see]=!0;gi[$Q]=gi[f6]=gi[KQ]=!1;function q0(e,t,n,r,i,o){var u,l=t&NQ,p=t&DQ,g=t&zQ;if(n&&(u=i?n(e,r,i,o):n(e)),u!==void 0)return u;if(!yx(e))return e;var x=_x(e);if(x){if(u=tQ(e),!l)return s6(e,u)}else{var y=_A(e),_=y==f6||y==UQ;if(e6(e))return FJ(e,l);if(y==d6||y==h6||_&&!i){if(u=p||_?{}:PQ(e),!l)return p?VJ(e,DJ(u,e)):UJ(e,OJ(u,e))}else{if(!gi[y])return i?e:{};u=CQ(e,y,l)}}o||(o=new sv);var T=o.get(e);if(T)return T;o.set(e,u),MQ(e)?e.forEach(function(N){u.add(q0(N,t,n,N,e,o))}):OQ(e)&&e.forEach(function(N,k){u.set(k,q0(N,t,n,k,e,o))});var A=g?p?HJ:GJ:p?gA:mA,O=x?void 0:A(e);return DY(O||e,function(N,k){O&&(k=N,N=e[k]),YB(u,k,q0(N,t,n,k,e,o))}),u}var aee=1,lee=4;function Tb(e){return q0(e,aee|lee)}var KN=Array.isArray,XN=Object.keys,uee=Object.prototype.hasOwnProperty,cee=typeof Element<"u";function qI(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=KN(e),r=KN(t),i,o,u;if(n&&r){if(o=e.length,o!=t.length)return!1;for(i=o;i--!==0;)if(!qI(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var l=e instanceof Date,p=t instanceof Date;if(l!=p)return!1;if(l&&p)return e.getTime()==t.getTime();var g=e instanceof RegExp,x=t instanceof RegExp;if(g!=x)return!1;if(g&&x)return e.toString()==t.toString();var y=XN(e);if(o=y.length,o!==XN(t).length)return!1;for(i=o;i--!==0;)if(!uee.call(t,y[i]))return!1;if(cee&&e instanceof Element&&t instanceof Element)return e===t;for(i=o;i--!==0;)if(u=y[i],!(u==="_owner"&&e.$$typeof)&&!qI(e[u],t[u]))return!1;return!0}return e!==e&&t!==t}var hee=function(t,n){try{return qI(t,n)}catch(r){if(r.message&&r.message.match(/stack|recursion/i)||r.number===-2146828260)return console.warn("Warning: react-fast-compare does not handle circular references.",r.name,r.message),!1;throw r}};const $m=xd(hee);var fee=4;function YN(e){return q0(e,fee)}function p6(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var dee="[object Symbol]";function xA(e){return typeof e=="symbol"||Bg(e)&&Fg(e)==dee}var pee="Expected a function";function bA(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(pee);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var u=e.apply(this,r);return n.cache=o.set(i,u)||o,u};return n.cache=new(bA.Cache||rm),n}bA.Cache=rm;var mee=500;function gee(e){var t=bA(e,function(r){return n.size===mee&&n.clear(),r}),n=t.cache;return t}var yee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_ee=/\\(\\)?/g,vee=gee(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(yee,function(n,r,i,o){t.push(i?o.replace(_ee,"$1"):r||n)}),t});const xee=vee;var bee=1/0;function wee(e){if(typeof e=="string"||xA(e))return e;var t=e+"";return t=="0"&&1/e==-bee?"-0":t}var Eee=1/0,JN=Bp?Bp.prototype:void 0,QN=JN?JN.toString:void 0;function m6(e){if(typeof e=="string")return e;if(_x(e))return p6(e,m6)+"";if(xA(e))return QN?QN.call(e):"";var t=e+"";return t=="0"&&1/e==-Eee?"-0":t}function See(e){return e==null?"":m6(e)}function g6(e){return _x(e)?p6(e,wee):xA(e)?[e]:s6(xee(See(e)))}var y6={exports:{}},Kr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ps=typeof Symbol=="function"&&Symbol.for,wA=ps?Symbol.for("react.element"):60103,EA=ps?Symbol.for("react.portal"):60106,hS=ps?Symbol.for("react.fragment"):60107,fS=ps?Symbol.for("react.strict_mode"):60108,dS=ps?Symbol.for("react.profiler"):60114,pS=ps?Symbol.for("react.provider"):60109,mS=ps?Symbol.for("react.context"):60110,SA=ps?Symbol.for("react.async_mode"):60111,gS=ps?Symbol.for("react.concurrent_mode"):60111,yS=ps?Symbol.for("react.forward_ref"):60112,_S=ps?Symbol.for("react.suspense"):60113,Tee=ps?Symbol.for("react.suspense_list"):60120,vS=ps?Symbol.for("react.memo"):60115,xS=ps?Symbol.for("react.lazy"):60116,Cee=ps?Symbol.for("react.block"):60121,Iee=ps?Symbol.for("react.fundamental"):60117,Pee=ps?Symbol.for("react.responder"):60118,Lee=ps?Symbol.for("react.scope"):60119;function tu(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case wA:switch(e=e.type,e){case SA:case gS:case hS:case dS:case fS:case _S:return e;default:switch(e=e&&e.$$typeof,e){case mS:case yS:case xS:case vS:case pS:return e;default:return t}}case EA:return t}}}function _6(e){return tu(e)===gS}Kr.AsyncMode=SA;Kr.ConcurrentMode=gS;Kr.ContextConsumer=mS;Kr.ContextProvider=pS;Kr.Element=wA;Kr.ForwardRef=yS;Kr.Fragment=hS;Kr.Lazy=xS;Kr.Memo=vS;Kr.Portal=EA;Kr.Profiler=dS;Kr.StrictMode=fS;Kr.Suspense=_S;Kr.isAsyncMode=function(e){return _6(e)||tu(e)===SA};Kr.isConcurrentMode=_6;Kr.isContextConsumer=function(e){return tu(e)===mS};Kr.isContextProvider=function(e){return tu(e)===pS};Kr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===wA};Kr.isForwardRef=function(e){return tu(e)===yS};Kr.isFragment=function(e){return tu(e)===hS};Kr.isLazy=function(e){return tu(e)===xS};Kr.isMemo=function(e){return tu(e)===vS};Kr.isPortal=function(e){return tu(e)===EA};Kr.isProfiler=function(e){return tu(e)===dS};Kr.isStrictMode=function(e){return tu(e)===fS};Kr.isSuspense=function(e){return tu(e)===_S};Kr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===hS||e===gS||e===dS||e===fS||e===_S||e===Tee||typeof e=="object"&&e!==null&&(e.$$typeof===xS||e.$$typeof===vS||e.$$typeof===pS||e.$$typeof===mS||e.$$typeof===yS||e.$$typeof===Iee||e.$$typeof===Pee||e.$$typeof===Lee||e.$$typeof===Cee)};Kr.typeOf=tu;y6.exports=Kr;var Aee=y6.exports,v6=Aee,Oee={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},kee={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},x6={};x6[v6.ForwardRef]=Oee;x6[v6.Memo]=kee;function Qo(){return Qo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qo.apply(this,arguments)}function b6(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}var bS=qe.createContext(void 0);bS.displayName="FormikContext";bS.Provider;bS.Consumer;function Ree(){var e=qe.useContext(bS);return e}var Ec=function(t){return typeof t=="function"},wS=function(t){return t!==null&&typeof t=="object"},Mee=function(t){return String(Math.floor(Number(t)))===t},$2=function(t){return Object.prototype.toString.call(t)==="[object String]"},U2=function(t){return wS(t)&&Ec(t.then)};function Cl(e,t,n,r){r===void 0&&(r=0);for(var i=g6(t);e&&r<i.length;)e=e[i[r++]];return r!==i.length&&!e||e===void 0?n:e}function lg(e,t,n){for(var r=YN(e),i=r,o=0,u=g6(t);o<u.length-1;o++){var l=u[o],p=Cl(e,u.slice(0,o+1));if(p&&(wS(p)||Array.isArray(p)))i=i[l]=YN(p);else{var g=u[o+1];i=i[l]=Mee(g)&&Number(g)>=0?[]:{}}}return(o===0?e:i)[u[o]]===n?e:(n===void 0?delete i[u[o]]:i[u[o]]=n,o===0&&n===void 0&&delete r[u[o]],r)}function w6(e,t,n,r){n===void 0&&(n=new WeakMap),r===void 0&&(r={});for(var i=0,o=Object.keys(e);i<o.length;i++){var u=o[i],l=e[u];wS(l)?n.get(l)||(n.set(l,!0),r[u]=Array.isArray(l)?[]:{},w6(l,t,n,r[u])):r[u]=t}return r}function Nee(e,t){switch(t.type){case"SET_VALUES":return Qo({},e,{values:t.payload});case"SET_TOUCHED":return Qo({},e,{touched:t.payload});case"SET_ERRORS":return $m(e.errors,t.payload)?e:Qo({},e,{errors:t.payload});case"SET_STATUS":return Qo({},e,{status:t.payload});case"SET_ISSUBMITTING":return Qo({},e,{isSubmitting:t.payload});case"SET_ISVALIDATING":return Qo({},e,{isValidating:t.payload});case"SET_FIELD_VALUE":return Qo({},e,{values:lg(e.values,t.payload.field,t.payload.value)});case"SET_FIELD_TOUCHED":return Qo({},e,{touched:lg(e.touched,t.payload.field,t.payload.value)});case"SET_FIELD_ERROR":return Qo({},e,{errors:lg(e.errors,t.payload.field,t.payload.value)});case"RESET_FORM":return Qo({},e,t.payload);case"SET_FORMIK_STATE":return t.payload(e);case"SUBMIT_ATTEMPT":return Qo({},e,{touched:w6(e.values,!0),isSubmitting:!0,submitCount:e.submitCount+1});case"SUBMIT_FAILURE":return Qo({},e,{isSubmitting:!1});case"SUBMIT_SUCCESS":return Qo({},e,{isSubmitting:!1});default:return e}}var Dm={},Cb={};function E6(e){var t=e.validateOnChange,n=t===void 0?!0:t,r=e.validateOnBlur,i=r===void 0?!0:r,o=e.validateOnMount,u=o===void 0?!1:o,l=e.isInitialValid,p=e.enableReinitialize,g=p===void 0?!1:p,x=e.onSubmit,y=b6(e,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),_=Qo({validateOnChange:n,validateOnBlur:i,validateOnMount:u,onSubmit:x},y),T=qe.useRef(_.initialValues),A=qe.useRef(_.initialErrors||Dm),O=qe.useRef(_.initialTouched||Cb),N=qe.useRef(_.initialStatus),k=qe.useRef(!1),R=qe.useRef({});qe.useEffect(function(){return k.current=!0,function(){k.current=!1}},[]);var z=qe.useState(0),D=z[1],U=qe.useRef({values:Tb(_.initialValues),errors:Tb(_.initialErrors)||Dm,touched:Tb(_.initialTouched)||Cb,status:Tb(_.initialStatus),isSubmitting:!1,isValidating:!1,submitCount:0}),q=U.current,G=qe.useCallback(function(je){var vt=U.current;U.current=Nee(vt,je),vt!==U.current&&D(function(St){return St+1})},[]),H=qe.useCallback(function(je,vt){return new Promise(function(St,Lt){var en=_.validate(je,vt);en==null?St(Dm):U2(en)?en.then(function(wn){St(wn||Dm)},function(wn){Lt(wn)}):St(en)})},[_.validate]),J=qe.useCallback(function(je,vt){var St=_.validationSchema,Lt=Ec(St)?St(vt):St,en=vt&&Lt.validateAt?Lt.validateAt(vt,je):zee(je,Lt);return new Promise(function(wn,gn){en.then(function(){wn(Dm)},function(bt){bt.name==="ValidationError"?wn(Dee(bt)):gn(bt)})})},[_.validationSchema]),Y=qe.useCallback(function(je,vt){return new Promise(function(St){return St(R.current[je].validate(vt))})},[]),X=qe.useCallback(function(je){var vt=Object.keys(R.current).filter(function(Lt){return Ec(R.current[Lt].validate)}),St=vt.length>0?vt.map(function(Lt){return Y(Lt,Cl(je,Lt))}):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(St).then(function(Lt){return Lt.reduce(function(en,wn,gn){return wn==="DO_NOT_DELETE_YOU_WILL_BE_FIRED"||wn&&(en=lg(en,vt[gn],wn)),en},{})})},[Y]),ee=qe.useCallback(function(je){return Promise.all([X(je),_.validationSchema?J(je):{},_.validate?H(je):{}]).then(function(vt){var St=vt[0],Lt=vt[1],en=vt[2],wn=FI.all([St,Lt,en],{arrayMerge:Fee});return wn})},[_.validate,_.validationSchema,X,H,J]),ue=_u(function(je){return je===void 0&&(je=q.values),G({type:"SET_ISVALIDATING",payload:!0}),ee(je).then(function(vt){return k.current&&(G({type:"SET_ISVALIDATING",payload:!1}),G({type:"SET_ERRORS",payload:vt})),vt})});qe.useEffect(function(){u&&k.current===!0&&$m(T.current,_.initialValues)&&ue(T.current)},[u,ue]);var oe=qe.useCallback(function(je){var vt=je&&je.values?je.values:T.current,St=je&&je.errors?je.errors:A.current?A.current:_.initialErrors||{},Lt=je&&je.touched?je.touched:O.current?O.current:_.initialTouched||{},en=je&&je.status?je.status:N.current?N.current:_.initialStatus;T.current=vt,A.current=St,O.current=Lt,N.current=en;var wn=function(){G({type:"RESET_FORM",payload:{isSubmitting:!!je&&!!je.isSubmitting,errors:St,touched:Lt,status:en,values:vt,isValidating:!!je&&!!je.isValidating,submitCount:je&&je.submitCount&&typeof je.submitCount=="number"?je.submitCount:0}})};if(_.onReset){var gn=_.onReset(q.values,Ft);U2(gn)?gn.then(wn):wn()}else wn()},[_.initialErrors,_.initialStatus,_.initialTouched,_.onReset]);qe.useEffect(function(){k.current===!0&&!$m(T.current,_.initialValues)&&g&&(T.current=_.initialValues,oe(),u&&ue(T.current))},[g,_.initialValues,oe,u,ue]),qe.useEffect(function(){g&&k.current===!0&&!$m(A.current,_.initialErrors)&&(A.current=_.initialErrors||Dm,G({type:"SET_ERRORS",payload:_.initialErrors||Dm}))},[g,_.initialErrors]),qe.useEffect(function(){g&&k.current===!0&&!$m(O.current,_.initialTouched)&&(O.current=_.initialTouched||Cb,G({type:"SET_TOUCHED",payload:_.initialTouched||Cb}))},[g,_.initialTouched]),qe.useEffect(function(){g&&k.current===!0&&!$m(N.current,_.initialStatus)&&(N.current=_.initialStatus,G({type:"SET_STATUS",payload:_.initialStatus}))},[g,_.initialStatus,_.initialTouched]);var we=_u(function(je){if(R.current[je]&&Ec(R.current[je].validate)){var vt=Cl(q.values,je),St=R.current[je].validate(vt);return U2(St)?(G({type:"SET_ISVALIDATING",payload:!0}),St.then(function(Lt){return Lt}).then(function(Lt){G({type:"SET_FIELD_ERROR",payload:{field:je,value:Lt}}),G({type:"SET_ISVALIDATING",payload:!1})})):(G({type:"SET_FIELD_ERROR",payload:{field:je,value:St}}),Promise.resolve(St))}else if(_.validationSchema)return G({type:"SET_ISVALIDATING",payload:!0}),J(q.values,je).then(function(Lt){return Lt}).then(function(Lt){G({type:"SET_FIELD_ERROR",payload:{field:je,value:Cl(Lt,je)}}),G({type:"SET_ISVALIDATING",payload:!1})});return Promise.resolve()}),Ne=qe.useCallback(function(je,vt){var St=vt.validate;R.current[je]={validate:St}},[]),Be=qe.useCallback(function(je){delete R.current[je]},[]),De=_u(function(je,vt){G({type:"SET_TOUCHED",payload:je});var St=vt===void 0?i:vt;return St?ue(q.values):Promise.resolve()}),Ae=qe.useCallback(function(je){G({type:"SET_ERRORS",payload:je})},[]),ve=_u(function(je,vt){var St=Ec(je)?je(q.values):je;G({type:"SET_VALUES",payload:St});var Lt=vt===void 0?n:vt;return Lt?ue(St):Promise.resolve()}),ce=qe.useCallback(function(je,vt){G({type:"SET_FIELD_ERROR",payload:{field:je,value:vt}})},[]),xe=_u(function(je,vt,St){G({type:"SET_FIELD_VALUE",payload:{field:je,value:vt}});var Lt=St===void 0?n:St;return Lt?ue(lg(q.values,je,vt)):Promise.resolve()}),Ee=qe.useCallback(function(je,vt){var St=vt,Lt=je,en;if(!$2(je)){je.persist&&je.persist();var wn=je.target?je.target:je.currentTarget,gn=wn.type,bt=wn.name,Un=wn.id,yr=wn.value,Vs=wn.checked,Xr=wn.outerHTML,kt=wn.options,_n=wn.multiple;St=vt||bt||Un,Lt=/number|range/.test(gn)?(en=parseFloat(yr),isNaN(en)?"":en):/checkbox/.test(gn)?jee(Cl(q.values,St),Vs,yr):kt&&_n?Bee(kt):yr}St&&xe(St,Lt)},[xe,q.values]),Ge=_u(function(je){if($2(je))return function(vt){return Ee(vt,je)};Ee(je)}),$e=_u(function(je,vt,St){vt===void 0&&(vt=!0),G({type:"SET_FIELD_TOUCHED",payload:{field:je,value:vt}});var Lt=St===void 0?i:St;return Lt?ue(q.values):Promise.resolve()}),be=qe.useCallback(function(je,vt){je.persist&&je.persist();var St=je.target,Lt=St.name,en=St.id,wn=St.outerHTML,gn=vt||Lt||en;$e(gn,!0)},[$e]),He=_u(function(je){if($2(je))return function(vt){return be(vt,je)};be(je)}),it=qe.useCallback(function(je){Ec(je)?G({type:"SET_FORMIK_STATE",payload:je}):G({type:"SET_FORMIK_STATE",payload:function(){return je}})},[]),ct=qe.useCallback(function(je){G({type:"SET_STATUS",payload:je})},[]),xt=qe.useCallback(function(je){G({type:"SET_ISSUBMITTING",payload:je})},[]),Dt=_u(function(){return G({type:"SUBMIT_ATTEMPT"}),ue().then(function(je){var vt=je instanceof Error,St=!vt&&Object.keys(je).length===0;if(St){var Lt;try{if(Lt=Kt(),Lt===void 0)return}catch(en){throw en}return Promise.resolve(Lt).then(function(en){return k.current&&G({type:"SUBMIT_SUCCESS"}),en}).catch(function(en){if(k.current)throw G({type:"SUBMIT_FAILURE"}),en})}else if(k.current&&(G({type:"SUBMIT_FAILURE"}),vt))throw je})}),Qt=_u(function(je){je&&je.preventDefault&&Ec(je.preventDefault)&&je.preventDefault(),je&&je.stopPropagation&&Ec(je.stopPropagation)&&je.stopPropagation(),Dt().catch(function(vt){console.warn("Warning: An unhandled error was caught from submitForm()",vt)})}),Ft={resetForm:oe,validateForm:ue,validateField:we,setErrors:Ae,setFieldError:ce,setFieldTouched:$e,setFieldValue:xe,setStatus:ct,setSubmitting:xt,setTouched:De,setValues:ve,setFormikState:it,submitForm:Dt},Kt=_u(function(){return x(q.values,Ft)}),Gt=_u(function(je){je&&je.preventDefault&&Ec(je.preventDefault)&&je.preventDefault(),je&&je.stopPropagation&&Ec(je.stopPropagation)&&je.stopPropagation(),oe()}),Tr=qe.useCallback(function(je){return{value:Cl(q.values,je),error:Cl(q.errors,je),touched:!!Cl(q.touched,je),initialValue:Cl(T.current,je),initialTouched:!!Cl(O.current,je),initialError:Cl(A.current,je)}},[q.errors,q.touched,q.values]),rt=qe.useCallback(function(je){return{setValue:function(St,Lt){return xe(je,St,Lt)},setTouched:function(St,Lt){return $e(je,St,Lt)},setError:function(St){return ce(je,St)}}},[xe,$e,ce]),lt=qe.useCallback(function(je){var vt=wS(je),St=vt?je.name:je,Lt=Cl(q.values,St),en={name:St,value:Lt,onChange:Ge,onBlur:He};if(vt){var wn=je.type,gn=je.value,bt=je.as,Un=je.multiple;wn==="checkbox"?gn===void 0?en.checked=!!Lt:(en.checked=!!(Array.isArray(Lt)&&~Lt.indexOf(gn)),en.value=gn):wn==="radio"?(en.checked=Lt===gn,en.value=gn):bt==="select"&&Un&&(en.value=en.value||[],en.multiple=!0)}return en},[He,Ge,q.values]),gt=qe.useMemo(function(){return!$m(T.current,q.values)},[T.current,q.values]),_t=qe.useMemo(function(){return typeof l<"u"?gt?q.errors&&Object.keys(q.errors).length===0:l!==!1&&Ec(l)?l(_):l:q.errors&&Object.keys(q.errors).length===0},[l,gt,q.errors,_]),Pt=Qo({},q,{initialValues:T.current,initialErrors:A.current,initialTouched:O.current,initialStatus:N.current,handleBlur:He,handleChange:Ge,handleReset:Gt,handleSubmit:Qt,resetForm:oe,setErrors:Ae,setFormikState:it,setFieldTouched:$e,setFieldValue:xe,setFieldError:ce,setStatus:ct,setSubmitting:xt,setTouched:De,setValues:ve,submitForm:Dt,validateForm:ue,validateField:we,isValid:_t,dirty:gt,unregisterField:Be,registerField:Ne,getFieldProps:lt,getFieldMeta:Tr,getFieldHelpers:rt,validateOnBlur:i,validateOnChange:n,validateOnMount:u});return Pt}function Dee(e){var t={};if(e.inner){if(e.inner.length===0)return lg(t,e.path,e.message);for(var i=e.inner,n=Array.isArray(i),r=0,i=n?i:i[Symbol.iterator]();;){var o;if(n){if(r>=i.length)break;o=i[r++]}else{if(r=i.next(),r.done)break;o=r.value}var u=o;Cl(t,u.path)||(t=lg(t,u.path,u.message))}}return t}function zee(e,t,n,r){n===void 0&&(n=!1);var i=VI(e);return t[n?"validateSync":"validate"](i,{abortEarly:!1,context:r||i})}function VI(e){var t=Array.isArray(e)?[]:{};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=String(n);Array.isArray(e[r])===!0?t[r]=e[r].map(function(i){return Array.isArray(i)===!0||IN(i)?VI(i):i!==""?i:void 0}):IN(e[r])?t[r]=VI(e[r]):t[r]=e[r]!==""?e[r]:void 0}return t}function Fee(e,t,n){var r=e.slice();return t.forEach(function(o,u){if(typeof r[u]>"u"){var l=n.clone!==!1,p=l&&n.isMergeableObject(o);r[u]=p?FI(Array.isArray(o)?[]:{},o,n):o}else n.isMergeableObject(o)?r[u]=FI(e[u],o,n):e.indexOf(o)===-1&&r.push(o)}),r}function Bee(e){return Array.from(e).filter(function(t){return t.selected}).map(function(t){return t.value})}function jee(e,t,n){if(typeof e=="boolean")return!!t;var r=[],i=!1,o=-1;if(Array.isArray(e))r=e,o=e.indexOf(n),i=o>=0;else if(!n||n=="true"||n=="false")return!!t;return t&&n&&!i?r.concat(n):i?r.slice(0,o).concat(r.slice(o+1)):r}var $ee=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?qe.useLayoutEffect:qe.useEffect;function _u(e){var t=qe.useRef(e);return $ee(function(){t.current=e}),qe.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current.apply(void 0,r)},[])}var Uee=qe.forwardRef(function(e,t){var n=e.action,r=b6(e,["action"]),i=n??"#",o=Ree(),u=o.handleReset,l=o.handleSubmit;return qe.createElement("form",Qo({onSubmit:l,ref:t,onReset:u,action:i},r))});Uee.displayName="Form";function Ug(e){this._maxSize=e,this.clear()}Ug.prototype.clear=function(){this._size=0,this._values=Object.create(null)};Ug.prototype.get=function(e){return this._values[e]};Ug.prototype.set=function(e,t){return this._size>=this._maxSize&&this.clear(),e in this._values||this._size++,this._values[e]=t};var qee=/[^.^\]^[]+|(?=\[\]|\.\.)/g,S6=/^\d+$/,Vee=/^\d/,Gee=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,Hee=/^\s*(['"]?)(.*?)(\1)\s*$/,TA=512,eD=new Ug(TA),tD=new Ug(TA),nD=new Ug(TA),ug={Cache:Ug,split:GI,normalizePath:q2,setter:function(e){var t=q2(e);return tD.get(e)||tD.set(e,function(r,i){for(var o=0,u=t.length,l=r;o<u-1;){var p=t[o];if(p==="__proto__"||p==="constructor"||p==="prototype")return r;l=l[t[o++]]}l[t[o]]=i})},getter:function(e,t){var n=q2(e);return nD.get(e)||nD.set(e,function(i){for(var o=0,u=n.length;o<u;)if(i!=null||!t)i=i[n[o++]];else return;return i})},join:function(e){return e.reduce(function(t,n){return t+(CA(n)||S6.test(n)?"["+n+"]":(t?".":"")+n)},"")},forEach:function(e,t,n){Zee(Array.isArray(e)?e:GI(e),t,n)}};function q2(e){return eD.get(e)||eD.set(e,GI(e).map(function(t){return t.replace(Hee,"$2")}))}function GI(e){return e.match(qee)||[""]}function Zee(e,t,n){var r=e.length,i,o,u,l;for(o=0;o<r;o++)i=e[o],i&&(Xee(i)&&(i='"'+i+'"'),l=CA(i),u=!l&&/^\d+$/.test(i),t.call(n,i,l,u,o,e))}function CA(e){return typeof e=="string"&&e&&["'",'"'].indexOf(e.charAt(0))!==-1}function Wee(e){return e.match(Vee)&&!e.match(S6)}function Kee(e){return Gee.test(e)}function Xee(e){return!CA(e)&&(Wee(e)||Kee(e))}const Yee=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['’](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['’](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,ES=e=>e.match(Yee)||[],SS=e=>e[0].toUpperCase()+e.slice(1),IA=(e,t)=>ES(e).join(t).toLowerCase(),T6=e=>ES(e).reduce((t,n)=>`${t}${t?n[0].toUpperCase()+n.slice(1).toLowerCase():n.toLowerCase()}`,""),Jee=e=>SS(T6(e)),Qee=e=>IA(e,"_"),ete=e=>IA(e,"-"),tte=e=>SS(IA(e," ")),nte=e=>ES(e).map(SS).join(" ");var V2={words:ES,upperFirst:SS,camelCase:T6,pascalCase:Jee,snakeCase:Qee,kebabCase:ete,sentenceCase:tte,titleCase:nte},PA={exports:{}};PA.exports=function(e){return C6(rte(e),e)};PA.exports.array=C6;function C6(e,t){var n=e.length,r=new Array(n),i={},o=n,u=ite(t),l=ote(e);for(t.forEach(function(g){if(!l.has(g[0])||!l.has(g[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});o--;)i[o]||p(e[o],o,new Set);return r;function p(g,x,y){if(y.has(g)){var _;try{_=", node was:"+JSON.stringify(g)}catch{_=""}throw new Error("Cyclic dependency"+_)}if(!l.has(g))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(g));if(!i[x]){i[x]=!0;var T=u.get(g)||new Set;if(T=Array.from(T),x=T.length){y.add(g);do{var A=T[--x];p(A,l.get(A),y)}while(x);y.delete(g)}r[--n]=g}}}function rte(e){for(var t=new Set,n=0,r=e.length;n<r;n++){var i=e[n];t.add(i[0]),t.add(i[1])}return Array.from(t)}function ite(e){for(var t=new Map,n=0,r=e.length;n<r;n++){var i=e[n];t.has(i[0])||t.set(i[0],new Set),t.has(i[1])||t.set(i[1],new Set),t.get(i[0]).add(i[1])}return t}function ote(e){for(var t=new Map,n=0,r=e.length;n<r;n++)t.set(e[n],n);return t}var ste=PA.exports;const ate=xd(ste),lte=Object.prototype.toString,ute=Error.prototype.toString,cte=RegExp.prototype.toString,hte=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",fte=/^Symbol\((.*)\)(.*)$/;function dte(e){return e!=+e?"NaN":e===0&&1/e<0?"-0":""+e}function rD(e,t=!1){if(e==null||e===!0||e===!1)return""+e;const n=typeof e;if(n==="number")return dte(e);if(n==="string")return t?`"${e}"`:e;if(n==="function")return"[Function "+(e.name||"anonymous")+"]";if(n==="symbol")return hte.call(e).replace(fte,"Symbol($1)");const r=lte.call(e).slice(8,-1);return r==="Date"?isNaN(e.getTime())?""+e:e.toISOString(e):r==="Error"||e instanceof Error?"["+ute.call(e)+"]":r==="RegExp"?cte.call(e):null}function kp(e,t){let n=rD(e,t);return n!==null?n:JSON.stringify(e,function(r,i){let o=rD(this[r],t);return o!==null?o:i},2)}function I6(e){return e==null?[]:[].concat(e)}let P6,L6,A6,pte=/\$\{\s*(\w+)\s*\}/g;P6=Symbol.toStringTag;class iD{constructor(t,n,r,i){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[P6]="Error",this.name="ValidationError",this.value=n,this.path=r,this.type=i,this.errors=[],this.inner=[],I6(t).forEach(o=>{if(tl.isError(o)){this.errors.push(...o.errors);const u=o.inner.length?o.inner:[o];this.inner.push(...u)}else this.errors.push(o)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0]}}L6=Symbol.hasInstance;A6=Symbol.toStringTag;class tl extends Error{static formatError(t,n){const r=n.label||n.path||"this";return r!==n.path&&(n=Object.assign({},n,{path:r})),typeof t=="string"?t.replace(pte,(i,o)=>kp(n[o])):typeof t=="function"?t(n):t}static isError(t){return t&&t.name==="ValidationError"}constructor(t,n,r,i,o){const u=new iD(t,n,r,i);if(o)return u;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[A6]="Error",this.name=u.name,this.message=u.message,this.type=u.type,this.value=u.value,this.path=u.path,this.errors=u.errors,this.inner=u.inner,Error.captureStackTrace&&Error.captureStackTrace(this,tl)}static[L6](t){return iD[Symbol.hasInstance](t)||super[Symbol.hasInstance](t)}}let Dh={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:e,type:t,value:n,originalValue:r})=>{const i=r!=null&&r!==n?` (cast from the value \`${kp(r,!0)}\`).`:".";return t!=="mixed"?`${e} must be a \`${t}\` type, but the final value was: \`${kp(n,!0)}\``+i:`${e} must match the configured type. The validated value was: \`${kp(n,!0)}\``+i}},Ya={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},ip={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},HI={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},mte={isValue:"${path} field must be ${value}"},ZI={noUnknown:"${path} field has unspecified keys: ${unknown}"},gte={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},yte={notType:e=>{const{path:t,value:n,spec:r}=e,i=r.types.length;if(Array.isArray(n)){if(n.length<i)return`${t} tuple value has too few items, expected a length of ${i} but got ${n.length} for value: \`${kp(n,!0)}\``;if(n.length>i)return`${t} tuple value has too many items, expected a length of ${i} but got ${n.length} for value: \`${kp(n,!0)}\``}return tl.formatError(Dh.notType,e)}};Object.assign(Object.create(null),{mixed:Dh,string:Ya,number:ip,date:HI,object:ZI,array:gte,boolean:mte,tuple:yte});const LA=e=>e&&e.__isYupSchema__;class rE{static fromOptions(t,n){if(!n.then&&!n.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:r,then:i,otherwise:o}=n,u=typeof r=="function"?r:(...l)=>l.every(p=>p===r);return new rE(t,(l,p)=>{var g;let x=u(...l)?i:o;return(g=x==null?void 0:x(p))!=null?g:p})}constructor(t,n){this.fn=void 0,this.refs=t,this.refs=t,this.fn=n}resolve(t,n){let r=this.refs.map(o=>o.getValue(n==null?void 0:n.value,n==null?void 0:n.parent,n==null?void 0:n.context)),i=this.fn(r,t,n);if(i===void 0||i===t)return t;if(!LA(i))throw new TypeError("conditions must return a schema object");return i.resolve(n)}}const Ib={context:"$",value:"."};class qg{constructor(t,n={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,typeof t!="string")throw new TypeError("ref must be a string, got: "+t);if(this.key=t.trim(),t==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===Ib.context,this.isValue=this.key[0]===Ib.value,this.isSibling=!this.isContext&&!this.isValue;let r=this.isContext?Ib.context:this.isValue?Ib.value:"";this.path=this.key.slice(r.length),this.getter=this.path&&ug.getter(this.path,!0),this.map=n.map}getValue(t,n,r){let i=this.isContext?r:this.isValue?t:n;return this.getter&&(i=this.getter(i||{})),this.map&&(i=this.map(i)),i}cast(t,n){return this.getValue(t,n==null?void 0:n.parent,n==null?void 0:n.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(t){return t&&t.__isYupRef}}qg.prototype.__isYupRef=!0;const Xf=e=>e==null;function Ey(e){function t({value:n,path:r="",options:i,originalValue:o,schema:u},l,p){const{name:g,test:x,params:y,message:_,skipAbsent:T}=e;let{parent:A,context:O,abortEarly:N=u.spec.abortEarly,disableStackTrace:k=u.spec.disableStackTrace}=i;function R(X){return qg.isRef(X)?X.getValue(n,A,O):X}function z(X={}){const ee=Object.assign({value:n,originalValue:o,label:u.spec.label,path:X.path||r,spec:u.spec,disableStackTrace:X.disableStackTrace||k},y,X.params);for(const oe of Object.keys(ee))ee[oe]=R(ee[oe]);const ue=new tl(tl.formatError(X.message||_,ee),n,ee.path,X.type||g,ee.disableStackTrace);return ue.params=ee,ue}const D=N?l:p;let U={path:r,parent:A,type:g,from:i.from,createError:z,resolve:R,options:i,originalValue:o,schema:u};const q=X=>{tl.isError(X)?D(X):X?p(null):D(z())},G=X=>{tl.isError(X)?D(X):l(X)};if(T&&Xf(n))return q(!0);let J;try{var Y;if(J=x.call(U,n,U),typeof((Y=J)==null?void 0:Y.then)=="function"){if(i.sync)throw new Error(`Validation test of type: "${U.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve(J).then(q,G)}}catch(X){G(X);return}q(J)}return t.OPTIONS=e,t}function _te(e,t,n,r=n){let i,o,u;return t?(ug.forEach(t,(l,p,g)=>{let x=p?l.slice(1,l.length-1):l;e=e.resolve({context:r,parent:i,value:n});let y=e.type==="tuple",_=g?parseInt(x,10):0;if(e.innerType||y){if(y&&!g)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${u}" must contain an index to the tuple element, e.g. "${u}[0]"`);if(n&&_>=n.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${l}, in the path: ${t}. because there is no value at that index. `);i=n,n=n&&n[_],e=y?e.spec.types[_]:e.innerType}if(!g){if(!e.fields||!e.fields[x])throw new Error(`The schema does not contain the path: ${t}. (failed at: ${u} which is a type: "${e.type}")`);i=n,n=n&&n[x],e=e.fields[x]}o=x,u=p?"["+l+"]":"."+l}),{schema:e,parent:i,parentPath:o}):{parent:i,parentPath:t,schema:e}}class iE extends Set{describe(){const t=[];for(const n of this.values())t.push(qg.isRef(n)?n.describe():n);return t}resolveAll(t){let n=[];for(const r of this.values())n.push(t(r));return n}clone(){return new iE(this.values())}merge(t,n){const r=this.clone();return t.forEach(i=>r.add(i)),n.forEach(i=>r.delete(i)),r}}function Vy(e,t=new Map){if(LA(e)||!e||typeof e!="object")return e;if(t.has(e))return t.get(e);let n;if(e instanceof Date)n=new Date(e.getTime()),t.set(e,n);else if(e instanceof RegExp)n=new RegExp(e),t.set(e,n);else if(Array.isArray(e)){n=new Array(e.length),t.set(e,n);for(let r=0;r<e.length;r++)n[r]=Vy(e[r],t)}else if(e instanceof Map){n=new Map,t.set(e,n);for(const[r,i]of e.entries())n.set(r,Vy(i,t))}else if(e instanceof Set){n=new Set,t.set(e,n);for(const r of e)n.add(Vy(r,t))}else if(e instanceof Object){n={},t.set(e,n);for(const[r,i]of Object.entries(e))n[r]=Vy(i,t)}else throw Error(`Unable to clone ${e}`);return n}class jc{constructor(t){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new iE,this._blacklist=new iE,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(Dh.notType)}),this.type=t.type,this._typeCheck=t.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},t==null?void 0:t.spec),this.withMutation(n=>{n.nonNullable()})}get _type(){return this.type}clone(t){if(this._mutate)return t&&Object.assign(this.spec,t),this;const n=Object.create(Object.getPrototypeOf(this));return n.type=this.type,n._typeCheck=this._typeCheck,n._whitelist=this._whitelist.clone(),n._blacklist=this._blacklist.clone(),n.internalTests=Object.assign({},this.internalTests),n.exclusiveTests=Object.assign({},this.exclusiveTests),n.deps=[...this.deps],n.conditions=[...this.conditions],n.tests=[...this.tests],n.transforms=[...this.transforms],n.spec=Vy(Object.assign({},this.spec,t)),n}label(t){let n=this.clone();return n.spec.label=t,n}meta(...t){if(t.length===0)return this.spec.meta;let n=this.clone();return n.spec.meta=Object.assign(n.spec.meta||{},t[0]),n}withMutation(t){let n=this._mutate;this._mutate=!0;let r=t(this);return this._mutate=n,r}concat(t){if(!t||t===this)return this;if(t.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${t.type}`);let n=this,r=t.clone();const i=Object.assign({},n.spec,r.spec);return r.spec=i,r.internalTests=Object.assign({},n.internalTests,r.internalTests),r._whitelist=n._whitelist.merge(t._whitelist,t._blacklist),r._blacklist=n._blacklist.merge(t._blacklist,t._whitelist),r.tests=n.tests,r.exclusiveTests=n.exclusiveTests,r.withMutation(o=>{t.tests.forEach(u=>{o.test(u.OPTIONS)})}),r.transforms=[...n.transforms,...r.transforms],r}isType(t){return t==null?!!(this.spec.nullable&&t===null||this.spec.optional&&t===void 0):this._typeCheck(t)}resolve(t){let n=this;if(n.conditions.length){let r=n.conditions;n=n.clone(),n.conditions=[],n=r.reduce((i,o)=>o.resolve(i,t),n),n=n.resolve(t)}return n}resolveOptions(t){var n,r,i,o;return Object.assign({},t,{from:t.from||[],strict:(n=t.strict)!=null?n:this.spec.strict,abortEarly:(r=t.abortEarly)!=null?r:this.spec.abortEarly,recursive:(i=t.recursive)!=null?i:this.spec.recursive,disableStackTrace:(o=t.disableStackTrace)!=null?o:this.spec.disableStackTrace})}cast(t,n={}){let r=this.resolve(Object.assign({value:t},n)),i=n.assert==="ignore-optionality",o=r._cast(t,n);if(n.assert!==!1&&!r.isType(o)){if(i&&Xf(o))return o;let u=kp(t),l=kp(o);throw new TypeError(`The value of ${n.path||"field"} could not be cast to a value that satisfies the schema type: "${r.type}". 

attempted value: ${u} 
`+(l!==u?`result of cast: ${l}`:""))}return o}_cast(t,n){let r=t===void 0?t:this.transforms.reduce((i,o)=>o.call(this,i,t,this),t);return r===void 0&&(r=this.getDefault(n)),r}_validate(t,n={},r,i){let{path:o,originalValue:u=t,strict:l=this.spec.strict}=n,p=t;l||(p=this._cast(p,Object.assign({assert:!1},n)));let g=[];for(let x of Object.values(this.internalTests))x&&g.push(x);this.runTests({path:o,value:p,originalValue:u,options:n,tests:g},r,x=>{if(x.length)return i(x,p);this.runTests({path:o,value:p,originalValue:u,options:n,tests:this.tests},r,i)})}runTests(t,n,r){let i=!1,{tests:o,value:u,originalValue:l,path:p,options:g}=t,x=O=>{i||(i=!0,n(O,u))},y=O=>{i||(i=!0,r(O,u))},_=o.length,T=[];if(!_)return y([]);let A={value:u,originalValue:l,path:p,options:g,schema:this};for(let O=0;O<o.length;O++){const N=o[O];N(A,x,function(R){R&&(Array.isArray(R)?T.push(...R):T.push(R)),--_<=0&&y(T)})}}asNestedTest({key:t,index:n,parent:r,parentPath:i,originalParent:o,options:u}){const l=t??n;if(l==null)throw TypeError("Must include `key` or `index` for nested validations");const p=typeof l=="number";let g=r[l];const x=Object.assign({},u,{strict:!0,parent:r,value:g,originalValue:o[l],key:void 0,[p?"index":"key"]:l,path:p||l.includes(".")?`${i||""}[${p?l:`"${l}"`}]`:(i?`${i}.`:"")+t});return(y,_,T)=>this.resolve(x)._validate(g,x,_,T)}validate(t,n){var r;let i=this.resolve(Object.assign({},n,{value:t})),o=(r=n==null?void 0:n.disableStackTrace)!=null?r:i.spec.disableStackTrace;return new Promise((u,l)=>i._validate(t,n,(p,g)=>{tl.isError(p)&&(p.value=g),l(p)},(p,g)=>{p.length?l(new tl(p,g,void 0,void 0,o)):u(g)}))}validateSync(t,n){var r;let i=this.resolve(Object.assign({},n,{value:t})),o,u=(r=n==null?void 0:n.disableStackTrace)!=null?r:i.spec.disableStackTrace;return i._validate(t,Object.assign({},n,{sync:!0}),(l,p)=>{throw tl.isError(l)&&(l.value=p),l},(l,p)=>{if(l.length)throw new tl(l,t,void 0,void 0,u);o=p}),o}isValid(t,n){return this.validate(t,n).then(()=>!0,r=>{if(tl.isError(r))return!1;throw r})}isValidSync(t,n){try{return this.validateSync(t,n),!0}catch(r){if(tl.isError(r))return!1;throw r}}_getDefault(t){let n=this.spec.default;return n==null?n:typeof n=="function"?n.call(this,t):Vy(n)}getDefault(t){return this.resolve(t||{})._getDefault(t)}default(t){return arguments.length===0?this._getDefault():this.clone({default:t})}strict(t=!0){return this.clone({strict:t})}nullability(t,n){const r=this.clone({nullable:t});return r.internalTests.nullable=Ey({message:n,name:"nullable",test(i){return i===null?this.schema.spec.nullable:!0}}),r}optionality(t,n){const r=this.clone({optional:t});return r.internalTests.optionality=Ey({message:n,name:"optionality",test(i){return i===void 0?this.schema.spec.optional:!0}}),r}optional(){return this.optionality(!0)}defined(t=Dh.defined){return this.optionality(!1,t)}nullable(){return this.nullability(!0)}nonNullable(t=Dh.notNull){return this.nullability(!1,t)}required(t=Dh.required){return this.clone().withMutation(n=>n.nonNullable(t).defined(t))}notRequired(){return this.clone().withMutation(t=>t.nullable().optional())}transform(t){let n=this.clone();return n.transforms.push(t),n}test(...t){let n;if(t.length===1?typeof t[0]=="function"?n={test:t[0]}:n=t[0]:t.length===2?n={name:t[0],test:t[1]}:n={name:t[0],message:t[1],test:t[2]},n.message===void 0&&(n.message=Dh.default),typeof n.test!="function")throw new TypeError("`test` is a required parameters");let r=this.clone(),i=Ey(n),o=n.exclusive||n.name&&r.exclusiveTests[n.name]===!0;if(n.exclusive&&!n.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return n.name&&(r.exclusiveTests[n.name]=!!n.exclusive),r.tests=r.tests.filter(u=>!(u.OPTIONS.name===n.name&&(o||u.OPTIONS.test===i.OPTIONS.test))),r.tests.push(i),r}when(t,n){!Array.isArray(t)&&typeof t!="string"&&(n=t,t=".");let r=this.clone(),i=I6(t).map(o=>new qg(o));return i.forEach(o=>{o.isSibling&&r.deps.push(o.key)}),r.conditions.push(typeof n=="function"?new rE(i,n):rE.fromOptions(i,n)),r}typeError(t){let n=this.clone();return n.internalTests.typeError=Ey({message:t,name:"typeError",skipAbsent:!0,test(r){return this.schema._typeCheck(r)?!0:this.createError({params:{type:this.schema.type}})}}),n}oneOf(t,n=Dh.oneOf){let r=this.clone();return t.forEach(i=>{r._whitelist.add(i),r._blacklist.delete(i)}),r.internalTests.whiteList=Ey({message:n,name:"oneOf",skipAbsent:!0,test(i){let o=this.schema._whitelist,u=o.resolveAll(this.resolve);return u.includes(i)?!0:this.createError({params:{values:Array.from(o).join(", "),resolved:u}})}}),r}notOneOf(t,n=Dh.notOneOf){let r=this.clone();return t.forEach(i=>{r._blacklist.add(i),r._whitelist.delete(i)}),r.internalTests.blacklist=Ey({message:n,name:"notOneOf",test(i){let o=this.schema._blacklist,u=o.resolveAll(this.resolve);return u.includes(i)?this.createError({params:{values:Array.from(o).join(", "),resolved:u}}):!0}}),r}strip(t=!0){let n=this.clone();return n.spec.strip=t,n}describe(t){const n=(t?this.resolve(t):this).clone(),{label:r,meta:i,optional:o,nullable:u}=n.spec;return{meta:i,label:r,optional:o,nullable:u,default:n.getDefault(t),type:n.type,oneOf:n._whitelist.describe(),notOneOf:n._blacklist.describe(),tests:n.tests.map(p=>({name:p.OPTIONS.name,params:p.OPTIONS.params})).filter((p,g,x)=>x.findIndex(y=>y.name===p.name)===g)}}}jc.prototype.__isYupSchema__=!0;for(const e of["validate","validateSync"])jc.prototype[`${e}At`]=function(t,n,r={}){const{parent:i,parentPath:o,schema:u}=_te(this,t,n,r.context);return u[e](i&&i[o],Object.assign({},r,{parent:i,path:t}))};for(const e of["equals","is"])jc.prototype[e]=jc.prototype.oneOf;for(const e of["not","nope"])jc.prototype[e]=jc.prototype.notOneOf;const vte=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function xte(e){const t=WI(e);if(!t)return Date.parse?Date.parse(e):Number.NaN;if(t.z===void 0&&t.plusMinus===void 0)return new Date(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond).valueOf();let n=0;return t.z!=="Z"&&t.plusMinus!==void 0&&(n=t.hourOffset*60+t.minuteOffset,t.plusMinus==="+"&&(n=0-n)),Date.UTC(t.year,t.month,t.day,t.hour,t.minute+n,t.second,t.millisecond)}function WI(e){var t,n;const r=vte.exec(e);return r?{year:$f(r[1]),month:$f(r[2],1)-1,day:$f(r[3],1),hour:$f(r[4]),minute:$f(r[5]),second:$f(r[6]),millisecond:r[7]?$f(r[7].substring(0,3)):0,precision:(t=(n=r[7])==null?void 0:n.length)!=null?t:void 0,z:r[8]||void 0,plusMinus:r[9]||void 0,hourOffset:$f(r[10]),minuteOffset:$f(r[11])}:null}function $f(e,t=0){return Number(e)||t}let bte=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,wte=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,Ete=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Ste="^\\d{4}-\\d{2}-\\d{2}",Tte="\\d{2}:\\d{2}:\\d{2}",Cte="(([+-]\\d{2}(:?\\d{2})?)|Z)",Ite=new RegExp(`${Ste}T${Tte}(\\.\\d+)?${Cte}$`),Pte=e=>Xf(e)||e===e.trim(),Lte={}.toString();function Ia(){return new O6}class O6 extends jc{constructor(){super({type:"string",check(t){return t instanceof String&&(t=t.valueOf()),typeof t=="string"}}),this.withMutation(()=>{this.transform((t,n,r)=>{if(!r.spec.coerce||r.isType(t)||Array.isArray(t))return t;const i=t!=null&&t.toString?t.toString():t;return i===Lte?t:i})})}required(t){return super.required(t).withMutation(n=>n.test({message:t||Dh.required,name:"required",skipAbsent:!0,test:r=>!!r.length}))}notRequired(){return super.notRequired().withMutation(t=>(t.tests=t.tests.filter(n=>n.OPTIONS.name!=="required"),t))}length(t,n=Ya.length){return this.test({message:n,name:"length",exclusive:!0,params:{length:t},skipAbsent:!0,test(r){return r.length===this.resolve(t)}})}min(t,n=Ya.min){return this.test({message:n,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(r){return r.length>=this.resolve(t)}})}max(t,n=Ya.max){return this.test({name:"max",exclusive:!0,message:n,params:{max:t},skipAbsent:!0,test(r){return r.length<=this.resolve(t)}})}matches(t,n){let r=!1,i,o;return n&&(typeof n=="object"?{excludeEmptyString:r=!1,message:i,name:o}=n:i=n),this.test({name:o||"matches",message:i||Ya.matches,params:{regex:t},skipAbsent:!0,test:u=>u===""&&r||u.search(t)!==-1})}email(t=Ya.email){return this.matches(bte,{name:"email",message:t,excludeEmptyString:!0})}url(t=Ya.url){return this.matches(wte,{name:"url",message:t,excludeEmptyString:!0})}uuid(t=Ya.uuid){return this.matches(Ete,{name:"uuid",message:t,excludeEmptyString:!1})}datetime(t){let n="",r,i;return t&&(typeof t=="object"?{message:n="",allowOffset:r=!1,precision:i=void 0}=t:n=t),this.matches(Ite,{name:"datetime",message:n||Ya.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:n||Ya.datetime_offset,params:{allowOffset:r},skipAbsent:!0,test:o=>{if(!o||r)return!0;const u=WI(o);return u?!!u.z:!1}}).test({name:"datetime_precision",message:n||Ya.datetime_precision,params:{precision:i},skipAbsent:!0,test:o=>{if(!o||i==null)return!0;const u=WI(o);return u?u.precision===i:!1}})}ensure(){return this.default("").transform(t=>t===null?"":t)}trim(t=Ya.trim){return this.transform(n=>n!=null?n.trim():n).test({message:t,name:"trim",test:Pte})}lowercase(t=Ya.lowercase){return this.transform(n=>Xf(n)?n:n.toLowerCase()).test({message:t,name:"string_case",exclusive:!0,skipAbsent:!0,test:n=>Xf(n)||n===n.toLowerCase()})}uppercase(t=Ya.uppercase){return this.transform(n=>Xf(n)?n:n.toUpperCase()).test({message:t,name:"string_case",exclusive:!0,skipAbsent:!0,test:n=>Xf(n)||n===n.toUpperCase()})}}Ia.prototype=O6.prototype;let Ate=e=>e!=+e;function op(){return new k6}class k6 extends jc{constructor(){super({type:"number",check(t){return t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&!Ate(t)}}),this.withMutation(()=>{this.transform((t,n,r)=>{if(!r.spec.coerce)return t;let i=t;if(typeof i=="string"){if(i=i.replace(/\s/g,""),i==="")return NaN;i=+i}return r.isType(i)||i===null?i:parseFloat(i)})})}min(t,n=ip.min){return this.test({message:n,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(r){return r>=this.resolve(t)}})}max(t,n=ip.max){return this.test({message:n,name:"max",exclusive:!0,params:{max:t},skipAbsent:!0,test(r){return r<=this.resolve(t)}})}lessThan(t,n=ip.lessThan){return this.test({message:n,name:"max",exclusive:!0,params:{less:t},skipAbsent:!0,test(r){return r<this.resolve(t)}})}moreThan(t,n=ip.moreThan){return this.test({message:n,name:"min",exclusive:!0,params:{more:t},skipAbsent:!0,test(r){return r>this.resolve(t)}})}positive(t=ip.positive){return this.moreThan(0,t)}negative(t=ip.negative){return this.lessThan(0,t)}integer(t=ip.integer){return this.test({name:"integer",message:t,skipAbsent:!0,test:n=>Number.isInteger(n)})}truncate(){return this.transform(t=>Xf(t)?t:t|0)}round(t){var n;let r=["ceil","floor","round","trunc"];if(t=((n=t)==null?void 0:n.toLowerCase())||"round",t==="trunc")return this.truncate();if(r.indexOf(t.toLowerCase())===-1)throw new TypeError("Only valid options for round() are: "+r.join(", "));return this.transform(i=>Xf(i)?i:Math[t](i))}}op.prototype=k6.prototype;let Ote=new Date(""),kte=e=>Object.prototype.toString.call(e)==="[object Date]";class TS extends jc{constructor(){super({type:"date",check(t){return kte(t)&&!isNaN(t.getTime())}}),this.withMutation(()=>{this.transform((t,n,r)=>!r.spec.coerce||r.isType(t)||t===null?t:(t=xte(t),isNaN(t)?TS.INVALID_DATE:new Date(t)))})}prepareParam(t,n){let r;if(qg.isRef(t))r=t;else{let i=this.cast(t);if(!this._typeCheck(i))throw new TypeError(`\`${n}\` must be a Date or a value that can be \`cast()\` to a Date`);r=i}return r}min(t,n=HI.min){let r=this.prepareParam(t,"min");return this.test({message:n,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(i){return i>=this.resolve(r)}})}max(t,n=HI.max){let r=this.prepareParam(t,"max");return this.test({message:n,name:"max",exclusive:!0,params:{max:t},skipAbsent:!0,test(i){return i<=this.resolve(r)}})}}TS.INVALID_DATE=Ote;TS.prototype;function Rte(e,t=[]){let n=[],r=new Set,i=new Set(t.map(([u,l])=>`${u}-${l}`));function o(u,l){let p=ug.split(u)[0];r.add(p),i.has(`${l}-${p}`)||n.push([l,p])}for(const u of Object.keys(e)){let l=e[u];r.add(u),qg.isRef(l)&&l.isSibling?o(l.path,u):LA(l)&&"deps"in l&&l.deps.forEach(p=>o(p,u))}return ate.array(Array.from(r),n).reverse()}function oD(e,t){let n=1/0;return e.some((r,i)=>{var o;if((o=t.path)!=null&&o.includes(r))return n=i,!0}),n}function R6(e){return(t,n)=>oD(e,t)-oD(e,n)}const Mte=(e,t,n)=>{if(typeof e!="string")return e;let r=e;try{r=JSON.parse(e)}catch{}return n.isType(r)?r:e};function dw(e){if("fields"in e){const t={};for(const[n,r]of Object.entries(e.fields))t[n]=dw(r);return e.setFields(t)}if(e.type==="array"){const t=e.optional();return t.innerType&&(t.innerType=dw(t.innerType)),t}return e.type==="tuple"?e.optional().clone({types:e.spec.types.map(dw)}):"optional"in e?e.optional():e}const Nte=(e,t)=>{const n=[...ug.normalizePath(t)];if(n.length===1)return n[0]in e;let r=n.pop(),i=ug.getter(ug.join(n),!0)(e);return!!(i&&r in i)};let sD=e=>Object.prototype.toString.call(e)==="[object Object]";function Dte(e,t){let n=Object.keys(e.fields);return Object.keys(t).filter(r=>n.indexOf(r)===-1)}const zte=R6([]);function vx(e){return new M6(e)}class M6 extends jc{constructor(t){super({type:"object",check(n){return sD(n)||typeof n=="function"}}),this.fields=Object.create(null),this._sortErrors=zte,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{t&&this.shape(t)})}_cast(t,n={}){var r;let i=super._cast(t,n);if(i===void 0)return this.getDefault(n);if(!this._typeCheck(i))return i;let o=this.fields,u=(r=n.stripUnknown)!=null?r:this.spec.noUnknown,l=[].concat(this._nodes,Object.keys(i).filter(y=>!this._nodes.includes(y))),p={},g=Object.assign({},n,{parent:p,__validating:n.__validating||!1}),x=!1;for(const y of l){let _=o[y],T=y in i;if(_){let A,O=i[y];g.path=(n.path?`${n.path}.`:"")+y,_=_.resolve({value:O,context:n.context,parent:p});let N=_ instanceof jc?_.spec:void 0,k=N==null?void 0:N.strict;if(N!=null&&N.strip){x=x||y in i;continue}A=!n.__validating||!k?_.cast(i[y],g):i[y],A!==void 0&&(p[y]=A)}else T&&!u&&(p[y]=i[y]);(T!==y in p||p[y]!==i[y])&&(x=!0)}return x?p:i}_validate(t,n={},r,i){let{from:o=[],originalValue:u=t,recursive:l=this.spec.recursive}=n;n.from=[{schema:this,value:u},...o],n.__validating=!0,n.originalValue=u,super._validate(t,n,r,(p,g)=>{if(!l||!sD(g)){i(p,g);return}u=u||g;let x=[];for(let y of this._nodes){let _=this.fields[y];!_||qg.isRef(_)||x.push(_.asNestedTest({options:n,key:y,parent:g,parentPath:n.path,originalParent:u}))}this.runTests({tests:x,value:g,originalValue:u,options:n},r,y=>{i(y.sort(this._sortErrors).concat(p),g)})})}clone(t){const n=super.clone(t);return n.fields=Object.assign({},this.fields),n._nodes=this._nodes,n._excludedEdges=this._excludedEdges,n._sortErrors=this._sortErrors,n}concat(t){let n=super.concat(t),r=n.fields;for(let[i,o]of Object.entries(this.fields)){const u=r[i];r[i]=u===void 0?o:u}return n.withMutation(i=>i.setFields(r,[...this._excludedEdges,...t._excludedEdges]))}_getDefault(t){if("default"in this.spec)return super._getDefault(t);if(!this._nodes.length)return;let n={};return this._nodes.forEach(r=>{var i;const o=this.fields[r];let u=t;(i=u)!=null&&i.value&&(u=Object.assign({},u,{parent:u.value,value:u.value[r]})),n[r]=o&&"getDefault"in o?o.getDefault(u):void 0}),n}setFields(t,n){let r=this.clone();return r.fields=t,r._nodes=Rte(t,n),r._sortErrors=R6(Object.keys(t)),n&&(r._excludedEdges=n),r}shape(t,n=[]){return this.clone().withMutation(r=>{let i=r._excludedEdges;return n.length&&(Array.isArray(n[0])||(n=[n]),i=[...r._excludedEdges,...n]),r.setFields(Object.assign(r.fields,t),i)})}partial(){const t={};for(const[n,r]of Object.entries(this.fields))t[n]="optional"in r&&r.optional instanceof Function?r.optional():r;return this.setFields(t)}deepPartial(){return dw(this)}pick(t){const n={};for(const r of t)this.fields[r]&&(n[r]=this.fields[r]);return this.setFields(n,this._excludedEdges.filter(([r,i])=>t.includes(r)&&t.includes(i)))}omit(t){const n=[];for(const r of Object.keys(this.fields))t.includes(r)||n.push(r);return this.pick(n)}from(t,n,r){let i=ug.getter(t,!0);return this.transform(o=>{if(!o)return o;let u=o;return Nte(o,t)&&(u=Object.assign({},o),r||delete u[t],u[n]=i(o)),u})}json(){return this.transform(Mte)}noUnknown(t=!0,n=ZI.noUnknown){typeof t!="boolean"&&(n=t,t=!0);let r=this.test({name:"noUnknown",exclusive:!0,message:n,test(i){if(i==null)return!0;const o=Dte(this.schema,i);return!t||o.length===0||this.createError({params:{unknown:o.join(", ")}})}});return r.spec.noUnknown=t,r}unknown(t=!0,n=ZI.noUnknown){return this.noUnknown(!t,n)}transformKeys(t){return this.transform(n=>{if(!n)return n;const r={};for(const i of Object.keys(n))r[t(i)]=n[i];return r})}camelCase(){return this.transformKeys(V2.camelCase)}snakeCase(){return this.transformKeys(V2.snakeCase)}constantCase(){return this.transformKeys(t=>V2.snakeCase(t).toUpperCase())}describe(t){const n=(t?this.resolve(t):this).clone(),r=super.describe(t);r.fields={};for(const[o,u]of Object.entries(n.fields)){var i;let l=t;(i=l)!=null&&i.value&&(l=Object.assign({},l,{parent:l.value,value:l.value[o]})),r.fields[o]=u.describe(l)}return r}}vx.prototype=M6.prototype;const Fte=vx({username:Ia().required("Username can't be empty").min(3).max(32),email:Ia().email("Your email is not valid").required("Email can't be empty"),password:Ia().required("Password can't be empty").min(6).max(28)}),Bte=vx({username:Ia().required("Username can't be empty").min(3).max(32),password:Ia().required("Password can't be empty").min(6).max(28)}),jte=vx({username:Ia().required("Username can't be empty").min(3).max(32),email:Ia().email("Your email is not valid").required("Email can't be empty")}),$te=vx({title:Ia().required("Title can't be empty").min(3).max(40),price:op().required("Price can't be empty").min(1),bedroom:op().required().min(1).max(50),bathroom:op().required().min(1).max(50),type:Ia().required("Please select rent or buy"),property:Ia().required("Please select property type"),desc:Ia().required().min(20),size:op().required("Room size can't be empty").min(1),school:op().min(1),bus:op().min(1),restraunt:op().min(1),petAllowance:Ia(),income:Ia(),utilities:Ia()});function AA(e){return"?"+Object.keys(e).map(t=>t+"="+e[t]).join("&")}var Ute={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function qte(e){if(typeof e=="number")return{value:e,unit:"px"};var t,n=(e.match(/^[0-9.]*/)||"").toString();n.includes(".")?t=parseFloat(n):t=parseInt(n,10);var r=(e.match(/[^0-9]*$/)||"").toString();return Ute[r]?{value:t,unit:r}:(console.warn("React Spinners: ".concat(e," is not a valid css value. Defaulting to ").concat(t,"px.")),{value:t,unit:"px"})}function aD(e){var t=qte(e);return"".concat(t.value).concat(t.unit)}var Vte=function(e,t,n){var r="react-spinners-".concat(e,"-").concat(n);if(typeof window>"u"||!window.document)return r;var i=document.createElement("style");document.head.appendChild(i);var o=i.sheet,u=`
    @keyframes `.concat(r,` {
      `).concat(t,`
    }
  `);return o&&o.insertRule(u,0),r},oE=function(){return oE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},oE.apply(this,arguments)},Gte=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},Hte=Vte("ClipLoader","0% {transform: rotate(0deg) scale(1)} 50% {transform: rotate(180deg) scale(0.8)} 100% {transform: rotate(360deg) scale(1)}","clip");function Zte(e){var t=e.loading,n=t===void 0?!0:t,r=e.color,i=r===void 0?"#000000":r,o=e.speedMultiplier,u=o===void 0?1:o,l=e.cssOverride,p=l===void 0?{}:l,g=e.size,x=g===void 0?35:g,y=Gte(e,["loading","color","speedMultiplier","cssOverride","size"]),_=oE({background:"transparent !important",width:aD(x),height:aD(x),borderRadius:"100%",border:"2px solid",borderTopColor:i,borderBottomColor:"transparent",borderLeftColor:i,borderRightColor:i,display:"inline-block",animation:"".concat(Hte," ").concat(.75/u,"s 0s infinite linear"),animationFillMode:"both"},p);return n?qe.createElement("span",oE({style:_},y)):null}function Wte({reqEndPoint:e,setFilterParams:t,filterParams:n}){const[r,i]=qe.useState([]),[o,u]=qe.useState(!1),l=qe.useRef();function p(y,_){t({...n,address:_==null?void 0:_.address}),l.current.value=_==null?void 0:_.address,i([])}function g(){l.current.value="",t({...n,address:""}),r[0]&&i([])}const x=function(){let _;return function(T){if(T.target.value.length<2)return r[0]&&i([]);_&&clearTimeout(_),_=setTimeout(async()=>{u(!0),t({...n,[T.target.name]:T.target.value});try{const A=await Er.get(e+AA({...n,[T.target.name]:T.target.value}));i(A.data)}catch(A){console.log(A.message)}finally{u(!1)}},500)}}();return he.jsxs("div",{className:"input-autocomplete-container",children:[he.jsx("input",{ref:l,className:"autoCompleteField",type:"text",id:"address",name:"address",defaultValue:n.address,placeholder:"Address",onChange:x}),o&&he.jsx("span",{className:"loading-autocomplete",children:he.jsx(Zte,{size:16})}),n.address&&!o&&he.jsx("span",{onClick:g,className:"cancel-text",children:"X"}),he.jsx("div",{className:"autocomplete-container",children:r.map(y=>he.jsx("span",{onClick:_=>p(_,y),children:y==null?void 0:y.address},y._id))})]})}function N6({_id:e,title:t,images:n,bedroom:r,bathroom:i,price:o,address:u,latitude:l,longitude:p,handleFlyToHouse:g}){const x=Yc();function y(){g?g({_id:e,img:n[0],title:t,latitude:l,longitude:p,bedroom:r,price:o}):x(`/list/${e}`)}return he.jsxs("div",{className:"card-container",children:[he.jsx("div",{className:"card-left-section",children:he.jsx(oo,{to:`/list/${e}`,children:he.jsx("img",{src:n[0]||"https://www.its.ac.id/tmesin/wp-content/uploads/sites/22/2022/07/no-image.png",alt:t})})}),he.jsxs("div",{className:"card-right-section",children:[he.jsx("h1",{onClick:y,children:t}),he.jsxs("div",{className:"address-container",children:[he.jsx("img",{src:"/pin.png",alt:"pin-image"}),he.jsx("span",{children:u.slice(0,45)+"..."})]}),he.jsxs("span",{className:"price",children:["$ ",o]}),he.jsx("div",{className:"card-upper-bottom",children:he.jsxs("div",{className:"left-section",children:[he.jsxs("div",{className:"bedroom",children:[he.jsx("img",{src:"/bed.png",alt:"bedroom"}),he.jsxs("span",{children:[r," bedroom"]})]}),he.jsxs("div",{className:"bathroom",children:[he.jsx("img",{src:"/bath.png",alt:"bathroom"}),he.jsxs("span",{children:[i," bathroom"]})]})]})}),he.jsx("div",{className:"card-lower-bottom",children:he.jsxs(oo,{to:`/list/${e}`,children:["See Details ",he.jsx("span",{children:"→"})]})})]})]})}function Pb(e){const t=new Date(e);if(!Number.isNaN(t.valueOf()))return t;const n=String(e).match(/\d+/g);if(n==null||n.length<=2)return t;{const[r,i,...o]=n.map(p=>parseInt(p)),u=[r,i-1,...o];return new Date(Date.UTC(...u))}}function lD(e,t,n){const r=e!==1?t+"s":t;return e+" "+r+" "+n}function KI(){return KI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},KI.apply(this,arguments)}const S0=60,T0=S0*60,Qy=T0*24,Lb=Qy*7,uD=Qy*30,cD=Qy*365,Kte=()=>Date.now();function Xte({date:e,formatter:t=lD,component:n="time",live:r=!0,minPeriod:i=0,maxPeriod:o=Lb,title:u,now:l=Kte,...p}){const[g,x]=qe.useState(l());qe.useEffect(()=>{if(!r)return;const U=(()=>{const q=Pb(e).valueOf();if(!q)return console.warn("[react-timeago] Invalid Date provided"),0;const G=Math.round(Math.abs(g-q)/1e3),H=G<S0?1e3:G<T0?1e3*S0:G<Qy?1e3*T0:1e3*Lb,J=Math.min(Math.max(H,i*1e3),o*1e3);return J?setTimeout(()=>{x(l())},J):0})();return()=>{U&&clearTimeout(U)}},[e,r,o,i,l,g]);const y=n,_=Pb(e).valueOf();if(!_)return null;const T=Math.round(Math.abs(g-_)/1e3),A=_<g?"ago":"from now",[O,N]=T<S0?[Math.round(T),"second"]:T<T0?[Math.round(T/S0),"minute"]:T<Qy?[Math.round(T/T0),"hour"]:T<Lb?[Math.round(T/Qy),"day"]:T<uD?[Math.round(T/Lb),"week"]:T<cD?[Math.round(T/uD),"month"]:[Math.round(T/cD),"year"],k=typeof u>"u"?typeof e=="string"?e:Pb(e).toISOString().substr(0,16).replace("T"," "):u,R=y==="time"?{...p,dateTime:Pb(e).toISOString()}:p,z=lD.bind(null,O,N,A);return qe.createElement(y,KI({},R,{title:k}),t(O,N,A,_,z,l))}var D6={exports:{}},Yte="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Jte=Yte,Qte=Jte;function z6(){}function F6(){}F6.resetWarningCache=z6;var ene=function(){function e(r,i,o,u,l,p){if(p!==Qte){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:F6,resetWarningCache:z6};return n.PropTypes=n,n};D6.exports=ene();var tne=D6.exports;const on=xd(tne);function nne(e,t){return t={exports:{}},e(t,t.exports),t.exports}var $c=nne(function(e){/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){var t={}.hasOwnProperty;function n(){for(var r=[],i=0;i<arguments.length;i++){var o=arguments[i];if(o){var u=typeof o;if(u==="string"||u==="number")r.push(o);else if(Array.isArray(o)){if(o.length){var l=n.apply(null,o);l&&r.push(l)}}else if(u==="object")if(o.toString===Object.prototype.toString)for(var p in o)t.call(o,p)&&o[p]&&r.push(p);else r.push(o.toString())}}return r.join(" ")}e.exports?(n.default=n,e.exports=n):window.classNames=n})()});function af(e,t){t===void 0&&(t={});var n=t.insertAt;if(!(!e||typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",n==="top"&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}var rne=`.shimmer-button {
  border-radius: 4px;
  height: 38px;
  width: 120px;
  margin-bottom: 20px; }
  .shimmer-button--sm {
    border-radius: 3px;
    height: 31px;
    width: 100px; }
  .shimmer-button--lg {
    height: 48px;
    width: 140px;
    border-radius: 5px; }
`;af(rne);var Fu=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},xx=function(t){var n=t.size;return Bt.createElement("div",{className:$c(Fu({"shimmer shimmer-button":!0},"shimmer-button--"+n,!0))})};xx.propTypes={size:on.oneOf(["lg","md","sm"])};xx.defaultProps={size:"md"};var CS=function(t){var n=t.size,r=t.center,i=t.className,o={};return n&&(o.width=n+"px",o.height=n+"px"),Bt.createElement("div",{className:$c({"text-center":r})},Bt.createElement("div",{style:o,className:$c(Fu({"shimmer shimmer-avatar":!0},i,i))}))};CS.propTypes={size:on.number,center:on.bool,className:on.string};CS.defaultProps={center:!1,size:80};var A_=function(t){var n=t.height,r=t.width,i=t.center,o=t.className,u=t.fitOnFrame,l=t.rounded,p={};return n&&(p.height=n+"px"),r&&(p.width=r+"px"),Bt.createElement("div",{className:$c({"h-100":u,"text-center ":i})},Bt.createElement("div",{className:$c(Fu({"h-100":u,"shimmer shimmer-thumbnail":!0,"border-rounded":l},o,o)),style:p}))};A_.propTypes={height:on.number,width:on.number,center:on.bool,className:on.string,fitOnFrame:on.bool,rounded:on.bool};A_.defaultProps={canter:!1,fitOnFrame:!1,rounded:!1,height:250};var ine=`.shimmer-avatar {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  margin-bottom: 20px;
  display: inline-block; }

.shimmer-thumbnail {
  min-width: 80px;
  width: 100%;
  height: 200px;
  margin-bottom: 20px;
  display: inline-block; }
`;af(ine);var one=`.shimmer-title {
  margin-bottom: 20px; }
  .shimmer-title--secondary {
    margin-bottom: 20px; }
    .shimmer-title--secondary .shimmer-title-line {
      height: 16px; }
  .shimmer-title-line {
    width: 100%;
    height: 24px;
    border-radius: 20px; }
    .shimmer-title-line:first-child {
      width: 100% !important; }
    .shimmer-title-line:last-child {
      width: 40%; }
`;af(one);var Ns=function(t){var n,r=t.line,i=t.gap,o=t.variant,u=t.className,l=function(){for(var g=[],x=0;x<r;x++)g.push(Bt.createElement("div",{className:"shimmer shimmer-title-line",key:x}));return g};return Bt.createElement("div",{className:$c((n={grid:!0,"shimmer-title":o==="primary","shimmer-title--secondary":o==="secondary"},Fu(n,"grid-gap-"+i,i),Fu(n,u,u),n))},l())};Ns.propTypes={line:on.number,gap:on.oneOf([10,15,20,30]),variant:on.oneOf(["primary","secondary"]),className:on.string};Ns.defaultProps={line:2,gap:10,variant:"primary"};var sne=`.shimmer-card {
  border-radius: 8px;
  box-shadow: 0 0px 10px rgba(0, 0, 0, 0.1);
  background-color: #ffffff;
  width: 100%; }
  .shimmer-card:not(:first-child) {
    margin-top: 30px; }
  .shimmer-card--content-center {
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center; }
    .shimmer-card--content-center * {
      width: 100%;
      margin: auto; }
`;af(sne);var bx=function(t){var n,r=t.children,i=t.className,o=t.paddingSize;return r?Bt.createElement("div",{className:$c((n={"shimmer-card":!0},Fu(n,"p-"+o,o),Fu(n,i,i),n))},r):null};bx.propTypes={className:on.string,children:on.oneOfType([on.element,on.array]).isRequired,paddingSize:on.oneOf([!1,20,30])};bx.defaultProps={paddingSize:!1};on.number,on.oneOf([2,3,4]),on.oneOf([20,30]),on.bool,on.oneOf(["thumbnail","circular"]),on.number,on.bool,on.bool;var ane=`.shimmer-gallery-puzzle {
  height: 540px; }

.circular-image-caption .shimmer-title-line {
  margin: auto; }
`;af(ane);on.number,on.oneOf([2,3,4]),on.oneOf([20,30]),on.bool,on.number;on.number.isRequired,on.bool;var lne=`.shimmer-table-row {
  box-shadow: 0 0px 10px rgba(0, 0, 0, 0.1);
  display: flex;
  padding: 25px 0;
  background-color: #ffffff;
  border-radius: 5px;
  margin-bottom: 20px; }
  .shimmer-table-row--header {
    background-color: transparent;
    box-shadow: none;
    margin: 0; }
  .shimmer-table-row > .shimmer {
    margin: 0 30px; }

.shimmer-table-col {
  width: 100%;
  height: 10px;
  border-radius: 10px; }
`;af(lne);on.number,on.number;var une=`.shimmer-badge {
  width: 80px;
  height: 24px;
  border-radius: 20px;
  margin-bottom: 20px; }
`;af(une);on.number;var cne=`.shimmer-text {
  margin-bottom: 30px; }
  .shimmer-text-line {
    width: 100%;
    height: 8px;
    border-radius: 10px; }
    .shimmer-text-line:first-child {
      width: 100% !important; }
    .shimmer-text-line:last-child {
      width: 40%; }
`;af(cne);var Os=function(t){var n,r=t.line,i=t.gap,o=t.className,u=function(){for(var p=[],g=0;g<r;g++)p.push(Bt.createElement("div",{className:"shimmer shimmer-text-line",key:g}));return p};return Bt.createElement("div",{className:$c((n={"grid shimmer-text":!0},Fu(n,"grid-gap-"+i,i),Fu(n,o,o),n))},u())};Os.propTypes={line:on.number,gap:on.oneOf([10,15,20,30]),className:on.string};Os.defaultProps={line:5,gap:15};var hne=`.shimmer-separator {
  height: 1px;
  background-color: #dddddd;
  margin: 40px 0; }
`;af(hne);on.oneOf(["text","image","both"]),on.bool;on.bool.isRequired,on.oneOf(["circular","thumbnail"]),on.number,on.number,on.bool,on.bool,on.bool,on.bool;on.bool,on.number,on.oneOf(["STYLE_ONE","STYLE_TWO","STYLE_THREE","STYLE_FOUR","STYLE_FIVE","STYLE_SIX","STYLE_SEVEN"]);var OA=function(t){var n=t.variant,r=t.cta,i=t.card,o={SIMPLE:Bt.createElement("div",null,Bt.createElement(Ns,{line:1,className:"w-40"}),Bt.createElement(Ns,{line:1,variant:"secondary",className:"w-20 mb-40"}),Bt.createElement("div",{className:"w-40 mb-40"},Bt.createElement(Os,{line:1,className:"mb-15 w-20"}),Bt.createElement(Os,{line:1,className:"mb-15 w-40"}),Bt.createElement(Os,{line:1,className:"mb-30 w-60"})),Bt.createElement(Ns,{line:1,variant:"secondary",className:"w-30"}),Bt.createElement(Os,{className:"mb-40"}),Bt.createElement(Ns,{line:1,variant:"secondary",className:"w-30"}),Bt.createElement(Os,{className:"mb-40"}),Bt.createElement(Ns,{line:1,variant:"secondary",className:"w-30"}),Bt.createElement(Os,{className:"mb-40"}),Bt.createElement(Ns,{line:1,variant:"secondary",className:"w-30"}),Bt.createElement(Os,{className:"mb-40"}),r&&Bt.createElement(xx,null)),EDITOR:Bt.createElement("div",null,Bt.createElement(Ns,{line:1,className:"w-40"}),Bt.createElement(A_,{height:400}),Bt.createElement(Os,null),Bt.createElement(Os,null),Bt.createElement("div",{className:"shimmer-row"},Bt.createElement("div",{className:"shimmer-col"},Bt.createElement(Os,{line:13})),Bt.createElement("div",{className:"shimmer-col"},Bt.createElement(A_,{height:300}))),Bt.createElement(Os,null),Bt.createElement(Os,null),Bt.createElement(Os,null))};return i?Bt.createElement(bx,{paddingSize:30},o[n]):o[n]};OA.propTypes={variant:on.oneOf(["SIMPLE","EDITOR"]),cta:on.bool,card:on.bool};OA.defaultProps={variant:"SIMPLE",cta:!1,card:!1};var Rh=function(t){var n=t.cta,r=t.title,i=t.text,o=t.imageType,u=t.imageWidth,l=t.imageHeight;return Bt.createElement(bx,null,o==="thumbnail"&&Bt.createElement(A_,{height:l,width:u,className:u&&u!=="w-100"?"m-30 mb-0":"mb-0"}),o==="circular"&&Bt.createElement(CS,{size:u,className:"m-30 mb-0"}),Bt.createElement("div",{className:"p-30"},r&&Bt.createElement(Ns,{variant:"secondary"}),i&&Bt.createElement(Os,{line:3,gap:10}),n&&Bt.createElement(xx,{size:"sm"})))};Rh.propTypes={title:on.bool,text:on.bool,cta:on.bool,imageType:on.oneOf(["circular","thumbnail"]),imageHeight:on.number,imageWidth:on.number};Rh.defaultProps={title:!1,text:!1,cta:!1,imageType:"thumbnail"};var kA=function(t){var n,r=t.row,i=t.col,o=t.gap,u=t.className,l=t.postStyle,p={STYLE_ONE:Bt.createElement(Rh,{title:!0,text:!0,cta:!0}),STYLE_TWO:Bt.createElement(Rh,{title:!0,cta:!0}),STYLE_THREE:Bt.createElement(Rh,{title:!0}),STYLE_FOUR:Bt.createElement(Rh,{text:!0,cta:!0}),STYLE_FIVE:Bt.createElement(Rh,{text:!0}),STYLE_SIX:Bt.createElement(Rh,{title:!0,text:!0,cta:!0,imageType:"thumbnail",imageWidth:80,imageHeight:80,contentCenter:!0}),STYLE_SEVEN:Bt.createElement(Rh,{text:!0,cta:!0,imageType:"thumbnail",imageWidth:80,imageHeight:80,contentCenter:!0}),STYLE_EIGHT:Bt.createElement(Rh,{title:!0,cta:!0,imageType:"thumbnail",imageWidth:80,imageHeight:80,contentCenter:!0})},g=function(){for(var y=[],_=r*i,T=0;T<_;T++)y.push(Bt.createElement("div",{key:T},p[l]));return y};return Bt.createElement("div",{className:$c((n={grid:!0},Fu(n,"grid-gap-"+o,!0),Fu(n,"grid-column-"+i,!0),Fu(n,u,u),n))},g())};kA.propTypes={row:on.number,col:on.oneOf([2,3,4]),gap:on.oneOf([20,30]),postStyle:on.oneOf(["STYLE_ONE","STYLE_TWO","STYLE_THREE","STYLE_FOUR","STYLE_FIVE","STYLE_SIX","STYLE_SEVEN","STYLE_EIGHT"])};kA.defaultProps={row:3,col:3,gap:20,postStyle:"STYLE_ONE"};var V0=function(t){var n=t.card,r=t.title,i=t.text,o=t.cta,u=t.thumbnailWidth,l=t.thumbnailHeight,p=t.reverse,g=function(){return Bt.createElement("div",{className:$c({flex:!0,"flex-reverse":p})},Bt.createElement("div",{className:$c({flex:!0,"w-50":!u})},Bt.createElement(A_,{width:u,height:l,className:"h-100 m-0"})),Bt.createElement("div",{className:" flex-1 p-30"},r&&Bt.createElement(Ns,{className:"w-40",line:1}),i&&Bt.createElement(Os,null),o&&Bt.createElement(xx,null)))};return n?Bt.createElement(bx,null,g()):g()};V0.propTypes={card:on.bool,title:on.bool,text:on.bool,cta:on.bool,thumbnailWidth:on.number,thumbnailHeight:on.number,reverse:on.bool};V0.defaultProps={card:!0,title:!1,text:!1,cta:!1,reverse:!1};on.bool,on.bool,on.bool;var fne=`.shimmer {
  background: linear-gradient(to right, #f6f6f6 8%, #f0f0f0 18%, #f6f6f6 33%);
  background-size: 1000px 100%;
  animation: shimmer 2.2s linear infinite forwards; }

@-webkit-keyframes shimmer {
  0% {
    background-position: -100% 0; }
  100% {
    background-position: 100% 0; } }

@keyframes shimmer {
  0% {
    background-position: -1000px 0; }
  100% {
    background-position: 1000px 0; } }

/*
=====
Padding Styles
=====
*/
.p-30 {
  padding: 30px; }

.p-20 {
  padding: 20px; }

.p-15 {
  padding: 15px; }

/*
=====
Margin Styles
=====
*/
.m-0 {
  margin: 0; }

.m-auto {
  margin: auto; }

.ml-auto {
  margin-left: auto; }

.mr-auto {
  margin-right: auto; }

.m-15 {
  margin: 15px; }

.m-30 {
  margin: 30px; }

.mb-0 {
  margin-bottom: 0px; }

.mb-10 {
  margin-bottom: 10px; }

.mb-15 {
  margin-bottom: 15px; }

.mb-20 {
  margin-bottom: 20px; }

.mt-15 {
  margin-top: 15px; }

.mb-30 {
  margin-bottom: 30px; }

.mb-40 {
  margin-bottom: 40px; }

/*
=======
Content Size Styles
=======
*/
.w-10 {
  width: 10%; }

.w-20 {
  width: 20%; }

.w-30 {
  width: 30%; }

.w-40 {
  width: 40%; }

.w-50 {
  width: 50%; }

.w-60 {
  width: 60%; }

.w-70 {
  width: 70%; }

.w-80 {
  width: 80%; }

/*
========
Flex Styles
========
*/
.flex {
  display: flex; }

.flex-direction-column {
  flex-direction: column; }

.flex-horizontal-center {
  display: flex;
  flex-direction: column;
  align-items: center; }

.flex-vertical-center {
  align-items: center; }

.flex-content-between {
  justify-content: space-between; }

.flex-reverse {
  flex-direction: row-reverse; }

.flex-1 {
  flex-grow: 1; }

/*
=======
Grid Styles
=======
*/
.grid {
  display: grid; }

.grid-gap-10 {
  gap: 10px; }

.grid-gap-15 {
  gap: 15px; }

.grid-gap-20 {
  gap: 20px; }

.grid-gap-30 {
  gap: 30px; }

.grid-column-2 {
  grid-template-columns: auto auto; }

.grid-column-3 {
  grid-template-columns: auto auto auto; }

.grid-column-4 {
  grid-template-columns: auto auto auto auto; }

.text-center {
  text-align: center; }

.border-rounded {
  border-radius: 4px; }

.h-100 {
  height: 100% !important; }

.shimmer-hr {
  border-color: #f6f6f6; }

.shimmer-row {
  display: flex;
  margin: 0 -15px; }
  .shimmer-row .shimmer-col,
  .shimmer-row [class*="shimmer-col-"] {
    padding-left: 15px;
    padding-right: 15px;
    flex-basis: 0;
    flex-grow: 1;
    max-width: 100%; }
`;af(fne);function dne({chatId:e,setChatId:t}){var D,U;const n=qe.useRef(),{userAuth:r}=qe.useContext(eu),i=nm(),o=qe.useRef(),[u,l]=qe.useState(!1),[p,g]=qe.useState(!1),[x,y]=qe.useState(),_=qe.useContext(aS),{data:T,isFetching:A,error:O}=gx({queryKey:["chat",e],queryFn:async()=>{const q=await Er.patch(`https://magic-estate-server.onrender.com/api/chats/${e}`,{});return q.data.receiver=q.data.users[0],q.data}});qe.useEffect(()=>{var q;T&&((q=n.current)==null||q.scrollIntoView({behavior:"smooth"}))},[T]),qe.useEffect(()=>(_.on("receive-message",async q=>{i.setQueryData(["chat",e],G=>({...G,messages:[...G.messages,q]})),i.setQueryData(["chats"],G=>G.map(H=>H._id===e?{...H,lastMessage:q.content}:H))}),_.on("user-typing",()=>{l(!0)}),_.on("user-typing-stop",()=>{l(!1)}),function(){_.off("receive-message"),_.off("user-typing"),_.off("user-typing-stop"),_.emit("close-chat",{userId:r==null?void 0:r._id})}),[]);function N(){t(null)}function k(){var q;g(!1),_.emit("stop-typing",{chatId:e,receiverId:(q=T.receiver)==null?void 0:q._id})}async function R(q){var J,Y;q.preventDefault();const G=o.current.value;o.current.value="";const H={receiverId:(J=T.receiver)==null?void 0:J._id,content:G,chatId:e,createdAt:Date.now()};try{const X=await Er.post("https://magic-estate-server.onrender.com/api/messages/",H);i.setQueryData(["chat",e],{...T,messages:[...T.messages,X.data]}),i.setQueryData(["chats"],ee=>ee.map(ue=>ue._id===e?{...ue,lastMessage:G}:ue)),k(),clearTimeout(x),_.emit("send-message",{chatId:e,senderId:r==null?void 0:r._id,messageObj:{...H,messageId:(Y=X.data)==null?void 0:Y._id}})}catch(X){ar.error(X.message,{autoClose:2e3})}}function z(){var G;x&&clearTimeout(x),p||(g(!0),_.emit("typing",{chatId:e,receiverId:(G=T.receiver)==null?void 0:G._id}));const q=setTimeout(()=>{k()},2e3);y(q)}return O?he.jsx("div",{children:O.message}):he.jsxs("div",{className:"chat-window",style:{display:e?"block":"none"},children:[A?he.jsx("div",{className:"top-section",children:he.jsx(CS,{center:!0,size:40})}):he.jsxs("div",{className:"top-section",children:[he.jsx("div",{children:he.jsx("img",{src:(D=T.receiver)==null?void 0:D.avatar,alt:"avatar-image"})}),he.jsxs("div",{className:"username-typing-container",children:[he.jsx("span",{children:(U=T.receiver)==null?void 0:U.username}),u&&he.jsx("span",{className:"typing",children:"Typing..."})]}),he.jsx("button",{onClick:N,children:"X"})]}),he.jsx("div",{className:"chat-messages",children:A?he.jsxs("div",{className:"shimmer-message-container",children:[he.jsx(Ns,{line:1,gap:15,variant:"secondary",className:"shimmer-message"}),he.jsx(Ns,{line:1,gap:15,variant:"secondary",className:"shimmer-message sender"}),he.jsx(Ns,{line:1,gap:15,variant:"secondary",className:"shimmer-message"}),he.jsx(Ns,{line:1,gap:15,variant:"secondary",className:"shimmer-message sender"}),he.jsx(Ns,{line:1,gap:15,variant:"secondary",className:"shimmer-message"}),he.jsx(Ns,{line:1,gap:15,variant:"secondary",className:"shimmer-message sender"})]}):T==null?void 0:T.messages.map(q=>he.jsxs("div",{ref:n,className:"chat-message",style:{alignSelf:q.senderId==r._id?"flex-end":"flex-start"},children:[he.jsx("p",{children:q.content}),he.jsx("span",{children:he.jsx(Xte,{date:q.createdAt})})]},q._id))}),he.jsxs("form",{className:"chat-form",onSubmit:R,children:[he.jsx("textarea",{ref:o,name:"message",onChange:z}),he.jsx("button",{children:"Send"})]})]})}function pne({filterParams:e,setFilterParams:t,setSearchParams:n}){const r=nm(),[i,o]=qe.useState(e.address);function u(p){t({...e,[p.target.name]:p.target.value})}function l(p){if(p.preventDefault(),e.minPrice>e.maxPrice)return ar.error("Min price can't be greater than max price",{autoClose:2e3});o(e.address),n(e),r.invalidateQueries({queryKey:["posts"]})}return he.jsxs("form",{className:"filter-container",onSubmit:l,children:[he.jsxs("h1",{children:["Search results for ",he.jsx("span",{children:i||"N/A"})]}),he.jsxs("div",{className:"top-filter-section",children:[he.jsx("label",{htmlFor:"address",children:"Address"}),he.jsx(Wte,{filterParams:e,setFilterParams:t,reqEndPoint:"https://magic-estate-server.onrender.com/api/posts/autocomplete"})]}),he.jsxs("div",{className:"bottom-filter-section",children:[he.jsxs("div",{children:[he.jsx("label",{htmlFor:"type",children:"Type"}),he.jsxs("select",{id:"type",name:"type",onChange:u,defaultValue:e.type,children:[he.jsx("option",{value:"",children:"any"}),hA.map((p,g)=>he.jsx("option",{value:p,children:p},g))]})]}),he.jsxs("div",{children:[he.jsx("label",{htmlFor:"property",children:"Property"}),he.jsxs("select",{id:"property",defaultValue:e.property,name:"property",onChange:u,children:[he.jsx("option",{value:"",children:"any"}),UB.map((p,g)=>he.jsx("option",{value:p,children:p},g))]})]}),he.jsxs("div",{children:[he.jsx("label",{htmlFor:"minPrice",children:"Min Price"}),he.jsx("input",{type:"number",name:"minPrice",id:"minPrice",placeholder:"any",defaultValue:e.minPrice,min:0,max:1e10,onChange:u})]}),he.jsxs("div",{children:[he.jsx("label",{htmlFor:"maxPrice",children:"Max Price"}),he.jsx("input",{type:"number",id:"maxPrice",name:"maxPrice",placeholder:"any",defaultValue:e.maxPrice,min:0,max:1e10,onChange:u})]}),he.jsxs("div",{children:[he.jsx("label",{htmlFor:"bedroom",children:"Bedroom"}),he.jsx("input",{type:"number",name:"bedroom",id:"bedroom",placeholder:"any",defaultValue:e.bedroom,min:0,max:1e10,onChange:u})]}),he.jsx("button",{onClick:l,children:he.jsx("img",{src:"/search.png"})})]})]})}function hD({queryKey:e,requestEndpoint:t}){const{isFetching:n,data:r}=gx({queryKey:e,queryFn:async()=>(await Er.get(t)).data});return n?he.jsxs(he.Fragment,{children:[he.jsx(V0,{title:!0,text:!0,cta:!0,thumbnailWidth:300}),he.jsx(V0,{title:!0,text:!0,cta:!0,thumbnailWidth:300}),he.jsx(V0,{title:!0,text:!0,cta:!0,thumbnailWidth:300})]}):he.jsxs(he.Fragment,{children:[(r==null?void 0:r.length)==0&&he.jsxs("div",{className:"no-result-container",children:[he.jsx("img",{src:"/no-results.png",alt:"no-results"}),he.jsx("span",{children:"No Post Found"})]}),r==null?void 0:r.map(i=>he.jsx(N6,{...i},i._id))]})}function B6(){return he.jsx("div",{className:"loader-container",children:he.jsx("div",{className:"pong-loader"})})}var XI={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,r){r(t)})(wr,function(n){var r="1.9.4";function i(f){var b,M,V,re;for(M=1,V=arguments.length;M<V;M++){re=arguments[M];for(b in re)f[b]=re[b]}return f}var o=Object.create||function(){function f(){}return function(b){return f.prototype=b,new f}}();function u(f,b){var M=Array.prototype.slice;if(f.bind)return f.bind.apply(f,M.call(arguments,1));var V=M.call(arguments,2);return function(){return f.apply(b,V.length?V.concat(M.call(arguments)):arguments)}}var l=0;function p(f){return"_leaflet_id"in f||(f._leaflet_id=++l),f._leaflet_id}function g(f,b,M){var V,re,me,Ce;return Ce=function(){V=!1,re&&(me.apply(M,re),re=!1)},me=function(){V?re=arguments:(f.apply(M,arguments),setTimeout(Ce,b),V=!0)},me}function x(f,b,M){var V=b[1],re=b[0],me=V-re;return f===V&&M?f:((f-re)%me+me)%me+re}function y(){return!1}function _(f,b){if(b===!1)return f;var M=Math.pow(10,b===void 0?6:b);return Math.round(f*M)/M}function T(f){return f.trim?f.trim():f.replace(/^\s+|\s+$/g,"")}function A(f){return T(f).split(/\s+/)}function O(f,b){Object.prototype.hasOwnProperty.call(f,"options")||(f.options=f.options?o(f.options):{});for(var M in b)f.options[M]=b[M];return f.options}function N(f,b,M){var V=[];for(var re in f)V.push(encodeURIComponent(M?re.toUpperCase():re)+"="+encodeURIComponent(f[re]));return(!b||b.indexOf("?")===-1?"?":"&")+V.join("&")}var k=/\{ *([\w_ -]+) *\}/g;function R(f,b){return f.replace(k,function(M,V){var re=b[V];if(re===void 0)throw new Error("No value provided for variable "+M);return typeof re=="function"&&(re=re(b)),re})}var z=Array.isArray||function(f){return Object.prototype.toString.call(f)==="[object Array]"};function D(f,b){for(var M=0;M<f.length;M++)if(f[M]===b)return M;return-1}var U="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function q(f){return window["webkit"+f]||window["moz"+f]||window["ms"+f]}var G=0;function H(f){var b=+new Date,M=Math.max(0,16-(b-G));return G=b+M,window.setTimeout(f,M)}var J=window.requestAnimationFrame||q("RequestAnimationFrame")||H,Y=window.cancelAnimationFrame||q("CancelAnimationFrame")||q("CancelRequestAnimationFrame")||function(f){window.clearTimeout(f)};function X(f,b,M){if(M&&J===H)f.call(b);else return J.call(window,u(f,b))}function ee(f){f&&Y.call(window,f)}var ue={__proto__:null,extend:i,create:o,bind:u,get lastId(){return l},stamp:p,throttle:g,wrapNum:x,falseFn:y,formatNum:_,trim:T,splitWords:A,setOptions:O,getParamString:N,template:R,isArray:z,indexOf:D,emptyImageUrl:U,requestFn:J,cancelFn:Y,requestAnimFrame:X,cancelAnimFrame:ee};function oe(){}oe.extend=function(f){var b=function(){O(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},M=b.__super__=this.prototype,V=o(M);V.constructor=b,b.prototype=V;for(var re in this)Object.prototype.hasOwnProperty.call(this,re)&&re!=="prototype"&&re!=="__super__"&&(b[re]=this[re]);return f.statics&&i(b,f.statics),f.includes&&(we(f.includes),i.apply(null,[V].concat(f.includes))),i(V,f),delete V.statics,delete V.includes,V.options&&(V.options=M.options?o(M.options):{},i(V.options,f.options)),V._initHooks=[],V.callInitHooks=function(){if(!this._initHooksCalled){M.callInitHooks&&M.callInitHooks.call(this),this._initHooksCalled=!0;for(var me=0,Ce=V._initHooks.length;me<Ce;me++)V._initHooks[me].call(this)}},b},oe.include=function(f){var b=this.prototype.options;return i(this.prototype,f),f.options&&(this.prototype.options=b,this.mergeOptions(f.options)),this},oe.mergeOptions=function(f){return i(this.prototype.options,f),this},oe.addInitHook=function(f){var b=Array.prototype.slice.call(arguments,1),M=typeof f=="function"?f:function(){this[f].apply(this,b)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(M),this};function we(f){if(!(typeof L>"u"||!L||!L.Mixin)){f=z(f)?f:[f];for(var b=0;b<f.length;b++)f[b]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ne={on:function(f,b,M){if(typeof f=="object")for(var V in f)this._on(V,f[V],b);else{f=A(f);for(var re=0,me=f.length;re<me;re++)this._on(f[re],b,M)}return this},off:function(f,b,M){if(!arguments.length)delete this._events;else if(typeof f=="object")for(var V in f)this._off(V,f[V],b);else{f=A(f);for(var re=arguments.length===1,me=0,Ce=f.length;me<Ce;me++)re?this._off(f[me]):this._off(f[me],b,M)}return this},_on:function(f,b,M,V){if(typeof b!="function"){console.warn("wrong listener type: "+typeof b);return}if(this._listens(f,b,M)===!1){M===this&&(M=void 0);var re={fn:b,ctx:M};V&&(re.once=!0),this._events=this._events||{},this._events[f]=this._events[f]||[],this._events[f].push(re)}},_off:function(f,b,M){var V,re,me;if(this._events&&(V=this._events[f],!!V)){if(arguments.length===1){if(this._firingCount)for(re=0,me=V.length;re<me;re++)V[re].fn=y;delete this._events[f];return}if(typeof b!="function"){console.warn("wrong listener type: "+typeof b);return}var Ce=this._listens(f,b,M);if(Ce!==!1){var We=V[Ce];this._firingCount&&(We.fn=y,this._events[f]=V=V.slice()),V.splice(Ce,1)}}},fire:function(f,b,M){if(!this.listens(f,M))return this;var V=i({},b,{type:f,target:this,sourceTarget:b&&b.sourceTarget||this});if(this._events){var re=this._events[f];if(re){this._firingCount=this._firingCount+1||1;for(var me=0,Ce=re.length;me<Ce;me++){var We=re[me],dt=We.fn;We.once&&this.off(f,dt,We.ctx),dt.call(We.ctx||this,V)}this._firingCount--}}return M&&this._propagateEvent(V),this},listens:function(f,b,M,V){typeof f!="string"&&console.warn('"string" type argument expected');var re=b;typeof b!="function"&&(V=!!b,re=void 0,M=void 0);var me=this._events&&this._events[f];if(me&&me.length&&this._listens(f,re,M)!==!1)return!0;if(V){for(var Ce in this._eventParents)if(this._eventParents[Ce].listens(f,b,M,V))return!0}return!1},_listens:function(f,b,M){if(!this._events)return!1;var V=this._events[f]||[];if(!b)return!!V.length;M===this&&(M=void 0);for(var re=0,me=V.length;re<me;re++)if(V[re].fn===b&&V[re].ctx===M)return re;return!1},once:function(f,b,M){if(typeof f=="object")for(var V in f)this._on(V,f[V],b,!0);else{f=A(f);for(var re=0,me=f.length;re<me;re++)this._on(f[re],b,M,!0)}return this},addEventParent:function(f){return this._eventParents=this._eventParents||{},this._eventParents[p(f)]=f,this},removeEventParent:function(f){return this._eventParents&&delete this._eventParents[p(f)],this},_propagateEvent:function(f){for(var b in this._eventParents)this._eventParents[b].fire(f.type,i({layer:f.target,propagatedFrom:f.target},f),!0)}};Ne.addEventListener=Ne.on,Ne.removeEventListener=Ne.clearAllEventListeners=Ne.off,Ne.addOneTimeEventListener=Ne.once,Ne.fireEvent=Ne.fire,Ne.hasEventListeners=Ne.listens;var Be=oe.extend(Ne);function De(f,b,M){this.x=M?Math.round(f):f,this.y=M?Math.round(b):b}var Ae=Math.trunc||function(f){return f>0?Math.floor(f):Math.ceil(f)};De.prototype={clone:function(){return new De(this.x,this.y)},add:function(f){return this.clone()._add(ve(f))},_add:function(f){return this.x+=f.x,this.y+=f.y,this},subtract:function(f){return this.clone()._subtract(ve(f))},_subtract:function(f){return this.x-=f.x,this.y-=f.y,this},divideBy:function(f){return this.clone()._divideBy(f)},_divideBy:function(f){return this.x/=f,this.y/=f,this},multiplyBy:function(f){return this.clone()._multiplyBy(f)},_multiplyBy:function(f){return this.x*=f,this.y*=f,this},scaleBy:function(f){return new De(this.x*f.x,this.y*f.y)},unscaleBy:function(f){return new De(this.x/f.x,this.y/f.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Ae(this.x),this.y=Ae(this.y),this},distanceTo:function(f){f=ve(f);var b=f.x-this.x,M=f.y-this.y;return Math.sqrt(b*b+M*M)},equals:function(f){return f=ve(f),f.x===this.x&&f.y===this.y},contains:function(f){return f=ve(f),Math.abs(f.x)<=Math.abs(this.x)&&Math.abs(f.y)<=Math.abs(this.y)},toString:function(){return"Point("+_(this.x)+", "+_(this.y)+")"}};function ve(f,b,M){return f instanceof De?f:z(f)?new De(f[0],f[1]):f==null?f:typeof f=="object"&&"x"in f&&"y"in f?new De(f.x,f.y):new De(f,b,M)}function ce(f,b){if(f)for(var M=b?[f,b]:f,V=0,re=M.length;V<re;V++)this.extend(M[V])}ce.prototype={extend:function(f){var b,M;if(!f)return this;if(f instanceof De||typeof f[0]=="number"||"x"in f)b=M=ve(f);else if(f=xe(f),b=f.min,M=f.max,!b||!M)return this;return!this.min&&!this.max?(this.min=b.clone(),this.max=M.clone()):(this.min.x=Math.min(b.x,this.min.x),this.max.x=Math.max(M.x,this.max.x),this.min.y=Math.min(b.y,this.min.y),this.max.y=Math.max(M.y,this.max.y)),this},getCenter:function(f){return ve((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,f)},getBottomLeft:function(){return ve(this.min.x,this.max.y)},getTopRight:function(){return ve(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(f){var b,M;return typeof f[0]=="number"||f instanceof De?f=ve(f):f=xe(f),f instanceof ce?(b=f.min,M=f.max):b=M=f,b.x>=this.min.x&&M.x<=this.max.x&&b.y>=this.min.y&&M.y<=this.max.y},intersects:function(f){f=xe(f);var b=this.min,M=this.max,V=f.min,re=f.max,me=re.x>=b.x&&V.x<=M.x,Ce=re.y>=b.y&&V.y<=M.y;return me&&Ce},overlaps:function(f){f=xe(f);var b=this.min,M=this.max,V=f.min,re=f.max,me=re.x>b.x&&V.x<M.x,Ce=re.y>b.y&&V.y<M.y;return me&&Ce},isValid:function(){return!!(this.min&&this.max)},pad:function(f){var b=this.min,M=this.max,V=Math.abs(b.x-M.x)*f,re=Math.abs(b.y-M.y)*f;return xe(ve(b.x-V,b.y-re),ve(M.x+V,M.y+re))},equals:function(f){return f?(f=xe(f),this.min.equals(f.getTopLeft())&&this.max.equals(f.getBottomRight())):!1}};function xe(f,b){return!f||f instanceof ce?f:new ce(f,b)}function Ee(f,b){if(f)for(var M=b?[f,b]:f,V=0,re=M.length;V<re;V++)this.extend(M[V])}Ee.prototype={extend:function(f){var b=this._southWest,M=this._northEast,V,re;if(f instanceof $e)V=f,re=f;else if(f instanceof Ee){if(V=f._southWest,re=f._northEast,!V||!re)return this}else return f?this.extend(be(f)||Ge(f)):this;return!b&&!M?(this._southWest=new $e(V.lat,V.lng),this._northEast=new $e(re.lat,re.lng)):(b.lat=Math.min(V.lat,b.lat),b.lng=Math.min(V.lng,b.lng),M.lat=Math.max(re.lat,M.lat),M.lng=Math.max(re.lng,M.lng)),this},pad:function(f){var b=this._southWest,M=this._northEast,V=Math.abs(b.lat-M.lat)*f,re=Math.abs(b.lng-M.lng)*f;return new Ee(new $e(b.lat-V,b.lng-re),new $e(M.lat+V,M.lng+re))},getCenter:function(){return new $e((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new $e(this.getNorth(),this.getWest())},getSouthEast:function(){return new $e(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(f){typeof f[0]=="number"||f instanceof $e||"lat"in f?f=be(f):f=Ge(f);var b=this._southWest,M=this._northEast,V,re;return f instanceof Ee?(V=f.getSouthWest(),re=f.getNorthEast()):V=re=f,V.lat>=b.lat&&re.lat<=M.lat&&V.lng>=b.lng&&re.lng<=M.lng},intersects:function(f){f=Ge(f);var b=this._southWest,M=this._northEast,V=f.getSouthWest(),re=f.getNorthEast(),me=re.lat>=b.lat&&V.lat<=M.lat,Ce=re.lng>=b.lng&&V.lng<=M.lng;return me&&Ce},overlaps:function(f){f=Ge(f);var b=this._southWest,M=this._northEast,V=f.getSouthWest(),re=f.getNorthEast(),me=re.lat>b.lat&&V.lat<M.lat,Ce=re.lng>b.lng&&V.lng<M.lng;return me&&Ce},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(f,b){return f?(f=Ge(f),this._southWest.equals(f.getSouthWest(),b)&&this._northEast.equals(f.getNorthEast(),b)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ge(f,b){return f instanceof Ee?f:new Ee(f,b)}function $e(f,b,M){if(isNaN(f)||isNaN(b))throw new Error("Invalid LatLng object: ("+f+", "+b+")");this.lat=+f,this.lng=+b,M!==void 0&&(this.alt=+M)}$e.prototype={equals:function(f,b){if(!f)return!1;f=be(f);var M=Math.max(Math.abs(this.lat-f.lat),Math.abs(this.lng-f.lng));return M<=(b===void 0?1e-9:b)},toString:function(f){return"LatLng("+_(this.lat,f)+", "+_(this.lng,f)+")"},distanceTo:function(f){return it.distance(this,be(f))},wrap:function(){return it.wrapLatLng(this)},toBounds:function(f){var b=180*f/40075017,M=b/Math.cos(Math.PI/180*this.lat);return Ge([this.lat-b,this.lng-M],[this.lat+b,this.lng+M])},clone:function(){return new $e(this.lat,this.lng,this.alt)}};function be(f,b,M){return f instanceof $e?f:z(f)&&typeof f[0]!="object"?f.length===3?new $e(f[0],f[1],f[2]):f.length===2?new $e(f[0],f[1]):null:f==null?f:typeof f=="object"&&"lat"in f?new $e(f.lat,"lng"in f?f.lng:f.lon,f.alt):b===void 0?null:new $e(f,b,M)}var He={latLngToPoint:function(f,b){var M=this.projection.project(f),V=this.scale(b);return this.transformation._transform(M,V)},pointToLatLng:function(f,b){var M=this.scale(b),V=this.transformation.untransform(f,M);return this.projection.unproject(V)},project:function(f){return this.projection.project(f)},unproject:function(f){return this.projection.unproject(f)},scale:function(f){return 256*Math.pow(2,f)},zoom:function(f){return Math.log(f/256)/Math.LN2},getProjectedBounds:function(f){if(this.infinite)return null;var b=this.projection.bounds,M=this.scale(f),V=this.transformation.transform(b.min,M),re=this.transformation.transform(b.max,M);return new ce(V,re)},infinite:!1,wrapLatLng:function(f){var b=this.wrapLng?x(f.lng,this.wrapLng,!0):f.lng,M=this.wrapLat?x(f.lat,this.wrapLat,!0):f.lat,V=f.alt;return new $e(M,b,V)},wrapLatLngBounds:function(f){var b=f.getCenter(),M=this.wrapLatLng(b),V=b.lat-M.lat,re=b.lng-M.lng;if(V===0&&re===0)return f;var me=f.getSouthWest(),Ce=f.getNorthEast(),We=new $e(me.lat-V,me.lng-re),dt=new $e(Ce.lat-V,Ce.lng-re);return new Ee(We,dt)}},it=i({},He,{wrapLng:[-180,180],R:6371e3,distance:function(f,b){var M=Math.PI/180,V=f.lat*M,re=b.lat*M,me=Math.sin((b.lat-f.lat)*M/2),Ce=Math.sin((b.lng-f.lng)*M/2),We=me*me+Math.cos(V)*Math.cos(re)*Ce*Ce,dt=2*Math.atan2(Math.sqrt(We),Math.sqrt(1-We));return this.R*dt}}),ct=6378137,xt={R:ct,MAX_LATITUDE:85.0511287798,project:function(f){var b=Math.PI/180,M=this.MAX_LATITUDE,V=Math.max(Math.min(M,f.lat),-M),re=Math.sin(V*b);return new De(this.R*f.lng*b,this.R*Math.log((1+re)/(1-re))/2)},unproject:function(f){var b=180/Math.PI;return new $e((2*Math.atan(Math.exp(f.y/this.R))-Math.PI/2)*b,f.x*b/this.R)},bounds:function(){var f=ct*Math.PI;return new ce([-f,-f],[f,f])}()};function Dt(f,b,M,V){if(z(f)){this._a=f[0],this._b=f[1],this._c=f[2],this._d=f[3];return}this._a=f,this._b=b,this._c=M,this._d=V}Dt.prototype={transform:function(f,b){return this._transform(f.clone(),b)},_transform:function(f,b){return b=b||1,f.x=b*(this._a*f.x+this._b),f.y=b*(this._c*f.y+this._d),f},untransform:function(f,b){return b=b||1,new De((f.x/b-this._b)/this._a,(f.y/b-this._d)/this._c)}};function Qt(f,b,M,V){return new Dt(f,b,M,V)}var Ft=i({},it,{code:"EPSG:3857",projection:xt,transformation:function(){var f=.5/(Math.PI*xt.R);return Qt(f,.5,-f,.5)}()}),Kt=i({},Ft,{code:"EPSG:900913"});function Gt(f){return document.createElementNS("http://www.w3.org/2000/svg",f)}function Tr(f,b){var M="",V,re,me,Ce,We,dt;for(V=0,me=f.length;V<me;V++){for(We=f[V],re=0,Ce=We.length;re<Ce;re++)dt=We[re],M+=(re?"L":"M")+dt.x+" "+dt.y;M+=b?ht.svg?"z":"x":""}return M||"M0 0"}var rt=document.documentElement.style,lt="ActiveXObject"in window,gt=lt&&!document.addEventListener,_t="msLaunchUri"in navigator&&!("documentMode"in document),Pt=et("webkit"),je=et("android"),vt=et("android 2")||et("android 3"),St=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Lt=je&&et("Google")&&St<537&&!("AudioNode"in window),en=!!window.opera,wn=!_t&&et("chrome"),gn=et("gecko")&&!Pt&&!en&&!lt,bt=!wn&&et("safari"),Un=et("phantom"),yr="OTransition"in rt,Vs=navigator.platform.indexOf("Win")===0,Xr=lt&&"transition"in rt,kt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!vt,_n="MozPerspective"in rt,Pn=!window.L_DISABLE_3D&&(Xr||kt||_n)&&!yr&&!Un,Cr=typeof orientation<"u"||et("mobile"),Zo=Cr&&Pt,Tn=Cr&&kt,Gs=!window.PointerEvent&&window.MSPointerEvent,Vr=!!(window.PointerEvent||Gs),Oe="ontouchstart"in window||!!window.TouchEvent,K=!window.L_NO_TOUCH&&(Oe||Vr),te=Cr&&en,ae=Cr&&gn,pe=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ke=function(){var f=!1;try{var b=Object.defineProperty({},"passive",{get:function(){f=!0}});window.addEventListener("testPassiveEventSupport",y,b),window.removeEventListener("testPassiveEventSupport",y,b)}catch{}return f}(),ge=function(){return!!document.createElement("canvas").getContext}(),ze=!!(document.createElementNS&&Gt("svg").createSVGRect),Ie=!!ze&&function(){var f=document.createElement("div");return f.innerHTML="<svg/>",(f.firstChild&&f.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Ve=!ze&&function(){try{var f=document.createElement("div");f.innerHTML='<v:shape adj="1"/>';var b=f.firstChild;return b.style.behavior="url(#default#VML)",b&&typeof b.adj=="object"}catch{return!1}}(),Qe=navigator.platform.indexOf("Mac")===0,ot=navigator.platform.indexOf("Linux")===0;function et(f){return navigator.userAgent.toLowerCase().indexOf(f)>=0}var ht={ie:lt,ielt9:gt,edge:_t,webkit:Pt,android:je,android23:vt,androidStock:Lt,opera:en,chrome:wn,gecko:gn,safari:bt,phantom:Un,opera12:yr,win:Vs,ie3d:Xr,webkit3d:kt,gecko3d:_n,any3d:Pn,mobile:Cr,mobileWebkit:Zo,mobileWebkit3d:Tn,msPointer:Gs,pointer:Vr,touch:K,touchNative:Oe,mobileOpera:te,mobileGecko:ae,retina:pe,passiveEvents:ke,canvas:ge,svg:ze,vml:Ve,inlineSvg:Ie,mac:Qe,linux:ot},Zt=ht.msPointer?"MSPointerDown":"pointerdown",an=ht.msPointer?"MSPointerMove":"pointermove",sn=ht.msPointer?"MSPointerUp":"pointerup",kn=ht.msPointer?"MSPointerCancel":"pointercancel",ir={touchstart:Zt,touchmove:an,touchend:sn,touchcancel:kn},hr={touchstart:To,touchmove:ur,touchend:ur,touchcancel:ur},lr={},vn=!1;function Nr(f,b,M){return b==="touchstart"&&Fn(),hr[b]?(M=hr[b].bind(this,M),f.addEventListener(ir[b],M,!1),M):(console.warn("wrong event specified:",b),y)}function Gr(f,b,M){if(!ir[b]){console.warn("wrong event specified:",b);return}f.removeEventListener(ir[b],M,!1)}function ji(f){lr[f.pointerId]=f}function bi(f){lr[f.pointerId]&&(lr[f.pointerId]=f)}function Yr(f){delete lr[f.pointerId]}function Fn(){vn||(document.addEventListener(Zt,ji,!0),document.addEventListener(an,bi,!0),document.addEventListener(sn,Yr,!0),document.addEventListener(kn,Yr,!0),vn=!0)}function ur(f,b){if(b.pointerType!==(b.MSPOINTER_TYPE_MOUSE||"mouse")){b.touches=[];for(var M in lr)b.touches.push(lr[M]);b.changedTouches=[b],f(b)}}function To(f,b){b.MSPOINTER_TYPE_TOUCH&&b.pointerType===b.MSPOINTER_TYPE_TOUCH&&uo(b),ur(f,b)}function or(f){var b={},M,V;for(V in f)M=f[V],b[V]=M&&M.bind?M.bind(f):M;return f=b,b.type="dblclick",b.detail=2,b.isTrusted=!1,b._simulated=!0,b}var cf=200;function hm(f,b){f.addEventListener("dblclick",b);var M=0,V;function re(me){if(me.detail!==1){V=me.detail;return}if(!(me.pointerType==="mouse"||me.sourceCapabilities&&!me.sourceCapabilities.firesTouchEvents)){var Ce=Xg(me);if(!(Ce.some(function(dt){return dt instanceof HTMLLabelElement&&dt.attributes.for})&&!Ce.some(function(dt){return dt instanceof HTMLInputElement||dt instanceof HTMLSelectElement}))){var We=Date.now();We-M<=cf?(V++,V===2&&b(or(me))):V=1,M=We}}}return f.addEventListener("click",re),{dblclick:b,simDblclick:re}}function ms(f,b){f.removeEventListener("dblclick",b.dblclick),f.removeEventListener("click",b.simDblclick)}var Co=yl(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),gl=yl(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),gs=gl==="webkitTransition"||gl==="OTransition"?gl+"End":"transitionend";function ys(f){return typeof f=="string"?document.getElementById(f):f}function $a(f,b){var M=f.style[b]||f.currentStyle&&f.currentStyle[b];if((!M||M==="auto")&&document.defaultView){var V=document.defaultView.getComputedStyle(f,null);M=V?V[b]:null}return M==="auto"?null:M}function sr(f,b,M){var V=document.createElement(f);return V.className=b||"",M&&M.appendChild(V),V}function Bn(f){var b=f.parentNode;b&&b.removeChild(f)}function ou(f){for(;f.firstChild;)f.removeChild(f.firstChild)}function _s(f){var b=f.parentNode;b&&b.lastChild!==f&&b.appendChild(f)}function Lr(f){var b=f.parentNode;b&&b.firstChild!==f&&b.insertBefore(f,b.firstChild)}function th(f,b){if(f.classList!==void 0)return f.classList.contains(b);var M=su(f);return M.length>0&&new RegExp("(^|\\s)"+b+"(\\s|$)").test(M)}function Cn(f,b){if(f.classList!==void 0)for(var M=A(b),V=0,re=M.length;V<re;V++)f.classList.add(M[V]);else if(!th(f,b)){var me=su(f);Hs(f,(me?me+" ":"")+b)}}function Jr(f,b){f.classList!==void 0?f.classList.remove(b):Hs(f,T((" "+su(f)+" ").replace(" "+b+" "," ")))}function Hs(f,b){f.className.baseVal===void 0?f.className=b:f.className.baseVal=b}function su(f){return f.correspondingElement&&(f=f.correspondingElement),f.className.baseVal===void 0?f.className:f.className.baseVal}function qn(f,b){"opacity"in f.style?f.style.opacity=b:"filter"in f.style&&Id(f,b)}function Id(f,b){var M=!1,V="DXImageTransform.Microsoft.Alpha";try{M=f.filters.item(V)}catch{if(b===1)return}b=Math.round(b*100),M?(M.Enabled=b!==100,M.Opacity=b):f.style.filter+=" progid:"+V+"(opacity="+b+")"}function yl(f){for(var b=document.documentElement.style,M=0;M<f.length;M++)if(f[M]in b)return f[M];return!1}function Wo(f,b,M){var V=b||new De(0,0);f.style[Co]=(ht.ie3d?"translate("+V.x+"px,"+V.y+"px)":"translate3d("+V.x+"px,"+V.y+"px,0)")+(M?" scale("+M+")":"")}function ii(f,b){f._leaflet_pos=b,ht.any3d?Wo(f,b):(f.style.left=b.x+"px",f.style.top=b.y+"px")}function ua(f){return f._leaflet_pos||new De(0,0)}var hf,nh,rh;if("onselectstart"in document)hf=function(){An(window,"selectstart",uo)},nh=function(){Xn(window,"selectstart",uo)};else{var ff=yl(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);hf=function(){if(ff){var f=document.documentElement.style;rh=f[ff],f[ff]="none"}},nh=function(){ff&&(document.documentElement.style[ff]=rh,rh=void 0)}}function Pd(){An(window,"dragstart",uo)}function fm(){Xn(window,"dragstart",uo)}var df,Ld;function ih(f){for(;f.tabIndex===-1;)f=f.parentNode;f.style&&(pf(),df=f,Ld=f.style.outlineStyle,f.style.outlineStyle="none",An(window,"keydown",pf))}function pf(){df&&(df.style.outlineStyle=Ld,df=void 0,Ld=void 0,Xn(window,"keydown",pf))}function dm(f){do f=f.parentNode;while((!f.offsetWidth||!f.offsetHeight)&&f!==document.body);return f}function oh(f){var b=f.getBoundingClientRect();return{x:b.width/f.offsetWidth||1,y:b.height/f.offsetHeight||1,boundingClientRect:b}}var Kg={__proto__:null,TRANSFORM:Co,TRANSITION:gl,TRANSITION_END:gs,get:ys,getStyle:$a,create:sr,remove:Bn,empty:ou,toFront:_s,toBack:Lr,hasClass:th,addClass:Cn,removeClass:Jr,setClass:Hs,getClass:su,setOpacity:qn,testProp:yl,setTransform:Wo,setPosition:ii,getPosition:ua,get disableTextSelection(){return hf},get enableTextSelection(){return nh},disableImageDrag:Pd,enableImageDrag:fm,preventOutline:ih,restoreOutline:pf,getSizedParentNode:dm,getScale:oh};function An(f,b,M,V){if(b&&typeof b=="object")for(var re in b)rc(f,re,b[re],M);else{b=A(b);for(var me=0,Ce=b.length;me<Ce;me++)rc(f,b[me],M,V)}return this}var vs="_leaflet_events";function Xn(f,b,M,V){if(arguments.length===1)sh(f),delete f[vs];else if(b&&typeof b=="object")for(var re in b)ic(f,re,b[re],M);else if(b=A(b),arguments.length===2)sh(f,function(We){return D(b,We)!==-1});else for(var me=0,Ce=b.length;me<Ce;me++)ic(f,b[me],M,V);return this}function sh(f,b){for(var M in f[vs]){var V=M.split(/\d/)[0];(!b||b(V))&&ic(f,V,null,null,M)}}var ah={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function rc(f,b,M,V){var re=b+p(M)+(V?"_"+p(V):"");if(f[vs]&&f[vs][re])return this;var me=function(We){return M.call(V||f,We||window.event)},Ce=me;!ht.touchNative&&ht.pointer&&b.indexOf("touch")===0?me=Nr(f,b,me):ht.touch&&b==="dblclick"?me=hm(f,me):"addEventListener"in f?b==="touchstart"||b==="touchmove"||b==="wheel"||b==="mousewheel"?f.addEventListener(ah[b]||b,me,ht.passiveEvents?{passive:!1}:!1):b==="mouseenter"||b==="mouseleave"?(me=function(We){We=We||window.event,Yi(f,We)&&Ce(We)},f.addEventListener(ah[b],me,!1)):f.addEventListener(b,Ce,!1):f.attachEvent("on"+b,me),f[vs]=f[vs]||{},f[vs][re]=me}function ic(f,b,M,V,re){re=re||b+p(M)+(V?"_"+p(V):"");var me=f[vs]&&f[vs][re];if(!me)return this;!ht.touchNative&&ht.pointer&&b.indexOf("touch")===0?Gr(f,b,me):ht.touch&&b==="dblclick"?ms(f,me):"removeEventListener"in f?f.removeEventListener(ah[b]||b,me,!1):f.detachEvent("on"+b,me),f[vs][re]=null}function ca(f){return f.stopPropagation?f.stopPropagation():f.originalEvent?f.originalEvent._stopped=!0:f.cancelBubble=!0,this}function oc(f){return rc(f,"wheel",ca),this}function mf(f){return An(f,"mousedown touchstart dblclick contextmenu",ca),f._leaflet_disable_click=!0,this}function uo(f){return f.preventDefault?f.preventDefault():f.returnValue=!1,this}function au(f){return uo(f),ca(f),this}function Xg(f){if(f.composedPath)return f.composedPath();for(var b=[],M=f.target;M;)b.push(M),M=M.parentNode;return b}function lu(f,b){if(!b)return new De(f.clientX,f.clientY);var M=oh(b),V=M.boundingClientRect;return new De((f.clientX-V.left)/M.x-b.clientLeft,(f.clientY-V.top)/M.y-b.clientTop)}var Ad=ht.linux&&ht.chrome?window.devicePixelRatio:ht.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Io(f){return ht.edge?f.wheelDeltaY/2:f.deltaY&&f.deltaMode===0?-f.deltaY/Ad:f.deltaY&&f.deltaMode===1?-f.deltaY*20:f.deltaY&&f.deltaMode===2?-f.deltaY*60:f.deltaX||f.deltaZ?0:f.wheelDelta?(f.wheelDeltaY||f.wheelDelta)/2:f.detail&&Math.abs(f.detail)<32765?-f.detail*20:f.detail?f.detail/-32765*60:0}function Yi(f,b){var M=b.relatedTarget;if(!M)return!0;try{for(;M&&M!==f;)M=M.parentNode}catch{return!1}return M!==f}var cr={__proto__:null,on:An,off:Xn,stopPropagation:ca,disableScrollPropagation:oc,disableClickPropagation:mf,preventDefault:uo,stop:au,getPropagationPath:Xg,getMousePosition:lu,getWheelDelta:Io,isExternalTarget:Yi,addListener:An,removeListener:Xn},gf=Be.extend({run:function(f,b,M,V){this.stop(),this._el=f,this._inProgress=!0,this._duration=M||.25,this._easeOutPower=1/Math.max(V||.5,.2),this._startPos=ua(f),this._offset=b.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=X(this._animate,this),this._step()},_step:function(f){var b=+new Date-this._startTime,M=this._duration*1e3;b<M?this._runFrame(this._easeOut(b/M),f):(this._runFrame(1),this._complete())},_runFrame:function(f,b){var M=this._startPos.add(this._offset.multiplyBy(f));b&&M._round(),ii(this._el,M),this.fire("step")},_complete:function(){ee(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(f){return 1-Math.pow(1-f,this._easeOutPower)}}),Yn=Be.extend({options:{crs:Ft,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(f,b){b=O(this,b),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(f),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),b.maxBounds&&this.setMaxBounds(b.maxBounds),b.zoom!==void 0&&(this._zoom=this._limitZoom(b.zoom)),b.center&&b.zoom!==void 0&&this.setView(be(b.center),b.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=gl&&ht.any3d&&!ht.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),An(this._proxy,gs,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(f,b,M){if(b=b===void 0?this._zoom:this._limitZoom(b),f=this._limitCenter(be(f),b,this.options.maxBounds),M=M||{},this._stop(),this._loaded&&!M.reset&&M!==!0){M.animate!==void 0&&(M.zoom=i({animate:M.animate},M.zoom),M.pan=i({animate:M.animate,duration:M.duration},M.pan));var V=this._zoom!==b?this._tryAnimatedZoom&&this._tryAnimatedZoom(f,b,M.zoom):this._tryAnimatedPan(f,M.pan);if(V)return clearTimeout(this._sizeTimer),this}return this._resetView(f,b,M.pan&&M.pan.noMoveStart),this},setZoom:function(f,b){return this._loaded?this.setView(this.getCenter(),f,{zoom:b}):(this._zoom=f,this)},zoomIn:function(f,b){return f=f||(ht.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+f,b)},zoomOut:function(f,b){return f=f||(ht.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-f,b)},setZoomAround:function(f,b,M){var V=this.getZoomScale(b),re=this.getSize().divideBy(2),me=f instanceof De?f:this.latLngToContainerPoint(f),Ce=me.subtract(re).multiplyBy(1-1/V),We=this.containerPointToLatLng(re.add(Ce));return this.setView(We,b,{zoom:M})},_getBoundsCenterZoom:function(f,b){b=b||{},f=f.getBounds?f.getBounds():Ge(f);var M=ve(b.paddingTopLeft||b.padding||[0,0]),V=ve(b.paddingBottomRight||b.padding||[0,0]),re=this.getBoundsZoom(f,!1,M.add(V));if(re=typeof b.maxZoom=="number"?Math.min(b.maxZoom,re):re,re===1/0)return{center:f.getCenter(),zoom:re};var me=V.subtract(M).divideBy(2),Ce=this.project(f.getSouthWest(),re),We=this.project(f.getNorthEast(),re),dt=this.unproject(Ce.add(We).divideBy(2).add(me),re);return{center:dt,zoom:re}},fitBounds:function(f,b){if(f=Ge(f),!f.isValid())throw new Error("Bounds are not valid.");var M=this._getBoundsCenterZoom(f,b);return this.setView(M.center,M.zoom,b)},fitWorld:function(f){return this.fitBounds([[-90,-180],[90,180]],f)},panTo:function(f,b){return this.setView(f,this._zoom,{pan:b})},panBy:function(f,b){if(f=ve(f).round(),b=b||{},!f.x&&!f.y)return this.fire("moveend");if(b.animate!==!0&&!this.getSize().contains(f))return this._resetView(this.unproject(this.project(this.getCenter()).add(f)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new gf,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),b.noMoveStart||this.fire("movestart"),b.animate!==!1){Cn(this._mapPane,"leaflet-pan-anim");var M=this._getMapPanePos().subtract(f).round();this._panAnim.run(this._mapPane,M,b.duration||.25,b.easeLinearity)}else this._rawPanBy(f),this.fire("move").fire("moveend");return this},flyTo:function(f,b,M){if(M=M||{},M.animate===!1||!ht.any3d)return this.setView(f,b,M);this._stop();var V=this.project(this.getCenter()),re=this.project(f),me=this.getSize(),Ce=this._zoom;f=be(f),b=b===void 0?Ce:b;var We=Math.max(me.x,me.y),dt=We*this.getZoomScale(Ce,b),It=re.distanceTo(V)||1,tn=1.42,hn=tn*tn;function Hn(Qr){var gc=Qr?-1:1,Lm=Qr?dt:We,Am=dt*dt-We*We+gc*hn*hn*It*It,bl=2*Lm*hn*It,bh=Am/bl,wh=Math.sqrt(bh*bh+1)-bh,Vd=wh<1e-9?-18:Math.log(wh);return Vd}function Hr(Qr){return(Math.exp(Qr)-Math.exp(-Qr))/2}function $i(Qr){return(Math.exp(Qr)+Math.exp(-Qr))/2}function Po(Qr){return Hr(Qr)/$i(Qr)}var tr=Hn(0);function $r(Qr){return We*($i(tr)/$i(tr+tn*Qr))}function iy(Qr){return We*($i(tr)*Po(tr+tn*Qr)-Hr(tr))/hn}function kf(Qr){return 1-Math.pow(1-Qr,1.5)}var xl=Date.now(),Ud=(Hn(1)-tr)/tn,Pm=M.duration?1e3*M.duration:1e3*Ud*.8;function qd(){var Qr=(Date.now()-xl)/Pm,gc=kf(Qr)*Ud;Qr<=1?(this._flyToFrame=X(qd,this),this._move(this.unproject(V.add(re.subtract(V).multiplyBy(iy(gc)/It)),Ce),this.getScaleZoom(We/$r(gc),Ce),{flyTo:!0})):this._move(f,b)._moveEnd(!0)}return this._moveStart(!0,M.noMoveStart),qd.call(this),this},flyToBounds:function(f,b){var M=this._getBoundsCenterZoom(f,b);return this.flyTo(M.center,M.zoom,b)},setMaxBounds:function(f){return f=Ge(f),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),f.isValid()?(this.options.maxBounds=f,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(f){var b=this.options.minZoom;return this.options.minZoom=f,this._loaded&&b!==f&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(f):this},setMaxZoom:function(f){var b=this.options.maxZoom;return this.options.maxZoom=f,this._loaded&&b!==f&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(f):this},panInsideBounds:function(f,b){this._enforcingBounds=!0;var M=this.getCenter(),V=this._limitCenter(M,this._zoom,Ge(f));return M.equals(V)||this.panTo(V,b),this._enforcingBounds=!1,this},panInside:function(f,b){b=b||{};var M=ve(b.paddingTopLeft||b.padding||[0,0]),V=ve(b.paddingBottomRight||b.padding||[0,0]),re=this.project(this.getCenter()),me=this.project(f),Ce=this.getPixelBounds(),We=xe([Ce.min.add(M),Ce.max.subtract(V)]),dt=We.getSize();if(!We.contains(me)){this._enforcingBounds=!0;var It=me.subtract(We.getCenter()),tn=We.extend(me).getSize().subtract(dt);re.x+=It.x<0?-tn.x:tn.x,re.y+=It.y<0?-tn.y:tn.y,this.panTo(this.unproject(re),b),this._enforcingBounds=!1}return this},invalidateSize:function(f){if(!this._loaded)return this;f=i({animate:!1,pan:!0},f===!0?{animate:!0}:f);var b=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var M=this.getSize(),V=b.divideBy(2).round(),re=M.divideBy(2).round(),me=V.subtract(re);return!me.x&&!me.y?this:(f.animate&&f.pan?this.panBy(me):(f.pan&&this._rawPanBy(me),this.fire("move"),f.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:b,newSize:M}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(f){if(f=this._locateOptions=i({timeout:1e4,watch:!1},f),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var b=u(this._handleGeolocationResponse,this),M=u(this._handleGeolocationError,this);return f.watch?this._locationWatchId=navigator.geolocation.watchPosition(b,M,f):navigator.geolocation.getCurrentPosition(b,M,f),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(f){if(this._container._leaflet_id){var b=f.code,M=f.message||(b===1?"permission denied":b===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:b,message:"Geolocation error: "+M+"."})}},_handleGeolocationResponse:function(f){if(this._container._leaflet_id){var b=f.coords.latitude,M=f.coords.longitude,V=new $e(b,M),re=V.toBounds(f.coords.accuracy*2),me=this._locateOptions;if(me.setView){var Ce=this.getBoundsZoom(re);this.setView(V,me.maxZoom?Math.min(Ce,me.maxZoom):Ce)}var We={latlng:V,bounds:re,timestamp:f.timestamp};for(var dt in f.coords)typeof f.coords[dt]=="number"&&(We[dt]=f.coords[dt]);this.fire("locationfound",We)}},addHandler:function(f,b){if(!b)return this;var M=this[f]=new b(this);return this._handlers.push(M),this.options[f]&&M.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Bn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(ee(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var f;for(f in this._layers)this._layers[f].remove();for(f in this._panes)Bn(this._panes[f]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(f,b){var M="leaflet-pane"+(f?" leaflet-"+f.replace("Pane","")+"-pane":""),V=sr("div",M,b||this._mapPane);return f&&(this._panes[f]=V),V},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var f=this.getPixelBounds(),b=this.unproject(f.getBottomLeft()),M=this.unproject(f.getTopRight());return new Ee(b,M)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(f,b,M){f=Ge(f),M=ve(M||[0,0]);var V=this.getZoom()||0,re=this.getMinZoom(),me=this.getMaxZoom(),Ce=f.getNorthWest(),We=f.getSouthEast(),dt=this.getSize().subtract(M),It=xe(this.project(We,V),this.project(Ce,V)).getSize(),tn=ht.any3d?this.options.zoomSnap:1,hn=dt.x/It.x,Hn=dt.y/It.y,Hr=b?Math.max(hn,Hn):Math.min(hn,Hn);return V=this.getScaleZoom(Hr,V),tn&&(V=Math.round(V/(tn/100))*(tn/100),V=b?Math.ceil(V/tn)*tn:Math.floor(V/tn)*tn),Math.max(re,Math.min(me,V))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new De(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(f,b){var M=this._getTopLeftPoint(f,b);return new ce(M,M.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(f){return this.options.crs.getProjectedBounds(f===void 0?this.getZoom():f)},getPane:function(f){return typeof f=="string"?this._panes[f]:f},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(f,b){var M=this.options.crs;return b=b===void 0?this._zoom:b,M.scale(f)/M.scale(b)},getScaleZoom:function(f,b){var M=this.options.crs;b=b===void 0?this._zoom:b;var V=M.zoom(f*M.scale(b));return isNaN(V)?1/0:V},project:function(f,b){return b=b===void 0?this._zoom:b,this.options.crs.latLngToPoint(be(f),b)},unproject:function(f,b){return b=b===void 0?this._zoom:b,this.options.crs.pointToLatLng(ve(f),b)},layerPointToLatLng:function(f){var b=ve(f).add(this.getPixelOrigin());return this.unproject(b)},latLngToLayerPoint:function(f){var b=this.project(be(f))._round();return b._subtract(this.getPixelOrigin())},wrapLatLng:function(f){return this.options.crs.wrapLatLng(be(f))},wrapLatLngBounds:function(f){return this.options.crs.wrapLatLngBounds(Ge(f))},distance:function(f,b){return this.options.crs.distance(be(f),be(b))},containerPointToLayerPoint:function(f){return ve(f).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(f){return ve(f).add(this._getMapPanePos())},containerPointToLatLng:function(f){var b=this.containerPointToLayerPoint(ve(f));return this.layerPointToLatLng(b)},latLngToContainerPoint:function(f){return this.layerPointToContainerPoint(this.latLngToLayerPoint(be(f)))},mouseEventToContainerPoint:function(f){return lu(f,this._container)},mouseEventToLayerPoint:function(f){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(f))},mouseEventToLatLng:function(f){return this.layerPointToLatLng(this.mouseEventToLayerPoint(f))},_initContainer:function(f){var b=this._container=ys(f);if(b){if(b._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");An(b,"scroll",this._onScroll,this),this._containerId=p(b)},_initLayout:function(){var f=this._container;this._fadeAnimated=this.options.fadeAnimation&&ht.any3d,Cn(f,"leaflet-container"+(ht.touch?" leaflet-touch":"")+(ht.retina?" leaflet-retina":"")+(ht.ielt9?" leaflet-oldie":"")+(ht.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var b=$a(f,"position");b!=="absolute"&&b!=="relative"&&b!=="fixed"&&b!=="sticky"&&(f.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var f=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ii(this._mapPane,new De(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Cn(f.markerPane,"leaflet-zoom-hide"),Cn(f.shadowPane,"leaflet-zoom-hide"))},_resetView:function(f,b,M){ii(this._mapPane,new De(0,0));var V=!this._loaded;this._loaded=!0,b=this._limitZoom(b),this.fire("viewprereset");var re=this._zoom!==b;this._moveStart(re,M)._move(f,b)._moveEnd(re),this.fire("viewreset"),V&&this.fire("load")},_moveStart:function(f,b){return f&&this.fire("zoomstart"),b||this.fire("movestart"),this},_move:function(f,b,M,V){b===void 0&&(b=this._zoom);var re=this._zoom!==b;return this._zoom=b,this._lastCenter=f,this._pixelOrigin=this._getNewPixelOrigin(f),V?M&&M.pinch&&this.fire("zoom",M):((re||M&&M.pinch)&&this.fire("zoom",M),this.fire("move",M)),this},_moveEnd:function(f){return f&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return ee(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(f){ii(this._mapPane,this._getMapPanePos().subtract(f))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(f){this._targets={},this._targets[p(this._container)]=this;var b=f?Xn:An;b(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&b(window,"resize",this._onResize,this),ht.any3d&&this.options.transform3DLimit&&(f?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){ee(this._resizeRequest),this._resizeRequest=X(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var f=this._getMapPanePos();Math.max(Math.abs(f.x),Math.abs(f.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(f,b){for(var M=[],V,re=b==="mouseout"||b==="mouseover",me=f.target||f.srcElement,Ce=!1;me;){if(V=this._targets[p(me)],V&&(b==="click"||b==="preclick")&&this._draggableMoved(V)){Ce=!0;break}if(V&&V.listens(b,!0)&&(re&&!Yi(me,f)||(M.push(V),re))||me===this._container)break;me=me.parentNode}return!M.length&&!Ce&&!re&&this.listens(b,!0)&&(M=[this]),M},_isClickDisabled:function(f){for(;f&&f!==this._container;){if(f._leaflet_disable_click)return!0;f=f.parentNode}},_handleDOMEvent:function(f){var b=f.target||f.srcElement;if(!(!this._loaded||b._leaflet_disable_events||f.type==="click"&&this._isClickDisabled(b))){var M=f.type;M==="mousedown"&&ih(b),this._fireDOMEvent(f,M)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(f,b,M){if(f.type==="click"){var V=i({},f);V.type="preclick",this._fireDOMEvent(V,V.type,M)}var re=this._findEventTargets(f,b);if(M){for(var me=[],Ce=0;Ce<M.length;Ce++)M[Ce].listens(b,!0)&&me.push(M[Ce]);re=me.concat(re)}if(re.length){b==="contextmenu"&&uo(f);var We=re[0],dt={originalEvent:f};if(f.type!=="keypress"&&f.type!=="keydown"&&f.type!=="keyup"){var It=We.getLatLng&&(!We._radius||We._radius<=10);dt.containerPoint=It?this.latLngToContainerPoint(We.getLatLng()):this.mouseEventToContainerPoint(f),dt.layerPoint=this.containerPointToLayerPoint(dt.containerPoint),dt.latlng=It?We.getLatLng():this.layerPointToLatLng(dt.layerPoint)}for(Ce=0;Ce<re.length;Ce++)if(re[Ce].fire(b,dt,!0),dt.originalEvent._stopped||re[Ce].options.bubblingMouseEvents===!1&&D(this._mouseEvents,b)!==-1)return}},_draggableMoved:function(f){return f=f.dragging&&f.dragging.enabled()?f:this,f.dragging&&f.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var f=0,b=this._handlers.length;f<b;f++)this._handlers[f].disable()},whenReady:function(f,b){return this._loaded?f.call(b||this,{target:this}):this.on("load",f,b),this},_getMapPanePos:function(){return ua(this._mapPane)||new De(0,0)},_moved:function(){var f=this._getMapPanePos();return f&&!f.equals([0,0])},_getTopLeftPoint:function(f,b){var M=f&&b!==void 0?this._getNewPixelOrigin(f,b):this.getPixelOrigin();return M.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(f,b){var M=this.getSize()._divideBy(2);return this.project(f,b)._subtract(M)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(f,b,M){var V=this._getNewPixelOrigin(M,b);return this.project(f,b)._subtract(V)},_latLngBoundsToNewLayerBounds:function(f,b,M){var V=this._getNewPixelOrigin(M,b);return xe([this.project(f.getSouthWest(),b)._subtract(V),this.project(f.getNorthWest(),b)._subtract(V),this.project(f.getSouthEast(),b)._subtract(V),this.project(f.getNorthEast(),b)._subtract(V)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(f){return this.latLngToLayerPoint(f).subtract(this._getCenterLayerPoint())},_limitCenter:function(f,b,M){if(!M)return f;var V=this.project(f,b),re=this.getSize().divideBy(2),me=new ce(V.subtract(re),V.add(re)),Ce=this._getBoundsOffset(me,M,b);return Math.abs(Ce.x)<=1&&Math.abs(Ce.y)<=1?f:this.unproject(V.add(Ce),b)},_limitOffset:function(f,b){if(!b)return f;var M=this.getPixelBounds(),V=new ce(M.min.add(f),M.max.add(f));return f.add(this._getBoundsOffset(V,b))},_getBoundsOffset:function(f,b,M){var V=xe(this.project(b.getNorthEast(),M),this.project(b.getSouthWest(),M)),re=V.min.subtract(f.min),me=V.max.subtract(f.max),Ce=this._rebound(re.x,-me.x),We=this._rebound(re.y,-me.y);return new De(Ce,We)},_rebound:function(f,b){return f+b>0?Math.round(f-b)/2:Math.max(0,Math.ceil(f))-Math.max(0,Math.floor(b))},_limitZoom:function(f){var b=this.getMinZoom(),M=this.getMaxZoom(),V=ht.any3d?this.options.zoomSnap:1;return V&&(f=Math.round(f/V)*V),Math.max(b,Math.min(M,f))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Jr(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(f,b){var M=this._getCenterOffset(f)._trunc();return(b&&b.animate)!==!0&&!this.getSize().contains(M)?!1:(this.panBy(M,b),!0)},_createAnimProxy:function(){var f=this._proxy=sr("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(f),this.on("zoomanim",function(b){var M=Co,V=this._proxy.style[M];Wo(this._proxy,this.project(b.center,b.zoom),this.getZoomScale(b.zoom,1)),V===this._proxy.style[M]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Bn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var f=this.getCenter(),b=this.getZoom();Wo(this._proxy,this.project(f,b),this.getZoomScale(b,1))},_catchTransitionEnd:function(f){this._animatingZoom&&f.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(f,b,M){if(this._animatingZoom)return!0;if(M=M||{},!this._zoomAnimated||M.animate===!1||this._nothingToAnimate()||Math.abs(b-this._zoom)>this.options.zoomAnimationThreshold)return!1;var V=this.getZoomScale(b),re=this._getCenterOffset(f)._divideBy(1-1/V);return M.animate!==!0&&!this.getSize().contains(re)?!1:(X(function(){this._moveStart(!0,M.noMoveStart||!1)._animateZoom(f,b,!0)},this),!0)},_animateZoom:function(f,b,M,V){this._mapPane&&(M&&(this._animatingZoom=!0,this._animateToCenter=f,this._animateToZoom=b,Cn(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:f,zoom:b,noUpdate:V}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Jr(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function pm(f,b){return new Yn(f,b)}var xs=oe.extend({options:{position:"topright"},initialize:function(f){O(this,f)},getPosition:function(){return this.options.position},setPosition:function(f){var b=this._map;return b&&b.removeControl(this),this.options.position=f,b&&b.addControl(this),this},getContainer:function(){return this._container},addTo:function(f){this.remove(),this._map=f;var b=this._container=this.onAdd(f),M=this.getPosition(),V=f._controlCorners[M];return Cn(b,"leaflet-control"),M.indexOf("bottom")!==-1?V.insertBefore(b,V.firstChild):V.appendChild(b),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Bn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(f){this._map&&f&&f.screenX>0&&f.screenY>0&&this._map.getContainer().focus()}}),uu=function(f){return new xs(f)};Yn.include({addControl:function(f){return f.addTo(this),this},removeControl:function(f){return f.remove(),this},_initControlPos:function(){var f=this._controlCorners={},b="leaflet-",M=this._controlContainer=sr("div",b+"control-container",this._container);function V(re,me){var Ce=b+re+" "+b+me;f[re+me]=sr("div",Ce,M)}V("top","left"),V("top","right"),V("bottom","left"),V("bottom","right")},_clearControlPos:function(){for(var f in this._controlCorners)Bn(this._controlCorners[f]);Bn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Od=xs.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(f,b,M,V){return M<V?-1:V<M?1:0}},initialize:function(f,b,M){O(this,M),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var V in f)this._addLayer(f[V],V);for(V in b)this._addLayer(b[V],V,!0)},onAdd:function(f){this._initLayout(),this._update(),this._map=f,f.on("zoomend",this._checkDisabledLayers,this);for(var b=0;b<this._layers.length;b++)this._layers[b].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(f){return xs.prototype.addTo.call(this,f),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var f=0;f<this._layers.length;f++)this._layers[f].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(f,b){return this._addLayer(f,b),this._map?this._update():this},addOverlay:function(f,b){return this._addLayer(f,b,!0),this._map?this._update():this},removeLayer:function(f){f.off("add remove",this._onLayerChange,this);var b=this._getLayer(p(f));return b&&this._layers.splice(this._layers.indexOf(b),1),this._map?this._update():this},expand:function(){Cn(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var f=this._map.getSize().y-(this._container.offsetTop+50);return f<this._section.clientHeight?(Cn(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=f+"px"):Jr(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Jr(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var f="leaflet-control-layers",b=this._container=sr("div",f),M=this.options.collapsed;b.setAttribute("aria-haspopup",!0),mf(b),oc(b);var V=this._section=sr("section",f+"-list");M&&(this._map.on("click",this.collapse,this),An(b,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var re=this._layersLink=sr("a",f+"-toggle",b);re.href="#",re.title="Layers",re.setAttribute("role","button"),An(re,{keydown:function(me){me.keyCode===13&&this._expandSafely()},click:function(me){uo(me),this._expandSafely()}},this),M||this.expand(),this._baseLayersList=sr("div",f+"-base",V),this._separator=sr("div",f+"-separator",V),this._overlaysList=sr("div",f+"-overlays",V),b.appendChild(V)},_getLayer:function(f){for(var b=0;b<this._layers.length;b++)if(this._layers[b]&&p(this._layers[b].layer)===f)return this._layers[b]},_addLayer:function(f,b,M){this._map&&f.on("add remove",this._onLayerChange,this),this._layers.push({layer:f,name:b,overlay:M}),this.options.sortLayers&&this._layers.sort(u(function(V,re){return this.options.sortFunction(V.layer,re.layer,V.name,re.name)},this)),this.options.autoZIndex&&f.setZIndex&&(this._lastZIndex++,f.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ou(this._baseLayersList),ou(this._overlaysList),this._layerControlInputs=[];var f,b,M,V,re=0;for(M=0;M<this._layers.length;M++)V=this._layers[M],this._addItem(V),b=b||V.overlay,f=f||!V.overlay,re+=V.overlay?0:1;return this.options.hideSingleBase&&(f=f&&re>1,this._baseLayersList.style.display=f?"":"none"),this._separator.style.display=b&&f?"":"none",this},_onLayerChange:function(f){this._handlingClick||this._update();var b=this._getLayer(p(f.target)),M=b.overlay?f.type==="add"?"overlayadd":"overlayremove":f.type==="add"?"baselayerchange":null;M&&this._map.fire(M,b)},_createRadioElement:function(f,b){var M='<input type="radio" class="leaflet-control-layers-selector" name="'+f+'"'+(b?' checked="checked"':"")+"/>",V=document.createElement("div");return V.innerHTML=M,V.firstChild},_addItem:function(f){var b=document.createElement("label"),M=this._map.hasLayer(f.layer),V;f.overlay?(V=document.createElement("input"),V.type="checkbox",V.className="leaflet-control-layers-selector",V.defaultChecked=M):V=this._createRadioElement("leaflet-base-layers_"+p(this),M),this._layerControlInputs.push(V),V.layerId=p(f.layer),An(V,"click",this._onInputClick,this);var re=document.createElement("span");re.innerHTML=" "+f.name;var me=document.createElement("span");b.appendChild(me),me.appendChild(V),me.appendChild(re);var Ce=f.overlay?this._overlaysList:this._baseLayersList;return Ce.appendChild(b),this._checkDisabledLayers(),b},_onInputClick:function(){if(!this._preventClick){var f=this._layerControlInputs,b,M,V=[],re=[];this._handlingClick=!0;for(var me=f.length-1;me>=0;me--)b=f[me],M=this._getLayer(b.layerId).layer,b.checked?V.push(M):b.checked||re.push(M);for(me=0;me<re.length;me++)this._map.hasLayer(re[me])&&this._map.removeLayer(re[me]);for(me=0;me<V.length;me++)this._map.hasLayer(V[me])||this._map.addLayer(V[me]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var f=this._layerControlInputs,b,M,V=this._map.getZoom(),re=f.length-1;re>=0;re--)b=f[re],M=this._getLayer(b.layerId).layer,b.disabled=M.options.minZoom!==void 0&&V<M.options.minZoom||M.options.maxZoom!==void 0&&V>M.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var f=this._section;this._preventClick=!0,An(f,"click",uo),this.expand();var b=this;setTimeout(function(){Xn(f,"click",uo),b._preventClick=!1})}}),mm=function(f,b,M){return new Od(f,b,M)},lh=xs.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(f){var b="leaflet-control-zoom",M=sr("div",b+" leaflet-bar"),V=this.options;return this._zoomInButton=this._createButton(V.zoomInText,V.zoomInTitle,b+"-in",M,this._zoomIn),this._zoomOutButton=this._createButton(V.zoomOutText,V.zoomOutTitle,b+"-out",M,this._zoomOut),this._updateDisabled(),f.on("zoomend zoomlevelschange",this._updateDisabled,this),M},onRemove:function(f){f.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(f){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(f.shiftKey?3:1))},_zoomOut:function(f){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(f.shiftKey?3:1))},_createButton:function(f,b,M,V,re){var me=sr("a",M,V);return me.innerHTML=f,me.href="#",me.title=b,me.setAttribute("role","button"),me.setAttribute("aria-label",b),mf(me),An(me,"click",au),An(me,"click",re,this),An(me,"click",this._refocusOnMap,this),me},_updateDisabled:function(){var f=this._map,b="leaflet-disabled";Jr(this._zoomInButton,b),Jr(this._zoomOutButton,b),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||f._zoom===f.getMinZoom())&&(Cn(this._zoomOutButton,b),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||f._zoom===f.getMaxZoom())&&(Cn(this._zoomInButton,b),this._zoomInButton.setAttribute("aria-disabled","true"))}});Yn.mergeOptions({zoomControl:!0}),Yn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new lh,this.addControl(this.zoomControl))});var Yg=function(f){return new lh(f)},gm=xs.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(f){var b="leaflet-control-scale",M=sr("div",b),V=this.options;return this._addScales(V,b+"-line",M),f.on(V.updateWhenIdle?"moveend":"move",this._update,this),f.whenReady(this._update,this),M},onRemove:function(f){f.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(f,b,M){f.metric&&(this._mScale=sr("div",b,M)),f.imperial&&(this._iScale=sr("div",b,M))},_update:function(){var f=this._map,b=f.getSize().y/2,M=f.distance(f.containerPointToLatLng([0,b]),f.containerPointToLatLng([this.options.maxWidth,b]));this._updateScales(M)},_updateScales:function(f){this.options.metric&&f&&this._updateMetric(f),this.options.imperial&&f&&this._updateImperial(f)},_updateMetric:function(f){var b=this._getRoundNum(f),M=b<1e3?b+" m":b/1e3+" km";this._updateScale(this._mScale,M,b/f)},_updateImperial:function(f){var b=f*3.2808399,M,V,re;b>5280?(M=b/5280,V=this._getRoundNum(M),this._updateScale(this._iScale,V+" mi",V/M)):(re=this._getRoundNum(b),this._updateScale(this._iScale,re+" ft",re/b))},_updateScale:function(f,b,M){f.style.width=Math.round(this.options.maxWidth*M)+"px",f.innerHTML=b},_getRoundNum:function(f){var b=Math.pow(10,(Math.floor(f)+"").length-1),M=f/b;return M=M>=10?10:M>=5?5:M>=3?3:M>=2?2:1,b*M}}),uh=function(f){return new gm(f)},vv='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ym=xs.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ht.inlineSvg?vv+" ":"")+"Leaflet</a>"},initialize:function(f){O(this,f),this._attributions={}},onAdd:function(f){f.attributionControl=this,this._container=sr("div","leaflet-control-attribution"),mf(this._container);for(var b in f._layers)f._layers[b].getAttribution&&this.addAttribution(f._layers[b].getAttribution());return this._update(),f.on("layeradd",this._addAttribution,this),this._container},onRemove:function(f){f.off("layeradd",this._addAttribution,this)},_addAttribution:function(f){f.layer.getAttribution&&(this.addAttribution(f.layer.getAttribution()),f.layer.once("remove",function(){this.removeAttribution(f.layer.getAttribution())},this))},setPrefix:function(f){return this.options.prefix=f,this._update(),this},addAttribution:function(f){return f?(this._attributions[f]||(this._attributions[f]=0),this._attributions[f]++,this._update(),this):this},removeAttribution:function(f){return f?(this._attributions[f]&&(this._attributions[f]--,this._update()),this):this},_update:function(){if(this._map){var f=[];for(var b in this._attributions)this._attributions[b]&&f.push(b);var M=[];this.options.prefix&&M.push(this.options.prefix),f.length&&M.push(f.join(", ")),this._container.innerHTML=M.join(' <span aria-hidden="true">|</span> ')}}});Yn.mergeOptions({attributionControl:!0}),Yn.addInitHook(function(){this.options.attributionControl&&new ym().addTo(this)});var xv=function(f){return new ym(f)};xs.Layers=Od,xs.Zoom=lh,xs.Scale=gm,xs.Attribution=ym,uu.layers=mm,uu.zoom=Yg,uu.scale=uh,uu.attribution=xv;var Ua=oe.extend({initialize:function(f){this._map=f},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ua.addTo=function(f,b){return f.addHandler(b,this),this};var bv={Events:Ne},Jg=ht.touch?"touchstart mousedown":"mousedown",qa=Be.extend({options:{clickTolerance:3},initialize:function(f,b,M,V){O(this,V),this._element=f,this._dragStartTarget=b||f,this._preventOutline=M},enable:function(){this._enabled||(An(this._dragStartTarget,Jg,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(qa._dragging===this&&this.finishDrag(!0),Xn(this._dragStartTarget,Jg,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(f){if(this._enabled&&(this._moved=!1,!th(this._element,"leaflet-zoom-anim"))){if(f.touches&&f.touches.length!==1){qa._dragging===this&&this.finishDrag();return}if(!(qa._dragging||f.shiftKey||f.which!==1&&f.button!==1&&!f.touches)&&(qa._dragging=this,this._preventOutline&&ih(this._element),Pd(),hf(),!this._moving)){this.fire("down");var b=f.touches?f.touches[0]:f,M=dm(this._element);this._startPoint=new De(b.clientX,b.clientY),this._startPos=ua(this._element),this._parentScale=oh(M);var V=f.type==="mousedown";An(document,V?"mousemove":"touchmove",this._onMove,this),An(document,V?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(f){if(this._enabled){if(f.touches&&f.touches.length>1){this._moved=!0;return}var b=f.touches&&f.touches.length===1?f.touches[0]:f,M=new De(b.clientX,b.clientY)._subtract(this._startPoint);!M.x&&!M.y||Math.abs(M.x)+Math.abs(M.y)<this.options.clickTolerance||(M.x/=this._parentScale.x,M.y/=this._parentScale.y,uo(f),this._moved||(this.fire("dragstart"),this._moved=!0,Cn(document.body,"leaflet-dragging"),this._lastTarget=f.target||f.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Cn(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(M),this._moving=!0,this._lastEvent=f,this._updatePosition())}},_updatePosition:function(){var f={originalEvent:this._lastEvent};this.fire("predrag",f),ii(this._element,this._newPos),this.fire("drag",f)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(f){Jr(document.body,"leaflet-dragging"),this._lastTarget&&(Jr(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Xn(document,"mousemove touchmove",this._onMove,this),Xn(document,"mouseup touchend touchcancel",this._onUp,this),fm(),nh();var b=this._moved&&this._moving;this._moving=!1,qa._dragging=!1,b&&this.fire("dragend",{noInertia:f,distance:this._newPos.distanceTo(this._startPos)})}});function yf(f,b,M){var V,re=[1,4,2,8],me,Ce,We,dt,It,tn,hn,Hn;for(me=0,tn=f.length;me<tn;me++)f[me]._code=jn(f[me],b);for(We=0;We<4;We++){for(hn=re[We],V=[],me=0,tn=f.length,Ce=tn-1;me<tn;Ce=me++)dt=f[me],It=f[Ce],dt._code&hn?It._code&hn||(Hn=fh(It,dt,hn,b,M),Hn._code=jn(Hn,b),V.push(Hn)):(It._code&hn&&(Hn=fh(It,dt,hn,b,M),Hn._code=jn(Hn,b),V.push(Hn)),V.push(dt));f=V}return f}function kd(f,b){var M,V,re,me,Ce,We,dt,It,tn;if(!f||f.length===0)throw new Error("latlngs not passed");bs(f)||(console.warn("latlngs are not flat! Only the first ring will be used"),f=f[0]);var hn=be([0,0]),Hn=Ge(f),Hr=Hn.getNorthWest().distanceTo(Hn.getSouthWest())*Hn.getNorthEast().distanceTo(Hn.getNorthWest());Hr<1700&&(hn=_f(f));var $i=f.length,Po=[];for(M=0;M<$i;M++){var tr=be(f[M]);Po.push(b.project(be([tr.lat-hn.lat,tr.lng-hn.lng])))}for(We=dt=It=0,M=0,V=$i-1;M<$i;V=M++)re=Po[M],me=Po[V],Ce=re.y*me.x-me.y*re.x,dt+=(re.x+me.x)*Ce,It+=(re.y+me.y)*Ce,We+=Ce*3;We===0?tn=Po[0]:tn=[dt/We,It/We];var $r=b.unproject(ve(tn));return be([$r.lat+hn.lat,$r.lng+hn.lng])}function _f(f){for(var b=0,M=0,V=0,re=0;re<f.length;re++){var me=be(f[re]);b+=me.lat,M+=me.lng,V++}return be([b/V,M/V])}var ch={__proto__:null,clipPolygon:yf,polygonCenter:kd,centroid:_f};function _m(f,b){if(!b||!f.length)return f.slice();var M=b*b;return f=hh(f,M),f=sc(f,M),f}function vm(f,b,M){return Math.sqrt(vf(f,b,M,!0))}function xm(f,b,M){return vf(f,b,M)}function sc(f,b){var M=f.length,V=typeof Uint8Array<"u"?Uint8Array:Array,re=new V(M);re[0]=re[M-1]=1,Rd(f,re,b,0,M-1);var me,Ce=[];for(me=0;me<M;me++)re[me]&&Ce.push(f[me]);return Ce}function Rd(f,b,M,V,re){var me=0,Ce,We,dt;for(We=V+1;We<=re-1;We++)dt=vf(f[We],f[V],f[re],!0),dt>me&&(Ce=We,me=dt);me>M&&(b[Ce]=1,Rd(f,b,M,V,Ce),Rd(f,b,M,Ce,re))}function hh(f,b){for(var M=[f[0]],V=1,re=0,me=f.length;V<me;V++)Md(f[V],f[re])>b&&(M.push(f[V]),re=V);return re<me-1&&M.push(f[me-1]),M}var ac;function bm(f,b,M,V,re){var me=V?ac:jn(f,M),Ce=jn(b,M),We,dt,It;for(ac=Ce;;){if(!(me|Ce))return[f,b];if(me&Ce)return!1;We=me||Ce,dt=fh(f,b,We,M,re),It=jn(dt,M),We===me?(f=dt,me=It):(b=dt,Ce=It)}}function fh(f,b,M,V,re){var me=b.x-f.x,Ce=b.y-f.y,We=V.min,dt=V.max,It,tn;return M&8?(It=f.x+me*(dt.y-f.y)/Ce,tn=dt.y):M&4?(It=f.x+me*(We.y-f.y)/Ce,tn=We.y):M&2?(It=dt.x,tn=f.y+Ce*(dt.x-f.x)/me):M&1&&(It=We.x,tn=f.y+Ce*(We.x-f.x)/me),new De(It,tn,re)}function jn(f,b){var M=0;return f.x<b.min.x?M|=1:f.x>b.max.x&&(M|=2),f.y<b.min.y?M|=4:f.y>b.max.y&&(M|=8),M}function Md(f,b){var M=b.x-f.x,V=b.y-f.y;return M*M+V*V}function vf(f,b,M,V){var re=b.x,me=b.y,Ce=M.x-re,We=M.y-me,dt=Ce*Ce+We*We,It;return dt>0&&(It=((f.x-re)*Ce+(f.y-me)*We)/dt,It>1?(re=M.x,me=M.y):It>0&&(re+=Ce*It,me+=We*It)),Ce=f.x-re,We=f.y-me,V?Ce*Ce+We*We:new De(re,me)}function bs(f){return!z(f[0])||typeof f[0][0]!="object"&&typeof f[0][0]<"u"}function dh(f){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),bs(f)}function hi(f,b){var M,V,re,me,Ce,We,dt,It;if(!f||f.length===0)throw new Error("latlngs not passed");bs(f)||(console.warn("latlngs are not flat! Only the first ring will be used"),f=f[0]);var tn=be([0,0]),hn=Ge(f),Hn=hn.getNorthWest().distanceTo(hn.getSouthWest())*hn.getNorthEast().distanceTo(hn.getNorthWest());Hn<1700&&(tn=_f(f));var Hr=f.length,$i=[];for(M=0;M<Hr;M++){var Po=be(f[M]);$i.push(b.project(be([Po.lat-tn.lat,Po.lng-tn.lng])))}for(M=0,V=0;M<Hr-1;M++)V+=$i[M].distanceTo($i[M+1])/2;if(V===0)It=$i[0];else for(M=0,me=0;M<Hr-1;M++)if(Ce=$i[M],We=$i[M+1],re=Ce.distanceTo(We),me+=re,me>V){dt=(me-V)/re,It=[We.x-dt*(We.x-Ce.x),We.y-dt*(We.y-Ce.y)];break}var tr=b.unproject(ve(It));return be([tr.lat+tn.lat,tr.lng+tn.lng])}var wv={__proto__:null,simplify:_m,pointToSegmentDistance:vm,closestPointOnSegment:xm,clipSegment:bm,_getEdgeIntersection:fh,_getBitCode:jn,_sqClosestPointOnSegment:vf,isFlat:bs,_flat:dh,polylineCenter:hi},Gn={project:function(f){return new De(f.lng,f.lat)},unproject:function(f){return new $e(f.y,f.x)},bounds:new ce([-180,-90],[180,90])},xf={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ce([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(f){var b=Math.PI/180,M=this.R,V=f.lat*b,re=this.R_MINOR/M,me=Math.sqrt(1-re*re),Ce=me*Math.sin(V),We=Math.tan(Math.PI/4-V/2)/Math.pow((1-Ce)/(1+Ce),me/2);return V=-M*Math.log(Math.max(We,1e-10)),new De(f.lng*b*M,V)},unproject:function(f){for(var b=180/Math.PI,M=this.R,V=this.R_MINOR/M,re=Math.sqrt(1-V*V),me=Math.exp(-f.y/M),Ce=Math.PI/2-2*Math.atan(me),We=0,dt=.1,It;We<15&&Math.abs(dt)>1e-7;We++)It=re*Math.sin(Ce),It=Math.pow((1-It)/(1+It),re/2),dt=Math.PI/2-2*Math.atan(me*It)-Ce,Ce+=dt;return new $e(Ce*b,f.x*b/M)}},Br={__proto__:null,LonLat:Gn,Mercator:xf,SphericalMercator:xt},kr=i({},it,{code:"EPSG:3395",projection:xf,transformation:function(){var f=.5/(Math.PI*xf.R);return Qt(f,.5,-f,.5)}()}),cu=i({},it,{code:"EPSG:4326",projection:Gn,transformation:Qt(1/180,1,-1/180,.5)}),Nd=i({},He,{projection:Gn,transformation:Qt(1,0,-1,0),scale:function(f){return Math.pow(2,f)},zoom:function(f){return Math.log(f)/Math.LN2},distance:function(f,b){var M=b.lng-f.lng,V=b.lat-f.lat;return Math.sqrt(M*M+V*V)},infinite:!0});He.Earth=it,He.EPSG3395=kr,He.EPSG3857=Ft,He.EPSG900913=Kt,He.EPSG4326=cu,He.Simple=Nd;var ws=Be.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(f){return f.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(f){return f&&f.removeLayer(this),this},getPane:function(f){return this._map.getPane(f?this.options[f]||f:this.options.pane)},addInteractiveTarget:function(f){return this._map._targets[p(f)]=this,this},removeInteractiveTarget:function(f){return delete this._map._targets[p(f)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(f){var b=f.target;if(b.hasLayer(this)){if(this._map=b,this._zoomAnimated=b._zoomAnimated,this.getEvents){var M=this.getEvents();b.on(M,this),this.once("remove",function(){b.off(M,this)},this)}this.onAdd(b),this.fire("add"),b.fire("layeradd",{layer:this})}}});Yn.include({addLayer:function(f){if(!f._layerAdd)throw new Error("The provided object is not a Layer.");var b=p(f);return this._layers[b]?this:(this._layers[b]=f,f._mapToAdd=this,f.beforeAdd&&f.beforeAdd(this),this.whenReady(f._layerAdd,f),this)},removeLayer:function(f){var b=p(f);return this._layers[b]?(this._loaded&&f.onRemove(this),delete this._layers[b],this._loaded&&(this.fire("layerremove",{layer:f}),f.fire("remove")),f._map=f._mapToAdd=null,this):this},hasLayer:function(f){return p(f)in this._layers},eachLayer:function(f,b){for(var M in this._layers)f.call(b,this._layers[M]);return this},_addLayers:function(f){f=f?z(f)?f:[f]:[];for(var b=0,M=f.length;b<M;b++)this.addLayer(f[b])},_addZoomLimit:function(f){(!isNaN(f.options.maxZoom)||!isNaN(f.options.minZoom))&&(this._zoomBoundLayers[p(f)]=f,this._updateZoomLevels())},_removeZoomLimit:function(f){var b=p(f);this._zoomBoundLayers[b]&&(delete this._zoomBoundLayers[b],this._updateZoomLevels())},_updateZoomLevels:function(){var f=1/0,b=-1/0,M=this._getZoomSpan();for(var V in this._zoomBoundLayers){var re=this._zoomBoundLayers[V].options;f=re.minZoom===void 0?f:Math.min(f,re.minZoom),b=re.maxZoom===void 0?b:Math.max(b,re.maxZoom)}this._layersMaxZoom=b===-1/0?void 0:b,this._layersMinZoom=f===1/0?void 0:f,M!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var lc=ws.extend({initialize:function(f,b){O(this,b),this._layers={};var M,V;if(f)for(M=0,V=f.length;M<V;M++)this.addLayer(f[M])},addLayer:function(f){var b=this.getLayerId(f);return this._layers[b]=f,this._map&&this._map.addLayer(f),this},removeLayer:function(f){var b=f in this._layers?f:this.getLayerId(f);return this._map&&this._layers[b]&&this._map.removeLayer(this._layers[b]),delete this._layers[b],this},hasLayer:function(f){var b=typeof f=="number"?f:this.getLayerId(f);return b in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(f){var b=Array.prototype.slice.call(arguments,1),M,V;for(M in this._layers)V=this._layers[M],V[f]&&V[f].apply(V,b);return this},onAdd:function(f){this.eachLayer(f.addLayer,f)},onRemove:function(f){this.eachLayer(f.removeLayer,f)},eachLayer:function(f,b){for(var M in this._layers)f.call(b,this._layers[M]);return this},getLayer:function(f){return this._layers[f]},getLayers:function(){var f=[];return this.eachLayer(f.push,f),f},setZIndex:function(f){return this.invoke("setZIndex",f)},getLayerId:function(f){return p(f)}}),Dd=function(f,b){return new lc(f,b)},Zs=lc.extend({addLayer:function(f){return this.hasLayer(f)?this:(f.addEventParent(this),lc.prototype.addLayer.call(this,f),this.fire("layeradd",{layer:f}))},removeLayer:function(f){return this.hasLayer(f)?(f in this._layers&&(f=this._layers[f]),f.removeEventParent(this),lc.prototype.removeLayer.call(this,f),this.fire("layerremove",{layer:f})):this},setStyle:function(f){return this.invoke("setStyle",f)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var f=new Ee;for(var b in this._layers){var M=this._layers[b];f.extend(M.getBounds?M.getBounds():M.getLatLng())}return f}}),zd=function(f,b){return new Zs(f,b)},uc=oe.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(f){O(this,f)},createIcon:function(f){return this._createIcon("icon",f)},createShadow:function(f){return this._createIcon("shadow",f)},_createIcon:function(f,b){var M=this._getIconUrl(f);if(!M){if(f==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var V=this._createImg(M,b&&b.tagName==="IMG"?b:null);return this._setIconStyles(V,f),(this.options.crossOrigin||this.options.crossOrigin==="")&&(V.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),V},_setIconStyles:function(f,b){var M=this.options,V=M[b+"Size"];typeof V=="number"&&(V=[V,V]);var re=ve(V),me=ve(b==="shadow"&&M.shadowAnchor||M.iconAnchor||re&&re.divideBy(2,!0));f.className="leaflet-marker-"+b+" "+(M.className||""),me&&(f.style.marginLeft=-me.x+"px",f.style.marginTop=-me.y+"px"),re&&(f.style.width=re.x+"px",f.style.height=re.y+"px")},_createImg:function(f,b){return b=b||document.createElement("img"),b.src=f,b},_getIconUrl:function(f){return ht.retina&&this.options[f+"RetinaUrl"]||this.options[f+"Url"]}});function Fd(f){return new uc(f)}var ph=uc.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(f){return typeof ph.imagePath!="string"&&(ph.imagePath=this._detectIconPath()),(this.options.imagePath||ph.imagePath)+uc.prototype._getIconUrl.call(this,f)},_stripUrl:function(f){var b=function(M,V,re){var me=V.exec(M);return me&&me[re]};return f=b(f,/^url\((['"])?(.+)\1\)$/,2),f&&b(f,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var f=sr("div","leaflet-default-icon-path",document.body),b=$a(f,"background-image")||$a(f,"backgroundImage");if(document.body.removeChild(f),b=this._stripUrl(b),b)return b;var M=document.querySelector('link[href$="leaflet.css"]');return M?M.href.substring(0,M.href.length-11-1):""}}),bf=Ua.extend({initialize:function(f){this._marker=f},addHooks:function(){var f=this._marker._icon;this._draggable||(this._draggable=new qa(f,f,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Cn(f,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Jr(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(f){var b=this._marker,M=b._map,V=this._marker.options.autoPanSpeed,re=this._marker.options.autoPanPadding,me=ua(b._icon),Ce=M.getPixelBounds(),We=M.getPixelOrigin(),dt=xe(Ce.min._subtract(We).add(re),Ce.max._subtract(We).subtract(re));if(!dt.contains(me)){var It=ve((Math.max(dt.max.x,me.x)-dt.max.x)/(Ce.max.x-dt.max.x)-(Math.min(dt.min.x,me.x)-dt.min.x)/(Ce.min.x-dt.min.x),(Math.max(dt.max.y,me.y)-dt.max.y)/(Ce.max.y-dt.max.y)-(Math.min(dt.min.y,me.y)-dt.min.y)/(Ce.min.y-dt.min.y)).multiplyBy(V);M.panBy(It,{animate:!1}),this._draggable._newPos._add(It),this._draggable._startPos._add(It),ii(b._icon,this._draggable._newPos),this._onDrag(f),this._panRequest=X(this._adjustPan.bind(this,f))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(f){this._marker.options.autoPan&&(ee(this._panRequest),this._panRequest=X(this._adjustPan.bind(this,f)))},_onDrag:function(f){var b=this._marker,M=b._shadow,V=ua(b._icon),re=b._map.layerPointToLatLng(V);M&&ii(M,V),b._latlng=re,f.latlng=re,f.oldLatLng=this._oldLatLng,b.fire("move",f).fire("drag",f)},_onDragEnd:function(f){ee(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",f)}}),cc=ws.extend({options:{icon:new ph,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(f,b){O(this,b),this._latlng=be(f)},onAdd:function(f){this._zoomAnimated=this._zoomAnimated&&f.options.markerZoomAnimation,this._zoomAnimated&&f.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(f){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&f.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(f){var b=this._latlng;return this._latlng=be(f),this.update(),this.fire("move",{oldLatLng:b,latlng:this._latlng})},setZIndexOffset:function(f){return this.options.zIndexOffset=f,this.update()},getIcon:function(){return this.options.icon},setIcon:function(f){return this.options.icon=f,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var f=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(f)}return this},_initIcon:function(){var f=this.options,b="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),M=f.icon.createIcon(this._icon),V=!1;M!==this._icon&&(this._icon&&this._removeIcon(),V=!0,f.title&&(M.title=f.title),M.tagName==="IMG"&&(M.alt=f.alt||"")),Cn(M,b),f.keyboard&&(M.tabIndex="0",M.setAttribute("role","button")),this._icon=M,f.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&An(M,"focus",this._panOnFocus,this);var re=f.icon.createShadow(this._shadow),me=!1;re!==this._shadow&&(this._removeShadow(),me=!0),re&&(Cn(re,b),re.alt=""),this._shadow=re,f.opacity<1&&this._updateOpacity(),V&&this.getPane().appendChild(this._icon),this._initInteraction(),re&&me&&this.getPane(f.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Xn(this._icon,"focus",this._panOnFocus,this),Bn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Bn(this._shadow),this._shadow=null},_setPos:function(f){this._icon&&ii(this._icon,f),this._shadow&&ii(this._shadow,f),this._zIndex=f.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(f){this._icon&&(this._icon.style.zIndex=this._zIndex+f)},_animateZoom:function(f){var b=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center).round();this._setPos(b)},_initInteraction:function(){if(this.options.interactive&&(Cn(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),bf)){var f=this.options.draggable;this.dragging&&(f=this.dragging.enabled(),this.dragging.disable()),this.dragging=new bf(this),f&&this.dragging.enable()}},setOpacity:function(f){return this.options.opacity=f,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var f=this.options.opacity;this._icon&&qn(this._icon,f),this._shadow&&qn(this._shadow,f)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var f=this._map;if(f){var b=this.options.icon.options,M=b.iconSize?ve(b.iconSize):ve(0,0),V=b.iconAnchor?ve(b.iconAnchor):ve(0,0);f.panInside(this._latlng,{paddingTopLeft:V,paddingBottomRight:M.subtract(V)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function wm(f,b){return new cc(f,b)}var _l=ws.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(f){this._renderer=f.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(f){return O(this,f),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&f&&Object.prototype.hasOwnProperty.call(f,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),wf=_l.extend({options:{fill:!0,radius:10},initialize:function(f,b){O(this,b),this._latlng=be(f),this._radius=this.options.radius},setLatLng:function(f){var b=this._latlng;return this._latlng=be(f),this.redraw(),this.fire("move",{oldLatLng:b,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(f){return this.options.radius=this._radius=f,this.redraw()},getRadius:function(){return this._radius},setStyle:function(f){var b=f&&f.radius||this._radius;return _l.prototype.setStyle.call(this,f),this.setRadius(b),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var f=this._radius,b=this._radiusY||f,M=this._clickTolerance(),V=[f+M,b+M];this._pxBounds=new ce(this._point.subtract(V),this._point.add(V))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(f){return f.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Bd(f,b){return new wf(f,b)}var Ef=wf.extend({initialize:function(f,b,M){if(typeof b=="number"&&(b=i({},M,{radius:b})),O(this,b),this._latlng=be(f),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(f){return this._mRadius=f,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var f=[this._radius,this._radiusY||this._radius];return new Ee(this._map.layerPointToLatLng(this._point.subtract(f)),this._map.layerPointToLatLng(this._point.add(f)))},setStyle:_l.prototype.setStyle,_project:function(){var f=this._latlng.lng,b=this._latlng.lat,M=this._map,V=M.options.crs;if(V.distance===it.distance){var re=Math.PI/180,me=this._mRadius/it.R/re,Ce=M.project([b+me,f]),We=M.project([b-me,f]),dt=Ce.add(We).divideBy(2),It=M.unproject(dt).lat,tn=Math.acos((Math.cos(me*re)-Math.sin(b*re)*Math.sin(It*re))/(Math.cos(b*re)*Math.cos(It*re)))/re;(isNaN(tn)||tn===0)&&(tn=me/Math.cos(Math.PI/180*b)),this._point=dt.subtract(M.getPixelOrigin()),this._radius=isNaN(tn)?0:dt.x-M.project([It,f-tn]).x,this._radiusY=dt.y-Ce.y}else{var hn=V.unproject(V.project(this._latlng).subtract([this._mRadius,0]));this._point=M.latLngToLayerPoint(this._latlng),this._radius=this._point.x-M.latLngToLayerPoint(hn).x}this._updateBounds()}});function Ev(f,b,M){return new Ef(f,b,M)}var Va=_l.extend({options:{smoothFactor:1,noClip:!1},initialize:function(f,b){O(this,b),this._setLatLngs(f)},getLatLngs:function(){return this._latlngs},setLatLngs:function(f){return this._setLatLngs(f),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(f){for(var b=1/0,M=null,V=vf,re,me,Ce=0,We=this._parts.length;Ce<We;Ce++)for(var dt=this._parts[Ce],It=1,tn=dt.length;It<tn;It++){re=dt[It-1],me=dt[It];var hn=V(f,re,me,!0);hn<b&&(b=hn,M=V(f,re,me))}return M&&(M.distance=Math.sqrt(b)),M},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return hi(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(f,b){return b=b||this._defaultShape(),f=be(f),b.push(f),this._bounds.extend(f),this.redraw()},_setLatLngs:function(f){this._bounds=new Ee,this._latlngs=this._convertLatLngs(f)},_defaultShape:function(){return bs(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(f){for(var b=[],M=bs(f),V=0,re=f.length;V<re;V++)M?(b[V]=be(f[V]),this._bounds.extend(b[V])):b[V]=this._convertLatLngs(f[V]);return b},_project:function(){var f=new ce;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,f),this._bounds.isValid()&&f.isValid()&&(this._rawPxBounds=f,this._updateBounds())},_updateBounds:function(){var f=this._clickTolerance(),b=new De(f,f);this._rawPxBounds&&(this._pxBounds=new ce([this._rawPxBounds.min.subtract(b),this._rawPxBounds.max.add(b)]))},_projectLatlngs:function(f,b,M){var V=f[0]instanceof $e,re=f.length,me,Ce;if(V){for(Ce=[],me=0;me<re;me++)Ce[me]=this._map.latLngToLayerPoint(f[me]),M.extend(Ce[me]);b.push(Ce)}else for(me=0;me<re;me++)this._projectLatlngs(f[me],b,M)},_clipPoints:function(){var f=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(f))){if(this.options.noClip){this._parts=this._rings;return}var b=this._parts,M,V,re,me,Ce,We,dt;for(M=0,re=0,me=this._rings.length;M<me;M++)for(dt=this._rings[M],V=0,Ce=dt.length;V<Ce-1;V++)We=bm(dt[V],dt[V+1],f,V,!0),We&&(b[re]=b[re]||[],b[re].push(We[0]),(We[1]!==dt[V+1]||V===Ce-2)&&(b[re].push(We[1]),re++))}},_simplifyPoints:function(){for(var f=this._parts,b=this.options.smoothFactor,M=0,V=f.length;M<V;M++)f[M]=_m(f[M],b)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(f,b){var M,V,re,me,Ce,We,dt=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(f))return!1;for(M=0,me=this._parts.length;M<me;M++)for(We=this._parts[M],V=0,Ce=We.length,re=Ce-1;V<Ce;re=V++)if(!(!b&&V===0)&&vm(f,We[re],We[V])<=dt)return!0;return!1}});function oi(f,b){return new Va(f,b)}Va._flat=dh;var Es=Va.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return kd(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(f){var b=Va.prototype._convertLatLngs.call(this,f),M=b.length;return M>=2&&b[0]instanceof $e&&b[0].equals(b[M-1])&&b.pop(),b},_setLatLngs:function(f){Va.prototype._setLatLngs.call(this,f),bs(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return bs(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var f=this._renderer._bounds,b=this.options.weight,M=new De(b,b);if(f=new ce(f.min.subtract(M),f.max.add(M)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(f))){if(this.options.noClip){this._parts=this._rings;return}for(var V=0,re=this._rings.length,me;V<re;V++)me=yf(this._rings[V],f,!0),me.length&&this._parts.push(me)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(f){var b=!1,M,V,re,me,Ce,We,dt,It;if(!this._pxBounds||!this._pxBounds.contains(f))return!1;for(me=0,dt=this._parts.length;me<dt;me++)for(M=this._parts[me],Ce=0,It=M.length,We=It-1;Ce<It;We=Ce++)V=M[Ce],re=M[We],V.y>f.y!=re.y>f.y&&f.x<(re.x-V.x)*(f.y-V.y)/(re.y-V.y)+V.x&&(b=!b);return b||Va.prototype._containsPoint.call(this,f,!0)}});function Fo(f,b){return new Es(f,b)}var ha=Zs.extend({initialize:function(f,b){O(this,b),this._layers={},f&&this.addData(f)},addData:function(f){var b=z(f)?f:f.features,M,V,re;if(b){for(M=0,V=b.length;M<V;M++)re=b[M],(re.geometries||re.geometry||re.features||re.coordinates)&&this.addData(re);return this}var me=this.options;if(me.filter&&!me.filter(f))return this;var Ce=hc(f,me);return Ce?(Ce.feature=gh(f),Ce.defaultOptions=Ce.options,this.resetStyle(Ce),me.onEachFeature&&me.onEachFeature(f,Ce),this.addLayer(Ce)):this},resetStyle:function(f){return f===void 0?this.eachLayer(this.resetStyle,this):(f.options=i({},f.defaultOptions),this._setLayerStyle(f,this.options.style),this)},setStyle:function(f){return this.eachLayer(function(b){this._setLayerStyle(b,f)},this)},_setLayerStyle:function(f,b){f.setStyle&&(typeof b=="function"&&(b=b(f.feature)),f.setStyle(b))}});function hc(f,b){var M=f.type==="Feature"?f.geometry:f,V=M?M.coordinates:null,re=[],me=b&&b.pointToLayer,Ce=b&&b.coordsToLatLng||Ga,We,dt,It,tn;if(!V&&!M)return null;switch(M.type){case"Point":return We=Ce(V),Em(me,f,We,b);case"MultiPoint":for(It=0,tn=V.length;It<tn;It++)We=Ce(V[It]),re.push(Em(me,f,We,b));return new Zs(re);case"LineString":case"MultiLineString":return dt=fa(V,M.type==="LineString"?0:1,Ce),new Va(dt,b);case"Polygon":case"MultiPolygon":return dt=fa(V,M.type==="Polygon"?1:2,Ce),new Es(dt,b);case"GeometryCollection":for(It=0,tn=M.geometries.length;It<tn;It++){var hn=hc({geometry:M.geometries[It],type:"Feature",properties:f.properties},b);hn&&re.push(hn)}return new Zs(re);case"FeatureCollection":for(It=0,tn=M.features.length;It<tn;It++){var Hn=hc(M.features[It],b);Hn&&re.push(Hn)}return new Zs(re);default:throw new Error("Invalid GeoJSON object.")}}function Em(f,b,M,V){return f?f(b,M):new cc(M,V&&V.markersInheritOptions&&V)}function Ga(f){return new $e(f[1],f[0],f[2])}function fa(f,b,M){for(var V=[],re=0,me=f.length,Ce;re<me;re++)Ce=b?fa(f[re],b-1,M):(M||Ga)(f[re]),V.push(Ce);return V}function hu(f,b){return f=be(f),f.alt!==void 0?[_(f.lng,b),_(f.lat,b),_(f.alt,b)]:[_(f.lng,b),_(f.lat,b)]}function mh(f,b,M,V){for(var re=[],me=0,Ce=f.length;me<Ce;me++)re.push(b?mh(f[me],bs(f[me])?0:b-1,M,V):hu(f[me],V));return!b&&M&&re.length>0&&re.push(re[0].slice()),re}function vl(f,b){return f.feature?i({},f.feature,{geometry:b}):gh(b)}function gh(f){return f.type==="Feature"||f.type==="FeatureCollection"?f:{type:"Feature",properties:{},geometry:f}}var Sf={toGeoJSON:function(f){return vl(this,{type:"Point",coordinates:hu(this.getLatLng(),f)})}};cc.include(Sf),Ef.include(Sf),wf.include(Sf),Va.include({toGeoJSON:function(f){var b=!bs(this._latlngs),M=mh(this._latlngs,b?1:0,!1,f);return vl(this,{type:(b?"Multi":"")+"LineString",coordinates:M})}}),Es.include({toGeoJSON:function(f){var b=!bs(this._latlngs),M=b&&!bs(this._latlngs[0]),V=mh(this._latlngs,M?2:b?1:0,!0,f);return b||(V=[V]),vl(this,{type:(M?"Multi":"")+"Polygon",coordinates:V})}}),lc.include({toMultiPoint:function(f){var b=[];return this.eachLayer(function(M){b.push(M.toGeoJSON(f).geometry.coordinates)}),vl(this,{type:"MultiPoint",coordinates:b})},toGeoJSON:function(f){var b=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(b==="MultiPoint")return this.toMultiPoint(f);var M=b==="GeometryCollection",V=[];return this.eachLayer(function(re){if(re.toGeoJSON){var me=re.toGeoJSON(f);if(M)V.push(me.geometry);else{var Ce=gh(me);Ce.type==="FeatureCollection"?V.push.apply(V,Ce.features):V.push(Ce)}}}),M?vl(this,{geometries:V,type:"GeometryCollection"}):{type:"FeatureCollection",features:V}}});function yh(f,b){return new ha(f,b)}var fc=yh,Tf=ws.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(f,b,M){this._url=f,this._bounds=Ge(b),O(this,M)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Cn(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Bn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(f){return this.options.opacity=f,this._image&&this._updateOpacity(),this},setStyle:function(f){return f.opacity&&this.setOpacity(f.opacity),this},bringToFront:function(){return this._map&&_s(this._image),this},bringToBack:function(){return this._map&&Lr(this._image),this},setUrl:function(f){return this._url=f,this._image&&(this._image.src=f),this},setBounds:function(f){return this._bounds=Ge(f),this._map&&this._reset(),this},getEvents:function(){var f={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},setZIndex:function(f){return this.options.zIndex=f,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var f=this._url.tagName==="IMG",b=this._image=f?this._url:sr("img");if(Cn(b,"leaflet-image-layer"),this._zoomAnimated&&Cn(b,"leaflet-zoom-animated"),this.options.className&&Cn(b,this.options.className),b.onselectstart=y,b.onmousemove=y,b.onload=u(this.fire,this,"load"),b.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(b.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),f){this._url=b.src;return}b.src=this._url,b.alt=this.options.alt},_animateZoom:function(f){var b=this._map.getZoomScale(f.zoom),M=this._map._latLngBoundsToNewLayerBounds(this._bounds,f.zoom,f.center).min;Wo(this._image,M,b)},_reset:function(){var f=this._image,b=new ce(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),M=b.getSize();ii(f,b.min),f.style.width=M.x+"px",f.style.height=M.y+"px"},_updateOpacity:function(){qn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var f=this.options.errorOverlayUrl;f&&this._url!==f&&(this._url=f,this._image.src=f)},getCenter:function(){return this._bounds.getCenter()}}),Qg=function(f,b,M){return new Tf(f,b,M)},Sm=Tf.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var f=this._url.tagName==="VIDEO",b=this._image=f?this._url:sr("video");if(Cn(b,"leaflet-image-layer"),this._zoomAnimated&&Cn(b,"leaflet-zoom-animated"),this.options.className&&Cn(b,this.options.className),b.onselectstart=y,b.onmousemove=y,b.onloadeddata=u(this.fire,this,"load"),f){for(var M=b.getElementsByTagName("source"),V=[],re=0;re<M.length;re++)V.push(M[re].src);this._url=M.length>0?V:[b.src];return}z(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(b.style,"objectFit")&&(b.style.objectFit="fill"),b.autoplay=!!this.options.autoplay,b.loop=!!this.options.loop,b.muted=!!this.options.muted,b.playsInline=!!this.options.playsInline;for(var me=0;me<this._url.length;me++){var Ce=sr("source");Ce.src=this._url[me],b.appendChild(Ce)}}});function ey(f,b,M){return new Sm(f,b,M)}var _h=Tf.extend({_initImage:function(){var f=this._image=this._url;Cn(f,"leaflet-image-layer"),this._zoomAnimated&&Cn(f,"leaflet-zoom-animated"),this.options.className&&Cn(f,this.options.className),f.onselectstart=y,f.onmousemove=y}});function Cf(f,b,M){return new _h(f,b,M)}var si=ws.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(f,b){f&&(f instanceof $e||z(f))?(this._latlng=be(f),O(this,b)):(O(this,f),this._source=b),this.options.content&&(this._content=this.options.content)},openOn:function(f){return f=arguments.length?f:this._source._map,f.hasLayer(this)||f.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(f){return this._map?this.close():(arguments.length?this._source=f:f=this._source,this._prepareOpen(),this.openOn(f._map)),this},onAdd:function(f){this._zoomAnimated=f._zoomAnimated,this._container||this._initLayout(),f._fadeAnimated&&qn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),f._fadeAnimated&&qn(this._container,1),this.bringToFront(),this.options.interactive&&(Cn(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(f){f._fadeAnimated?(qn(this._container,0),this._removeTimeout=setTimeout(u(Bn,void 0,this._container),200)):Bn(this._container),this.options.interactive&&(Jr(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(f){return this._latlng=be(f),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(f){return this._content=f,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var f={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&_s(this._container),this},bringToBack:function(){return this._map&&Lr(this._container),this},_prepareOpen:function(f){var b=this._source;if(!b._map)return!1;if(b instanceof Zs){b=null;var M=this._source._layers;for(var V in M)if(M[V]._map){b=M[V];break}if(!b)return!1;this._source=b}if(!f)if(b.getCenter)f=b.getCenter();else if(b.getLatLng)f=b.getLatLng();else if(b.getBounds)f=b.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(f),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var f=this._contentNode,b=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof b=="string")f.innerHTML=b;else{for(;f.hasChildNodes();)f.removeChild(f.firstChild);f.appendChild(b)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var f=this._map.latLngToLayerPoint(this._latlng),b=ve(this.options.offset),M=this._getAnchor();this._zoomAnimated?ii(this._container,f.add(M)):b=b.add(f).add(M);var V=this._containerBottom=-b.y,re=this._containerLeft=-Math.round(this._containerWidth/2)+b.x;this._container.style.bottom=V+"px",this._container.style.left=re+"px"}},_getAnchor:function(){return[0,0]}});Yn.include({_initOverlay:function(f,b,M,V){var re=b;return re instanceof f||(re=new f(V).setContent(b)),M&&re.setLatLng(M),re}}),ws.include({_initOverlay:function(f,b,M,V){var re=M;return re instanceof f?(O(re,V),re._source=this):(re=b&&!V?b:new f(V,this),re.setContent(M)),re}});var Ss=si.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(f){return f=arguments.length?f:this._source._map,!f.hasLayer(this)&&f._popup&&f._popup.options.autoClose&&f.removeLayer(f._popup),f._popup=this,si.prototype.openOn.call(this,f)},onAdd:function(f){si.prototype.onAdd.call(this,f),f.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof _l||this._source.on("preclick",ca))},onRemove:function(f){si.prototype.onRemove.call(this,f),f.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof _l||this._source.off("preclick",ca))},getEvents:function(){var f=si.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(f.preclick=this.close),this.options.keepInView&&(f.moveend=this._adjustPan),f},_initLayout:function(){var f="leaflet-popup",b=this._container=sr("div",f+" "+(this.options.className||"")+" leaflet-zoom-animated"),M=this._wrapper=sr("div",f+"-content-wrapper",b);if(this._contentNode=sr("div",f+"-content",M),mf(b),oc(this._contentNode),An(b,"contextmenu",ca),this._tipContainer=sr("div",f+"-tip-container",b),this._tip=sr("div",f+"-tip",this._tipContainer),this.options.closeButton){var V=this._closeButton=sr("a",f+"-close-button",b);V.setAttribute("role","button"),V.setAttribute("aria-label","Close popup"),V.href="#close",V.innerHTML='<span aria-hidden="true">&#215;</span>',An(V,"click",function(re){uo(re),this.close()},this)}},_updateLayout:function(){var f=this._contentNode,b=f.style;b.width="",b.whiteSpace="nowrap";var M=f.offsetWidth;M=Math.min(M,this.options.maxWidth),M=Math.max(M,this.options.minWidth),b.width=M+1+"px",b.whiteSpace="",b.height="";var V=f.offsetHeight,re=this.options.maxHeight,me="leaflet-popup-scrolled";re&&V>re?(b.height=re+"px",Cn(f,me)):Jr(f,me),this._containerWidth=this._container.offsetWidth},_animateZoom:function(f){var b=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center),M=this._getAnchor();ii(this._container,b.add(M))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var f=this._map,b=parseInt($a(this._container,"marginBottom"),10)||0,M=this._container.offsetHeight+b,V=this._containerWidth,re=new De(this._containerLeft,-M-this._containerBottom);re._add(ua(this._container));var me=f.layerPointToContainerPoint(re),Ce=ve(this.options.autoPanPadding),We=ve(this.options.autoPanPaddingTopLeft||Ce),dt=ve(this.options.autoPanPaddingBottomRight||Ce),It=f.getSize(),tn=0,hn=0;me.x+V+dt.x>It.x&&(tn=me.x+V-It.x+dt.x),me.x-tn-We.x<0&&(tn=me.x-We.x),me.y+M+dt.y>It.y&&(hn=me.y+M-It.y+dt.y),me.y-hn-We.y<0&&(hn=me.y-We.y),(tn||hn)&&(this.options.keepInView&&(this._autopanning=!0),f.fire("autopanstart").panBy([tn,hn]))}},_getAnchor:function(){return ve(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Tm=function(f,b){return new Ss(f,b)};Yn.mergeOptions({closePopupOnClick:!0}),Yn.include({openPopup:function(f,b,M){return this._initOverlay(Ss,f,b,M).openOn(this),this},closePopup:function(f){return f=arguments.length?f:this._popup,f&&f.close(),this}}),ws.include({bindPopup:function(f,b){return this._popup=this._initOverlay(Ss,this._popup,f,b),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(f){return this._popup&&(this instanceof Zs||(this._popup._source=this),this._popup._prepareOpen(f||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(f){return this._popup&&this._popup.setContent(f),this},getPopup:function(){return this._popup},_openPopup:function(f){if(!(!this._popup||!this._map)){au(f);var b=f.layer||f.target;if(this._popup._source===b&&!(b instanceof _l)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(f.latlng);return}this._popup._source=b,this.openPopup(f.latlng)}},_movePopup:function(f){this._popup.setLatLng(f.latlng)},_onKeyPress:function(f){f.originalEvent.keyCode===13&&this._openPopup(f)}});var Ko=si.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(f){si.prototype.onAdd.call(this,f),this.setOpacity(this.options.opacity),f.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(f){si.prototype.onRemove.call(this,f),f.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var f=si.prototype.getEvents.call(this);return this.options.permanent||(f.preclick=this.close),f},_initLayout:function(){var f="leaflet-tooltip",b=f+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=sr("div",b),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+p(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(f){var b,M,V=this._map,re=this._container,me=V.latLngToContainerPoint(V.getCenter()),Ce=V.layerPointToContainerPoint(f),We=this.options.direction,dt=re.offsetWidth,It=re.offsetHeight,tn=ve(this.options.offset),hn=this._getAnchor();We==="top"?(b=dt/2,M=It):We==="bottom"?(b=dt/2,M=0):We==="center"?(b=dt/2,M=It/2):We==="right"?(b=0,M=It/2):We==="left"?(b=dt,M=It/2):Ce.x<me.x?(We="right",b=0,M=It/2):(We="left",b=dt+(tn.x+hn.x)*2,M=It/2),f=f.subtract(ve(b,M,!0)).add(tn).add(hn),Jr(re,"leaflet-tooltip-right"),Jr(re,"leaflet-tooltip-left"),Jr(re,"leaflet-tooltip-top"),Jr(re,"leaflet-tooltip-bottom"),Cn(re,"leaflet-tooltip-"+We),ii(re,f)},_updatePosition:function(){var f=this._map.latLngToLayerPoint(this._latlng);this._setPosition(f)},setOpacity:function(f){this.options.opacity=f,this._container&&qn(this._container,f)},_animateZoom:function(f){var b=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center);this._setPosition(b)},_getAnchor:function(){return ve(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Ha=function(f,b){return new Ko(f,b)};Yn.include({openTooltip:function(f,b,M){return this._initOverlay(Ko,f,b,M).openOn(this),this},closeTooltip:function(f){return f.close(),this}}),ws.include({bindTooltip:function(f,b){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ko,this._tooltip,f,b),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(f){if(!(!f&&this._tooltipHandlersAdded)){var b=f?"off":"on",M={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?M.add=this._openTooltip:(M.mouseover=this._openTooltip,M.mouseout=this.closeTooltip,M.click=this._openTooltip,this._map?this._addFocusListeners():M.add=this._addFocusListeners),this._tooltip.options.sticky&&(M.mousemove=this._moveTooltip),this[b](M),this._tooltipHandlersAdded=!f}},openTooltip:function(f){return this._tooltip&&(this instanceof Zs||(this._tooltip._source=this),this._tooltip._prepareOpen(f)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(f){return this._tooltip&&this._tooltip.setContent(f),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(f){var b=typeof f.getElement=="function"&&f.getElement();b&&(An(b,"focus",function(){this._tooltip._source=f,this.openTooltip()},this),An(b,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(f){var b=typeof f.getElement=="function"&&f.getElement();b&&b.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(f){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var b=this;this._map.once("moveend",function(){b._openOnceFlag=!1,b._openTooltip(f)});return}this._tooltip._source=f.layer||f.target,this.openTooltip(this._tooltip.options.sticky?f.latlng:void 0)}},_moveTooltip:function(f){var b=f.latlng,M,V;this._tooltip.options.sticky&&f.originalEvent&&(M=this._map.mouseEventToContainerPoint(f.originalEvent),V=this._map.containerPointToLayerPoint(M),b=this._map.layerPointToLatLng(V)),this._tooltip.setLatLng(b)}});var dc=uc.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(f){var b=f&&f.tagName==="DIV"?f:document.createElement("div"),M=this.options;if(M.html instanceof Element?(ou(b),b.appendChild(M.html)):b.innerHTML=M.html!==!1?M.html:"",M.bgPos){var V=ve(M.bgPos);b.style.backgroundPosition=-V.x+"px "+-V.y+"px"}return this._setIconStyles(b,"icon"),b},createShadow:function(){return null}});function da(f){return new dc(f)}uc.Default=ph;var pa=ws.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ht.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(f){O(this,f)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(f){f._addZoomLimit(this)},onRemove:function(f){this._removeAllTiles(),Bn(this._container),f._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(_s(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Lr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(f){return this.options.opacity=f,this._updateOpacity(),this},setZIndex:function(f){return this.options.zIndex=f,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var f=this._clampZoom(this._map.getZoom());f!==this._tileZoom&&(this._tileZoom=f,this._updateLevels()),this._update()}return this},getEvents:function(){var f={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=g(this._onMoveEnd,this.options.updateInterval,this)),f.move=this._onMove),this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},createTile:function(){return document.createElement("div")},getTileSize:function(){var f=this.options.tileSize;return f instanceof De?f:new De(f,f)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(f){for(var b=this.getPane().children,M=-f(-1/0,1/0),V=0,re=b.length,me;V<re;V++)me=b[V].style.zIndex,b[V]!==this._container&&me&&(M=f(M,+me));isFinite(M)&&(this.options.zIndex=M+f(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ht.ielt9){qn(this._container,this.options.opacity);var f=+new Date,b=!1,M=!1;for(var V in this._tiles){var re=this._tiles[V];if(!(!re.current||!re.loaded)){var me=Math.min(1,(f-re.loaded)/200);qn(re.el,me),me<1?b=!0:(re.active?M=!0:this._onOpaqueTile(re),re.active=!0)}}M&&!this._noPrune&&this._pruneTiles(),b&&(ee(this._fadeFrame),this._fadeFrame=X(this._updateOpacity,this))}},_onOpaqueTile:y,_initContainer:function(){this._container||(this._container=sr("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var f=this._tileZoom,b=this.options.maxZoom;if(f!==void 0){for(var M in this._levels)M=Number(M),this._levels[M].el.children.length||M===f?(this._levels[M].el.style.zIndex=b-Math.abs(f-M),this._onUpdateLevel(M)):(Bn(this._levels[M].el),this._removeTilesAtZoom(M),this._onRemoveLevel(M),delete this._levels[M]);var V=this._levels[f],re=this._map;return V||(V=this._levels[f]={},V.el=sr("div","leaflet-tile-container leaflet-zoom-animated",this._container),V.el.style.zIndex=b,V.origin=re.project(re.unproject(re.getPixelOrigin()),f).round(),V.zoom=f,this._setZoomTransform(V,re.getCenter(),re.getZoom()),y(V.el.offsetWidth),this._onCreateLevel(V)),this._level=V,V}},_onUpdateLevel:y,_onRemoveLevel:y,_onCreateLevel:y,_pruneTiles:function(){if(this._map){var f,b,M=this._map.getZoom();if(M>this.options.maxZoom||M<this.options.minZoom){this._removeAllTiles();return}for(f in this._tiles)b=this._tiles[f],b.retain=b.current;for(f in this._tiles)if(b=this._tiles[f],b.current&&!b.active){var V=b.coords;this._retainParent(V.x,V.y,V.z,V.z-5)||this._retainChildren(V.x,V.y,V.z,V.z+2)}for(f in this._tiles)this._tiles[f].retain||this._removeTile(f)}},_removeTilesAtZoom:function(f){for(var b in this._tiles)this._tiles[b].coords.z===f&&this._removeTile(b)},_removeAllTiles:function(){for(var f in this._tiles)this._removeTile(f)},_invalidateAll:function(){for(var f in this._levels)Bn(this._levels[f].el),this._onRemoveLevel(Number(f)),delete this._levels[f];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(f,b,M,V){var re=Math.floor(f/2),me=Math.floor(b/2),Ce=M-1,We=new De(+re,+me);We.z=+Ce;var dt=this._tileCoordsToKey(We),It=this._tiles[dt];return It&&It.active?(It.retain=!0,!0):(It&&It.loaded&&(It.retain=!0),Ce>V?this._retainParent(re,me,Ce,V):!1)},_retainChildren:function(f,b,M,V){for(var re=2*f;re<2*f+2;re++)for(var me=2*b;me<2*b+2;me++){var Ce=new De(re,me);Ce.z=M+1;var We=this._tileCoordsToKey(Ce),dt=this._tiles[We];if(dt&&dt.active){dt.retain=!0;continue}else dt&&dt.loaded&&(dt.retain=!0);M+1<V&&this._retainChildren(re,me,M+1,V)}},_resetView:function(f){var b=f&&(f.pinch||f.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),b,b)},_animateZoom:function(f){this._setView(f.center,f.zoom,!0,f.noUpdate)},_clampZoom:function(f){var b=this.options;return b.minNativeZoom!==void 0&&f<b.minNativeZoom?b.minNativeZoom:b.maxNativeZoom!==void 0&&b.maxNativeZoom<f?b.maxNativeZoom:f},_setView:function(f,b,M,V){var re=Math.round(b);this.options.maxZoom!==void 0&&re>this.options.maxZoom||this.options.minZoom!==void 0&&re<this.options.minZoom?re=void 0:re=this._clampZoom(re);var me=this.options.updateWhenZooming&&re!==this._tileZoom;(!V||me)&&(this._tileZoom=re,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),re!==void 0&&this._update(f),M||this._pruneTiles(),this._noPrune=!!M),this._setZoomTransforms(f,b)},_setZoomTransforms:function(f,b){for(var M in this._levels)this._setZoomTransform(this._levels[M],f,b)},_setZoomTransform:function(f,b,M){var V=this._map.getZoomScale(M,f.zoom),re=f.origin.multiplyBy(V).subtract(this._map._getNewPixelOrigin(b,M)).round();ht.any3d?Wo(f.el,re,V):ii(f.el,re)},_resetGrid:function(){var f=this._map,b=f.options.crs,M=this._tileSize=this.getTileSize(),V=this._tileZoom,re=this._map.getPixelWorldBounds(this._tileZoom);re&&(this._globalTileRange=this._pxBoundsToTileRange(re)),this._wrapX=b.wrapLng&&!this.options.noWrap&&[Math.floor(f.project([0,b.wrapLng[0]],V).x/M.x),Math.ceil(f.project([0,b.wrapLng[1]],V).x/M.y)],this._wrapY=b.wrapLat&&!this.options.noWrap&&[Math.floor(f.project([b.wrapLat[0],0],V).y/M.x),Math.ceil(f.project([b.wrapLat[1],0],V).y/M.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(f){var b=this._map,M=b._animatingZoom?Math.max(b._animateToZoom,b.getZoom()):b.getZoom(),V=b.getZoomScale(M,this._tileZoom),re=b.project(f,this._tileZoom).floor(),me=b.getSize().divideBy(V*2);return new ce(re.subtract(me),re.add(me))},_update:function(f){var b=this._map;if(b){var M=this._clampZoom(b.getZoom());if(f===void 0&&(f=b.getCenter()),this._tileZoom!==void 0){var V=this._getTiledPixelBounds(f),re=this._pxBoundsToTileRange(V),me=re.getCenter(),Ce=[],We=this.options.keepBuffer,dt=new ce(re.getBottomLeft().subtract([We,-We]),re.getTopRight().add([We,-We]));if(!(isFinite(re.min.x)&&isFinite(re.min.y)&&isFinite(re.max.x)&&isFinite(re.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var It in this._tiles){var tn=this._tiles[It].coords;(tn.z!==this._tileZoom||!dt.contains(new De(tn.x,tn.y)))&&(this._tiles[It].current=!1)}if(Math.abs(M-this._tileZoom)>1){this._setView(f,M);return}for(var hn=re.min.y;hn<=re.max.y;hn++)for(var Hn=re.min.x;Hn<=re.max.x;Hn++){var Hr=new De(Hn,hn);if(Hr.z=this._tileZoom,!!this._isValidTile(Hr)){var $i=this._tiles[this._tileCoordsToKey(Hr)];$i?$i.current=!0:Ce.push(Hr)}}if(Ce.sort(function(tr,$r){return tr.distanceTo(me)-$r.distanceTo(me)}),Ce.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Po=document.createDocumentFragment();for(Hn=0;Hn<Ce.length;Hn++)this._addTile(Ce[Hn],Po);this._level.el.appendChild(Po)}}}},_isValidTile:function(f){var b=this._map.options.crs;if(!b.infinite){var M=this._globalTileRange;if(!b.wrapLng&&(f.x<M.min.x||f.x>M.max.x)||!b.wrapLat&&(f.y<M.min.y||f.y>M.max.y))return!1}if(!this.options.bounds)return!0;var V=this._tileCoordsToBounds(f);return Ge(this.options.bounds).overlaps(V)},_keyToBounds:function(f){return this._tileCoordsToBounds(this._keyToTileCoords(f))},_tileCoordsToNwSe:function(f){var b=this._map,M=this.getTileSize(),V=f.scaleBy(M),re=V.add(M),me=b.unproject(V,f.z),Ce=b.unproject(re,f.z);return[me,Ce]},_tileCoordsToBounds:function(f){var b=this._tileCoordsToNwSe(f),M=new Ee(b[0],b[1]);return this.options.noWrap||(M=this._map.wrapLatLngBounds(M)),M},_tileCoordsToKey:function(f){return f.x+":"+f.y+":"+f.z},_keyToTileCoords:function(f){var b=f.split(":"),M=new De(+b[0],+b[1]);return M.z=+b[2],M},_removeTile:function(f){var b=this._tiles[f];b&&(Bn(b.el),delete this._tiles[f],this.fire("tileunload",{tile:b.el,coords:this._keyToTileCoords(f)}))},_initTile:function(f){Cn(f,"leaflet-tile");var b=this.getTileSize();f.style.width=b.x+"px",f.style.height=b.y+"px",f.onselectstart=y,f.onmousemove=y,ht.ielt9&&this.options.opacity<1&&qn(f,this.options.opacity)},_addTile:function(f,b){var M=this._getTilePos(f),V=this._tileCoordsToKey(f),re=this.createTile(this._wrapCoords(f),u(this._tileReady,this,f));this._initTile(re),this.createTile.length<2&&X(u(this._tileReady,this,f,null,re)),ii(re,M),this._tiles[V]={el:re,coords:f,current:!0},b.appendChild(re),this.fire("tileloadstart",{tile:re,coords:f})},_tileReady:function(f,b,M){b&&this.fire("tileerror",{error:b,tile:M,coords:f});var V=this._tileCoordsToKey(f);M=this._tiles[V],M&&(M.loaded=+new Date,this._map._fadeAnimated?(qn(M.el,0),ee(this._fadeFrame),this._fadeFrame=X(this._updateOpacity,this)):(M.active=!0,this._pruneTiles()),b||(Cn(M.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:M.el,coords:f})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ht.ielt9||!this._map._fadeAnimated?X(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(f){return f.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(f){var b=new De(this._wrapX?x(f.x,this._wrapX):f.x,this._wrapY?x(f.y,this._wrapY):f.y);return b.z=f.z,b},_pxBoundsToTileRange:function(f){var b=this.getTileSize();return new ce(f.min.unscaleBy(b).floor(),f.max.unscaleBy(b).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var f in this._tiles)if(!this._tiles[f].loaded)return!1;return!0}});function Sv(f){return new pa(f)}var fu=pa.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(f,b){this._url=f,b=O(this,b),b.detectRetina&&ht.retina&&b.maxZoom>0?(b.tileSize=Math.floor(b.tileSize/2),b.zoomReverse?(b.zoomOffset--,b.minZoom=Math.min(b.maxZoom,b.minZoom+1)):(b.zoomOffset++,b.maxZoom=Math.max(b.minZoom,b.maxZoom-1)),b.minZoom=Math.max(0,b.minZoom)):b.zoomReverse?b.minZoom=Math.min(b.maxZoom,b.minZoom):b.maxZoom=Math.max(b.minZoom,b.maxZoom),typeof b.subdomains=="string"&&(b.subdomains=b.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(f,b){return this._url===f&&b===void 0&&(b=!0),this._url=f,b||this.redraw(),this},createTile:function(f,b){var M=document.createElement("img");return An(M,"load",u(this._tileOnLoad,this,b,M)),An(M,"error",u(this._tileOnError,this,b,M)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(M.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(M.referrerPolicy=this.options.referrerPolicy),M.alt="",M.src=this.getTileUrl(f),M},getTileUrl:function(f){var b={r:ht.retina?"@2x":"",s:this._getSubdomain(f),x:f.x,y:f.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var M=this._globalTileRange.max.y-f.y;this.options.tms&&(b.y=M),b["-y"]=M}return R(this._url,i(b,this.options))},_tileOnLoad:function(f,b){ht.ielt9?setTimeout(u(f,this,null,b),0):f(null,b)},_tileOnError:function(f,b,M){var V=this.options.errorTileUrl;V&&b.getAttribute("src")!==V&&(b.src=V),f(M,b)},_onTileRemove:function(f){f.tile.onload=null},_getZoomForUrl:function(){var f=this._tileZoom,b=this.options.maxZoom,M=this.options.zoomReverse,V=this.options.zoomOffset;return M&&(f=b-f),f+V},_getSubdomain:function(f){var b=Math.abs(f.x+f.y)%this.options.subdomains.length;return this.options.subdomains[b]},_abortLoading:function(){var f,b;for(f in this._tiles)if(this._tiles[f].coords.z!==this._tileZoom&&(b=this._tiles[f].el,b.onload=y,b.onerror=y,!b.complete)){b.src=U;var M=this._tiles[f].coords;Bn(b),delete this._tiles[f],this.fire("tileabort",{tile:b,coords:M})}},_removeTile:function(f){var b=this._tiles[f];if(b)return b.el.setAttribute("src",U),pa.prototype._removeTile.call(this,f)},_tileReady:function(f,b,M){if(!(!this._map||M&&M.getAttribute("src")===U))return pa.prototype._tileReady.call(this,f,b,M)}});function ty(f,b){return new fu(f,b)}var pc=fu.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(f,b){this._url=f;var M=i({},this.defaultWmsParams);for(var V in b)V in this.options||(M[V]=b[V]);b=O(this,b);var re=b.detectRetina&&ht.retina?2:1,me=this.getTileSize();M.width=me.x*re,M.height=me.y*re,this.wmsParams=M},onAdd:function(f){this._crs=this.options.crs||f.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var b=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[b]=this._crs.code,fu.prototype.onAdd.call(this,f)},getTileUrl:function(f){var b=this._tileCoordsToNwSe(f),M=this._crs,V=xe(M.project(b[0]),M.project(b[1])),re=V.min,me=V.max,Ce=(this._wmsVersion>=1.3&&this._crs===cu?[re.y,re.x,me.y,me.x]:[re.x,re.y,me.x,me.y]).join(","),We=fu.prototype.getTileUrl.call(this,f);return We+N(this.wmsParams,We,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Ce},setParams:function(f,b){return i(this.wmsParams,f),b||this.redraw(),this}});function If(f,b){return new pc(f,b)}fu.WMS=pc,ty.wms=If;var Ji=ws.extend({options:{padding:.1},initialize:function(f){O(this,f),p(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Cn(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var f={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(f.zoomanim=this._onAnimZoom),f},_onAnimZoom:function(f){this._updateTransform(f.center,f.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(f,b){var M=this._map.getZoomScale(b,this._zoom),V=this._map.getSize().multiplyBy(.5+this.options.padding),re=this._map.project(this._center,b),me=V.multiplyBy(-M).add(re).subtract(this._map._getNewPixelOrigin(f,b));ht.any3d?Wo(this._container,me,M):ii(this._container,me)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var f in this._layers)this._layers[f]._reset()},_onZoomEnd:function(){for(var f in this._layers)this._layers[f]._project()},_updatePaths:function(){for(var f in this._layers)this._layers[f]._update()},_update:function(){var f=this.options.padding,b=this._map.getSize(),M=this._map.containerPointToLayerPoint(b.multiplyBy(-f)).round();this._bounds=new ce(M,M.add(b.multiplyBy(1+f*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Jt=Ji.extend({options:{tolerance:0},getEvents:function(){var f=Ji.prototype.getEvents.call(this);return f.viewprereset=this._onViewPreReset,f},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ji.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var f=this._container=document.createElement("canvas");An(f,"mousemove",this._onMouseMove,this),An(f,"click dblclick mousedown mouseup contextmenu",this._onClick,this),An(f,"mouseout",this._handleMouseOut,this),f._leaflet_disable_events=!0,this._ctx=f.getContext("2d")},_destroyContainer:function(){ee(this._redrawRequest),delete this._ctx,Bn(this._container),Xn(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var f;this._redrawBounds=null;for(var b in this._layers)f=this._layers[b],f._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ji.prototype._update.call(this);var f=this._bounds,b=this._container,M=f.getSize(),V=ht.retina?2:1;ii(b,f.min),b.width=V*M.x,b.height=V*M.y,b.style.width=M.x+"px",b.style.height=M.y+"px",ht.retina&&this._ctx.scale(2,2),this._ctx.translate(-f.min.x,-f.min.y),this.fire("update")}},_reset:function(){Ji.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(f){this._updateDashArray(f),this._layers[p(f)]=f;var b=f._order={layer:f,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=b),this._drawLast=b,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(f){this._requestRedraw(f)},_removePath:function(f){var b=f._order,M=b.next,V=b.prev;M?M.prev=V:this._drawLast=V,V?V.next=M:this._drawFirst=M,delete f._order,delete this._layers[p(f)],this._requestRedraw(f)},_updatePath:function(f){this._extendRedrawBounds(f),f._project(),f._update(),this._requestRedraw(f)},_updateStyle:function(f){this._updateDashArray(f),this._requestRedraw(f)},_updateDashArray:function(f){if(typeof f.options.dashArray=="string"){var b=f.options.dashArray.split(/[, ]+/),M=[],V,re;for(re=0;re<b.length;re++){if(V=Number(b[re]),isNaN(V))return;M.push(V)}f.options._dashArray=M}else f.options._dashArray=f.options.dashArray},_requestRedraw:function(f){this._map&&(this._extendRedrawBounds(f),this._redrawRequest=this._redrawRequest||X(this._redraw,this))},_extendRedrawBounds:function(f){if(f._pxBounds){var b=(f.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ce,this._redrawBounds.extend(f._pxBounds.min.subtract([b,b])),this._redrawBounds.extend(f._pxBounds.max.add([b,b]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var f=this._redrawBounds;if(f){var b=f.getSize();this._ctx.clearRect(f.min.x,f.min.y,b.x,b.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var f,b=this._redrawBounds;if(this._ctx.save(),b){var M=b.getSize();this._ctx.beginPath(),this._ctx.rect(b.min.x,b.min.y,M.x,M.y),this._ctx.clip()}this._drawing=!0;for(var V=this._drawFirst;V;V=V.next)f=V.layer,(!b||f._pxBounds&&f._pxBounds.intersects(b))&&f._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(f,b){if(this._drawing){var M,V,re,me,Ce=f._parts,We=Ce.length,dt=this._ctx;if(We){for(dt.beginPath(),M=0;M<We;M++){for(V=0,re=Ce[M].length;V<re;V++)me=Ce[M][V],dt[V?"lineTo":"moveTo"](me.x,me.y);b&&dt.closePath()}this._fillStroke(dt,f)}}},_updateCircle:function(f){if(!(!this._drawing||f._empty())){var b=f._point,M=this._ctx,V=Math.max(Math.round(f._radius),1),re=(Math.max(Math.round(f._radiusY),1)||V)/V;re!==1&&(M.save(),M.scale(1,re)),M.beginPath(),M.arc(b.x,b.y/re,V,0,Math.PI*2,!1),re!==1&&M.restore(),this._fillStroke(M,f)}},_fillStroke:function(f,b){var M=b.options;M.fill&&(f.globalAlpha=M.fillOpacity,f.fillStyle=M.fillColor||M.color,f.fill(M.fillRule||"evenodd")),M.stroke&&M.weight!==0&&(f.setLineDash&&f.setLineDash(b.options&&b.options._dashArray||[]),f.globalAlpha=M.opacity,f.lineWidth=M.weight,f.strokeStyle=M.color,f.lineCap=M.lineCap,f.lineJoin=M.lineJoin,f.stroke())},_onClick:function(f){for(var b=this._map.mouseEventToLayerPoint(f),M,V,re=this._drawFirst;re;re=re.next)M=re.layer,M.options.interactive&&M._containsPoint(b)&&(!(f.type==="click"||f.type==="preclick")||!this._map._draggableMoved(M))&&(V=M);this._fireEvent(V?[V]:!1,f)},_onMouseMove:function(f){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var b=this._map.mouseEventToLayerPoint(f);this._handleMouseHover(f,b)}},_handleMouseOut:function(f){var b=this._hoveredLayer;b&&(Jr(this._container,"leaflet-interactive"),this._fireEvent([b],f,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(f,b){if(!this._mouseHoverThrottled){for(var M,V,re=this._drawFirst;re;re=re.next)M=re.layer,M.options.interactive&&M._containsPoint(b)&&(V=M);V!==this._hoveredLayer&&(this._handleMouseOut(f),V&&(Cn(this._container,"leaflet-interactive"),this._fireEvent([V],f,"mouseover"),this._hoveredLayer=V)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,f),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(f,b,M){this._map._fireDOMEvent(b,M||b.type,f)},_bringToFront:function(f){var b=f._order;if(b){var M=b.next,V=b.prev;if(M)M.prev=V;else return;V?V.next=M:M&&(this._drawFirst=M),b.prev=this._drawLast,this._drawLast.next=b,b.next=null,this._drawLast=b,this._requestRedraw(f)}},_bringToBack:function(f){var b=f._order;if(b){var M=b.next,V=b.prev;if(V)V.next=M;else return;M?M.prev=V:V&&(this._drawLast=V),b.prev=null,b.next=this._drawFirst,this._drawFirst.prev=b,this._drawFirst=b,this._requestRedraw(f)}}});function Pf(f){return ht.canvas?new Jt(f):null}var Za=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(f){return document.createElement("<lvml:"+f+' class="lvml">')}}catch{}return function(f){return document.createElement("<"+f+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),vh={_initContainer:function(){this._container=sr("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ji.prototype._update.call(this),this.fire("update"))},_initPath:function(f){var b=f._container=Za("shape");Cn(b,"leaflet-vml-shape "+(this.options.className||"")),b.coordsize="1 1",f._path=Za("path"),b.appendChild(f._path),this._updateStyle(f),this._layers[p(f)]=f},_addPath:function(f){var b=f._container;this._container.appendChild(b),f.options.interactive&&f.addInteractiveTarget(b)},_removePath:function(f){var b=f._container;Bn(b),f.removeInteractiveTarget(b),delete this._layers[p(f)]},_updateStyle:function(f){var b=f._stroke,M=f._fill,V=f.options,re=f._container;re.stroked=!!V.stroke,re.filled=!!V.fill,V.stroke?(b||(b=f._stroke=Za("stroke")),re.appendChild(b),b.weight=V.weight+"px",b.color=V.color,b.opacity=V.opacity,V.dashArray?b.dashStyle=z(V.dashArray)?V.dashArray.join(" "):V.dashArray.replace(/( *, *)/g," "):b.dashStyle="",b.endcap=V.lineCap.replace("butt","flat"),b.joinstyle=V.lineJoin):b&&(re.removeChild(b),f._stroke=null),V.fill?(M||(M=f._fill=Za("fill")),re.appendChild(M),M.color=V.fillColor||V.color,M.opacity=V.fillOpacity):M&&(re.removeChild(M),f._fill=null)},_updateCircle:function(f){var b=f._point.round(),M=Math.round(f._radius),V=Math.round(f._radiusY||M);this._setPath(f,f._empty()?"M0 0":"AL "+b.x+","+b.y+" "+M+","+V+" 0,"+65535*360)},_setPath:function(f,b){f._path.v=b},_bringToFront:function(f){_s(f._container)},_bringToBack:function(f){Lr(f._container)}},Lf=ht.vml?Za:Gt,Vt=Ji.extend({_initContainer:function(){this._container=Lf("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Lf("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Bn(this._container),Xn(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ji.prototype._update.call(this);var f=this._bounds,b=f.getSize(),M=this._container;(!this._svgSize||!this._svgSize.equals(b))&&(this._svgSize=b,M.setAttribute("width",b.x),M.setAttribute("height",b.y)),ii(M,f.min),M.setAttribute("viewBox",[f.min.x,f.min.y,b.x,b.y].join(" ")),this.fire("update")}},_initPath:function(f){var b=f._path=Lf("path");f.options.className&&Cn(b,f.options.className),f.options.interactive&&Cn(b,"leaflet-interactive"),this._updateStyle(f),this._layers[p(f)]=f},_addPath:function(f){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(f._path),f.addInteractiveTarget(f._path)},_removePath:function(f){Bn(f._path),f.removeInteractiveTarget(f._path),delete this._layers[p(f)]},_updatePath:function(f){f._project(),f._update()},_updateStyle:function(f){var b=f._path,M=f.options;b&&(M.stroke?(b.setAttribute("stroke",M.color),b.setAttribute("stroke-opacity",M.opacity),b.setAttribute("stroke-width",M.weight),b.setAttribute("stroke-linecap",M.lineCap),b.setAttribute("stroke-linejoin",M.lineJoin),M.dashArray?b.setAttribute("stroke-dasharray",M.dashArray):b.removeAttribute("stroke-dasharray"),M.dashOffset?b.setAttribute("stroke-dashoffset",M.dashOffset):b.removeAttribute("stroke-dashoffset")):b.setAttribute("stroke","none"),M.fill?(b.setAttribute("fill",M.fillColor||M.color),b.setAttribute("fill-opacity",M.fillOpacity),b.setAttribute("fill-rule",M.fillRule||"evenodd")):b.setAttribute("fill","none"))},_updatePoly:function(f,b){this._setPath(f,Tr(f._parts,b))},_updateCircle:function(f){var b=f._point,M=Math.max(Math.round(f._radius),1),V=Math.max(Math.round(f._radiusY),1)||M,re="a"+M+","+V+" 0 1,0 ",me=f._empty()?"M0 0":"M"+(b.x-M)+","+b.y+re+M*2+",0 "+re+-M*2+",0 ";this._setPath(f,me)},_setPath:function(f,b){f._path.setAttribute("d",b)},_bringToFront:function(f){_s(f._path)},_bringToBack:function(f){Lr(f._path)}});ht.vml&&Vt.include(vh);function mc(f){return ht.svg||ht.vml?new Vt(f):null}Yn.include({getRenderer:function(f){var b=f.options.renderer||this._getPaneRenderer(f.options.pane)||this.options.renderer||this._renderer;return b||(b=this._renderer=this._createRenderer()),this.hasLayer(b)||this.addLayer(b),b},_getPaneRenderer:function(f){if(f==="overlayPane"||f===void 0)return!1;var b=this._paneRenderers[f];return b===void 0&&(b=this._createRenderer({pane:f}),this._paneRenderers[f]=b),b},_createRenderer:function(f){return this.options.preferCanvas&&Pf(f)||mc(f)}});var Cm=Es.extend({initialize:function(f,b){Es.prototype.initialize.call(this,this._boundsToLatLngs(f),b)},setBounds:function(f){return this.setLatLngs(this._boundsToLatLngs(f))},_boundsToLatLngs:function(f){return f=Ge(f),[f.getSouthWest(),f.getNorthWest(),f.getNorthEast(),f.getSouthEast()]}});function ny(f,b){return new Cm(f,b)}Vt.create=Lf,Vt.pointsToPath=Tr,ha.geometryToLayer=hc,ha.coordsToLatLng=Ga,ha.coordsToLatLngs=fa,ha.latLngToCoords=hu,ha.latLngsToCoords=mh,ha.getFeature=vl,ha.asFeature=gh,Yn.mergeOptions({boxZoom:!0});var Af=Ua.extend({initialize:function(f){this._map=f,this._container=f._container,this._pane=f._panes.overlayPane,this._resetStateTimeout=0,f.on("unload",this._destroy,this)},addHooks:function(){An(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Xn(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Bn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(f){if(!f.shiftKey||f.which!==1&&f.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),hf(),Pd(),this._startPoint=this._map.mouseEventToContainerPoint(f),An(document,{contextmenu:au,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(f){this._moved||(this._moved=!0,this._box=sr("div","leaflet-zoom-box",this._container),Cn(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(f);var b=new ce(this._point,this._startPoint),M=b.getSize();ii(this._box,b.min),this._box.style.width=M.x+"px",this._box.style.height=M.y+"px"},_finish:function(){this._moved&&(Bn(this._box),Jr(this._container,"leaflet-crosshair")),nh(),fm(),Xn(document,{contextmenu:au,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(f){if(!(f.which!==1&&f.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var b=new Ee(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(b).fire("boxzoomend",{boxZoomBounds:b})}},_onKeyDown:function(f){f.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Yn.addInitHook("addHandler","boxZoom",Af),Yn.mergeOptions({doubleClickZoom:!0});var jd=Ua.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(f){var b=this._map,M=b.getZoom(),V=b.options.zoomDelta,re=f.originalEvent.shiftKey?M-V:M+V;b.options.doubleClickZoom==="center"?b.setZoom(re):b.setZoomAround(f.containerPoint,re)}});Yn.addInitHook("addHandler","doubleClickZoom",jd),Yn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Of=Ua.extend({addHooks:function(){if(!this._draggable){var f=this._map;this._draggable=new qa(f._mapPane,f._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),f.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),f.on("zoomend",this._onZoomEnd,this),f.whenReady(this._onZoomEnd,this))}Cn(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Jr(this._map._container,"leaflet-grab"),Jr(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var f=this._map;if(f._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var b=Ge(this._map.options.maxBounds);this._offsetLimit=xe(this._map.latLngToContainerPoint(b.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(b.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;f.fire("movestart").fire("dragstart"),f.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(f){if(this._map.options.inertia){var b=this._lastTime=+new Date,M=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(M),this._times.push(b),this._prunePositions(b)}this._map.fire("move",f).fire("drag",f)},_prunePositions:function(f){for(;this._positions.length>1&&f-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var f=this._map.getSize().divideBy(2),b=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=b.subtract(f).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(f,b){return f-(f-b)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var f=this._draggable._newPos.subtract(this._draggable._startPos),b=this._offsetLimit;f.x<b.min.x&&(f.x=this._viscousLimit(f.x,b.min.x)),f.y<b.min.y&&(f.y=this._viscousLimit(f.y,b.min.y)),f.x>b.max.x&&(f.x=this._viscousLimit(f.x,b.max.x)),f.y>b.max.y&&(f.y=this._viscousLimit(f.y,b.max.y)),this._draggable._newPos=this._draggable._startPos.add(f)}},_onPreDragWrap:function(){var f=this._worldWidth,b=Math.round(f/2),M=this._initialWorldOffset,V=this._draggable._newPos.x,re=(V-b+M)%f+b-M,me=(V+b+M)%f-b-M,Ce=Math.abs(re+M)<Math.abs(me+M)?re:me;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Ce},_onDragEnd:function(f){var b=this._map,M=b.options,V=!M.inertia||f.noInertia||this._times.length<2;if(b.fire("dragend",f),V)b.fire("moveend");else{this._prunePositions(+new Date);var re=this._lastPos.subtract(this._positions[0]),me=(this._lastTime-this._times[0])/1e3,Ce=M.easeLinearity,We=re.multiplyBy(Ce/me),dt=We.distanceTo([0,0]),It=Math.min(M.inertiaMaxSpeed,dt),tn=We.multiplyBy(It/dt),hn=It/(M.inertiaDeceleration*Ce),Hn=tn.multiplyBy(-hn/2).round();!Hn.x&&!Hn.y?b.fire("moveend"):(Hn=b._limitOffset(Hn,b.options.maxBounds),X(function(){b.panBy(Hn,{duration:hn,easeLinearity:Ce,noMoveStart:!0,animate:!0})}))}}});Yn.addInitHook("addHandler","dragging",Of),Yn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Im=Ua.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(f){this._map=f,this._setPanDelta(f.options.keyboardPanDelta),this._setZoomDelta(f.options.zoomDelta)},addHooks:function(){var f=this._map._container;f.tabIndex<=0&&(f.tabIndex="0"),An(f,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Xn(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var f=document.body,b=document.documentElement,M=f.scrollTop||b.scrollTop,V=f.scrollLeft||b.scrollLeft;this._map._container.focus(),window.scrollTo(V,M)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(f){var b=this._panKeys={},M=this.keyCodes,V,re;for(V=0,re=M.left.length;V<re;V++)b[M.left[V]]=[-1*f,0];for(V=0,re=M.right.length;V<re;V++)b[M.right[V]]=[f,0];for(V=0,re=M.down.length;V<re;V++)b[M.down[V]]=[0,f];for(V=0,re=M.up.length;V<re;V++)b[M.up[V]]=[0,-1*f]},_setZoomDelta:function(f){var b=this._zoomKeys={},M=this.keyCodes,V,re;for(V=0,re=M.zoomIn.length;V<re;V++)b[M.zoomIn[V]]=f;for(V=0,re=M.zoomOut.length;V<re;V++)b[M.zoomOut[V]]=-f},_addHooks:function(){An(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Xn(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(f){if(!(f.altKey||f.ctrlKey||f.metaKey)){var b=f.keyCode,M=this._map,V;if(b in this._panKeys){if(!M._panAnim||!M._panAnim._inProgress)if(V=this._panKeys[b],f.shiftKey&&(V=ve(V).multiplyBy(3)),M.options.maxBounds&&(V=M._limitOffset(ve(V),M.options.maxBounds)),M.options.worldCopyJump){var re=M.wrapLatLng(M.unproject(M.project(M.getCenter()).add(V)));M.panTo(re)}else M.panBy(V)}else if(b in this._zoomKeys)M.setZoom(M.getZoom()+(f.shiftKey?3:1)*this._zoomKeys[b]);else if(b===27&&M._popup&&M._popup.options.closeOnEscapeKey)M.closePopup();else return;au(f)}}});Yn.addInitHook("addHandler","keyboard",Im),Yn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ry=Ua.extend({addHooks:function(){An(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Xn(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(f){var b=Io(f),M=this._map.options.wheelDebounceTime;this._delta+=b,this._lastMousePos=this._map.mouseEventToContainerPoint(f),this._startTime||(this._startTime=+new Date);var V=Math.max(M-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),V),au(f)},_performZoom:function(){var f=this._map,b=f.getZoom(),M=this._map.options.zoomSnap||0;f._stop();var V=this._delta/(this._map.options.wheelPxPerZoomLevel*4),re=4*Math.log(2/(1+Math.exp(-Math.abs(V))))/Math.LN2,me=M?Math.ceil(re/M)*M:re,Ce=f._limitZoom(b+(this._delta>0?me:-me))-b;this._delta=0,this._startTime=null,Ce&&(f.options.scrollWheelZoom==="center"?f.setZoom(b+Ce):f.setZoomAround(this._lastMousePos,b+Ce))}});Yn.addInitHook("addHandler","scrollWheelZoom",ry);var du=600;Yn.mergeOptions({tapHold:ht.touchNative&&ht.safari&&ht.mobile,tapTolerance:15});var jr=Ua.extend({addHooks:function(){An(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Xn(this._map._container,"touchstart",this._onDown,this)},_onDown:function(f){if(clearTimeout(this._holdTimeout),f.touches.length===1){var b=f.touches[0];this._startPos=this._newPos=new De(b.clientX,b.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(An(document,"touchend",uo),An(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",b))},this),du),An(document,"touchend touchcancel contextmenu",this._cancel,this),An(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function f(){Xn(document,"touchend",uo),Xn(document,"touchend touchcancel",f)},_cancel:function(){clearTimeout(this._holdTimeout),Xn(document,"touchend touchcancel contextmenu",this._cancel,this),Xn(document,"touchmove",this._onMove,this)},_onMove:function(f){var b=f.touches[0];this._newPos=new De(b.clientX,b.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(f,b){var M=new MouseEvent(f,{bubbles:!0,cancelable:!0,view:window,screenX:b.screenX,screenY:b.screenY,clientX:b.clientX,clientY:b.clientY});M._simulated=!0,b.target.dispatchEvent(M)}});Yn.addInitHook("addHandler","tapHold",jr),Yn.mergeOptions({touchZoom:ht.touch,bounceAtZoomLimits:!0});var xh=Ua.extend({addHooks:function(){Cn(this._map._container,"leaflet-touch-zoom"),An(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Jr(this._map._container,"leaflet-touch-zoom"),Xn(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(f){var b=this._map;if(!(!f.touches||f.touches.length!==2||b._animatingZoom||this._zooming)){var M=b.mouseEventToContainerPoint(f.touches[0]),V=b.mouseEventToContainerPoint(f.touches[1]);this._centerPoint=b.getSize()._divideBy(2),this._startLatLng=b.containerPointToLatLng(this._centerPoint),b.options.touchZoom!=="center"&&(this._pinchStartLatLng=b.containerPointToLatLng(M.add(V)._divideBy(2))),this._startDist=M.distanceTo(V),this._startZoom=b.getZoom(),this._moved=!1,this._zooming=!0,b._stop(),An(document,"touchmove",this._onTouchMove,this),An(document,"touchend touchcancel",this._onTouchEnd,this),uo(f)}},_onTouchMove:function(f){if(!(!f.touches||f.touches.length!==2||!this._zooming)){var b=this._map,M=b.mouseEventToContainerPoint(f.touches[0]),V=b.mouseEventToContainerPoint(f.touches[1]),re=M.distanceTo(V)/this._startDist;if(this._zoom=b.getScaleZoom(re,this._startZoom),!b.options.bounceAtZoomLimits&&(this._zoom<b.getMinZoom()&&re<1||this._zoom>b.getMaxZoom()&&re>1)&&(this._zoom=b._limitZoom(this._zoom)),b.options.touchZoom==="center"){if(this._center=this._startLatLng,re===1)return}else{var me=M._add(V)._divideBy(2)._subtract(this._centerPoint);if(re===1&&me.x===0&&me.y===0)return;this._center=b.unproject(b.project(this._pinchStartLatLng,this._zoom).subtract(me),this._zoom)}this._moved||(b._moveStart(!0,!1),this._moved=!0),ee(this._animRequest);var Ce=u(b._move,b,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=X(Ce,this,!0),uo(f)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,ee(this._animRequest),Xn(document,"touchmove",this._onTouchMove,this),Xn(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Yn.addInitHook("addHandler","touchZoom",xh),Yn.BoxZoom=Af,Yn.DoubleClickZoom=jd,Yn.Drag=Of,Yn.Keyboard=Im,Yn.ScrollWheelZoom=ry,Yn.TapHold=jr,Yn.TouchZoom=xh,n.Bounds=ce,n.Browser=ht,n.CRS=He,n.Canvas=Jt,n.Circle=Ef,n.CircleMarker=wf,n.Class=oe,n.Control=xs,n.DivIcon=dc,n.DivOverlay=si,n.DomEvent=cr,n.DomUtil=Kg,n.Draggable=qa,n.Evented=Be,n.FeatureGroup=Zs,n.GeoJSON=ha,n.GridLayer=pa,n.Handler=Ua,n.Icon=uc,n.ImageOverlay=Tf,n.LatLng=$e,n.LatLngBounds=Ee,n.Layer=ws,n.LayerGroup=lc,n.LineUtil=wv,n.Map=Yn,n.Marker=cc,n.Mixin=bv,n.Path=_l,n.Point=De,n.PolyUtil=ch,n.Polygon=Es,n.Polyline=Va,n.Popup=Ss,n.PosAnimation=gf,n.Projection=Br,n.Rectangle=Cm,n.Renderer=Ji,n.SVG=Vt,n.SVGOverlay=_h,n.TileLayer=fu,n.Tooltip=Ko,n.Transformation=Dt,n.Util=ue,n.VideoOverlay=Sm,n.bind=u,n.bounds=xe,n.canvas=Pf,n.circle=Ev,n.circleMarker=Bd,n.control=uu,n.divIcon=da,n.extend=i,n.featureGroup=zd,n.geoJSON=yh,n.geoJson=fc,n.gridLayer=Sv,n.icon=Fd,n.imageOverlay=Qg,n.latLng=be,n.latLngBounds=Ge,n.layerGroup=Dd,n.map=pm,n.marker=wm,n.point=ve,n.polygon=Fo,n.polyline=oi,n.popup=Tm,n.rectangle=ny,n.setOptions=O,n.stamp=p,n.svg=mc,n.svgOverlay=Cf,n.tileLayer=ty,n.tooltip=Ha,n.transformation=Qt,n.version=r,n.videoOverlay=ey;var $d=window.L;n.noConflict=function(){return window.L=$d,this},window.L=n})})(XI,XI.exports);var Zf=XI.exports;function mne(e,t){const n=Zf.map(e).setView(t||[20.5937,78.9629],t?15:5);return Zf.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(n),n}function YI(e){return`<div>
        <div>
            <img src=${e.img||qB} alt="house-image"/>
        </div>
        <div>
            <a href="/list/${e.id}"><h3>${e.title}</h3><a>
            <p>${e.bedroom} Bedroom</p>
            <span><b>$ ${e.price}</b></span>
        </div>
    </div>`}function fD(e,t){const n=[],r=[],i=[],o=Zf.icon({iconUrl:pX,iconSize:[30,30]}),u=Zf.icon({iconUrl:mX,iconSize:[30,30]});if(!t)return[];if(e==null||e.map(l=>{switch(l.type){case"buy":const p=Zf.marker([l.latitude,l.longitude],{icon:o});l.img&&p.bindPopup(YI(l)),n.push(p);break;case"rent":const g=Zf.marker([l.latitude,l.longitude],{icon:u});l.img&&g.bindPopup(YI(l)),r.push(g);break}}),+n.length>0){const l=Zf.layerGroup(n);l.addTo(t),i.push(l)}if(+r.length>0){const l=Zf.layerGroup(r);l.addTo(t),i.push(l)}return i}function j6({List:e,map:t,setMap:n,geoExtent:r}){const[i,o]=qe.useState(),[u,l]=qe.useState(),[p,g]=qe.useState(!1);return qe.useEffect(()=>{if(p){i&&(t==null||t.removeLayer(i)),u&&(t==null||t.removeLayer(u));const[x,y]=fD(e,t);o(x),l(y)}else{const x=mne("map",r);n&&n(x);const[y,_]=fD(e,x);o(y),l(_),g(!0)}},[e]),he.jsx("div",{className:"map",id:"map"})}var $6={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.1.3/LICENSE.txt
 */(function(e,t){(function(n,r){e.exports=r()})(wr,function(){var n={},r={};function i(u,l,p){if(r[u]=p,u==="index"){var g="var sharedModule = {}; ("+r.shared+")(sharedModule); ("+r.worker+")(sharedModule);",x={};return r.shared(x),r.index(n,x),typeof window<"u"&&n.setWorkerUrl(window.URL.createObjectURL(new Blob([g],{type:"text/javascript"}))),n}}i("shared",["exports"],function(u){function l(c,s,h,m){return new(h||(h=Promise))(function(E,I){function P(W){try{$(m.next(W))}catch(ne){I(ne)}}function F(W){try{$(m.throw(W))}catch(ne){I(ne)}}function $(W){var ne;W.done?E(W.value):(ne=W.value,ne instanceof h?ne:new h(function(ie){ie(ne)})).then(P,F)}$((m=m.apply(c,s||[])).next())})}function p(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}typeof SuppressedError=="function"&&SuppressedError;var g=x;function x(c,s){this.x=c,this.y=s}x.prototype={clone:function(){return new x(this.x,this.y)},add:function(c){return this.clone()._add(c)},sub:function(c){return this.clone()._sub(c)},multByPoint:function(c){return this.clone()._multByPoint(c)},divByPoint:function(c){return this.clone()._divByPoint(c)},mult:function(c){return this.clone()._mult(c)},div:function(c){return this.clone()._div(c)},rotate:function(c){return this.clone()._rotate(c)},rotateAround:function(c,s){return this.clone()._rotateAround(c,s)},matMult:function(c){return this.clone()._matMult(c)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(c){return this.x===c.x&&this.y===c.y},dist:function(c){return Math.sqrt(this.distSqr(c))},distSqr:function(c){var s=c.x-this.x,h=c.y-this.y;return s*s+h*h},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith:function(c){return this.angleWithSep(c.x,c.y)},angleWithSep:function(c,s){return Math.atan2(this.x*s-this.y*c,this.x*c+this.y*s)},_matMult:function(c){var s=c[2]*this.x+c[3]*this.y;return this.x=c[0]*this.x+c[1]*this.y,this.y=s,this},_add:function(c){return this.x+=c.x,this.y+=c.y,this},_sub:function(c){return this.x-=c.x,this.y-=c.y,this},_mult:function(c){return this.x*=c,this.y*=c,this},_div:function(c){return this.x/=c,this.y/=c,this},_multByPoint:function(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint:function(c){return this.x/=c.x,this.y/=c.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var c=this.y;return this.y=this.x,this.x=-c,this},_rotate:function(c){var s=Math.cos(c),h=Math.sin(c),m=h*this.x+s*this.y;return this.x=s*this.x-h*this.y,this.y=m,this},_rotateAround:function(c,s){var h=Math.cos(c),m=Math.sin(c),E=s.y+m*(this.x-s.x)+h*(this.y-s.y);return this.x=s.x+h*(this.x-s.x)-m*(this.y-s.y),this.y=E,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},x.convert=function(c){return c instanceof x?c:Array.isArray(c)?new x(c[0],c[1]):c};var y=p(g),_=T;function T(c,s,h,m){this.cx=3*c,this.bx=3*(h-c)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(m-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=c,this.p1y=s,this.p2x=h,this.p2y=m}T.prototype={sampleCurveX:function(c){return((this.ax*c+this.bx)*c+this.cx)*c},sampleCurveY:function(c){return((this.ay*c+this.by)*c+this.cy)*c},sampleCurveDerivativeX:function(c){return(3*this.ax*c+2*this.bx)*c+this.cx},solveCurveX:function(c,s){if(s===void 0&&(s=1e-6),c<0)return 0;if(c>1)return 1;for(var h=c,m=0;m<8;m++){var E=this.sampleCurveX(h)-c;if(Math.abs(E)<s)return h;var I=this.sampleCurveDerivativeX(h);if(Math.abs(I)<1e-6)break;h-=E/I}var P=0,F=1;for(h=c,m=0;m<20&&(E=this.sampleCurveX(h),!(Math.abs(E-c)<s));m++)c>E?P=h:F=h,h=.5*(F-P)+P;return h},solve:function(c,s){return this.sampleCurveY(this.solveCurveX(c,s))}};var A=p(_);let O,N;function k(){return O==null&&(O=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),O}function R(){if(N==null&&(N=!1,k())){const s=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(s){for(let m=0;m<5*5;m++){const E=4*m;s.fillStyle=`rgb(${E},${E+1},${E+2})`,s.fillRect(m%5,Math.floor(m/5),1,1)}const h=s.getImageData(0,0,5,5).data;for(let m=0;m<5*5*4;m++)if(m%4!=3&&h[m]!==m){N=!0;break}}}return N||!1}function z(c,s,h,m){const E=new A(c,s,h,m);return function(I){return E.solve(I)}}const D=z(.25,.1,.25,1);function U(c,s,h){return Math.min(h,Math.max(s,c))}function q(c,s,h){const m=h-s,E=((c-s)%m+m)%m+s;return E===s?h:E}function G(c,...s){for(const h of s)for(const m in h)c[m]=h[m];return c}let H=1;function J(c,s,h){const m={};for(const E in c)m[E]=s.call(h||this,c[E],E,c);return m}function Y(c,s,h){const m={};for(const E in c)s.call(h||this,c[E],E,c)&&(m[E]=c[E]);return m}function X(c){return Array.isArray(c)?c.map(X):typeof c=="object"&&c?J(c,X):c}const ee={};function ue(c){ee[c]||(typeof console<"u"&&console.warn(c),ee[c]=!0)}function oe(c,s,h){return(h.y-c.y)*(s.x-c.x)>(s.y-c.y)*(h.x-c.x)}function we(c){let s=0;for(let h,m,E=0,I=c.length,P=I-1;E<I;P=E++)h=c[E],m=c[P],s+=(m.x-h.x)*(h.y+m.y);return s}function Ne(c){return typeof WorkerGlobalScope<"u"&&c!==void 0&&c instanceof WorkerGlobalScope}let Be=null;function De(c){return typeof ImageBitmap<"u"&&c instanceof ImageBitmap}const Ae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function ve(c,s,h,m,E){return l(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const I=new VideoFrame(c,{timestamp:0});try{const P=I==null?void 0:I.format;if(!P||!P.startsWith("BGR")&&!P.startsWith("RGB"))throw new Error(`Unrecognized format ${P}`);const F=P.startsWith("BGR"),$=new Uint8ClampedArray(m*E*4);if(yield I.copyTo($,function(W,ne,ie,fe,de){const _e=4*Math.max(-ne,0),Te=(Math.max(0,ie)-ie)*fe*4+_e,Re=4*fe,Ue=Math.max(0,ne),tt=Math.max(0,ie);return{rect:{x:Ue,y:tt,width:Math.min(W.width,ne+fe)-Ue,height:Math.min(W.height,ie+de)-tt},layout:[{offset:Te,stride:Re}]}}(c,s,h,m,E)),F)for(let W=0;W<$.length;W+=4){const ne=$[W];$[W]=$[W+2],$[W+2]=ne}return $}finally{I.close()}})}let ce,xe;const Ee="AbortError";function Ge(){return new Error(Ee)}const $e={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function be(c){return $e.REGISTERED_PROTOCOLS[c.substring(0,c.indexOf("://"))]}const He="global-dispatcher";class it extends Error{constructor(s,h,m,E){super(`AJAXError: ${h} (${s}): ${m}`),this.status=s,this.statusText=h,this.url=m,this.body=E}}const ct=()=>Ne(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,xt=function(c,s){if(/:\/\//.test(c.url)&&!/^https?:|^file:/.test(c.url)){const m=be(c.url);if(m)return m(c,s);if(Ne(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,targetMapId:He},s)}if(!(/^file:/.test(h=c.url)||/^file:/.test(ct())&&!/^\w+:/.test(h))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(m,E){return l(this,void 0,void 0,function*(){const I=new Request(m.url,{method:m.method||"GET",body:m.body,credentials:m.credentials,headers:m.headers,cache:m.cache,referrer:ct(),signal:E.signal});m.type==="json"&&I.headers.set("Accept","application/json");const P=yield fetch(I);if(!P.ok){const W=yield P.blob();throw new it(P.status,P.statusText,m.url,W)}let F;F=m.type==="arrayBuffer"||m.type==="image"?P.arrayBuffer():m.type==="json"?P.json():P.text();const $=yield F;if(E.signal.aborted)throw Ge();return{data:$,cacheControl:P.headers.get("Cache-Control"),expires:P.headers.get("Expires")}})}(c,s);if(Ne(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,mustQueue:!0,targetMapId:He},s)}var h;return function(m,E){return new Promise((I,P)=>{const F=new XMLHttpRequest;F.open(m.method||"GET",m.url,!0),m.type!=="arrayBuffer"&&m.type!=="image"||(F.responseType="arraybuffer");for(const $ in m.headers)F.setRequestHeader($,m.headers[$]);m.type==="json"&&(F.responseType="text",F.setRequestHeader("Accept","application/json")),F.withCredentials=m.credentials==="include",F.onerror=()=>{P(new Error(F.statusText))},F.onload=()=>{if(!E.signal.aborted)if((F.status>=200&&F.status<300||F.status===0)&&F.response!==null){let $=F.response;if(m.type==="json")try{$=JSON.parse(F.response)}catch(W){return void P(W)}I({data:$,cacheControl:F.getResponseHeader("Cache-Control"),expires:F.getResponseHeader("Expires")})}else{const $=new Blob([F.response],{type:F.getResponseHeader("Content-Type")});P(new it(F.status,F.statusText,m.url,$))}},E.signal.addEventListener("abort",()=>{F.abort(),P(Ge())}),F.send(m.body)})}(c,s)};function Dt(c){if(!c||c.indexOf("://")<=0||c.indexOf("data:image/")===0||c.indexOf("blob:")===0)return!0;const s=new URL(c),h=window.location;return s.protocol===h.protocol&&s.host===h.host}function Qt(c,s,h){h[c]&&h[c].indexOf(s)!==-1||(h[c]=h[c]||[],h[c].push(s))}function Ft(c,s,h){if(h&&h[c]){const m=h[c].indexOf(s);m!==-1&&h[c].splice(m,1)}}class Kt{constructor(s,h={}){G(this,h),this.type=s}}class Gt extends Kt{constructor(s,h={}){super("error",G({error:s},h))}}class Tr{on(s,h){return this._listeners=this._listeners||{},Qt(s,h,this._listeners),this}off(s,h){return Ft(s,h,this._listeners),Ft(s,h,this._oneTimeListeners),this}once(s,h){return h?(this._oneTimeListeners=this._oneTimeListeners||{},Qt(s,h,this._oneTimeListeners),this):new Promise(m=>this.once(s,m))}fire(s,h){typeof s=="string"&&(s=new Kt(s,h||{}));const m=s.type;if(this.listens(m)){s.target=this;const E=this._listeners&&this._listeners[m]?this._listeners[m].slice():[];for(const F of E)F.call(this,s);const I=this._oneTimeListeners&&this._oneTimeListeners[m]?this._oneTimeListeners[m].slice():[];for(const F of I)Ft(m,F,this._oneTimeListeners),F.call(this,s);const P=this._eventedParent;P&&(G(s,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),P.fire(s))}else s instanceof Gt&&console.error(s.error);return this}listens(s){return this._listeners&&this._listeners[s]&&this._listeners[s].length>0||this._oneTimeListeners&&this._oneTimeListeners[s]&&this._oneTimeListeners[s].length>0||this._eventedParent&&this._eventedParent.listens(s)}setEventedParent(s,h){return this._eventedParent=s,this._eventedParentData=h,this}}var rt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const lt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function gt(c,s){const h={};for(const m in c)m!=="ref"&&(h[m]=c[m]);return lt.forEach(m=>{m in s&&(h[m]=s[m])}),h}function _t(c,s){if(Array.isArray(c)){if(!Array.isArray(s)||c.length!==s.length)return!1;for(let h=0;h<c.length;h++)if(!_t(c[h],s[h]))return!1;return!0}if(typeof c=="object"&&c!==null&&s!==null){if(typeof s!="object"||Object.keys(c).length!==Object.keys(s).length)return!1;for(const h in c)if(!_t(c[h],s[h]))return!1;return!0}return c===s}function Pt(c,s){c.push(s)}function je(c,s,h){Pt(h,{command:"addSource",args:[c,s[c]]})}function vt(c,s,h){Pt(s,{command:"removeSource",args:[c]}),h[c]=!0}function St(c,s,h,m){vt(c,h,m),je(c,s,h)}function Lt(c,s,h){let m;for(m in c[h])if(Object.prototype.hasOwnProperty.call(c[h],m)&&m!=="data"&&!_t(c[h][m],s[h][m]))return!1;for(m in s[h])if(Object.prototype.hasOwnProperty.call(s[h],m)&&m!=="data"&&!_t(c[h][m],s[h][m]))return!1;return!0}function en(c,s,h,m,E,I){c=c||{},s=s||{};for(const P in c)Object.prototype.hasOwnProperty.call(c,P)&&(_t(c[P],s[P])||h.push({command:I,args:[m,P,s[P],E]}));for(const P in s)Object.prototype.hasOwnProperty.call(s,P)&&!Object.prototype.hasOwnProperty.call(c,P)&&(_t(c[P],s[P])||h.push({command:I,args:[m,P,s[P],E]}))}function wn(c){return c.id}function gn(c,s){return c[s.id]=s,c}class bt{constructor(s,h,m,E){this.message=(s?`${s}: `:"")+m,E&&(this.identifier=E),h!=null&&h.__line__&&(this.line=h.__line__)}}function Un(c,...s){for(const h of s)for(const m in h)c[m]=h[m];return c}class yr extends Error{constructor(s,h){super(h),this.message=h,this.key=s}}class Vs{constructor(s,h=[]){this.parent=s,this.bindings={};for(const[m,E]of h)this.bindings[m]=E}concat(s){return new Vs(this,s)}get(s){if(this.bindings[s])return this.bindings[s];if(this.parent)return this.parent.get(s);throw new Error(`${s} not found in scope.`)}has(s){return!!this.bindings[s]||!!this.parent&&this.parent.has(s)}}const Xr={kind:"null"},kt={kind:"number"},_n={kind:"string"},Pn={kind:"boolean"},Cr={kind:"color"},Zo={kind:"object"},Tn={kind:"value"},Gs={kind:"collator"},Vr={kind:"formatted"},Oe={kind:"padding"},K={kind:"resolvedImage"},te={kind:"variableAnchorOffsetCollection"};function ae(c,s){return{kind:"array",itemType:c,N:s}}function pe(c){if(c.kind==="array"){const s=pe(c.itemType);return typeof c.N=="number"?`array<${s}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${s}>`}return c.kind}const ke=[Xr,kt,_n,Pn,Cr,Vr,Zo,ae(Tn),Oe,K,te];function ge(c,s){if(s.kind==="error")return null;if(c.kind==="array"){if(s.kind==="array"&&(s.N===0&&s.itemType.kind==="value"||!ge(c.itemType,s.itemType))&&(typeof c.N!="number"||c.N===s.N))return null}else{if(c.kind===s.kind)return null;if(c.kind==="value"){for(const h of ke)if(!ge(h,s))return null}}return`Expected ${pe(c)} but found ${pe(s)} instead.`}function ze(c,s){return s.some(h=>h.kind===c.kind)}function Ie(c,s){return s.some(h=>h==="null"?c===null:h==="array"?Array.isArray(c):h==="object"?c&&!Array.isArray(c)&&typeof c=="object":h===typeof c)}function Ve(c,s){return c.kind==="array"&&s.kind==="array"?c.itemType.kind===s.itemType.kind&&typeof c.N=="number":c.kind===s.kind}const Qe=.96422,ot=.82521,et=4/29,ht=6/29,Zt=3*ht*ht,an=ht*ht*ht,sn=Math.PI/180,kn=180/Math.PI;function ir(c){return(c%=360)<0&&(c+=360),c}function hr([c,s,h,m]){let E,I;const P=vn((.2225045*(c=lr(c))+.7168786*(s=lr(s))+.0606169*(h=lr(h)))/1);c===s&&s===h?E=I=P:(E=vn((.4360747*c+.3850649*s+.1430804*h)/Qe),I=vn((.0139322*c+.0971045*s+.7141733*h)/ot));const F=116*P-16;return[F<0?0:F,500*(E-P),200*(P-I),m]}function lr(c){return c<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function vn(c){return c>an?Math.pow(c,1/3):c/Zt+et}function Nr([c,s,h,m]){let E=(c+16)/116,I=isNaN(s)?E:E+s/500,P=isNaN(h)?E:E-h/200;return E=1*ji(E),I=Qe*ji(I),P=ot*ji(P),[Gr(3.1338561*I-1.6168667*E-.4906146*P),Gr(-.9787684*I+1.9161415*E+.033454*P),Gr(.0719453*I-.2289914*E+1.4052427*P),m]}function Gr(c){return(c=c<=.00304?12.92*c:1.055*Math.pow(c,1/2.4)-.055)<0?0:c>1?1:c}function ji(c){return c>ht?c*c*c:Zt*(c-et)}function bi(c){return parseInt(c.padEnd(2,c),16)/255}function Yr(c,s){return Fn(s?c/100:c,0,1)}function Fn(c,s,h){return Math.min(Math.max(s,c),h)}function ur(c){return!c.some(Number.isNaN)}const To={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class or{constructor(s,h,m,E=1,I=!0){this.r=s,this.g=h,this.b=m,this.a=E,I||(this.r*=E,this.g*=E,this.b*=E,E||this.overwriteGetter("rgb",[s,h,m,E]))}static parse(s){if(s instanceof or)return s;if(typeof s!="string")return;const h=function(m){if((m=m.toLowerCase().trim())==="transparent")return[0,0,0,0];const E=To[m];if(E){const[P,F,$]=E;return[P/255,F/255,$/255,1]}if(m.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(m)){const P=m.length<6?1:2;let F=1;return[bi(m.slice(F,F+=P)),bi(m.slice(F,F+=P)),bi(m.slice(F,F+=P)),bi(m.slice(F,F+P)||"ff")]}if(m.startsWith("rgb")){const P=m.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(P){const[F,$,W,ne,ie,fe,de,_e,Te,Re,Ue,tt]=P,Ze=[ne||" ",de||" ",Re].join("");if(Ze==="  "||Ze==="  /"||Ze===",,"||Ze===",,,"){const Ye=[W,fe,Te].join(""),yt=Ye==="%%%"?100:Ye===""?255:0;if(yt){const wt=[Fn(+$/yt,0,1),Fn(+ie/yt,0,1),Fn(+_e/yt,0,1),Ue?Yr(+Ue,tt):1];if(ur(wt))return wt}}return}}const I=m.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(I){const[P,F,$,W,ne,ie,fe,de,_e]=I,Te=[$||" ",ne||" ",fe].join("");if(Te==="  "||Te==="  /"||Te===",,"||Te===",,,"){const Re=[+F,Fn(+W,0,100),Fn(+ie,0,100),de?Yr(+de,_e):1];if(ur(Re))return function([Ue,tt,Ze,Ye]){function yt(wt){const Xt=(wt+Ue/30)%12,ln=tt*Math.min(Ze,1-Ze);return Ze-ln*Math.max(-1,Math.min(Xt-3,9-Xt,1))}return Ue=ir(Ue),tt/=100,Ze/=100,[yt(0),yt(8),yt(4),Ye]}(Re)}}}(s);return h?new or(...h,!1):void 0}get rgb(){const{r:s,g:h,b:m,a:E}=this,I=E||1/0;return this.overwriteGetter("rgb",[s/I,h/I,m/I,E])}get hcl(){return this.overwriteGetter("hcl",function(s){const[h,m,E,I]=hr(s),P=Math.sqrt(m*m+E*E);return[Math.round(1e4*P)?ir(Math.atan2(E,m)*kn):NaN,P,h,I]}(this.rgb))}get lab(){return this.overwriteGetter("lab",hr(this.rgb))}overwriteGetter(s,h){return Object.defineProperty(this,s,{value:h}),h}toString(){const[s,h,m,E]=this.rgb;return`rgba(${[s,h,m].map(I=>Math.round(255*I)).join(",")},${E})`}}or.black=new or(0,0,0,1),or.white=new or(1,1,1,1),or.transparent=new or(0,0,0,0),or.red=new or(1,0,0,1);class cf{constructor(s,h,m){this.sensitivity=s?h?"variant":"case":h?"accent":"base",this.locale=m,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(s,h){return this.collator.compare(s,h)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class hm{constructor(s,h,m,E,I){this.text=s,this.image=h,this.scale=m,this.fontStack=E,this.textColor=I}}class ms{constructor(s){this.sections=s}static fromString(s){return new ms([new hm(s,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(s=>s.text.length!==0||s.image&&s.image.name.length!==0)}static factory(s){return s instanceof ms?s:ms.fromString(s)}toString(){return this.sections.length===0?"":this.sections.map(s=>s.text).join("")}}class Co{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof Co)return s;if(typeof s=="number")return new Co([s,s,s,s]);if(Array.isArray(s)&&!(s.length<1||s.length>4)){for(const h of s)if(typeof h!="number")return;switch(s.length){case 1:s=[s[0],s[0],s[0],s[0]];break;case 2:s=[s[0],s[1],s[0],s[1]];break;case 3:s=[s[0],s[1],s[2],s[1]]}return new Co(s)}}toString(){return JSON.stringify(this.values)}}const gl=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class gs{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof gs)return s;if(Array.isArray(s)&&!(s.length<1)&&s.length%2==0){for(let h=0;h<s.length;h+=2){const m=s[h],E=s[h+1];if(typeof m!="string"||!gl.has(m)||!Array.isArray(E)||E.length!==2||typeof E[0]!="number"||typeof E[1]!="number")return}return new gs(s)}}toString(){return JSON.stringify(this.values)}}class ys{constructor(s){this.name=s.name,this.available=s.available}toString(){return this.name}static fromString(s){return s?new ys({name:s,available:!1}):null}}function $a(c,s,h,m){return typeof c=="number"&&c>=0&&c<=255&&typeof s=="number"&&s>=0&&s<=255&&typeof h=="number"&&h>=0&&h<=255?m===void 0||typeof m=="number"&&m>=0&&m<=1?null:`Invalid rgba value [${[c,s,h,m].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof m=="number"?[c,s,h,m]:[c,s,h]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function sr(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof or||c instanceof cf||c instanceof ms||c instanceof Co||c instanceof gs||c instanceof ys)return!0;if(Array.isArray(c)){for(const s of c)if(!sr(s))return!1;return!0}if(typeof c=="object"){for(const s in c)if(!sr(c[s]))return!1;return!0}return!1}function Bn(c){if(c===null)return Xr;if(typeof c=="string")return _n;if(typeof c=="boolean")return Pn;if(typeof c=="number")return kt;if(c instanceof or)return Cr;if(c instanceof cf)return Gs;if(c instanceof ms)return Vr;if(c instanceof Co)return Oe;if(c instanceof gs)return te;if(c instanceof ys)return K;if(Array.isArray(c)){const s=c.length;let h;for(const m of c){const E=Bn(m);if(h){if(h===E)continue;h=Tn;break}h=E}return ae(h||Tn,s)}return Zo}function ou(c){const s=typeof c;return c===null?"":s==="string"||s==="number"||s==="boolean"?String(c):c instanceof or||c instanceof ms||c instanceof Co||c instanceof gs||c instanceof ys?c.toString():JSON.stringify(c)}class _s{constructor(s,h){this.type=s,this.value=h}static parse(s,h){if(s.length!==2)return h.error(`'literal' expression requires exactly one argument, but found ${s.length-1} instead.`);if(!sr(s[1]))return h.error("invalid value");const m=s[1];let E=Bn(m);const I=h.expectedType;return E.kind!=="array"||E.N!==0||!I||I.kind!=="array"||typeof I.N=="number"&&I.N!==0||(E=I),new _s(E,m)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Lr{constructor(s){this.name="ExpressionEvaluationError",this.message=s}toJSON(){return this.message}}const th={string:_n,number:kt,boolean:Pn,object:Zo};class Cn{constructor(s,h){this.type=s,this.args=h}static parse(s,h){if(s.length<2)return h.error("Expected at least one argument.");let m,E=1;const I=s[0];if(I==="array"){let F,$;if(s.length>2){const W=s[1];if(typeof W!="string"||!(W in th)||W==="object")return h.error('The item type argument of "array" must be one of string, number, boolean',1);F=th[W],E++}else F=Tn;if(s.length>3){if(s[2]!==null&&(typeof s[2]!="number"||s[2]<0||s[2]!==Math.floor(s[2])))return h.error('The length argument to "array" must be a positive integer literal',2);$=s[2],E++}m=ae(F,$)}else{if(!th[I])throw new Error(`Types doesn't contain name = ${I}`);m=th[I]}const P=[];for(;E<s.length;E++){const F=h.parse(s[E],E,Tn);if(!F)return null;P.push(F)}return new Cn(m,P)}evaluate(s){for(let h=0;h<this.args.length;h++){const m=this.args[h].evaluate(s);if(!ge(this.type,Bn(m)))return m;if(h===this.args.length-1)throw new Lr(`Expected value to be of type ${pe(this.type)}, but found ${pe(Bn(m))} instead.`)}throw new Error}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}const Jr={"to-boolean":Pn,"to-color":Cr,"to-number":kt,"to-string":_n};class Hs{constructor(s,h){this.type=s,this.args=h}static parse(s,h){if(s.length<2)return h.error("Expected at least one argument.");const m=s[0];if(!Jr[m])throw new Error(`Can't parse ${m} as it is not part of the known types`);if((m==="to-boolean"||m==="to-string")&&s.length!==2)return h.error("Expected one argument.");const E=Jr[m],I=[];for(let P=1;P<s.length;P++){const F=h.parse(s[P],P,Tn);if(!F)return null;I.push(F)}return new Hs(E,I)}evaluate(s){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(s);case"color":{let h,m;for(const E of this.args){if(h=E.evaluate(s),m=null,h instanceof or)return h;if(typeof h=="string"){const I=s.parseColor(h);if(I)return I}else if(Array.isArray(h)&&(m=h.length<3||h.length>4?`Invalid rbga value ${JSON.stringify(h)}: expected an array containing either three or four numeric values.`:$a(h[0],h[1],h[2],h[3]),!m))return new or(h[0]/255,h[1]/255,h[2]/255,h[3])}throw new Lr(m||`Could not parse color from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"padding":{let h;for(const m of this.args){h=m.evaluate(s);const E=Co.parse(h);if(E)return E}throw new Lr(`Could not parse padding from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"variableAnchorOffsetCollection":{let h;for(const m of this.args){h=m.evaluate(s);const E=gs.parse(h);if(E)return E}throw new Lr(`Could not parse variableAnchorOffsetCollection from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"number":{let h=null;for(const m of this.args){if(h=m.evaluate(s),h===null)return 0;const E=Number(h);if(!isNaN(E))return E}throw new Lr(`Could not convert ${JSON.stringify(h)} to number.`)}case"formatted":return ms.fromString(ou(this.args[0].evaluate(s)));case"resolvedImage":return ys.fromString(ou(this.args[0].evaluate(s)));default:return ou(this.args[0].evaluate(s))}}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}const su=["Unknown","Point","LineString","Polygon"];class qn{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?su[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(s){let h=this._parseColorCache[s];return h||(h=this._parseColorCache[s]=or.parse(s)),h}}class Id{constructor(s,h,m=[],E,I=new Vs,P=[]){this.registry=s,this.path=m,this.key=m.map(F=>`[${F}]`).join(""),this.scope=I,this.errors=P,this.expectedType=E,this._isConstant=h}parse(s,h,m,E,I={}){return h?this.concat(h,m,E)._parse(s,I):this._parse(s,I)}_parse(s,h){function m(E,I,P){return P==="assert"?new Cn(I,[E]):P==="coerce"?new Hs(I,[E]):E}if(s!==null&&typeof s!="string"&&typeof s!="boolean"&&typeof s!="number"||(s=["literal",s]),Array.isArray(s)){if(s.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const E=s[0];if(typeof E!="string")return this.error(`Expression name must be a string, but found ${typeof E} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const I=this.registry[E];if(I){let P=I.parse(s,this);if(!P)return null;if(this.expectedType){const F=this.expectedType,$=P.type;if(F.kind!=="string"&&F.kind!=="number"&&F.kind!=="boolean"&&F.kind!=="object"&&F.kind!=="array"||$.kind!=="value")if(F.kind!=="color"&&F.kind!=="formatted"&&F.kind!=="resolvedImage"||$.kind!=="value"&&$.kind!=="string")if(F.kind!=="padding"||$.kind!=="value"&&$.kind!=="number"&&$.kind!=="array")if(F.kind!=="variableAnchorOffsetCollection"||$.kind!=="value"&&$.kind!=="array"){if(this.checkSubtype(F,$))return null}else P=m(P,F,h.typeAnnotation||"coerce");else P=m(P,F,h.typeAnnotation||"coerce");else P=m(P,F,h.typeAnnotation||"coerce");else P=m(P,F,h.typeAnnotation||"assert")}if(!(P instanceof _s)&&P.type.kind!=="resolvedImage"&&this._isConstant(P)){const F=new qn;try{P=new _s(P.type,P.evaluate(F))}catch($){return this.error($.message),null}}return P}return this.error(`Unknown expression "${E}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(s===void 0?"'undefined' value invalid. Use null instead.":typeof s=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof s} instead.`)}concat(s,h,m){const E=typeof s=="number"?this.path.concat(s):this.path,I=m?this.scope.concat(m):this.scope;return new Id(this.registry,this._isConstant,E,h||null,I,this.errors)}error(s,...h){const m=`${this.key}${h.map(E=>`[${E}]`).join("")}`;this.errors.push(new yr(m,s))}checkSubtype(s,h){const m=ge(s,h);return m&&this.error(m),m}}class yl{constructor(s,h,m){this.type=Gs,this.locale=m,this.caseSensitive=s,this.diacriticSensitive=h}static parse(s,h){if(s.length!==2)return h.error("Expected one argument.");const m=s[1];if(typeof m!="object"||Array.isArray(m))return h.error("Collator options argument must be an object.");const E=h.parse(m["case-sensitive"]!==void 0&&m["case-sensitive"],1,Pn);if(!E)return null;const I=h.parse(m["diacritic-sensitive"]!==void 0&&m["diacritic-sensitive"],1,Pn);if(!I)return null;let P=null;return m.locale&&(P=h.parse(m.locale,1,_n),!P)?null:new yl(E,I,P)}evaluate(s){return new cf(this.caseSensitive.evaluate(s),this.diacriticSensitive.evaluate(s),this.locale?this.locale.evaluate(s):null)}eachChild(s){s(this.caseSensitive),s(this.diacriticSensitive),this.locale&&s(this.locale)}outputDefined(){return!1}}const Wo=8192;function ii(c,s){c[0]=Math.min(c[0],s[0]),c[1]=Math.min(c[1],s[1]),c[2]=Math.max(c[2],s[0]),c[3]=Math.max(c[3],s[1])}function ua(c,s){return!(c[0]<=s[0]||c[2]>=s[2]||c[1]<=s[1]||c[3]>=s[3])}function hf(c,s){const h=(180+c[0])/360,m=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,E=Math.pow(2,s.z);return[Math.round(h*E*Wo),Math.round(m*E*Wo)]}function nh(c,s,h){const m=c[0]-s[0],E=c[1]-s[1],I=c[0]-h[0],P=c[1]-h[1];return m*P-I*E==0&&m*I<=0&&E*P<=0}function rh(c,s){let h=!1;for(let P=0,F=s.length;P<F;P++){const $=s[P];for(let W=0,ne=$.length;W<ne-1;W++){if(nh(c,$[W],$[W+1]))return!1;(E=$[W])[1]>(m=c)[1]!=(I=$[W+1])[1]>m[1]&&m[0]<(I[0]-E[0])*(m[1]-E[1])/(I[1]-E[1])+E[0]&&(h=!h)}}var m,E,I;return h}function ff(c,s){for(let h=0;h<s.length;h++)if(rh(c,s[h]))return!0;return!1}function Pd(c,s,h,m){const E=m[0]-h[0],I=m[1]-h[1],P=(c[0]-h[0])*I-E*(c[1]-h[1]),F=(s[0]-h[0])*I-E*(s[1]-h[1]);return P>0&&F<0||P<0&&F>0}function fm(c,s,h){for(const W of h)for(let ne=0;ne<W.length-1;++ne)if((F=[(P=W[ne+1])[0]-(I=W[ne])[0],P[1]-I[1]])[0]*($=[(E=s)[0]-(m=c)[0],E[1]-m[1]])[1]-F[1]*$[0]!=0&&Pd(m,E,I,P)&&Pd(I,P,m,E))return!0;var m,E,I,P,F,$;return!1}function df(c,s){for(let h=0;h<c.length;++h)if(!rh(c[h],s))return!1;for(let h=0;h<c.length-1;++h)if(fm(c[h],c[h+1],s))return!1;return!0}function Ld(c,s){for(let h=0;h<s.length;h++)if(df(c,s[h]))return!0;return!1}function ih(c,s,h){const m=[];for(let E=0;E<c.length;E++){const I=[];for(let P=0;P<c[E].length;P++){const F=hf(c[E][P],h);ii(s,F),I.push(F)}m.push(I)}return m}function pf(c,s,h){const m=[];for(let E=0;E<c.length;E++){const I=ih(c[E],s,h);m.push(I)}return m}function dm(c,s,h,m){if(c[0]<h[0]||c[0]>h[2]){const E=.5*m;let I=c[0]-h[0]>E?-m:h[0]-c[0]>E?m:0;I===0&&(I=c[0]-h[2]>E?-m:h[2]-c[0]>E?m:0),c[0]+=I}ii(s,c)}function oh(c,s,h,m){const E=Math.pow(2,m.z)*Wo,I=[m.x*Wo,m.y*Wo],P=[];for(const F of c)for(const $ of F){const W=[$.x+I[0],$.y+I[1]];dm(W,s,h,E),P.push(W)}return P}function Kg(c,s,h,m){const E=Math.pow(2,m.z)*Wo,I=[m.x*Wo,m.y*Wo],P=[];for(const $ of c){const W=[];for(const ne of $){const ie=[ne.x+I[0],ne.y+I[1]];ii(s,ie),W.push(ie)}P.push(W)}if(s[2]-s[0]<=E/2){(F=s)[0]=F[1]=1/0,F[2]=F[3]=-1/0;for(const $ of P)for(const W of $)dm(W,s,h,E)}var F;return P}class An{constructor(s,h){this.type=Pn,this.geojson=s,this.geometries=h}static parse(s,h){if(s.length!==2)return h.error(`'within' expression requires exactly one argument, but found ${s.length-1} instead.`);if(sr(s[1])){const m=s[1];if(m.type==="FeatureCollection"){const E=[];for(const I of m.features){const{type:P,coordinates:F}=I.geometry;P==="Polygon"&&E.push(F),P==="MultiPolygon"&&E.push(...F)}if(E.length)return new An(m,{type:"MultiPolygon",coordinates:E})}else if(m.type==="Feature"){const E=m.geometry.type;if(E==="Polygon"||E==="MultiPolygon")return new An(m,m.geometry)}else if(m.type==="Polygon"||m.type==="MultiPolygon")return new An(m,m)}return h.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(s.geometry()!=null&&s.canonicalID()!=null){if(s.geometryType()==="Point")return function(h,m){const E=[1/0,1/0,-1/0,-1/0],I=[1/0,1/0,-1/0,-1/0],P=h.canonicalID();if(m.type==="Polygon"){const F=ih(m.coordinates,I,P),$=oh(h.geometry(),E,I,P);if(!ua(E,I))return!1;for(const W of $)if(!rh(W,F))return!1}if(m.type==="MultiPolygon"){const F=pf(m.coordinates,I,P),$=oh(h.geometry(),E,I,P);if(!ua(E,I))return!1;for(const W of $)if(!ff(W,F))return!1}return!0}(s,this.geometries);if(s.geometryType()==="LineString")return function(h,m){const E=[1/0,1/0,-1/0,-1/0],I=[1/0,1/0,-1/0,-1/0],P=h.canonicalID();if(m.type==="Polygon"){const F=ih(m.coordinates,I,P),$=Kg(h.geometry(),E,I,P);if(!ua(E,I))return!1;for(const W of $)if(!df(W,F))return!1}if(m.type==="MultiPolygon"){const F=pf(m.coordinates,I,P),$=Kg(h.geometry(),E,I,P);if(!ua(E,I))return!1;for(const W of $)if(!Ld(W,F))return!1}return!0}(s,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class vs{constructor(s,h){this.type=h.type,this.name=s,this.boundExpression=h}static parse(s,h){if(s.length!==2||typeof s[1]!="string")return h.error("'var' expression requires exactly one string literal argument.");const m=s[1];return h.scope.has(m)?new vs(m,h.scope.get(m)):h.error(`Unknown variable "${m}". Make sure "${m}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(s){return this.boundExpression.evaluate(s)}eachChild(){}outputDefined(){return!1}}class Xn{constructor(s,h,m,E){this.name=s,this.type=h,this._evaluate=m,this.args=E}evaluate(s){return this._evaluate(s,this.args)}eachChild(s){this.args.forEach(s)}outputDefined(){return!1}static parse(s,h){const m=s[0],E=Xn.definitions[m];if(!E)return h.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0);const I=Array.isArray(E)?E[0]:E.type,P=Array.isArray(E)?[[E[1],E[2]]]:E.overloads,F=P.filter(([W])=>!Array.isArray(W)||W.length===s.length-1);let $=null;for(const[W,ne]of F){$=new Id(h.registry,sh,h.path,null,h.scope);const ie=[];let fe=!1;for(let de=1;de<s.length;de++){const _e=s[de],Te=Array.isArray(W)?W[de-1]:W.type,Re=$.parse(_e,1+ie.length,Te);if(!Re){fe=!0;break}ie.push(Re)}if(!fe)if(Array.isArray(W)&&W.length!==ie.length)$.error(`Expected ${W.length} arguments, but found ${ie.length} instead.`);else{for(let de=0;de<ie.length;de++){const _e=Array.isArray(W)?W[de]:W.type,Te=ie[de];$.concat(de+1).checkSubtype(_e,Te.type)}if($.errors.length===0)return new Xn(m,I,ne,ie)}}if(F.length===1)h.errors.push(...$.errors);else{const W=(F.length?F:P).map(([ie])=>{return fe=ie,Array.isArray(fe)?`(${fe.map(pe).join(", ")})`:`(${pe(fe.type)}...)`;var fe}).join(" | "),ne=[];for(let ie=1;ie<s.length;ie++){const fe=h.parse(s[ie],1+ne.length);if(!fe)return null;ne.push(pe(fe.type))}h.error(`Expected arguments of type ${W}, but found (${ne.join(", ")}) instead.`)}return null}static register(s,h){Xn.definitions=h;for(const m in h)s[m]=Xn}}function sh(c){if(c instanceof vs)return sh(c.boundExpression);if(c instanceof Xn&&c.name==="error"||c instanceof yl||c instanceof An)return!1;const s=c instanceof Hs||c instanceof Cn;let h=!0;return c.eachChild(m=>{h=s?h&&sh(m):h&&m instanceof _s}),!!h&&ah(c)&&ic(c,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function ah(c){if(c instanceof Xn&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof An)return!1;let s=!0;return c.eachChild(h=>{s&&!ah(h)&&(s=!1)}),s}function rc(c){if(c instanceof Xn&&c.name==="feature-state")return!1;let s=!0;return c.eachChild(h=>{s&&!rc(h)&&(s=!1)}),s}function ic(c,s){if(c instanceof Xn&&s.indexOf(c.name)>=0)return!1;let h=!0;return c.eachChild(m=>{h&&!ic(m,s)&&(h=!1)}),h}function ca(c,s){const h=c.length-1;let m,E,I=0,P=h,F=0;for(;I<=P;)if(F=Math.floor((I+P)/2),m=c[F],E=c[F+1],m<=s){if(F===h||s<E)return F;I=F+1}else{if(!(m>s))throw new Lr("Input is not a number.");P=F-1}return 0}class oc{constructor(s,h,m){this.type=s,this.input=h,this.labels=[],this.outputs=[];for(const[E,I]of m)this.labels.push(E),this.outputs.push(I)}static parse(s,h){if(s.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return h.error("Expected an even number of arguments.");const m=h.parse(s[1],1,kt);if(!m)return null;const E=[];let I=null;h.expectedType&&h.expectedType.kind!=="value"&&(I=h.expectedType);for(let P=1;P<s.length;P+=2){const F=P===1?-1/0:s[P],$=s[P+1],W=P,ne=P+1;if(typeof F!="number")return h.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',W);if(E.length&&E[E.length-1][0]>=F)return h.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',W);const ie=h.parse($,ne,I);if(!ie)return null;I=I||ie.type,E.push([F,ie])}return new oc(I,m,E)}evaluate(s){const h=this.labels,m=this.outputs;if(h.length===1)return m[0].evaluate(s);const E=this.input.evaluate(s);if(E<=h[0])return m[0].evaluate(s);const I=h.length;return E>=h[I-1]?m[I-1].evaluate(s):m[ca(h,E)].evaluate(s)}eachChild(s){s(this.input);for(const h of this.outputs)s(h)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}function mf(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var uo=au;function au(c,s,h,m){this.cx=3*c,this.bx=3*(h-c)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(m-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=c,this.p1y=s,this.p2x=h,this.p2y=m}au.prototype={sampleCurveX:function(c){return((this.ax*c+this.bx)*c+this.cx)*c},sampleCurveY:function(c){return((this.ay*c+this.by)*c+this.cy)*c},sampleCurveDerivativeX:function(c){return(3*this.ax*c+2*this.bx)*c+this.cx},solveCurveX:function(c,s){if(s===void 0&&(s=1e-6),c<0)return 0;if(c>1)return 1;for(var h=c,m=0;m<8;m++){var E=this.sampleCurveX(h)-c;if(Math.abs(E)<s)return h;var I=this.sampleCurveDerivativeX(h);if(Math.abs(I)<1e-6)break;h-=E/I}var P=0,F=1;for(h=c,m=0;m<20&&(E=this.sampleCurveX(h),!(Math.abs(E-c)<s));m++)c>E?P=h:F=h,h=.5*(F-P)+P;return h},solve:function(c,s){return this.sampleCurveY(this.solveCurveX(c,s))}};var Xg=mf(uo);function lu(c,s,h){return c+h*(s-c)}function Ad(c,s,h){return c.map((m,E)=>lu(m,s[E],h))}const Io={number:lu,color:function(c,s,h,m="rgb"){switch(m){case"rgb":{const[E,I,P,F]=Ad(c.rgb,s.rgb,h);return new or(E,I,P,F,!1)}case"hcl":{const[E,I,P,F]=c.hcl,[$,W,ne,ie]=s.hcl;let fe,de;if(isNaN(E)||isNaN($))isNaN(E)?isNaN($)?fe=NaN:(fe=$,P!==1&&P!==0||(de=W)):(fe=E,ne!==1&&ne!==0||(de=I));else{let tt=$-E;$>E&&tt>180?tt-=360:$<E&&E-$>180&&(tt+=360),fe=E+h*tt}const[_e,Te,Re,Ue]=function([tt,Ze,Ye,yt]){return tt=isNaN(tt)?0:tt*sn,Nr([Ye,Math.cos(tt)*Ze,Math.sin(tt)*Ze,yt])}([fe,de??lu(I,W,h),lu(P,ne,h),lu(F,ie,h)]);return new or(_e,Te,Re,Ue,!1)}case"lab":{const[E,I,P,F]=Nr(Ad(c.lab,s.lab,h));return new or(E,I,P,F,!1)}}},array:Ad,padding:function(c,s,h){return new Co(Ad(c.values,s.values,h))},variableAnchorOffsetCollection:function(c,s,h){const m=c.values,E=s.values;if(m.length!==E.length)throw new Lr(`Cannot interpolate values of different length. from: ${c.toString()}, to: ${s.toString()}`);const I=[];for(let P=0;P<m.length;P+=2){if(m[P]!==E[P])throw new Lr(`Cannot interpolate values containing mismatched anchors. from[${P}]: ${m[P]}, to[${P}]: ${E[P]}`);I.push(m[P]);const[F,$]=m[P+1],[W,ne]=E[P+1];I.push([lu(F,W,h),lu($,ne,h)])}return new gs(I)}};class Yi{constructor(s,h,m,E,I){this.type=s,this.operator=h,this.interpolation=m,this.input=E,this.labels=[],this.outputs=[];for(const[P,F]of I)this.labels.push(P),this.outputs.push(F)}static interpolationFactor(s,h,m,E){let I=0;if(s.name==="exponential")I=cr(h,s.base,m,E);else if(s.name==="linear")I=cr(h,1,m,E);else if(s.name==="cubic-bezier"){const P=s.controlPoints;I=new Xg(P[0],P[1],P[2],P[3]).solve(cr(h,1,m,E))}return I}static parse(s,h){let[m,E,I,...P]=s;if(!Array.isArray(E)||E.length===0)return h.error("Expected an interpolation type expression.",1);if(E[0]==="linear")E={name:"linear"};else if(E[0]==="exponential"){const W=E[1];if(typeof W!="number")return h.error("Exponential interpolation requires a numeric base.",1,1);E={name:"exponential",base:W}}else{if(E[0]!=="cubic-bezier")return h.error(`Unknown interpolation type ${String(E[0])}`,1,0);{const W=E.slice(1);if(W.length!==4||W.some(ne=>typeof ne!="number"||ne<0||ne>1))return h.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);E={name:"cubic-bezier",controlPoints:W}}}if(s.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return h.error("Expected an even number of arguments.");if(I=h.parse(I,2,kt),!I)return null;const F=[];let $=null;m==="interpolate-hcl"||m==="interpolate-lab"?$=Cr:h.expectedType&&h.expectedType.kind!=="value"&&($=h.expectedType);for(let W=0;W<P.length;W+=2){const ne=P[W],ie=P[W+1],fe=W+3,de=W+4;if(typeof ne!="number")return h.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',fe);if(F.length&&F[F.length-1][0]>=ne)return h.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',fe);const _e=h.parse(ie,de,$);if(!_e)return null;$=$||_e.type,F.push([ne,_e])}return Ve($,kt)||Ve($,Cr)||Ve($,Oe)||Ve($,te)||Ve($,ae(kt))?new Yi($,m,E,I,F):h.error(`Type ${pe($)} is not interpolatable.`)}evaluate(s){const h=this.labels,m=this.outputs;if(h.length===1)return m[0].evaluate(s);const E=this.input.evaluate(s);if(E<=h[0])return m[0].evaluate(s);const I=h.length;if(E>=h[I-1])return m[I-1].evaluate(s);const P=ca(h,E),F=Yi.interpolationFactor(this.interpolation,E,h[P],h[P+1]),$=m[P].evaluate(s),W=m[P+1].evaluate(s);switch(this.operator){case"interpolate":return Io[this.type.kind]($,W,F);case"interpolate-hcl":return Io.color($,W,F,"hcl");case"interpolate-lab":return Io.color($,W,F,"lab")}}eachChild(s){s(this.input);for(const h of this.outputs)s(h)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}function cr(c,s,h,m){const E=m-h,I=c-h;return E===0?0:s===1?I/E:(Math.pow(s,I)-1)/(Math.pow(s,E)-1)}class gf{constructor(s,h){this.type=s,this.args=h}static parse(s,h){if(s.length<2)return h.error("Expectected at least one argument.");let m=null;const E=h.expectedType;E&&E.kind!=="value"&&(m=E);const I=[];for(const F of s.slice(1)){const $=h.parse(F,1+I.length,m,void 0,{typeAnnotation:"omit"});if(!$)return null;m=m||$.type,I.push($)}if(!m)throw new Error("No output type");const P=E&&I.some(F=>ge(E,F.type));return new gf(P?Tn:m,I)}evaluate(s){let h,m=null,E=0;for(const I of this.args)if(E++,m=I.evaluate(s),m&&m instanceof ys&&!m.available&&(h||(h=m.name),m=null,E===this.args.length&&(m=h)),m!==null)break;return m}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}class Yn{constructor(s,h){this.type=h.type,this.bindings=[].concat(s),this.result=h}evaluate(s){return this.result.evaluate(s)}eachChild(s){for(const h of this.bindings)s(h[1]);s(this.result)}static parse(s,h){if(s.length<4)return h.error(`Expected at least 3 arguments, but found ${s.length-1} instead.`);const m=[];for(let I=1;I<s.length-1;I+=2){const P=s[I];if(typeof P!="string")return h.error(`Expected string, but found ${typeof P} instead.`,I);if(/[^a-zA-Z0-9_]/.test(P))return h.error("Variable names must contain only alphanumeric characters or '_'.",I);const F=h.parse(s[I+1],I+1);if(!F)return null;m.push([P,F])}const E=h.parse(s[s.length-1],s.length-1,h.expectedType,m);return E?new Yn(m,E):null}outputDefined(){return this.result.outputDefined()}}class pm{constructor(s,h,m){this.type=s,this.index=h,this.input=m}static parse(s,h){if(s.length!==3)return h.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const m=h.parse(s[1],1,kt),E=h.parse(s[2],2,ae(h.expectedType||Tn));return m&&E?new pm(E.type.itemType,m,E):null}evaluate(s){const h=this.index.evaluate(s),m=this.input.evaluate(s);if(h<0)throw new Lr(`Array index out of bounds: ${h} < 0.`);if(h>=m.length)throw new Lr(`Array index out of bounds: ${h} > ${m.length-1}.`);if(h!==Math.floor(h))throw new Lr(`Array index must be an integer, but found ${h} instead.`);return m[h]}eachChild(s){s(this.index),s(this.input)}outputDefined(){return!1}}class xs{constructor(s,h){this.type=Pn,this.needle=s,this.haystack=h}static parse(s,h){if(s.length!==3)return h.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const m=h.parse(s[1],1,Tn),E=h.parse(s[2],2,Tn);return m&&E?ze(m.type,[Pn,_n,kt,Xr,Tn])?new xs(m,E):h.error(`Expected first argument to be of type boolean, string, number or null, but found ${pe(m.type)} instead`):null}evaluate(s){const h=this.needle.evaluate(s),m=this.haystack.evaluate(s);if(!m)return!1;if(!Ie(h,["boolean","string","number","null"]))throw new Lr(`Expected first argument to be of type boolean, string, number or null, but found ${pe(Bn(h))} instead.`);if(!Ie(m,["string","array"]))throw new Lr(`Expected second argument to be of type array or string, but found ${pe(Bn(m))} instead.`);return m.indexOf(h)>=0}eachChild(s){s(this.needle),s(this.haystack)}outputDefined(){return!0}}class uu{constructor(s,h,m){this.type=kt,this.needle=s,this.haystack=h,this.fromIndex=m}static parse(s,h){if(s.length<=2||s.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const m=h.parse(s[1],1,Tn),E=h.parse(s[2],2,Tn);if(!m||!E)return null;if(!ze(m.type,[Pn,_n,kt,Xr,Tn]))return h.error(`Expected first argument to be of type boolean, string, number or null, but found ${pe(m.type)} instead`);if(s.length===4){const I=h.parse(s[3],3,kt);return I?new uu(m,E,I):null}return new uu(m,E)}evaluate(s){const h=this.needle.evaluate(s),m=this.haystack.evaluate(s);if(!Ie(h,["boolean","string","number","null"]))throw new Lr(`Expected first argument to be of type boolean, string, number or null, but found ${pe(Bn(h))} instead.`);if(!Ie(m,["string","array"]))throw new Lr(`Expected second argument to be of type array or string, but found ${pe(Bn(m))} instead.`);if(this.fromIndex){const E=this.fromIndex.evaluate(s);return m.indexOf(h,E)}return m.indexOf(h)}eachChild(s){s(this.needle),s(this.haystack),this.fromIndex&&s(this.fromIndex)}outputDefined(){return!1}}class Od{constructor(s,h,m,E,I,P){this.inputType=s,this.type=h,this.input=m,this.cases=E,this.outputs=I,this.otherwise=P}static parse(s,h){if(s.length<5)return h.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if(s.length%2!=1)return h.error("Expected an even number of arguments.");let m,E;h.expectedType&&h.expectedType.kind!=="value"&&(E=h.expectedType);const I={},P=[];for(let W=2;W<s.length-1;W+=2){let ne=s[W];const ie=s[W+1];Array.isArray(ne)||(ne=[ne]);const fe=h.concat(W);if(ne.length===0)return fe.error("Expected at least one branch label.");for(const _e of ne){if(typeof _e!="number"&&typeof _e!="string")return fe.error("Branch labels must be numbers or strings.");if(typeof _e=="number"&&Math.abs(_e)>Number.MAX_SAFE_INTEGER)return fe.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof _e=="number"&&Math.floor(_e)!==_e)return fe.error("Numeric branch labels must be integer values.");if(m){if(fe.checkSubtype(m,Bn(_e)))return null}else m=Bn(_e);if(I[String(_e)]!==void 0)return fe.error("Branch labels must be unique.");I[String(_e)]=P.length}const de=h.parse(ie,W,E);if(!de)return null;E=E||de.type,P.push(de)}const F=h.parse(s[1],1,Tn);if(!F)return null;const $=h.parse(s[s.length-1],s.length-1,E);return $?F.type.kind!=="value"&&h.concat(1).checkSubtype(m,F.type)?null:new Od(m,E,F,I,P,$):null}evaluate(s){const h=this.input.evaluate(s);return(Bn(h)===this.inputType&&this.outputs[this.cases[h]]||this.otherwise).evaluate(s)}eachChild(s){s(this.input),this.outputs.forEach(s),s(this.otherwise)}outputDefined(){return this.outputs.every(s=>s.outputDefined())&&this.otherwise.outputDefined()}}class mm{constructor(s,h,m){this.type=s,this.branches=h,this.otherwise=m}static parse(s,h){if(s.length<4)return h.error(`Expected at least 3 arguments, but found only ${s.length-1}.`);if(s.length%2!=0)return h.error("Expected an odd number of arguments.");let m;h.expectedType&&h.expectedType.kind!=="value"&&(m=h.expectedType);const E=[];for(let P=1;P<s.length-1;P+=2){const F=h.parse(s[P],P,Pn);if(!F)return null;const $=h.parse(s[P+1],P+1,m);if(!$)return null;E.push([F,$]),m=m||$.type}const I=h.parse(s[s.length-1],s.length-1,m);if(!I)return null;if(!m)throw new Error("Can't infer output type");return new mm(m,E,I)}evaluate(s){for(const[h,m]of this.branches)if(h.evaluate(s))return m.evaluate(s);return this.otherwise.evaluate(s)}eachChild(s){for(const[h,m]of this.branches)s(h),s(m);s(this.otherwise)}outputDefined(){return this.branches.every(([s,h])=>h.outputDefined())&&this.otherwise.outputDefined()}}class lh{constructor(s,h,m,E){this.type=s,this.input=h,this.beginIndex=m,this.endIndex=E}static parse(s,h){if(s.length<=2||s.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const m=h.parse(s[1],1,Tn),E=h.parse(s[2],2,kt);if(!m||!E)return null;if(!ze(m.type,[ae(Tn),_n,Tn]))return h.error(`Expected first argument to be of type array or string, but found ${pe(m.type)} instead`);if(s.length===4){const I=h.parse(s[3],3,kt);return I?new lh(m.type,m,E,I):null}return new lh(m.type,m,E)}evaluate(s){const h=this.input.evaluate(s),m=this.beginIndex.evaluate(s);if(!Ie(h,["string","array"]))throw new Lr(`Expected first argument to be of type array or string, but found ${pe(Bn(h))} instead.`);if(this.endIndex){const E=this.endIndex.evaluate(s);return h.slice(m,E)}return h.slice(m)}eachChild(s){s(this.input),s(this.beginIndex),this.endIndex&&s(this.endIndex)}outputDefined(){return!1}}function Yg(c,s){return c==="=="||c==="!="?s.kind==="boolean"||s.kind==="string"||s.kind==="number"||s.kind==="null"||s.kind==="value":s.kind==="string"||s.kind==="number"||s.kind==="value"}function gm(c,s,h,m){return m.compare(s,h)===0}function uh(c,s,h){const m=c!=="=="&&c!=="!=";return class U6{constructor(I,P,F){this.type=Pn,this.lhs=I,this.rhs=P,this.collator=F,this.hasUntypedArgument=I.type.kind==="value"||P.type.kind==="value"}static parse(I,P){if(I.length!==3&&I.length!==4)return P.error("Expected two or three arguments.");const F=I[0];let $=P.parse(I[1],1,Tn);if(!$)return null;if(!Yg(F,$.type))return P.concat(1).error(`"${F}" comparisons are not supported for type '${pe($.type)}'.`);let W=P.parse(I[2],2,Tn);if(!W)return null;if(!Yg(F,W.type))return P.concat(2).error(`"${F}" comparisons are not supported for type '${pe(W.type)}'.`);if($.type.kind!==W.type.kind&&$.type.kind!=="value"&&W.type.kind!=="value")return P.error(`Cannot compare types '${pe($.type)}' and '${pe(W.type)}'.`);m&&($.type.kind==="value"&&W.type.kind!=="value"?$=new Cn(W.type,[$]):$.type.kind!=="value"&&W.type.kind==="value"&&(W=new Cn($.type,[W])));let ne=null;if(I.length===4){if($.type.kind!=="string"&&W.type.kind!=="string"&&$.type.kind!=="value"&&W.type.kind!=="value")return P.error("Cannot use collator to compare non-string types.");if(ne=P.parse(I[3],3,Gs),!ne)return null}return new U6($,W,ne)}evaluate(I){const P=this.lhs.evaluate(I),F=this.rhs.evaluate(I);if(m&&this.hasUntypedArgument){const $=Bn(P),W=Bn(F);if($.kind!==W.kind||$.kind!=="string"&&$.kind!=="number")throw new Lr(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${$.kind}, ${W.kind}) instead.`)}if(this.collator&&!m&&this.hasUntypedArgument){const $=Bn(P),W=Bn(F);if($.kind!=="string"||W.kind!=="string")return s(I,P,F)}return this.collator?h(I,P,F,this.collator.evaluate(I)):s(I,P,F)}eachChild(I){I(this.lhs),I(this.rhs),this.collator&&I(this.collator)}outputDefined(){return!0}}}const vv=uh("==",function(c,s,h){return s===h},gm),ym=uh("!=",function(c,s,h){return s!==h},function(c,s,h,m){return!gm(0,s,h,m)}),xv=uh("<",function(c,s,h){return s<h},function(c,s,h,m){return m.compare(s,h)<0}),Ua=uh(">",function(c,s,h){return s>h},function(c,s,h,m){return m.compare(s,h)>0}),bv=uh("<=",function(c,s,h){return s<=h},function(c,s,h,m){return m.compare(s,h)<=0}),Jg=uh(">=",function(c,s,h){return s>=h},function(c,s,h,m){return m.compare(s,h)>=0});class qa{constructor(s,h,m,E,I){this.type=_n,this.number=s,this.locale=h,this.currency=m,this.minFractionDigits=E,this.maxFractionDigits=I}static parse(s,h){if(s.length!==3)return h.error("Expected two arguments.");const m=h.parse(s[1],1,kt);if(!m)return null;const E=s[2];if(typeof E!="object"||Array.isArray(E))return h.error("NumberFormat options argument must be an object.");let I=null;if(E.locale&&(I=h.parse(E.locale,1,_n),!I))return null;let P=null;if(E.currency&&(P=h.parse(E.currency,1,_n),!P))return null;let F=null;if(E["min-fraction-digits"]&&(F=h.parse(E["min-fraction-digits"],1,kt),!F))return null;let $=null;return E["max-fraction-digits"]&&($=h.parse(E["max-fraction-digits"],1,kt),!$)?null:new qa(m,I,P,F,$)}evaluate(s){return new Intl.NumberFormat(this.locale?this.locale.evaluate(s):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(s):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(s):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(s):void 0}).format(this.number.evaluate(s))}eachChild(s){s(this.number),this.locale&&s(this.locale),this.currency&&s(this.currency),this.minFractionDigits&&s(this.minFractionDigits),this.maxFractionDigits&&s(this.maxFractionDigits)}outputDefined(){return!1}}class yf{constructor(s){this.type=Vr,this.sections=s}static parse(s,h){if(s.length<2)return h.error("Expected at least one argument.");const m=s[1];if(!Array.isArray(m)&&typeof m=="object")return h.error("First argument must be an image or text section.");const E=[];let I=!1;for(let P=1;P<=s.length-1;++P){const F=s[P];if(I&&typeof F=="object"&&!Array.isArray(F)){I=!1;let $=null;if(F["font-scale"]&&($=h.parse(F["font-scale"],1,kt),!$))return null;let W=null;if(F["text-font"]&&(W=h.parse(F["text-font"],1,ae(_n)),!W))return null;let ne=null;if(F["text-color"]&&(ne=h.parse(F["text-color"],1,Cr),!ne))return null;const ie=E[E.length-1];ie.scale=$,ie.font=W,ie.textColor=ne}else{const $=h.parse(s[P],1,Tn);if(!$)return null;const W=$.type.kind;if(W!=="string"&&W!=="value"&&W!=="null"&&W!=="resolvedImage")return h.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");I=!0,E.push({content:$,scale:null,font:null,textColor:null})}}return new yf(E)}evaluate(s){return new ms(this.sections.map(h=>{const m=h.content.evaluate(s);return Bn(m)===K?new hm("",m,null,null,null):new hm(ou(m),null,h.scale?h.scale.evaluate(s):null,h.font?h.font.evaluate(s).join(","):null,h.textColor?h.textColor.evaluate(s):null)}))}eachChild(s){for(const h of this.sections)s(h.content),h.scale&&s(h.scale),h.font&&s(h.font),h.textColor&&s(h.textColor)}outputDefined(){return!1}}class kd{constructor(s){this.type=K,this.input=s}static parse(s,h){if(s.length!==2)return h.error("Expected two arguments.");const m=h.parse(s[1],1,_n);return m?new kd(m):h.error("No image name provided.")}evaluate(s){const h=this.input.evaluate(s),m=ys.fromString(h);return m&&s.availableImages&&(m.available=s.availableImages.indexOf(h)>-1),m}eachChild(s){s(this.input)}outputDefined(){return!1}}class _f{constructor(s){this.type=kt,this.input=s}static parse(s,h){if(s.length!==2)return h.error(`Expected 1 argument, but found ${s.length-1} instead.`);const m=h.parse(s[1],1);return m?m.type.kind!=="array"&&m.type.kind!=="string"&&m.type.kind!=="value"?h.error(`Expected argument of type string or array, but found ${pe(m.type)} instead.`):new _f(m):null}evaluate(s){const h=this.input.evaluate(s);if(typeof h=="string"||Array.isArray(h))return h.length;throw new Lr(`Expected value to be of type string or array, but found ${pe(Bn(h))} instead.`)}eachChild(s){s(this.input)}outputDefined(){return!1}}const ch={"==":vv,"!=":ym,">":Ua,"<":xv,">=":Jg,"<=":bv,array:Cn,at:pm,boolean:Cn,case:mm,coalesce:gf,collator:yl,format:yf,image:kd,in:xs,"index-of":uu,interpolate:Yi,"interpolate-hcl":Yi,"interpolate-lab":Yi,length:_f,let:Yn,literal:_s,match:Od,number:Cn,"number-format":qa,object:Cn,slice:lh,step:oc,string:Cn,"to-boolean":Hs,"to-color":Hs,"to-number":Hs,"to-string":Hs,var:vs,within:An};function _m(c,[s,h,m,E]){s=s.evaluate(c),h=h.evaluate(c),m=m.evaluate(c);const I=E?E.evaluate(c):1,P=$a(s,h,m,I);if(P)throw new Lr(P);return new or(s/255,h/255,m/255,I,!1)}function vm(c,s){return c in s}function xm(c,s){const h=s[c];return h===void 0?null:h}function sc(c){return{type:c}}function Rd(c){return{result:"success",value:c}}function hh(c){return{result:"error",value:c}}function ac(c){return c["property-type"]==="data-driven"||c["property-type"]==="cross-faded-data-driven"}function bm(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function fh(c){return!!c.expression&&c.expression.interpolated}function jn(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":c===null?"null":typeof c}function Md(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)}function vf(c){return c}function bs(c,s){const h=s.type==="color",m=c.stops&&typeof c.stops[0][0]=="object",E=m||!(m||c.property!==void 0),I=c.type||(fh(s)?"exponential":"interval");if(h||s.type==="padding"){const ne=h?or.parse:Co.parse;(c=Un({},c)).stops&&(c.stops=c.stops.map(ie=>[ie[0],ne(ie[1])])),c.default=ne(c.default?c.default:s.default)}if(c.colorSpace&&(P=c.colorSpace)!=="rgb"&&P!=="hcl"&&P!=="lab")throw new Error(`Unknown color space: "${c.colorSpace}"`);var P;let F,$,W;if(I==="exponential")F=Gn;else if(I==="interval")F=wv;else if(I==="categorical"){F=hi,$=Object.create(null);for(const ne of c.stops)$[ne[0]]=ne[1];W=typeof c.stops[0][0]}else{if(I!=="identity")throw new Error(`Unknown function type "${I}"`);F=xf}if(m){const ne={},ie=[];for(let _e=0;_e<c.stops.length;_e++){const Te=c.stops[_e],Re=Te[0].zoom;ne[Re]===void 0&&(ne[Re]={zoom:Re,type:c.type,property:c.property,default:c.default,stops:[]},ie.push(Re)),ne[Re].stops.push([Te[0].value,Te[1]])}const fe=[];for(const _e of ie)fe.push([ne[_e].zoom,bs(ne[_e],s)]);const de={name:"linear"};return{kind:"composite",interpolationType:de,interpolationFactor:Yi.interpolationFactor.bind(void 0,de),zoomStops:fe.map(_e=>_e[0]),evaluate:({zoom:_e},Te)=>Gn({stops:fe,base:c.base},s,_e).evaluate(_e,Te)}}if(E){const ne=I==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:ne,interpolationFactor:Yi.interpolationFactor.bind(void 0,ne),zoomStops:c.stops.map(ie=>ie[0]),evaluate:({zoom:ie})=>F(c,s,ie,$,W)}}return{kind:"source",evaluate(ne,ie){const fe=ie&&ie.properties?ie.properties[c.property]:void 0;return fe===void 0?dh(c.default,s.default):F(c,s,fe,$,W)}}}function dh(c,s,h){return c!==void 0?c:s!==void 0?s:h!==void 0?h:void 0}function hi(c,s,h,m,E){return dh(typeof h===E?m[h]:void 0,c.default,s.default)}function wv(c,s,h){if(jn(h)!=="number")return dh(c.default,s.default);const m=c.stops.length;if(m===1||h<=c.stops[0][0])return c.stops[0][1];if(h>=c.stops[m-1][0])return c.stops[m-1][1];const E=ca(c.stops.map(I=>I[0]),h);return c.stops[E][1]}function Gn(c,s,h){const m=c.base!==void 0?c.base:1;if(jn(h)!=="number")return dh(c.default,s.default);const E=c.stops.length;if(E===1||h<=c.stops[0][0])return c.stops[0][1];if(h>=c.stops[E-1][0])return c.stops[E-1][1];const I=ca(c.stops.map(ne=>ne[0]),h),P=function(ne,ie,fe,de){const _e=de-fe,Te=ne-fe;return _e===0?0:ie===1?Te/_e:(Math.pow(ie,Te)-1)/(Math.pow(ie,_e)-1)}(h,m,c.stops[I][0],c.stops[I+1][0]),F=c.stops[I][1],$=c.stops[I+1][1],W=Io[s.type]||vf;return typeof F.evaluate=="function"?{evaluate(...ne){const ie=F.evaluate.apply(void 0,ne),fe=$.evaluate.apply(void 0,ne);if(ie!==void 0&&fe!==void 0)return W(ie,fe,P,c.colorSpace)}}:W(F,$,P,c.colorSpace)}function xf(c,s,h){switch(s.type){case"color":h=or.parse(h);break;case"formatted":h=ms.fromString(h.toString());break;case"resolvedImage":h=ys.fromString(h.toString());break;case"padding":h=Co.parse(h);break;default:jn(h)===s.type||s.type==="enum"&&s.values[h]||(h=void 0)}return dh(h,c.default,s.default)}Xn.register(ch,{error:[{kind:"error"},[_n],(c,[s])=>{throw new Lr(s.evaluate(c))}],typeof:[_n,[Tn],(c,[s])=>pe(Bn(s.evaluate(c)))],"to-rgba":[ae(kt,4),[Cr],(c,[s])=>{const[h,m,E,I]=s.evaluate(c).rgb;return[255*h,255*m,255*E,I]}],rgb:[Cr,[kt,kt,kt],_m],rgba:[Cr,[kt,kt,kt,kt],_m],has:{type:Pn,overloads:[[[_n],(c,[s])=>vm(s.evaluate(c),c.properties())],[[_n,Zo],(c,[s,h])=>vm(s.evaluate(c),h.evaluate(c))]]},get:{type:Tn,overloads:[[[_n],(c,[s])=>xm(s.evaluate(c),c.properties())],[[_n,Zo],(c,[s,h])=>xm(s.evaluate(c),h.evaluate(c))]]},"feature-state":[Tn,[_n],(c,[s])=>xm(s.evaluate(c),c.featureState||{})],properties:[Zo,[],c=>c.properties()],"geometry-type":[_n,[],c=>c.geometryType()],id:[Tn,[],c=>c.id()],zoom:[kt,[],c=>c.globals.zoom],"heatmap-density":[kt,[],c=>c.globals.heatmapDensity||0],"line-progress":[kt,[],c=>c.globals.lineProgress||0],accumulated:[Tn,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[kt,sc(kt),(c,s)=>{let h=0;for(const m of s)h+=m.evaluate(c);return h}],"*":[kt,sc(kt),(c,s)=>{let h=1;for(const m of s)h*=m.evaluate(c);return h}],"-":{type:kt,overloads:[[[kt,kt],(c,[s,h])=>s.evaluate(c)-h.evaluate(c)],[[kt],(c,[s])=>-s.evaluate(c)]]},"/":[kt,[kt,kt],(c,[s,h])=>s.evaluate(c)/h.evaluate(c)],"%":[kt,[kt,kt],(c,[s,h])=>s.evaluate(c)%h.evaluate(c)],ln2:[kt,[],()=>Math.LN2],pi:[kt,[],()=>Math.PI],e:[kt,[],()=>Math.E],"^":[kt,[kt,kt],(c,[s,h])=>Math.pow(s.evaluate(c),h.evaluate(c))],sqrt:[kt,[kt],(c,[s])=>Math.sqrt(s.evaluate(c))],log10:[kt,[kt],(c,[s])=>Math.log(s.evaluate(c))/Math.LN10],ln:[kt,[kt],(c,[s])=>Math.log(s.evaluate(c))],log2:[kt,[kt],(c,[s])=>Math.log(s.evaluate(c))/Math.LN2],sin:[kt,[kt],(c,[s])=>Math.sin(s.evaluate(c))],cos:[kt,[kt],(c,[s])=>Math.cos(s.evaluate(c))],tan:[kt,[kt],(c,[s])=>Math.tan(s.evaluate(c))],asin:[kt,[kt],(c,[s])=>Math.asin(s.evaluate(c))],acos:[kt,[kt],(c,[s])=>Math.acos(s.evaluate(c))],atan:[kt,[kt],(c,[s])=>Math.atan(s.evaluate(c))],min:[kt,sc(kt),(c,s)=>Math.min(...s.map(h=>h.evaluate(c)))],max:[kt,sc(kt),(c,s)=>Math.max(...s.map(h=>h.evaluate(c)))],abs:[kt,[kt],(c,[s])=>Math.abs(s.evaluate(c))],round:[kt,[kt],(c,[s])=>{const h=s.evaluate(c);return h<0?-Math.round(-h):Math.round(h)}],floor:[kt,[kt],(c,[s])=>Math.floor(s.evaluate(c))],ceil:[kt,[kt],(c,[s])=>Math.ceil(s.evaluate(c))],"filter-==":[Pn,[_n,Tn],(c,[s,h])=>c.properties()[s.value]===h.value],"filter-id-==":[Pn,[Tn],(c,[s])=>c.id()===s.value],"filter-type-==":[Pn,[_n],(c,[s])=>c.geometryType()===s.value],"filter-<":[Pn,[_n,Tn],(c,[s,h])=>{const m=c.properties()[s.value],E=h.value;return typeof m==typeof E&&m<E}],"filter-id-<":[Pn,[Tn],(c,[s])=>{const h=c.id(),m=s.value;return typeof h==typeof m&&h<m}],"filter->":[Pn,[_n,Tn],(c,[s,h])=>{const m=c.properties()[s.value],E=h.value;return typeof m==typeof E&&m>E}],"filter-id->":[Pn,[Tn],(c,[s])=>{const h=c.id(),m=s.value;return typeof h==typeof m&&h>m}],"filter-<=":[Pn,[_n,Tn],(c,[s,h])=>{const m=c.properties()[s.value],E=h.value;return typeof m==typeof E&&m<=E}],"filter-id-<=":[Pn,[Tn],(c,[s])=>{const h=c.id(),m=s.value;return typeof h==typeof m&&h<=m}],"filter->=":[Pn,[_n,Tn],(c,[s,h])=>{const m=c.properties()[s.value],E=h.value;return typeof m==typeof E&&m>=E}],"filter-id->=":[Pn,[Tn],(c,[s])=>{const h=c.id(),m=s.value;return typeof h==typeof m&&h>=m}],"filter-has":[Pn,[Tn],(c,[s])=>s.value in c.properties()],"filter-has-id":[Pn,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[Pn,[ae(_n)],(c,[s])=>s.value.indexOf(c.geometryType())>=0],"filter-id-in":[Pn,[ae(Tn)],(c,[s])=>s.value.indexOf(c.id())>=0],"filter-in-small":[Pn,[_n,ae(Tn)],(c,[s,h])=>h.value.indexOf(c.properties()[s.value])>=0],"filter-in-large":[Pn,[_n,ae(Tn)],(c,[s,h])=>function(m,E,I,P){for(;I<=P;){const F=I+P>>1;if(E[F]===m)return!0;E[F]>m?P=F-1:I=F+1}return!1}(c.properties()[s.value],h.value,0,h.value.length-1)],all:{type:Pn,overloads:[[[Pn,Pn],(c,[s,h])=>s.evaluate(c)&&h.evaluate(c)],[sc(Pn),(c,s)=>{for(const h of s)if(!h.evaluate(c))return!1;return!0}]]},any:{type:Pn,overloads:[[[Pn,Pn],(c,[s,h])=>s.evaluate(c)||h.evaluate(c)],[sc(Pn),(c,s)=>{for(const h of s)if(h.evaluate(c))return!0;return!1}]]},"!":[Pn,[Pn],(c,[s])=>!s.evaluate(c)],"is-supported-script":[Pn,[_n],(c,[s])=>{const h=c.globals&&c.globals.isSupportedScript;return!h||h(s.evaluate(c))}],upcase:[_n,[_n],(c,[s])=>s.evaluate(c).toUpperCase()],downcase:[_n,[_n],(c,[s])=>s.evaluate(c).toLowerCase()],concat:[_n,sc(Tn),(c,s)=>s.map(h=>ou(h.evaluate(c))).join("")],"resolved-locale":[_n,[Gs],(c,[s])=>s.evaluate(c).resolvedLocale()]});class Br{constructor(s,h){var m;this.expression=s,this._warningHistory={},this._evaluator=new qn,this._defaultValue=h?(m=h).type==="color"&&Md(m.default)?new or(0,0,0,0):m.type==="color"?or.parse(m.default)||null:m.type==="padding"?Co.parse(m.default)||null:m.type==="variableAnchorOffsetCollection"?gs.parse(m.default)||null:m.default===void 0?null:m.default:null,this._enumValues=h&&h.type==="enum"?h.values:null}evaluateWithoutErrorHandling(s,h,m,E,I,P){return this._evaluator.globals=s,this._evaluator.feature=h,this._evaluator.featureState=m,this._evaluator.canonical=E,this._evaluator.availableImages=I||null,this._evaluator.formattedSection=P,this.expression.evaluate(this._evaluator)}evaluate(s,h,m,E,I,P){this._evaluator.globals=s,this._evaluator.feature=h||null,this._evaluator.featureState=m||null,this._evaluator.canonical=E,this._evaluator.availableImages=I||null,this._evaluator.formattedSection=P||null;try{const F=this.expression.evaluate(this._evaluator);if(F==null||typeof F=="number"&&F!=F)return this._defaultValue;if(this._enumValues&&!(F in this._enumValues))throw new Lr(`Expected value to be one of ${Object.keys(this._enumValues).map($=>JSON.stringify($)).join(", ")}, but found ${JSON.stringify(F)} instead.`);return F}catch(F){return this._warningHistory[F.message]||(this._warningHistory[F.message]=!0,typeof console<"u"&&console.warn(F.message)),this._defaultValue}}}function kr(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in ch}function cu(c,s){const h=new Id(ch,sh,[],s?function(E){const I={color:Cr,string:_n,number:kt,enum:_n,boolean:Pn,formatted:Vr,padding:Oe,resolvedImage:K,variableAnchorOffsetCollection:te};return E.type==="array"?ae(I[E.value]||Tn,E.length):I[E.type]}(s):void 0),m=h.parse(c,void 0,void 0,void 0,s&&s.type==="string"?{typeAnnotation:"coerce"}:void 0);return m?Rd(new Br(m,s)):hh(h.errors)}class Nd{constructor(s,h){this.kind=s,this._styleExpression=h,this.isStateDependent=s!=="constant"&&!rc(h.expression)}evaluateWithoutErrorHandling(s,h,m,E,I,P){return this._styleExpression.evaluateWithoutErrorHandling(s,h,m,E,I,P)}evaluate(s,h,m,E,I,P){return this._styleExpression.evaluate(s,h,m,E,I,P)}}class ws{constructor(s,h,m,E){this.kind=s,this.zoomStops=m,this._styleExpression=h,this.isStateDependent=s!=="camera"&&!rc(h.expression),this.interpolationType=E}evaluateWithoutErrorHandling(s,h,m,E,I,P){return this._styleExpression.evaluateWithoutErrorHandling(s,h,m,E,I,P)}evaluate(s,h,m,E,I,P){return this._styleExpression.evaluate(s,h,m,E,I,P)}interpolationFactor(s,h,m){return this.interpolationType?Yi.interpolationFactor(this.interpolationType,s,h,m):0}}function lc(c,s){const h=cu(c,s);if(h.result==="error")return h;const m=h.value.expression,E=ah(m);if(!E&&!ac(s))return hh([new yr("","data expressions not supported")]);const I=ic(m,["zoom"]);if(!I&&!bm(s))return hh([new yr("","zoom expressions not supported")]);const P=Zs(m);return P||I?P instanceof yr?hh([P]):P instanceof Yi&&!fh(s)?hh([new yr("",'"interpolate" expressions cannot be used with this property')]):Rd(P?new ws(E?"camera":"composite",h.value,P.labels,P instanceof Yi?P.interpolation:void 0):new Nd(E?"constant":"source",h.value)):hh([new yr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Dd{constructor(s,h){this._parameters=s,this._specification=h,Un(this,bs(this._parameters,this._specification))}static deserialize(s){return new Dd(s._parameters,s._specification)}static serialize(s){return{_parameters:s._parameters,_specification:s._specification}}}function Zs(c){let s=null;if(c instanceof Yn)s=Zs(c.result);else if(c instanceof gf){for(const h of c.args)if(s=Zs(h),s)break}else(c instanceof oc||c instanceof Yi)&&c.input instanceof Xn&&c.input.name==="zoom"&&(s=c);return s instanceof yr||c.eachChild(h=>{const m=Zs(h);m instanceof yr?s=m:!s&&m?s=new yr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):s&&m&&s!==m&&(s=new yr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),s}function zd(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(const s of c.slice(1))if(!zd(s)&&typeof s!="boolean")return!1;return!0;default:return!0}}const uc={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Fd(c){if(c==null)return{filter:()=>!0,needGeometry:!1};zd(c)||(c=cc(c));const s=cu(c,uc);if(s.result==="error")throw new Error(s.value.map(h=>`${h.key}: ${h.message}`).join(", "));return{filter:(h,m,E)=>s.value.evaluate(h,m,{},E),needGeometry:bf(c)}}function ph(c,s){return c<s?-1:c>s?1:0}function bf(c){if(!Array.isArray(c))return!1;if(c[0]==="within")return!0;for(let s=1;s<c.length;s++)if(bf(c[s]))return!0;return!1}function cc(c){if(!c)return!0;const s=c[0];return c.length<=1?s!=="any":s==="=="?wm(c[1],c[2],"=="):s==="!="?Bd(wm(c[1],c[2],"==")):s==="<"||s===">"||s==="<="||s===">="?wm(c[1],c[2],s):s==="any"?(h=c.slice(1),["any"].concat(h.map(cc))):s==="all"?["all"].concat(c.slice(1).map(cc)):s==="none"?["all"].concat(c.slice(1).map(cc).map(Bd)):s==="in"?_l(c[1],c.slice(2)):s==="!in"?Bd(_l(c[1],c.slice(2))):s==="has"?wf(c[1]):s==="!has"?Bd(wf(c[1])):s!=="within"||c;var h}function wm(c,s,h){switch(c){case"$type":return[`filter-type-${h}`,s];case"$id":return[`filter-id-${h}`,s];default:return[`filter-${h}`,c,s]}}function _l(c,s){if(s.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",s]];case"$id":return["filter-id-in",["literal",s]];default:return s.length>200&&!s.some(h=>typeof h!=typeof s[0])?["filter-in-large",c,["literal",s.sort(ph)]]:["filter-in-small",c,["literal",s]]}}function wf(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function Bd(c){return["!",c]}function Ef(c){const s=typeof c;if(s==="number"||s==="boolean"||s==="string"||c==null)return JSON.stringify(c);if(Array.isArray(c)){let E="[";for(const I of c)E+=`${Ef(I)},`;return`${E}]`}const h=Object.keys(c).sort();let m="{";for(let E=0;E<h.length;E++)m+=`${JSON.stringify(h[E])}:${Ef(c[h[E]])},`;return`${m}}`}function Ev(c){let s="";for(const h of lt)s+=`/${Ef(c[h])}`;return s}function Va(c){const s=c.value;return s?[new bt(c.key,s,"constants have been deprecated as of v8")]:[]}function oi(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function Es(c){if(Array.isArray(c))return c.map(Es);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){const s={};for(const h in c)s[h]=Es(c[h]);return s}return oi(c)}function Fo(c){const s=c.key,h=c.value,m=c.valueSpec||{},E=c.objectElementValidators||{},I=c.style,P=c.styleSpec,F=c.validateSpec;let $=[];const W=jn(h);if(W!=="object")return[new bt(s,h,`object expected, ${W} found`)];for(const ne in h){const ie=ne.split(".")[0],fe=m[ie]||m["*"];let de;if(E[ie])de=E[ie];else if(m[ie])de=F;else if(E["*"])de=E["*"];else{if(!m["*"]){$.push(new bt(s,h[ne],`unknown property "${ne}"`));continue}de=F}$=$.concat(de({key:(s&&`${s}.`)+ne,value:h[ne],valueSpec:fe,style:I,styleSpec:P,object:h,objectKey:ne,validateSpec:F},h))}for(const ne in m)E[ne]||m[ne].required&&m[ne].default===void 0&&h[ne]===void 0&&$.push(new bt(s,h,`missing required property "${ne}"`));return $}function ha(c){const s=c.value,h=c.valueSpec,m=c.style,E=c.styleSpec,I=c.key,P=c.arrayElementValidator||c.validateSpec;if(jn(s)!=="array")return[new bt(I,s,`array expected, ${jn(s)} found`)];if(h.length&&s.length!==h.length)return[new bt(I,s,`array length ${h.length} expected, length ${s.length} found`)];if(h["min-length"]&&s.length<h["min-length"])return[new bt(I,s,`array length at least ${h["min-length"]} expected, length ${s.length} found`)];let F={type:h.value,values:h.values};E.$version<7&&(F.function=h.function),jn(h.value)==="object"&&(F=h.value);let $=[];for(let W=0;W<s.length;W++)$=$.concat(P({array:s,arrayIndex:W,value:s[W],valueSpec:F,validateSpec:c.validateSpec,style:m,styleSpec:E,key:`${I}[${W}]`}));return $}function hc(c){const s=c.key,h=c.value,m=c.valueSpec;let E=jn(h);return E==="number"&&h!=h&&(E="NaN"),E!=="number"?[new bt(s,h,`number expected, ${E} found`)]:"minimum"in m&&h<m.minimum?[new bt(s,h,`${h} is less than the minimum value ${m.minimum}`)]:"maximum"in m&&h>m.maximum?[new bt(s,h,`${h} is greater than the maximum value ${m.maximum}`)]:[]}function Em(c){const s=c.valueSpec,h=oi(c.value.type);let m,E,I,P={};const F=h!=="categorical"&&c.value.property===void 0,$=!F,W=jn(c.value.stops)==="array"&&jn(c.value.stops[0])==="array"&&jn(c.value.stops[0][0])==="object",ne=Fo({key:c.key,value:c.value,valueSpec:c.styleSpec.function,validateSpec:c.validateSpec,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(de){if(h==="identity")return[new bt(de.key,de.value,'identity function may not have a "stops" property')];let _e=[];const Te=de.value;return _e=_e.concat(ha({key:de.key,value:Te,valueSpec:de.valueSpec,validateSpec:de.validateSpec,style:de.style,styleSpec:de.styleSpec,arrayElementValidator:ie})),jn(Te)==="array"&&Te.length===0&&_e.push(new bt(de.key,Te,"array must have at least one stop")),_e},default:function(de){return de.validateSpec({key:de.key,value:de.value,valueSpec:s,validateSpec:de.validateSpec,style:de.style,styleSpec:de.styleSpec})}}});return h==="identity"&&F&&ne.push(new bt(c.key,c.value,'missing required property "property"')),h==="identity"||c.value.stops||ne.push(new bt(c.key,c.value,'missing required property "stops"')),h==="exponential"&&c.valueSpec.expression&&!fh(c.valueSpec)&&ne.push(new bt(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&($&&!ac(c.valueSpec)?ne.push(new bt(c.key,c.value,"property functions not supported")):F&&!bm(c.valueSpec)&&ne.push(new bt(c.key,c.value,"zoom functions not supported"))),h!=="categorical"&&!W||c.value.property!==void 0||ne.push(new bt(c.key,c.value,'"property" property is required')),ne;function ie(de){let _e=[];const Te=de.value,Re=de.key;if(jn(Te)!=="array")return[new bt(Re,Te,`array expected, ${jn(Te)} found`)];if(Te.length!==2)return[new bt(Re,Te,`array length 2 expected, length ${Te.length} found`)];if(W){if(jn(Te[0])!=="object")return[new bt(Re,Te,`object expected, ${jn(Te[0])} found`)];if(Te[0].zoom===void 0)return[new bt(Re,Te,"object stop key must have zoom")];if(Te[0].value===void 0)return[new bt(Re,Te,"object stop key must have value")];if(I&&I>oi(Te[0].zoom))return[new bt(Re,Te[0].zoom,"stop zoom values must appear in ascending order")];oi(Te[0].zoom)!==I&&(I=oi(Te[0].zoom),E=void 0,P={}),_e=_e.concat(Fo({key:`${Re}[0]`,value:Te[0],valueSpec:{zoom:{}},validateSpec:de.validateSpec,style:de.style,styleSpec:de.styleSpec,objectElementValidators:{zoom:hc,value:fe}}))}else _e=_e.concat(fe({key:`${Re}[0]`,value:Te[0],valueSpec:{},validateSpec:de.validateSpec,style:de.style,styleSpec:de.styleSpec},Te));return kr(Es(Te[1]))?_e.concat([new bt(`${Re}[1]`,Te[1],"expressions are not allowed in function stops.")]):_e.concat(de.validateSpec({key:`${Re}[1]`,value:Te[1],valueSpec:s,validateSpec:de.validateSpec,style:de.style,styleSpec:de.styleSpec}))}function fe(de,_e){const Te=jn(de.value),Re=oi(de.value),Ue=de.value!==null?de.value:_e;if(m){if(Te!==m)return[new bt(de.key,Ue,`${Te} stop domain type must match previous stop domain type ${m}`)]}else m=Te;if(Te!=="number"&&Te!=="string"&&Te!=="boolean")return[new bt(de.key,Ue,"stop domain value must be a number, string, or boolean")];if(Te!=="number"&&h!=="categorical"){let tt=`number expected, ${Te} found`;return ac(s)&&h===void 0&&(tt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new bt(de.key,Ue,tt)]}return h!=="categorical"||Te!=="number"||isFinite(Re)&&Math.floor(Re)===Re?h!=="categorical"&&Te==="number"&&E!==void 0&&Re<E?[new bt(de.key,Ue,"stop domain values must appear in ascending order")]:(E=Re,h==="categorical"&&Re in P?[new bt(de.key,Ue,"stop domain values must be unique")]:(P[Re]=!0,[])):[new bt(de.key,Ue,`integer expected, found ${Re}`)]}}function Ga(c){const s=(c.expressionContext==="property"?lc:cu)(Es(c.value),c.valueSpec);if(s.result==="error")return s.value.map(m=>new bt(`${c.key}${m.key}`,c.value,m.message));const h=s.value.expression||s.value._styleExpression.expression;if(c.expressionContext==="property"&&c.propertyKey==="text-font"&&!h.outputDefined())return[new bt(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if(c.expressionContext==="property"&&c.propertyType==="layout"&&!rc(h))return[new bt(c.key,c.value,'"feature-state" data expressions are not supported with layout properties.')];if(c.expressionContext==="filter"&&!rc(h))return[new bt(c.key,c.value,'"feature-state" data expressions are not supported with filters.')];if(c.expressionContext&&c.expressionContext.indexOf("cluster")===0){if(!ic(h,["zoom","feature-state"]))return[new bt(c.key,c.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(c.expressionContext==="cluster-initial"&&!ah(h))return[new bt(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function fa(c){const s=c.key,h=c.value,m=c.valueSpec,E=[];return Array.isArray(m.values)?m.values.indexOf(oi(h))===-1&&E.push(new bt(s,h,`expected one of [${m.values.join(", ")}], ${JSON.stringify(h)} found`)):Object.keys(m.values).indexOf(oi(h))===-1&&E.push(new bt(s,h,`expected one of [${Object.keys(m.values).join(", ")}], ${JSON.stringify(h)} found`)),E}function hu(c){return zd(Es(c.value))?Ga(Un({},c,{expressionContext:"filter",valueSpec:{value:"boolean"}})):mh(c)}function mh(c){const s=c.value,h=c.key;if(jn(s)!=="array")return[new bt(h,s,`array expected, ${jn(s)} found`)];const m=c.styleSpec;let E,I=[];if(s.length<1)return[new bt(h,s,"filter array must have at least 1 element")];switch(I=I.concat(fa({key:`${h}[0]`,value:s[0],valueSpec:m.filter_operator,style:c.style,styleSpec:c.styleSpec})),oi(s[0])){case"<":case"<=":case">":case">=":s.length>=2&&oi(s[1])==="$type"&&I.push(new bt(h,s,`"$type" cannot be use with operator "${s[0]}"`));case"==":case"!=":s.length!==3&&I.push(new bt(h,s,`filter array for operator "${s[0]}" must have 3 elements`));case"in":case"!in":s.length>=2&&(E=jn(s[1]),E!=="string"&&I.push(new bt(`${h}[1]`,s[1],`string expected, ${E} found`)));for(let P=2;P<s.length;P++)E=jn(s[P]),oi(s[1])==="$type"?I=I.concat(fa({key:`${h}[${P}]`,value:s[P],valueSpec:m.geometry_type,style:c.style,styleSpec:c.styleSpec})):E!=="string"&&E!=="number"&&E!=="boolean"&&I.push(new bt(`${h}[${P}]`,s[P],`string, number, or boolean expected, ${E} found`));break;case"any":case"all":case"none":for(let P=1;P<s.length;P++)I=I.concat(mh({key:`${h}[${P}]`,value:s[P],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":E=jn(s[1]),s.length!==2?I.push(new bt(h,s,`filter array for "${s[0]}" operator must have 2 elements`)):E!=="string"&&I.push(new bt(`${h}[1]`,s[1],`string expected, ${E} found`));break;case"within":E=jn(s[1]),s.length!==2?I.push(new bt(h,s,`filter array for "${s[0]}" operator must have 2 elements`)):E!=="object"&&I.push(new bt(`${h}[1]`,s[1],`object expected, ${E} found`))}return I}function vl(c,s){const h=c.key,m=c.validateSpec,E=c.style,I=c.styleSpec,P=c.value,F=c.objectKey,$=I[`${s}_${c.layerType}`];if(!$)return[];const W=F.match(/^(.*)-transition$/);if(s==="paint"&&W&&$[W[1]]&&$[W[1]].transition)return m({key:h,value:P,valueSpec:I.transition,style:E,styleSpec:I});const ne=c.valueSpec||$[F];if(!ne)return[new bt(h,P,`unknown property "${F}"`)];let ie;if(jn(P)==="string"&&ac(ne)&&!ne.tokens&&(ie=/^{([^}]+)}$/.exec(P)))return[new bt(h,P,`"${F}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(ie[1])} }\`.`)];const fe=[];return c.layerType==="symbol"&&(F==="text-field"&&E&&!E.glyphs&&fe.push(new bt(h,P,'use of "text-field" requires a style "glyphs" property')),F==="text-font"&&Md(Es(P))&&oi(P.type)==="identity"&&fe.push(new bt(h,P,'"text-font" does not support identity functions'))),fe.concat(m({key:c.key,value:P,valueSpec:ne,style:E,styleSpec:I,expressionContext:"property",propertyType:s,propertyKey:F}))}function gh(c){return vl(c,"paint")}function Sf(c){return vl(c,"layout")}function yh(c){let s=[];const h=c.value,m=c.key,E=c.style,I=c.styleSpec;h.type||h.ref||s.push(new bt(m,h,'either "type" or "ref" is required'));let P=oi(h.type);const F=oi(h.ref);if(h.id){const $=oi(h.id);for(let W=0;W<c.arrayIndex;W++){const ne=E.layers[W];oi(ne.id)===$&&s.push(new bt(m,h.id,`duplicate layer id "${h.id}", previously used at line ${ne.id.__line__}`))}}if("ref"in h){let $;["type","source","source-layer","filter","layout"].forEach(W=>{W in h&&s.push(new bt(m,h[W],`"${W}" is prohibited for ref layers`))}),E.layers.forEach(W=>{oi(W.id)===F&&($=W)}),$?$.ref?s.push(new bt(m,h.ref,"ref cannot reference another ref layer")):P=oi($.type):s.push(new bt(m,h.ref,`ref layer "${F}" not found`))}else if(P!=="background")if(h.source){const $=E.sources&&E.sources[h.source],W=$&&oi($.type);$?W==="vector"&&P==="raster"?s.push(new bt(m,h.source,`layer "${h.id}" requires a raster source`)):W!=="raster-dem"&&P==="hillshade"?s.push(new bt(m,h.source,`layer "${h.id}" requires a raster-dem source`)):W==="raster"&&P!=="raster"?s.push(new bt(m,h.source,`layer "${h.id}" requires a vector source`)):W!=="vector"||h["source-layer"]?W==="raster-dem"&&P!=="hillshade"?s.push(new bt(m,h.source,"raster-dem source can only be used with layer type 'hillshade'.")):P!=="line"||!h.paint||!h.paint["line-gradient"]||W==="geojson"&&$.lineMetrics||s.push(new bt(m,h,`layer "${h.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):s.push(new bt(m,h,`layer "${h.id}" must specify a "source-layer"`)):s.push(new bt(m,h.source,`source "${h.source}" not found`))}else s.push(new bt(m,h,'missing required property "source"'));return s=s.concat(Fo({key:m,value:h,valueSpec:I.layer,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*":()=>[],type:()=>c.validateSpec({key:`${m}.type`,value:h.type,valueSpec:I.layer.type,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,object:h,objectKey:"type"}),filter:hu,layout:$=>Fo({layer:h,key:$.key,value:$.value,style:$.style,styleSpec:$.styleSpec,validateSpec:$.validateSpec,objectElementValidators:{"*":W=>Sf(Un({layerType:P},W))}}),paint:$=>Fo({layer:h,key:$.key,value:$.value,style:$.style,styleSpec:$.styleSpec,validateSpec:$.validateSpec,objectElementValidators:{"*":W=>gh(Un({layerType:P},W))}})}})),s}function fc(c){const s=c.value,h=c.key,m=jn(s);return m!=="string"?[new bt(h,s,`string expected, ${m} found`)]:[]}const Tf={promoteId:function({key:c,value:s}){if(jn(s)==="string")return fc({key:c,value:s});{const h=[];for(const m in s)h.push(...fc({key:`${c}.${m}`,value:s[m]}));return h}}};function Qg(c){const s=c.value,h=c.key,m=c.styleSpec,E=c.style,I=c.validateSpec;if(!s.type)return[new bt(h,s,'"type" is required')];const P=oi(s.type);let F;switch(P){case"vector":case"raster":return F=Fo({key:h,value:s,valueSpec:m[`source_${P.replace("-","_")}`],style:c.style,styleSpec:m,objectElementValidators:Tf,validateSpec:I}),F;case"raster-dem":return F=function($){var W;const ne=(W=$.sourceName)!==null&&W!==void 0?W:"",ie=$.value,fe=$.styleSpec,de=fe.source_raster_dem,_e=$.style;let Te=[];const Re=jn(ie);if(ie===void 0)return Te;if(Re!=="object")return Te.push(new bt("source_raster_dem",ie,`object expected, ${Re} found`)),Te;const Ue=oi(ie.encoding)==="custom",tt=["redFactor","greenFactor","blueFactor","baseShift"],Ze=$.value.encoding?`"${$.value.encoding}"`:"Default";for(const Ye in ie)!Ue&&tt.includes(Ye)?Te.push(new bt(Ye,ie[Ye],`In "${ne}": "${Ye}" is only valid when "encoding" is set to "custom". ${Ze} encoding found`)):de[Ye]?Te=Te.concat($.validateSpec({key:Ye,value:ie[Ye],valueSpec:de[Ye],validateSpec:$.validateSpec,style:_e,styleSpec:fe})):Te.push(new bt(Ye,ie[Ye],`unknown property "${Ye}"`));return Te}({sourceName:h,value:s,style:c.style,styleSpec:m,validateSpec:I}),F;case"geojson":if(F=Fo({key:h,value:s,valueSpec:m.source_geojson,style:E,styleSpec:m,validateSpec:I,objectElementValidators:Tf}),s.cluster)for(const $ in s.clusterProperties){const[W,ne]=s.clusterProperties[$],ie=typeof W=="string"?[W,["accumulated"],["get",$]]:W;F.push(...Ga({key:`${h}.${$}.map`,value:ne,validateSpec:I,expressionContext:"cluster-map"})),F.push(...Ga({key:`${h}.${$}.reduce`,value:ie,validateSpec:I,expressionContext:"cluster-reduce"}))}return F;case"video":return Fo({key:h,value:s,valueSpec:m.source_video,style:E,validateSpec:I,styleSpec:m});case"image":return Fo({key:h,value:s,valueSpec:m.source_image,style:E,validateSpec:I,styleSpec:m});case"canvas":return[new bt(h,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return fa({key:`${h}.type`,value:s.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:E,validateSpec:I,styleSpec:m})}}function Sm(c){const s=c.value,h=c.styleSpec,m=h.light,E=c.style;let I=[];const P=jn(s);if(s===void 0)return I;if(P!=="object")return I=I.concat([new bt("light",s,`object expected, ${P} found`)]),I;for(const F in s){const $=F.match(/^(.*)-transition$/);I=I.concat($&&m[$[1]]&&m[$[1]].transition?c.validateSpec({key:F,value:s[F],valueSpec:h.transition,validateSpec:c.validateSpec,style:E,styleSpec:h}):m[F]?c.validateSpec({key:F,value:s[F],valueSpec:m[F],validateSpec:c.validateSpec,style:E,styleSpec:h}):[new bt(F,s[F],`unknown property "${F}"`)])}return I}function ey(c){const s=c.value,h=c.styleSpec,m=h.sky,E=c.style,I=jn(s);if(s===void 0)return[];if(I!=="object")return[new bt("sky",s,`object expected, ${I} found`)];let P=[];for(const F in s)P=P.concat(m[F]?Ss({key:F,value:s[F],valueSpec:m[F],style:E,styleSpec:h}):[new bt(F,s[F],`unknown property "${F}"`)]);return P}function _h(c){const s=c.value,h=c.styleSpec,m=h.terrain,E=c.style;let I=[];const P=jn(s);if(s===void 0)return I;if(P!=="object")return I=I.concat([new bt("terrain",s,`object expected, ${P} found`)]),I;for(const F in s)I=I.concat(m[F]?c.validateSpec({key:F,value:s[F],valueSpec:m[F],validateSpec:c.validateSpec,style:E,styleSpec:h}):[new bt(F,s[F],`unknown property "${F}"`)]);return I}function Cf(c){let s=[];const h=c.value,m=c.key;if(Array.isArray(h)){const E=[],I=[];for(const P in h)h[P].id&&E.includes(h[P].id)&&s.push(new bt(m,h,`all the sprites' ids must be unique, but ${h[P].id} is duplicated`)),E.push(h[P].id),h[P].url&&I.includes(h[P].url)&&s.push(new bt(m,h,`all the sprites' URLs must be unique, but ${h[P].url} is duplicated`)),I.push(h[P].url),s=s.concat(Fo({key:`${m}[${P}]`,value:h[P],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:c.validateSpec}));return s}return fc({key:m,value:h})}const si={"*":()=>[],array:ha,boolean:function(c){const s=c.value,h=c.key,m=jn(s);return m!=="boolean"?[new bt(h,s,`boolean expected, ${m} found`)]:[]},number:hc,color:function(c){const s=c.key,h=c.value,m=jn(h);return m!=="string"?[new bt(s,h,`color expected, ${m} found`)]:or.parse(String(h))?[]:[new bt(s,h,`color expected, "${h}" found`)]},constants:Va,enum:fa,filter:hu,function:Em,layer:yh,object:Fo,source:Qg,light:Sm,sky:ey,terrain:_h,string:fc,formatted:function(c){return fc(c).length===0?[]:Ga(c)},resolvedImage:function(c){return fc(c).length===0?[]:Ga(c)},padding:function(c){const s=c.key,h=c.value;if(jn(h)==="array"){if(h.length<1||h.length>4)return[new bt(s,h,`padding requires 1 to 4 values; ${h.length} values found`)];const m={type:"number"};let E=[];for(let I=0;I<h.length;I++)E=E.concat(c.validateSpec({key:`${s}[${I}]`,value:h[I],validateSpec:c.validateSpec,valueSpec:m}));return E}return hc({key:s,value:h,valueSpec:{}})},variableAnchorOffsetCollection:function(c){const s=c.key,h=c.value,m=jn(h),E=c.styleSpec;if(m!=="array"||h.length<1||h.length%2!=0)return[new bt(s,h,"variableAnchorOffsetCollection requires a non-empty array of even length")];let I=[];for(let P=0;P<h.length;P+=2)I=I.concat(fa({key:`${s}[${P}]`,value:h[P],valueSpec:E.layout_symbol["text-anchor"]})),I=I.concat(ha({key:`${s}[${P+1}]`,value:h[P+1],valueSpec:{length:2,value:"number"},validateSpec:c.validateSpec,style:c.style,styleSpec:E}));return I},sprite:Cf};function Ss(c){const s=c.value,h=c.valueSpec,m=c.styleSpec;return c.validateSpec=Ss,h.expression&&Md(oi(s))?Em(c):h.expression&&kr(Es(s))?Ga(c):h.type&&si[h.type]?si[h.type](c):Fo(Un({},c,{valueSpec:h.type?m[h.type]:h}))}function Tm(c){const s=c.value,h=c.key,m=fc(c);return m.length||(s.indexOf("{fontstack}")===-1&&m.push(new bt(h,s,'"glyphs" url must include a "{fontstack}" token')),s.indexOf("{range}")===-1&&m.push(new bt(h,s,'"glyphs" url must include a "{range}" token'))),m}function Ko(c,s=rt){let h=[];return h=h.concat(Ss({key:"",value:c,valueSpec:s.$root,styleSpec:s,style:c,validateSpec:Ss,objectElementValidators:{glyphs:Tm,"*":()=>[]}})),c.constants&&(h=h.concat(Va({key:"constants",value:c.constants,style:c,styleSpec:s,validateSpec:Ss}))),dc(h)}function Ha(c){return function(s){return c({...s,validateSpec:Ss})}}function dc(c){return[].concat(c).sort((s,h)=>s.line-h.line)}function da(c){return function(...s){return dc(c.apply(this,s))}}Ko.source=da(Ha(Qg)),Ko.sprite=da(Ha(Cf)),Ko.glyphs=da(Ha(Tm)),Ko.light=da(Ha(Sm)),Ko.sky=da(Ha(ey)),Ko.terrain=da(Ha(_h)),Ko.layer=da(Ha(yh)),Ko.filter=da(Ha(hu)),Ko.paintProperty=da(Ha(gh)),Ko.layoutProperty=da(Ha(Sf));const pa=Ko,Sv=pa.light,fu=pa.paintProperty,ty=pa.layoutProperty;function pc(c,s){let h=!1;if(s&&s.length)for(const m of s)c.fire(new Gt(new Error(m.message))),h=!0;return h}class If{constructor(s,h,m){const E=this.cells=[];if(s instanceof ArrayBuffer){this.arrayBuffer=s;const P=new Int32Array(this.arrayBuffer);s=P[0],this.d=(h=P[1])+2*(m=P[2]);for(let $=0;$<this.d*this.d;$++){const W=P[3+$],ne=P[3+$+1];E.push(W===ne?null:P.subarray(W,ne))}const F=P[3+E.length+1];this.keys=P.subarray(P[3+E.length],F),this.bboxes=P.subarray(F),this.insert=this._insertReadonly}else{this.d=h+2*m;for(let P=0;P<this.d*this.d;P++)E.push([]);this.keys=[],this.bboxes=[]}this.n=h,this.extent=s,this.padding=m,this.scale=h/s,this.uid=0;const I=m/h*s;this.min=-I,this.max=s+I}insert(s,h,m,E,I){this._forEachCell(h,m,E,I,this._insertCell,this.uid++,void 0,void 0),this.keys.push(s),this.bboxes.push(h),this.bboxes.push(m),this.bboxes.push(E),this.bboxes.push(I)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(s,h,m,E,I,P){this.cells[I].push(P)}query(s,h,m,E,I){const P=this.min,F=this.max;if(s<=P&&h<=P&&F<=m&&F<=E&&!I)return Array.prototype.slice.call(this.keys);{const $=[];return this._forEachCell(s,h,m,E,this._queryCell,$,{},I),$}}_queryCell(s,h,m,E,I,P,F,$){const W=this.cells[I];if(W!==null){const ne=this.keys,ie=this.bboxes;for(let fe=0;fe<W.length;fe++){const de=W[fe];if(F[de]===void 0){const _e=4*de;($?$(ie[_e+0],ie[_e+1],ie[_e+2],ie[_e+3]):s<=ie[_e+2]&&h<=ie[_e+3]&&m>=ie[_e+0]&&E>=ie[_e+1])?(F[de]=!0,P.push(ne[de])):F[de]=!1}}}}_forEachCell(s,h,m,E,I,P,F,$){const W=this._convertToCellCoord(s),ne=this._convertToCellCoord(h),ie=this._convertToCellCoord(m),fe=this._convertToCellCoord(E);for(let de=W;de<=ie;de++)for(let _e=ne;_e<=fe;_e++){const Te=this.d*_e+de;if((!$||$(this._convertFromCellCoord(de),this._convertFromCellCoord(_e),this._convertFromCellCoord(de+1),this._convertFromCellCoord(_e+1)))&&I.call(this,s,h,m,E,Te,P,F,$))return}}_convertFromCellCoord(s){return(s-this.padding)/this.scale}_convertToCellCoord(s){return Math.max(0,Math.min(this.d-1,Math.floor(s*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const s=this.cells,h=3+this.cells.length+1+1;let m=0;for(let P=0;P<this.cells.length;P++)m+=this.cells[P].length;const E=new Int32Array(h+m+this.keys.length+this.bboxes.length);E[0]=this.extent,E[1]=this.n,E[2]=this.padding;let I=h;for(let P=0;P<s.length;P++){const F=s[P];E[3+P]=I,E.set(F,I),I+=F.length}return E[3+s.length]=I,E.set(this.keys,I),I+=this.keys.length,E[3+s.length+1]=I,E.set(this.bboxes,I),I+=this.bboxes.length,E.buffer}static serialize(s,h){const m=s.toArrayBuffer();return h&&h.push(m),{buffer:m}}static deserialize(s){return new If(s.buffer)}}const Ji={};function Jt(c,s,h={}){if(Ji[c])throw new Error(`${c} is already registered.`);Object.defineProperty(s,"_classRegistryKey",{value:c,writeable:!1}),Ji[c]={klass:s,omit:h.omit||[],shallow:h.shallow||[]}}Jt("Object",Object),Jt("TransferableGridIndex",If),Jt("Color",or),Jt("Error",Error),Jt("AJAXError",it),Jt("ResolvedImage",ys),Jt("StylePropertyFunction",Dd),Jt("StyleExpression",Br,{omit:["_evaluator"]}),Jt("ZoomDependentExpression",ws),Jt("ZoomConstantExpression",Nd),Jt("CompoundExpression",Xn,{omit:["_evaluate"]});for(const c in ch)ch[c]._classRegistryKey||Jt(`Expression_${c}`,ch[c]);function Pf(c){return c&&typeof ArrayBuffer<"u"&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function Za(c,s){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob||c instanceof Error)return c;if(Pf(c)||De(c))return s&&s.push(c),c;if(ArrayBuffer.isView(c)){const h=c;return s&&s.push(h.buffer),h}if(c instanceof ImageData)return s&&s.push(c.data.buffer),c;if(Array.isArray(c)){const h=[];for(const m of c)h.push(Za(m,s));return h}if(typeof c=="object"){const h=c.constructor,m=h._classRegistryKey;if(!m)throw new Error(`can't serialize object of unregistered class ${h.name}`);if(!Ji[m])throw new Error(`${m} is not registered.`);const E=h.serialize?h.serialize(c,s):{};if(h.serialize){if(s&&E===s[s.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const I in c){if(!c.hasOwnProperty(I)||Ji[m].omit.indexOf(I)>=0)continue;const P=c[I];E[I]=Ji[m].shallow.indexOf(I)>=0?P:Za(P,s)}c instanceof Error&&(E.message=c.message)}if(E.$name)throw new Error("$name property is reserved for worker serialization logic.");return m!=="Object"&&(E.$name=m),E}throw new Error("can't serialize object of type "+typeof c)}function vh(c){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob||c instanceof Error||Pf(c)||De(c)||ArrayBuffer.isView(c)||c instanceof ImageData)return c;if(Array.isArray(c))return c.map(vh);if(typeof c=="object"){const s=c.$name||"Object";if(!Ji[s])throw new Error(`can't deserialize unregistered class ${s}`);const{klass:h}=Ji[s];if(!h)throw new Error(`can't deserialize unregistered class ${s}`);if(h.deserialize)return h.deserialize(c);const m=Object.create(h.prototype);for(const E of Object.keys(c)){if(E==="$name")continue;const I=c[E];m[E]=Ji[s].shallow.indexOf(E)>=0?I:vh(I)}return m}throw new Error("can't deserialize object of type "+typeof c)}class Lf{constructor(){this.first=!0}update(s,h){const m=Math.floor(s);return this.first?(this.first=!1,this.lastIntegerZoom=m,this.lastIntegerZoomTime=0,this.lastZoom=s,this.lastFloorZoom=m,!0):(this.lastFloorZoom>m?(this.lastIntegerZoom=m+1,this.lastIntegerZoomTime=h):this.lastFloorZoom<m&&(this.lastIntegerZoom=m,this.lastIntegerZoomTime=h),s!==this.lastZoom&&(this.lastZoom=s,this.lastFloorZoom=m,!0))}}const Vt={"Latin-1 Supplement":c=>c>=128&&c<=255,Arabic:c=>c>=1536&&c<=1791,"Arabic Supplement":c=>c>=1872&&c<=1919,"Arabic Extended-A":c=>c>=2208&&c<=2303,"Hangul Jamo":c=>c>=4352&&c<=4607,"Unified Canadian Aboriginal Syllabics":c=>c>=5120&&c<=5759,Khmer:c=>c>=6016&&c<=6143,"Unified Canadian Aboriginal Syllabics Extended":c=>c>=6320&&c<=6399,"General Punctuation":c=>c>=8192&&c<=8303,"Letterlike Symbols":c=>c>=8448&&c<=8527,"Number Forms":c=>c>=8528&&c<=8591,"Miscellaneous Technical":c=>c>=8960&&c<=9215,"Control Pictures":c=>c>=9216&&c<=9279,"Optical Character Recognition":c=>c>=9280&&c<=9311,"Enclosed Alphanumerics":c=>c>=9312&&c<=9471,"Geometric Shapes":c=>c>=9632&&c<=9727,"Miscellaneous Symbols":c=>c>=9728&&c<=9983,"Miscellaneous Symbols and Arrows":c=>c>=11008&&c<=11263,"CJK Radicals Supplement":c=>c>=11904&&c<=12031,"Kangxi Radicals":c=>c>=12032&&c<=12255,"Ideographic Description Characters":c=>c>=12272&&c<=12287,"CJK Symbols and Punctuation":c=>c>=12288&&c<=12351,Hiragana:c=>c>=12352&&c<=12447,Katakana:c=>c>=12448&&c<=12543,Bopomofo:c=>c>=12544&&c<=12591,"Hangul Compatibility Jamo":c=>c>=12592&&c<=12687,Kanbun:c=>c>=12688&&c<=12703,"Bopomofo Extended":c=>c>=12704&&c<=12735,"CJK Strokes":c=>c>=12736&&c<=12783,"Katakana Phonetic Extensions":c=>c>=12784&&c<=12799,"Enclosed CJK Letters and Months":c=>c>=12800&&c<=13055,"CJK Compatibility":c=>c>=13056&&c<=13311,"CJK Unified Ideographs Extension A":c=>c>=13312&&c<=19903,"Yijing Hexagram Symbols":c=>c>=19904&&c<=19967,"CJK Unified Ideographs":c=>c>=19968&&c<=40959,"Yi Syllables":c=>c>=40960&&c<=42127,"Yi Radicals":c=>c>=42128&&c<=42191,"Hangul Jamo Extended-A":c=>c>=43360&&c<=43391,"Hangul Syllables":c=>c>=44032&&c<=55215,"Hangul Jamo Extended-B":c=>c>=55216&&c<=55295,"Private Use Area":c=>c>=57344&&c<=63743,"CJK Compatibility Ideographs":c=>c>=63744&&c<=64255,"Arabic Presentation Forms-A":c=>c>=64336&&c<=65023,"Vertical Forms":c=>c>=65040&&c<=65055,"CJK Compatibility Forms":c=>c>=65072&&c<=65103,"Small Form Variants":c=>c>=65104&&c<=65135,"Arabic Presentation Forms-B":c=>c>=65136&&c<=65279,"Halfwidth and Fullwidth Forms":c=>c>=65280&&c<=65519};function mc(c){for(const s of c)if(Af(s.charCodeAt(0)))return!0;return!1}function Cm(c){for(const s of c)if(!ny(s.charCodeAt(0)))return!1;return!0}function ny(c){return!(Vt.Arabic(c)||Vt["Arabic Supplement"](c)||Vt["Arabic Extended-A"](c)||Vt["Arabic Presentation Forms-A"](c)||Vt["Arabic Presentation Forms-B"](c))}function Af(c){return!(c!==746&&c!==747&&(c<4352||!(Vt["Bopomofo Extended"](c)||Vt.Bopomofo(c)||Vt["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||Vt["CJK Compatibility Ideographs"](c)||Vt["CJK Compatibility"](c)||Vt["CJK Radicals Supplement"](c)||Vt["CJK Strokes"](c)||!(!Vt["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||c===12336)||Vt["CJK Unified Ideographs Extension A"](c)||Vt["CJK Unified Ideographs"](c)||Vt["Enclosed CJK Letters and Months"](c)||Vt["Hangul Compatibility Jamo"](c)||Vt["Hangul Jamo Extended-A"](c)||Vt["Hangul Jamo Extended-B"](c)||Vt["Hangul Jamo"](c)||Vt["Hangul Syllables"](c)||Vt.Hiragana(c)||Vt["Ideographic Description Characters"](c)||Vt.Kanbun(c)||Vt["Kangxi Radicals"](c)||Vt["Katakana Phonetic Extensions"](c)||Vt.Katakana(c)&&c!==12540||!(!Vt["Halfwidth and Fullwidth Forms"](c)||c===65288||c===65289||c===65293||c>=65306&&c<=65310||c===65339||c===65341||c===65343||c>=65371&&c<=65503||c===65507||c>=65512&&c<=65519)||!(!Vt["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||Vt["Unified Canadian Aboriginal Syllabics"](c)||Vt["Unified Canadian Aboriginal Syllabics Extended"](c)||Vt["Vertical Forms"](c)||Vt["Yijing Hexagram Symbols"](c)||Vt["Yi Syllables"](c)||Vt["Yi Radicals"](c))))}function jd(c){return!(Af(c)||function(s){return!!(Vt["Latin-1 Supplement"](s)&&(s===167||s===169||s===174||s===177||s===188||s===189||s===190||s===215||s===247)||Vt["General Punctuation"](s)&&(s===8214||s===8224||s===8225||s===8240||s===8241||s===8251||s===8252||s===8258||s===8263||s===8264||s===8265||s===8273)||Vt["Letterlike Symbols"](s)||Vt["Number Forms"](s)||Vt["Miscellaneous Technical"](s)&&(s>=8960&&s<=8967||s>=8972&&s<=8991||s>=8996&&s<=9e3||s===9003||s>=9085&&s<=9114||s>=9150&&s<=9165||s===9167||s>=9169&&s<=9179||s>=9186&&s<=9215)||Vt["Control Pictures"](s)&&s!==9251||Vt["Optical Character Recognition"](s)||Vt["Enclosed Alphanumerics"](s)||Vt["Geometric Shapes"](s)||Vt["Miscellaneous Symbols"](s)&&!(s>=9754&&s<=9759)||Vt["Miscellaneous Symbols and Arrows"](s)&&(s>=11026&&s<=11055||s>=11088&&s<=11097||s>=11192&&s<=11243)||Vt["CJK Symbols and Punctuation"](s)||Vt.Katakana(s)||Vt["Private Use Area"](s)||Vt["CJK Compatibility Forms"](s)||Vt["Small Form Variants"](s)||Vt["Halfwidth and Fullwidth Forms"](s)||s===8734||s===8756||s===8757||s>=9984&&s<=10087||s>=10102&&s<=10131||s===65532||s===65533)}(c))}function Of(c){return c>=1424&&c<=2303||Vt["Arabic Presentation Forms-A"](c)||Vt["Arabic Presentation Forms-B"](c)}function Im(c,s){return!(!s&&Of(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||Vt.Khmer(c))}function ry(c){for(const s of c)if(Of(s.charCodeAt(0)))return!0;return!1}const du=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(c){this.pluginStatus=c.pluginStatus,this.pluginURL=c.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(c){this.applyArabicShaping=c.applyArabicShaping,this.processBidirectionalText=c.processBidirectionalText,this.processStyledBidirectionalText=c.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class jr{constructor(s,h){this.zoom=s,h?(this.now=h.now,this.fadeDuration=h.fadeDuration,this.zoomHistory=h.zoomHistory,this.transition=h.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Lf,this.transition={})}isSupportedScript(s){return function(h,m){for(const E of h)if(!Im(E.charCodeAt(0),m))return!1;return!0}(s,du.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const s=this.zoom,h=s-Math.floor(s),m=this.crossFadingFactor();return s>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:h+(1-h)*m}:{fromScale:.5,toScale:1,t:1-(1-m)*h}}}class xh{constructor(s,h){this.property=s,this.value=h,this.expression=function(m,E){if(Md(m))return new Dd(m,E);if(kr(m)){const I=lc(m,E);if(I.result==="error")throw new Error(I.value.map(P=>`${P.key}: ${P.message}`).join(", "));return I.value}{let I=m;return E.type==="color"&&typeof m=="string"?I=or.parse(m):E.type!=="padding"||typeof m!="number"&&!Array.isArray(m)?E.type==="variableAnchorOffsetCollection"&&Array.isArray(m)&&(I=gs.parse(m)):I=Co.parse(m),{kind:"constant",evaluate:()=>I}}}(h===void 0?s.specification.default:h,s.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(s,h,m){return this.property.possiblyEvaluate(this,s,h,m)}}class $d{constructor(s){this.property=s,this.value=new xh(s,void 0)}transitioned(s,h){return new b(this.property,this.value,h,G({},s.transition,this.transition),s.now)}untransitioned(){return new b(this.property,this.value,null,{},0)}}class f{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitionablePropertyValues)}getValue(s){return X(this._values[s].value.value)}setValue(s,h){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new $d(this._values[s].property)),this._values[s].value=new xh(this._values[s].property,h===null?void 0:X(h))}getTransition(s){return X(this._values[s].transition)}setTransition(s,h){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new $d(this._values[s].property)),this._values[s].transition=X(h)||void 0}serialize(){const s={};for(const h of Object.keys(this._values)){const m=this.getValue(h);m!==void 0&&(s[h]=m);const E=this.getTransition(h);E!==void 0&&(s[`${h}-transition`]=E)}return s}transitioned(s,h){const m=new M(this._properties);for(const E of Object.keys(this._values))m._values[E]=this._values[E].transitioned(s,h._values[E]);return m}untransitioned(){const s=new M(this._properties);for(const h of Object.keys(this._values))s._values[h]=this._values[h].untransitioned();return s}}class b{constructor(s,h,m,E,I){this.property=s,this.value=h,this.begin=I+E.delay||0,this.end=this.begin+E.duration||0,s.specification.transition&&(E.delay||E.duration)&&(this.prior=m)}possiblyEvaluate(s,h,m){const E=s.now||0,I=this.value.possiblyEvaluate(s,h,m),P=this.prior;if(P){if(E>this.end)return this.prior=null,I;if(this.value.isDataDriven())return this.prior=null,I;if(E<this.begin)return P.possiblyEvaluate(s,h,m);{const F=(E-this.begin)/(this.end-this.begin);return this.property.interpolate(P.possiblyEvaluate(s,h,m),I,function($){if($<=0)return 0;if($>=1)return 1;const W=$*$,ne=W*$;return 4*($<.5?ne:3*($-W)+ne-.75)}(F))}}return I}}class M{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitioningPropertyValues)}possiblyEvaluate(s,h,m){const E=new me(this._properties);for(const I of Object.keys(this._values))E._values[I]=this._values[I].possiblyEvaluate(s,h,m);return E}hasTransition(){for(const s of Object.keys(this._values))if(this._values[s].prior)return!0;return!1}}class V{constructor(s){this._properties=s,this._values=Object.create(s.defaultPropertyValues)}hasValue(s){return this._values[s].value!==void 0}getValue(s){return X(this._values[s].value)}setValue(s,h){this._values[s]=new xh(this._values[s].property,h===null?void 0:X(h))}serialize(){const s={};for(const h of Object.keys(this._values)){const m=this.getValue(h);m!==void 0&&(s[h]=m)}return s}possiblyEvaluate(s,h,m){const E=new me(this._properties);for(const I of Object.keys(this._values))E._values[I]=this._values[I].possiblyEvaluate(s,h,m);return E}}class re{constructor(s,h,m){this.property=s,this.value=h,this.parameters=m}isConstant(){return this.value.kind==="constant"}constantOr(s){return this.value.kind==="constant"?this.value.value:s}evaluate(s,h,m,E){return this.property.evaluate(this.value,this.parameters,s,h,m,E)}}class me{constructor(s){this._properties=s,this._values=Object.create(s.defaultPossiblyEvaluatedValues)}get(s){return this._values[s]}}class Ce{constructor(s){this.specification=s}possiblyEvaluate(s,h){if(s.isDataDriven())throw new Error("Value should not be data driven");return s.expression.evaluate(h)}interpolate(s,h,m){const E=Io[this.specification.type];return E?E(s,h,m):s}}class We{constructor(s,h){this.specification=s,this.overrides=h}possiblyEvaluate(s,h,m,E){return new re(this,s.expression.kind==="constant"||s.expression.kind==="camera"?{kind:"constant",value:s.expression.evaluate(h,null,{},m,E)}:s.expression,h)}interpolate(s,h,m){if(s.value.kind!=="constant"||h.value.kind!=="constant")return s;if(s.value.value===void 0||h.value.value===void 0)return new re(this,{kind:"constant",value:void 0},s.parameters);const E=Io[this.specification.type];if(E){const I=E(s.value.value,h.value.value,m);return new re(this,{kind:"constant",value:I},s.parameters)}return s}evaluate(s,h,m,E,I,P){return s.kind==="constant"?s.value:s.evaluate(h,m,E,I,P)}}class dt extends We{possiblyEvaluate(s,h,m,E){if(s.value===void 0)return new re(this,{kind:"constant",value:void 0},h);if(s.expression.kind==="constant"){const I=s.expression.evaluate(h,null,{},m,E),P=s.property.specification.type==="resolvedImage"&&typeof I!="string"?I.name:I,F=this._calculate(P,P,P,h);return new re(this,{kind:"constant",value:F},h)}if(s.expression.kind==="camera"){const I=this._calculate(s.expression.evaluate({zoom:h.zoom-1}),s.expression.evaluate({zoom:h.zoom}),s.expression.evaluate({zoom:h.zoom+1}),h);return new re(this,{kind:"constant",value:I},h)}return new re(this,s.expression,h)}evaluate(s,h,m,E,I,P){if(s.kind==="source"){const F=s.evaluate(h,m,E,I,P);return this._calculate(F,F,F,h)}return s.kind==="composite"?this._calculate(s.evaluate({zoom:Math.floor(h.zoom)-1},m,E),s.evaluate({zoom:Math.floor(h.zoom)},m,E),s.evaluate({zoom:Math.floor(h.zoom)+1},m,E),h):s.value}_calculate(s,h,m,E){return E.zoom>E.zoomHistory.lastIntegerZoom?{from:s,to:h}:{from:m,to:h}}interpolate(s){return s}}class It{constructor(s){this.specification=s}possiblyEvaluate(s,h,m,E){if(s.value!==void 0){if(s.expression.kind==="constant"){const I=s.expression.evaluate(h,null,{},m,E);return this._calculate(I,I,I,h)}return this._calculate(s.expression.evaluate(new jr(Math.floor(h.zoom-1),h)),s.expression.evaluate(new jr(Math.floor(h.zoom),h)),s.expression.evaluate(new jr(Math.floor(h.zoom+1),h)),h)}}_calculate(s,h,m,E){return E.zoom>E.zoomHistory.lastIntegerZoom?{from:s,to:h}:{from:m,to:h}}interpolate(s){return s}}class tn{constructor(s){this.specification=s}possiblyEvaluate(s,h,m,E){return!!s.expression.evaluate(h,null,{},m,E)}interpolate(){return!1}}class hn{constructor(s){this.properties=s,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const h in s){const m=s[h];m.specification.overridable&&this.overridableProperties.push(h);const E=this.defaultPropertyValues[h]=new xh(m,void 0),I=this.defaultTransitionablePropertyValues[h]=new $d(m);this.defaultTransitioningPropertyValues[h]=I.untransitioned(),this.defaultPossiblyEvaluatedValues[h]=E.possiblyEvaluate({})}}}Jt("DataDrivenProperty",We),Jt("DataConstantProperty",Ce),Jt("CrossFadedDataDrivenProperty",dt),Jt("CrossFadedProperty",It),Jt("ColorRampProperty",tn);const Hn="-transition";class Hr extends Tr{constructor(s,h){if(super(),this.id=s.id,this.type=s.type,this._featureFilter={filter:()=>!0,needGeometry:!1},s.type!=="custom"&&(this.metadata=s.metadata,this.minzoom=s.minzoom,this.maxzoom=s.maxzoom,s.type!=="background"&&(this.source=s.source,this.sourceLayer=s["source-layer"],this.filter=s.filter),h.layout&&(this._unevaluatedLayout=new V(h.layout)),h.paint)){this._transitionablePaint=new f(h.paint);for(const m in s.paint)this.setPaintProperty(m,s.paint[m],{validate:!1});for(const m in s.layout)this.setLayoutProperty(m,s.layout[m],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new me(h.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(s){return s==="visibility"?this.visibility:this._unevaluatedLayout.getValue(s)}setLayoutProperty(s,h,m={}){h!=null&&this._validate(ty,`layers.${this.id}.layout.${s}`,s,h,m)||(s!=="visibility"?this._unevaluatedLayout.setValue(s,h):this.visibility=h)}getPaintProperty(s){return s.endsWith(Hn)?this._transitionablePaint.getTransition(s.slice(0,-11)):this._transitionablePaint.getValue(s)}setPaintProperty(s,h,m={}){if(h!=null&&this._validate(fu,`layers.${this.id}.paint.${s}`,s,h,m))return!1;if(s.endsWith(Hn))return this._transitionablePaint.setTransition(s.slice(0,-11),h||void 0),!1;{const E=this._transitionablePaint._values[s],I=E.property.specification["property-type"]==="cross-faded-data-driven",P=E.value.isDataDriven(),F=E.value;this._transitionablePaint.setValue(s,h),this._handleSpecialPaintPropertyUpdate(s);const $=this._transitionablePaint._values[s].value;return $.isDataDriven()||P||I||this._handleOverridablePaintPropertyUpdate(s,F,$)}}_handleSpecialPaintPropertyUpdate(s){}_handleOverridablePaintPropertyUpdate(s,h,m){return!1}isHidden(s){return!!(this.minzoom&&s<this.minzoom)||!!(this.maxzoom&&s>=this.maxzoom)||this.visibility==="none"}updateTransitions(s){this._transitioningPaint=this._transitionablePaint.transitioned(s,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(s,h){s.getCrossfadeParameters&&(this._crossfadeParameters=s.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(s,void 0,h)),this.paint=this._transitioningPaint.possiblyEvaluate(s,void 0,h)}serialize(){const s={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(s.layout=s.layout||{},s.layout.visibility=this.visibility),Y(s,(h,m)=>!(h===void 0||m==="layout"&&!Object.keys(h).length||m==="paint"&&!Object.keys(h).length))}_validate(s,h,m,E,I={}){return(!I||I.validate!==!1)&&pc(this,s.call(pa,{key:h,layerType:this.type,objectKey:m,value:E,styleSpec:rt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const s in this.paint._values){const h=this.paint.get(s);if(h instanceof re&&ac(h.property.specification)&&(h.value.kind==="source"||h.value.kind==="composite")&&h.value.isStateDependent)return!0}return!1}}const $i={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Po{constructor(s,h){this._structArray=s,this._pos1=h*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class tr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(s,h){return s._trim(),h&&(s.isTransferred=!0,h.push(s.arrayBuffer)),{length:s.length,arrayBuffer:s.arrayBuffer}}static deserialize(s){const h=Object.create(this.prototype);return h.arrayBuffer=s.arrayBuffer,h.length=s.length,h.capacity=s.arrayBuffer.byteLength/h.bytesPerElement,h._refreshViews(),h}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(s){this.reserve(s),this.length=s}reserve(s){if(s>this.capacity){this.capacity=Math.max(s,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const h=this.uint8;this._refreshViews(),h&&this.uint8.set(h)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function $r(c,s=1){let h=0,m=0;return{members:c.map(E=>{const I=$i[E.type].BYTES_PER_ELEMENT,P=h=iy(h,Math.max(s,I)),F=E.components||1;return m=Math.max(m,I),h+=I*F,{name:E.name,type:E.type,components:F,offset:P}}),size:iy(h,Math.max(m,s)),alignment:s}}function iy(c,s){return Math.ceil(c/s)*s}class kf extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h){const m=this.length;return this.resize(m+1),this.emplace(m,s,h)}emplace(s,h,m){const E=2*s;return this.int16[E+0]=h,this.int16[E+1]=m,s}}kf.prototype.bytesPerElement=4,Jt("StructArrayLayout2i4",kf);class xl extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h,m){const E=this.length;return this.resize(E+1),this.emplace(E,s,h,m)}emplace(s,h,m,E){const I=3*s;return this.int16[I+0]=h,this.int16[I+1]=m,this.int16[I+2]=E,s}}xl.prototype.bytesPerElement=6,Jt("StructArrayLayout3i6",xl);class Ud extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h,m,E){const I=this.length;return this.resize(I+1),this.emplace(I,s,h,m,E)}emplace(s,h,m,E,I){const P=4*s;return this.int16[P+0]=h,this.int16[P+1]=m,this.int16[P+2]=E,this.int16[P+3]=I,s}}Ud.prototype.bytesPerElement=8,Jt("StructArrayLayout4i8",Ud);class Pm extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h,m,E,I,P){const F=this.length;return this.resize(F+1),this.emplace(F,s,h,m,E,I,P)}emplace(s,h,m,E,I,P,F){const $=6*s;return this.int16[$+0]=h,this.int16[$+1]=m,this.int16[$+2]=E,this.int16[$+3]=I,this.int16[$+4]=P,this.int16[$+5]=F,s}}Pm.prototype.bytesPerElement=12,Jt("StructArrayLayout2i4i12",Pm);class qd extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h,m,E,I,P){const F=this.length;return this.resize(F+1),this.emplace(F,s,h,m,E,I,P)}emplace(s,h,m,E,I,P,F){const $=4*s,W=8*s;return this.int16[$+0]=h,this.int16[$+1]=m,this.uint8[W+4]=E,this.uint8[W+5]=I,this.uint8[W+6]=P,this.uint8[W+7]=F,s}}qd.prototype.bytesPerElement=8,Jt("StructArrayLayout2i4ub8",qd);class Qr extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h){const m=this.length;return this.resize(m+1),this.emplace(m,s,h)}emplace(s,h,m){const E=2*s;return this.float32[E+0]=h,this.float32[E+1]=m,s}}Qr.prototype.bytesPerElement=8,Jt("StructArrayLayout2f8",Qr);class gc extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,h,m,E,I,P,F,$,W,ne){const ie=this.length;return this.resize(ie+1),this.emplace(ie,s,h,m,E,I,P,F,$,W,ne)}emplace(s,h,m,E,I,P,F,$,W,ne,ie){const fe=10*s;return this.uint16[fe+0]=h,this.uint16[fe+1]=m,this.uint16[fe+2]=E,this.uint16[fe+3]=I,this.uint16[fe+4]=P,this.uint16[fe+5]=F,this.uint16[fe+6]=$,this.uint16[fe+7]=W,this.uint16[fe+8]=ne,this.uint16[fe+9]=ie,s}}gc.prototype.bytesPerElement=20,Jt("StructArrayLayout10ui20",gc);class Lm extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,h,m,E,I,P,F,$,W,ne,ie,fe){const de=this.length;return this.resize(de+1),this.emplace(de,s,h,m,E,I,P,F,$,W,ne,ie,fe)}emplace(s,h,m,E,I,P,F,$,W,ne,ie,fe,de){const _e=12*s;return this.int16[_e+0]=h,this.int16[_e+1]=m,this.int16[_e+2]=E,this.int16[_e+3]=I,this.uint16[_e+4]=P,this.uint16[_e+5]=F,this.uint16[_e+6]=$,this.uint16[_e+7]=W,this.int16[_e+8]=ne,this.int16[_e+9]=ie,this.int16[_e+10]=fe,this.int16[_e+11]=de,s}}Lm.prototype.bytesPerElement=24,Jt("StructArrayLayout4i4ui4i24",Lm);class Am extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h,m){const E=this.length;return this.resize(E+1),this.emplace(E,s,h,m)}emplace(s,h,m,E){const I=3*s;return this.float32[I+0]=h,this.float32[I+1]=m,this.float32[I+2]=E,s}}Am.prototype.bytesPerElement=12,Jt("StructArrayLayout3f12",Am);class bl extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s){const h=this.length;return this.resize(h+1),this.emplace(h,s)}emplace(s,h){return this.uint32[1*s+0]=h,s}}bl.prototype.bytesPerElement=4,Jt("StructArrayLayout1ul4",bl);class bh extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,h,m,E,I,P,F,$,W){const ne=this.length;return this.resize(ne+1),this.emplace(ne,s,h,m,E,I,P,F,$,W)}emplace(s,h,m,E,I,P,F,$,W,ne){const ie=10*s,fe=5*s;return this.int16[ie+0]=h,this.int16[ie+1]=m,this.int16[ie+2]=E,this.int16[ie+3]=I,this.int16[ie+4]=P,this.int16[ie+5]=F,this.uint32[fe+3]=$,this.uint16[ie+8]=W,this.uint16[ie+9]=ne,s}}bh.prototype.bytesPerElement=20,Jt("StructArrayLayout6i1ul2ui20",bh);class wh extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h,m,E,I,P){const F=this.length;return this.resize(F+1),this.emplace(F,s,h,m,E,I,P)}emplace(s,h,m,E,I,P,F){const $=6*s;return this.int16[$+0]=h,this.int16[$+1]=m,this.int16[$+2]=E,this.int16[$+3]=I,this.int16[$+4]=P,this.int16[$+5]=F,s}}wh.prototype.bytesPerElement=12,Jt("StructArrayLayout2i2i2i12",wh);class Vd extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h,m,E,I){const P=this.length;return this.resize(P+1),this.emplace(P,s,h,m,E,I)}emplace(s,h,m,E,I,P){const F=4*s,$=8*s;return this.float32[F+0]=h,this.float32[F+1]=m,this.float32[F+2]=E,this.int16[$+6]=I,this.int16[$+7]=P,s}}Vd.prototype.bytesPerElement=16,Jt("StructArrayLayout2f1f2i16",Vd);class Om extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h,m,E){const I=this.length;return this.resize(I+1),this.emplace(I,s,h,m,E)}emplace(s,h,m,E,I){const P=12*s,F=3*s;return this.uint8[P+0]=h,this.uint8[P+1]=m,this.float32[F+1]=E,this.float32[F+2]=I,s}}Om.prototype.bytesPerElement=12,Jt("StructArrayLayout2ub2f12",Om);class oy extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,h,m){const E=this.length;return this.resize(E+1),this.emplace(E,s,h,m)}emplace(s,h,m,E){const I=3*s;return this.uint16[I+0]=h,this.uint16[I+1]=m,this.uint16[I+2]=E,s}}oy.prototype.bytesPerElement=6,Jt("StructArrayLayout3ui6",oy);class Gd extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h,m,E,I,P,F,$,W,ne,ie,fe,de,_e,Te,Re,Ue){const tt=this.length;return this.resize(tt+1),this.emplace(tt,s,h,m,E,I,P,F,$,W,ne,ie,fe,de,_e,Te,Re,Ue)}emplace(s,h,m,E,I,P,F,$,W,ne,ie,fe,de,_e,Te,Re,Ue,tt){const Ze=24*s,Ye=12*s,yt=48*s;return this.int16[Ze+0]=h,this.int16[Ze+1]=m,this.uint16[Ze+2]=E,this.uint16[Ze+3]=I,this.uint32[Ye+2]=P,this.uint32[Ye+3]=F,this.uint32[Ye+4]=$,this.uint16[Ze+10]=W,this.uint16[Ze+11]=ne,this.uint16[Ze+12]=ie,this.float32[Ye+7]=fe,this.float32[Ye+8]=de,this.uint8[yt+36]=_e,this.uint8[yt+37]=Te,this.uint8[yt+38]=Re,this.uint32[Ye+10]=Ue,this.int16[Ze+22]=tt,s}}Gd.prototype.bytesPerElement=48,Jt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Gd);class Rf extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h,m,E,I,P,F,$,W,ne,ie,fe,de,_e,Te,Re,Ue,tt,Ze,Ye,yt,wt,Xt,ln,Wt,Ht,Nt,nn){const Ut=this.length;return this.resize(Ut+1),this.emplace(Ut,s,h,m,E,I,P,F,$,W,ne,ie,fe,de,_e,Te,Re,Ue,tt,Ze,Ye,yt,wt,Xt,ln,Wt,Ht,Nt,nn)}emplace(s,h,m,E,I,P,F,$,W,ne,ie,fe,de,_e,Te,Re,Ue,tt,Ze,Ye,yt,wt,Xt,ln,Wt,Ht,Nt,nn,Ut){const Ot=32*s,mn=16*s;return this.int16[Ot+0]=h,this.int16[Ot+1]=m,this.int16[Ot+2]=E,this.int16[Ot+3]=I,this.int16[Ot+4]=P,this.int16[Ot+5]=F,this.int16[Ot+6]=$,this.int16[Ot+7]=W,this.uint16[Ot+8]=ne,this.uint16[Ot+9]=ie,this.uint16[Ot+10]=fe,this.uint16[Ot+11]=de,this.uint16[Ot+12]=_e,this.uint16[Ot+13]=Te,this.uint16[Ot+14]=Re,this.uint16[Ot+15]=Ue,this.uint16[Ot+16]=tt,this.uint16[Ot+17]=Ze,this.uint16[Ot+18]=Ye,this.uint16[Ot+19]=yt,this.uint16[Ot+20]=wt,this.uint16[Ot+21]=Xt,this.uint16[Ot+22]=ln,this.uint32[mn+12]=Wt,this.float32[mn+13]=Ht,this.float32[mn+14]=Nt,this.uint16[Ot+30]=nn,this.uint16[Ot+31]=Ut,s}}Rf.prototype.bytesPerElement=64,Jt("StructArrayLayout8i15ui1ul2f2ui64",Rf);class sy extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s){const h=this.length;return this.resize(h+1),this.emplace(h,s)}emplace(s,h){return this.float32[1*s+0]=h,s}}sy.prototype.bytesPerElement=4,Jt("StructArrayLayout1f4",sy);class ay extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h,m){const E=this.length;return this.resize(E+1),this.emplace(E,s,h,m)}emplace(s,h,m,E){const I=3*s;return this.uint16[6*s+0]=h,this.float32[I+1]=m,this.float32[I+2]=E,s}}ay.prototype.bytesPerElement=12,Jt("StructArrayLayout1ui2f12",ay);class Mf extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,h,m){const E=this.length;return this.resize(E+1),this.emplace(E,s,h,m)}emplace(s,h,m,E){const I=4*s;return this.uint32[2*s+0]=h,this.uint16[I+2]=m,this.uint16[I+3]=E,s}}Mf.prototype.bytesPerElement=8,Jt("StructArrayLayout1ul2ui8",Mf);class Tv extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,h){const m=this.length;return this.resize(m+1),this.emplace(m,s,h)}emplace(s,h,m){const E=2*s;return this.uint16[E+0]=h,this.uint16[E+1]=m,s}}Tv.prototype.bytesPerElement=4,Jt("StructArrayLayout2ui4",Tv);class Cv extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s){const h=this.length;return this.resize(h+1),this.emplace(h,s)}emplace(s,h){return this.uint16[1*s+0]=h,s}}Cv.prototype.bytesPerElement=2,Jt("StructArrayLayout1ui2",Cv);class ly extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h,m,E){const I=this.length;return this.resize(I+1),this.emplace(I,s,h,m,E)}emplace(s,h,m,E,I){const P=4*s;return this.float32[P+0]=h,this.float32[P+1]=m,this.float32[P+2]=E,this.float32[P+3]=I,s}}ly.prototype.bytesPerElement=16,Jt("StructArrayLayout4f16",ly);class Ax extends Po{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new y(this.anchorPointX,this.anchorPointY)}}Ax.prototype.size=20;class S extends bh{get(s){return new Ax(this,s)}}Jt("CollisionBoxArray",S);class a extends Po{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(s){this._structArray.uint8[this._pos1+37]=s}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(s){this._structArray.uint8[this._pos1+38]=s}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(s){this._structArray.uint32[this._pos4+10]=s}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}a.prototype.size=48;class d extends Gd{get(s){return new a(this,s)}}Jt("PlacedSymbolArray",d);class v extends Po{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(s){this._structArray.uint32[this._pos4+12]=s}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}v.prototype.size=64;class w extends Rf{get(s){return new v(this,s)}}Jt("SymbolInstanceArray",w);class C extends sy{getoffsetX(s){return this.float32[1*s+0]}}Jt("GlyphOffsetArray",C);class B extends xl{getx(s){return this.int16[3*s+0]}gety(s){return this.int16[3*s+1]}gettileUnitDistanceFromAnchor(s){return this.int16[3*s+2]}}Jt("SymbolLineVertexArray",B);class j extends Po{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}j.prototype.size=12;class Z extends ay{get(s){return new j(this,s)}}Jt("TextAnchorOffsetArray",Z);class Q extends Po{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Q.prototype.size=8;class se extends Mf{get(s){return new Q(this,s)}}Jt("FeatureIndexArray",se);class le extends kf{}class ye extends kf{}class Le extends kf{}class Pe extends Pm{}class Me extends qd{}class Se extends Qr{}class Ke extends gc{}class at extends Lm{}class Fe extends Am{}class Je extends bl{}class ut extends wh{}class ft extends Om{}class mt extends oy{}class Tt extends Tv{}const Et=$r([{name:"a_pos",components:2,type:"Int16"}],4),{members:Mt}=Et;class zt{constructor(s=[]){this.segments=s}prepareSegment(s,h,m,E){let I=this.segments[this.segments.length-1];return s>zt.MAX_VERTEX_ARRAY_LENGTH&&ue(`Max vertices per segment is ${zt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${s}`),(!I||I.vertexLength+s>zt.MAX_VERTEX_ARRAY_LENGTH||I.sortKey!==E)&&(I={vertexOffset:h.length,primitiveOffset:m.length,vertexLength:0,primitiveLength:0},E!==void 0&&(I.sortKey=E),this.segments.push(I)),I}get(){return this.segments}destroy(){for(const s of this.segments)for(const h in s.vaos)s.vaos[h].destroy()}static simpleSegment(s,h,m,E){return new zt([{vertexOffset:s,primitiveOffset:h,vertexLength:m,primitiveLength:E,vaos:{},sortKey:0}])}}function Mn(c,s){return 256*(c=U(Math.floor(c),0,255))+U(Math.floor(s),0,255)}zt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Jt("SegmentVector",zt);const $t=$r([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var yn={exports:{}},Nn={exports:{}};Nn.exports=function(c,s){var h,m,E,I,P,F,$,W;for(m=c.length-(h=3&c.length),E=s,P=3432918353,F=461845907,W=0;W<m;)$=255&c.charCodeAt(W)|(255&c.charCodeAt(++W))<<8|(255&c.charCodeAt(++W))<<16|(255&c.charCodeAt(++W))<<24,++W,E=27492+(65535&(I=5*(65535&(E=(E^=$=(65535&($=($=(65535&$)*P+((($>>>16)*P&65535)<<16)&4294967295)<<15|$>>>17))*F+((($>>>16)*F&65535)<<16)&4294967295)<<13|E>>>19))+((5*(E>>>16)&65535)<<16)&4294967295))+((58964+(I>>>16)&65535)<<16);switch($=0,h){case 3:$^=(255&c.charCodeAt(W+2))<<16;case 2:$^=(255&c.charCodeAt(W+1))<<8;case 1:E^=$=(65535&($=($=(65535&($^=255&c.charCodeAt(W)))*P+((($>>>16)*P&65535)<<16)&4294967295)<<15|$>>>17))*F+((($>>>16)*F&65535)<<16)&4294967295}return E^=c.length,E=2246822507*(65535&(E^=E>>>16))+((2246822507*(E>>>16)&65535)<<16)&4294967295,E=3266489909*(65535&(E^=E>>>13))+((3266489909*(E>>>16)&65535)<<16)&4294967295,(E^=E>>>16)>>>0};var nr=Nn.exports,Ln={exports:{}};Ln.exports=function(c,s){for(var h,m=c.length,E=s^m,I=0;m>=4;)h=1540483477*(65535&(h=255&c.charCodeAt(I)|(255&c.charCodeAt(++I))<<8|(255&c.charCodeAt(++I))<<16|(255&c.charCodeAt(++I))<<24))+((1540483477*(h>>>16)&65535)<<16),E=1540483477*(65535&E)+((1540483477*(E>>>16)&65535)<<16)^(h=1540483477*(65535&(h^=h>>>24))+((1540483477*(h>>>16)&65535)<<16)),m-=4,++I;switch(m){case 3:E^=(255&c.charCodeAt(I+2))<<16;case 2:E^=(255&c.charCodeAt(I+1))<<8;case 1:E=1540483477*(65535&(E^=255&c.charCodeAt(I)))+((1540483477*(E>>>16)&65535)<<16)}return E=1540483477*(65535&(E^=E>>>13))+((1540483477*(E>>>16)&65535)<<16),(E^=E>>>15)>>>0};var zn=nr,Vn=Ln.exports;yn.exports=zn,yn.exports.murmur3=zn,yn.exports.murmur2=Vn;var wi=p(yn.exports);class Rr{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(s,h,m,E){this.ids.push(ma(s)),this.positions.push(h,m,E)}getPositions(s){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const h=ma(s);let m=0,E=this.ids.length-1;for(;m<E;){const P=m+E>>1;this.ids[P]>=h?E=P:m=P+1}const I=[];for(;this.ids[m]===h;)I.push({index:this.positions[3*m],start:this.positions[3*m+1],end:this.positions[3*m+2]}),m++;return I}static serialize(s,h){const m=new Float64Array(s.ids),E=new Uint32Array(s.positions);return co(m,E,0,m.length-1),h&&h.push(m.buffer,E.buffer),{ids:m,positions:E}}static deserialize(s){const h=new Rr;return h.ids=s.ids,h.positions=s.positions,h.indexed=!0,h}}function ma(c){const s=+c;return!isNaN(s)&&s<=Number.MAX_SAFE_INTEGER?s:wi(String(c))}function co(c,s,h,m){for(;h<m;){const E=c[h+m>>1];let I=h-1,P=m+1;for(;;){do I++;while(c[I]<E);do P--;while(c[P]>E);if(I>=P)break;fi(c,I,P),fi(s,3*I,3*P),fi(s,3*I+1,3*P+1),fi(s,3*I+2,3*P+2)}P-h<m-P?(co(c,s,h,P),h=P+1):(co(c,s,P+1,m),m=P)}}function fi(c,s,h){const m=c[s];c[s]=c[h],c[h]=m}Jt("FeaturePositionMap",Rr);class ho{constructor(s,h){this.gl=s.gl,this.location=h}}class ga extends ho{constructor(s,h){super(s,h),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1f(this.location,s))}}class pu extends ho{constructor(s,h){super(s,h),this.current=[0,0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]&&s[3]===this.current[3]||(this.current=s,this.gl.uniform4f(this.location,s[0],s[1],s[2],s[3]))}}class Eh extends ho{constructor(s,h){super(s,h),this.current=or.transparent}set(s){s.r===this.current.r&&s.g===this.current.g&&s.b===this.current.b&&s.a===this.current.a||(this.current=s,this.gl.uniform4f(this.location,s.r,s.g,s.b,s.a))}}const km=new Float32Array(16);function Sh(c){return[Mn(255*c.r,255*c.g),Mn(255*c.b,255*c.a)]}class mu{constructor(s,h,m){this.value=s,this.uniformNames=h.map(E=>`u_${E}`),this.type=m}setUniform(s,h,m){s.set(m.constantOr(this.value))}getBinding(s,h,m){return this.type==="color"?new Eh(s,h):new ga(s,h)}}class Qi{constructor(s,h){this.uniformNames=h.map(m=>`u_${m}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(s,h){this.pixelRatioFrom=h.pixelRatio,this.pixelRatioTo=s.pixelRatio,this.patternFrom=h.tlbr,this.patternTo=s.tlbr}setUniform(s,h,m,E){const I=E==="u_pattern_to"?this.patternTo:E==="u_pattern_from"?this.patternFrom:E==="u_pixel_ratio_to"?this.pixelRatioTo:E==="u_pixel_ratio_from"?this.pixelRatioFrom:null;I&&s.set(I)}getBinding(s,h,m){return m.substr(0,9)==="u_pattern"?new pu(s,h):new ga(s,h)}}class di{constructor(s,h,m,E){this.expression=s,this.type=m,this.maxValue=0,this.paintVertexAttributes=h.map(I=>({name:`a_${I}`,type:"Float32",components:m==="color"?2:1,offset:0})),this.paintVertexArray=new E}populatePaintArray(s,h,m,E,I){const P=this.paintVertexArray.length,F=this.expression.evaluate(new jr(0),h,{},E,[],I);this.paintVertexArray.resize(s),this._setPaintValue(P,s,F)}updatePaintArray(s,h,m,E){const I=this.expression.evaluate({zoom:0},m,E);this._setPaintValue(s,h,I)}_setPaintValue(s,h,m){if(this.type==="color"){const E=Sh(m);for(let I=s;I<h;I++)this.paintVertexArray.emplace(I,E[0],E[1])}else{for(let E=s;E<h;E++)this.paintVertexArray.emplace(E,m);this.maxValue=Math.max(this.maxValue,Math.abs(m))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ai{constructor(s,h,m,E,I,P){this.expression=s,this.uniformNames=h.map(F=>`u_${F}_t`),this.type=m,this.useIntegerZoom=E,this.zoom=I,this.maxValue=0,this.paintVertexAttributes=h.map(F=>({name:`a_${F}`,type:"Float32",components:m==="color"?4:2,offset:0})),this.paintVertexArray=new P}populatePaintArray(s,h,m,E,I){const P=this.expression.evaluate(new jr(this.zoom),h,{},E,[],I),F=this.expression.evaluate(new jr(this.zoom+1),h,{},E,[],I),$=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValue($,s,P,F)}updatePaintArray(s,h,m,E){const I=this.expression.evaluate({zoom:this.zoom},m,E),P=this.expression.evaluate({zoom:this.zoom+1},m,E);this._setPaintValue(s,h,I,P)}_setPaintValue(s,h,m,E){if(this.type==="color"){const I=Sh(m),P=Sh(E);for(let F=s;F<h;F++)this.paintVertexArray.emplace(F,I[0],I[1],P[0],P[1])}else{for(let I=s;I<h;I++)this.paintVertexArray.emplace(I,m,E);this.maxValue=Math.max(this.maxValue,Math.abs(m),Math.abs(E))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(s,h){const m=this.useIntegerZoom?Math.floor(h.zoom):h.zoom,E=U(this.expression.interpolationFactor(m,this.zoom,this.zoom+1),0,1);s.set(E)}getBinding(s,h,m){return new ga(s,h)}}class Wa{constructor(s,h,m,E,I,P){this.expression=s,this.type=h,this.useIntegerZoom=m,this.zoom=E,this.layerId=P,this.zoomInPaintVertexArray=new I,this.zoomOutPaintVertexArray=new I}populatePaintArray(s,h,m){const E=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(s),this.zoomOutPaintVertexArray.resize(s),this._setPaintValues(E,s,h.patterns&&h.patterns[this.layerId],m)}updatePaintArray(s,h,m,E,I){this._setPaintValues(s,h,m.patterns&&m.patterns[this.layerId],I)}_setPaintValues(s,h,m,E){if(!E||!m)return;const{min:I,mid:P,max:F}=m,$=E[I],W=E[P],ne=E[F];if($&&W&&ne)for(let ie=s;ie<h;ie++)this.zoomInPaintVertexArray.emplace(ie,W.tl[0],W.tl[1],W.br[0],W.br[1],$.tl[0],$.tl[1],$.br[0],$.br[1],W.pixelRatio,$.pixelRatio),this.zoomOutPaintVertexArray.emplace(ie,W.tl[0],W.tl[1],W.br[0],W.br[1],ne.tl[0],ne.tl[1],ne.br[0],ne.br[1],W.pixelRatio,ne.pixelRatio)}upload(s){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=s.createVertexBuffer(this.zoomInPaintVertexArray,$t.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=s.createVertexBuffer(this.zoomOutPaintVertexArray,$t.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class eo{constructor(s,h,m){this.binders={},this._buffers=[];const E=[];for(const I in s.paint._values){if(!m(I))continue;const P=s.paint.get(I);if(!(P instanceof re&&ac(P.property.specification)))continue;const F=Ka(I,s.type),$=P.value,W=P.property.specification.type,ne=P.property.useIntegerZoom,ie=P.property.specification["property-type"],fe=ie==="cross-faded"||ie==="cross-faded-data-driven";if($.kind==="constant")this.binders[I]=fe?new Qi($.value,F):new mu($.value,F,W),E.push(`/u_${I}`);else if($.kind==="source"||fe){const de=to(I,W,"source");this.binders[I]=fe?new Wa($,W,ne,h,de,s.id):new di($,F,W,de),E.push(`/a_${I}`)}else{const de=to(I,W,"composite");this.binders[I]=new ai($,F,W,ne,h,de),E.push(`/z_${I}`)}}this.cacheKey=E.sort().join("")}getMaxValue(s){const h=this.binders[s];return h instanceof di||h instanceof ai?h.maxValue:0}populatePaintArrays(s,h,m,E,I){for(const P in this.binders){const F=this.binders[P];(F instanceof di||F instanceof ai||F instanceof Wa)&&F.populatePaintArray(s,h,m,E,I)}}setConstantPatternPositions(s,h){for(const m in this.binders){const E=this.binders[m];E instanceof Qi&&E.setConstantPatternPositions(s,h)}}updatePaintArrays(s,h,m,E,I){let P=!1;for(const F in s){const $=h.getPositions(F);for(const W of $){const ne=m.feature(W.index);for(const ie in this.binders){const fe=this.binders[ie];if((fe instanceof di||fe instanceof ai||fe instanceof Wa)&&fe.expression.isStateDependent===!0){const de=E.paint.get(ie);fe.expression=de.value,fe.updatePaintArray(W.start,W.end,ne,s[F],I),P=!0}}}}return P}defines(){const s=[];for(const h in this.binders){const m=this.binders[h];(m instanceof mu||m instanceof Qi)&&s.push(...m.uniformNames.map(E=>`#define HAS_UNIFORM_${E}`))}return s}getBinderAttributes(){const s=[];for(const h in this.binders){const m=this.binders[h];if(m instanceof di||m instanceof ai)for(let E=0;E<m.paintVertexAttributes.length;E++)s.push(m.paintVertexAttributes[E].name);else if(m instanceof Wa)for(let E=0;E<$t.members.length;E++)s.push($t.members[E].name)}return s}getBinderUniforms(){const s=[];for(const h in this.binders){const m=this.binders[h];if(m instanceof mu||m instanceof Qi||m instanceof ai)for(const E of m.uniformNames)s.push(E)}return s}getPaintVertexBuffers(){return this._buffers}getUniforms(s,h){const m=[];for(const E in this.binders){const I=this.binders[E];if(I instanceof mu||I instanceof Qi||I instanceof ai){for(const P of I.uniformNames)if(h[P]){const F=I.getBinding(s,h[P],P);m.push({name:P,property:E,binding:F})}}}return m}setUniforms(s,h,m,E){for(const{name:I,property:P,binding:F}of h)this.binders[P].setUniform(F,E,m.get(P),I)}updatePaintBuffers(s){this._buffers=[];for(const h in this.binders){const m=this.binders[h];if(s&&m instanceof Wa){const E=s.fromScale===2?m.zoomInPaintVertexBuffer:m.zoomOutPaintVertexBuffer;E&&this._buffers.push(E)}else(m instanceof di||m instanceof ai)&&m.paintVertexBuffer&&this._buffers.push(m.paintVertexBuffer)}}upload(s){for(const h in this.binders){const m=this.binders[h];(m instanceof di||m instanceof ai||m instanceof Wa)&&m.upload(s)}this.updatePaintBuffers()}destroy(){for(const s in this.binders){const h=this.binders[s];(h instanceof di||h instanceof ai||h instanceof Wa)&&h.destroy()}}}class pi{constructor(s,h,m=()=>!0){this.programConfigurations={};for(const E of s)this.programConfigurations[E.id]=new eo(E,h,m);this.needsUpload=!1,this._featureMap=new Rr,this._bufferOffset=0}populatePaintArrays(s,h,m,E,I,P){for(const F in this.programConfigurations)this.programConfigurations[F].populatePaintArrays(s,h,E,I,P);h.id!==void 0&&this._featureMap.add(h.id,m,this._bufferOffset,s),this._bufferOffset=s,this.needsUpload=!0}updatePaintArrays(s,h,m,E){for(const I of m)this.needsUpload=this.programConfigurations[I.id].updatePaintArrays(s,this._featureMap,h,I,E)||this.needsUpload}get(s){return this.programConfigurations[s]}upload(s){if(this.needsUpload){for(const h in this.programConfigurations)this.programConfigurations[h].upload(s);this.needsUpload=!1}}destroy(){for(const s in this.programConfigurations)this.programConfigurations[s].destroy()}}function Ka(c,s){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[c]||[c.replace(`${s}-`,"").replace(/-/g,"_")]}function to(c,s,h){const m={color:{source:Qr,composite:ly},number:{source:sy,composite:Qr}},E=function(I){return{"line-pattern":{source:Ke,composite:Ke},"fill-pattern":{source:Ke,composite:Ke},"fill-extrusion-pattern":{source:Ke,composite:Ke}}[I]}(c);return E&&E[h]||m[s][h]}Jt("ConstantBinder",mu),Jt("CrossFadedConstantBinder",Qi),Jt("SourceExpressionBinder",di),Jt("CrossFadedCompositeBinder",Wa),Jt("CompositeExpressionBinder",ai),Jt("ProgramConfiguration",eo,{omit:["_buffers"]}),Jt("ProgramConfigurationSet",pi);const Mi=8192,Iv=Math.pow(2,14)-1,Ox=-Iv-1;function Nf(c){const s=Mi/c.extent,h=c.loadGeometry();for(let m=0;m<h.length;m++){const E=h[m];for(let I=0;I<E.length;I++){const P=E[I],F=Math.round(P.x*s),$=Math.round(P.y*s);P.x=U(F,Ox,Iv),P.y=U($,Ox,Iv),(F<P.x||F>P.x+1||$<P.y||$>P.y+1)&&ue("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return h}function Df(c,s){return{type:c.type,id:c.id,properties:c.properties,geometry:s?Nf(c):[]}}function uy(c,s,h,m,E){c.emplaceBack(2*s+(m+1)/2,2*h+(E+1)/2)}class Th{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(h=>h.id),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new ye,this.indexArray=new mt,this.segments=new zt,this.programConfigurations=new pi(s.layers,s.zoom),this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(s,h,m){const E=this.layers[0],I=[];let P=null,F=!1;E.type==="circle"&&(P=E.layout.get("circle-sort-key"),F=!P.isConstant());for(const{feature:$,id:W,index:ne,sourceLayerIndex:ie}of s){const fe=this.layers[0]._featureFilter.needGeometry,de=Df($,fe);if(!this.layers[0]._featureFilter.filter(new jr(this.zoom),de,m))continue;const _e=F?P.evaluate(de,{},m):void 0,Te={id:W,properties:$.properties,type:$.type,sourceLayerIndex:ie,index:ne,geometry:fe?de.geometry:Nf($),patterns:{},sortKey:_e};I.push(Te)}F&&I.sort(($,W)=>$.sortKey-W.sortKey);for(const $ of I){const{geometry:W,index:ne,sourceLayerIndex:ie}=$,fe=s[ne].feature;this.addFeature($,W,ne,m),h.featureIndex.insert(fe,W,ne,ie,this.index)}}update(s,h,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,h,this.stateDependentLayers,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,Mt),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(s,h,m,E){for(const I of h)for(const P of I){const F=P.x,$=P.y;if(F<0||F>=Mi||$<0||$>=Mi)continue;const W=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,s.sortKey),ne=W.vertexLength;uy(this.layoutVertexArray,F,$,-1,-1),uy(this.layoutVertexArray,F,$,1,-1),uy(this.layoutVertexArray,F,$,1,1),uy(this.layoutVertexArray,F,$,-1,1),this.indexArray.emplaceBack(ne,ne+1,ne+2),this.indexArray.emplaceBack(ne,ne+3,ne+2),W.vertexLength+=4,W.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,m,{},E)}}function Pv(c,s){for(let h=0;h<c.length;h++)if(hy(s,c[h]))return!0;for(let h=0;h<s.length;h++)if(hy(c,s[h]))return!0;return!!cy(c,s)}function kx(c,s,h){return!!hy(c,s)||!!hT(s,c,h)}function Lv(c,s){if(c.length===1)return MO(s,c[0]);for(let h=0;h<s.length;h++){const m=s[h];for(let E=0;E<m.length;E++)if(hy(c,m[E]))return!0}for(let h=0;h<c.length;h++)if(MO(s,c[h]))return!0;for(let h=0;h<s.length;h++)if(cy(c,s[h]))return!0;return!1}function Av(c,s,h){if(c.length>1){if(cy(c,s))return!0;for(let m=0;m<s.length;m++)if(hT(s[m],c,h))return!0}for(let m=0;m<c.length;m++)if(hT(c[m],s,h))return!0;return!1}function cy(c,s){if(c.length===0||s.length===0)return!1;for(let h=0;h<c.length-1;h++){const m=c[h],E=c[h+1];for(let I=0;I<s.length-1;I++)if(Ov(m,E,s[I],s[I+1]))return!0}return!1}function Ov(c,s,h,m){return oe(c,h,m)!==oe(s,h,m)&&oe(c,s,h)!==oe(c,s,m)}function hT(c,s,h){const m=h*h;if(s.length===1)return c.distSqr(s[0])<m;for(let E=1;E<s.length;E++)if(RO(c,s[E-1],s[E])<m)return!0;return!1}function RO(c,s,h){const m=s.distSqr(h);if(m===0)return c.distSqr(s);const E=((c.x-s.x)*(h.x-s.x)+(c.y-s.y)*(h.y-s.y))/m;return c.distSqr(E<0?s:E>1?h:h.sub(s)._mult(E)._add(s))}function MO(c,s){let h,m,E,I=!1;for(let P=0;P<c.length;P++){h=c[P];for(let F=0,$=h.length-1;F<h.length;$=F++)m=h[F],E=h[$],m.y>s.y!=E.y>s.y&&s.x<(E.x-m.x)*(s.y-m.y)/(E.y-m.y)+m.x&&(I=!I)}return I}function hy(c,s){let h=!1;for(let m=0,E=c.length-1;m<c.length;E=m++){const I=c[m],P=c[E];I.y>s.y!=P.y>s.y&&s.x<(P.x-I.x)*(s.y-I.y)/(P.y-I.y)+I.x&&(h=!h)}return h}function B8(c,s,h){const m=h[0],E=h[2];if(c.x<m.x&&s.x<m.x||c.x>E.x&&s.x>E.x||c.y<m.y&&s.y<m.y||c.y>E.y&&s.y>E.y)return!1;const I=oe(c,s,h[0]);return I!==oe(c,s,h[1])||I!==oe(c,s,h[2])||I!==oe(c,s,h[3])}function kv(c,s,h){const m=s.paint.get(c).value;return m.kind==="constant"?m.value:h.programConfigurations.get(s.id).getMaxValue(c)}function Rx(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function Mx(c,s,h,m,E){if(!s[0]&&!s[1])return c;const I=y.convert(s)._mult(E);h==="viewport"&&I._rotate(-m);const P=[];for(let F=0;F<c.length;F++)P.push(c[F].sub(I));return P}let NO,DO;Jt("CircleBucket",Th,{omit:["layers"]});var j8={get paint(){return DO=DO||new hn({"circle-radius":new We(rt.paint_circle["circle-radius"]),"circle-color":new We(rt.paint_circle["circle-color"]),"circle-blur":new We(rt.paint_circle["circle-blur"]),"circle-opacity":new We(rt.paint_circle["circle-opacity"]),"circle-translate":new Ce(rt.paint_circle["circle-translate"]),"circle-translate-anchor":new Ce(rt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ce(rt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ce(rt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new We(rt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new We(rt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new We(rt.paint_circle["circle-stroke-opacity"])})},get layout(){return NO=NO||new hn({"circle-sort-key":new We(rt.layout_circle["circle-sort-key"])})}},Ws=1e-6,fy=typeof Float32Array<"u"?Float32Array:Array;function fT(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function zO(c,s,h){var m=s[0],E=s[1],I=s[2],P=s[3],F=s[4],$=s[5],W=s[6],ne=s[7],ie=s[8],fe=s[9],de=s[10],_e=s[11],Te=s[12],Re=s[13],Ue=s[14],tt=s[15],Ze=h[0],Ye=h[1],yt=h[2],wt=h[3];return c[0]=Ze*m+Ye*F+yt*ie+wt*Te,c[1]=Ze*E+Ye*$+yt*fe+wt*Re,c[2]=Ze*I+Ye*W+yt*de+wt*Ue,c[3]=Ze*P+Ye*ne+yt*_e+wt*tt,c[4]=(Ze=h[4])*m+(Ye=h[5])*F+(yt=h[6])*ie+(wt=h[7])*Te,c[5]=Ze*E+Ye*$+yt*fe+wt*Re,c[6]=Ze*I+Ye*W+yt*de+wt*Ue,c[7]=Ze*P+Ye*ne+yt*_e+wt*tt,c[8]=(Ze=h[8])*m+(Ye=h[9])*F+(yt=h[10])*ie+(wt=h[11])*Te,c[9]=Ze*E+Ye*$+yt*fe+wt*Re,c[10]=Ze*I+Ye*W+yt*de+wt*Ue,c[11]=Ze*P+Ye*ne+yt*_e+wt*tt,c[12]=(Ze=h[12])*m+(Ye=h[13])*F+(yt=h[14])*ie+(wt=h[15])*Te,c[13]=Ze*E+Ye*$+yt*fe+wt*Re,c[14]=Ze*I+Ye*W+yt*de+wt*Ue,c[15]=Ze*P+Ye*ne+yt*_e+wt*tt,c}Math.hypot||(Math.hypot=function(){for(var c=0,s=arguments.length;s--;)c+=arguments[s]*arguments[s];return Math.sqrt(c)});var Rv,$8=zO;function Nx(c,s,h){var m=s[0],E=s[1],I=s[2],P=s[3];return c[0]=h[0]*m+h[4]*E+h[8]*I+h[12]*P,c[1]=h[1]*m+h[5]*E+h[9]*I+h[13]*P,c[2]=h[2]*m+h[6]*E+h[10]*I+h[14]*P,c[3]=h[3]*m+h[7]*E+h[11]*I+h[15]*P,c}Rv=new fy(4),fy!=Float32Array&&(Rv[0]=0,Rv[1]=0,Rv[2]=0,Rv[3]=0);class U8 extends Hr{constructor(s){super(s,j8)}createBucket(s){return new Th(s)}queryRadius(s){const h=s;return kv("circle-radius",this,h)+kv("circle-stroke-width",this,h)+Rx(this.paint.get("circle-translate"))}queryIntersectsFeature(s,h,m,E,I,P,F,$){const W=Mx(s,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),P.angle,F),ne=this.paint.get("circle-radius").evaluate(h,m)+this.paint.get("circle-stroke-width").evaluate(h,m),ie=this.paint.get("circle-pitch-alignment")==="map",fe=ie?W:function(_e,Te){return _e.map(Re=>FO(Re,Te))}(W,$),de=ie?ne*F:ne;for(const _e of E)for(const Te of _e){const Re=ie?Te:FO(Te,$);let Ue=de;const tt=Nx([],[Te.x,Te.y,0,1],$);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ue*=tt[3]/P.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ue*=P.cameraToCenterDistance/tt[3]),kx(fe,Re,Ue))return!0}return!1}}function FO(c,s){const h=Nx([],[c.x,c.y,0,1],s);return new y(h[0]/h[3],h[1]/h[3])}class BO extends Th{}let jO;Jt("HeatmapBucket",BO,{omit:["layers"]});var q8={get paint(){return jO=jO||new hn({"heatmap-radius":new We(rt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new We(rt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ce(rt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new tn(rt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ce(rt.paint_heatmap["heatmap-opacity"])})}};function dT(c,{width:s,height:h},m,E){if(E){if(E instanceof Uint8ClampedArray)E=new Uint8Array(E.buffer);else if(E.length!==s*h*m)throw new RangeError(`mismatched image size. expected: ${E.length} but got: ${s*h*m}`)}else E=new Uint8Array(s*h*m);return c.width=s,c.height=h,c.data=E,c}function $O(c,{width:s,height:h},m){if(s===c.width&&h===c.height)return;const E=dT({},{width:s,height:h},m);pT(c,E,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,s),height:Math.min(c.height,h)},m),c.width=s,c.height=h,c.data=E.data}function pT(c,s,h,m,E,I){if(E.width===0||E.height===0)return s;if(E.width>c.width||E.height>c.height||h.x>c.width-E.width||h.y>c.height-E.height)throw new RangeError("out of range source coordinates for image copy");if(E.width>s.width||E.height>s.height||m.x>s.width-E.width||m.y>s.height-E.height)throw new RangeError("out of range destination coordinates for image copy");const P=c.data,F=s.data;if(P===F)throw new Error("srcData equals dstData, so image is already copied");for(let $=0;$<E.height;$++){const W=((h.y+$)*c.width+h.x)*I,ne=((m.y+$)*s.width+m.x)*I;for(let ie=0;ie<E.width*I;ie++)F[ne+ie]=P[W+ie]}return s}class Mv{constructor(s,h){dT(this,s,1,h)}resize(s){$O(this,s,1)}clone(){return new Mv({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,h,m,E,I){pT(s,h,m,E,I,1)}}class wl{constructor(s,h){dT(this,s,4,h)}resize(s){$O(this,s,4)}replace(s,h){h?this.data.set(s):this.data=s instanceof Uint8ClampedArray?new Uint8Array(s.buffer):s}clone(){return new wl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,h,m,E,I){pT(s,h,m,E,I,4)}}function UO(c){const s={},h=c.resolution||256,m=c.clips?c.clips.length:1,E=c.image||new wl({width:h,height:m});if(Math.log(h)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${h}`);const I=(P,F,$)=>{s[c.evaluationKey]=$;const W=c.expression.evaluate(s);E.data[P+F+0]=Math.floor(255*W.r/W.a),E.data[P+F+1]=Math.floor(255*W.g/W.a),E.data[P+F+2]=Math.floor(255*W.b/W.a),E.data[P+F+3]=Math.floor(255*W.a)};if(c.clips)for(let P=0,F=0;P<m;++P,F+=4*h)for(let $=0,W=0;$<h;$++,W+=4){const ne=$/(h-1),{start:ie,end:fe}=c.clips[P];I(F,W,ie*(1-ne)+fe*ne)}else for(let P=0,F=0;P<h;P++,F+=4)I(0,F,P/(h-1));return E}Jt("AlphaImage",Mv),Jt("RGBAImage",wl);class V8 extends Hr{createBucket(s){return new BO(s)}constructor(s){super(s,q8),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(s){s==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=UO({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let qO;var G8={get paint(){return qO=qO||new hn({"hillshade-illumination-direction":new Ce(rt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ce(rt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ce(rt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ce(rt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ce(rt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ce(rt.paint_hillshade["hillshade-accent-color"])})}};class H8 extends Hr{constructor(s){super(s,G8)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const Z8=$r([{name:"a_pos",components:2,type:"Int16"}],4),{members:W8}=Z8;var mT={exports:{}};function Dx(c,s,h){h=h||2;var m,E,I,P,F,$,W,ne=s&&s.length,ie=ne?s[0]*h:c.length,fe=VO(c,0,ie,h,!0),de=[];if(!fe||fe.next===fe.prev)return de;if(ne&&(fe=function(Te,Re,Ue,tt){var Ze,Ye,yt,wt=[];for(Ze=0,Ye=Re.length;Ze<Ye;Ze++)(yt=VO(Te,Re[Ze]*tt,Ze<Ye-1?Re[Ze+1]*tt:Te.length,tt,!1))===yt.next&&(yt.steiner=!0),wt.push(nU(yt));for(wt.sort(Q8),Ze=0;Ze<wt.length;Ze++)Ue=eU(wt[Ze],Ue);return Ue}(c,s,fe,h)),c.length>80*h){m=I=c[0],E=P=c[1];for(var _e=h;_e<ie;_e+=h)(F=c[_e])<m&&(m=F),($=c[_e+1])<E&&(E=$),F>I&&(I=F),$>P&&(P=$);W=(W=Math.max(I-m,P-E))!==0?32767/W:0}return Nv(fe,de,h,m,E,W,0),de}function VO(c,s,h,m,E){var I,P;if(E===_T(c,s,h,m)>0)for(I=s;I<h;I+=m)P=ZO(I,c[I],c[I+1],P);else for(I=h-m;I>=s;I-=m)P=ZO(I,c[I],c[I+1],P);return P&&zx(P,P.next)&&(zv(P),P=P.next),P}function Rm(c,s){if(!c)return c;s||(s=c);var h,m=c;do if(h=!1,m.steiner||!zx(m,m.next)&&Ui(m.prev,m,m.next)!==0)m=m.next;else{if(zv(m),(m=s=m.prev)===m.next)break;h=!0}while(h||m!==s);return s}function Nv(c,s,h,m,E,I,P){if(c){!P&&I&&function(ne,ie,fe,de){var _e=ne;do _e.z===0&&(_e.z=gT(_e.x,_e.y,ie,fe,de)),_e.prevZ=_e.prev,_e.nextZ=_e.next,_e=_e.next;while(_e!==ne);_e.prevZ.nextZ=null,_e.prevZ=null,function(Te){var Re,Ue,tt,Ze,Ye,yt,wt,Xt,ln=1;do{for(Ue=Te,Te=null,Ye=null,yt=0;Ue;){for(yt++,tt=Ue,wt=0,Re=0;Re<ln&&(wt++,tt=tt.nextZ);Re++);for(Xt=ln;wt>0||Xt>0&&tt;)wt!==0&&(Xt===0||!tt||Ue.z<=tt.z)?(Ze=Ue,Ue=Ue.nextZ,wt--):(Ze=tt,tt=tt.nextZ,Xt--),Ye?Ye.nextZ=Ze:Te=Ze,Ze.prevZ=Ye,Ye=Ze;Ue=tt}Ye.nextZ=null,ln*=2}while(yt>1)}(_e)}(c,m,E,I);for(var F,$,W=c;c.prev!==c.next;)if(F=c.prev,$=c.next,I?X8(c,m,E,I):K8(c))s.push(F.i/h|0),s.push(c.i/h|0),s.push($.i/h|0),zv(c),c=$.next,W=$.next;else if((c=$)===W){P?P===1?Nv(c=Y8(Rm(c),s,h),s,h,m,E,I,2):P===2&&J8(c,s,h,m,E,I):Nv(Rm(c),s,h,m,E,I,1);break}}}function K8(c){var s=c.prev,h=c,m=c.next;if(Ui(s,h,m)>=0)return!1;for(var E=s.x,I=h.x,P=m.x,F=s.y,$=h.y,W=m.y,ne=E<I?E<P?E:P:I<P?I:P,ie=F<$?F<W?F:W:$<W?$:W,fe=E>I?E>P?E:P:I>P?I:P,de=F>$?F>W?F:W:$>W?$:W,_e=m.next;_e!==s;){if(_e.x>=ne&&_e.x<=fe&&_e.y>=ie&&_e.y<=de&&dy(E,F,I,$,P,W,_e.x,_e.y)&&Ui(_e.prev,_e,_e.next)>=0)return!1;_e=_e.next}return!0}function X8(c,s,h,m){var E=c.prev,I=c,P=c.next;if(Ui(E,I,P)>=0)return!1;for(var F=E.x,$=I.x,W=P.x,ne=E.y,ie=I.y,fe=P.y,de=F<$?F<W?F:W:$<W?$:W,_e=ne<ie?ne<fe?ne:fe:ie<fe?ie:fe,Te=F>$?F>W?F:W:$>W?$:W,Re=ne>ie?ne>fe?ne:fe:ie>fe?ie:fe,Ue=gT(de,_e,s,h,m),tt=gT(Te,Re,s,h,m),Ze=c.prevZ,Ye=c.nextZ;Ze&&Ze.z>=Ue&&Ye&&Ye.z<=tt;){if(Ze.x>=de&&Ze.x<=Te&&Ze.y>=_e&&Ze.y<=Re&&Ze!==E&&Ze!==P&&dy(F,ne,$,ie,W,fe,Ze.x,Ze.y)&&Ui(Ze.prev,Ze,Ze.next)>=0||(Ze=Ze.prevZ,Ye.x>=de&&Ye.x<=Te&&Ye.y>=_e&&Ye.y<=Re&&Ye!==E&&Ye!==P&&dy(F,ne,$,ie,W,fe,Ye.x,Ye.y)&&Ui(Ye.prev,Ye,Ye.next)>=0))return!1;Ye=Ye.nextZ}for(;Ze&&Ze.z>=Ue;){if(Ze.x>=de&&Ze.x<=Te&&Ze.y>=_e&&Ze.y<=Re&&Ze!==E&&Ze!==P&&dy(F,ne,$,ie,W,fe,Ze.x,Ze.y)&&Ui(Ze.prev,Ze,Ze.next)>=0)return!1;Ze=Ze.prevZ}for(;Ye&&Ye.z<=tt;){if(Ye.x>=de&&Ye.x<=Te&&Ye.y>=_e&&Ye.y<=Re&&Ye!==E&&Ye!==P&&dy(F,ne,$,ie,W,fe,Ye.x,Ye.y)&&Ui(Ye.prev,Ye,Ye.next)>=0)return!1;Ye=Ye.nextZ}return!0}function Y8(c,s,h){var m=c;do{var E=m.prev,I=m.next.next;!zx(E,I)&&GO(E,m,m.next,I)&&Dv(E,I)&&Dv(I,E)&&(s.push(E.i/h|0),s.push(m.i/h|0),s.push(I.i/h|0),zv(m),zv(m.next),m=c=I),m=m.next}while(m!==c);return Rm(m)}function J8(c,s,h,m,E,I){var P=c;do{for(var F=P.next.next;F!==P.prev;){if(P.i!==F.i&&rU(P,F)){var $=HO(P,F);return P=Rm(P,P.next),$=Rm($,$.next),Nv(P,s,h,m,E,I,0),void Nv($,s,h,m,E,I,0)}F=F.next}P=P.next}while(P!==c)}function Q8(c,s){return c.x-s.x}function eU(c,s){var h=function(E,I){var P,F=I,$=E.x,W=E.y,ne=-1/0;do{if(W<=F.y&&W>=F.next.y&&F.next.y!==F.y){var ie=F.x+(W-F.y)*(F.next.x-F.x)/(F.next.y-F.y);if(ie<=$&&ie>ne&&(ne=ie,P=F.x<F.next.x?F:F.next,ie===$))return P}F=F.next}while(F!==I);if(!P)return null;var fe,de=P,_e=P.x,Te=P.y,Re=1/0;F=P;do $>=F.x&&F.x>=_e&&$!==F.x&&dy(W<Te?$:ne,W,_e,Te,W<Te?ne:$,W,F.x,F.y)&&(fe=Math.abs(W-F.y)/($-F.x),Dv(F,E)&&(fe<Re||fe===Re&&(F.x>P.x||F.x===P.x&&tU(P,F)))&&(P=F,Re=fe)),F=F.next;while(F!==de);return P}(c,s);if(!h)return s;var m=HO(h,c);return Rm(m,m.next),Rm(h,h.next)}function tU(c,s){return Ui(c.prev,c,s.prev)<0&&Ui(s.next,c,c.next)<0}function gT(c,s,h,m,E){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-h)*E|0)|c<<8))|c<<4))|c<<2))|c<<1))|(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-m)*E|0)|s<<8))|s<<4))|s<<2))|s<<1))<<1}function nU(c){var s=c,h=c;do(s.x<h.x||s.x===h.x&&s.y<h.y)&&(h=s),s=s.next;while(s!==c);return h}function dy(c,s,h,m,E,I,P,F){return(E-P)*(s-F)>=(c-P)*(I-F)&&(c-P)*(m-F)>=(h-P)*(s-F)&&(h-P)*(I-F)>=(E-P)*(m-F)}function rU(c,s){return c.next.i!==s.i&&c.prev.i!==s.i&&!function(h,m){var E=h;do{if(E.i!==h.i&&E.next.i!==h.i&&E.i!==m.i&&E.next.i!==m.i&&GO(E,E.next,h,m))return!0;E=E.next}while(E!==h);return!1}(c,s)&&(Dv(c,s)&&Dv(s,c)&&function(h,m){var E=h,I=!1,P=(h.x+m.x)/2,F=(h.y+m.y)/2;do E.y>F!=E.next.y>F&&E.next.y!==E.y&&P<(E.next.x-E.x)*(F-E.y)/(E.next.y-E.y)+E.x&&(I=!I),E=E.next;while(E!==h);return I}(c,s)&&(Ui(c.prev,c,s.prev)||Ui(c,s.prev,s))||zx(c,s)&&Ui(c.prev,c,c.next)>0&&Ui(s.prev,s,s.next)>0)}function Ui(c,s,h){return(s.y-c.y)*(h.x-s.x)-(s.x-c.x)*(h.y-s.y)}function zx(c,s){return c.x===s.x&&c.y===s.y}function GO(c,s,h,m){var E=Bx(Ui(c,s,h)),I=Bx(Ui(c,s,m)),P=Bx(Ui(h,m,c)),F=Bx(Ui(h,m,s));return E!==I&&P!==F||!(E!==0||!Fx(c,h,s))||!(I!==0||!Fx(c,m,s))||!(P!==0||!Fx(h,c,m))||!(F!==0||!Fx(h,s,m))}function Fx(c,s,h){return s.x<=Math.max(c.x,h.x)&&s.x>=Math.min(c.x,h.x)&&s.y<=Math.max(c.y,h.y)&&s.y>=Math.min(c.y,h.y)}function Bx(c){return c>0?1:c<0?-1:0}function Dv(c,s){return Ui(c.prev,c,c.next)<0?Ui(c,s,c.next)>=0&&Ui(c,c.prev,s)>=0:Ui(c,s,c.prev)<0||Ui(c,c.next,s)<0}function HO(c,s){var h=new yT(c.i,c.x,c.y),m=new yT(s.i,s.x,s.y),E=c.next,I=s.prev;return c.next=s,s.prev=c,h.next=E,E.prev=h,m.next=h,h.prev=m,I.next=m,m.prev=I,m}function ZO(c,s,h,m){var E=new yT(c,s,h);return m?(E.next=m.next,E.prev=m,m.next.prev=E,m.next=E):(E.prev=E,E.next=E),E}function zv(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function yT(c,s,h){this.i=c,this.x=s,this.y=h,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function _T(c,s,h,m){for(var E=0,I=s,P=h-m;I<h;I+=m)E+=(c[P]-c[I])*(c[I+1]+c[P+1]),P=I;return E}mT.exports=Dx,mT.exports.default=Dx,Dx.deviation=function(c,s,h,m){var E=s&&s.length,I=Math.abs(_T(c,0,E?s[0]*h:c.length,h));if(E)for(var P=0,F=s.length;P<F;P++)I-=Math.abs(_T(c,s[P]*h,P<F-1?s[P+1]*h:c.length,h));var $=0;for(P=0;P<m.length;P+=3){var W=m[P]*h,ne=m[P+1]*h,ie=m[P+2]*h;$+=Math.abs((c[W]-c[ie])*(c[ne+1]-c[W+1])-(c[W]-c[ne])*(c[ie+1]-c[W+1]))}return I===0&&$===0?0:Math.abs(($-I)/I)},Dx.flatten=function(c){for(var s=c[0][0].length,h={vertices:[],holes:[],dimensions:s},m=0,E=0;E<c.length;E++){for(var I=0;I<c[E].length;I++)for(var P=0;P<s;P++)h.vertices.push(c[E][I][P]);E>0&&h.holes.push(m+=c[E-1].length)}return h};var WO=p(mT.exports);function iU(c,s,h,m,E){KO(c,s,h||0,m||c.length-1,E||oU)}function KO(c,s,h,m,E){for(;m>h;){if(m-h>600){var I=m-h+1,P=s-h+1,F=Math.log(I),$=.5*Math.exp(2*F/3),W=.5*Math.sqrt(F*$*(I-$)/I)*(P-I/2<0?-1:1);KO(c,s,Math.max(h,Math.floor(s-P*$/I+W)),Math.min(m,Math.floor(s+(I-P)*$/I+W)),E)}var ne=c[s],ie=h,fe=m;for(Fv(c,h,s),E(c[m],ne)>0&&Fv(c,h,m);ie<fe;){for(Fv(c,ie,fe),ie++,fe--;E(c[ie],ne)<0;)ie++;for(;E(c[fe],ne)>0;)fe--}E(c[h],ne)===0?Fv(c,h,fe):Fv(c,++fe,m),fe<=s&&(h=fe+1),s<=fe&&(m=fe-1)}}function Fv(c,s,h){var m=c[s];c[s]=c[h],c[h]=m}function oU(c,s){return c<s?-1:c>s?1:0}function vT(c,s){const h=c.length;if(h<=1)return[c];const m=[];let E,I;for(let P=0;P<h;P++){const F=we(c[P]);F!==0&&(c[P].area=Math.abs(F),I===void 0&&(I=F<0),I===F<0?(E&&m.push(E),E=[c[P]]):E.push(c[P]))}if(E&&m.push(E),s>1)for(let P=0;P<m.length;P++)m[P].length<=s||(iU(m[P],s,1,m[P].length-1,sU),m[P]=m[P].slice(0,s));return m}function sU(c,s){return s.area-c.area}function xT(c,s,h){const m=h.patternDependencies;let E=!1;for(const I of s){const P=I.paint.get(`${c}-pattern`);P.isConstant()||(E=!0);const F=P.constantOr(null);F&&(E=!0,m[F.to]=!0,m[F.from]=!0)}return E}function bT(c,s,h,m,E){const I=E.patternDependencies;for(const P of s){const F=P.paint.get(`${c}-pattern`).value;if(F.kind!=="constant"){let $=F.evaluate({zoom:m-1},h,{},E.availableImages),W=F.evaluate({zoom:m},h,{},E.availableImages),ne=F.evaluate({zoom:m+1},h,{},E.availableImages);$=$&&$.name?$.name:$,W=W&&W.name?W.name:W,ne=ne&&ne.name?ne.name:ne,I[$]=!0,I[W]=!0,I[ne]=!0,h.patterns[P.id]={min:$,mid:W,max:ne}}}return h}class wT{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(h=>h.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Le,this.indexArray=new mt,this.indexArray2=new Tt,this.programConfigurations=new pi(s.layers,s.zoom),this.segments=new zt,this.segments2=new zt,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(s,h,m){this.hasPattern=xT("fill",this.layers,h);const E=this.layers[0].layout.get("fill-sort-key"),I=!E.isConstant(),P=[];for(const{feature:F,id:$,index:W,sourceLayerIndex:ne}of s){const ie=this.layers[0]._featureFilter.needGeometry,fe=Df(F,ie);if(!this.layers[0]._featureFilter.filter(new jr(this.zoom),fe,m))continue;const de=I?E.evaluate(fe,{},m,h.availableImages):void 0,_e={id:$,properties:F.properties,type:F.type,sourceLayerIndex:ne,index:W,geometry:ie?fe.geometry:Nf(F),patterns:{},sortKey:de};P.push(_e)}I&&P.sort((F,$)=>F.sortKey-$.sortKey);for(const F of P){const{geometry:$,index:W,sourceLayerIndex:ne}=F;if(this.hasPattern){const ie=bT("fill",this.layers,F,this.zoom,h);this.patternFeatures.push(ie)}else this.addFeature(F,$,W,m,{});h.featureIndex.insert(s[W].feature,$,W,ne,this.index)}}update(s,h,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,h,this.stateDependentLayers,m)}addFeatures(s,h,m){for(const E of this.patternFeatures)this.addFeature(E,E.geometry,E.index,h,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,W8),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.indexBuffer2=s.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(s,h,m,E,I){for(const P of vT(h,500)){let F=0;for(const de of P)F+=de.length;const $=this.segments.prepareSegment(F,this.layoutVertexArray,this.indexArray),W=$.vertexLength,ne=[],ie=[];for(const de of P){if(de.length===0)continue;de!==P[0]&&ie.push(ne.length/2);const _e=this.segments2.prepareSegment(de.length,this.layoutVertexArray,this.indexArray2),Te=_e.vertexLength;this.layoutVertexArray.emplaceBack(de[0].x,de[0].y),this.indexArray2.emplaceBack(Te+de.length-1,Te),ne.push(de[0].x),ne.push(de[0].y);for(let Re=1;Re<de.length;Re++)this.layoutVertexArray.emplaceBack(de[Re].x,de[Re].y),this.indexArray2.emplaceBack(Te+Re-1,Te+Re),ne.push(de[Re].x),ne.push(de[Re].y);_e.vertexLength+=de.length,_e.primitiveLength+=de.length}const fe=WO(ne,ie);for(let de=0;de<fe.length;de+=3)this.indexArray.emplaceBack(W+fe[de],W+fe[de+1],W+fe[de+2]);$.vertexLength+=F,$.primitiveLength+=fe.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,m,I,E)}}let XO,YO;Jt("FillBucket",wT,{omit:["layers","patternFeatures"]});var aU={get paint(){return YO=YO||new hn({"fill-antialias":new Ce(rt.paint_fill["fill-antialias"]),"fill-opacity":new We(rt.paint_fill["fill-opacity"]),"fill-color":new We(rt.paint_fill["fill-color"]),"fill-outline-color":new We(rt.paint_fill["fill-outline-color"]),"fill-translate":new Ce(rt.paint_fill["fill-translate"]),"fill-translate-anchor":new Ce(rt.paint_fill["fill-translate-anchor"]),"fill-pattern":new dt(rt.paint_fill["fill-pattern"])})},get layout(){return XO=XO||new hn({"fill-sort-key":new We(rt.layout_fill["fill-sort-key"])})}};class lU extends Hr{constructor(s){super(s,aU)}recalculate(s,h){super.recalculate(s,h);const m=this.paint._values["fill-outline-color"];m.value.kind==="constant"&&m.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(s){return new wT(s)}queryRadius(){return Rx(this.paint.get("fill-translate"))}queryIntersectsFeature(s,h,m,E,I,P,F){return Lv(Mx(s,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),P.angle,F),E)}isTileClipped(){return!0}}const uU=$r([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),cU=$r([{name:"a_centroid",components:2,type:"Int16"}],4),{members:hU}=uU;var Hd={},fU=g,JO=py;function py(c,s,h,m,E){this.properties={},this.extent=h,this.type=0,this._pbf=c,this._geometry=-1,this._keys=m,this._values=E,c.readFields(dU,this,s)}function dU(c,s,h){c==1?s.id=h.readVarint():c==2?function(m,E){for(var I=m.readVarint()+m.pos;m.pos<I;){var P=E._keys[m.readVarint()],F=E._values[m.readVarint()];E.properties[P]=F}}(h,s):c==3?s.type=h.readVarint():c==4&&(s._geometry=h.pos)}function pU(c){for(var s,h,m=0,E=0,I=c.length,P=I-1;E<I;P=E++)m+=((h=c[P]).x-(s=c[E]).x)*(s.y+h.y);return m}py.types=["Unknown","Point","LineString","Polygon"],py.prototype.loadGeometry=function(){var c=this._pbf;c.pos=this._geometry;for(var s,h=c.readVarint()+c.pos,m=1,E=0,I=0,P=0,F=[];c.pos<h;){if(E<=0){var $=c.readVarint();m=7&$,E=$>>3}if(E--,m===1||m===2)I+=c.readSVarint(),P+=c.readSVarint(),m===1&&(s&&F.push(s),s=[]),s.push(new fU(I,P));else{if(m!==7)throw new Error("unknown command "+m);s&&s.push(s[0].clone())}}return s&&F.push(s),F},py.prototype.bbox=function(){var c=this._pbf;c.pos=this._geometry;for(var s=c.readVarint()+c.pos,h=1,m=0,E=0,I=0,P=1/0,F=-1/0,$=1/0,W=-1/0;c.pos<s;){if(m<=0){var ne=c.readVarint();h=7&ne,m=ne>>3}if(m--,h===1||h===2)(E+=c.readSVarint())<P&&(P=E),E>F&&(F=E),(I+=c.readSVarint())<$&&($=I),I>W&&(W=I);else if(h!==7)throw new Error("unknown command "+h)}return[P,$,F,W]},py.prototype.toGeoJSON=function(c,s,h){var m,E,I=this.extent*Math.pow(2,h),P=this.extent*c,F=this.extent*s,$=this.loadGeometry(),W=py.types[this.type];function ne(de){for(var _e=0;_e<de.length;_e++){var Te=de[_e];de[_e]=[360*(Te.x+P)/I-180,360/Math.PI*Math.atan(Math.exp((180-360*(Te.y+F)/I)*Math.PI/180))-90]}}switch(this.type){case 1:var ie=[];for(m=0;m<$.length;m++)ie[m]=$[m][0];ne($=ie);break;case 2:for(m=0;m<$.length;m++)ne($[m]);break;case 3:for($=function(de){var _e=de.length;if(_e<=1)return[de];for(var Te,Re,Ue=[],tt=0;tt<_e;tt++){var Ze=pU(de[tt]);Ze!==0&&(Re===void 0&&(Re=Ze<0),Re===Ze<0?(Te&&Ue.push(Te),Te=[de[tt]]):Te.push(de[tt]))}return Te&&Ue.push(Te),Ue}($),m=0;m<$.length;m++)for(E=0;E<$[m].length;E++)ne($[m][E])}$.length===1?$=$[0]:W="Multi"+W;var fe={type:"Feature",geometry:{type:W,coordinates:$},properties:this.properties};return"id"in this&&(fe.id=this.id),fe};var mU=JO,QO=ek;function ek(c,s){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=c,this._keys=[],this._values=[],this._features=[],c.readFields(gU,this,s),this.length=this._features.length}function gU(c,s,h){c===15?s.version=h.readVarint():c===1?s.name=h.readString():c===5?s.extent=h.readVarint():c===2?s._features.push(h.pos):c===3?s._keys.push(h.readString()):c===4&&s._values.push(function(m){for(var E=null,I=m.readVarint()+m.pos;m.pos<I;){var P=m.readVarint()>>3;E=P===1?m.readString():P===2?m.readFloat():P===3?m.readDouble():P===4?m.readVarint64():P===5?m.readVarint():P===6?m.readSVarint():P===7?m.readBoolean():null}return E}(h))}ek.prototype.feature=function(c){if(c<0||c>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[c];var s=this._pbf.readVarint()+this._pbf.pos;return new mU(this._pbf,s,this.extent,this._keys,this._values)};var yU=QO;function _U(c,s,h){if(c===3){var m=new yU(h,h.readVarint()+h.pos);m.length&&(s[m.name]=m)}}Hd.VectorTile=function(c,s){this.layers=c.readFields(_U,{},s)},Hd.VectorTileFeature=JO,Hd.VectorTileLayer=QO;const vU=Hd.VectorTileFeature.types,ET=Math.pow(2,13);function Bv(c,s,h,m,E,I,P,F){c.emplaceBack(s,h,2*Math.floor(m*ET)+P,E*ET*2,I*ET*2,Math.round(F))}class ST{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(h=>h.id),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new Pe,this.centroidVertexArray=new le,this.indexArray=new mt,this.programConfigurations=new pi(s.layers,s.zoom),this.segments=new zt,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(s,h,m){this.features=[],this.hasPattern=xT("fill-extrusion",this.layers,h);for(const{feature:E,id:I,index:P,sourceLayerIndex:F}of s){const $=this.layers[0]._featureFilter.needGeometry,W=Df(E,$);if(!this.layers[0]._featureFilter.filter(new jr(this.zoom),W,m))continue;const ne={id:I,sourceLayerIndex:F,index:P,geometry:$?W.geometry:Nf(E),properties:E.properties,type:E.type,patterns:{}};this.hasPattern?this.features.push(bT("fill-extrusion",this.layers,ne,this.zoom,h)):this.addFeature(ne,ne.geometry,P,m,{}),h.featureIndex.insert(E,ne.geometry,P,F,this.index,!0)}}addFeatures(s,h,m){for(const E of this.features){const{geometry:I}=E;this.addFeature(E,I,E.index,h,m)}}update(s,h,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,h,this.stateDependentLayers,m)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,hU),this.centroidVertexBuffer=s.createVertexBuffer(this.centroidVertexArray,cU.members,!0),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(s,h,m,E,I){const P={x:0,y:0,vertexCount:0};for(const F of vT(h,500)){let $=0;for(const _e of F)$+=_e.length;let W=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const _e of F){if(_e.length===0||bU(_e))continue;let Te=0;for(let Re=0;Re<_e.length;Re++){const Ue=_e[Re];if(Re>=1){const tt=_e[Re-1];if(!xU(Ue,tt)){W.vertexLength+4>zt.MAX_VERTEX_ARRAY_LENGTH&&(W=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Ze=Ue.sub(tt)._perp()._unit(),Ye=tt.dist(Ue);Te+Ye>32768&&(Te=0),Bv(this.layoutVertexArray,Ue.x,Ue.y,Ze.x,Ze.y,0,0,Te),Bv(this.layoutVertexArray,Ue.x,Ue.y,Ze.x,Ze.y,0,1,Te),P.x+=2*Ue.x,P.y+=2*Ue.y,P.vertexCount+=2,Te+=Ye,Bv(this.layoutVertexArray,tt.x,tt.y,Ze.x,Ze.y,0,0,Te),Bv(this.layoutVertexArray,tt.x,tt.y,Ze.x,Ze.y,0,1,Te),P.x+=2*tt.x,P.y+=2*tt.y,P.vertexCount+=2;const yt=W.vertexLength;this.indexArray.emplaceBack(yt,yt+2,yt+1),this.indexArray.emplaceBack(yt+1,yt+2,yt+3),W.vertexLength+=4,W.primitiveLength+=2}}}}if(W.vertexLength+$>zt.MAX_VERTEX_ARRAY_LENGTH&&(W=this.segments.prepareSegment($,this.layoutVertexArray,this.indexArray)),vU[s.type]!=="Polygon")continue;const ne=[],ie=[],fe=W.vertexLength;for(const _e of F)if(_e.length!==0){_e!==F[0]&&ie.push(ne.length/2);for(let Te=0;Te<_e.length;Te++){const Re=_e[Te];Bv(this.layoutVertexArray,Re.x,Re.y,0,0,1,1,0),P.x+=Re.x,P.y+=Re.y,P.vertexCount+=1,ne.push(Re.x),ne.push(Re.y)}}const de=WO(ne,ie);for(let _e=0;_e<de.length;_e+=3)this.indexArray.emplaceBack(fe+de[_e],fe+de[_e+2],fe+de[_e+1]);W.primitiveLength+=de.length/3,W.vertexLength+=$}for(let F=0;F<P.vertexCount;F++)this.centroidVertexArray.emplaceBack(Math.floor(P.x/P.vertexCount),Math.floor(P.y/P.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,m,I,E)}}function xU(c,s){return c.x===s.x&&(c.x<0||c.x>Mi)||c.y===s.y&&(c.y<0||c.y>Mi)}function bU(c){return c.every(s=>s.x<0)||c.every(s=>s.x>Mi)||c.every(s=>s.y<0)||c.every(s=>s.y>Mi)}let tk;Jt("FillExtrusionBucket",ST,{omit:["layers","features"]});var wU={get paint(){return tk=tk||new hn({"fill-extrusion-opacity":new Ce(rt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new We(rt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ce(rt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ce(rt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new dt(rt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new We(rt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new We(rt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ce(rt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class EU extends Hr{constructor(s){super(s,wU)}createBucket(s){return new ST(s)}queryRadius(){return Rx(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(s,h,m,E,I,P,F,$){const W=Mx(s,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),P.angle,F),ne=this.paint.get("fill-extrusion-height").evaluate(h,m),ie=this.paint.get("fill-extrusion-base").evaluate(h,m),fe=function(_e,Te,Re,Ue){const tt=[];for(const Ze of _e){const Ye=[Ze.x,Ze.y,0,1];Nx(Ye,Ye,Te),tt.push(new y(Ye[0]/Ye[3],Ye[1]/Ye[3]))}return tt}(W,$),de=function(_e,Te,Re,Ue){const tt=[],Ze=[],Ye=Ue[8]*Te,yt=Ue[9]*Te,wt=Ue[10]*Te,Xt=Ue[11]*Te,ln=Ue[8]*Re,Wt=Ue[9]*Re,Ht=Ue[10]*Re,Nt=Ue[11]*Re;for(const nn of _e){const Ut=[],Ot=[];for(const mn of nn){const un=mn.x,Zn=mn.y,ei=Ue[0]*un+Ue[4]*Zn+Ue[12],li=Ue[1]*un+Ue[5]*Zn+Ue[13],po=Ue[2]*un+Ue[6]*Zn+Ue[14],Xa=Ue[3]*un+Ue[7]*Zn+Ue[15],Ks=po+wt,no=Xa+Xt,Bo=ei+ln,Yo=li+Wt,Xs=po+Ht,Ys=Xa+Nt,mo=new y((ei+Ye)/no,(li+yt)/no);mo.z=Ks/no,Ut.push(mo);const go=new y(Bo/Ys,Yo/Ys);go.z=Xs/Ys,Ot.push(go)}tt.push(Ut),Ze.push(Ot)}return[tt,Ze]}(E,ie,ne,$);return function(_e,Te,Re){let Ue=1/0;Lv(Re,Te)&&(Ue=nk(Re,Te[0]));for(let tt=0;tt<Te.length;tt++){const Ze=Te[tt],Ye=_e[tt];for(let yt=0;yt<Ze.length-1;yt++){const wt=Ze[yt],Xt=[wt,Ze[yt+1],Ye[yt+1],Ye[yt],wt];Pv(Re,Xt)&&(Ue=Math.min(Ue,nk(Re,Xt)))}}return Ue!==1/0&&Ue}(de[0],de[1],fe)}}function jv(c,s){return c.x*s.x+c.y*s.y}function nk(c,s){if(c.length===1){let h=0;const m=s[h++];let E;for(;!E||m.equals(E);)if(E=s[h++],!E)return 1/0;for(;h<s.length;h++){const I=s[h],P=c[0],F=E.sub(m),$=I.sub(m),W=P.sub(m),ne=jv(F,F),ie=jv(F,$),fe=jv($,$),de=jv(W,F),_e=jv(W,$),Te=ne*fe-ie*ie,Re=(fe*de-ie*_e)/Te,Ue=(ne*_e-ie*de)/Te,tt=m.z*(1-Re-Ue)+E.z*Re+I.z*Ue;if(isFinite(tt))return tt}return 1/0}{let h=1/0;for(const m of s)h=Math.min(h,m.z);return h}}const SU=$r([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:TU}=SU,CU=$r([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:IU}=CU,PU=Hd.VectorTileFeature.types,LU=Math.cos(Math.PI/180*37.5),rk=Math.pow(2,14)/.5;class TT{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(h=>h.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(h=>{this.gradients[h.id]={}}),this.layoutVertexArray=new Me,this.layoutVertexArray2=new Se,this.indexArray=new mt,this.programConfigurations=new pi(s.layers,s.zoom),this.segments=new zt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(s,h,m){this.hasPattern=xT("line",this.layers,h);const E=this.layers[0].layout.get("line-sort-key"),I=!E.isConstant(),P=[];for(const{feature:F,id:$,index:W,sourceLayerIndex:ne}of s){const ie=this.layers[0]._featureFilter.needGeometry,fe=Df(F,ie);if(!this.layers[0]._featureFilter.filter(new jr(this.zoom),fe,m))continue;const de=I?E.evaluate(fe,{},m):void 0,_e={id:$,properties:F.properties,type:F.type,sourceLayerIndex:ne,index:W,geometry:ie?fe.geometry:Nf(F),patterns:{},sortKey:de};P.push(_e)}I&&P.sort((F,$)=>F.sortKey-$.sortKey);for(const F of P){const{geometry:$,index:W,sourceLayerIndex:ne}=F;if(this.hasPattern){const ie=bT("line",this.layers,F,this.zoom,h);this.patternFeatures.push(ie)}else this.addFeature(F,$,W,m,{});h.featureIndex.insert(s[W].feature,$,W,ne,this.index)}}update(s,h,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,h,this.stateDependentLayers,m)}addFeatures(s,h,m){for(const E of this.patternFeatures)this.addFeature(E,E.geometry,E.index,h,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=s.createVertexBuffer(this.layoutVertexArray2,IU)),this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,TU),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(s){if(s.properties&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_end"))return{start:+s.properties.mapbox_clip_start,end:+s.properties.mapbox_clip_end}}addFeature(s,h,m,E,I){const P=this.layers[0].layout,F=P.get("line-join").evaluate(s,{}),$=P.get("line-cap"),W=P.get("line-miter-limit"),ne=P.get("line-round-limit");this.lineClips=this.lineFeatureClips(s);for(const ie of h)this.addLine(ie,s,F,$,W,ne);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,m,I,E)}addLine(s,h,m,E,I,P){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ue=0;Ue<s.length-1;Ue++)this.totalDistance+=s[Ue].dist(s[Ue+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const F=PU[h.type]==="Polygon";let $=s.length;for(;$>=2&&s[$-1].equals(s[$-2]);)$--;let W=0;for(;W<$-1&&s[W].equals(s[W+1]);)W++;if($<(F?3:2))return;m==="bevel"&&(I=1.05);const ne=this.overscaling<=16?15*Mi/(512*this.overscaling):0,ie=this.segments.prepareSegment(10*$,this.layoutVertexArray,this.indexArray);let fe,de,_e,Te,Re;this.e1=this.e2=-1,F&&(fe=s[$-2],Re=s[W].sub(fe)._unit()._perp());for(let Ue=W;Ue<$;Ue++){if(_e=Ue===$-1?F?s[W+1]:void 0:s[Ue+1],_e&&s[Ue].equals(_e))continue;Re&&(Te=Re),fe&&(de=fe),fe=s[Ue],Re=_e?_e.sub(fe)._unit()._perp():Te,Te=Te||Re;let tt=Te.add(Re);tt.x===0&&tt.y===0||tt._unit();const Ze=Te.x*Re.x+Te.y*Re.y,Ye=tt.x*Re.x+tt.y*Re.y,yt=Ye!==0?1/Ye:1/0,wt=2*Math.sqrt(2-2*Ye),Xt=Ye<LU&&de&&_e,ln=Te.x*Re.y-Te.y*Re.x>0;if(Xt&&Ue>W){const Nt=fe.dist(de);if(Nt>2*ne){const nn=fe.sub(fe.sub(de)._mult(ne/Nt)._round());this.updateDistance(de,nn),this.addCurrentVertex(nn,Te,0,0,ie),de=nn}}const Wt=de&&_e;let Ht=Wt?m:F?"butt":E;if(Wt&&Ht==="round"&&(yt<P?Ht="miter":yt<=2&&(Ht="fakeround")),Ht==="miter"&&yt>I&&(Ht="bevel"),Ht==="bevel"&&(yt>2&&(Ht="flipbevel"),yt<I&&(Ht="miter")),de&&this.updateDistance(de,fe),Ht==="miter")tt._mult(yt),this.addCurrentVertex(fe,tt,0,0,ie);else if(Ht==="flipbevel"){if(yt>100)tt=Re.mult(-1);else{const Nt=yt*Te.add(Re).mag()/Te.sub(Re).mag();tt._perp()._mult(Nt*(ln?-1:1))}this.addCurrentVertex(fe,tt,0,0,ie),this.addCurrentVertex(fe,tt.mult(-1),0,0,ie)}else if(Ht==="bevel"||Ht==="fakeround"){const Nt=-Math.sqrt(yt*yt-1),nn=ln?Nt:0,Ut=ln?0:Nt;if(de&&this.addCurrentVertex(fe,Te,nn,Ut,ie),Ht==="fakeround"){const Ot=Math.round(180*wt/Math.PI/20);for(let mn=1;mn<Ot;mn++){let un=mn/Ot;if(un!==.5){const ei=un-.5;un+=un*ei*(un-1)*((1.0904+Ze*(Ze*(3.55645-1.43519*Ze)-3.2452))*ei*ei+(.848013+Ze*(.215638*Ze-1.06021)))}const Zn=Re.sub(Te)._mult(un)._add(Te)._unit()._mult(ln?-1:1);this.addHalfVertex(fe,Zn.x,Zn.y,!1,ln,0,ie)}}_e&&this.addCurrentVertex(fe,Re,-nn,-Ut,ie)}else if(Ht==="butt")this.addCurrentVertex(fe,tt,0,0,ie);else if(Ht==="square"){const Nt=de?1:-1;this.addCurrentVertex(fe,tt,Nt,Nt,ie)}else Ht==="round"&&(de&&(this.addCurrentVertex(fe,Te,0,0,ie),this.addCurrentVertex(fe,Te,1,1,ie,!0)),_e&&(this.addCurrentVertex(fe,Re,-1,-1,ie,!0),this.addCurrentVertex(fe,Re,0,0,ie)));if(Xt&&Ue<$-1){const Nt=fe.dist(_e);if(Nt>2*ne){const nn=fe.add(_e.sub(fe)._mult(ne/Nt)._round());this.updateDistance(fe,nn),this.addCurrentVertex(nn,Re,0,0,ie),fe=nn}}}}addCurrentVertex(s,h,m,E,I,P=!1){const F=h.y*E-h.x,$=-h.y-h.x*E;this.addHalfVertex(s,h.x+h.y*m,h.y-h.x*m,P,!1,m,I),this.addHalfVertex(s,F,$,P,!0,-E,I),this.distance>rk/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(s,h,m,E,I,P))}addHalfVertex({x:s,y:h},m,E,I,P,F,$){const W=.5*(this.lineClips?this.scaledDistance*(rk-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((s<<1)+(I?1:0),(h<<1)+(P?1:0),Math.round(63*m)+128,Math.round(63*E)+128,1+(F===0?0:F<0?-1:1)|(63&W)<<2,W>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const ne=$.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,ne),$.primitiveLength++),P?this.e2=ne:this.e1=ne}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(s,h){this.distance+=s.dist(h),this.updateScaledDistance()}}let ik,ok;Jt("LineBucket",TT,{omit:["layers","patternFeatures"]});var sk={get paint(){return ok=ok||new hn({"line-opacity":new We(rt.paint_line["line-opacity"]),"line-color":new We(rt.paint_line["line-color"]),"line-translate":new Ce(rt.paint_line["line-translate"]),"line-translate-anchor":new Ce(rt.paint_line["line-translate-anchor"]),"line-width":new We(rt.paint_line["line-width"]),"line-gap-width":new We(rt.paint_line["line-gap-width"]),"line-offset":new We(rt.paint_line["line-offset"]),"line-blur":new We(rt.paint_line["line-blur"]),"line-dasharray":new It(rt.paint_line["line-dasharray"]),"line-pattern":new dt(rt.paint_line["line-pattern"]),"line-gradient":new tn(rt.paint_line["line-gradient"])})},get layout(){return ik=ik||new hn({"line-cap":new Ce(rt.layout_line["line-cap"]),"line-join":new We(rt.layout_line["line-join"]),"line-miter-limit":new Ce(rt.layout_line["line-miter-limit"]),"line-round-limit":new Ce(rt.layout_line["line-round-limit"]),"line-sort-key":new We(rt.layout_line["line-sort-key"])})}};class AU extends We{possiblyEvaluate(s,h){return h=new jr(Math.floor(h.zoom),{now:h.now,fadeDuration:h.fadeDuration,zoomHistory:h.zoomHistory,transition:h.transition}),super.possiblyEvaluate(s,h)}evaluate(s,h,m,E){return h=G({},h,{zoom:Math.floor(h.zoom)}),super.evaluate(s,h,m,E)}}let jx;class OU extends Hr{constructor(s){super(s,sk),this.gradientVersion=0,jx||(jx=new AU(sk.paint.properties["line-width"].specification),jx.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(s){if(s==="line-gradient"){const h=this.gradientExpression();this.stepInterpolant=!!function(m){return m._styleExpression!==void 0}(h)&&h._styleExpression.expression instanceof oc,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(s,h){super.recalculate(s,h),this.paint._values["line-floorwidth"]=jx.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,s)}createBucket(s){return new TT(s)}queryRadius(s){const h=s,m=ak(kv("line-width",this,h),kv("line-gap-width",this,h)),E=kv("line-offset",this,h);return m/2+Math.abs(E)+Rx(this.paint.get("line-translate"))}queryIntersectsFeature(s,h,m,E,I,P,F){const $=Mx(s,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),P.angle,F),W=F/2*ak(this.paint.get("line-width").evaluate(h,m),this.paint.get("line-gap-width").evaluate(h,m)),ne=this.paint.get("line-offset").evaluate(h,m);return ne&&(E=function(ie,fe){const de=[];for(let _e=0;_e<ie.length;_e++){const Te=ie[_e],Re=[];for(let Ue=0;Ue<Te.length;Ue++){const tt=Te[Ue-1],Ze=Te[Ue],Ye=Te[Ue+1],yt=Ue===0?new y(0,0):Ze.sub(tt)._unit()._perp(),wt=Ue===Te.length-1?new y(0,0):Ye.sub(Ze)._unit()._perp(),Xt=yt._add(wt)._unit(),ln=Xt.x*wt.x+Xt.y*wt.y;ln!==0&&Xt._mult(1/ln),Re.push(Xt._mult(fe)._add(Ze))}de.push(Re)}return de}(E,ne*F)),function(ie,fe,de){for(let _e=0;_e<fe.length;_e++){const Te=fe[_e];if(ie.length>=3){for(let Re=0;Re<Te.length;Re++)if(hy(ie,Te[Re]))return!0}if(Av(ie,Te,de))return!0}return!1}($,E,W)}isTileClipped(){return!0}}function ak(c,s){return s>0?s+2*c:c}const kU=$r([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),RU=$r([{name:"a_projected_pos",components:3,type:"Float32"}],4);$r([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const MU=$r([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);$r([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const lk=$r([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),NU=$r([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function DU(c,s,h){return c.sections.forEach(m=>{m.text=function(E,I,P){const F=I.layout.get("text-transform").evaluate(P,{});return F==="uppercase"?E=E.toLocaleUpperCase():F==="lowercase"&&(E=E.toLocaleLowerCase()),du.applyArabicShaping&&(E=du.applyArabicShaping(E)),E}(m.text,s,h)}),c}$r([{name:"triangle",components:3,type:"Uint16"}]),$r([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),$r([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),$r([{type:"Float32",name:"offsetX"}]),$r([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),$r([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const $v={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var fo=24,uk=Dr,ck=function(c,s,h,m,E){var I,P,F=8*E-m-1,$=(1<<F)-1,W=$>>1,ne=-7,ie=h?E-1:0,fe=h?-1:1,de=c[s+ie];for(ie+=fe,I=de&(1<<-ne)-1,de>>=-ne,ne+=F;ne>0;I=256*I+c[s+ie],ie+=fe,ne-=8);for(P=I&(1<<-ne)-1,I>>=-ne,ne+=m;ne>0;P=256*P+c[s+ie],ie+=fe,ne-=8);if(I===0)I=1-W;else{if(I===$)return P?NaN:1/0*(de?-1:1);P+=Math.pow(2,m),I-=W}return(de?-1:1)*P*Math.pow(2,I-m)},hk=function(c,s,h,m,E,I){var P,F,$,W=8*I-E-1,ne=(1<<W)-1,ie=ne>>1,fe=E===23?Math.pow(2,-24)-Math.pow(2,-77):0,de=m?0:I-1,_e=m?1:-1,Te=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(F=isNaN(s)?1:0,P=ne):(P=Math.floor(Math.log(s)/Math.LN2),s*($=Math.pow(2,-P))<1&&(P--,$*=2),(s+=P+ie>=1?fe/$:fe*Math.pow(2,1-ie))*$>=2&&(P++,$/=2),P+ie>=ne?(F=0,P=ne):P+ie>=1?(F=(s*$-1)*Math.pow(2,E),P+=ie):(F=s*Math.pow(2,ie-1)*Math.pow(2,E),P=0));E>=8;c[h+de]=255&F,de+=_e,F/=256,E-=8);for(P=P<<E|F,W+=E;W>0;c[h+de]=255&P,de+=_e,P/=256,W-=8);c[h+de-_e]|=128*Te};function Dr(c){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(c)?c:new Uint8Array(c||0),this.pos=0,this.type=0,this.length=this.buf.length}Dr.Varint=0,Dr.Fixed64=1,Dr.Bytes=2,Dr.Fixed32=5;var CT=4294967296,fk=1/CT,dk=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function zf(c){return c.type===Dr.Bytes?c.readVarint()+c.pos:c.pos+1}function my(c,s,h){return h?4294967296*s+(c>>>0):4294967296*(s>>>0)+(c>>>0)}function pk(c,s,h){var m=s<=16383?1:s<=2097151?2:s<=268435455?3:Math.floor(Math.log(s)/(7*Math.LN2));h.realloc(m);for(var E=h.pos-1;E>=c;E--)h.buf[E+m]=h.buf[E]}function zU(c,s){for(var h=0;h<c.length;h++)s.writeVarint(c[h])}function FU(c,s){for(var h=0;h<c.length;h++)s.writeSVarint(c[h])}function BU(c,s){for(var h=0;h<c.length;h++)s.writeFloat(c[h])}function jU(c,s){for(var h=0;h<c.length;h++)s.writeDouble(c[h])}function $U(c,s){for(var h=0;h<c.length;h++)s.writeBoolean(c[h])}function UU(c,s){for(var h=0;h<c.length;h++)s.writeFixed32(c[h])}function qU(c,s){for(var h=0;h<c.length;h++)s.writeSFixed32(c[h])}function VU(c,s){for(var h=0;h<c.length;h++)s.writeFixed64(c[h])}function GU(c,s){for(var h=0;h<c.length;h++)s.writeSFixed64(c[h])}function $x(c,s){return(c[s]|c[s+1]<<8|c[s+2]<<16)+16777216*c[s+3]}function gy(c,s,h){c[h]=s,c[h+1]=s>>>8,c[h+2]=s>>>16,c[h+3]=s>>>24}function mk(c,s){return(c[s]|c[s+1]<<8|c[s+2]<<16)+(c[s+3]<<24)}Dr.prototype={destroy:function(){this.buf=null},readFields:function(c,s,h){for(h=h||this.length;this.pos<h;){var m=this.readVarint(),E=m>>3,I=this.pos;this.type=7&m,c(E,s,this),this.pos===I&&this.skip(m)}return s},readMessage:function(c,s){return this.readFields(c,s,this.readVarint()+this.pos)},readFixed32:function(){var c=$x(this.buf,this.pos);return this.pos+=4,c},readSFixed32:function(){var c=mk(this.buf,this.pos);return this.pos+=4,c},readFixed64:function(){var c=$x(this.buf,this.pos)+$x(this.buf,this.pos+4)*CT;return this.pos+=8,c},readSFixed64:function(){var c=$x(this.buf,this.pos)+mk(this.buf,this.pos+4)*CT;return this.pos+=8,c},readFloat:function(){var c=ck(this.buf,this.pos,!0,23,4);return this.pos+=4,c},readDouble:function(){var c=ck(this.buf,this.pos,!0,52,8);return this.pos+=8,c},readVarint:function(c){var s,h,m=this.buf;return s=127&(h=m[this.pos++]),h<128?s:(s|=(127&(h=m[this.pos++]))<<7,h<128?s:(s|=(127&(h=m[this.pos++]))<<14,h<128?s:(s|=(127&(h=m[this.pos++]))<<21,h<128?s:function(E,I,P){var F,$,W=P.buf;if(F=(112&($=W[P.pos++]))>>4,$<128||(F|=(127&($=W[P.pos++]))<<3,$<128)||(F|=(127&($=W[P.pos++]))<<10,$<128)||(F|=(127&($=W[P.pos++]))<<17,$<128)||(F|=(127&($=W[P.pos++]))<<24,$<128)||(F|=(1&($=W[P.pos++]))<<31,$<128))return my(E,F,I);throw new Error("Expected varint not more than 10 bytes")}(s|=(15&(h=m[this.pos]))<<28,c,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var c=this.readVarint();return c%2==1?(c+1)/-2:c/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var c=this.readVarint()+this.pos,s=this.pos;return this.pos=c,c-s>=12&&dk?function(h,m,E){return dk.decode(h.subarray(m,E))}(this.buf,s,c):function(h,m,E){for(var I="",P=m;P<E;){var F,$,W,ne=h[P],ie=null,fe=ne>239?4:ne>223?3:ne>191?2:1;if(P+fe>E)break;fe===1?ne<128&&(ie=ne):fe===2?(192&(F=h[P+1]))==128&&(ie=(31&ne)<<6|63&F)<=127&&(ie=null):fe===3?($=h[P+2],(192&(F=h[P+1]))==128&&(192&$)==128&&((ie=(15&ne)<<12|(63&F)<<6|63&$)<=2047||ie>=55296&&ie<=57343)&&(ie=null)):fe===4&&($=h[P+2],W=h[P+3],(192&(F=h[P+1]))==128&&(192&$)==128&&(192&W)==128&&((ie=(15&ne)<<18|(63&F)<<12|(63&$)<<6|63&W)<=65535||ie>=1114112)&&(ie=null)),ie===null?(ie=65533,fe=1):ie>65535&&(ie-=65536,I+=String.fromCharCode(ie>>>10&1023|55296),ie=56320|1023&ie),I+=String.fromCharCode(ie),P+=fe}return I}(this.buf,s,c)},readBytes:function(){var c=this.readVarint()+this.pos,s=this.buf.subarray(this.pos,c);return this.pos=c,s},readPackedVarint:function(c,s){if(this.type!==Dr.Bytes)return c.push(this.readVarint(s));var h=zf(this);for(c=c||[];this.pos<h;)c.push(this.readVarint(s));return c},readPackedSVarint:function(c){if(this.type!==Dr.Bytes)return c.push(this.readSVarint());var s=zf(this);for(c=c||[];this.pos<s;)c.push(this.readSVarint());return c},readPackedBoolean:function(c){if(this.type!==Dr.Bytes)return c.push(this.readBoolean());var s=zf(this);for(c=c||[];this.pos<s;)c.push(this.readBoolean());return c},readPackedFloat:function(c){if(this.type!==Dr.Bytes)return c.push(this.readFloat());var s=zf(this);for(c=c||[];this.pos<s;)c.push(this.readFloat());return c},readPackedDouble:function(c){if(this.type!==Dr.Bytes)return c.push(this.readDouble());var s=zf(this);for(c=c||[];this.pos<s;)c.push(this.readDouble());return c},readPackedFixed32:function(c){if(this.type!==Dr.Bytes)return c.push(this.readFixed32());var s=zf(this);for(c=c||[];this.pos<s;)c.push(this.readFixed32());return c},readPackedSFixed32:function(c){if(this.type!==Dr.Bytes)return c.push(this.readSFixed32());var s=zf(this);for(c=c||[];this.pos<s;)c.push(this.readSFixed32());return c},readPackedFixed64:function(c){if(this.type!==Dr.Bytes)return c.push(this.readFixed64());var s=zf(this);for(c=c||[];this.pos<s;)c.push(this.readFixed64());return c},readPackedSFixed64:function(c){if(this.type!==Dr.Bytes)return c.push(this.readSFixed64());var s=zf(this);for(c=c||[];this.pos<s;)c.push(this.readSFixed64());return c},skip:function(c){var s=7&c;if(s===Dr.Varint)for(;this.buf[this.pos++]>127;);else if(s===Dr.Bytes)this.pos=this.readVarint()+this.pos;else if(s===Dr.Fixed32)this.pos+=4;else{if(s!==Dr.Fixed64)throw new Error("Unimplemented type: "+s);this.pos+=8}},writeTag:function(c,s){this.writeVarint(c<<3|s)},realloc:function(c){for(var s=this.length||16;s<this.pos+c;)s*=2;if(s!==this.length){var h=new Uint8Array(s);h.set(this.buf),this.buf=h,this.length=s}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(c){this.realloc(4),gy(this.buf,c,this.pos),this.pos+=4},writeSFixed32:function(c){this.realloc(4),gy(this.buf,c,this.pos),this.pos+=4},writeFixed64:function(c){this.realloc(8),gy(this.buf,-1&c,this.pos),gy(this.buf,Math.floor(c*fk),this.pos+4),this.pos+=8},writeSFixed64:function(c){this.realloc(8),gy(this.buf,-1&c,this.pos),gy(this.buf,Math.floor(c*fk),this.pos+4),this.pos+=8},writeVarint:function(c){(c=+c||0)>268435455||c<0?function(s,h){var m,E;if(s>=0?(m=s%4294967296|0,E=s/4294967296|0):(E=~(-s/4294967296),4294967295^(m=~(-s%4294967296))?m=m+1|0:(m=0,E=E+1|0)),s>=18446744073709552e3||s<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");h.realloc(10),function(I,P,F){F.buf[F.pos++]=127&I|128,I>>>=7,F.buf[F.pos++]=127&I|128,I>>>=7,F.buf[F.pos++]=127&I|128,I>>>=7,F.buf[F.pos++]=127&I|128,F.buf[F.pos]=127&(I>>>=7)}(m,0,h),function(I,P){var F=(7&I)<<4;P.buf[P.pos++]|=F|((I>>>=3)?128:0),I&&(P.buf[P.pos++]=127&I|((I>>>=7)?128:0),I&&(P.buf[P.pos++]=127&I|((I>>>=7)?128:0),I&&(P.buf[P.pos++]=127&I|((I>>>=7)?128:0),I&&(P.buf[P.pos++]=127&I|((I>>>=7)?128:0),I&&(P.buf[P.pos++]=127&I)))))}(E,h)}(c,this):(this.realloc(4),this.buf[this.pos++]=127&c|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=c>>>7&127))))},writeSVarint:function(c){this.writeVarint(c<0?2*-c-1:2*c)},writeBoolean:function(c){this.writeVarint(!!c)},writeString:function(c){c=String(c),this.realloc(4*c.length),this.pos++;var s=this.pos;this.pos=function(m,E,I){for(var P,F,$=0;$<E.length;$++){if((P=E.charCodeAt($))>55295&&P<57344){if(!F){P>56319||$+1===E.length?(m[I++]=239,m[I++]=191,m[I++]=189):F=P;continue}if(P<56320){m[I++]=239,m[I++]=191,m[I++]=189,F=P;continue}P=F-55296<<10|P-56320|65536,F=null}else F&&(m[I++]=239,m[I++]=191,m[I++]=189,F=null);P<128?m[I++]=P:(P<2048?m[I++]=P>>6|192:(P<65536?m[I++]=P>>12|224:(m[I++]=P>>18|240,m[I++]=P>>12&63|128),m[I++]=P>>6&63|128),m[I++]=63&P|128)}return I}(this.buf,c,this.pos);var h=this.pos-s;h>=128&&pk(s,h,this),this.pos=s-1,this.writeVarint(h),this.pos+=h},writeFloat:function(c){this.realloc(4),hk(this.buf,c,this.pos,!0,23,4),this.pos+=4},writeDouble:function(c){this.realloc(8),hk(this.buf,c,this.pos,!0,52,8),this.pos+=8},writeBytes:function(c){var s=c.length;this.writeVarint(s),this.realloc(s);for(var h=0;h<s;h++)this.buf[this.pos++]=c[h]},writeRawMessage:function(c,s){this.pos++;var h=this.pos;c(s,this);var m=this.pos-h;m>=128&&pk(h,m,this),this.pos=h-1,this.writeVarint(m),this.pos+=m},writeMessage:function(c,s,h){this.writeTag(c,Dr.Bytes),this.writeRawMessage(s,h)},writePackedVarint:function(c,s){s.length&&this.writeMessage(c,zU,s)},writePackedSVarint:function(c,s){s.length&&this.writeMessage(c,FU,s)},writePackedBoolean:function(c,s){s.length&&this.writeMessage(c,$U,s)},writePackedFloat:function(c,s){s.length&&this.writeMessage(c,BU,s)},writePackedDouble:function(c,s){s.length&&this.writeMessage(c,jU,s)},writePackedFixed32:function(c,s){s.length&&this.writeMessage(c,UU,s)},writePackedSFixed32:function(c,s){s.length&&this.writeMessage(c,qU,s)},writePackedFixed64:function(c,s){s.length&&this.writeMessage(c,VU,s)},writePackedSFixed64:function(c,s){s.length&&this.writeMessage(c,GU,s)},writeBytesField:function(c,s){this.writeTag(c,Dr.Bytes),this.writeBytes(s)},writeFixed32Field:function(c,s){this.writeTag(c,Dr.Fixed32),this.writeFixed32(s)},writeSFixed32Field:function(c,s){this.writeTag(c,Dr.Fixed32),this.writeSFixed32(s)},writeFixed64Field:function(c,s){this.writeTag(c,Dr.Fixed64),this.writeFixed64(s)},writeSFixed64Field:function(c,s){this.writeTag(c,Dr.Fixed64),this.writeSFixed64(s)},writeVarintField:function(c,s){this.writeTag(c,Dr.Varint),this.writeVarint(s)},writeSVarintField:function(c,s){this.writeTag(c,Dr.Varint),this.writeSVarint(s)},writeStringField:function(c,s){this.writeTag(c,Dr.Bytes),this.writeString(s)},writeFloatField:function(c,s){this.writeTag(c,Dr.Fixed32),this.writeFloat(s)},writeDoubleField:function(c,s){this.writeTag(c,Dr.Fixed64),this.writeDouble(s)},writeBooleanField:function(c,s){this.writeVarintField(c,!!s)}};var IT=p(uk);const PT=3;function HU(c,s,h){c===1&&h.readMessage(ZU,s)}function ZU(c,s,h){if(c===3){const{id:m,bitmap:E,width:I,height:P,left:F,top:$,advance:W}=h.readMessage(WU,{});s.push({id:m,bitmap:new Mv({width:I+2*PT,height:P+2*PT},E),metrics:{width:I,height:P,left:F,top:$,advance:W}})}}function WU(c,s,h){c===1?s.id=h.readVarint():c===2?s.bitmap=h.readBytes():c===3?s.width=h.readVarint():c===4?s.height=h.readVarint():c===5?s.left=h.readSVarint():c===6?s.top=h.readSVarint():c===7&&(s.advance=h.readVarint())}const gk=PT;function yk(c){let s=0,h=0;for(const P of c)s+=P.w*P.h,h=Math.max(h,P.w);c.sort((P,F)=>F.h-P.h);const m=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(s/.95)),h),h:1/0}];let E=0,I=0;for(const P of c)for(let F=m.length-1;F>=0;F--){const $=m[F];if(!(P.w>$.w||P.h>$.h)){if(P.x=$.x,P.y=$.y,I=Math.max(I,P.y+P.h),E=Math.max(E,P.x+P.w),P.w===$.w&&P.h===$.h){const W=m.pop();F<m.length&&(m[F]=W)}else P.h===$.h?($.x+=P.w,$.w-=P.w):P.w===$.w?($.y+=P.h,$.h-=P.h):(m.push({x:$.x+P.w,y:$.y,w:$.w-P.w,h:P.h}),$.y+=P.h,$.h-=P.h);break}}return{w:E,h:I,fill:s/(E*I)||0}}const ya=1;class LT{constructor(s,{pixelRatio:h,version:m,stretchX:E,stretchY:I,content:P}){this.paddedRect=s,this.pixelRatio=h,this.stretchX=E,this.stretchY=I,this.content=P,this.version=m}get tl(){return[this.paddedRect.x+ya,this.paddedRect.y+ya]}get br(){return[this.paddedRect.x+this.paddedRect.w-ya,this.paddedRect.y+this.paddedRect.h-ya]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*ya)/this.pixelRatio,(this.paddedRect.h-2*ya)/this.pixelRatio]}}class _k{constructor(s,h){const m={},E={};this.haveRenderCallbacks=[];const I=[];this.addImages(s,m,I),this.addImages(h,E,I);const{w:P,h:F}=yk(I),$=new wl({width:P||1,height:F||1});for(const W in s){const ne=s[W],ie=m[W].paddedRect;wl.copy(ne.data,$,{x:0,y:0},{x:ie.x+ya,y:ie.y+ya},ne.data)}for(const W in h){const ne=h[W],ie=E[W].paddedRect,fe=ie.x+ya,de=ie.y+ya,_e=ne.data.width,Te=ne.data.height;wl.copy(ne.data,$,{x:0,y:0},{x:fe,y:de},ne.data),wl.copy(ne.data,$,{x:0,y:Te-1},{x:fe,y:de-1},{width:_e,height:1}),wl.copy(ne.data,$,{x:0,y:0},{x:fe,y:de+Te},{width:_e,height:1}),wl.copy(ne.data,$,{x:_e-1,y:0},{x:fe-1,y:de},{width:1,height:Te}),wl.copy(ne.data,$,{x:0,y:0},{x:fe+_e,y:de},{width:1,height:Te})}this.image=$,this.iconPositions=m,this.patternPositions=E}addImages(s,h,m){for(const E in s){const I=s[E],P={x:0,y:0,w:I.data.width+2*ya,h:I.data.height+2*ya};m.push(P),h[E]=new LT(P,I),I.hasRenderCallback&&this.haveRenderCallbacks.push(E)}}patchUpdatedImages(s,h){s.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const m in s.updatedImages)this.patchUpdatedImage(this.iconPositions[m],s.getImage(m),h),this.patchUpdatedImage(this.patternPositions[m],s.getImage(m),h)}patchUpdatedImage(s,h,m){if(!s||!h||s.version===h.version)return;s.version=h.version;const[E,I]=s.tl;m.update(h.data,void 0,{x:E,y:I})}}var Zd;Jt("ImagePosition",LT),Jt("ImageAtlas",_k),u.ah=void 0,(Zd=u.ah||(u.ah={}))[Zd.none=0]="none",Zd[Zd.horizontal=1]="horizontal",Zd[Zd.vertical=2]="vertical",Zd[Zd.horizontalOnly=3]="horizontalOnly";const Uv=-17;class qv{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(s,h){const m=new qv;return m.scale=s||1,m.fontStack=h,m}static forImage(s){const h=new qv;return h.imageName=s,h}}class yy{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(s,h){const m=new yy;for(let E=0;E<s.sections.length;E++){const I=s.sections[E];I.image?m.addImageSection(I):m.addTextSection(I,h)}return m}length(){return this.text.length}getSection(s){return this.sections[this.sectionIndex[s]]}getSectionIndex(s){return this.sectionIndex[s]}getCharCode(s){return this.text.charCodeAt(s)}verticalizePunctuation(){this.text=function(s){let h="";for(let m=0;m<s.length;m++){const E=s.charCodeAt(m+1)||null,I=s.charCodeAt(m-1)||null;h+=E&&jd(E)&&!$v[s[m+1]]||I&&jd(I)&&!$v[s[m-1]]||!$v[s[m]]?s[m]:$v[s[m]]}return h}(this.text)}trim(){let s=0;for(let m=0;m<this.text.length&&qx[this.text.charCodeAt(m)];m++)s++;let h=this.text.length;for(let m=this.text.length-1;m>=0&&m>=s&&qx[this.text.charCodeAt(m)];m--)h--;this.text=this.text.substring(s,h),this.sectionIndex=this.sectionIndex.slice(s,h)}substring(s,h){const m=new yy;return m.text=this.text.substring(s,h),m.sectionIndex=this.sectionIndex.slice(s,h),m.sections=this.sections,m}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((s,h)=>Math.max(s,this.sections[h].scale),0)}addTextSection(s,h){this.text+=s.text,this.sections.push(qv.forText(s.scale,s.fontStack||h));const m=this.sections.length-1;for(let E=0;E<s.text.length;++E)this.sectionIndex.push(m)}addImageSection(s){const h=s.image?s.image.name:"";if(h.length===0)return void ue("Can't add FormattedSection with an empty image.");const m=this.getNextImageSectionCharCode();m?(this.text+=String.fromCharCode(m),this.sections.push(qv.forImage(h)),this.sectionIndex.push(this.sections.length-1)):ue("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Ux(c,s,h,m,E,I,P,F,$,W,ne,ie,fe,de,_e,Te){const Re=yy.fromFeature(c,E);let Ue;ie===u.ah.vertical&&Re.verticalizePunctuation();const{processBidirectionalText:tt,processStyledBidirectionalText:Ze}=du;if(tt&&Re.sections.length===1){Ue=[];const wt=tt(Re.toString(),AT(Re,W,I,s,m,de,_e));for(const Xt of wt){const ln=new yy;ln.text=Xt,ln.sections=Re.sections;for(let Wt=0;Wt<Xt.length;Wt++)ln.sectionIndex.push(0);Ue.push(ln)}}else if(Ze){Ue=[];const wt=Ze(Re.text,Re.sectionIndex,AT(Re,W,I,s,m,de,_e));for(const Xt of wt){const ln=new yy;ln.text=Xt[0],ln.sectionIndex=Xt[1],ln.sections=Re.sections,Ue.push(ln)}}else Ue=function(wt,Xt){const ln=[],Wt=wt.text;let Ht=0;for(const Nt of Xt)ln.push(wt.substring(Ht,Nt)),Ht=Nt;return Ht<Wt.length&&ln.push(wt.substring(Ht,Wt.length)),ln}(Re,AT(Re,W,I,s,m,de,_e));const Ye=[],yt={positionedLines:Ye,text:Re.toString(),top:ne[1],bottom:ne[1],left:ne[0],right:ne[0],writingMode:ie,iconsInText:!1,verticalizable:!1};return function(wt,Xt,ln,Wt,Ht,Nt,nn,Ut,Ot,mn,un,Zn){let ei=0,li=Uv,po=0,Xa=0;const Ks=Ut==="right"?1:Ut==="left"?0:.5;let no=0;for(const mo of Ht){mo.trim();const go=mo.getMaxScale(),Ts=(go-1)*fo,Js={positionedGlyphs:[],lineOffset:0};wt.positionedLines[no]=Js;const Cs=Js.positionedGlyphs;let _a=0;if(!mo.length()){li+=Nt,++no;continue}for(let yo=0;yo<mo.length();yo++){const Jn=mo.getSection(yo),Is=mo.getSectionIndex(yo),Jo=mo.getCharCode(yo);let _o=0,gu=null,yc=null,_c=null,Ff=fo;const yu=!(Ot===u.ah.horizontal||!un&&!Af(Jo)||un&&(qx[Jo]||(Bo=Jo,Vt.Arabic(Bo)||Vt["Arabic Supplement"](Bo)||Vt["Arabic Extended-A"](Bo)||Vt["Arabic Presentation Forms-A"](Bo)||Vt["Arabic Presentation Forms-B"](Bo))));if(Jn.imageName){const Sl=Wt[Jn.imageName];if(!Sl)continue;_c=Jn.imageName,wt.iconsInText=wt.iconsInText||!0,yc=Sl.paddedRect;const xa=Sl.displaySize;Jn.scale=Jn.scale*fo/Zn,gu={width:xa[0],height:xa[1],left:ya,top:-gk,advance:yu?xa[1]:xa[0]},_o=Ts+(fo-xa[1]*Jn.scale),Ff=gu.advance;const Bf=yu?xa[0]*Jn.scale-fo*go:xa[1]*Jn.scale-fo*go;Bf>0&&Bf>_a&&(_a=Bf)}else{const Sl=ln[Jn.fontStack],xa=Sl&&Sl[Jo];if(xa&&xa.rect)yc=xa.rect,gu=xa.metrics;else{const Bf=Xt[Jn.fontStack],Wv=Bf&&Bf[Jo];if(!Wv)continue;gu=Wv.metrics}_o=(go-Jn.scale)*fo}yu?(wt.verticalizable=!0,Cs.push({glyph:Jo,imageName:_c,x:ei,y:li+_o,vertical:yu,scale:Jn.scale,fontStack:Jn.fontStack,sectionIndex:Is,metrics:gu,rect:yc}),ei+=Ff*Jn.scale+mn):(Cs.push({glyph:Jo,imageName:_c,x:ei,y:li+_o,vertical:yu,scale:Jn.scale,fontStack:Jn.fontStack,sectionIndex:Is,metrics:gu,rect:yc}),ei+=gu.advance*Jn.scale+mn)}Cs.length!==0&&(po=Math.max(ei-mn,po),YU(Cs,0,Cs.length-1,Ks,_a)),ei=0;const va=Nt*go+_a;Js.lineOffset=Math.max(_a,Ts),li+=va,Xa=Math.max(va,Xa),++no}var Bo;const Yo=li-Uv,{horizontalAlign:Xs,verticalAlign:Ys}=OT(nn);(function(mo,go,Ts,Js,Cs,_a,va,yo,Jn){const Is=(go-Ts)*Cs;let Jo=0;Jo=_a!==va?-yo*Js-Uv:(-Js*Jn+.5)*va;for(const _o of mo)for(const gu of _o.positionedGlyphs)gu.x+=Is,gu.y+=Jo})(wt.positionedLines,Ks,Xs,Ys,po,Xa,Nt,Yo,Ht.length),wt.top+=-Ys*Yo,wt.bottom=wt.top+Yo,wt.left+=-Xs*po,wt.right=wt.left+po}(yt,s,h,m,Ue,P,F,$,ie,W,fe,Te),!function(wt){for(const Xt of wt)if(Xt.positionedGlyphs.length!==0)return!1;return!0}(Ye)&&yt}const qx={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},KU={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function vk(c,s,h,m,E,I){if(s.imageName){const P=m[s.imageName];return P?P.displaySize[0]*s.scale*fo/I+E:0}{const P=h[s.fontStack],F=P&&P[c];return F?F.metrics.advance*s.scale+E:0}}function xk(c,s,h,m){const E=Math.pow(c-s,2);return m?c<s?E/2:2*E:E+Math.abs(h)*h}function XU(c,s,h){let m=0;return c===10&&(m-=1e4),h&&(m+=150),c!==40&&c!==65288||(m+=50),s!==41&&s!==65289||(m+=50),m}function bk(c,s,h,m,E,I){let P=null,F=xk(s,h,E,I);for(const $ of m){const W=xk(s-$.x,h,E,I)+$.badness;W<=F&&(P=$,F=W)}return{index:c,x:s,priorBreak:P,badness:F}}function wk(c){return c?wk(c.priorBreak).concat(c.index):[]}function AT(c,s,h,m,E,I,P){if(I!=="point")return[];if(!c)return[];const F=[],$=function(fe,de,_e,Te,Re,Ue){let tt=0;for(let Ze=0;Ze<fe.length();Ze++){const Ye=fe.getSection(Ze);tt+=vk(fe.getCharCode(Ze),Ye,Te,Re,de,Ue)}return tt/Math.max(1,Math.ceil(tt/_e))}(c,s,h,m,E,P),W=c.text.indexOf("​")>=0;let ne=0;for(let fe=0;fe<c.length();fe++){const de=c.getSection(fe),_e=c.getCharCode(fe);if(qx[_e]||(ne+=vk(_e,de,m,E,s,P)),fe<c.length()-1){const Te=!((ie=_e)<11904||!(Vt["Bopomofo Extended"](ie)||Vt.Bopomofo(ie)||Vt["CJK Compatibility Forms"](ie)||Vt["CJK Compatibility Ideographs"](ie)||Vt["CJK Compatibility"](ie)||Vt["CJK Radicals Supplement"](ie)||Vt["CJK Strokes"](ie)||Vt["CJK Symbols and Punctuation"](ie)||Vt["CJK Unified Ideographs Extension A"](ie)||Vt["CJK Unified Ideographs"](ie)||Vt["Enclosed CJK Letters and Months"](ie)||Vt["Halfwidth and Fullwidth Forms"](ie)||Vt.Hiragana(ie)||Vt["Ideographic Description Characters"](ie)||Vt["Kangxi Radicals"](ie)||Vt["Katakana Phonetic Extensions"](ie)||Vt.Katakana(ie)||Vt["Vertical Forms"](ie)||Vt["Yi Radicals"](ie)||Vt["Yi Syllables"](ie)));(KU[_e]||Te||de.imageName)&&F.push(bk(fe+1,ne,$,F,XU(_e,c.getCharCode(fe+1),Te&&W),!1))}}var ie;return wk(bk(c.length(),ne,$,F,0,!0))}function OT(c){let s=.5,h=.5;switch(c){case"right":case"top-right":case"bottom-right":s=1;break;case"left":case"top-left":case"bottom-left":s=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":h=1;break;case"top":case"top-right":case"top-left":h=0}return{horizontalAlign:s,verticalAlign:h}}function YU(c,s,h,m,E){if(!m&&!E)return;const I=c[h],P=(c[h].x+I.metrics.advance*I.scale)*m;for(let F=s;F<=h;F++)c[F].x-=P,c[F].y+=E}function JU(c,s,h){const{horizontalAlign:m,verticalAlign:E}=OT(h),I=s[0]-c.displaySize[0]*m,P=s[1]-c.displaySize[1]*E;return{image:c,top:P,bottom:P+c.displaySize[1],left:I,right:I+c.displaySize[0]}}function Ek(c,s,h,m,E,I){const P=c.image;let F;if(P.content){const Re=P.content,Ue=P.pixelRatio||1;F=[Re[0]/Ue,Re[1]/Ue,P.displaySize[0]-Re[2]/Ue,P.displaySize[1]-Re[3]/Ue]}const $=s.left*I,W=s.right*I;let ne,ie,fe,de;h==="width"||h==="both"?(de=E[0]+$-m[3],ie=E[0]+W+m[1]):(de=E[0]+($+W-P.displaySize[0])/2,ie=de+P.displaySize[0]);const _e=s.top*I,Te=s.bottom*I;return h==="height"||h==="both"?(ne=E[1]+_e-m[0],fe=E[1]+Te+m[2]):(ne=E[1]+(_e+Te-P.displaySize[1])/2,fe=ne+P.displaySize[1]),{image:P,top:ne,right:ie,bottom:fe,left:de,collisionPadding:F}}const Vv=255,Ch=128,Wd=Vv*Ch;function Sk(c,s){const{expression:h}=s;if(h.kind==="constant")return{kind:"constant",layoutSize:h.evaluate(new jr(c+1))};if(h.kind==="source")return{kind:"source"};{const{zoomStops:m,interpolationType:E}=h;let I=0;for(;I<m.length&&m[I]<=c;)I++;I=Math.max(0,I-1);let P=I;for(;P<m.length&&m[P]<c+1;)P++;P=Math.min(m.length-1,P);const F=m[I],$=m[P];return h.kind==="composite"?{kind:"composite",minZoom:F,maxZoom:$,interpolationType:E}:{kind:"camera",minZoom:F,maxZoom:$,minSize:h.evaluate(new jr(F)),maxSize:h.evaluate(new jr($)),interpolationType:E}}}function kT(c,s,h){let m="never";const E=c.get(s);return E?m=E:c.get(h)&&(m="always"),m}const QU=Hd.VectorTileFeature.types,e7=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Vx(c,s,h,m,E,I,P,F,$,W,ne,ie,fe){const de=F?Math.min(Wd,Math.round(F[0])):0,_e=F?Math.min(Wd,Math.round(F[1])):0;c.emplaceBack(s,h,Math.round(32*m),Math.round(32*E),I,P,(de<<1)+($?1:0),_e,16*W,16*ne,256*ie,256*fe)}function RT(c,s,h){c.emplaceBack(s.x,s.y,h),c.emplaceBack(s.x,s.y,h),c.emplaceBack(s.x,s.y,h),c.emplaceBack(s.x,s.y,h)}function t7(c){for(const s of c.sections)if(ry(s.text))return!0;return!1}class MT{constructor(s){this.layoutVertexArray=new at,this.indexArray=new mt,this.programConfigurations=s,this.segments=new zt,this.dynamicLayoutVertexArray=new Fe,this.opacityVertexArray=new Je,this.hasVisibleVertices=!1,this.placedSymbolArray=new d}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(s,h,m,E){this.isEmpty()||(m&&(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,kU.members),this.indexBuffer=s.createIndexBuffer(this.indexArray,h),this.dynamicLayoutVertexBuffer=s.createVertexBuffer(this.dynamicLayoutVertexArray,RU.members,!0),this.opacityVertexBuffer=s.createVertexBuffer(this.opacityVertexArray,e7,!0),this.opacityVertexBuffer.itemSize=1),(m||E)&&this.programConfigurations.upload(s))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Jt("SymbolBuffers",MT);class NT{constructor(s,h,m){this.layoutVertexArray=new s,this.layoutAttributes=h,this.indexArray=new m,this.segments=new zt,this.collisionVertexArray=new ft}upload(s){this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=s.createVertexBuffer(this.collisionVertexArray,MU.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Jt("CollisionBuffers",NT);class _y{constructor(s){this.collisionBoxArray=s.collisionBoxArray,this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(P=>P.id),this.index=s.index,this.pixelRatio=s.pixelRatio,this.sourceLayerIndex=s.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=fT([]),this.placementViewportMatrix=fT([]);const h=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Sk(this.zoom,h["text-size"]),this.iconSizeData=Sk(this.zoom,h["icon-size"]);const m=this.layers[0].layout,E=m.get("symbol-sort-key"),I=m.get("symbol-z-order");this.canOverlap=kT(m,"text-overlap","text-allow-overlap")!=="never"||kT(m,"icon-overlap","icon-allow-overlap")!=="never"||m.get("text-ignore-placement")||m.get("icon-ignore-placement"),this.sortFeaturesByKey=I!=="viewport-y"&&!E.isConstant(),this.sortFeaturesByY=(I==="viewport-y"||I==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,m.get("symbol-placement")==="point"&&(this.writingModes=m.get("text-writing-mode").map(P=>u.ah[P])),this.stateDependentLayerIds=this.layers.filter(P=>P.isStateDependent()).map(P=>P.id),this.sourceID=s.sourceID}createArrays(){this.text=new MT(new pi(this.layers,this.zoom,s=>/^text/.test(s))),this.icon=new MT(new pi(this.layers,this.zoom,s=>/^icon/.test(s))),this.glyphOffsetArray=new C,this.lineVertexArray=new B,this.symbolInstances=new w,this.textAnchorOffsets=new Z}calculateGlyphDependencies(s,h,m,E,I){for(let P=0;P<s.length;P++)if(h[s.charCodeAt(P)]=!0,(m||E)&&I){const F=$v[s.charAt(P)];F&&(h[F.charCodeAt(0)]=!0)}}populate(s,h,m){const E=this.layers[0],I=E.layout,P=I.get("text-font"),F=I.get("text-field"),$=I.get("icon-image"),W=(F.value.kind!=="constant"||F.value.value instanceof ms&&!F.value.value.isEmpty()||F.value.value.toString().length>0)&&(P.value.kind!=="constant"||P.value.value.length>0),ne=$.value.kind!=="constant"||!!$.value.value||Object.keys($.parameters).length>0,ie=I.get("symbol-sort-key");if(this.features=[],!W&&!ne)return;const fe=h.iconDependencies,de=h.glyphDependencies,_e=h.availableImages,Te=new jr(this.zoom);for(const{feature:Re,id:Ue,index:tt,sourceLayerIndex:Ze}of s){const Ye=E._featureFilter.needGeometry,yt=Df(Re,Ye);if(!E._featureFilter.filter(Te,yt,m))continue;let wt,Xt;if(Ye||(yt.geometry=Nf(Re)),W){const Wt=E.getValueAndResolveTokens("text-field",yt,m,_e),Ht=ms.factory(Wt),Nt=this.hasRTLText=this.hasRTLText||t7(Ht);(!Nt||du.getRTLTextPluginStatus()==="unavailable"||Nt&&du.isParsed())&&(wt=DU(Ht,E,yt))}if(ne){const Wt=E.getValueAndResolveTokens("icon-image",yt,m,_e);Xt=Wt instanceof ys?Wt:ys.fromString(Wt)}if(!wt&&!Xt)continue;const ln=this.sortFeaturesByKey?ie.evaluate(yt,{},m):void 0;if(this.features.push({id:Ue,text:wt,icon:Xt,index:tt,sourceLayerIndex:Ze,geometry:yt.geometry,properties:Re.properties,type:QU[Re.type],sortKey:ln}),Xt&&(fe[Xt.name]=!0),wt){const Wt=P.evaluate(yt,{},m).join(","),Ht=I.get("text-rotation-alignment")!=="viewport"&&I.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(u.ah.vertical)>=0;for(const Nt of wt.sections)if(Nt.image)fe[Nt.image.name]=!0;else{const nn=mc(wt.toString()),Ut=Nt.fontStack||Wt,Ot=de[Ut]=de[Ut]||{};this.calculateGlyphDependencies(Nt.text,Ot,Ht,this.allowVerticalPlacement,nn)}}}I.get("symbol-placement")==="line"&&(this.features=function(Re){const Ue={},tt={},Ze=[];let Ye=0;function yt(Wt){Ze.push(Re[Wt]),Ye++}function wt(Wt,Ht,Nt){const nn=tt[Wt];return delete tt[Wt],tt[Ht]=nn,Ze[nn].geometry[0].pop(),Ze[nn].geometry[0]=Ze[nn].geometry[0].concat(Nt[0]),nn}function Xt(Wt,Ht,Nt){const nn=Ue[Ht];return delete Ue[Ht],Ue[Wt]=nn,Ze[nn].geometry[0].shift(),Ze[nn].geometry[0]=Nt[0].concat(Ze[nn].geometry[0]),nn}function ln(Wt,Ht,Nt){const nn=Nt?Ht[0][Ht[0].length-1]:Ht[0][0];return`${Wt}:${nn.x}:${nn.y}`}for(let Wt=0;Wt<Re.length;Wt++){const Ht=Re[Wt],Nt=Ht.geometry,nn=Ht.text?Ht.text.toString():null;if(!nn){yt(Wt);continue}const Ut=ln(nn,Nt),Ot=ln(nn,Nt,!0);if(Ut in tt&&Ot in Ue&&tt[Ut]!==Ue[Ot]){const mn=Xt(Ut,Ot,Nt),un=wt(Ut,Ot,Ze[mn].geometry);delete Ue[Ut],delete tt[Ot],tt[ln(nn,Ze[un].geometry,!0)]=un,Ze[mn].geometry=null}else Ut in tt?wt(Ut,Ot,Nt):Ot in Ue?Xt(Ut,Ot,Nt):(yt(Wt),Ue[Ut]=Ye-1,tt[Ot]=Ye-1)}return Ze.filter(Wt=>Wt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Re,Ue)=>Re.sortKey-Ue.sortKey)}update(s,h,m){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(s,h,this.layers,m),this.icon.programConfigurations.updatePaintArrays(s,h,this.layers,m))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(s){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(s),this.iconCollisionBox.upload(s)),this.text.upload(s,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(s,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(s,h){const m=this.lineVertexArray.length;if(s.segment!==void 0){let E=s.dist(h[s.segment+1]),I=s.dist(h[s.segment]);const P={};for(let F=s.segment+1;F<h.length;F++)P[F]={x:h[F].x,y:h[F].y,tileUnitDistanceFromAnchor:E},F<h.length-1&&(E+=h[F+1].dist(h[F]));for(let F=s.segment||0;F>=0;F--)P[F]={x:h[F].x,y:h[F].y,tileUnitDistanceFromAnchor:I},F>0&&(I+=h[F-1].dist(h[F]));for(let F=0;F<h.length;F++){const $=P[F];this.lineVertexArray.emplaceBack($.x,$.y,$.tileUnitDistanceFromAnchor)}}return{lineStartIndex:m,lineLength:this.lineVertexArray.length-m}}addSymbols(s,h,m,E,I,P,F,$,W,ne,ie,fe){const de=s.indexArray,_e=s.layoutVertexArray,Te=s.segments.prepareSegment(4*h.length,_e,de,this.canOverlap?P.sortKey:void 0),Re=this.glyphOffsetArray.length,Ue=Te.vertexLength,tt=this.allowVerticalPlacement&&F===u.ah.vertical?Math.PI/2:0,Ze=P.text&&P.text.sections;for(let Ye=0;Ye<h.length;Ye++){const{tl:yt,tr:wt,bl:Xt,br:ln,tex:Wt,pixelOffsetTL:Ht,pixelOffsetBR:Nt,minFontScaleX:nn,minFontScaleY:Ut,glyphOffset:Ot,isSDF:mn,sectionIndex:un}=h[Ye],Zn=Te.vertexLength,ei=Ot[1];Vx(_e,$.x,$.y,yt.x,ei+yt.y,Wt.x,Wt.y,m,mn,Ht.x,Ht.y,nn,Ut),Vx(_e,$.x,$.y,wt.x,ei+wt.y,Wt.x+Wt.w,Wt.y,m,mn,Nt.x,Ht.y,nn,Ut),Vx(_e,$.x,$.y,Xt.x,ei+Xt.y,Wt.x,Wt.y+Wt.h,m,mn,Ht.x,Nt.y,nn,Ut),Vx(_e,$.x,$.y,ln.x,ei+ln.y,Wt.x+Wt.w,Wt.y+Wt.h,m,mn,Nt.x,Nt.y,nn,Ut),RT(s.dynamicLayoutVertexArray,$,tt),de.emplaceBack(Zn,Zn+1,Zn+2),de.emplaceBack(Zn+1,Zn+2,Zn+3),Te.vertexLength+=4,Te.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ot[0]),Ye!==h.length-1&&un===h[Ye+1].sectionIndex||s.programConfigurations.populatePaintArrays(_e.length,P,P.index,{},fe,Ze&&Ze[un])}s.placedSymbolArray.emplaceBack($.x,$.y,Re,this.glyphOffsetArray.length-Re,Ue,W,ne,$.segment,m?m[0]:0,m?m[1]:0,E[0],E[1],F,0,!1,0,ie)}_addCollisionDebugVertex(s,h,m,E,I,P){return h.emplaceBack(0,0),s.emplaceBack(m.x,m.y,E,I,Math.round(P.x),Math.round(P.y))}addCollisionDebugVertices(s,h,m,E,I,P,F){const $=I.segments.prepareSegment(4,I.layoutVertexArray,I.indexArray),W=$.vertexLength,ne=I.layoutVertexArray,ie=I.collisionVertexArray,fe=F.anchorX,de=F.anchorY;this._addCollisionDebugVertex(ne,ie,P,fe,de,new y(s,h)),this._addCollisionDebugVertex(ne,ie,P,fe,de,new y(m,h)),this._addCollisionDebugVertex(ne,ie,P,fe,de,new y(m,E)),this._addCollisionDebugVertex(ne,ie,P,fe,de,new y(s,E)),$.vertexLength+=4;const _e=I.indexArray;_e.emplaceBack(W,W+1),_e.emplaceBack(W+1,W+2),_e.emplaceBack(W+2,W+3),_e.emplaceBack(W+3,W),$.primitiveLength+=4}addDebugCollisionBoxes(s,h,m,E){for(let I=s;I<h;I++){const P=this.collisionBoxArray.get(I);this.addCollisionDebugVertices(P.x1,P.y1,P.x2,P.y2,E?this.textCollisionBox:this.iconCollisionBox,P.anchorPoint,m)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new NT(ut,lk.members,Tt),this.iconCollisionBox=new NT(ut,lk.members,Tt);for(let s=0;s<this.symbolInstances.length;s++){const h=this.symbolInstances.get(s);this.addDebugCollisionBoxes(h.textBoxStartIndex,h.textBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.iconBoxStartIndex,h.iconBoxEndIndex,h,!1),this.addDebugCollisionBoxes(h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex,h,!1)}}_deserializeCollisionBoxesForSymbol(s,h,m,E,I,P,F,$,W){const ne={};for(let ie=h;ie<m;ie++){const fe=s.get(ie);ne.textBox={x1:fe.x1,y1:fe.y1,x2:fe.x2,y2:fe.y2,anchorPointX:fe.anchorPointX,anchorPointY:fe.anchorPointY},ne.textFeatureIndex=fe.featureIndex;break}for(let ie=E;ie<I;ie++){const fe=s.get(ie);ne.verticalTextBox={x1:fe.x1,y1:fe.y1,x2:fe.x2,y2:fe.y2,anchorPointX:fe.anchorPointX,anchorPointY:fe.anchorPointY},ne.verticalTextFeatureIndex=fe.featureIndex;break}for(let ie=P;ie<F;ie++){const fe=s.get(ie);ne.iconBox={x1:fe.x1,y1:fe.y1,x2:fe.x2,y2:fe.y2,anchorPointX:fe.anchorPointX,anchorPointY:fe.anchorPointY},ne.iconFeatureIndex=fe.featureIndex;break}for(let ie=$;ie<W;ie++){const fe=s.get(ie);ne.verticalIconBox={x1:fe.x1,y1:fe.y1,x2:fe.x2,y2:fe.y2,anchorPointX:fe.anchorPointX,anchorPointY:fe.anchorPointY},ne.verticalIconFeatureIndex=fe.featureIndex;break}return ne}deserializeCollisionBoxes(s){this.collisionArrays=[];for(let h=0;h<this.symbolInstances.length;h++){const m=this.symbolInstances.get(h);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(s,m.textBoxStartIndex,m.textBoxEndIndex,m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m.iconBoxStartIndex,m.iconBoxEndIndex,m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(s,h){const m=s.placedSymbolArray.get(h),E=m.vertexStartIndex+4*m.numGlyphs;for(let I=m.vertexStartIndex;I<E;I+=4)s.indexArray.emplaceBack(I,I+1,I+2),s.indexArray.emplaceBack(I+1,I+2,I+3)}getSortedSymbolIndexes(s){if(this.sortedAngle===s&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const h=Math.sin(s),m=Math.cos(s),E=[],I=[],P=[];for(let F=0;F<this.symbolInstances.length;++F){P.push(F);const $=this.symbolInstances.get(F);E.push(0|Math.round(h*$.anchorX+m*$.anchorY)),I.push($.featureIndex)}return P.sort((F,$)=>E[F]-E[$]||I[$]-I[F]),P}addToSortKeyRanges(s,h){const m=this.sortKeyRanges[this.sortKeyRanges.length-1];m&&m.sortKey===h?m.symbolInstanceEnd=s+1:this.sortKeyRanges.push({sortKey:h,symbolInstanceStart:s,symbolInstanceEnd:s+1})}sortFeatures(s){if(this.sortFeaturesByY&&this.sortedAngle!==s&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(s),this.sortedAngle=s,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const h of this.symbolInstanceIndexes){const m=this.symbolInstances.get(h);this.featureSortOrder.push(m.featureIndex),[m.rightJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.leftJustifiedTextSymbolIndex].forEach((E,I,P)=>{E>=0&&P.indexOf(E)===I&&this.addIndicesForPlacedSymbol(this.text,E)}),m.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,m.verticalPlacedTextSymbolIndex),m.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.placedIconSymbolIndex),m.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Tk,Ck;Jt("SymbolBucket",_y,{omit:["layers","collisionBoxArray","features","compareText"]}),_y.MAX_GLYPHS=65535,_y.addDynamicAttributes=RT;var DT={get paint(){return Ck=Ck||new hn({"icon-opacity":new We(rt.paint_symbol["icon-opacity"]),"icon-color":new We(rt.paint_symbol["icon-color"]),"icon-halo-color":new We(rt.paint_symbol["icon-halo-color"]),"icon-halo-width":new We(rt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new We(rt.paint_symbol["icon-halo-blur"]),"icon-translate":new Ce(rt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ce(rt.paint_symbol["icon-translate-anchor"]),"text-opacity":new We(rt.paint_symbol["text-opacity"]),"text-color":new We(rt.paint_symbol["text-color"],{runtimeType:Cr,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new We(rt.paint_symbol["text-halo-color"]),"text-halo-width":new We(rt.paint_symbol["text-halo-width"]),"text-halo-blur":new We(rt.paint_symbol["text-halo-blur"]),"text-translate":new Ce(rt.paint_symbol["text-translate"]),"text-translate-anchor":new Ce(rt.paint_symbol["text-translate-anchor"])})},get layout(){return Tk=Tk||new hn({"symbol-placement":new Ce(rt.layout_symbol["symbol-placement"]),"symbol-spacing":new Ce(rt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ce(rt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new We(rt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ce(rt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ce(rt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Ce(rt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Ce(rt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ce(rt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ce(rt.layout_symbol["icon-rotation-alignment"]),"icon-size":new We(rt.layout_symbol["icon-size"]),"icon-text-fit":new Ce(rt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ce(rt.layout_symbol["icon-text-fit-padding"]),"icon-image":new We(rt.layout_symbol["icon-image"]),"icon-rotate":new We(rt.layout_symbol["icon-rotate"]),"icon-padding":new We(rt.layout_symbol["icon-padding"]),"icon-keep-upright":new Ce(rt.layout_symbol["icon-keep-upright"]),"icon-offset":new We(rt.layout_symbol["icon-offset"]),"icon-anchor":new We(rt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ce(rt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ce(rt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ce(rt.layout_symbol["text-rotation-alignment"]),"text-field":new We(rt.layout_symbol["text-field"]),"text-font":new We(rt.layout_symbol["text-font"]),"text-size":new We(rt.layout_symbol["text-size"]),"text-max-width":new We(rt.layout_symbol["text-max-width"]),"text-line-height":new Ce(rt.layout_symbol["text-line-height"]),"text-letter-spacing":new We(rt.layout_symbol["text-letter-spacing"]),"text-justify":new We(rt.layout_symbol["text-justify"]),"text-radial-offset":new We(rt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ce(rt.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new We(rt.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new We(rt.layout_symbol["text-anchor"]),"text-max-angle":new Ce(rt.layout_symbol["text-max-angle"]),"text-writing-mode":new Ce(rt.layout_symbol["text-writing-mode"]),"text-rotate":new We(rt.layout_symbol["text-rotate"]),"text-padding":new Ce(rt.layout_symbol["text-padding"]),"text-keep-upright":new Ce(rt.layout_symbol["text-keep-upright"]),"text-transform":new We(rt.layout_symbol["text-transform"]),"text-offset":new We(rt.layout_symbol["text-offset"]),"text-allow-overlap":new Ce(rt.layout_symbol["text-allow-overlap"]),"text-overlap":new Ce(rt.layout_symbol["text-overlap"]),"text-ignore-placement":new Ce(rt.layout_symbol["text-ignore-placement"]),"text-optional":new Ce(rt.layout_symbol["text-optional"])})}};class Ik{constructor(s){if(s.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=s.property.overrides?s.property.overrides.runtimeType:Xr,this.defaultValue=s}evaluate(s){if(s.formattedSection){const h=this.defaultValue.property.overrides;if(h&&h.hasOverride(s.formattedSection))return h.getOverride(s.formattedSection)}return s.feature&&s.featureState?this.defaultValue.evaluate(s.feature,s.featureState):this.defaultValue.property.specification.default}eachChild(s){this.defaultValue.isConstant()||s(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Jt("FormatSectionOverride",Ik,{omit:["defaultValue"]});class Gx extends Hr{constructor(s){super(s,DT)}recalculate(s,h){if(super.recalculate(s,h),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const m=this.layout.get("text-writing-mode");if(m){const E=[];for(const I of m)E.indexOf(I)<0&&E.push(I);this.layout._values["text-writing-mode"]=E}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(s,h,m,E){const I=this.layout.get(s).evaluate(h,{},m,E),P=this._unevaluatedLayout._values[s];return P.isDataDriven()||kr(P.value)||!I?I:function(F,$){return $.replace(/{([^{}]+)}/g,(W,ne)=>F&&ne in F?String(F[ne]):"")}(h.properties,I)}createBucket(s){return new _y(s)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const s of DT.paint.overridableProperties){if(!Gx.hasPaintOverride(this.layout,s))continue;const h=this.paint.get(s),m=new Ik(h),E=new Br(m,h.property.specification);let I=null;I=h.value.kind==="constant"||h.value.kind==="source"?new Nd("source",E):new ws("composite",E,h.value.zoomStops),this.paint._values[s]=new re(h.property,I,h.parameters)}}_handleOverridablePaintPropertyUpdate(s,h,m){return!(!this.layout||h.isDataDriven()||m.isDataDriven())&&Gx.hasPaintOverride(this.layout,s)}static hasPaintOverride(s,h){const m=s.get("text-field"),E=DT.paint.properties[h];let I=!1;const P=F=>{for(const $ of F)if(E.overrides&&E.overrides.hasOverride($))return void(I=!0)};if(m.value.kind==="constant"&&m.value.value instanceof ms)P(m.value.value.sections);else if(m.value.kind==="source"){const F=W=>{I||(W instanceof _s&&Bn(W.value)===Vr?P(W.value.sections):W instanceof yf?P(W.sections):W.eachChild(F))},$=m.value;$._styleExpression&&F($._styleExpression.expression)}return I}}let Pk;var n7={get paint(){return Pk=Pk||new hn({"background-color":new Ce(rt.paint_background["background-color"]),"background-pattern":new It(rt.paint_background["background-pattern"]),"background-opacity":new Ce(rt.paint_background["background-opacity"])})}};class r7 extends Hr{constructor(s){super(s,n7)}}let Lk;var i7={get paint(){return Lk=Lk||new hn({"raster-opacity":new Ce(rt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ce(rt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ce(rt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ce(rt.paint_raster["raster-brightness-max"]),"raster-saturation":new Ce(rt.paint_raster["raster-saturation"]),"raster-contrast":new Ce(rt.paint_raster["raster-contrast"]),"raster-resampling":new Ce(rt.paint_raster["raster-resampling"]),"raster-fade-duration":new Ce(rt.paint_raster["raster-fade-duration"])})}};class o7 extends Hr{constructor(s){super(s,i7)}}class s7 extends Hr{constructor(s){super(s,{}),this.onAdd=h=>{this.implementation.onAdd&&this.implementation.onAdd(h,h.painter.context.gl)},this.onRemove=h=>{this.implementation.onRemove&&this.implementation.onRemove(h,h.painter.context.gl)},this.implementation=s}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class a7{constructor(s){this._methodToThrottle=s,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const zT=63710088e-1;class Kd{constructor(s,h){if(isNaN(s)||isNaN(h))throw new Error(`Invalid LngLat object: (${s}, ${h})`);if(this.lng=+s,this.lat=+h,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Kd(q(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(s){const h=Math.PI/180,m=this.lat*h,E=s.lat*h,I=Math.sin(m)*Math.sin(E)+Math.cos(m)*Math.cos(E)*Math.cos((s.lng-this.lng)*h);return zT*Math.acos(Math.min(I,1))}static convert(s){if(s instanceof Kd)return s;if(Array.isArray(s)&&(s.length===2||s.length===3))return new Kd(Number(s[0]),Number(s[1]));if(!Array.isArray(s)&&typeof s=="object"&&s!==null)return new Kd(Number("lng"in s?s.lng:s.lon),Number(s.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Ak=2*Math.PI*zT;function Ok(c){return Ak*Math.cos(c*Math.PI/180)}function kk(c){return(180+c)/360}function Rk(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function Mk(c,s){return c/Ok(s)}function FT(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}class Hx{constructor(s,h,m=0){this.x=+s,this.y=+h,this.z=+m}static fromLngLat(s,h=0){const m=Kd.convert(s);return new Hx(kk(m.lng),Rk(m.lat),Mk(h,m.lat))}toLngLat(){return new Kd(360*this.x-180,FT(this.y))}toAltitude(){return this.z*Ok(FT(this.y))}meterInMercatorCoordinateUnits(){return 1/Ak*(s=FT(this.y),1/Math.cos(s*Math.PI/180));var s}}function Nk(c,s,h){var m=2*Math.PI*6378137/256/Math.pow(2,h);return[c*m-2*Math.PI*6378137/2,s*m-2*Math.PI*6378137/2]}class BT{constructor(s,h,m){if(s<0||s>25||m<0||m>=Math.pow(2,s)||h<0||h>=Math.pow(2,s))throw new Error(`x=${h}, y=${m}, z=${s} outside of bounds. 0<=x<${Math.pow(2,s)}, 0<=y<${Math.pow(2,s)} 0<=z<=25 `);this.z=s,this.x=h,this.y=m,this.key=Gv(0,s,s,h,m)}equals(s){return this.z===s.z&&this.x===s.x&&this.y===s.y}url(s,h,m){const E=(P=this.y,F=this.z,$=Nk(256*(I=this.x),256*(P=Math.pow(2,F)-P-1),F),W=Nk(256*(I+1),256*(P+1),F),$[0]+","+$[1]+","+W[0]+","+W[1]);var I,P,F,$,W;const ne=function(ie,fe,de){let _e,Te="";for(let Re=ie;Re>0;Re--)_e=1<<Re-1,Te+=(fe&_e?1:0)+(de&_e?2:0);return Te}(this.z,this.x,this.y);return s[(this.x+this.y)%s.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(m==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,h>1?"@2x":"").replace(/{quadkey}/g,ne).replace(/{bbox-epsg-3857}/g,E)}isChildOf(s){const h=this.z-s.z;return h>0&&s.x===this.x>>h&&s.y===this.y>>h}getTilePoint(s){const h=Math.pow(2,this.z);return new y((s.x*h-this.x)*Mi,(s.y*h-this.y)*Mi)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Dk{constructor(s,h){this.wrap=s,this.canonical=h,this.key=Gv(s,h.z,h.z,h.x,h.y)}}class El{constructor(s,h,m,E,I){if(s<m)throw new Error(`overscaledZ should be >= z; overscaledZ = ${s}; z = ${m}`);this.overscaledZ=s,this.wrap=h,this.canonical=new BT(m,+E,+I),this.key=Gv(h,s,m,E,I)}clone(){return new El(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(s){return this.overscaledZ===s.overscaledZ&&this.wrap===s.wrap&&this.canonical.equals(s.canonical)}scaledTo(s){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-s;return s>this.canonical.z?new El(s,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new El(s,this.wrap,s,this.canonical.x>>h,this.canonical.y>>h)}calculateScaledKey(s,h){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);const m=this.canonical.z-s;return s>this.canonical.z?Gv(this.wrap*+h,s,this.canonical.z,this.canonical.x,this.canonical.y):Gv(this.wrap*+h,s,s,this.canonical.x>>m,this.canonical.y>>m)}isChildOf(s){if(s.wrap!==this.wrap)return!1;const h=this.canonical.z-s.canonical.z;return s.overscaledZ===0||s.overscaledZ<this.overscaledZ&&s.canonical.x===this.canonical.x>>h&&s.canonical.y===this.canonical.y>>h}children(s){if(this.overscaledZ>=s)return[new El(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const h=this.canonical.z+1,m=2*this.canonical.x,E=2*this.canonical.y;return[new El(h,this.wrap,h,m,E),new El(h,this.wrap,h,m+1,E),new El(h,this.wrap,h,m,E+1),new El(h,this.wrap,h,m+1,E+1)]}isLessThan(s){return this.wrap<s.wrap||!(this.wrap>s.wrap)&&(this.overscaledZ<s.overscaledZ||!(this.overscaledZ>s.overscaledZ)&&(this.canonical.x<s.canonical.x||!(this.canonical.x>s.canonical.x)&&this.canonical.y<s.canonical.y))}wrapped(){return new El(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(s){return new El(this.overscaledZ,s,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Dk(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(s){return this.canonical.getTilePoint(new Hx(s.x-this.wrap,s.y))}}function Gv(c,s,h,m,E){(c*=2)<0&&(c=-1*c-1);const I=1<<h;return(I*I*c+I*E+m).toString(36)+h.toString(36)+s.toString(36)}Jt("CanonicalTileID",BT),Jt("OverscaledTileID",El,{omit:["posMatrix"]});class zk{constructor(s,h,m,E=1,I=1,P=1,F=0){if(this.uid=s,h.height!==h.width)throw new RangeError("DEM tiles must be square");if(m&&!["mapbox","terrarium","custom"].includes(m))return void ue(`"${m}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=h.height;const $=this.dim=h.height-2;switch(this.data=new Uint32Array(h.data.buffer),m){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=E,this.greenFactor=I,this.blueFactor=P,this.baseShift=F;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let W=0;W<$;W++)this.data[this._idx(-1,W)]=this.data[this._idx(0,W)],this.data[this._idx($,W)]=this.data[this._idx($-1,W)],this.data[this._idx(W,-1)]=this.data[this._idx(W,0)],this.data[this._idx(W,$)]=this.data[this._idx(W,$-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx($,-1)]=this.data[this._idx($-1,0)],this.data[this._idx(-1,$)]=this.data[this._idx(0,$-1)],this.data[this._idx($,$)]=this.data[this._idx($-1,$-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let W=0;W<$;W++)for(let ne=0;ne<$;ne++){const ie=this.get(W,ne);ie>this.max&&(this.max=ie),ie<this.min&&(this.min=ie)}}get(s,h){const m=new Uint8Array(this.data.buffer),E=4*this._idx(s,h);return this.unpack(m[E],m[E+1],m[E+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(s,h){if(s<-1||s>=this.dim+1||h<-1||h>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(h+1)*this.stride+(s+1)}unpack(s,h,m){return s*this.redFactor+h*this.greenFactor+m*this.blueFactor-this.baseShift}getPixels(){return new wl({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(s,h,m){if(this.dim!==s.dim)throw new Error("dem dimension mismatch");let E=h*this.dim,I=h*this.dim+this.dim,P=m*this.dim,F=m*this.dim+this.dim;switch(h){case-1:E=I-1;break;case 1:I=E+1}switch(m){case-1:P=F-1;break;case 1:F=P+1}const $=-h*this.dim,W=-m*this.dim;for(let ne=P;ne<F;ne++)for(let ie=E;ie<I;ie++)this.data[this._idx(ie,ne)]=s.data[this._idx(ie+$,ne+W)]}}Jt("DEMData",zk);class Fk{constructor(s){this._stringToNumber={},this._numberToString=[];for(let h=0;h<s.length;h++){const m=s[h];this._stringToNumber[m]=h,this._numberToString[h]=m}}encode(s){return this._stringToNumber[s]}decode(s){if(s>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${s} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[s]}}class Bk{constructor(s,h,m,E,I){this.type="Feature",this._vectorTileFeature=s,s._z=h,s._x=m,s._y=E,this.properties=s.properties,this.id=I}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(s){this._geometry=s}toJSON(){const s={geometry:this.geometry};for(const h in this)h!=="_geometry"&&h!=="_vectorTileFeature"&&(s[h]=this[h]);return s}}class jk{constructor(s,h){this.tileID=s,this.x=s.canonical.x,this.y=s.canonical.y,this.z=s.canonical.z,this.grid=new If(Mi,16,0),this.grid3D=new If(Mi,16,0),this.featureIndexArray=new se,this.promoteId=h}insert(s,h,m,E,I,P){const F=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(m,E,I);const $=P?this.grid3D:this.grid;for(let W=0;W<h.length;W++){const ne=h[W],ie=[1/0,1/0,-1/0,-1/0];for(let fe=0;fe<ne.length;fe++){const de=ne[fe];ie[0]=Math.min(ie[0],de.x),ie[1]=Math.min(ie[1],de.y),ie[2]=Math.max(ie[2],de.x),ie[3]=Math.max(ie[3],de.y)}ie[0]<Mi&&ie[1]<Mi&&ie[2]>=0&&ie[3]>=0&&$.insert(F,ie[0],ie[1],ie[2],ie[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Hd.VectorTile(new IT(this.rawTileData)).layers,this.sourceLayerCoder=new Fk(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(s,h,m,E){this.loadVTLayers();const I=s.params||{},P=Mi/s.tileSize/s.scale,F=Fd(I.filter),$=s.queryGeometry,W=s.queryPadding*P,ne=Uk($),ie=this.grid.query(ne.minX-W,ne.minY-W,ne.maxX+W,ne.maxY+W),fe=Uk(s.cameraQueryGeometry),de=this.grid3D.query(fe.minX-W,fe.minY-W,fe.maxX+W,fe.maxY+W,(Re,Ue,tt,Ze)=>function(Ye,yt,wt,Xt,ln){for(const Ht of Ye)if(yt<=Ht.x&&wt<=Ht.y&&Xt>=Ht.x&&ln>=Ht.y)return!0;const Wt=[new y(yt,wt),new y(yt,ln),new y(Xt,ln),new y(Xt,wt)];if(Ye.length>2){for(const Ht of Wt)if(hy(Ye,Ht))return!0}for(let Ht=0;Ht<Ye.length-1;Ht++)if(B8(Ye[Ht],Ye[Ht+1],Wt))return!0;return!1}(s.cameraQueryGeometry,Re-W,Ue-W,tt+W,Ze+W));for(const Re of de)ie.push(Re);ie.sort(l7);const _e={};let Te;for(let Re=0;Re<ie.length;Re++){const Ue=ie[Re];if(Ue===Te)continue;Te=Ue;const tt=this.featureIndexArray.get(Ue);let Ze=null;this.loadMatchingFeature(_e,tt.bucketIndex,tt.sourceLayerIndex,tt.featureIndex,F,I.layers,I.availableImages,h,m,E,(Ye,yt,wt)=>(Ze||(Ze=Nf(Ye)),yt.queryIntersectsFeature($,Ye,wt,Ze,this.z,s.transform,P,s.pixelPosMatrix)))}return _e}loadMatchingFeature(s,h,m,E,I,P,F,$,W,ne,ie){const fe=this.bucketLayerIDs[h];if(P&&!function(Re,Ue){for(let tt=0;tt<Re.length;tt++)if(Ue.indexOf(Re[tt])>=0)return!0;return!1}(P,fe))return;const de=this.sourceLayerCoder.decode(m),_e=this.vtLayers[de].feature(E);if(I.needGeometry){const Re=Df(_e,!0);if(!I.filter(new jr(this.tileID.overscaledZ),Re,this.tileID.canonical))return}else if(!I.filter(new jr(this.tileID.overscaledZ),_e))return;const Te=this.getId(_e,de);for(let Re=0;Re<fe.length;Re++){const Ue=fe[Re];if(P&&P.indexOf(Ue)<0)continue;const tt=$[Ue];if(!tt)continue;let Ze={};Te&&ne&&(Ze=ne.getState(tt.sourceLayer||"_geojsonTileLayer",Te));const Ye=G({},W[Ue]);Ye.paint=$k(Ye.paint,tt.paint,_e,Ze,F),Ye.layout=$k(Ye.layout,tt.layout,_e,Ze,F);const yt=!ie||ie(_e,tt,Ze);if(!yt)continue;const wt=new Bk(_e,this.z,this.x,this.y,Te);wt.layer=Ye;let Xt=s[Ue];Xt===void 0&&(Xt=s[Ue]=[]),Xt.push({featureIndex:E,feature:wt,intersectionZ:yt})}}lookupSymbolFeatures(s,h,m,E,I,P,F,$){const W={};this.loadVTLayers();const ne=Fd(I);for(const ie of s)this.loadMatchingFeature(W,m,E,ie,ne,P,F,$,h);return W}hasLayer(s){for(const h of this.bucketLayerIDs)for(const m of h)if(s===m)return!0;return!1}getId(s,h){let m=s.id;return this.promoteId&&(m=s.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[h]],typeof m=="boolean"&&(m=Number(m))),m}}function $k(c,s,h,m,E){return J(c,(I,P)=>{const F=s instanceof me?s.get(P):null;return F&&F.evaluate?F.evaluate(h,m,E):F})}function Uk(c){let s=1/0,h=1/0,m=-1/0,E=-1/0;for(const I of c)s=Math.min(s,I.x),h=Math.min(h,I.y),m=Math.max(m,I.x),E=Math.max(E,I.y);return{minX:s,minY:h,maxX:m,maxY:E}}function l7(c,s){return s-c}function qk(c,s,h,m,E){const I=[];for(let P=0;P<c.length;P++){const F=c[P];let $;for(let W=0;W<F.length-1;W++){let ne=F[W],ie=F[W+1];ne.x<s&&ie.x<s||(ne.x<s?ne=new y(s,ne.y+(s-ne.x)/(ie.x-ne.x)*(ie.y-ne.y))._round():ie.x<s&&(ie=new y(s,ne.y+(s-ne.x)/(ie.x-ne.x)*(ie.y-ne.y))._round()),ne.y<h&&ie.y<h||(ne.y<h?ne=new y(ne.x+(h-ne.y)/(ie.y-ne.y)*(ie.x-ne.x),h)._round():ie.y<h&&(ie=new y(ne.x+(h-ne.y)/(ie.y-ne.y)*(ie.x-ne.x),h)._round()),ne.x>=m&&ie.x>=m||(ne.x>=m?ne=new y(m,ne.y+(m-ne.x)/(ie.x-ne.x)*(ie.y-ne.y))._round():ie.x>=m&&(ie=new y(m,ne.y+(m-ne.x)/(ie.x-ne.x)*(ie.y-ne.y))._round()),ne.y>=E&&ie.y>=E||(ne.y>=E?ne=new y(ne.x+(E-ne.y)/(ie.y-ne.y)*(ie.x-ne.x),E)._round():ie.y>=E&&(ie=new y(ne.x+(E-ne.y)/(ie.y-ne.y)*(ie.x-ne.x),E)._round()),$&&ne.equals($[$.length-1])||($=[ne],I.push($)),$.push(ie)))))}}return I}Jt("FeatureIndex",jk,{omit:["rawTileData","sourceLayerCoder"]});class Xd extends y{constructor(s,h,m,E){super(s,h),this.angle=m,E!==void 0&&(this.segment=E)}clone(){return new Xd(this.x,this.y,this.angle,this.segment)}}function Vk(c,s,h,m,E){if(s.segment===void 0||h===0)return!0;let I=s,P=s.segment+1,F=0;for(;F>-h/2;){if(P--,P<0)return!1;F-=c[P].dist(I),I=c[P]}F+=c[P].dist(c[P+1]),P++;const $=[];let W=0;for(;F<h/2;){const ne=c[P],ie=c[P+1];if(!ie)return!1;let fe=c[P-1].angleTo(ne)-ne.angleTo(ie);for(fe=Math.abs((fe+3*Math.PI)%(2*Math.PI)-Math.PI),$.push({distance:F,angleDelta:fe}),W+=fe;F-$[0].distance>m;)W-=$.shift().angleDelta;if(W>E)return!1;P++,F+=ne.dist(ie)}return!0}function Gk(c){let s=0;for(let h=0;h<c.length-1;h++)s+=c[h].dist(c[h+1]);return s}function Hk(c,s,h){return c?.6*s*h:0}function Zk(c,s){return Math.max(c?c.right-c.left:0,s?s.right-s.left:0)}function u7(c,s,h,m,E,I){const P=Hk(h,E,I),F=Zk(h,m)*I;let $=0;const W=Gk(c)/2;for(let ne=0;ne<c.length-1;ne++){const ie=c[ne],fe=c[ne+1],de=ie.dist(fe);if($+de>W){const _e=(W-$)/de,Te=Io.number(ie.x,fe.x,_e),Re=Io.number(ie.y,fe.y,_e),Ue=new Xd(Te,Re,fe.angleTo(ie),ne);return Ue._round(),!P||Vk(c,Ue,F,P,s)?Ue:void 0}$+=de}}function c7(c,s,h,m,E,I,P,F,$){const W=Hk(m,I,P),ne=Zk(m,E),ie=ne*P,fe=c[0].x===0||c[0].x===$||c[0].y===0||c[0].y===$;return s-ie<s/4&&(s=ie+s/4),Wk(c,fe?s/2*F%s:(ne/2+2*I)*P*F%s,s,W,h,ie,fe,!1,$)}function Wk(c,s,h,m,E,I,P,F,$){const W=I/2,ne=Gk(c);let ie=0,fe=s-h,de=[];for(let _e=0;_e<c.length-1;_e++){const Te=c[_e],Re=c[_e+1],Ue=Te.dist(Re),tt=Re.angleTo(Te);for(;fe+h<ie+Ue;){fe+=h;const Ze=(fe-ie)/Ue,Ye=Io.number(Te.x,Re.x,Ze),yt=Io.number(Te.y,Re.y,Ze);if(Ye>=0&&Ye<$&&yt>=0&&yt<$&&fe-W>=0&&fe+W<=ne){const wt=new Xd(Ye,yt,tt,_e);wt._round(),m&&!Vk(c,wt,I,m,E)||de.push(wt)}}ie+=Ue}return F||de.length||P||(de=Wk(c,ie/2,h,m,E,I,P,!0,$)),de}Jt("Anchor",Xd);const vy=ya;function Kk(c,s,h,m){const E=[],I=c.image,P=I.pixelRatio,F=I.paddedRect.w-2*vy,$=I.paddedRect.h-2*vy,W=c.right-c.left,ne=c.bottom-c.top,ie=I.stretchX||[[0,F]],fe=I.stretchY||[[0,$]],de=(Nt,nn)=>Nt+nn[1]-nn[0],_e=ie.reduce(de,0),Te=fe.reduce(de,0),Re=F-_e,Ue=$-Te;let tt=0,Ze=_e,Ye=0,yt=Te,wt=0,Xt=Re,ln=0,Wt=Ue;if(I.content&&m){const Nt=I.content;tt=Zx(ie,0,Nt[0]),Ye=Zx(fe,0,Nt[1]),Ze=Zx(ie,Nt[0],Nt[2]),yt=Zx(fe,Nt[1],Nt[3]),wt=Nt[0]-tt,ln=Nt[1]-Ye,Xt=Nt[2]-Nt[0]-Ze,Wt=Nt[3]-Nt[1]-yt}const Ht=(Nt,nn,Ut,Ot)=>{const mn=Wx(Nt.stretch-tt,Ze,W,c.left),un=Kx(Nt.fixed-wt,Xt,Nt.stretch,_e),Zn=Wx(nn.stretch-Ye,yt,ne,c.top),ei=Kx(nn.fixed-ln,Wt,nn.stretch,Te),li=Wx(Ut.stretch-tt,Ze,W,c.left),po=Kx(Ut.fixed-wt,Xt,Ut.stretch,_e),Xa=Wx(Ot.stretch-Ye,yt,ne,c.top),Ks=Kx(Ot.fixed-ln,Wt,Ot.stretch,Te),no=new y(mn,Zn),Bo=new y(li,Zn),Yo=new y(li,Xa),Xs=new y(mn,Xa),Ys=new y(un/P,ei/P),mo=new y(po/P,Ks/P),go=s*Math.PI/180;if(go){const Cs=Math.sin(go),_a=Math.cos(go),va=[_a,-Cs,Cs,_a];no._matMult(va),Bo._matMult(va),Xs._matMult(va),Yo._matMult(va)}const Ts=Nt.stretch+Nt.fixed,Js=nn.stretch+nn.fixed;return{tl:no,tr:Bo,bl:Xs,br:Yo,tex:{x:I.paddedRect.x+vy+Ts,y:I.paddedRect.y+vy+Js,w:Ut.stretch+Ut.fixed-Ts,h:Ot.stretch+Ot.fixed-Js},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ys,pixelOffsetBR:mo,minFontScaleX:Xt/P/W,minFontScaleY:Wt/P/ne,isSDF:h}};if(m&&(I.stretchX||I.stretchY)){const Nt=Xk(ie,Re,_e),nn=Xk(fe,Ue,Te);for(let Ut=0;Ut<Nt.length-1;Ut++){const Ot=Nt[Ut],mn=Nt[Ut+1];for(let un=0;un<nn.length-1;un++)E.push(Ht(Ot,nn[un],mn,nn[un+1]))}}else E.push(Ht({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:F+1},{fixed:0,stretch:$+1}));return E}function Zx(c,s,h){let m=0;for(const E of c)m+=Math.max(s,Math.min(h,E[1]))-Math.max(s,Math.min(h,E[0]));return m}function Xk(c,s,h){const m=[{fixed:-vy,stretch:0}];for(const[E,I]of c){const P=m[m.length-1];m.push({fixed:E-P.stretch,stretch:P.stretch}),m.push({fixed:E-P.stretch,stretch:P.stretch+(I-E)})}return m.push({fixed:s+vy,stretch:h}),m}function Wx(c,s,h,m){return c/s*h+m}function Kx(c,s,h,m){return c-s*h/m}class Xx{constructor(s,h,m,E,I,P,F,$,W,ne){if(this.boxStartIndex=s.length,W){let ie=P.top,fe=P.bottom;const de=P.collisionPadding;de&&(ie-=de[1],fe+=de[3]);let _e=fe-ie;_e>0&&(_e=Math.max(10,_e),this.circleDiameter=_e)}else{let ie=P.top*F-$[0],fe=P.bottom*F+$[2],de=P.left*F-$[3],_e=P.right*F+$[1];const Te=P.collisionPadding;if(Te&&(de-=Te[0]*F,ie-=Te[1]*F,_e+=Te[2]*F,fe+=Te[3]*F),ne){const Re=new y(de,ie),Ue=new y(_e,ie),tt=new y(de,fe),Ze=new y(_e,fe),Ye=ne*Math.PI/180;Re._rotate(Ye),Ue._rotate(Ye),tt._rotate(Ye),Ze._rotate(Ye),de=Math.min(Re.x,Ue.x,tt.x,Ze.x),_e=Math.max(Re.x,Ue.x,tt.x,Ze.x),ie=Math.min(Re.y,Ue.y,tt.y,Ze.y),fe=Math.max(Re.y,Ue.y,tt.y,Ze.y)}s.emplaceBack(h.x,h.y,de,ie,_e,fe,m,E,I)}this.boxEndIndex=s.length}}class h7{constructor(s=[],h=f7){if(this.data=s,this.length=this.data.length,this.compare=h,this.length>0)for(let m=(this.length>>1)-1;m>=0;m--)this._down(m)}push(s){this.data.push(s),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const s=this.data[0],h=this.data.pop();return this.length--,this.length>0&&(this.data[0]=h,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:h,compare:m}=this,E=h[s];for(;s>0;){const I=s-1>>1,P=h[I];if(m(E,P)>=0)break;h[s]=P,s=I}h[s]=E}_down(s){const{data:h,compare:m}=this,E=this.length>>1,I=h[s];for(;s<E;){let P=1+(s<<1),F=h[P];const $=P+1;if($<this.length&&m(h[$],F)<0&&(P=$,F=h[$]),m(F,I)>=0)break;h[s]=F,s=P}h[s]=I}}function f7(c,s){return c<s?-1:c>s?1:0}function d7(c,s=1,h=!1){let m=1/0,E=1/0,I=-1/0,P=-1/0;const F=c[0];for(let de=0;de<F.length;de++){const _e=F[de];(!de||_e.x<m)&&(m=_e.x),(!de||_e.y<E)&&(E=_e.y),(!de||_e.x>I)&&(I=_e.x),(!de||_e.y>P)&&(P=_e.y)}const $=Math.min(I-m,P-E);let W=$/2;const ne=new h7([],p7);if($===0)return new y(m,E);for(let de=m;de<I;de+=$)for(let _e=E;_e<P;_e+=$)ne.push(new xy(de+W,_e+W,W,c));let ie=function(de){let _e=0,Te=0,Re=0;const Ue=de[0];for(let tt=0,Ze=Ue.length,Ye=Ze-1;tt<Ze;Ye=tt++){const yt=Ue[tt],wt=Ue[Ye],Xt=yt.x*wt.y-wt.x*yt.y;Te+=(yt.x+wt.x)*Xt,Re+=(yt.y+wt.y)*Xt,_e+=3*Xt}return new xy(Te/_e,Re/_e,0,de)}(c),fe=ne.length;for(;ne.length;){const de=ne.pop();(de.d>ie.d||!ie.d)&&(ie=de,h&&console.log("found best %d after %d probes",Math.round(1e4*de.d)/1e4,fe)),de.max-ie.d<=s||(W=de.h/2,ne.push(new xy(de.p.x-W,de.p.y-W,W,c)),ne.push(new xy(de.p.x+W,de.p.y-W,W,c)),ne.push(new xy(de.p.x-W,de.p.y+W,W,c)),ne.push(new xy(de.p.x+W,de.p.y+W,W,c)),fe+=4)}return h&&(console.log(`num probes: ${fe}`),console.log(`best distance: ${ie.d}`)),ie.p}function p7(c,s){return s.max-c.max}function xy(c,s,h,m){this.p=new y(c,s),this.h=h,this.d=function(E,I){let P=!1,F=1/0;for(let $=0;$<I.length;$++){const W=I[$];for(let ne=0,ie=W.length,fe=ie-1;ne<ie;fe=ne++){const de=W[ne],_e=W[fe];de.y>E.y!=_e.y>E.y&&E.x<(_e.x-de.x)*(E.y-de.y)/(_e.y-de.y)+de.x&&(P=!P),F=Math.min(F,RO(E,de,_e))}}return(P?1:-1)*Math.sqrt(F)}(this.p,m),this.max=this.d+this.h*Math.SQRT2}var Xo;u.ap=void 0,(Xo=u.ap||(u.ap={}))[Xo.center=1]="center",Xo[Xo.left=2]="left",Xo[Xo.right=3]="right",Xo[Xo.top=4]="top",Xo[Xo.bottom=5]="bottom",Xo[Xo["top-left"]=6]="top-left",Xo[Xo["top-right"]=7]="top-right",Xo[Xo["bottom-left"]=8]="bottom-left",Xo[Xo["bottom-right"]=9]="bottom-right";const Yd=7,jT=Number.POSITIVE_INFINITY;function Yk(c,s){return s[1]!==jT?function(h,m,E){let I=0,P=0;switch(m=Math.abs(m),E=Math.abs(E),h){case"top-right":case"top-left":case"top":P=E-Yd;break;case"bottom-right":case"bottom-left":case"bottom":P=-E+Yd}switch(h){case"top-right":case"bottom-right":case"right":I=-m;break;case"top-left":case"bottom-left":case"left":I=m}return[I,P]}(c,s[0],s[1]):function(h,m){let E=0,I=0;m<0&&(m=0);const P=m/Math.SQRT2;switch(h){case"top-right":case"top-left":I=P-Yd;break;case"bottom-right":case"bottom-left":I=-P+Yd;break;case"bottom":I=-m+Yd;break;case"top":I=m-Yd}switch(h){case"top-right":case"bottom-right":E=-P;break;case"top-left":case"bottom-left":E=P;break;case"left":E=m;break;case"right":E=-m}return[E,I]}(c,s[0])}function Jk(c,s,h){var m;const E=c.layout,I=(m=E.get("text-variable-anchor-offset"))===null||m===void 0?void 0:m.evaluate(s,{},h);if(I){const F=I.values,$=[];for(let W=0;W<F.length;W+=2){const ne=$[W]=F[W],ie=F[W+1].map(fe=>fe*fo);ne.startsWith("top")?ie[1]-=Yd:ne.startsWith("bottom")&&(ie[1]+=Yd),$[W+1]=ie}return new gs($)}const P=E.get("text-variable-anchor");if(P){let F;F=c._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[E.get("text-radial-offset").evaluate(s,{},h)*fo,jT]:E.get("text-offset").evaluate(s,{},h).map(W=>W*fo);const $=[];for(const W of P)$.push(W,Yk(W,F));return new gs($)}return null}function $T(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function m7(c,s,h,m,E,I,P,F,$,W,ne){let ie=I.textMaxSize.evaluate(s,{});ie===void 0&&(ie=P);const fe=c.layers[0].layout,de=fe.get("icon-offset").evaluate(s,{},ne),_e=eR(h.horizontal),Te=P/24,Re=c.tilePixelRatio*Te,Ue=c.tilePixelRatio*ie/24,tt=c.tilePixelRatio*F,Ze=c.tilePixelRatio*fe.get("symbol-spacing"),Ye=fe.get("text-padding")*c.tilePixelRatio,yt=function(Ot,mn,un,Zn=1){const ei=Ot.get("icon-padding").evaluate(mn,{},un),li=ei&&ei.values;return[li[0]*Zn,li[1]*Zn,li[2]*Zn,li[3]*Zn]}(fe,s,ne,c.tilePixelRatio),wt=fe.get("text-max-angle")/180*Math.PI,Xt=fe.get("text-rotation-alignment")!=="viewport"&&fe.get("symbol-placement")!=="point",ln=fe.get("icon-rotation-alignment")==="map"&&fe.get("symbol-placement")!=="point",Wt=fe.get("symbol-placement"),Ht=Ze/2,Nt=fe.get("icon-text-fit");let nn;m&&Nt!=="none"&&(c.allowVerticalPlacement&&h.vertical&&(nn=Ek(m,h.vertical,Nt,fe.get("icon-text-fit-padding"),de,Te)),_e&&(m=Ek(m,_e,Nt,fe.get("icon-text-fit-padding"),de,Te)));const Ut=(Ot,mn)=>{mn.x<0||mn.x>=Mi||mn.y<0||mn.y>=Mi||function(un,Zn,ei,li,po,Xa,Ks,no,Bo,Yo,Xs,Ys,mo,go,Ts,Js,Cs,_a,va,yo,Jn,Is,Jo,_o,gu){const yc=un.addToLineVertexArray(Zn,ei);let _c,Ff,yu,Sl,xa=0,Bf=0,Wv=0,iR=0,KT=-1,XT=-1;const jf={};let oR=wi("");if(un.allowVerticalPlacement&&li.vertical){const Ps=no.layout.get("text-rotate").evaluate(Jn,{},_o)+90;yu=new Xx(Bo,Zn,Yo,Xs,Ys,li.vertical,mo,go,Ts,Ps),Ks&&(Sl=new Xx(Bo,Zn,Yo,Xs,Ys,Ks,Cs,_a,Ts,Ps))}if(po){const Ps=no.layout.get("icon-rotate").evaluate(Jn,{}),Tl=no.layout.get("icon-text-fit")!=="none",Mm=Kk(po,Ps,Jo,Tl),xc=Ks?Kk(Ks,Ps,Jo,Tl):void 0;Ff=new Xx(Bo,Zn,Yo,Xs,Ys,po,Cs,_a,!1,Ps),xa=4*Mm.length;const Nm=un.iconSizeData;let Ih=null;Nm.kind==="source"?(Ih=[Ch*no.layout.get("icon-size").evaluate(Jn,{})],Ih[0]>Wd&&ue(`${un.layerIds[0]}: Value for "icon-size" is >= ${Vv}. Reduce your "icon-size".`)):Nm.kind==="composite"&&(Ih=[Ch*Is.compositeIconSizes[0].evaluate(Jn,{},_o),Ch*Is.compositeIconSizes[1].evaluate(Jn,{},_o)],(Ih[0]>Wd||Ih[1]>Wd)&&ue(`${un.layerIds[0]}: Value for "icon-size" is >= ${Vv}. Reduce your "icon-size".`)),un.addSymbols(un.icon,Mm,Ih,yo,va,Jn,u.ah.none,Zn,yc.lineStartIndex,yc.lineLength,-1,_o),KT=un.icon.placedSymbolArray.length-1,xc&&(Bf=4*xc.length,un.addSymbols(un.icon,xc,Ih,yo,va,Jn,u.ah.vertical,Zn,yc.lineStartIndex,yc.lineLength,-1,_o),XT=un.icon.placedSymbolArray.length-1)}const sR=Object.keys(li.horizontal);for(const Ps of sR){const Tl=li.horizontal[Ps];if(!_c){oR=wi(Tl.text);const xc=no.layout.get("text-rotate").evaluate(Jn,{},_o);_c=new Xx(Bo,Zn,Yo,Xs,Ys,Tl,mo,go,Ts,xc)}const Mm=Tl.positionedLines.length===1;if(Wv+=Qk(un,Zn,Tl,Xa,no,Ts,Jn,Js,yc,li.vertical?u.ah.horizontal:u.ah.horizontalOnly,Mm?sR:[Ps],jf,KT,Is,_o),Mm)break}li.vertical&&(iR+=Qk(un,Zn,li.vertical,Xa,no,Ts,Jn,Js,yc,u.ah.vertical,["vertical"],jf,XT,Is,_o));const _7=_c?_c.boxStartIndex:un.collisionBoxArray.length,v7=_c?_c.boxEndIndex:un.collisionBoxArray.length,x7=yu?yu.boxStartIndex:un.collisionBoxArray.length,b7=yu?yu.boxEndIndex:un.collisionBoxArray.length,w7=Ff?Ff.boxStartIndex:un.collisionBoxArray.length,E7=Ff?Ff.boxEndIndex:un.collisionBoxArray.length,S7=Sl?Sl.boxStartIndex:un.collisionBoxArray.length,T7=Sl?Sl.boxEndIndex:un.collisionBoxArray.length;let vc=-1;const Jx=(Ps,Tl)=>Ps&&Ps.circleDiameter?Math.max(Ps.circleDiameter,Tl):Tl;vc=Jx(_c,vc),vc=Jx(yu,vc),vc=Jx(Ff,vc),vc=Jx(Sl,vc);const aR=vc>-1?1:0;aR&&(vc*=gu/fo),un.glyphOffsetArray.length>=_y.MAX_GLYPHS&&ue("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Jn.sortKey!==void 0&&un.addToSortKeyRanges(un.symbolInstances.length,Jn.sortKey);const C7=Jk(no,Jn,_o),[I7,P7]=function(Ps,Tl){const Mm=Ps.length,xc=Tl==null?void 0:Tl.values;if((xc==null?void 0:xc.length)>0)for(let Nm=0;Nm<xc.length;Nm+=2){const Ih=xc[Nm+1];Ps.emplaceBack(u.ap[xc[Nm]],Ih[0],Ih[1])}return[Mm,Ps.length]}(un.textAnchorOffsets,C7);un.symbolInstances.emplaceBack(Zn.x,Zn.y,jf.right>=0?jf.right:-1,jf.center>=0?jf.center:-1,jf.left>=0?jf.left:-1,jf.vertical||-1,KT,XT,oR,_7,v7,x7,b7,w7,E7,S7,T7,Yo,Wv,iR,xa,Bf,aR,0,mo,vc,I7,P7)}(c,mn,Ot,h,m,E,nn,c.layers[0],c.collisionBoxArray,s.index,s.sourceLayerIndex,c.index,Re,[Ye,Ye,Ye,Ye],Xt,$,tt,yt,ln,de,s,I,W,ne,P)};if(Wt==="line")for(const Ot of qk(s.geometry,0,0,Mi,Mi)){const mn=c7(Ot,Ze,wt,h.vertical||_e,m,24,Ue,c.overscaling,Mi);for(const un of mn)_e&&g7(c,_e.text,Ht,un)||Ut(Ot,un)}else if(Wt==="line-center"){for(const Ot of s.geometry)if(Ot.length>1){const mn=u7(Ot,wt,h.vertical||_e,m,24,Ue);mn&&Ut(Ot,mn)}}else if(s.type==="Polygon")for(const Ot of vT(s.geometry,0)){const mn=d7(Ot,16);Ut(Ot[0],new Xd(mn.x,mn.y,0))}else if(s.type==="LineString")for(const Ot of s.geometry)Ut(Ot,new Xd(Ot[0].x,Ot[0].y,0));else if(s.type==="Point")for(const Ot of s.geometry)for(const mn of Ot)Ut([mn],new Xd(mn.x,mn.y,0))}function Qk(c,s,h,m,E,I,P,F,$,W,ne,ie,fe,de,_e){const Te=function(tt,Ze,Ye,yt,wt,Xt,ln,Wt){const Ht=yt.layout.get("text-rotate").evaluate(Xt,{})*Math.PI/180,Nt=[];for(const nn of Ze.positionedLines)for(const Ut of nn.positionedGlyphs){if(!Ut.rect)continue;const Ot=Ut.rect||{};let mn=gk+1,un=!0,Zn=1,ei=0;const li=(wt||Wt)&&Ut.vertical,po=Ut.metrics.advance*Ut.scale/2;if(Wt&&Ze.verticalizable&&(ei=nn.lineOffset/2-(Ut.imageName?-(fo-Ut.metrics.width*Ut.scale)/2:(Ut.scale-1)*fo)),Ut.imageName){const yo=ln[Ut.imageName];un=yo.sdf,Zn=yo.pixelRatio,mn=ya/Zn}const Xa=wt?[Ut.x+po,Ut.y]:[0,0];let Ks=wt?[0,0]:[Ut.x+po+Ye[0],Ut.y+Ye[1]-ei],no=[0,0];li&&(no=Ks,Ks=[0,0]);const Bo=Ut.metrics.isDoubleResolution?2:1,Yo=(Ut.metrics.left-mn)*Ut.scale-po+Ks[0],Xs=(-Ut.metrics.top-mn)*Ut.scale+Ks[1],Ys=Yo+Ot.w/Bo*Ut.scale/Zn,mo=Xs+Ot.h/Bo*Ut.scale/Zn,go=new y(Yo,Xs),Ts=new y(Ys,Xs),Js=new y(Yo,mo),Cs=new y(Ys,mo);if(li){const yo=new y(-po,po-Uv),Jn=-Math.PI/2,Is=fo/2-po,Jo=new y(5-Uv-Is,-(Ut.imageName?Is:0)),_o=new y(...no);go._rotateAround(Jn,yo)._add(Jo)._add(_o),Ts._rotateAround(Jn,yo)._add(Jo)._add(_o),Js._rotateAround(Jn,yo)._add(Jo)._add(_o),Cs._rotateAround(Jn,yo)._add(Jo)._add(_o)}if(Ht){const yo=Math.sin(Ht),Jn=Math.cos(Ht),Is=[Jn,-yo,yo,Jn];go._matMult(Is),Ts._matMult(Is),Js._matMult(Is),Cs._matMult(Is)}const _a=new y(0,0),va=new y(0,0);Nt.push({tl:go,tr:Ts,bl:Js,br:Cs,tex:Ot,writingMode:Ze.writingMode,glyphOffset:Xa,sectionIndex:Ut.sectionIndex,isSDF:un,pixelOffsetTL:_a,pixelOffsetBR:va,minFontScaleX:0,minFontScaleY:0})}return Nt}(0,h,F,E,I,P,m,c.allowVerticalPlacement),Re=c.textSizeData;let Ue=null;Re.kind==="source"?(Ue=[Ch*E.layout.get("text-size").evaluate(P,{})],Ue[0]>Wd&&ue(`${c.layerIds[0]}: Value for "text-size" is >= ${Vv}. Reduce your "text-size".`)):Re.kind==="composite"&&(Ue=[Ch*de.compositeTextSizes[0].evaluate(P,{},_e),Ch*de.compositeTextSizes[1].evaluate(P,{},_e)],(Ue[0]>Wd||Ue[1]>Wd)&&ue(`${c.layerIds[0]}: Value for "text-size" is >= ${Vv}. Reduce your "text-size".`)),c.addSymbols(c.text,Te,Ue,F,I,P,W,s,$.lineStartIndex,$.lineLength,fe,_e);for(const tt of ne)ie[tt]=c.text.placedSymbolArray.length-1;return 4*Te.length}function eR(c){for(const s in c)return c[s];return null}function g7(c,s,h,m){const E=c.compareText;if(s in E){const I=E[s];for(let P=I.length-1;P>=0;P--)if(m.dist(I[P])<h)return!0}else E[s]=[];return E[s].push(m),!1}const tR=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class UT{static from(s){if(!(s instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[h,m]=new Uint8Array(s,0,2);if(h!==219)throw new Error("Data does not appear to be in a KDBush format.");const E=m>>4;if(E!==1)throw new Error(`Got v${E} data when expected v1.`);const I=tR[15&m];if(!I)throw new Error("Unrecognized array type.");const[P]=new Uint16Array(s,2,1),[F]=new Uint32Array(s,4,1);return new UT(F,P,I,s)}constructor(s,h=64,m=Float64Array,E){if(isNaN(s)||s<0)throw new Error(`Unpexpected numItems value: ${s}.`);this.numItems=+s,this.nodeSize=Math.min(Math.max(+h,2),65535),this.ArrayType=m,this.IndexArrayType=s<65536?Uint16Array:Uint32Array;const I=tR.indexOf(this.ArrayType),P=2*s*this.ArrayType.BYTES_PER_ELEMENT,F=s*this.IndexArrayType.BYTES_PER_ELEMENT,$=(8-F%8)%8;if(I<0)throw new Error(`Unexpected typed array class: ${m}.`);E&&E instanceof ArrayBuffer?(this.data=E,this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+F+$,2*s),this._pos=2*s,this._finished=!0):(this.data=new ArrayBuffer(8+P+F+$),this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+F+$,2*s),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+I]),new Uint16Array(this.data,2,1)[0]=h,new Uint32Array(this.data,4,1)[0]=s)}add(s,h){const m=this._pos>>1;return this.ids[m]=m,this.coords[this._pos++]=s,this.coords[this._pos++]=h,m}finish(){const s=this._pos>>1;if(s!==this.numItems)throw new Error(`Added ${s} items when expected ${this.numItems}.`);return qT(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(s,h,m,E){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:I,coords:P,nodeSize:F}=this,$=[0,I.length-1,0],W=[];for(;$.length;){const ne=$.pop()||0,ie=$.pop()||0,fe=$.pop()||0;if(ie-fe<=F){for(let Re=fe;Re<=ie;Re++){const Ue=P[2*Re],tt=P[2*Re+1];Ue>=s&&Ue<=m&&tt>=h&&tt<=E&&W.push(I[Re])}continue}const de=fe+ie>>1,_e=P[2*de],Te=P[2*de+1];_e>=s&&_e<=m&&Te>=h&&Te<=E&&W.push(I[de]),(ne===0?s<=_e:h<=Te)&&($.push(fe),$.push(de-1),$.push(1-ne)),(ne===0?m>=_e:E>=Te)&&($.push(de+1),$.push(ie),$.push(1-ne))}return W}within(s,h,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:E,coords:I,nodeSize:P}=this,F=[0,E.length-1,0],$=[],W=m*m;for(;F.length;){const ne=F.pop()||0,ie=F.pop()||0,fe=F.pop()||0;if(ie-fe<=P){for(let Re=fe;Re<=ie;Re++)rR(I[2*Re],I[2*Re+1],s,h)<=W&&$.push(E[Re]);continue}const de=fe+ie>>1,_e=I[2*de],Te=I[2*de+1];rR(_e,Te,s,h)<=W&&$.push(E[de]),(ne===0?s-m<=_e:h-m<=Te)&&(F.push(fe),F.push(de-1),F.push(1-ne)),(ne===0?s+m>=_e:h+m>=Te)&&(F.push(de+1),F.push(ie),F.push(1-ne))}return $}}function qT(c,s,h,m,E,I){if(E-m<=h)return;const P=m+E>>1;nR(c,s,P,m,E,I),qT(c,s,h,m,P-1,1-I),qT(c,s,h,P+1,E,1-I)}function nR(c,s,h,m,E,I){for(;E>m;){if(E-m>600){const W=E-m+1,ne=h-m+1,ie=Math.log(W),fe=.5*Math.exp(2*ie/3),de=.5*Math.sqrt(ie*fe*(W-fe)/W)*(ne-W/2<0?-1:1);nR(c,s,h,Math.max(m,Math.floor(h-ne*fe/W+de)),Math.min(E,Math.floor(h+(W-ne)*fe/W+de)),I)}const P=s[2*h+I];let F=m,$=E;for(Hv(c,s,m,h),s[2*E+I]>P&&Hv(c,s,m,E);F<$;){for(Hv(c,s,F,$),F++,$--;s[2*F+I]<P;)F++;for(;s[2*$+I]>P;)$--}s[2*m+I]===P?Hv(c,s,m,$):($++,Hv(c,s,$,E)),$<=h&&(m=$+1),h<=$&&(E=$-1)}}function Hv(c,s,h,m){VT(c,h,m),VT(s,2*h,2*m),VT(s,2*h+1,2*m+1)}function VT(c,s,h){const m=c[s];c[s]=c[h],c[h]=m}function rR(c,s,h,m){const E=c-h,I=s-m;return E*E+I*I}var GT;u.bd=void 0,(GT=u.bd||(u.bd={})).create="create",GT.load="load",GT.fullLoad="fullLoad";let Yx=null,Zv=[];const HT=1e3/60,ZT="loadTime",WT="fullLoadTime",y7={mark(c){performance.mark(c)},frame(c){const s=c;Yx!=null&&Zv.push(s-Yx),Yx=s},clearMetrics(){Yx=null,Zv=[],performance.clearMeasures(ZT),performance.clearMeasures(WT);for(const c in u.bd)performance.clearMarks(u.bd[c])},getPerformanceMetrics(){performance.measure(ZT,u.bd.create,u.bd.load),performance.measure(WT,u.bd.create,u.bd.fullLoad);const c=performance.getEntriesByName(ZT)[0].duration,s=performance.getEntriesByName(WT)[0].duration,h=Zv.length,m=1/(Zv.reduce((I,P)=>I+P,0)/h/1e3),E=Zv.filter(I=>I>HT).reduce((I,P)=>I+(P-HT)/HT,0);return{loadTime:c,fullLoadTime:s,fps:m,percentDroppedFrames:E/(h+E)*100,totalFrames:h}}};u.$=zt,u.A=fy,u.B=function(c){if(Be==null){const s=c.navigator?c.navigator.userAgent:null;Be=!!c.safari||!(!s||!(/\b(iPad|iPhone|iPod)\b/.test(s)||s.match("Safari")&&!s.match("Chrome")))}return Be},u.C=class{constructor(c,s){this.target=c,this.mapId=s,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new a7(()=>this.process()),this.subscription=function(h,m,E,I){return h.addEventListener(m,E,!1),{unsubscribe:()=>{h.removeEventListener(m,E,!1)}}}(this.target,"message",h=>this.receive(h)),this.globalScope=Ne(self)?c:window}registerMessageHandler(c,s){this.messageHandlers[c]=s}sendAsync(c,s){return new Promise((h,m)=>{const E=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[E]={resolve:h,reject:m},s&&s.signal.addEventListener("abort",()=>{delete this.resolveRejects[E];const F={id:E,type:"<cancel>",origin:location.origin,targetMapId:c.targetMapId,sourceMapId:this.mapId};this.target.postMessage(F)},{once:!0});const I=[],P=Object.assign(Object.assign({},c),{id:E,sourceMapId:this.mapId,origin:location.origin,data:Za(c.data,I)});this.target.postMessage(P,{transfer:I})})}receive(c){const s=c.data,h=s.id;if(!(s.origin!=="file://"&&location.origin!=="file://"&&s.origin!==location.origin||s.targetMapId&&this.mapId!==s.targetMapId)){if(s.type==="<cancel>"){delete this.tasks[h];const m=this.abortControllers[h];return delete this.abortControllers[h],void(m&&m.abort())}if(Ne(self)||s.mustQueue)return this.tasks[h]=s,this.taskQueue.push(h),void this.invoker.trigger();this.processTask(h,s)}}process(){if(this.taskQueue.length===0)return;const c=this.taskQueue.shift(),s=this.tasks[c];delete this.tasks[c],this.taskQueue.length>0&&this.invoker.trigger(),s&&this.processTask(c,s)}processTask(c,s){return l(this,void 0,void 0,function*(){if(s.type==="<response>"){const E=this.resolveRejects[c];return delete this.resolveRejects[c],E?void(s.error?E.reject(vh(s.error)):E.resolve(vh(s.data))):void 0}if(!this.messageHandlers[s.type])return void this.completeTask(c,new Error(`Could not find a registered handler for ${s.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const h=vh(s.data),m=new AbortController;this.abortControllers[c]=m;try{const E=yield this.messageHandlers[s.type](s.sourceMapId,h,m);this.completeTask(c,null,E)}catch(E){this.completeTask(c,E)}})}completeTask(c,s,h){const m=[];delete this.abortControllers[c];const E={id:c,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:s?Za(s):null,data:Za(h,m)};this.target.postMessage(E,{transfer:m})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},u.D=Ce,u.E=Tr,u.F=function(){var c=new fy(16);return fy!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},u.G=He,u.H=function(c,s,h){var m,E,I,P,F,$,W,ne,ie,fe,de,_e,Te=h[0],Re=h[1],Ue=h[2];return s===c?(c[12]=s[0]*Te+s[4]*Re+s[8]*Ue+s[12],c[13]=s[1]*Te+s[5]*Re+s[9]*Ue+s[13],c[14]=s[2]*Te+s[6]*Re+s[10]*Ue+s[14],c[15]=s[3]*Te+s[7]*Re+s[11]*Ue+s[15]):(E=s[1],I=s[2],P=s[3],F=s[4],$=s[5],W=s[6],ne=s[7],ie=s[8],fe=s[9],de=s[10],_e=s[11],c[0]=m=s[0],c[1]=E,c[2]=I,c[3]=P,c[4]=F,c[5]=$,c[6]=W,c[7]=ne,c[8]=ie,c[9]=fe,c[10]=de,c[11]=_e,c[12]=m*Te+F*Re+ie*Ue+s[12],c[13]=E*Te+$*Re+fe*Ue+s[13],c[14]=I*Te+W*Re+de*Ue+s[14],c[15]=P*Te+ne*Re+_e*Ue+s[15]),c},u.I=LT,u.J=function(c,s,h){var m=h[0],E=h[1],I=h[2];return c[0]=s[0]*m,c[1]=s[1]*m,c[2]=s[2]*m,c[3]=s[3]*m,c[4]=s[4]*E,c[5]=s[5]*E,c[6]=s[6]*E,c[7]=s[7]*E,c[8]=s[8]*I,c[9]=s[9]*I,c[10]=s[10]*I,c[11]=s[11]*I,c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15],c},u.K=zO,u.L=function(c,s){const h={};for(let m=0;m<s.length;m++){const E=s[m];E in c&&(h[E]=c[E])}return h},u.M=Kd,u.N=kk,u.O=Rk,u.P=y,u.Q=El,u.R=wl,u.S=k,u.T=f,u.U=R,u.V=ve,u.W=Mi,u.X=$r,u.Y=Hx,u.Z=class extends Ud{},u._=l,u.a=$e,u.a$=function(c,s,h){return c[0]=s[0]*h[0],c[1]=s[1]*h[1],c[2]=s[2]*h[2],c[3]=s[3]*h[3],c},u.a0=BT,u.a1=bt,u.a2=c=>{const s=window.document.createElement("video");return s.muted=!0,new Promise(h=>{s.onloadstart=()=>{h(s)};for(const m of c){const E=window.document.createElement("source");Dt(m)||(s.crossOrigin="Anonymous"),E.src=m,s.appendChild(E)}})},u.a3=function(){return H++},u.a4=S,u.a5=_y,u.a6=Fd,u.a7=Df,u.a8=jr,u.a9=Bk,u.aA=X,u.aB=function(c,s){if(!c)return[{command:"setStyle",args:[s]}];let h=[];try{if(!_t(c.version,s.version))return[{command:"setStyle",args:[s]}];_t(c.center,s.center)||h.push({command:"setCenter",args:[s.center]}),_t(c.zoom,s.zoom)||h.push({command:"setZoom",args:[s.zoom]}),_t(c.bearing,s.bearing)||h.push({command:"setBearing",args:[s.bearing]}),_t(c.pitch,s.pitch)||h.push({command:"setPitch",args:[s.pitch]}),_t(c.sprite,s.sprite)||h.push({command:"setSprite",args:[s.sprite]}),_t(c.glyphs,s.glyphs)||h.push({command:"setGlyphs",args:[s.glyphs]}),_t(c.transition,s.transition)||h.push({command:"setTransition",args:[s.transition]}),_t(c.light,s.light)||h.push({command:"setLight",args:[s.light]}),_t(c.terrain,s.terrain)||h.push({command:"setTerrain",args:[s.terrain]}),_t(c.sky,s.sky)||h.push({command:"setSky",args:[s.sky]});const m={},E=[];(function(P,F,$,W){let ne;for(ne in F=F||{},P=P||{})Object.prototype.hasOwnProperty.call(P,ne)&&(Object.prototype.hasOwnProperty.call(F,ne)||vt(ne,$,W));for(ne in F)Object.prototype.hasOwnProperty.call(F,ne)&&(Object.prototype.hasOwnProperty.call(P,ne)?_t(P[ne],F[ne])||(P[ne].type==="geojson"&&F[ne].type==="geojson"&&Lt(P,F,ne)?Pt($,{command:"setGeoJSONSourceData",args:[ne,F[ne].data]}):St(ne,F,$,W)):je(ne,F,$))})(c.sources,s.sources,E,m);const I=[];c.layers&&c.layers.forEach(P=>{"source"in P&&m[P.source]?h.push({command:"removeLayer",args:[P.id]}):I.push(P)}),h=h.concat(E),function(P,F,$){F=F||[];const W=(P=P||[]).map(wn),ne=F.map(wn),ie=P.reduce(gn,{}),fe=F.reduce(gn,{}),de=W.slice(),_e=Object.create(null);let Te,Re,Ue,tt,Ze;for(let Ye=0,yt=0;Ye<W.length;Ye++)Te=W[Ye],Object.prototype.hasOwnProperty.call(fe,Te)?yt++:(Pt($,{command:"removeLayer",args:[Te]}),de.splice(de.indexOf(Te,yt),1));for(let Ye=0,yt=0;Ye<ne.length;Ye++)Te=ne[ne.length-1-Ye],de[de.length-1-Ye]!==Te&&(Object.prototype.hasOwnProperty.call(ie,Te)?(Pt($,{command:"removeLayer",args:[Te]}),de.splice(de.lastIndexOf(Te,de.length-yt),1)):yt++,tt=de[de.length-Ye],Pt($,{command:"addLayer",args:[fe[Te],tt]}),de.splice(de.length-Ye,0,Te),_e[Te]=!0);for(let Ye=0;Ye<ne.length;Ye++)if(Te=ne[Ye],Re=ie[Te],Ue=fe[Te],!_e[Te]&&!_t(Re,Ue))if(_t(Re.source,Ue.source)&&_t(Re["source-layer"],Ue["source-layer"])&&_t(Re.type,Ue.type)){for(Ze in en(Re.layout,Ue.layout,$,Te,null,"setLayoutProperty"),en(Re.paint,Ue.paint,$,Te,null,"setPaintProperty"),_t(Re.filter,Ue.filter)||Pt($,{command:"setFilter",args:[Te,Ue.filter]}),_t(Re.minzoom,Ue.minzoom)&&_t(Re.maxzoom,Ue.maxzoom)||Pt($,{command:"setLayerZoomRange",args:[Te,Ue.minzoom,Ue.maxzoom]}),Re)Object.prototype.hasOwnProperty.call(Re,Ze)&&Ze!=="layout"&&Ze!=="paint"&&Ze!=="filter"&&Ze!=="metadata"&&Ze!=="minzoom"&&Ze!=="maxzoom"&&(Ze.indexOf("paint.")===0?en(Re[Ze],Ue[Ze],$,Te,Ze.slice(6),"setPaintProperty"):_t(Re[Ze],Ue[Ze])||Pt($,{command:"setLayerProperty",args:[Te,Ze,Ue[Ze]]}));for(Ze in Ue)Object.prototype.hasOwnProperty.call(Ue,Ze)&&!Object.prototype.hasOwnProperty.call(Re,Ze)&&Ze!=="layout"&&Ze!=="paint"&&Ze!=="filter"&&Ze!=="metadata"&&Ze!=="minzoom"&&Ze!=="maxzoom"&&(Ze.indexOf("paint.")===0?en(Re[Ze],Ue[Ze],$,Te,Ze.slice(6),"setPaintProperty"):_t(Re[Ze],Ue[Ze])||Pt($,{command:"setLayerProperty",args:[Te,Ze,Ue[Ze]]}))}else Pt($,{command:"removeLayer",args:[Te]}),tt=de[de.lastIndexOf(Te)+1],Pt($,{command:"addLayer",args:[Ue,tt]})}(I,s.layers,h)}catch(m){console.warn("Unable to compute style diff:",m),h=[{command:"setStyle",args:[s]}]}return h},u.aC=function(c){const s=[],h=c.id;return h===void 0&&s.push({message:`layers.${h}: missing required property "id"`}),c.render===void 0&&s.push({message:`layers.${h}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&s.push({message:`layers.${h}: property "renderingMode" must be either "2d" or "3d"`}),s},u.aD=function c(s,h){if(Array.isArray(s)){if(!Array.isArray(h)||s.length!==h.length)return!1;for(let m=0;m<s.length;m++)if(!c(s[m],h[m]))return!1;return!0}if(typeof s=="object"&&s!==null&&h!==null){if(typeof h!="object"||Object.keys(s).length!==Object.keys(h).length)return!1;for(const m in s)if(!c(s[m],h[m]))return!1;return!0}return s===h},u.aE=J,u.aF=Y,u.aG=class extends ho{constructor(c,s){super(c,s),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))}},u.aH=ga,u.aI=class extends ho{constructor(c,s){super(c,s),this.current=km}set(c){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(let s=1;s<16;s++)if(c[s]!==this.current[s]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}}},u.aJ=pu,u.aK=class extends ho{constructor(c,s){super(c,s),this.current=[0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2]))}},u.aL=class extends ho{constructor(c,s){super(c,s),this.current=[0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1]))}},u.aM=Eh,u.aN=function(c,s,h,m,E,I,P){var F=1/(s-h),$=1/(m-E),W=1/(I-P);return c[0]=-2*F,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*$,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*W,c[11]=0,c[12]=(s+h)*F,c[13]=(E+m)*$,c[14]=(P+I)*W,c[15]=1,c},u.aO=or,u.aP=$8,u.aQ=class extends Vd{},u.aR=NU,u.aS=class extends oy{},u.aT=function(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))},u.aU=UO,u.aV=le,u.aW=class extends Cv{},u.aX=mt,u.aY=function(c,s){return c[0]===s[0]&&c[1]===s[1]&&c[2]===s[2]&&c[3]===s[3]&&c[4]===s[4]&&c[5]===s[5]&&c[6]===s[6]&&c[7]===s[7]&&c[8]===s[8]&&c[9]===s[9]&&c[10]===s[10]&&c[11]===s[11]&&c[12]===s[12]&&c[13]===s[13]&&c[14]===s[14]&&c[15]===s[15]},u.aZ=function(c,s){var h=c[0],m=c[1],E=c[2],I=c[3],P=c[4],F=c[5],$=c[6],W=c[7],ne=c[8],ie=c[9],fe=c[10],de=c[11],_e=c[12],Te=c[13],Re=c[14],Ue=c[15],tt=s[0],Ze=s[1],Ye=s[2],yt=s[3],wt=s[4],Xt=s[5],ln=s[6],Wt=s[7],Ht=s[8],Nt=s[9],nn=s[10],Ut=s[11],Ot=s[12],mn=s[13],un=s[14],Zn=s[15];return Math.abs(h-tt)<=Ws*Math.max(1,Math.abs(h),Math.abs(tt))&&Math.abs(m-Ze)<=Ws*Math.max(1,Math.abs(m),Math.abs(Ze))&&Math.abs(E-Ye)<=Ws*Math.max(1,Math.abs(E),Math.abs(Ye))&&Math.abs(I-yt)<=Ws*Math.max(1,Math.abs(I),Math.abs(yt))&&Math.abs(P-wt)<=Ws*Math.max(1,Math.abs(P),Math.abs(wt))&&Math.abs(F-Xt)<=Ws*Math.max(1,Math.abs(F),Math.abs(Xt))&&Math.abs($-ln)<=Ws*Math.max(1,Math.abs($),Math.abs(ln))&&Math.abs(W-Wt)<=Ws*Math.max(1,Math.abs(W),Math.abs(Wt))&&Math.abs(ne-Ht)<=Ws*Math.max(1,Math.abs(ne),Math.abs(Ht))&&Math.abs(ie-Nt)<=Ws*Math.max(1,Math.abs(ie),Math.abs(Nt))&&Math.abs(fe-nn)<=Ws*Math.max(1,Math.abs(fe),Math.abs(nn))&&Math.abs(de-Ut)<=Ws*Math.max(1,Math.abs(de),Math.abs(Ut))&&Math.abs(_e-Ot)<=Ws*Math.max(1,Math.abs(_e),Math.abs(Ot))&&Math.abs(Te-mn)<=Ws*Math.max(1,Math.abs(Te),Math.abs(mn))&&Math.abs(Re-un)<=Ws*Math.max(1,Math.abs(Re),Math.abs(un))&&Math.abs(Ue-Zn)<=Ws*Math.max(1,Math.abs(Ue),Math.abs(Zn))},u.a_=function(c,s){return c[0]=s[0],c[1]=s[1],c[2]=s[2],c[3]=s[3],c[4]=s[4],c[5]=s[5],c[6]=s[6],c[7]=s[7],c[8]=s[8],c[9]=s[9],c[10]=s[10],c[11]=s[11],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15],c},u.aa=function(c){const s={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(h,m,E,I)=>{const P=E||I;return s[m]=!P||P.toLowerCase(),""}),s["max-age"]){const h=parseInt(s["max-age"],10);isNaN(h)?delete s["max-age"]:s["max-age"]=h}return s},u.ab=function(c,s){const h=[];for(const m in c)m in s||h.push(m);return h},u.ac=U,u.ad=function(c,s,h){var m=Math.sin(h),E=Math.cos(h),I=s[0],P=s[1],F=s[2],$=s[3],W=s[4],ne=s[5],ie=s[6],fe=s[7];return s!==c&&(c[8]=s[8],c[9]=s[9],c[10]=s[10],c[11]=s[11],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15]),c[0]=I*E+W*m,c[1]=P*E+ne*m,c[2]=F*E+ie*m,c[3]=$*E+fe*m,c[4]=W*E-I*m,c[5]=ne*E-P*m,c[6]=ie*E-F*m,c[7]=fe*E-$*m,c},u.ae=function(c){var s=new fy(16);return s[0]=c[0],s[1]=c[1],s[2]=c[2],s[3]=c[3],s[4]=c[4],s[5]=c[5],s[6]=c[6],s[7]=c[7],s[8]=c[8],s[9]=c[9],s[10]=c[10],s[11]=c[11],s[12]=c[12],s[13]=c[13],s[14]=c[14],s[15]=c[15],s},u.af=Nx,u.ag=function(c,s){let h=0,m=0;if(c.kind==="constant")m=c.layoutSize;else if(c.kind!=="source"){const{interpolationType:E,minZoom:I,maxZoom:P}=c,F=E?U(Yi.interpolationFactor(E,s,I,P),0,1):0;c.kind==="camera"?m=Io.number(c.minSize,c.maxSize,F):h=F}return{uSizeT:h,uSize:m}},u.ai=function(c,{uSize:s,uSizeT:h},{lowerSize:m,upperSize:E}){return c.kind==="source"?m/Ch:c.kind==="composite"?Io.number(m/Ch,E/Ch,h):s},u.aj=RT,u.ak=function(c,s,h,m){const E=s.y-c.y,I=s.x-c.x,P=m.y-h.y,F=m.x-h.x,$=P*I-F*E;if($===0)return null;const W=(F*(c.y-h.y)-P*(c.x-h.x))/$;return new y(c.x+W*I,c.y+W*E)},u.al=qk,u.am=Pv,u.an=fT,u.ao=fo,u.aq=kT,u.ar=function(c,s){var h=s[0],m=s[1],E=s[2],I=s[3],P=s[4],F=s[5],$=s[6],W=s[7],ne=s[8],ie=s[9],fe=s[10],de=s[11],_e=s[12],Te=s[13],Re=s[14],Ue=s[15],tt=h*F-m*P,Ze=h*$-E*P,Ye=h*W-I*P,yt=m*$-E*F,wt=m*W-I*F,Xt=E*W-I*$,ln=ne*Te-ie*_e,Wt=ne*Re-fe*_e,Ht=ne*Ue-de*_e,Nt=ie*Re-fe*Te,nn=ie*Ue-de*Te,Ut=fe*Ue-de*Re,Ot=tt*Ut-Ze*nn+Ye*Nt+yt*Ht-wt*Wt+Xt*ln;return Ot?(c[0]=(F*Ut-$*nn+W*Nt)*(Ot=1/Ot),c[1]=(E*nn-m*Ut-I*Nt)*Ot,c[2]=(Te*Xt-Re*wt+Ue*yt)*Ot,c[3]=(fe*wt-ie*Xt-de*yt)*Ot,c[4]=($*Ht-P*Ut-W*Wt)*Ot,c[5]=(h*Ut-E*Ht+I*Wt)*Ot,c[6]=(Re*Ye-_e*Xt-Ue*Ze)*Ot,c[7]=(ne*Xt-fe*Ye+de*Ze)*Ot,c[8]=(P*nn-F*Ht+W*ln)*Ot,c[9]=(m*Ht-h*nn-I*ln)*Ot,c[10]=(_e*wt-Te*Ye+Ue*tt)*Ot,c[11]=(ie*Ye-ne*wt-de*tt)*Ot,c[12]=(F*Wt-P*Nt-$*ln)*Ot,c[13]=(h*Nt-m*Wt+E*ln)*Ot,c[14]=(Te*Ze-_e*yt-Re*tt)*Ot,c[15]=(ne*yt-ie*Ze+fe*tt)*Ot,c):null},u.as=$T,u.at=OT,u.au=UT,u.av=function(){const c={},s=rt.$version;for(const h in rt.$root){const m=rt.$root[h];if(m.required){let E=null;E=h==="version"?s:m.type==="array"?[]:{},E!=null&&(c[h]=E)}}return c},u.aw=Lf,u.ax=ct,u.ay=function(c){c=c.slice();const s=Object.create(null);for(let h=0;h<c.length;h++)s[c[h].id]=c[h];for(let h=0;h<c.length;h++)"ref"in c[h]&&(c[h]=gt(c[h],s[c[h].ref]));return c},u.az=function(c){if(c.type==="custom")return new s7(c);switch(c.type){case"background":return new r7(c);case"circle":return new U8(c);case"fill":return new lU(c);case"fill-extrusion":return new EU(c);case"heatmap":return new V8(c);case"hillshade":return new H8(c);case"line":return new OU(c);case"raster":return new o7(c);case"symbol":return new Gx(c)}},u.b=De,u.b0=function(c,s){return c[0]*s[0]+c[1]*s[1]+c[2]*s[2]+c[3]*s[3]},u.b1=q,u.b2=Dk,u.b3=Mk,u.b4=function(c,s,h,m,E){var I,P=1/Math.tan(s/2);return c[0]=P/h,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=P,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,E!=null&&E!==1/0?(c[10]=(E+m)*(I=1/(m-E)),c[14]=2*E*m*I):(c[10]=-1,c[14]=-2*m),c},u.b5=function(c,s,h){var m=Math.sin(h),E=Math.cos(h),I=s[4],P=s[5],F=s[6],$=s[7],W=s[8],ne=s[9],ie=s[10],fe=s[11];return s!==c&&(c[0]=s[0],c[1]=s[1],c[2]=s[2],c[3]=s[3],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15]),c[4]=I*E+W*m,c[5]=P*E+ne*m,c[6]=F*E+ie*m,c[7]=$*E+fe*m,c[8]=W*E-I*m,c[9]=ne*E-P*m,c[10]=ie*E-F*m,c[11]=fe*E-$*m,c},u.b6=z,u.b7=D,u.b8=function(c){return c*Math.PI/180},u.b9=function(c,s){return c[0]=s[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=s[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=s[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},u.bA=du,u.ba=class extends xl{},u.bb=zT,u.bc=y7,u.be=it,u.bf=function(c,s){$e.REGISTERED_PROTOCOLS[c]=s},u.bg=function(c){delete $e.REGISTERED_PROTOCOLS[c]},u.bh=function(c,s){const h={};for(let E=0;E<c.length;E++){const I=s&&s[c[E].id]||Ev(c[E]);s&&(s[c[E].id]=I);let P=h[I];P||(P=h[I]=[]),P.push(c[E])}const m=[];for(const E in h)m.push(h[E]);return m},u.bi=Jt,u.bj=Fk,u.bk=jk,u.bl=_k,u.bm=function(c){c.bucket.createArrays(),c.bucket.tilePixelRatio=Mi/(512*c.bucket.overscaling),c.bucket.compareText={},c.bucket.iconsNeedLinear=!1;const s=c.bucket.layers[0],h=s.layout,m=s._unevaluatedLayout._values,E={layoutIconSize:m["icon-size"].possiblyEvaluate(new jr(c.bucket.zoom+1),c.canonical),layoutTextSize:m["text-size"].possiblyEvaluate(new jr(c.bucket.zoom+1),c.canonical),textMaxSize:m["text-size"].possiblyEvaluate(new jr(18))};if(c.bucket.textSizeData.kind==="composite"){const{minZoom:W,maxZoom:ne}=c.bucket.textSizeData;E.compositeTextSizes=[m["text-size"].possiblyEvaluate(new jr(W),c.canonical),m["text-size"].possiblyEvaluate(new jr(ne),c.canonical)]}if(c.bucket.iconSizeData.kind==="composite"){const{minZoom:W,maxZoom:ne}=c.bucket.iconSizeData;E.compositeIconSizes=[m["icon-size"].possiblyEvaluate(new jr(W),c.canonical),m["icon-size"].possiblyEvaluate(new jr(ne),c.canonical)]}const I=h.get("text-line-height")*fo,P=h.get("text-rotation-alignment")!=="viewport"&&h.get("symbol-placement")!=="point",F=h.get("text-keep-upright"),$=h.get("text-size");for(const W of c.bucket.features){const ne=h.get("text-font").evaluate(W,{},c.canonical).join(","),ie=$.evaluate(W,{},c.canonical),fe=E.layoutTextSize.evaluate(W,{},c.canonical),de=E.layoutIconSize.evaluate(W,{},c.canonical),_e={horizontal:{},vertical:void 0},Te=W.text;let Re,Ue=[0,0];if(Te){const Ye=Te.toString(),yt=h.get("text-letter-spacing").evaluate(W,{},c.canonical)*fo,wt=Cm(Ye)?yt:0,Xt=h.get("text-anchor").evaluate(W,{},c.canonical),ln=Jk(s,W,c.canonical);if(!ln){const Ut=h.get("text-radial-offset").evaluate(W,{},c.canonical);Ue=Ut?Yk(Xt,[Ut*fo,jT]):h.get("text-offset").evaluate(W,{},c.canonical).map(Ot=>Ot*fo)}let Wt=P?"center":h.get("text-justify").evaluate(W,{},c.canonical);const Ht=h.get("symbol-placement"),Nt=Ht==="point"?h.get("text-max-width").evaluate(W,{},c.canonical)*fo:0,nn=()=>{c.bucket.allowVerticalPlacement&&mc(Ye)&&(_e.vertical=Ux(Te,c.glyphMap,c.glyphPositions,c.imagePositions,ne,Nt,I,Xt,"left",wt,Ue,u.ah.vertical,!0,Ht,fe,ie))};if(!P&&ln){const Ut=new Set;if(Wt==="auto")for(let mn=0;mn<ln.values.length;mn+=2)Ut.add($T(ln.values[mn]));else Ut.add(Wt);let Ot=!1;for(const mn of Ut)if(!_e.horizontal[mn])if(Ot)_e.horizontal[mn]=_e.horizontal[0];else{const un=Ux(Te,c.glyphMap,c.glyphPositions,c.imagePositions,ne,Nt,I,"center",mn,wt,Ue,u.ah.horizontal,!1,Ht,fe,ie);un&&(_e.horizontal[mn]=un,Ot=un.positionedLines.length===1)}nn()}else{Wt==="auto"&&(Wt=$T(Xt));const Ut=Ux(Te,c.glyphMap,c.glyphPositions,c.imagePositions,ne,Nt,I,Xt,Wt,wt,Ue,u.ah.horizontal,!1,Ht,fe,ie);Ut&&(_e.horizontal[Wt]=Ut),nn(),mc(Ye)&&P&&F&&(_e.vertical=Ux(Te,c.glyphMap,c.glyphPositions,c.imagePositions,ne,Nt,I,Xt,Wt,wt,Ue,u.ah.vertical,!1,Ht,fe,ie))}}let tt=!1;if(W.icon&&W.icon.name){const Ye=c.imageMap[W.icon.name];Ye&&(Re=JU(c.imagePositions[W.icon.name],h.get("icon-offset").evaluate(W,{},c.canonical),h.get("icon-anchor").evaluate(W,{},c.canonical)),tt=!!Ye.sdf,c.bucket.sdfIcons===void 0?c.bucket.sdfIcons=tt:c.bucket.sdfIcons!==tt&&ue("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ye.pixelRatio!==c.bucket.pixelRatio||h.get("icon-rotate").constantOr(1)!==0)&&(c.bucket.iconsNeedLinear=!0))}const Ze=eR(_e.horizontal)||_e.vertical;c.bucket.iconsInText=!!Ze&&Ze.iconsInText,(Ze||Re)&&m7(c.bucket,W,_e,Re,c.imageMap,E,fe,de,Ue,tt,c.canonical)}c.showCollisionBoxes&&c.bucket.generateCollisionDebugBuffers()},u.bn=TT,u.bo=wT,u.bp=ST,u.bq=Hd,u.br=IT,u.bs=class{constructor(c){this._marks={start:[c.url,"start"].join("#"),end:[c.url,"end"].join("#"),measure:c.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let c=performance.getEntriesByName(this._marks.measure);return c.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),c=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),c}},u.bt=function(c,s,h,m,E){return l(this,void 0,void 0,function*(){if(R())try{return yield ve(c,s,h,m,E)}catch{}return function(I,P,F,$,W){const ne=I.width,ie=I.height;ce&&xe||(ce=new OffscreenCanvas(ne,ie),xe=ce.getContext("2d",{willReadFrequently:!0})),ce.width=ne,ce.height=ie,xe.drawImage(I,0,0,ne,ie);const fe=xe.getImageData(P,F,$,W);return xe.clearRect(0,0,ne,ie),fe.data}(c,s,h,m,E)})},u.bu=zk,u.bv=p,u.bw=g,u.bx=uk,u.by=cu,u.bz=function(c){return c.message===Ee},u.c=Ge,u.d=c=>l(void 0,void 0,void 0,function*(){if(c.byteLength===0)return createImageBitmap(new ImageData(1,1));const s=new Blob([new Uint8Array(c)],{type:"image/png"});try{return createImageBitmap(s)}catch(h){throw new Error(`Could not load image because of ${h.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),u.e=G,u.f=c=>new Promise((s,h)=>{const m=new Image;m.onload=()=>{s(m),URL.revokeObjectURL(m.src),m.onload=null,window.requestAnimationFrame(()=>{m.src=Ae})},m.onerror=()=>h(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const E=new Blob([new Uint8Array(c)],{type:"image/png"});m.src=c.byteLength?URL.createObjectURL(E):Ae}),u.g=be,u.h=(c,s)=>xt(G(c,{type:"json"}),s),u.i=Ne,u.j=Gt,u.k=Kt,u.l=(c,s)=>xt(G(c,{type:"arrayBuffer"}),s),u.m=xt,u.n=function(c){return new IT(c).readFields(HU,[])},u.o=Mv,u.p=yk,u.q=hn,u.r=Sv,u.s=Dt,u.t=pc,u.u=Vt,u.v=rt,u.w=ue,u.x=pa,u.y=function([c,s,h]){return s+=90,s*=Math.PI/180,h*=Math.PI/180,{x:c*Math.cos(s)*Math.sin(h),y:c*Math.sin(s)*Math.sin(h),z:c*Math.cos(h)}},u.z=Io}),i("worker",["./shared"],function(u){class l{constructor(K){this.keyCache={},K&&this.replace(K)}replace(K){this._layerConfigs={},this._layers={},this.update(K,[])}update(K,te){for(const pe of K){this._layerConfigs[pe.id]=pe;const ke=this._layers[pe.id]=u.az(pe);ke._featureFilter=u.a6(ke.filter),this.keyCache[pe.id]&&delete this.keyCache[pe.id]}for(const pe of te)delete this.keyCache[pe],delete this._layerConfigs[pe],delete this._layers[pe];this.familiesBySource={};const ae=u.bh(Object.values(this._layerConfigs),this.keyCache);for(const pe of ae){const ke=pe.map(ot=>this._layers[ot.id]),ge=ke[0];if(ge.visibility==="none")continue;const ze=ge.source||"";let Ie=this.familiesBySource[ze];Ie||(Ie=this.familiesBySource[ze]={});const Ve=ge.sourceLayer||"_geojsonTileLayer";let Qe=Ie[Ve];Qe||(Qe=Ie[Ve]=[]),Qe.push(ke)}}}class p{constructor(K){const te={},ae=[];for(const ze in K){const Ie=K[ze],Ve=te[ze]={};for(const Qe in Ie){const ot=Ie[+Qe];if(!ot||ot.bitmap.width===0||ot.bitmap.height===0)continue;const et={x:0,y:0,w:ot.bitmap.width+2,h:ot.bitmap.height+2};ae.push(et),Ve[Qe]={rect:et,metrics:ot.metrics}}}const{w:pe,h:ke}=u.p(ae),ge=new u.o({width:pe||1,height:ke||1});for(const ze in K){const Ie=K[ze];for(const Ve in Ie){const Qe=Ie[+Ve];if(!Qe||Qe.bitmap.width===0||Qe.bitmap.height===0)continue;const ot=te[ze][Ve].rect;u.o.copy(Qe.bitmap,ge,{x:0,y:0},{x:ot.x+1,y:ot.y+1},Qe.bitmap)}}this.image=ge,this.positions=te}}u.bi("GlyphAtlas",p);class g{constructor(K){this.tileID=new u.Q(K.tileID.overscaledZ,K.tileID.wrap,K.tileID.canonical.z,K.tileID.canonical.x,K.tileID.canonical.y),this.uid=K.uid,this.zoom=K.zoom,this.pixelRatio=K.pixelRatio,this.tileSize=K.tileSize,this.source=K.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=K.showCollisionBoxes,this.collectResourceTiming=!!K.collectResourceTiming,this.returnDependencies=!!K.returnDependencies,this.promoteId=K.promoteId,this.inFlightDependencies=[]}parse(K,te,ae,pe){return u._(this,void 0,void 0,function*(){this.status="parsing",this.data=K,this.collisionBoxArray=new u.a4;const ke=new u.bj(Object.keys(K.layers).sort()),ge=new u.bk(this.tileID,this.promoteId);ge.bucketLayerIDs=[];const ze={},Ie={featureIndex:ge,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ae},Ve=te.familiesBySource[this.source];for(const vn in Ve){const Nr=K.layers[vn];if(!Nr)continue;Nr.version===1&&u.w(`Vector tile source "${this.source}" layer "${vn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Gr=ke.encode(vn),ji=[];for(let bi=0;bi<Nr.length;bi++){const Yr=Nr.feature(bi),Fn=ge.getId(Yr,vn);ji.push({feature:Yr,id:Fn,index:bi,sourceLayerIndex:Gr})}for(const bi of Ve[vn]){const Yr=bi[0];Yr.source!==this.source&&u.w(`layer.source = ${Yr.source} does not equal this.source = ${this.source}`),Yr.minzoom&&this.zoom<Math.floor(Yr.minzoom)||Yr.maxzoom&&this.zoom>=Yr.maxzoom||Yr.visibility!=="none"&&(x(bi,this.zoom,ae),(ze[Yr.id]=Yr.createBucket({index:ge.bucketLayerIDs.length,layers:bi,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Gr,sourceID:this.source})).populate(ji,Ie,this.tileID.canonical),ge.bucketLayerIDs.push(bi.map(Fn=>Fn.id)))}}const Qe=u.aE(Ie.glyphDependencies,vn=>Object.keys(vn).map(Number));this.inFlightDependencies.forEach(vn=>vn==null?void 0:vn.abort()),this.inFlightDependencies=[];let ot=Promise.resolve({});if(Object.keys(Qe).length){const vn=new AbortController;this.inFlightDependencies.push(vn),ot=pe.sendAsync({type:"GG",data:{stacks:Qe,source:this.source,tileID:this.tileID,type:"glyphs"}},vn)}const et=Object.keys(Ie.iconDependencies);let ht=Promise.resolve({});if(et.length){const vn=new AbortController;this.inFlightDependencies.push(vn),ht=pe.sendAsync({type:"GI",data:{icons:et,source:this.source,tileID:this.tileID,type:"icons"}},vn)}const Zt=Object.keys(Ie.patternDependencies);let an=Promise.resolve({});if(Zt.length){const vn=new AbortController;this.inFlightDependencies.push(vn),an=pe.sendAsync({type:"GI",data:{icons:Zt,source:this.source,tileID:this.tileID,type:"patterns"}},vn)}const[sn,kn,ir]=yield Promise.all([ot,ht,an]),hr=new p(sn),lr=new u.bl(kn,ir);for(const vn in ze){const Nr=ze[vn];Nr instanceof u.a5?(x(Nr.layers,this.zoom,ae),u.bm({bucket:Nr,glyphMap:sn,glyphPositions:hr.positions,imageMap:kn,imagePositions:lr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Nr.hasPattern&&(Nr instanceof u.bn||Nr instanceof u.bo||Nr instanceof u.bp)&&(x(Nr.layers,this.zoom,ae),Nr.addFeatures(Ie,this.tileID.canonical,lr.patternPositions))}return this.status="done",{buckets:Object.values(ze).filter(vn=>!vn.isEmpty()),featureIndex:ge,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:hr.image,imageAtlas:lr,glyphMap:this.returnDependencies?sn:null,iconMap:this.returnDependencies?kn:null,glyphPositions:this.returnDependencies?hr.positions:null}})}}function x(Oe,K,te){const ae=new u.a8(K);for(const pe of Oe)pe.recalculate(ae,te)}class y{constructor(K,te,ae){this.actor=K,this.layerIndex=te,this.availableImages=ae,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(K,te){return u._(this,void 0,void 0,function*(){const ae=yield u.l(K.request,te);try{return{vectorTile:new u.bq.VectorTile(new u.br(ae.data)),rawData:ae.data,cacheControl:ae.cacheControl,expires:ae.expires}}catch(pe){const ke=new Uint8Array(ae.data);let ge=`Unable to parse the tile at ${K.request.url}, `;throw ge+=ke[0]===31&&ke[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${pe.messge}`,new Error(ge)}})}loadTile(K){return u._(this,void 0,void 0,function*(){const te=K.uid,ae=!!(K&&K.request&&K.request.collectResourceTiming)&&new u.bs(K.request),pe=new g(K);this.loading[te]=pe;const ke=new AbortController;pe.abort=ke;try{const ge=yield this.loadVectorTile(K,ke);if(delete this.loading[te],!ge)return null;const ze=ge.rawData,Ie={};ge.expires&&(Ie.expires=ge.expires),ge.cacheControl&&(Ie.cacheControl=ge.cacheControl);const Ve={};if(ae){const ot=ae.finish();ot&&(Ve.resourceTiming=JSON.parse(JSON.stringify(ot)))}pe.vectorTile=ge.vectorTile;const Qe=pe.parse(ge.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[te]=pe,this.fetching[te]={rawTileData:ze,cacheControl:Ie,resourceTiming:Ve};try{const ot=yield Qe;return u.e({rawTileData:ze.slice(0)},ot,Ie,Ve)}finally{delete this.fetching[te]}}catch(ge){throw delete this.loading[te],pe.status="done",this.loaded[te]=pe,ge}})}reloadTile(K){return u._(this,void 0,void 0,function*(){const te=K.uid;if(!this.loaded||!this.loaded[te])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const ae=this.loaded[te];if(ae.showCollisionBoxes=K.showCollisionBoxes,ae.status==="parsing"){const pe=yield ae.parse(ae.vectorTile,this.layerIndex,this.availableImages,this.actor);let ke;if(this.fetching[te]){const{rawTileData:ge,cacheControl:ze,resourceTiming:Ie}=this.fetching[te];delete this.fetching[te],ke=u.e({rawTileData:ge.slice(0)},pe,ze,Ie)}else ke=pe;return ke}if(ae.status==="done"&&ae.vectorTile)return ae.parse(ae.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(K){return u._(this,void 0,void 0,function*(){const te=this.loading,ae=K.uid;te&&te[ae]&&te[ae].abort&&(te[ae].abort.abort(),delete te[ae])})}removeTile(K){return u._(this,void 0,void 0,function*(){this.loaded&&this.loaded[K.uid]&&delete this.loaded[K.uid]})}}class _{constructor(){this.loaded={}}loadTile(K){return u._(this,void 0,void 0,function*(){const{uid:te,encoding:ae,rawImageData:pe,redFactor:ke,greenFactor:ge,blueFactor:ze,baseShift:Ie}=K,Ve=pe.width+2,Qe=pe.height+2,ot=u.b(pe)?new u.R({width:Ve,height:Qe},yield u.bt(pe,-1,-1,Ve,Qe)):pe,et=new u.bu(te,ot,ae,ke,ge,ze,Ie);return this.loaded=this.loaded||{},this.loaded[te]=et,et})}removeTile(K){const te=this.loaded,ae=K.uid;te&&te[ae]&&delete te[ae]}}function T(Oe,K){if(Oe.length!==0){A(Oe[0],K);for(var te=1;te<Oe.length;te++)A(Oe[te],!K)}}function A(Oe,K){for(var te=0,ae=0,pe=0,ke=Oe.length,ge=ke-1;pe<ke;ge=pe++){var ze=(Oe[pe][0]-Oe[ge][0])*(Oe[ge][1]+Oe[pe][1]),Ie=te+ze;ae+=Math.abs(te)>=Math.abs(ze)?te-Ie+ze:ze-Ie+te,te=Ie}te+ae>=0!=!!K&&Oe.reverse()}var O=u.bv(function Oe(K,te){var ae,pe=K&&K.type;if(pe==="FeatureCollection")for(ae=0;ae<K.features.length;ae++)Oe(K.features[ae],te);else if(pe==="GeometryCollection")for(ae=0;ae<K.geometries.length;ae++)Oe(K.geometries[ae],te);else if(pe==="Feature")Oe(K.geometry,te);else if(pe==="Polygon")T(K.coordinates,te);else if(pe==="MultiPolygon")for(ae=0;ae<K.coordinates.length;ae++)T(K.coordinates[ae],te);return K});const N=u.bq.VectorTileFeature.prototype.toGeoJSON;var k={exports:{}},R=u.bw,z=u.bq.VectorTileFeature,D=U;function U(Oe,K){this.options=K||{},this.features=Oe,this.length=Oe.length}function q(Oe,K){this.id=typeof Oe.id=="number"?Oe.id:void 0,this.type=Oe.type,this.rawGeometry=Oe.type===1?[Oe.geometry]:Oe.geometry,this.properties=Oe.tags,this.extent=K||4096}U.prototype.feature=function(Oe){return new q(this.features[Oe],this.options.extent)},q.prototype.loadGeometry=function(){var Oe=this.rawGeometry;this.geometry=[];for(var K=0;K<Oe.length;K++){for(var te=Oe[K],ae=[],pe=0;pe<te.length;pe++)ae.push(new R(te[pe][0],te[pe][1]));this.geometry.push(ae)}return this.geometry},q.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Oe=this.geometry,K=1/0,te=-1/0,ae=1/0,pe=-1/0,ke=0;ke<Oe.length;ke++)for(var ge=Oe[ke],ze=0;ze<ge.length;ze++){var Ie=ge[ze];K=Math.min(K,Ie.x),te=Math.max(te,Ie.x),ae=Math.min(ae,Ie.y),pe=Math.max(pe,Ie.y)}return[K,ae,te,pe]},q.prototype.toGeoJSON=z.prototype.toGeoJSON;var G=u.bx,H=D;function J(Oe){var K=new G;return function(te,ae){for(var pe in te.layers)ae.writeMessage(3,Y,te.layers[pe])}(Oe,K),K.finish()}function Y(Oe,K){var te;K.writeVarintField(15,Oe.version||1),K.writeStringField(1,Oe.name||""),K.writeVarintField(5,Oe.extent||4096);var ae={keys:[],values:[],keycache:{},valuecache:{}};for(te=0;te<Oe.length;te++)ae.feature=Oe.feature(te),K.writeMessage(2,X,ae);var pe=ae.keys;for(te=0;te<pe.length;te++)K.writeStringField(3,pe[te]);var ke=ae.values;for(te=0;te<ke.length;te++)K.writeMessage(4,Ne,ke[te])}function X(Oe,K){var te=Oe.feature;te.id!==void 0&&K.writeVarintField(1,te.id),K.writeMessage(2,ee,Oe),K.writeVarintField(3,te.type),K.writeMessage(4,we,te)}function ee(Oe,K){var te=Oe.feature,ae=Oe.keys,pe=Oe.values,ke=Oe.keycache,ge=Oe.valuecache;for(var ze in te.properties){var Ie=te.properties[ze],Ve=ke[ze];if(Ie!==null){Ve===void 0&&(ae.push(ze),ke[ze]=Ve=ae.length-1),K.writeVarint(Ve);var Qe=typeof Ie;Qe!=="string"&&Qe!=="boolean"&&Qe!=="number"&&(Ie=JSON.stringify(Ie));var ot=Qe+":"+Ie,et=ge[ot];et===void 0&&(pe.push(Ie),ge[ot]=et=pe.length-1),K.writeVarint(et)}}}function ue(Oe,K){return(K<<3)+(7&Oe)}function oe(Oe){return Oe<<1^Oe>>31}function we(Oe,K){for(var te=Oe.loadGeometry(),ae=Oe.type,pe=0,ke=0,ge=te.length,ze=0;ze<ge;ze++){var Ie=te[ze],Ve=1;ae===1&&(Ve=Ie.length),K.writeVarint(ue(1,Ve));for(var Qe=ae===3?Ie.length-1:Ie.length,ot=0;ot<Qe;ot++){ot===1&&ae!==1&&K.writeVarint(ue(2,Qe-1));var et=Ie[ot].x-pe,ht=Ie[ot].y-ke;K.writeVarint(oe(et)),K.writeVarint(oe(ht)),pe+=et,ke+=ht}ae===3&&K.writeVarint(ue(7,1))}}function Ne(Oe,K){var te=typeof Oe;te==="string"?K.writeStringField(1,Oe):te==="boolean"?K.writeBooleanField(7,Oe):te==="number"&&(Oe%1!=0?K.writeDoubleField(3,Oe):Oe<0?K.writeSVarintField(6,Oe):K.writeVarintField(5,Oe))}k.exports=J,k.exports.fromVectorTileJs=J,k.exports.fromGeojsonVt=function(Oe,K){K=K||{};var te={};for(var ae in Oe)te[ae]=new H(Oe[ae].features,K),te[ae].name=ae,te[ae].version=K.version,te[ae].extent=K.extent;return J({layers:te})},k.exports.GeoJSONWrapper=H;var Be=u.bv(k.exports);const De={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Oe=>Oe},Ae=Math.fround||(ve=new Float32Array(1),Oe=>(ve[0]=+Oe,ve[0]));var ve;const ce=3,xe=5,Ee=6;class Ge{constructor(K){this.options=Object.assign(Object.create(De),K),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(K){const{log:te,minZoom:ae,maxZoom:pe}=this.options;te&&console.time("total time");const ke=`prepare ${K.length} points`;te&&console.time(ke),this.points=K;const ge=[];for(let Ie=0;Ie<K.length;Ie++){const Ve=K[Ie];if(!Ve.geometry)continue;const[Qe,ot]=Ve.geometry.coordinates,et=Ae(He(Qe)),ht=Ae(it(ot));ge.push(et,ht,1/0,Ie,-1,1),this.options.reduce&&ge.push(0)}let ze=this.trees[pe+1]=this._createTree(ge);te&&console.timeEnd(ke);for(let Ie=pe;Ie>=ae;Ie--){const Ve=+Date.now();ze=this.trees[Ie]=this._createTree(this._cluster(ze,Ie)),te&&console.log("z%d: %d clusters in %dms",Ie,ze.numItems,+Date.now()-Ve)}return te&&console.timeEnd("total time"),this}getClusters(K,te){let ae=((K[0]+180)%360+360)%360-180;const pe=Math.max(-90,Math.min(90,K[1]));let ke=K[2]===180?180:((K[2]+180)%360+360)%360-180;const ge=Math.max(-90,Math.min(90,K[3]));if(K[2]-K[0]>=360)ae=-180,ke=180;else if(ae>ke){const ot=this.getClusters([ae,pe,180,ge],te),et=this.getClusters([-180,pe,ke,ge],te);return ot.concat(et)}const ze=this.trees[this._limitZoom(te)],Ie=ze.range(He(ae),it(ge),He(ke),it(pe)),Ve=ze.data,Qe=[];for(const ot of Ie){const et=this.stride*ot;Qe.push(Ve[et+xe]>1?$e(Ve,et,this.clusterProps):this.points[Ve[et+ce]])}return Qe}getChildren(K){const te=this._getOriginId(K),ae=this._getOriginZoom(K),pe="No cluster with the specified id.",ke=this.trees[ae];if(!ke)throw new Error(pe);const ge=ke.data;if(te*this.stride>=ge.length)throw new Error(pe);const ze=this.options.radius/(this.options.extent*Math.pow(2,ae-1)),Ie=ke.within(ge[te*this.stride],ge[te*this.stride+1],ze),Ve=[];for(const Qe of Ie){const ot=Qe*this.stride;ge[ot+4]===K&&Ve.push(ge[ot+xe]>1?$e(ge,ot,this.clusterProps):this.points[ge[ot+ce]])}if(Ve.length===0)throw new Error(pe);return Ve}getLeaves(K,te,ae){const pe=[];return this._appendLeaves(pe,K,te=te||10,ae=ae||0,0),pe}getTile(K,te,ae){const pe=this.trees[this._limitZoom(K)],ke=Math.pow(2,K),{extent:ge,radius:ze}=this.options,Ie=ze/ge,Ve=(ae-Ie)/ke,Qe=(ae+1+Ie)/ke,ot={features:[]};return this._addTileFeatures(pe.range((te-Ie)/ke,Ve,(te+1+Ie)/ke,Qe),pe.data,te,ae,ke,ot),te===0&&this._addTileFeatures(pe.range(1-Ie/ke,Ve,1,Qe),pe.data,ke,ae,ke,ot),te===ke-1&&this._addTileFeatures(pe.range(0,Ve,Ie/ke,Qe),pe.data,-1,ae,ke,ot),ot.features.length?ot:null}getClusterExpansionZoom(K){let te=this._getOriginZoom(K)-1;for(;te<=this.options.maxZoom;){const ae=this.getChildren(K);if(te++,ae.length!==1)break;K=ae[0].properties.cluster_id}return te}_appendLeaves(K,te,ae,pe,ke){const ge=this.getChildren(te);for(const ze of ge){const Ie=ze.properties;if(Ie&&Ie.cluster?ke+Ie.point_count<=pe?ke+=Ie.point_count:ke=this._appendLeaves(K,Ie.cluster_id,ae,pe,ke):ke<pe?ke++:K.push(ze),K.length===ae)break}return ke}_createTree(K){const te=new u.au(K.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ae=0;ae<K.length;ae+=this.stride)te.add(K[ae],K[ae+1]);return te.finish(),te.data=K,te}_addTileFeatures(K,te,ae,pe,ke,ge){for(const ze of K){const Ie=ze*this.stride,Ve=te[Ie+xe]>1;let Qe,ot,et;if(Ve)Qe=be(te,Ie,this.clusterProps),ot=te[Ie],et=te[Ie+1];else{const an=this.points[te[Ie+ce]];Qe=an.properties;const[sn,kn]=an.geometry.coordinates;ot=He(sn),et=it(kn)}const ht={type:1,geometry:[[Math.round(this.options.extent*(ot*ke-ae)),Math.round(this.options.extent*(et*ke-pe))]],tags:Qe};let Zt;Zt=Ve||this.options.generateId?te[Ie+ce]:this.points[te[Ie+ce]].id,Zt!==void 0&&(ht.id=Zt),ge.features.push(ht)}}_limitZoom(K){return Math.max(this.options.minZoom,Math.min(Math.floor(+K),this.options.maxZoom+1))}_cluster(K,te){const{radius:ae,extent:pe,reduce:ke,minPoints:ge}=this.options,ze=ae/(pe*Math.pow(2,te)),Ie=K.data,Ve=[],Qe=this.stride;for(let ot=0;ot<Ie.length;ot+=Qe){if(Ie[ot+2]<=te)continue;Ie[ot+2]=te;const et=Ie[ot],ht=Ie[ot+1],Zt=K.within(Ie[ot],Ie[ot+1],ze),an=Ie[ot+xe];let sn=an;for(const kn of Zt){const ir=kn*Qe;Ie[ir+2]>te&&(sn+=Ie[ir+xe])}if(sn>an&&sn>=ge){let kn,ir=et*an,hr=ht*an,lr=-1;const vn=((ot/Qe|0)<<5)+(te+1)+this.points.length;for(const Nr of Zt){const Gr=Nr*Qe;if(Ie[Gr+2]<=te)continue;Ie[Gr+2]=te;const ji=Ie[Gr+xe];ir+=Ie[Gr]*ji,hr+=Ie[Gr+1]*ji,Ie[Gr+4]=vn,ke&&(kn||(kn=this._map(Ie,ot,!0),lr=this.clusterProps.length,this.clusterProps.push(kn)),ke(kn,this._map(Ie,Gr)))}Ie[ot+4]=vn,Ve.push(ir/sn,hr/sn,1/0,vn,-1,sn),ke&&Ve.push(lr)}else{for(let kn=0;kn<Qe;kn++)Ve.push(Ie[ot+kn]);if(sn>1)for(const kn of Zt){const ir=kn*Qe;if(!(Ie[ir+2]<=te)){Ie[ir+2]=te;for(let hr=0;hr<Qe;hr++)Ve.push(Ie[ir+hr])}}}}return Ve}_getOriginId(K){return K-this.points.length>>5}_getOriginZoom(K){return(K-this.points.length)%32}_map(K,te,ae){if(K[te+xe]>1){const ge=this.clusterProps[K[te+Ee]];return ae?Object.assign({},ge):ge}const pe=this.points[K[te+ce]].properties,ke=this.options.map(pe);return ae&&ke===pe?Object.assign({},ke):ke}}function $e(Oe,K,te){return{type:"Feature",id:Oe[K+ce],properties:be(Oe,K,te),geometry:{type:"Point",coordinates:[(ae=Oe[K],360*(ae-.5)),ct(Oe[K+1])]}};var ae}function be(Oe,K,te){const ae=Oe[K+xe],pe=ae>=1e4?`${Math.round(ae/1e3)}k`:ae>=1e3?Math.round(ae/100)/10+"k":ae,ke=Oe[K+Ee],ge=ke===-1?{}:Object.assign({},te[ke]);return Object.assign(ge,{cluster:!0,cluster_id:Oe[K+ce],point_count:ae,point_count_abbreviated:pe})}function He(Oe){return Oe/360+.5}function it(Oe){const K=Math.sin(Oe*Math.PI/180),te=.5-.25*Math.log((1+K)/(1-K))/Math.PI;return te<0?0:te>1?1:te}function ct(Oe){const K=(180-360*Oe)*Math.PI/180;return 360*Math.atan(Math.exp(K))/Math.PI-90}function xt(Oe,K,te,ae){for(var pe,ke=ae,ge=te-K>>1,ze=te-K,Ie=Oe[K],Ve=Oe[K+1],Qe=Oe[te],ot=Oe[te+1],et=K+3;et<te;et+=3){var ht=Dt(Oe[et],Oe[et+1],Ie,Ve,Qe,ot);if(ht>ke)pe=et,ke=ht;else if(ht===ke){var Zt=Math.abs(et-ge);Zt<ze&&(pe=et,ze=Zt)}}ke>ae&&(pe-K>3&&xt(Oe,K,pe,ae),Oe[pe+2]=ke,te-pe>3&&xt(Oe,pe,te,ae))}function Dt(Oe,K,te,ae,pe,ke){var ge=pe-te,ze=ke-ae;if(ge!==0||ze!==0){var Ie=((Oe-te)*ge+(K-ae)*ze)/(ge*ge+ze*ze);Ie>1?(te=pe,ae=ke):Ie>0&&(te+=ge*Ie,ae+=ze*Ie)}return(ge=Oe-te)*ge+(ze=K-ae)*ze}function Qt(Oe,K,te,ae){var pe={id:Oe===void 0?null:Oe,type:K,geometry:te,tags:ae,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ke){var ge=ke.geometry,ze=ke.type;if(ze==="Point"||ze==="MultiPoint"||ze==="LineString")Ft(ke,ge);else if(ze==="Polygon"||ze==="MultiLineString")for(var Ie=0;Ie<ge.length;Ie++)Ft(ke,ge[Ie]);else if(ze==="MultiPolygon")for(Ie=0;Ie<ge.length;Ie++)for(var Ve=0;Ve<ge[Ie].length;Ve++)Ft(ke,ge[Ie][Ve])}(pe),pe}function Ft(Oe,K){for(var te=0;te<K.length;te+=3)Oe.minX=Math.min(Oe.minX,K[te]),Oe.minY=Math.min(Oe.minY,K[te+1]),Oe.maxX=Math.max(Oe.maxX,K[te]),Oe.maxY=Math.max(Oe.maxY,K[te+1])}function Kt(Oe,K,te,ae){if(K.geometry){var pe=K.geometry.coordinates,ke=K.geometry.type,ge=Math.pow(te.tolerance/((1<<te.maxZoom)*te.extent),2),ze=[],Ie=K.id;if(te.promoteId?Ie=K.properties[te.promoteId]:te.generateId&&(Ie=ae||0),ke==="Point")Gt(pe,ze);else if(ke==="MultiPoint")for(var Ve=0;Ve<pe.length;Ve++)Gt(pe[Ve],ze);else if(ke==="LineString")Tr(pe,ze,ge,!1);else if(ke==="MultiLineString"){if(te.lineMetrics){for(Ve=0;Ve<pe.length;Ve++)Tr(pe[Ve],ze=[],ge,!1),Oe.push(Qt(Ie,"LineString",ze,K.properties));return}rt(pe,ze,ge,!1)}else if(ke==="Polygon")rt(pe,ze,ge,!0);else{if(ke!=="MultiPolygon"){if(ke==="GeometryCollection"){for(Ve=0;Ve<K.geometry.geometries.length;Ve++)Kt(Oe,{id:Ie,geometry:K.geometry.geometries[Ve],properties:K.properties},te,ae);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ve=0;Ve<pe.length;Ve++){var Qe=[];rt(pe[Ve],Qe,ge,!0),ze.push(Qe)}}Oe.push(Qt(Ie,ke,ze,K.properties))}}function Gt(Oe,K){K.push(lt(Oe[0])),K.push(gt(Oe[1])),K.push(0)}function Tr(Oe,K,te,ae){for(var pe,ke,ge=0,ze=0;ze<Oe.length;ze++){var Ie=lt(Oe[ze][0]),Ve=gt(Oe[ze][1]);K.push(Ie),K.push(Ve),K.push(0),ze>0&&(ge+=ae?(pe*Ve-Ie*ke)/2:Math.sqrt(Math.pow(Ie-pe,2)+Math.pow(Ve-ke,2))),pe=Ie,ke=Ve}var Qe=K.length-3;K[2]=1,xt(K,0,Qe,te),K[Qe+2]=1,K.size=Math.abs(ge),K.start=0,K.end=K.size}function rt(Oe,K,te,ae){for(var pe=0;pe<Oe.length;pe++){var ke=[];Tr(Oe[pe],ke,te,ae),K.push(ke)}}function lt(Oe){return Oe/360+.5}function gt(Oe){var K=Math.sin(Oe*Math.PI/180),te=.5-.25*Math.log((1+K)/(1-K))/Math.PI;return te<0?0:te>1?1:te}function _t(Oe,K,te,ae,pe,ke,ge,ze){if(ae/=K,ke>=(te/=K)&&ge<ae)return Oe;if(ge<te||ke>=ae)return null;for(var Ie=[],Ve=0;Ve<Oe.length;Ve++){var Qe=Oe[Ve],ot=Qe.geometry,et=Qe.type,ht=pe===0?Qe.minX:Qe.minY,Zt=pe===0?Qe.maxX:Qe.maxY;if(ht>=te&&Zt<ae)Ie.push(Qe);else if(!(Zt<te||ht>=ae)){var an=[];if(et==="Point"||et==="MultiPoint")Pt(ot,an,te,ae,pe);else if(et==="LineString")je(ot,an,te,ae,pe,!1,ze.lineMetrics);else if(et==="MultiLineString")St(ot,an,te,ae,pe,!1);else if(et==="Polygon")St(ot,an,te,ae,pe,!0);else if(et==="MultiPolygon")for(var sn=0;sn<ot.length;sn++){var kn=[];St(ot[sn],kn,te,ae,pe,!0),kn.length&&an.push(kn)}if(an.length){if(ze.lineMetrics&&et==="LineString"){for(sn=0;sn<an.length;sn++)Ie.push(Qt(Qe.id,et,an[sn],Qe.tags));continue}et!=="LineString"&&et!=="MultiLineString"||(an.length===1?(et="LineString",an=an[0]):et="MultiLineString"),et!=="Point"&&et!=="MultiPoint"||(et=an.length===3?"Point":"MultiPoint"),Ie.push(Qt(Qe.id,et,an,Qe.tags))}}}return Ie.length?Ie:null}function Pt(Oe,K,te,ae,pe){for(var ke=0;ke<Oe.length;ke+=3){var ge=Oe[ke+pe];ge>=te&&ge<=ae&&(K.push(Oe[ke]),K.push(Oe[ke+1]),K.push(Oe[ke+2]))}}function je(Oe,K,te,ae,pe,ke,ge){for(var ze,Ie,Ve=vt(Oe),Qe=pe===0?en:wn,ot=Oe.start,et=0;et<Oe.length-3;et+=3){var ht=Oe[et],Zt=Oe[et+1],an=Oe[et+2],sn=Oe[et+3],kn=Oe[et+4],ir=pe===0?ht:Zt,hr=pe===0?sn:kn,lr=!1;ge&&(ze=Math.sqrt(Math.pow(ht-sn,2)+Math.pow(Zt-kn,2))),ir<te?hr>te&&(Ie=Qe(Ve,ht,Zt,sn,kn,te),ge&&(Ve.start=ot+ze*Ie)):ir>ae?hr<ae&&(Ie=Qe(Ve,ht,Zt,sn,kn,ae),ge&&(Ve.start=ot+ze*Ie)):Lt(Ve,ht,Zt,an),hr<te&&ir>=te&&(Ie=Qe(Ve,ht,Zt,sn,kn,te),lr=!0),hr>ae&&ir<=ae&&(Ie=Qe(Ve,ht,Zt,sn,kn,ae),lr=!0),!ke&&lr&&(ge&&(Ve.end=ot+ze*Ie),K.push(Ve),Ve=vt(Oe)),ge&&(ot+=ze)}var vn=Oe.length-3;ht=Oe[vn],Zt=Oe[vn+1],an=Oe[vn+2],(ir=pe===0?ht:Zt)>=te&&ir<=ae&&Lt(Ve,ht,Zt,an),vn=Ve.length-3,ke&&vn>=3&&(Ve[vn]!==Ve[0]||Ve[vn+1]!==Ve[1])&&Lt(Ve,Ve[0],Ve[1],Ve[2]),Ve.length&&K.push(Ve)}function vt(Oe){var K=[];return K.size=Oe.size,K.start=Oe.start,K.end=Oe.end,K}function St(Oe,K,te,ae,pe,ke){for(var ge=0;ge<Oe.length;ge++)je(Oe[ge],K,te,ae,pe,ke,!1)}function Lt(Oe,K,te,ae){Oe.push(K),Oe.push(te),Oe.push(ae)}function en(Oe,K,te,ae,pe,ke){var ge=(ke-K)/(ae-K);return Oe.push(ke),Oe.push(te+(pe-te)*ge),Oe.push(1),ge}function wn(Oe,K,te,ae,pe,ke){var ge=(ke-te)/(pe-te);return Oe.push(K+(ae-K)*ge),Oe.push(ke),Oe.push(1),ge}function gn(Oe,K){for(var te=[],ae=0;ae<Oe.length;ae++){var pe,ke=Oe[ae],ge=ke.type;if(ge==="Point"||ge==="MultiPoint"||ge==="LineString")pe=bt(ke.geometry,K);else if(ge==="MultiLineString"||ge==="Polygon"){pe=[];for(var ze=0;ze<ke.geometry.length;ze++)pe.push(bt(ke.geometry[ze],K))}else if(ge==="MultiPolygon")for(pe=[],ze=0;ze<ke.geometry.length;ze++){for(var Ie=[],Ve=0;Ve<ke.geometry[ze].length;Ve++)Ie.push(bt(ke.geometry[ze][Ve],K));pe.push(Ie)}te.push(Qt(ke.id,ge,pe,ke.tags))}return te}function bt(Oe,K){var te=[];te.size=Oe.size,Oe.start!==void 0&&(te.start=Oe.start,te.end=Oe.end);for(var ae=0;ae<Oe.length;ae+=3)te.push(Oe[ae]+K,Oe[ae+1],Oe[ae+2]);return te}function Un(Oe,K){if(Oe.transformed)return Oe;var te,ae,pe,ke=1<<Oe.z,ge=Oe.x,ze=Oe.y;for(te=0;te<Oe.features.length;te++){var Ie=Oe.features[te],Ve=Ie.geometry,Qe=Ie.type;if(Ie.geometry=[],Qe===1)for(ae=0;ae<Ve.length;ae+=2)Ie.geometry.push(yr(Ve[ae],Ve[ae+1],K,ke,ge,ze));else for(ae=0;ae<Ve.length;ae++){var ot=[];for(pe=0;pe<Ve[ae].length;pe+=2)ot.push(yr(Ve[ae][pe],Ve[ae][pe+1],K,ke,ge,ze));Ie.geometry.push(ot)}}return Oe.transformed=!0,Oe}function yr(Oe,K,te,ae,pe,ke){return[Math.round(te*(Oe*ae-pe)),Math.round(te*(K*ae-ke))]}function Vs(Oe,K,te,ae,pe){for(var ke=K===pe.maxZoom?0:pe.tolerance/((1<<K)*pe.extent),ge={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:te,y:ae,z:K,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ze=0;ze<Oe.length;ze++){ge.numFeatures++,Xr(ge,Oe[ze],ke,pe);var Ie=Oe[ze].minX,Ve=Oe[ze].minY,Qe=Oe[ze].maxX,ot=Oe[ze].maxY;Ie<ge.minX&&(ge.minX=Ie),Ve<ge.minY&&(ge.minY=Ve),Qe>ge.maxX&&(ge.maxX=Qe),ot>ge.maxY&&(ge.maxY=ot)}return ge}function Xr(Oe,K,te,ae){var pe=K.geometry,ke=K.type,ge=[];if(ke==="Point"||ke==="MultiPoint")for(var ze=0;ze<pe.length;ze+=3)ge.push(pe[ze]),ge.push(pe[ze+1]),Oe.numPoints++,Oe.numSimplified++;else if(ke==="LineString")kt(ge,pe,Oe,te,!1,!1);else if(ke==="MultiLineString"||ke==="Polygon")for(ze=0;ze<pe.length;ze++)kt(ge,pe[ze],Oe,te,ke==="Polygon",ze===0);else if(ke==="MultiPolygon")for(var Ie=0;Ie<pe.length;Ie++){var Ve=pe[Ie];for(ze=0;ze<Ve.length;ze++)kt(ge,Ve[ze],Oe,te,!0,ze===0)}if(ge.length){var Qe=K.tags||null;if(ke==="LineString"&&ae.lineMetrics){for(var ot in Qe={},K.tags)Qe[ot]=K.tags[ot];Qe.mapbox_clip_start=pe.start/pe.size,Qe.mapbox_clip_end=pe.end/pe.size}var et={geometry:ge,type:ke==="Polygon"||ke==="MultiPolygon"?3:ke==="LineString"||ke==="MultiLineString"?2:1,tags:Qe};K.id!==null&&(et.id=K.id),Oe.features.push(et)}}function kt(Oe,K,te,ae,pe,ke){var ge=ae*ae;if(ae>0&&K.size<(pe?ge:ae))te.numPoints+=K.length/3;else{for(var ze=[],Ie=0;Ie<K.length;Ie+=3)(ae===0||K[Ie+2]>ge)&&(te.numSimplified++,ze.push(K[Ie]),ze.push(K[Ie+1])),te.numPoints++;pe&&function(Ve,Qe){for(var ot=0,et=0,ht=Ve.length,Zt=ht-2;et<ht;Zt=et,et+=2)ot+=(Ve[et]-Ve[Zt])*(Ve[et+1]+Ve[Zt+1]);if(ot>0===Qe)for(et=0,ht=Ve.length;et<ht/2;et+=2){var an=Ve[et],sn=Ve[et+1];Ve[et]=Ve[ht-2-et],Ve[et+1]=Ve[ht-1-et],Ve[ht-2-et]=an,Ve[ht-1-et]=sn}}(ze,ke),Oe.push(ze)}}function _n(Oe,K){var te=(K=this.options=function(pe,ke){for(var ge in ke)pe[ge]=ke[ge];return pe}(Object.create(this.options),K)).debug;if(te&&console.time("preprocess data"),K.maxZoom<0||K.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(K.promoteId&&K.generateId)throw new Error("promoteId and generateId cannot be used together.");var ae=function(pe,ke){var ge=[];if(pe.type==="FeatureCollection")for(var ze=0;ze<pe.features.length;ze++)Kt(ge,pe.features[ze],ke,ze);else Kt(ge,pe.type==="Feature"?pe:{geometry:pe},ke);return ge}(Oe,K);this.tiles={},this.tileCoords=[],te&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",K.indexMaxZoom,K.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ae=function(pe,ke){var ge=ke.buffer/ke.extent,ze=pe,Ie=_t(pe,1,-1-ge,ge,0,-1,2,ke),Ve=_t(pe,1,1-ge,2+ge,0,-1,2,ke);return(Ie||Ve)&&(ze=_t(pe,1,-ge,1+ge,0,-1,2,ke)||[],Ie&&(ze=gn(Ie,1).concat(ze)),Ve&&(ze=ze.concat(gn(Ve,-1)))),ze}(ae,K),ae.length&&this.splitTile(ae,0,0,0),te&&(ae.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Pn(Oe,K,te){return 32*((1<<Oe)*te+K)+Oe}function Cr(Oe,K){return K?Oe.properties[K]:Oe.id}function Zo(Oe,K){if(Oe==null)return!0;if(Oe.type==="Feature")return Cr(Oe,K)!=null;if(Oe.type==="FeatureCollection"){const te=new Set;for(const ae of Oe.features){const pe=Cr(ae,K);if(pe==null||te.has(pe))return!1;te.add(pe)}return!0}return!1}function Tn(Oe,K){const te=new Map;if(Oe!=null)if(Oe.type==="Feature")te.set(Cr(Oe,K),Oe);else for(const ae of Oe.features)te.set(Cr(ae,K),ae);return te}_n.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},_n.prototype.splitTile=function(Oe,K,te,ae,pe,ke,ge){for(var ze=[Oe,K,te,ae],Ie=this.options,Ve=Ie.debug;ze.length;){ae=ze.pop(),te=ze.pop(),K=ze.pop(),Oe=ze.pop();var Qe=1<<K,ot=Pn(K,te,ae),et=this.tiles[ot];if(!et&&(Ve>1&&console.time("creation"),et=this.tiles[ot]=Vs(Oe,K,te,ae,Ie),this.tileCoords.push({z:K,x:te,y:ae}),Ve)){Ve>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",K,te,ae,et.numFeatures,et.numPoints,et.numSimplified),console.timeEnd("creation"));var ht="z"+K;this.stats[ht]=(this.stats[ht]||0)+1,this.total++}if(et.source=Oe,pe){if(K===Ie.maxZoom||K===pe)continue;var Zt=1<<pe-K;if(te!==Math.floor(ke/Zt)||ae!==Math.floor(ge/Zt))continue}else if(K===Ie.indexMaxZoom||et.numPoints<=Ie.indexMaxPoints)continue;if(et.source=null,Oe.length!==0){Ve>1&&console.time("clipping");var an,sn,kn,ir,hr,lr,vn=.5*Ie.buffer/Ie.extent,Nr=.5-vn,Gr=.5+vn,ji=1+vn;an=sn=kn=ir=null,hr=_t(Oe,Qe,te-vn,te+Gr,0,et.minX,et.maxX,Ie),lr=_t(Oe,Qe,te+Nr,te+ji,0,et.minX,et.maxX,Ie),Oe=null,hr&&(an=_t(hr,Qe,ae-vn,ae+Gr,1,et.minY,et.maxY,Ie),sn=_t(hr,Qe,ae+Nr,ae+ji,1,et.minY,et.maxY,Ie),hr=null),lr&&(kn=_t(lr,Qe,ae-vn,ae+Gr,1,et.minY,et.maxY,Ie),ir=_t(lr,Qe,ae+Nr,ae+ji,1,et.minY,et.maxY,Ie),lr=null),Ve>1&&console.timeEnd("clipping"),ze.push(an||[],K+1,2*te,2*ae),ze.push(sn||[],K+1,2*te,2*ae+1),ze.push(kn||[],K+1,2*te+1,2*ae),ze.push(ir||[],K+1,2*te+1,2*ae+1)}}},_n.prototype.getTile=function(Oe,K,te){var ae=this.options,pe=ae.extent,ke=ae.debug;if(Oe<0||Oe>24)return null;var ge=1<<Oe,ze=Pn(Oe,K=(K%ge+ge)%ge,te);if(this.tiles[ze])return Un(this.tiles[ze],pe);ke>1&&console.log("drilling down to z%d-%d-%d",Oe,K,te);for(var Ie,Ve=Oe,Qe=K,ot=te;!Ie&&Ve>0;)Ve--,Qe=Math.floor(Qe/2),ot=Math.floor(ot/2),Ie=this.tiles[Pn(Ve,Qe,ot)];return Ie&&Ie.source?(ke>1&&console.log("found parent tile z%d-%d-%d",Ve,Qe,ot),ke>1&&console.time("drilling down"),this.splitTile(Ie.source,Ve,Qe,ot,Oe,K,te),ke>1&&console.timeEnd("drilling down"),this.tiles[ze]?Un(this.tiles[ze],pe):null):null};class Gs extends y{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(K,te){return u._(this,void 0,void 0,function*(){const ae=K.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const pe=this._geoJSONIndex.getTile(ae.z,ae.x,ae.y);if(!pe)return null;const ke=new class{constructor(ze){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=u.W,this.length=ze.length,this._features=ze}feature(ze){return new class{constructor(Ie){this._feature=Ie,this.extent=u.W,this.type=Ie.type,this.properties=Ie.tags,"id"in Ie&&!isNaN(Ie.id)&&(this.id=parseInt(Ie.id,10))}loadGeometry(){if(this._feature.type===1){const Ie=[];for(const Ve of this._feature.geometry)Ie.push([new u.P(Ve[0],Ve[1])]);return Ie}{const Ie=[];for(const Ve of this._feature.geometry){const Qe=[];for(const ot of Ve)Qe.push(new u.P(ot[0],ot[1]));Ie.push(Qe)}return Ie}}toGeoJSON(Ie,Ve,Qe){return N.call(this,Ie,Ve,Qe)}}(this._features[ze])}}(pe.features);let ge=Be(ke);return ge.byteOffset===0&&ge.byteLength===ge.buffer.byteLength||(ge=new Uint8Array(ge)),{vectorTile:ke,rawData:ge.buffer}})}loadData(K){return u._(this,void 0,void 0,function*(){var te;(te=this._pendingRequest)===null||te===void 0||te.abort();const ae=!!(K&&K.request&&K.request.collectResourceTiming)&&new u.bs(K.request);this._pendingRequest=new AbortController;try{let pe=yield this.loadGeoJSON(K,this._pendingRequest);if(delete this._pendingRequest,typeof pe!="object")throw new Error(`Input data given to '${K.source}' is not a valid GeoJSON object.`);if(O(pe,!0),K.filter){const ge=u.by(K.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ge.result==="error")throw new Error(ge.value.map(Ie=>`${Ie.key}: ${Ie.message}`).join(", "));pe={type:"FeatureCollection",features:pe.features.filter(Ie=>ge.value.evaluate({zoom:0},Ie))}}this._geoJSONIndex=K.cluster?new Ge(function({superclusterOptions:ge,clusterProperties:ze}){if(!ze||!ge)return ge;const Ie={},Ve={},Qe={accumulated:null,zoom:0},ot={properties:null},et=Object.keys(ze);for(const ht of et){const[Zt,an]=ze[ht],sn=u.by(an),kn=u.by(typeof Zt=="string"?[Zt,["accumulated"],["get",ht]]:Zt);Ie[ht]=sn.value,Ve[ht]=kn.value}return ge.map=ht=>{ot.properties=ht;const Zt={};for(const an of et)Zt[an]=Ie[an].evaluate(Qe,ot);return Zt},ge.reduce=(ht,Zt)=>{ot.properties=Zt;for(const an of et)Qe.accumulated=ht[an],ht[an]=Ve[an].evaluate(Qe,ot)},ge}(K)).load(pe.features):function(ge,ze){return new _n(ge,ze)}(pe,K.geojsonVtOptions),this.loaded={};const ke={};if(ae){const ge=ae.finish();ge&&(ke.resourceTiming={},ke.resourceTiming[K.source]=JSON.parse(JSON.stringify(ge)))}return ke}catch(pe){if(delete this._pendingRequest,u.bz(pe))return{abandoned:!0};throw pe}})}reloadTile(K){const te=this.loaded;return te&&te[K.uid]?super.reloadTile(K):this.loadTile(K)}loadGeoJSON(K,te){return u._(this,void 0,void 0,function*(){const{promoteId:ae}=K;if(K.request){const pe=yield u.h(K.request,te);return this._dataUpdateable=Zo(pe.data,ae)?Tn(pe.data,ae):void 0,pe.data}if(typeof K.data=="string")try{const pe=JSON.parse(K.data);return this._dataUpdateable=Zo(pe,ae)?Tn(pe,ae):void 0,pe}catch{throw new Error(`Input data given to '${K.source}' is not a valid GeoJSON object.`)}if(!K.dataDiff)throw new Error(`Input data given to '${K.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${K.source}`);return function(pe,ke,ge){var ze,Ie,Ve,Qe;if(ke.removeAll&&pe.clear(),ke.remove)for(const ot of ke.remove)pe.delete(ot);if(ke.add)for(const ot of ke.add){const et=Cr(ot,ge);et!=null&&pe.set(et,ot)}if(ke.update)for(const ot of ke.update){let et=pe.get(ot.id);if(et==null)continue;const ht=!ot.removeAllProperties&&(((ze=ot.removeProperties)===null||ze===void 0?void 0:ze.length)>0||((Ie=ot.addOrUpdateProperties)===null||Ie===void 0?void 0:Ie.length)>0);if((ot.newGeometry||ot.removeAllProperties||ht)&&(et=Object.assign({},et),pe.set(ot.id,et),ht&&(et.properties=Object.assign({},et.properties))),ot.newGeometry&&(et.geometry=ot.newGeometry),ot.removeAllProperties)et.properties={};else if(((Ve=ot.removeProperties)===null||Ve===void 0?void 0:Ve.length)>0)for(const Zt of ot.removeProperties)Object.prototype.hasOwnProperty.call(et.properties,Zt)&&delete et.properties[Zt];if(((Qe=ot.addOrUpdateProperties)===null||Qe===void 0?void 0:Qe.length)>0)for(const{key:Zt,value:an}of ot.addOrUpdateProperties)et.properties[Zt]=an}}(this._dataUpdateable,K.dataDiff,ae),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(K){return u._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(K){return this._geoJSONIndex.getClusterExpansionZoom(K.clusterId)}getClusterChildren(K){return this._geoJSONIndex.getChildren(K.clusterId)}getClusterLeaves(K){return this._geoJSONIndex.getLeaves(K.clusterId,K.limit,K.offset)}}class Vr{constructor(K){this.self=K,this.actor=new u.C(K),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(te,ae)=>{if(this.externalWorkerSourceTypes[te])throw new Error(`Worker source with name "${te}" already registered.`);this.externalWorkerSourceTypes[te]=ae},this.self.addProtocol=u.bf,this.self.removeProtocol=u.bg,this.self.registerRTLTextPlugin=te=>{if(u.bA.isParsed())throw new Error("RTL text plugin already registered.");u.bA.setMethods(te)},this.actor.registerMessageHandler("LDT",(te,ae)=>this._getDEMWorkerSource(te,ae.source).loadTile(ae)),this.actor.registerMessageHandler("RDT",(te,ae)=>u._(this,void 0,void 0,function*(){this._getDEMWorkerSource(te,ae.source).removeTile(ae)})),this.actor.registerMessageHandler("GCEZ",(te,ae)=>u._(this,void 0,void 0,function*(){return this._getWorkerSource(te,ae.type,ae.source).getClusterExpansionZoom(ae)})),this.actor.registerMessageHandler("GCC",(te,ae)=>u._(this,void 0,void 0,function*(){return this._getWorkerSource(te,ae.type,ae.source).getClusterChildren(ae)})),this.actor.registerMessageHandler("GCL",(te,ae)=>u._(this,void 0,void 0,function*(){return this._getWorkerSource(te,ae.type,ae.source).getClusterLeaves(ae)})),this.actor.registerMessageHandler("LD",(te,ae)=>this._getWorkerSource(te,ae.type,ae.source).loadData(ae)),this.actor.registerMessageHandler("LT",(te,ae)=>this._getWorkerSource(te,ae.type,ae.source).loadTile(ae)),this.actor.registerMessageHandler("RT",(te,ae)=>this._getWorkerSource(te,ae.type,ae.source).reloadTile(ae)),this.actor.registerMessageHandler("AT",(te,ae)=>this._getWorkerSource(te,ae.type,ae.source).abortTile(ae)),this.actor.registerMessageHandler("RMT",(te,ae)=>this._getWorkerSource(te,ae.type,ae.source).removeTile(ae)),this.actor.registerMessageHandler("RS",(te,ae)=>u._(this,void 0,void 0,function*(){if(!this.workerSources[te]||!this.workerSources[te][ae.type]||!this.workerSources[te][ae.type][ae.source])return;const pe=this.workerSources[te][ae.type][ae.source];delete this.workerSources[te][ae.type][ae.source],pe.removeSource!==void 0&&pe.removeSource(ae)})),this.actor.registerMessageHandler("RM",te=>u._(this,void 0,void 0,function*(){delete this.layerIndexes[te],delete this.availableImages[te],delete this.workerSources[te],delete this.demWorkerSources[te]})),this.actor.registerMessageHandler("SR",(te,ae)=>u._(this,void 0,void 0,function*(){this.referrer=ae})),this.actor.registerMessageHandler("SRPS",(te,ae)=>this._syncRTLPluginState(te,ae)),this.actor.registerMessageHandler("IS",(te,ae)=>u._(this,void 0,void 0,function*(){this.self.importScripts(ae)})),this.actor.registerMessageHandler("SI",(te,ae)=>this._setImages(te,ae)),this.actor.registerMessageHandler("UL",(te,ae)=>u._(this,void 0,void 0,function*(){this._getLayerIndex(te).update(ae.layers,ae.removedIds)})),this.actor.registerMessageHandler("SL",(te,ae)=>u._(this,void 0,void 0,function*(){this._getLayerIndex(te).replace(ae)}))}_setImages(K,te){return u._(this,void 0,void 0,function*(){this.availableImages[K]=te;for(const ae in this.workerSources[K]){const pe=this.workerSources[K][ae];for(const ke in pe)pe[ke].availableImages=te}})}_syncRTLPluginState(K,te){return u._(this,void 0,void 0,function*(){if(u.bA.isParsed())return u.bA.getState();if(te.pluginStatus!=="loading")return u.bA.setState(te),te;const ae=te.pluginURL;if(this.self.importScripts(ae),u.bA.isParsed()){const pe={pluginStatus:"loaded",pluginURL:ae};return u.bA.setState(pe),pe}throw u.bA.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${ae}`)})}_getAvailableImages(K){let te=this.availableImages[K];return te||(te=[]),te}_getLayerIndex(K){let te=this.layerIndexes[K];return te||(te=this.layerIndexes[K]=new l),te}_getWorkerSource(K,te,ae){if(this.workerSources[K]||(this.workerSources[K]={}),this.workerSources[K][te]||(this.workerSources[K][te]={}),!this.workerSources[K][te][ae]){const pe={sendAsync:(ke,ge)=>(ke.targetMapId=K,this.actor.sendAsync(ke,ge))};switch(te){case"vector":this.workerSources[K][te][ae]=new y(pe,this._getLayerIndex(K),this._getAvailableImages(K));break;case"geojson":this.workerSources[K][te][ae]=new Gs(pe,this._getLayerIndex(K),this._getAvailableImages(K));break;default:this.workerSources[K][te][ae]=new this.externalWorkerSourceTypes[te](pe,this._getLayerIndex(K),this._getAvailableImages(K))}}return this.workerSources[K][te][ae]}_getDEMWorkerSource(K,te){return this.demWorkerSources[K]||(this.demWorkerSources[K]={}),this.demWorkerSources[K][te]||(this.demWorkerSources[K][te]=new _),this.demWorkerSources[K][te]}}return u.i(self)&&(self.worker=new Vr(self)),Vr}),i("index",["exports","./shared"],function(u,l){var p="4.1.3";let g,x;const y={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:S=>new Promise((a,d)=>{const v=requestAnimationFrame(a);S.signal.addEventListener("abort",()=>{cancelAnimationFrame(v),d(l.c())})}),getImageData(S,a=0){return this.getImageCanvasContext(S).getImageData(-a,-a,S.width+2*a,S.height+2*a)},getImageCanvasContext(S){const a=window.document.createElement("canvas"),d=a.getContext("2d",{willReadFrequently:!0});if(!d)throw new Error("failed to create canvas 2d context");return a.width=S.width,a.height=S.height,d.drawImage(S,0,0,S.width,S.height),d},resolveURL:S=>(g||(g=document.createElement("a")),g.href=S,g.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(x==null&&(x=matchMedia("(prefers-reduced-motion: reduce)")),x.matches)}};class _{static testProp(a){if(!_.docStyle)return a[0];for(let d=0;d<a.length;d++)if(a[d]in _.docStyle)return a[d];return a[0]}static create(a,d,v){const w=window.document.createElement(a);return d!==void 0&&(w.className=d),v&&v.appendChild(w),w}static createNS(a,d){return window.document.createElementNS(a,d)}static disableDrag(){_.docStyle&&_.selectProp&&(_.userSelect=_.docStyle[_.selectProp],_.docStyle[_.selectProp]="none")}static enableDrag(){_.docStyle&&_.selectProp&&(_.docStyle[_.selectProp]=_.userSelect)}static setTransform(a,d){a.style[_.transformProp]=d}static addEventListener(a,d,v,w={}){a.addEventListener(d,v,"passive"in w?w:w.capture)}static removeEventListener(a,d,v,w={}){a.removeEventListener(d,v,"passive"in w?w:w.capture)}static suppressClickInternal(a){a.preventDefault(),a.stopPropagation(),window.removeEventListener("click",_.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",_.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",_.suppressClickInternal,!0)},0)}static getScale(a){const d=a.getBoundingClientRect();return{x:d.width/a.offsetWidth||1,y:d.height/a.offsetHeight||1,boundingClientRect:d}}static getPoint(a,d,v){const w=d.boundingClientRect;return new l.P((v.clientX-w.left)/d.x-a.clientLeft,(v.clientY-w.top)/d.y-a.clientTop)}static mousePos(a,d){const v=_.getScale(a);return _.getPoint(a,v,d)}static touchPos(a,d){const v=[],w=_.getScale(a);for(let C=0;C<d.length;C++)v.push(_.getPoint(a,w,d[C]));return v}static mouseButton(a){return a.button}static remove(a){a.parentNode&&a.parentNode.removeChild(a)}}_.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,_.selectProp=_.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),_.transformProp=_.testProp(["transform","WebkitTransform"]);const T={supported:!1,testSupport:function(S){!N&&O&&(k?R(S):A=S)}};let A,O,N=!1,k=!1;function R(S){const a=S.createTexture();S.bindTexture(S.TEXTURE_2D,a);try{if(S.texImage2D(S.TEXTURE_2D,0,S.RGBA,S.RGBA,S.UNSIGNED_BYTE,O),S.isContextLost())return;T.supported=!0}catch{}S.deleteTexture(a),N=!0}var z;typeof document<"u"&&(O=document.createElement("img"),O.onload=function(){A&&R(A),A=null,k=!0},O.onerror=function(){N=!0,A=null},O.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(S){let a,d,v,w;S.resetRequestQueue=()=>{a=[],d=0,v=0,w={}},S.addThrottleControl=Z=>{const Q=v++;return w[Q]=Z,Q},S.removeThrottleControl=Z=>{delete w[Z],B()},S.getImage=(Z,Q,se=!0)=>new Promise((le,ye)=>{T.supported&&(Z.headers||(Z.headers={}),Z.headers.accept="image/webp,*/*"),l.e(Z,{type:"image"}),a.push({abortController:Q,requestParameters:Z,supportImageRefresh:se,state:"queued",onError:Le=>{ye(Le)},onSuccess:Le=>{le(Le)}}),B()});const C=Z=>l._(this,void 0,void 0,function*(){Z.state="running";const{requestParameters:Q,supportImageRefresh:se,onError:le,onSuccess:ye,abortController:Le}=Z,Pe=se===!1&&!l.i(self)&&!l.g(Q.url)&&(!Q.headers||Object.keys(Q.headers).reduce((Ke,at)=>Ke&&at==="accept",!0));d++;const Me=Pe?j(Q,Le):l.m(Q,Le);try{const Ke=yield Me;delete Z.abortController,Z.state="completed",Ke.data instanceof HTMLImageElement||l.b(Ke.data)?ye(Ke):Ke.data&&ye({data:yield(Se=Ke.data,typeof createImageBitmap=="function"?l.d(Se):l.f(Se)),cacheControl:Ke.cacheControl,expires:Ke.expires})}catch(Ke){delete Z.abortController,le(Ke)}finally{d--,B()}var Se}),B=()=>{const Z=(()=>{for(const Q of Object.keys(w))if(w[Q]())return!0;return!1})()?l.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:l.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let Q=d;Q<Z&&a.length>0;Q++){const se=a.shift();se.abortController.signal.aborted?Q--:C(se)}},j=(Z,Q)=>new Promise((se,le)=>{const ye=new Image,Le=Z.url,Pe=Z.credentials;Pe&&Pe==="include"?ye.crossOrigin="use-credentials":(Pe&&Pe==="same-origin"||!l.s(Le))&&(ye.crossOrigin="anonymous"),Q.signal.addEventListener("abort",()=>{ye.src="",le(l.c())}),ye.fetchPriority="high",ye.onload=()=>{ye.onerror=ye.onload=null,se({data:ye})},ye.onerror=()=>{ye.onerror=ye.onload=null,Q.signal.aborted||le(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},ye.src=Le})}(z||(z={})),z.resetRequestQueue();class D{constructor(a){this._transformRequestFn=a}transformRequest(a,d){return this._transformRequestFn&&this._transformRequestFn(a,d)||{url:a}}normalizeSpriteURL(a,d,v){const w=function(C){const B=C.match(U);if(!B)throw new Error(`Unable to parse URL "${C}"`);return{protocol:B[1],authority:B[2],path:B[3]||"/",params:B[4]?B[4].split("&"):[]}}(a);return w.path+=`${d}${v}`,function(C){const B=C.params.length?`?${C.params.join("&")}`:"";return`${C.protocol}://${C.authority}${C.path}${B}`}(w)}setTransformRequest(a){this._transformRequestFn=a}}const U=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function q(S){var a=new l.A(3);return a[0]=S[0],a[1]=S[1],a[2]=S[2],a}var G,H=function(S,a,d){return S[0]=a[0]-d[0],S[1]=a[1]-d[1],S[2]=a[2]-d[2],S};G=new l.A(3),l.A!=Float32Array&&(G[0]=0,G[1]=0,G[2]=0);var J=function(S){var a=S[0],d=S[1];return a*a+d*d};function Y(S){const a=[];if(typeof S=="string")a.push({id:"default",url:S});else if(S&&S.length>0){const d=[];for(const{id:v,url:w}of S){const C=`${v}${w}`;d.indexOf(C)===-1&&(d.push(C),a.push({id:v,url:w}))}}return a}(function(){var S=new l.A(2);l.A!=Float32Array&&(S[0]=0,S[1]=0)})();class X{constructor(a,d,v,w){this.context=a,this.format=v,this.texture=a.gl.createTexture(),this.update(d,w)}update(a,d,v){const{width:w,height:C}=a,B=!(this.size&&this.size[0]===w&&this.size[1]===C||v),{context:j}=this,{gl:Z}=j;if(this.useMipmap=!!(d&&d.useMipmap),Z.bindTexture(Z.TEXTURE_2D,this.texture),j.pixelStoreUnpackFlipY.set(!1),j.pixelStoreUnpack.set(1),j.pixelStoreUnpackPremultiplyAlpha.set(this.format===Z.RGBA&&(!d||d.premultiply!==!1)),B)this.size=[w,C],a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||l.b(a)?Z.texImage2D(Z.TEXTURE_2D,0,this.format,this.format,Z.UNSIGNED_BYTE,a):Z.texImage2D(Z.TEXTURE_2D,0,this.format,w,C,0,this.format,Z.UNSIGNED_BYTE,a.data);else{const{x:Q,y:se}=v||{x:0,y:0};a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||l.b(a)?Z.texSubImage2D(Z.TEXTURE_2D,0,Q,se,Z.RGBA,Z.UNSIGNED_BYTE,a):Z.texSubImage2D(Z.TEXTURE_2D,0,Q,se,w,C,Z.RGBA,Z.UNSIGNED_BYTE,a.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Z.generateMipmap(Z.TEXTURE_2D)}bind(a,d,v){const{context:w}=this,{gl:C}=w;C.bindTexture(C.TEXTURE_2D,this.texture),v!==C.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(v=C.LINEAR),a!==this.filter&&(C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,a),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,v||a),this.filter=a),d!==this.wrap&&(C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,d),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,d),this.wrap=d)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:a}=this.context;a.deleteTexture(this.texture),this.texture=null}}function ee(S){const{userImage:a}=S;return!!(a&&a.render&&a.render())&&(S.data.replace(new Uint8Array(a.data.buffer)),!0)}class ue extends l.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(a){if(this.loaded!==a&&(this.loaded=a,a)){for(const{ids:d,promiseResolve:v}of this.requestors)v(this._getImagesForIds(d));this.requestors=[]}}getImage(a){const d=this.images[a];if(d&&!d.data&&d.spriteData){const v=d.spriteData;d.data=new l.R({width:v.width,height:v.height},v.context.getImageData(v.x,v.y,v.width,v.height).data),d.spriteData=null}return d}addImage(a,d){if(this.images[a])throw new Error(`Image id ${a} already exist, use updateImage instead`);this._validate(a,d)&&(this.images[a]=d)}_validate(a,d){let v=!0;const w=d.data||d.spriteData;return this._validateStretch(d.stretchX,w&&w.width)||(this.fire(new l.j(new Error(`Image "${a}" has invalid "stretchX" value`))),v=!1),this._validateStretch(d.stretchY,w&&w.height)||(this.fire(new l.j(new Error(`Image "${a}" has invalid "stretchY" value`))),v=!1),this._validateContent(d.content,d)||(this.fire(new l.j(new Error(`Image "${a}" has invalid "content" value`))),v=!1),v}_validateStretch(a,d){if(!a)return!0;let v=0;for(const w of a){if(w[0]<v||w[1]<w[0]||d<w[1])return!1;v=w[1]}return!0}_validateContent(a,d){if(!a)return!0;if(a.length!==4)return!1;const v=d.spriteData,w=v&&v.width||d.data.width,C=v&&v.height||d.data.height;return!(a[0]<0||w<a[0]||a[1]<0||C<a[1]||a[2]<0||w<a[2]||a[3]<0||C<a[3]||a[2]<a[0]||a[3]<a[1])}updateImage(a,d,v=!0){const w=this.getImage(a);if(v&&(w.data.width!==d.data.width||w.data.height!==d.data.height))throw new Error(`size mismatch between old image (${w.data.width}x${w.data.height}) and new image (${d.data.width}x${d.data.height}).`);d.version=w.version+1,this.images[a]=d,this.updatedImages[a]=!0}removeImage(a){const d=this.images[a];delete this.images[a],delete this.patterns[a],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(a){return new Promise((d,v)=>{let w=!0;if(!this.isLoaded())for(const C of a)this.images[C]||(w=!1);this.isLoaded()||w?d(this._getImagesForIds(a)):this.requestors.push({ids:a,promiseResolve:d})})}_getImagesForIds(a){const d={};for(const v of a){let w=this.getImage(v);w||(this.fire(new l.k("styleimagemissing",{id:v})),w=this.getImage(v)),w?d[v]={data:w.data.clone(),pixelRatio:w.pixelRatio,sdf:w.sdf,version:w.version,stretchX:w.stretchX,stretchY:w.stretchY,content:w.content,hasRenderCallback:!!(w.userImage&&w.userImage.render)}:l.w(`Image "${v}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return d}getPixelSize(){const{width:a,height:d}=this.atlasImage;return{width:a,height:d}}getPattern(a){const d=this.patterns[a],v=this.getImage(a);if(!v)return null;if(d&&d.position.version===v.version)return d.position;if(d)d.position.version=v.version;else{const w={w:v.data.width+2,h:v.data.height+2,x:0,y:0},C=new l.I(w,v);this.patterns[a]={bin:w,position:C}}return this._updatePatternAtlas(),this.patterns[a].position}bind(a){const d=a.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new X(a,this.atlasImage,d.RGBA),this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}_updatePatternAtlas(){const a=[];for(const C in this.patterns)a.push(this.patterns[C].bin);const{w:d,h:v}=l.p(a),w=this.atlasImage;w.resize({width:d||1,height:v||1});for(const C in this.patterns){const{bin:B}=this.patterns[C],j=B.x+1,Z=B.y+1,Q=this.getImage(C).data,se=Q.width,le=Q.height;l.R.copy(Q,w,{x:0,y:0},{x:j,y:Z},{width:se,height:le}),l.R.copy(Q,w,{x:0,y:le-1},{x:j,y:Z-1},{width:se,height:1}),l.R.copy(Q,w,{x:0,y:0},{x:j,y:Z+le},{width:se,height:1}),l.R.copy(Q,w,{x:se-1,y:0},{x:j-1,y:Z},{width:1,height:le}),l.R.copy(Q,w,{x:0,y:0},{x:j+se,y:Z},{width:1,height:le})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(a){for(const d of a){if(this.callbackDispatchedThisFrame[d])continue;this.callbackDispatchedThisFrame[d]=!0;const v=this.getImage(d);v||l.w(`Image with ID: "${d}" was not found`),ee(v)&&this.updateImage(d,v)}}}const oe=1e20;function we(S,a,d,v,w,C,B,j,Z){for(let Q=a;Q<a+v;Q++)Ne(S,d*C+Q,C,w,B,j,Z);for(let Q=d;Q<d+w;Q++)Ne(S,Q*C+a,1,v,B,j,Z)}function Ne(S,a,d,v,w,C,B){C[0]=0,B[0]=-oe,B[1]=oe,w[0]=S[a];for(let j=1,Z=0,Q=0;j<v;j++){w[j]=S[a+j*d];const se=j*j;do{const le=C[Z];Q=(w[j]-w[le]+se-le*le)/(j-le)/2}while(Q<=B[Z]&&--Z>-1);Z++,C[Z]=j,B[Z]=Q,B[Z+1]=oe}for(let j=0,Z=0;j<v;j++){for(;B[Z+1]<j;)Z++;const Q=C[Z],se=j-Q;S[a+j*d]=w[Q]+se*se}}class Be{constructor(a,d){this.requestManager=a,this.localIdeographFontFamily=d,this.entries={}}setURL(a){this.url=a}getGlyphs(a){return l._(this,void 0,void 0,function*(){const d=[];for(const C in a)for(const B of a[C])d.push(this._getAndCacheGlyphsPromise(C,B));const v=yield Promise.all(d),w={};for(const{stack:C,id:B,glyph:j}of v)w[C]||(w[C]={}),w[C][B]=j&&{id:j.id,bitmap:j.bitmap.clone(),metrics:j.metrics};return w})}_getAndCacheGlyphsPromise(a,d){return l._(this,void 0,void 0,function*(){let v=this.entries[a];v||(v=this.entries[a]={glyphs:{},requests:{},ranges:{}});let w=v.glyphs[d];if(w!==void 0)return{stack:a,id:d,glyph:w};if(w=this._tinySDF(v,a,d),w)return v.glyphs[d]=w,{stack:a,id:d,glyph:w};const C=Math.floor(d/256);if(256*C>65535)throw new Error("glyphs > 65535 not supported");if(v.ranges[C])return{stack:a,id:d,glyph:w};if(!this.url)throw new Error("glyphsUrl is not set");if(!v.requests[C]){const j=Be.loadGlyphRange(a,C,this.url,this.requestManager);v.requests[C]=j}const B=yield v.requests[C];for(const j in B)this._doesCharSupportLocalGlyph(+j)||(v.glyphs[+j]=B[+j]);return v.ranges[C]=!0,{stack:a,id:d,glyph:B[d]||null}})}_doesCharSupportLocalGlyph(a){return!!this.localIdeographFontFamily&&(l.u["CJK Unified Ideographs"](a)||l.u["Hangul Syllables"](a)||l.u.Hiragana(a)||l.u.Katakana(a))}_tinySDF(a,d,v){const w=this.localIdeographFontFamily;if(!w||!this._doesCharSupportLocalGlyph(v))return;let C=a.tinySDF;if(!C){let j="400";/bold/i.test(d)?j="900":/medium/i.test(d)?j="500":/light/i.test(d)&&(j="200"),C=a.tinySDF=new Be.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:w,fontWeight:j})}const B=C.draw(String.fromCharCode(v));return{id:v,bitmap:new l.o({width:B.width||60,height:B.height||60},B.data),metrics:{width:B.glyphWidth/2||24,height:B.glyphHeight/2||24,left:B.glyphLeft/2+.5||0,top:B.glyphTop/2-27.5||-8,advance:B.glyphAdvance/2||24,isDoubleResolution:!0}}}}Be.loadGlyphRange=function(S,a,d,v){return l._(this,void 0,void 0,function*(){const w=256*a,C=w+255,B=v.transformRequest(d.replace("{fontstack}",S).replace("{range}",`${w}-${C}`),"Glyphs"),j=yield l.l(B,new AbortController);if(!j||!j.data)throw new Error(`Could not load glyph range. range: ${a}, ${w}-${C}`);const Z={};for(const Q of l.n(j.data))Z[Q.id]=Q;return Z})},Be.TinySDF=class{constructor({fontSize:S=24,buffer:a=3,radius:d=8,cutoff:v=.25,fontFamily:w="sans-serif",fontWeight:C="normal",fontStyle:B="normal"}={}){this.buffer=a,this.cutoff=v,this.radius=d;const j=this.size=S+4*a,Z=this._createCanvas(j),Q=this.ctx=Z.getContext("2d",{willReadFrequently:!0});Q.font=`${B} ${C} ${S}px ${w}`,Q.textBaseline="alphabetic",Q.textAlign="left",Q.fillStyle="black",this.gridOuter=new Float64Array(j*j),this.gridInner=new Float64Array(j*j),this.f=new Float64Array(j),this.z=new Float64Array(j+1),this.v=new Uint16Array(j)}_createCanvas(S){const a=document.createElement("canvas");return a.width=a.height=S,a}draw(S){const{width:a,actualBoundingBoxAscent:d,actualBoundingBoxDescent:v,actualBoundingBoxLeft:w,actualBoundingBoxRight:C}=this.ctx.measureText(S),B=Math.ceil(d),j=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(C-w))),Z=Math.min(this.size-this.buffer,B+Math.ceil(v)),Q=j+2*this.buffer,se=Z+2*this.buffer,le=Math.max(Q*se,0),ye=new Uint8ClampedArray(le),Le={data:ye,width:Q,height:se,glyphWidth:j,glyphHeight:Z,glyphTop:B,glyphLeft:0,glyphAdvance:a};if(j===0||Z===0)return Le;const{ctx:Pe,buffer:Me,gridInner:Se,gridOuter:Ke}=this;Pe.clearRect(Me,Me,j,Z),Pe.fillText(S,Me,Me+B);const at=Pe.getImageData(Me,Me,j,Z);Ke.fill(oe,0,le),Se.fill(0,0,le);for(let Fe=0;Fe<Z;Fe++)for(let Je=0;Je<j;Je++){const ut=at.data[4*(Fe*j+Je)+3]/255;if(ut===0)continue;const ft=(Fe+Me)*Q+Je+Me;if(ut===1)Ke[ft]=0,Se[ft]=oe;else{const mt=.5-ut;Ke[ft]=mt>0?mt*mt:0,Se[ft]=mt<0?mt*mt:0}}we(Ke,0,0,Q,se,Q,this.f,this.v,this.z),we(Se,Me,Me,j,Z,Q,this.f,this.v,this.z);for(let Fe=0;Fe<le;Fe++){const Je=Math.sqrt(Ke[Fe])-Math.sqrt(Se[Fe]);ye[Fe]=Math.round(255-255*(Je/this.radius+this.cutoff))}return Le}};class De{constructor(){this.specification=l.v.light.position}possiblyEvaluate(a,d){return l.y(a.expression.evaluate(d))}interpolate(a,d,v){return{x:l.z.number(a.x,d.x,v),y:l.z.number(a.y,d.y,v),z:l.z.number(a.z,d.z,v)}}}let Ae;class ve extends l.E{constructor(a){super(),Ae=Ae||new l.q({anchor:new l.D(l.v.light.anchor),position:new De,color:new l.D(l.v.light.color),intensity:new l.D(l.v.light.intensity)}),this._transitionable=new l.T(Ae),this.setLight(a),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(a,d={}){if(!this._validate(l.r,a,d))for(const v in a){const w=a[v];v.endsWith("-transition")?this._transitionable.setTransition(v.slice(0,-11),w):this._transitionable.setValue(v,w)}}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,d,v){return(!v||v.validate!==!1)&&l.t(this,a.call(l.x,{value:d,style:{glyphs:!0,sprite:!0},styleSpec:l.v}))}}class ce{constructor(a,d){this.width=a,this.height=d,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(a,d){const v=a.join(",")+String(d);return this.dashEntry[v]||(this.dashEntry[v]=this.addDash(a,d)),this.dashEntry[v]}getDashRanges(a,d,v){const w=[];let C=a.length%2==1?-a[a.length-1]*v:0,B=a[0]*v,j=!0;w.push({left:C,right:B,isDash:j,zeroLength:a[0]===0});let Z=a[0];for(let Q=1;Q<a.length;Q++){j=!j;const se=a[Q];C=Z*v,Z+=se,B=Z*v,w.push({left:C,right:B,isDash:j,zeroLength:se===0})}return w}addRoundDash(a,d,v){const w=d/2;for(let C=-v;C<=v;C++){const B=this.width*(this.nextRow+v+C);let j=0,Z=a[j];for(let Q=0;Q<this.width;Q++){Q/Z.right>1&&(Z=a[++j]);const se=Math.abs(Q-Z.left),le=Math.abs(Q-Z.right),ye=Math.min(se,le);let Le;const Pe=C/v*(w+1);if(Z.isDash){const Me=w-Math.abs(Pe);Le=Math.sqrt(ye*ye+Me*Me)}else Le=w-Math.sqrt(ye*ye+Pe*Pe);this.data[B+Q]=Math.max(0,Math.min(255,Le+128))}}}addRegularDash(a){for(let j=a.length-1;j>=0;--j){const Z=a[j],Q=a[j+1];Z.zeroLength?a.splice(j,1):Q&&Q.isDash===Z.isDash&&(Q.left=Z.left,a.splice(j,1))}const d=a[0],v=a[a.length-1];d.isDash===v.isDash&&(d.left=v.left-this.width,v.right=d.right+this.width);const w=this.width*this.nextRow;let C=0,B=a[C];for(let j=0;j<this.width;j++){j/B.right>1&&(B=a[++C]);const Z=Math.abs(j-B.left),Q=Math.abs(j-B.right),se=Math.min(Z,Q);this.data[w+j]=Math.max(0,Math.min(255,(B.isDash?se:-se)+128))}}addDash(a,d){const v=d?7:0,w=2*v+1;if(this.nextRow+w>this.height)return l.w("LineAtlas out of space"),null;let C=0;for(let j=0;j<a.length;j++)C+=a[j];if(C!==0){const j=this.width/C,Z=this.getDashRanges(a,this.width,j);d?this.addRoundDash(Z,j,v):this.addRegularDash(Z)}const B={y:(this.nextRow+v+.5)/this.height,height:2*v/this.height,width:C};return this.nextRow+=w,this.dirty=!0,B}bind(a){const d=a.gl;this.texture?(d.bindTexture(d.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,d.texSubImage2D(d.TEXTURE_2D,0,0,0,this.width,this.height,d.ALPHA,d.UNSIGNED_BYTE,this.data))):(this.texture=d.createTexture(),d.bindTexture(d.TEXTURE_2D,this.texture),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texImage2D(d.TEXTURE_2D,0,d.ALPHA,this.width,this.height,0,d.ALPHA,d.UNSIGNED_BYTE,this.data))}}const xe="maplibre_preloaded_worker_pool";class Ee{constructor(){this.active={}}acquire(a){if(!this.workers)for(this.workers=[];this.workers.length<Ee.workerCount;)this.workers.push(new Worker(l.a.WORKER_URL));return this.active[a]=!0,this.workers.slice()}release(a){delete this.active[a],this.numActive()===0&&(this.workers.forEach(d=>{d.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[xe]}numActive(){return Object.keys(this.active).length}}const Ge=Math.floor(y.hardwareConcurrency/2);let $e,be;function He(){return $e||($e=new Ee),$e}Ee.workerCount=l.B(globalThis)?Math.max(Math.min(Ge,3),1):1;class it{constructor(a,d){this.workerPool=a,this.actors=[],this.currentActor=0,this.id=d;const v=this.workerPool.acquire(d);for(let w=0;w<v.length;w++){const C=new l.C(v[w],d);C.name=`Worker ${w}`,this.actors.push(C)}if(!this.actors.length)throw new Error("No actors found")}broadcast(a,d){const v=[];for(const w of this.actors)v.push(w.sendAsync({type:a,data:d}));return Promise.all(v)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(a=!0){this.actors.forEach(d=>{d.remove()}),this.actors=[],a&&this.workerPool.release(this.id)}registerMessageHandler(a,d){for(const v of this.actors)v.registerMessageHandler(a,d)}}function ct(){return be||(be=new it(He(),l.G),be.registerMessageHandler("GR",(S,a,d)=>l.m(a,d))),be}function xt(S,a){const d=l.F();return l.H(d,d,[1,1,0]),l.J(d,d,[.5*S.width,.5*S.height,1]),l.K(d,d,S.calculatePosMatrix(a.toUnwrapped()))}function Dt(S,a,d,v,w,C){const B=function(le,ye,Le){if(le)for(const Pe of le){const Me=ye[Pe];if(Me&&Me.source===Le&&Me.type==="fill-extrusion")return!0}else for(const Pe in ye){const Me=ye[Pe];if(Me.source===Le&&Me.type==="fill-extrusion")return!0}return!1}(w&&w.layers,a,S.id),j=C.maxPitchScaleFactor(),Z=S.tilesIn(v,j,B);Z.sort(Qt);const Q=[];for(const le of Z)Q.push({wrappedTileID:le.tileID.wrapped().key,queryResults:le.tile.queryRenderedFeatures(a,d,S._state,le.queryGeometry,le.cameraQueryGeometry,le.scale,w,C,j,xt(S.transform,le.tileID))});const se=function(le){const ye={},Le={};for(const Pe of le){const Me=Pe.queryResults,Se=Pe.wrappedTileID,Ke=Le[Se]=Le[Se]||{};for(const at in Me){const Fe=Me[at],Je=Ke[at]=Ke[at]||{},ut=ye[at]=ye[at]||[];for(const ft of Fe)Je[ft.featureIndex]||(Je[ft.featureIndex]=!0,ut.push(ft))}}return ye}(Q);for(const le in se)se[le].forEach(ye=>{const Le=ye.feature,Pe=S.getFeatureState(Le.layer["source-layer"],Le.id);Le.source=Le.layer.source,Le.layer["source-layer"]&&(Le.sourceLayer=Le.layer["source-layer"]),Le.state=Pe});return se}function Qt(S,a){const d=S.tileID,v=a.tileID;return d.overscaledZ-v.overscaledZ||d.canonical.y-v.canonical.y||d.wrap-v.wrap||d.canonical.x-v.canonical.x}function Ft(S,a,d){return l._(this,void 0,void 0,function*(){let v=S;if(S.url?v=(yield l.h(a.transformRequest(S.url,"Source"),d)).data:yield y.frameAsync(d),!v)return null;const w=l.L(l.e(v,S),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in v&&v.vector_layers&&(w.vectorLayerIds=v.vector_layers.map(C=>C.id)),w})}class Kt{constructor(a,d){a&&(d?this.setSouthWest(a).setNorthEast(d):Array.isArray(a)&&(a.length===4?this.setSouthWest([a[0],a[1]]).setNorthEast([a[2],a[3]]):this.setSouthWest(a[0]).setNorthEast(a[1])))}setNorthEast(a){return this._ne=a instanceof l.M?new l.M(a.lng,a.lat):l.M.convert(a),this}setSouthWest(a){return this._sw=a instanceof l.M?new l.M(a.lng,a.lat):l.M.convert(a),this}extend(a){const d=this._sw,v=this._ne;let w,C;if(a instanceof l.M)w=a,C=a;else{if(!(a instanceof Kt))return Array.isArray(a)?a.length===4||a.every(Array.isArray)?this.extend(Kt.convert(a)):this.extend(l.M.convert(a)):a&&("lng"in a||"lon"in a)&&"lat"in a?this.extend(l.M.convert(a)):this;if(w=a._sw,C=a._ne,!w||!C)return this}return d||v?(d.lng=Math.min(w.lng,d.lng),d.lat=Math.min(w.lat,d.lat),v.lng=Math.max(C.lng,v.lng),v.lat=Math.max(C.lat,v.lat)):(this._sw=new l.M(w.lng,w.lat),this._ne=new l.M(C.lng,C.lat)),this}getCenter(){return new l.M((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new l.M(this.getWest(),this.getNorth())}getSouthEast(){return new l.M(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(a){const{lng:d,lat:v}=l.M.convert(a);let w=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(w=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=v&&v<=this._ne.lat&&w}static convert(a){return a instanceof Kt?a:a&&new Kt(a)}static fromLngLat(a,d=0){const v=360*d/40075017,w=v/Math.cos(Math.PI/180*a.lat);return new Kt(new l.M(a.lng-w,a.lat-v),new l.M(a.lng+w,a.lat+v))}}class Gt{constructor(a,d,v){this.bounds=Kt.convert(this.validateBounds(a)),this.minzoom=d||0,this.maxzoom=v||24}validateBounds(a){return Array.isArray(a)&&a.length===4?[Math.max(-180,a[0]),Math.max(-90,a[1]),Math.min(180,a[2]),Math.min(90,a[3])]:[-180,-90,180,90]}contains(a){const d=Math.pow(2,a.z),v=Math.floor(l.N(this.bounds.getWest())*d),w=Math.floor(l.O(this.bounds.getNorth())*d),C=Math.ceil(l.N(this.bounds.getEast())*d),B=Math.ceil(l.O(this.bounds.getSouth())*d);return a.x>=v&&a.x<C&&a.y>=w&&a.y<B}}class Tr extends l.E{constructor(a,d,v,w){if(super(),this.id=a,this.dispatcher=v,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.e(this,l.L(d,["url","scheme","tileSize","promoteId"])),this._options=l.e({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(w)}load(){return l._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const a=yield Ft(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),a&&(l.e(this,a),a.bounds&&(this.tileBounds=new Gt(a.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))}catch(a){this._tileJSONRequest=null,this.fire(new l.j(a))}})}loaded(){return this._loaded}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}onAdd(a){this.map=a,this.load()}setSourceProperty(a){this._tileJSONRequest&&this._tileJSONRequest.abort(),a(),this.load()}setTiles(a){return this.setSourceProperty(()=>{this._options.tiles=a}),this}setUrl(a){return this.setSourceProperty(()=>{this.url=a,this._options.url=a}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return l.e({},this._options)}loadTile(a){return l._(this,void 0,void 0,function*(){const d=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),v={request:this.map._requestManager.transformRequest(d,"Tile"),uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};v.request.collectResourceTiming=this._collectResourceTiming;let w="RT";if(a.actor&&a.state!=="expired"){if(a.state==="loading")return new Promise((C,B)=>{a.reloadPromise={resolve:C,reject:B}})}else a.actor=this.dispatcher.getActor(),w="LT";a.abortController=new AbortController;try{const C=yield a.actor.sendAsync({type:w,data:v},a.abortController);if(delete a.abortController,a.aborted)return;this._afterTileLoadWorkerResponse(a,C)}catch(C){if(delete a.abortController,a.aborted)return;if(C&&C.status!==404)throw C;this._afterTileLoadWorkerResponse(a,null)}})}_afterTileLoadWorkerResponse(a,d){if(d&&d.resourceTiming&&(a.resourceTiming=d.resourceTiming),d&&this.map._refreshExpiredTiles&&a.setExpiryData(d),a.loadVectorData(d,this.map.painter),a.reloadPromise){const v=a.reloadPromise;a.reloadPromise=null,this.loadTile(a).then(v.resolve).catch(v.reject)}}abortTile(a){return l._(this,void 0,void 0,function*(){a.abortController&&(a.abortController.abort(),delete a.abortController),a.actor&&(yield a.actor.sendAsync({type:"AT",data:{uid:a.uid,type:this.type,source:this.id}}))})}unloadTile(a){return l._(this,void 0,void 0,function*(){a.unloadVectorData(),a.actor&&(yield a.actor.sendAsync({type:"RMT",data:{uid:a.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class rt extends l.E{constructor(a,d,v,w){super(),this.id=a,this.dispatcher=v,this.setEventedParent(w),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.e({type:"raster"},d),l.e(this,l.L(d,["url","scheme","tileSize"]))}load(){return l._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const a=yield Ft(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,a&&(l.e(this,a),a.bounds&&(this.tileBounds=new Gt(a.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))}catch(a){this._tileJSONRequest=null,this.fire(new l.j(a))}})}loaded(){return this._loaded}onAdd(a){this.map=a,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(a){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),a(),this.load()}setTiles(a){return this.setSourceProperty(()=>{this._options.tiles=a}),this}setUrl(a){return this.setSourceProperty(()=>{this.url=a,this._options.url=a}),this}serialize(){return l.e({},this._options)}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}loadTile(a){return l._(this,void 0,void 0,function*(){const d=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);a.abortController=new AbortController;try{const v=yield z.getImage(this.map._requestManager.transformRequest(d,"Tile"),a.abortController,this.map._refreshExpiredTiles);if(delete a.abortController,a.aborted)return void(a.state="unloaded");if(v&&v.data){this.map._refreshExpiredTiles&&v.cacheControl&&v.expires&&a.setExpiryData({cacheControl:v.cacheControl,expires:v.expires});const w=this.map.painter.context,C=w.gl,B=v.data;a.texture=this.map.painter.getTileTexture(B.width),a.texture?a.texture.update(B,{useMipmap:!0}):(a.texture=new X(w,B,C.RGBA,{useMipmap:!0}),a.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE,C.LINEAR_MIPMAP_NEAREST),w.extTextureFilterAnisotropic&&C.texParameterf(C.TEXTURE_2D,w.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,w.extTextureFilterAnisotropicMax)),a.state="loaded"}}catch(v){if(delete a.abortController,a.aborted)a.state="unloaded";else if(v)throw a.state="errored",v}})}abortTile(a){return l._(this,void 0,void 0,function*(){a.abortController&&(a.abortController.abort(),delete a.abortController)})}unloadTile(a){return l._(this,void 0,void 0,function*(){a.texture&&this.map.painter.saveTileTexture(a.texture)})}hasTransition(){return!1}}class lt extends rt{constructor(a,d,v,w){super(a,d,v,w),this.type="raster-dem",this.maxzoom=22,this._options=l.e({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox",this.redFactor=d.redFactor,this.greenFactor=d.greenFactor,this.blueFactor=d.blueFactor,this.baseShift=d.baseShift}loadTile(a){return l._(this,void 0,void 0,function*(){const d=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),v=this.map._requestManager.transformRequest(d,"Tile");a.neighboringTiles=this._getNeighboringTiles(a.tileID),a.abortController=new AbortController;try{const w=yield z.getImage(v,a.abortController,this.map._refreshExpiredTiles);if(delete a.abortController,a.aborted)return void(a.state="unloaded");if(w&&w.data){const C=w.data;this.map._refreshExpiredTiles&&w.cacheControl&&w.expires&&a.setExpiryData({cacheControl:w.cacheControl,expires:w.expires});const B=l.b(C)&&l.S()?C:yield this.readImageNow(C),j={type:this.type,uid:a.uid,source:this.id,rawImageData:B,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!a.actor||a.state==="expired"){a.actor=this.dispatcher.getActor();const Z=yield a.actor.sendAsync({type:"LDT",data:j});a.dem=Z,a.needsHillshadePrepare=!0,a.needsTerrainPrepare=!0,a.state="loaded"}}}catch(w){if(delete a.abortController,a.aborted)a.state="unloaded";else if(w)throw a.state="errored",w}})}readImageNow(a){return l._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&l.U()){const d=a.width+2,v=a.height+2;try{return new l.R({width:d,height:v},yield l.V(a,-1,-1,d,v))}catch{}}return y.getImageData(a,1)})}_getNeighboringTiles(a){const d=a.canonical,v=Math.pow(2,d.z),w=(d.x-1+v)%v,C=d.x===0?a.wrap-1:a.wrap,B=(d.x+1+v)%v,j=d.x+1===v?a.wrap+1:a.wrap,Z={};return Z[new l.Q(a.overscaledZ,C,d.z,w,d.y).key]={backfilled:!1},Z[new l.Q(a.overscaledZ,j,d.z,B,d.y).key]={backfilled:!1},d.y>0&&(Z[new l.Q(a.overscaledZ,C,d.z,w,d.y-1).key]={backfilled:!1},Z[new l.Q(a.overscaledZ,a.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},Z[new l.Q(a.overscaledZ,j,d.z,B,d.y-1).key]={backfilled:!1}),d.y+1<v&&(Z[new l.Q(a.overscaledZ,C,d.z,w,d.y+1).key]={backfilled:!1},Z[new l.Q(a.overscaledZ,a.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},Z[new l.Q(a.overscaledZ,j,d.z,B,d.y+1).key]={backfilled:!1}),Z}unloadTile(a){return l._(this,void 0,void 0,function*(){a.demTexture&&this.map.painter.saveTileTexture(a.demTexture),a.fbo&&(a.fbo.destroy(),delete a.fbo),a.dem&&delete a.dem,delete a.neighboringTiles,a.state="unloaded",a.actor&&(yield a.actor.sendAsync({type:"RDT",data:{type:this.type,uid:a.uid,source:this.id}}))})}}class gt extends l.E{constructor(a,d,v,w){super(),this.id=a,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=v.getActor(),this.setEventedParent(w),this._data=d.data,this._options=l.e({},d),this._collectResourceTiming=d.collectResourceTiming,d.maxzoom!==void 0&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId;const C=l.W/this.tileSize;this.workerOptions=l.e({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:(d.buffer!==void 0?d.buffer:128)*C,tolerance:(d.tolerance!==void 0?d.tolerance:.375)*C,extent:l.W,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:d.clusterMaxZoom!==void 0?d.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,d.clusterMinPoints||2),extent:l.W,radius:(d.clusterRadius||50)*C,log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return l._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(a){this.map=a,this.load()}setData(a){return this._data=a,this._updateWorkerData(),this}updateData(a){return this._updateWorkerData(a),this}setClusterOptions(a){return this.workerOptions.cluster=a.cluster,a&&(a.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=a.clusterRadius),a.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=a.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(a){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:a,source:this.id}})}getClusterChildren(a){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:a,source:this.id}})}getClusterLeaves(a,d,v){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:a,limit:d,offset:v}})}_updateWorkerData(a){return l._(this,void 0,void 0,function*(){const d=l.e({type:this.type},this.workerOptions);a?d.dataDiff=a:typeof this._data=="string"?(d.request=this.map._requestManager.transformRequest(y.resolveURL(this._data),"Source"),d.request.collectResourceTiming=this._collectResourceTiming):d.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new l.k("dataloading",{dataType:"source"}));try{const v=yield this.actor.sendAsync({type:"LD",data:d});if(this._pendingLoads--,this._removed||v.abandoned)return void this.fire(new l.k("dataabort",{dataType:"source"}));let w=null;v.resourceTiming&&v.resourceTiming[this.id]&&(w=v.resourceTiming[this.id].slice(0));const C={dataType:"source"};this._collectResourceTiming&&w&&w.length>0&&l.e(C,{resourceTiming:w}),this.fire(new l.k("data",Object.assign(Object.assign({},C),{sourceDataType:"metadata"}))),this.fire(new l.k("data",Object.assign(Object.assign({},C),{sourceDataType:"content"})))}catch(v){if(this._pendingLoads--,this._removed)return void this.fire(new l.k("dataabort",{dataType:"source"}));this.fire(new l.j(v))}})}loaded(){return this._pendingLoads===0}loadTile(a){return l._(this,void 0,void 0,function*(){const d=a.actor?"RT":"LT";a.actor=this.actor;const v={type:this.type,uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};a.abortController=new AbortController;const w=yield this.actor.sendAsync({type:d,data:v},a.abortController);delete a.abortController,a.unloadVectorData(),a.aborted||a.loadVectorData(w,this.map.painter,d==="RT")})}abortTile(a){return l._(this,void 0,void 0,function*(){a.abortController&&(a.abortController.abort(),delete a.abortController),a.aborted=!0})}unloadTile(a){return l._(this,void 0,void 0,function*(){a.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:a.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return l.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var _t=l.X([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Pt extends l.E{constructor(a,d,v,w){super(),this.id=a,this.dispatcher=v,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(w),this.options=d}load(a){return l._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const d=yield z.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,d&&d.data&&(this.image=d.data,a&&(this.coordinates=a),this._finishLoading())}catch(d){this._request=null,this._loaded=!0,this.fire(new l.j(d))}})}loaded(){return this._loaded}updateImage(a){return a.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=a.url,this.load(a.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(a){this.map=a,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(a){this.coordinates=a;const d=a.map(l.Y.fromLngLat);this.tileID=function(w){let C=1/0,B=1/0,j=-1/0,Z=-1/0;for(const ye of w)C=Math.min(C,ye.x),B=Math.min(B,ye.y),j=Math.max(j,ye.x),Z=Math.max(Z,ye.y);const Q=Math.max(j-C,Z-B),se=Math.max(0,Math.floor(-Math.log(Q)/Math.LN2)),le=Math.pow(2,se);return new l.a0(se,Math.floor((C+j)/2*le),Math.floor((B+Z)/2*le))}(d),this.minzoom=this.maxzoom=this.tileID.z;const v=d.map(w=>this.tileID.getTilePoint(w)._round());return this._boundsArray=new l.Z,this._boundsArray.emplaceBack(v[0].x,v[0].y,0,0),this._boundsArray.emplaceBack(v[1].x,v[1].y,l.W,0),this._boundsArray.emplaceBack(v[3].x,v[3].y,0,l.W),this._boundsArray.emplaceBack(v[2].x,v[2].y,l.W,l.W),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const a=this.map.painter.context,d=a.gl;this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,_t.members)),this.boundsSegments||(this.boundsSegments=l.$.simpleSegment(0,0,4,2)),this.texture||(this.texture=new X(a,this.image,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let v=!1;for(const w in this.tiles){const C=this.tiles[w];C.state!=="loaded"&&(C.state="loaded",C.texture=this.texture,v=!0)}v&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(a){return l._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(a.tileID.canonical)?(this.tiles[String(a.tileID.wrap)]=a,a.buckets={}):a.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class je extends Pt{constructor(a,d,v,w){super(a,d,v,w),this.roundZoom=!0,this.type="video",this.options=d}load(){return l._(this,void 0,void 0,function*(){this._loaded=!1;const a=this.options;this.urls=[];for(const d of a.urls)this.urls.push(this.map._requestManager.transformRequest(d,"Source").url);try{const d=yield l.a2(this.urls);if(this._loaded=!0,!d)return;this.video=d,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(d){this.fire(new l.j(d))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(a){if(this.video){const d=this.video.seekable;a<d.start(0)||a>d.end(0)?this.fire(new l.j(new l.a1(`sources.${this.id}`,null,`Playback for this video can be set only between the ${d.start(0)} and ${d.end(0)}-second mark.`))):this.video.currentTime=a}}getVideo(){return this.video}onAdd(a){this.map||(this.map=a,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const a=this.map.painter.context,d=a.gl;this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,_t.members)),this.boundsSegments||(this.boundsSegments=l.$.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE),d.texSubImage2D(d.TEXTURE_2D,0,0,0,d.RGBA,d.UNSIGNED_BYTE,this.video)):(this.texture=new X(a,this.video,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let v=!1;for(const w in this.tiles){const C=this.tiles[w];C.state!=="loaded"&&(C.state="loaded",C.texture=this.texture,v=!0)}v&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class vt extends Pt{constructor(a,d,v,w){super(a,d,v,w),d.coordinates?Array.isArray(d.coordinates)&&d.coordinates.length===4&&!d.coordinates.some(C=>!Array.isArray(C)||C.length!==2||C.some(B=>typeof B!="number"))||this.fire(new l.j(new l.a1(`sources.${a}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.j(new l.a1(`sources.${a}`,null,'missing required property "coordinates"'))),d.animate&&typeof d.animate!="boolean"&&this.fire(new l.j(new l.a1(`sources.${a}`,null,'optional "animate" property must be a boolean value'))),d.canvas?typeof d.canvas=="string"||d.canvas instanceof HTMLCanvasElement||this.fire(new l.j(new l.a1(`sources.${a}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.j(new l.a1(`sources.${a}`,null,'missing required property "canvas"'))),this.options=d,this.animate=d.animate===void 0||d.animate}load(){return l._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(a){this.map=a,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let a=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,a=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,a=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const d=this.map.painter.context,v=d.gl;this.boundsBuffer||(this.boundsBuffer=d.createVertexBuffer(this._boundsArray,_t.members)),this.boundsSegments||(this.boundsSegments=l.$.simpleSegment(0,0,4,2)),this.texture?(a||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new X(d,this.canvas,v.RGBA,{premultiply:!0});let w=!1;for(const C in this.tiles){const B=this.tiles[C];B.state!=="loaded"&&(B.state="loaded",B.texture=this.texture,w=!0)}w&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const a of[this.canvas.width,this.canvas.height])if(isNaN(a)||a<=0)return!0;return!1}}const St={},Lt=S=>{switch(S){case"geojson":return gt;case"image":return Pt;case"raster":return rt;case"raster-dem":return lt;case"vector":return Tr;case"video":return je;case"canvas":return vt}return St[S]},en="RTLPluginLoaded";class wn extends l.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=ct()}_syncState(a){return this.status=a,this.dispatcher.broadcast("SRPS",{pluginStatus:a,pluginURL:this.url}).catch(d=>{throw this.status="error",d})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(a){return l._(this,arguments,void 0,function*(d,v=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=y.resolveURL(d),!this.url)throw new Error(`requested url ${d} is invalid`);if(this.status==="unavailable"){if(!v)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return l._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new l.k(en))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let gn=null;function bt(){return gn||(gn=new wn),gn}class Un{constructor(a,d){this.timeAdded=0,this.fadeEndTime=0,this.tileID=a,this.uid=l.a3(),this.uses=0,this.tileSize=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(a){const d=a+this.timeAdded;d<this.fadeEndTime||(this.fadeEndTime=d)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(a){this.demTexture&&a.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(a,d,v){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",a){a.featureIndex&&(this.latestFeatureIndex=a.featureIndex,a.rawTileData?(this.latestRawTileData=a.rawTileData,this.latestFeatureIndex.rawTileData=a.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=a.collisionBoxArray,this.buckets=function(w,C){const B={};if(!C)return B;for(const j of w){const Z=j.layerIds.map(Q=>C.getLayer(Q)).filter(Boolean);if(Z.length!==0){j.layers=Z,j.stateDependentLayerIds&&(j.stateDependentLayers=j.stateDependentLayerIds.map(Q=>Z.filter(se=>se.id===Q)[0]));for(const Q of Z)B[Q.id]=j}}return B}(a.buckets,d.style),this.hasSymbolBuckets=!1;for(const w in this.buckets){const C=this.buckets[w];if(C instanceof l.a5){if(this.hasSymbolBuckets=!0,!v)break;C.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const w in this.buckets){const C=this.buckets[w];if(C instanceof l.a5&&C.hasRTLText){this.hasRTLText=!0,bt().lazyLoad();break}}this.queryPadding=0;for(const w in this.buckets){const C=this.buckets[w];this.queryPadding=Math.max(this.queryPadding,d.style.getLayer(w).queryRadius(C))}a.imageAtlas&&(this.imageAtlas=a.imageAtlas),a.glyphAtlasImage&&(this.glyphAtlasImage=a.glyphAtlasImage)}else this.collisionBoxArray=new l.a4}unloadVectorData(){for(const a in this.buckets)this.buckets[a].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(a){return this.buckets[a.id]}upload(a){for(const v in this.buckets){const w=this.buckets[v];w.uploadPending()&&w.upload(a)}const d=a.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new X(a,this.imageAtlas.image,d.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new X(a,this.glyphAtlasImage,d.ALPHA),this.glyphAtlasImage=null)}prepare(a){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(a,this.imageAtlasTexture)}queryRenderedFeatures(a,d,v,w,C,B,j,Z,Q,se){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:w,cameraQueryGeometry:C,scale:B,tileSize:this.tileSize,pixelPosMatrix:se,transform:Z,params:j,queryPadding:this.queryPadding*Q},a,d,v):{}}querySourceFeatures(a,d){const v=this.latestFeatureIndex;if(!v||!v.rawTileData)return;const w=v.loadVTLayers(),C=d&&d.sourceLayer?d.sourceLayer:"",B=w._geojsonTileLayer||w[C];if(!B)return;const j=l.a6(d&&d.filter),{z:Z,x:Q,y:se}=this.tileID.canonical,le={z:Z,x:Q,y:se};for(let ye=0;ye<B.length;ye++){const Le=B.feature(ye);if(j.needGeometry){const Se=l.a7(Le,!0);if(!j.filter(new l.a8(this.tileID.overscaledZ),Se,this.tileID.canonical))continue}else if(!j.filter(new l.a8(this.tileID.overscaledZ),Le))continue;const Pe=v.getId(Le,C),Me=new l.a9(Le,Z,Q,se,Pe);Me.tile=le,a.push(Me)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(a){const d=this.expirationTime;if(a.cacheControl){const v=l.aa(a.cacheControl);v["max-age"]&&(this.expirationTime=Date.now()+1e3*v["max-age"])}else a.expires&&(this.expirationTime=new Date(a.expires).getTime());if(this.expirationTime){const v=Date.now();let w=!1;if(this.expirationTime>v)w=!1;else if(d)if(this.expirationTime<d)w=!0;else{const C=this.expirationTime-d;C?this.expirationTime=v+Math.max(C,3e4):w=!0}else w=!0;w?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(a,d){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(a).length===0)return;const v=this.latestFeatureIndex.loadVTLayers();for(const w in this.buckets){if(!d.style.hasLayer(w))continue;const C=this.buckets[w],B=C.layers[0].sourceLayer||"_geojsonTileLayer",j=v[B],Z=a[B];if(!j||!Z||Object.keys(Z).length===0)continue;C.update(Z,j,this.imageAtlas&&this.imageAtlas.patternPositions||{});const Q=d&&d.style&&d.style.getLayer(w);Q&&(this.queryPadding=Math.max(this.queryPadding,Q.queryRadius(C)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<y.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(a){this.symbolFadeHoldUntil=y.now()+a}setDependencies(a,d){const v={};for(const w of d)v[w]=!0;this.dependencies[a]=v}hasDependency(a,d){for(const v of a){const w=this.dependencies[v];if(w){for(const C of d)if(w[C])return!0}}return!1}}class yr{constructor(a,d){this.max=a,this.onRemove=d,this.reset()}reset(){for(const a in this.data)for(const d of this.data[a])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(a,d,v){const w=a.wrapped().key;this.data[w]===void 0&&(this.data[w]=[]);const C={value:d,timeout:void 0};if(v!==void 0&&(C.timeout=setTimeout(()=>{this.remove(a,C)},v)),this.data[w].push(C),this.order.push(w),this.order.length>this.max){const B=this._getAndRemoveByKey(this.order[0]);B&&this.onRemove(B)}return this}has(a){return a.wrapped().key in this.data}getAndRemove(a){return this.has(a)?this._getAndRemoveByKey(a.wrapped().key):null}_getAndRemoveByKey(a){const d=this.data[a].shift();return d.timeout&&clearTimeout(d.timeout),this.data[a].length===0&&delete this.data[a],this.order.splice(this.order.indexOf(a),1),d.value}getByKey(a){const d=this.data[a];return d?d[0].value:null}get(a){return this.has(a)?this.data[a.wrapped().key][0].value:null}remove(a,d){if(!this.has(a))return this;const v=a.wrapped().key,w=d===void 0?0:this.data[v].indexOf(d),C=this.data[v][w];return this.data[v].splice(w,1),C.timeout&&clearTimeout(C.timeout),this.data[v].length===0&&delete this.data[v],this.onRemove(C.value),this.order.splice(this.order.indexOf(v),1),this}setMaxSize(a){for(this.max=a;this.order.length>this.max;){const d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(a){const d=[];for(const v in this.data)for(const w of this.data[v])a(w.value)||d.push(w);for(const v of d)this.remove(v.value.tileID,v)}}class Vs{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(a,d,v){const w=String(d);if(this.stateChanges[a]=this.stateChanges[a]||{},this.stateChanges[a][w]=this.stateChanges[a][w]||{},l.e(this.stateChanges[a][w],v),this.deletedStates[a]===null){this.deletedStates[a]={};for(const C in this.state[a])C!==w&&(this.deletedStates[a][C]=null)}else if(this.deletedStates[a]&&this.deletedStates[a][w]===null){this.deletedStates[a][w]={};for(const C in this.state[a][w])v[C]||(this.deletedStates[a][w][C]=null)}else for(const C in v)this.deletedStates[a]&&this.deletedStates[a][w]&&this.deletedStates[a][w][C]===null&&delete this.deletedStates[a][w][C]}removeFeatureState(a,d,v){if(this.deletedStates[a]===null)return;const w=String(d);if(this.deletedStates[a]=this.deletedStates[a]||{},v&&d!==void 0)this.deletedStates[a][w]!==null&&(this.deletedStates[a][w]=this.deletedStates[a][w]||{},this.deletedStates[a][w][v]=null);else if(d!==void 0)if(this.stateChanges[a]&&this.stateChanges[a][w])for(v in this.deletedStates[a][w]={},this.stateChanges[a][w])this.deletedStates[a][w][v]=null;else this.deletedStates[a][w]=null;else this.deletedStates[a]=null}getState(a,d){const v=String(d),w=l.e({},(this.state[a]||{})[v],(this.stateChanges[a]||{})[v]);if(this.deletedStates[a]===null)return{};if(this.deletedStates[a]){const C=this.deletedStates[a][d];if(C===null)return{};for(const B in C)delete w[B]}return w}initializeTileState(a,d){a.setFeatureState(this.state,d)}coalesceChanges(a,d){const v={};for(const w in this.stateChanges){this.state[w]=this.state[w]||{};const C={};for(const B in this.stateChanges[w])this.state[w][B]||(this.state[w][B]={}),l.e(this.state[w][B],this.stateChanges[w][B]),C[B]=this.state[w][B];v[w]=C}for(const w in this.deletedStates){this.state[w]=this.state[w]||{};const C={};if(this.deletedStates[w]===null)for(const B in this.state[w])C[B]={},this.state[w][B]={};else for(const B in this.deletedStates[w]){if(this.deletedStates[w][B]===null)this.state[w][B]={};else for(const j of Object.keys(this.deletedStates[w][B]))delete this.state[w][B][j];C[B]=this.state[w][B]}v[w]=v[w]||{},l.e(v[w],C)}if(this.stateChanges={},this.deletedStates={},Object.keys(v).length!==0)for(const w in a)a[w].setFeatureState(v,d)}}class Xr extends l.E{constructor(a,d,v){super(),this.id=a,this.dispatcher=v,this.on("data",w=>this._dataHandler(w)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((w,C,B,j)=>{const Z=new(Lt(C.type))(w,C,B,j);if(Z.id!==w)throw new Error(`Expected Source id to be ${w} instead of ${Z.id}`);return Z})(a,d,v,this),this._tiles={},this._cache=new yr(0,w=>this._unloadTile(w)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Vs,this._didEmitContent=!1,this._updated=!1}onAdd(a){this.map=a,this._maxTileCacheSize=a?a._maxTileCacheSize:null,this._maxTileCacheZoomLevels=a?a._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(a)}onRemove(a){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(a)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const a in this._tiles){const d=this._tiles[a];if(d.state!=="loaded"&&d.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(a,d,v){return l._(this,void 0,void 0,function*(){try{yield this._source.loadTile(a),this._tileLoaded(a,d,v)}catch(w){a.state="errored",w.status!==404?this._source.fire(new l.j(w,{tile:a})):this.update(this.transform,this.terrain)}})}_unloadTile(a){this._source.unloadTile&&this._source.unloadTile(a)}_abortTile(a){this._source.abortTile&&this._source.abortTile(a),this._source.fire(new l.k("dataabort",{tile:a,coord:a.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(a){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const d in this._tiles){const v=this._tiles[d];v.upload(a),v.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(a=>a.tileID).sort(kt).map(a=>a.key)}getRenderableIds(a){const d=[];for(const v in this._tiles)this._isIdRenderable(v,a)&&d.push(this._tiles[v]);return a?d.sort((v,w)=>{const C=v.tileID,B=w.tileID,j=new l.P(C.canonical.x,C.canonical.y)._rotate(this.transform.angle),Z=new l.P(B.canonical.x,B.canonical.y)._rotate(this.transform.angle);return C.overscaledZ-B.overscaledZ||Z.y-j.y||Z.x-j.x}).map(v=>v.tileID.key):d.map(v=>v.tileID).sort(kt).map(v=>v.key)}hasRenderableParent(a){const d=this.findLoadedParent(a,0);return!!d&&this._isIdRenderable(d.tileID.key)}_isIdRenderable(a,d){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(d||!this._tiles[a].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const a in this._tiles)this._tiles[a].state!=="errored"&&this._reloadTile(a,"reloading")}}_reloadTile(a,d){return l._(this,void 0,void 0,function*(){const v=this._tiles[a];v&&(v.state!=="loading"&&(v.state=d),yield this._loadTile(v,a,d))})}_tileLoaded(a,d,v){a.timeAdded=y.now(),v==="expired"&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(d,a),this.getSource().type==="raster-dem"&&a.dem&&this._backfillDEM(a),this._state.initializeTileState(a,this.map?this.map.painter:null),a.aborted||this._source.fire(new l.k("data",{dataType:"source",tile:a,coord:a.tileID}))}_backfillDEM(a){const d=this.getRenderableIds();for(let w=0;w<d.length;w++){const C=d[w];if(a.neighboringTiles&&a.neighboringTiles[C]){const B=this.getTileByID(C);v(a,B),v(B,a)}}function v(w,C){w.needsHillshadePrepare=!0,w.needsTerrainPrepare=!0;let B=C.tileID.canonical.x-w.tileID.canonical.x;const j=C.tileID.canonical.y-w.tileID.canonical.y,Z=Math.pow(2,w.tileID.canonical.z),Q=C.tileID.key;B===0&&j===0||Math.abs(j)>1||(Math.abs(B)>1&&(Math.abs(B+Z)===1?B+=Z:Math.abs(B-Z)===1&&(B-=Z)),C.dem&&w.dem&&(w.dem.backfillBorder(C.dem,B,j),w.neighboringTiles&&w.neighboringTiles[Q]&&(w.neighboringTiles[Q].backfilled=!0)))}}getTile(a){return this.getTileByID(a.key)}getTileByID(a){return this._tiles[a]}_retainLoadedChildren(a,d,v,w){for(const C in this._tiles){let B=this._tiles[C];if(w[C]||!B.hasData()||B.tileID.overscaledZ<=d||B.tileID.overscaledZ>v)continue;let j=B.tileID;for(;B&&B.tileID.overscaledZ>d+1;){const Q=B.tileID.scaledTo(B.tileID.overscaledZ-1);B=this._tiles[Q.key],B&&B.hasData()&&(j=Q)}let Z=j;for(;Z.overscaledZ>d;)if(Z=Z.scaledTo(Z.overscaledZ-1),a[Z.key]){w[j.key]=j;break}}}findLoadedParent(a,d){if(a.key in this._loadedParentTiles){const v=this._loadedParentTiles[a.key];return v&&v.tileID.overscaledZ>=d?v:null}for(let v=a.overscaledZ-1;v>=d;v--){const w=a.scaledTo(v),C=this._getLoadedTile(w);if(C)return C}}_getLoadedTile(a){const d=this._tiles[a.key];return d&&d.hasData()?d:this._cache.getByKey(a.wrapped().key)}updateCacheSize(a){const d=Math.ceil(a.width/this._source.tileSize)+1,v=Math.ceil(a.height/this._source.tileSize)+1,w=Math.floor(d*v*(this._maxTileCacheZoomLevels===null?l.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),C=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,w):w;this._cache.setMaxSize(C)}handleWrapJump(a){const d=Math.round((a-(this._prevLng===void 0?a:this._prevLng))/360);if(this._prevLng=a,d){const v={};for(const w in this._tiles){const C=this._tiles[w];C.tileID=C.tileID.unwrapTo(C.tileID.wrap+d),v[C.tileID.key]=C}this._tiles=v;for(const w in this._timers)clearTimeout(this._timers[w]),delete this._timers[w];for(const w in this._tiles)this._setTileReloadTimer(w,this._tiles[w])}}update(a,d){if(!this._sourceLoaded||this._paused)return;let v;this.transform=a,this.terrain=d,this.updateCacheSize(a),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?v=a.getVisibleUnwrappedCoordinates(this._source.tileID).map(se=>new l.Q(se.canonical.z,se.wrap,se.canonical.z,se.canonical.x,se.canonical.y)):(v=a.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:d}),this._source.hasTile&&(v=v.filter(se=>this._source.hasTile(se)))):v=[];const w=a.coveringZoomLevel(this._source),C=Math.max(w-Xr.maxOverzooming,this._source.minzoom),B=Math.max(w+Xr.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const se={};for(const le of v)if(le.canonical.z>this._source.minzoom){const ye=le.scaledTo(le.canonical.z-1);se[ye.key]=ye;const Le=le.scaledTo(Math.max(this._source.minzoom,Math.min(le.canonical.z,5)));se[Le.key]=Le}v=v.concat(Object.values(se))}const j=v.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,j&&this.fire(new l.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const Z=this._updateRetainedTiles(v,w);if(_n(this._source.type)){const se={},le={},ye=Object.keys(Z),Le=y.now();for(const Pe of ye){const Me=Z[Pe],Se=this._tiles[Pe];if(!Se||Se.fadeEndTime!==0&&Se.fadeEndTime<=Le)continue;const Ke=this.findLoadedParent(Me,C);Ke&&(this._addTile(Ke.tileID),se[Ke.tileID.key]=Ke.tileID),le[Pe]=Me}this._retainLoadedChildren(le,w,B,Z);for(const Pe in se)Z[Pe]||(this._coveredTiles[Pe]=!0,Z[Pe]=se[Pe]);if(d){const Pe={},Me={};for(const Se of v)this._tiles[Se.key].hasData()?Pe[Se.key]=Se:Me[Se.key]=Se;for(const Se in Me){const Ke=Me[Se].children(this._source.maxzoom);this._tiles[Ke[0].key]&&this._tiles[Ke[1].key]&&this._tiles[Ke[2].key]&&this._tiles[Ke[3].key]&&(Pe[Ke[0].key]=Z[Ke[0].key]=Ke[0],Pe[Ke[1].key]=Z[Ke[1].key]=Ke[1],Pe[Ke[2].key]=Z[Ke[2].key]=Ke[2],Pe[Ke[3].key]=Z[Ke[3].key]=Ke[3],delete Me[Se])}for(const Se in Me){const Ke=this.findLoadedParent(Me[Se],this._source.minzoom);if(Ke){Pe[Ke.tileID.key]=Z[Ke.tileID.key]=Ke.tileID;for(const at in Pe)Pe[at].isChildOf(Ke.tileID)&&delete Pe[at]}}for(const Se in this._tiles)Pe[Se]||(this._coveredTiles[Se]=!0)}}for(const se in Z)this._tiles[se].clearFadeHold();const Q=l.ab(this._tiles,Z);for(const se of Q){const le=this._tiles[se];le.hasSymbolBuckets&&!le.holdingForFade()?le.setHoldDuration(this.map._fadeDuration):le.hasSymbolBuckets&&!le.symbolFadeFinished()||this._removeTile(se)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(a)}_updateRetainedTiles(a,d){const v={},w={},C=Math.max(d-Xr.maxOverzooming,this._source.minzoom),B=Math.max(d+Xr.maxUnderzooming,this._source.minzoom),j={};for(const Z of a){const Q=this._addTile(Z);v[Z.key]=Z,Q.hasData()||d<this._source.maxzoom&&(j[Z.key]=Z)}this._retainLoadedChildren(j,d,B,v);for(const Z of a){let Q=this._tiles[Z.key];if(Q.hasData())continue;if(d+1>this._source.maxzoom){const le=Z.children(this._source.maxzoom)[0],ye=this.getTile(le);if(ye&&ye.hasData()){v[le.key]=le;continue}}else{const le=Z.children(this._source.maxzoom);if(v[le[0].key]&&v[le[1].key]&&v[le[2].key]&&v[le[3].key])continue}let se=Q.wasRequested();for(let le=Z.overscaledZ-1;le>=C;--le){const ye=Z.scaledTo(le);if(w[ye.key])break;if(w[ye.key]=!0,Q=this.getTile(ye),!Q&&se&&(Q=this._addTile(ye)),Q){const Le=Q.hasData();if((se||Le)&&(v[ye.key]=ye),se=Q.wasRequested(),Le)break}}}return v}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const a in this._tiles){const d=[];let v,w=this._tiles[a].tileID;for(;w.overscaledZ>0;){if(w.key in this._loadedParentTiles){v=this._loadedParentTiles[w.key];break}d.push(w.key);const C=w.scaledTo(w.overscaledZ-1);if(v=this._getLoadedTile(C),v)break;w=C}for(const C of d)this._loadedParentTiles[C]=v}}_addTile(a){let d=this._tiles[a.key];if(d)return d;d=this._cache.getAndRemove(a),d&&(this._setTileReloadTimer(a.key,d),d.tileID=a,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,d)));const v=d;return d||(d=new Un(a,this._source.tileSize*a.overscaleFactor()),this._loadTile(d,a.key,d.state)),d.uses++,this._tiles[a.key]=d,v||this._source.fire(new l.k("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d}_setTileReloadTimer(a,d){a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);const v=d.getExpiryTimeout();v&&(this._timers[a]=setTimeout(()=>{this._reloadTile(a,"expired"),delete this._timers[a]},v))}_removeTile(a){const d=this._tiles[a];d&&(d.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),d.uses>0||(d.hasData()&&d.state!=="reloading"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}_dataHandler(a){const d=a.sourceDataType;a.dataType==="source"&&d==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&a.dataType==="source"&&d==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const a in this._tiles)this._removeTile(a);this._cache.reset()}tilesIn(a,d,v){const w=[],C=this.transform;if(!C)return w;const B=v?C.getCameraQueryGeometry(a):a,j=a.map(Pe=>C.pointCoordinate(Pe,this.terrain)),Z=B.map(Pe=>C.pointCoordinate(Pe,this.terrain)),Q=this.getIds();let se=1/0,le=1/0,ye=-1/0,Le=-1/0;for(const Pe of Z)se=Math.min(se,Pe.x),le=Math.min(le,Pe.y),ye=Math.max(ye,Pe.x),Le=Math.max(Le,Pe.y);for(let Pe=0;Pe<Q.length;Pe++){const Me=this._tiles[Q[Pe]];if(Me.holdingForFade())continue;const Se=Me.tileID,Ke=Math.pow(2,C.zoom-Me.tileID.overscaledZ),at=d*Me.queryPadding*l.W/Me.tileSize/Ke,Fe=[Se.getTilePoint(new l.Y(se,le)),Se.getTilePoint(new l.Y(ye,Le))];if(Fe[0].x-at<l.W&&Fe[0].y-at<l.W&&Fe[1].x+at>=0&&Fe[1].y+at>=0){const Je=j.map(ft=>Se.getTilePoint(ft)),ut=Z.map(ft=>Se.getTilePoint(ft));w.push({tile:Me,tileID:Se,queryGeometry:Je,cameraQueryGeometry:ut,scale:Ke})}}return w}getVisibleCoordinates(a){const d=this.getRenderableIds(a).map(v=>this._tiles[v].tileID);for(const v of d)v.posMatrix=this.transform.calculatePosMatrix(v.toUnwrapped());return d}hasTransition(){if(this._source.hasTransition())return!0;if(_n(this._source.type)){const a=y.now();for(const d in this._tiles)if(this._tiles[d].fadeEndTime>=a)return!0}return!1}setFeatureState(a,d,v){this._state.updateState(a=a||"_geojsonTileLayer",d,v)}removeFeatureState(a,d,v){this._state.removeFeatureState(a=a||"_geojsonTileLayer",d,v)}getFeatureState(a,d){return this._state.getState(a=a||"_geojsonTileLayer",d)}setDependencies(a,d,v){const w=this._tiles[a];w&&w.setDependencies(d,v)}reloadTilesForDependencies(a,d){for(const v in this._tiles)this._tiles[v].hasDependency(a,d)&&this._reloadTile(v,"reloading");this._cache.filter(v=>!v.hasDependency(a,d))}}function kt(S,a){const d=Math.abs(2*S.wrap)-+(S.wrap<0),v=Math.abs(2*a.wrap)-+(a.wrap<0);return S.overscaledZ-a.overscaledZ||v-d||a.canonical.y-S.canonical.y||a.canonical.x-S.canonical.x}function _n(S){return S==="raster"||S==="image"||S==="video"}Xr.maxOverzooming=10,Xr.maxUnderzooming=3;class Pn{constructor(a,d){this.reset(a,d)}reset(a,d){this.points=a||[],this._distances=[0];for(let v=1;v<this.points.length;v++)this._distances[v]=this._distances[v-1]+this.points[v].dist(this.points[v-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(a){if(this.points.length===1)return this.points[0];a=l.ac(a,0,1);let d=1,v=this._distances[d];const w=a*this.paddedLength+this.padding;for(;v<w&&d<this._distances.length;)v=this._distances[++d];const C=d-1,B=this._distances[C],j=v-B,Z=j>0?(w-B)/j:0;return this.points[C].mult(1-Z).add(this.points[d].mult(Z))}}function Cr(S,a){let d=!0;return S==="always"||S!=="never"&&a!=="never"||(d=!1),d}class Zo{constructor(a,d,v){const w=this.boxCells=[],C=this.circleCells=[];this.xCellCount=Math.ceil(a/v),this.yCellCount=Math.ceil(d/v);for(let B=0;B<this.xCellCount*this.yCellCount;B++)w.push([]),C.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=a,this.height=d,this.xScale=this.xCellCount/a,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(a,d,v,w,C){this._forEachCell(d,v,w,C,this._insertBoxCell,this.boxUid++),this.boxKeys.push(a),this.bboxes.push(d),this.bboxes.push(v),this.bboxes.push(w),this.bboxes.push(C)}insertCircle(a,d,v,w){this._forEachCell(d-w,v-w,d+w,v+w,this._insertCircleCell,this.circleUid++),this.circleKeys.push(a),this.circles.push(d),this.circles.push(v),this.circles.push(w)}_insertBoxCell(a,d,v,w,C,B){this.boxCells[C].push(B)}_insertCircleCell(a,d,v,w,C,B){this.circleCells[C].push(B)}_query(a,d,v,w,C,B,j){if(v<0||a>this.width||w<0||d>this.height)return[];const Z=[];if(a<=0&&d<=0&&this.width<=v&&this.height<=w){if(C)return[{key:null,x1:a,y1:d,x2:v,y2:w}];for(let Q=0;Q<this.boxKeys.length;Q++)Z.push({key:this.boxKeys[Q],x1:this.bboxes[4*Q],y1:this.bboxes[4*Q+1],x2:this.bboxes[4*Q+2],y2:this.bboxes[4*Q+3]});for(let Q=0;Q<this.circleKeys.length;Q++){const se=this.circles[3*Q],le=this.circles[3*Q+1],ye=this.circles[3*Q+2];Z.push({key:this.circleKeys[Q],x1:se-ye,y1:le-ye,x2:se+ye,y2:le+ye})}}else this._forEachCell(a,d,v,w,this._queryCell,Z,{hitTest:C,overlapMode:B,seenUids:{box:{},circle:{}}},j);return Z}query(a,d,v,w){return this._query(a,d,v,w,!1,null)}hitTest(a,d,v,w,C,B){return this._query(a,d,v,w,!0,C,B).length>0}hitTestCircle(a,d,v,w,C){const B=a-v,j=a+v,Z=d-v,Q=d+v;if(j<0||B>this.width||Q<0||Z>this.height)return!1;const se=[];return this._forEachCell(B,Z,j,Q,this._queryCellCircle,se,{hitTest:!0,overlapMode:w,circle:{x:a,y:d,radius:v},seenUids:{box:{},circle:{}}},C),se.length>0}_queryCell(a,d,v,w,C,B,j,Z){const{seenUids:Q,hitTest:se,overlapMode:le}=j,ye=this.boxCells[C];if(ye!==null){const Pe=this.bboxes;for(const Me of ye)if(!Q.box[Me]){Q.box[Me]=!0;const Se=4*Me,Ke=this.boxKeys[Me];if(a<=Pe[Se+2]&&d<=Pe[Se+3]&&v>=Pe[Se+0]&&w>=Pe[Se+1]&&(!Z||Z(Ke))&&(!se||!Cr(le,Ke.overlapMode))&&(B.push({key:Ke,x1:Pe[Se],y1:Pe[Se+1],x2:Pe[Se+2],y2:Pe[Se+3]}),se))return!0}}const Le=this.circleCells[C];if(Le!==null){const Pe=this.circles;for(const Me of Le)if(!Q.circle[Me]){Q.circle[Me]=!0;const Se=3*Me,Ke=this.circleKeys[Me];if(this._circleAndRectCollide(Pe[Se],Pe[Se+1],Pe[Se+2],a,d,v,w)&&(!Z||Z(Ke))&&(!se||!Cr(le,Ke.overlapMode))){const at=Pe[Se],Fe=Pe[Se+1],Je=Pe[Se+2];if(B.push({key:Ke,x1:at-Je,y1:Fe-Je,x2:at+Je,y2:Fe+Je}),se)return!0}}}return!1}_queryCellCircle(a,d,v,w,C,B,j,Z){const{circle:Q,seenUids:se,overlapMode:le}=j,ye=this.boxCells[C];if(ye!==null){const Pe=this.bboxes;for(const Me of ye)if(!se.box[Me]){se.box[Me]=!0;const Se=4*Me,Ke=this.boxKeys[Me];if(this._circleAndRectCollide(Q.x,Q.y,Q.radius,Pe[Se+0],Pe[Se+1],Pe[Se+2],Pe[Se+3])&&(!Z||Z(Ke))&&!Cr(le,Ke.overlapMode))return B.push(!0),!0}}const Le=this.circleCells[C];if(Le!==null){const Pe=this.circles;for(const Me of Le)if(!se.circle[Me]){se.circle[Me]=!0;const Se=3*Me,Ke=this.circleKeys[Me];if(this._circlesCollide(Pe[Se],Pe[Se+1],Pe[Se+2],Q.x,Q.y,Q.radius)&&(!Z||Z(Ke))&&!Cr(le,Ke.overlapMode))return B.push(!0),!0}}}_forEachCell(a,d,v,w,C,B,j,Z){const Q=this._convertToXCellCoord(a),se=this._convertToYCellCoord(d),le=this._convertToXCellCoord(v),ye=this._convertToYCellCoord(w);for(let Le=Q;Le<=le;Le++)for(let Pe=se;Pe<=ye;Pe++)if(C.call(this,a,d,v,w,this.xCellCount*Pe+Le,B,j,Z))return}_convertToXCellCoord(a){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(a*this.xScale)))}_convertToYCellCoord(a){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(a*this.yScale)))}_circlesCollide(a,d,v,w,C,B){const j=w-a,Z=C-d,Q=v+B;return Q*Q>j*j+Z*Z}_circleAndRectCollide(a,d,v,w,C,B,j){const Z=(B-w)/2,Q=Math.abs(a-(w+Z));if(Q>Z+v)return!1;const se=(j-C)/2,le=Math.abs(d-(C+se));if(le>se+v)return!1;if(Q<=Z||le<=se)return!0;const ye=Q-Z,Le=le-se;return ye*ye+Le*Le<=v*v}}function Tn(S,a,d,v,w){const C=l.F();return a?(l.J(C,C,[1/w,1/w,1]),d||l.ad(C,C,v.angle)):l.K(C,v.labelPlaneMatrix,S),C}function Gs(S,a,d,v,w){if(a){const C=l.ae(S);return l.J(C,C,[w,w,1]),d||l.ad(C,C,-v.angle),C}return v.glCoordMatrix}function Vr(S,a,d){let v;d?(v=[S.x,S.y,d(S.x,S.y),1],l.af(v,v,a)):(v=[S.x,S.y,0,1],ht(v,v,a));const w=v[3];return{point:new l.P(v[0]/w,v[1]/w),signedDistanceFromCamera:w}}function Oe(S,a){return .5+S/a*.5}function K(S,a){const d=S[0]/S[3],v=S[1]/S[3];return d>=-a[0]&&d<=a[0]&&v>=-a[1]&&v<=a[1]}function te(S,a,d,v,w,C,B,j,Z,Q){const se=v?S.textSizeData:S.iconSizeData,le=l.ag(se,d.transform.zoom),ye=[256/d.width*2+1,256/d.height*2+1],Le=v?S.text.dynamicLayoutVertexArray:S.icon.dynamicLayoutVertexArray;Le.clear();const Pe=S.lineVertexArray,Me=v?S.text.placedSymbolArray:S.icon.placedSymbolArray,Se=d.transform.width/d.transform.height;let Ke=!1;for(let at=0;at<Me.length;at++){const Fe=Me.get(at);if(Fe.hidden||Fe.writingMode===l.ah.vertical&&!Ke){et(Fe.numGlyphs,Le);continue}let Je;if(Ke=!1,Q?(Je=[Fe.anchorX,Fe.anchorY,Q(Fe.anchorX,Fe.anchorY),1],l.af(Je,Je,a)):(Je=[Fe.anchorX,Fe.anchorY,0,1],ht(Je,Je,a)),!K(Je,ye)){et(Fe.numGlyphs,Le);continue}const ut=Oe(d.transform.cameraToCenterDistance,Je[3]),ft=l.ai(se,le,Fe),mt=B?ft/ut:ft*ut,Tt=new l.P(Fe.anchorX,Fe.anchorY),Et=Vr(Tt,w,Q).point,Mt={projections:{},offsets:{}},zt=ke(Fe,mt,!1,j,a,w,C,S.glyphOffsetArray,Pe,Le,Et,Tt,Mt,Se,Z,Q);Ke=zt.useVertical,(zt.notEnoughRoom||Ke||zt.needsFlipping&&ke(Fe,mt,!0,j,a,w,C,S.glyphOffsetArray,Pe,Le,Et,Tt,Mt,Se,Z,Q).notEnoughRoom)&&et(Fe.numGlyphs,Le)}v?S.text.dynamicLayoutVertexBuffer.updateData(Le):S.icon.dynamicLayoutVertexBuffer.updateData(Le)}function ae(S,a,d,v,w,C,B,j,Z,Q,se,le,ye){const Le=j.glyphStartIndex+j.numGlyphs,Pe=j.lineStartIndex,Me=j.lineStartIndex+j.lineLength,Se=a.getoffsetX(j.glyphStartIndex),Ke=a.getoffsetX(Le-1),at=Qe(S*Se,d,v,w,C,B,j.segment,Pe,Me,Z,Q,se,le,ye);if(!at)return null;const Fe=Qe(S*Ke,d,v,w,C,B,j.segment,Pe,Me,Z,Q,se,le,ye);return Fe?{first:at,last:Fe}:null}function pe(S,a,d,v){return S===l.ah.horizontal&&Math.abs(d.y-a.y)>Math.abs(d.x-a.x)*v?{useVertical:!0}:(S===l.ah.vertical?a.y<d.y:a.x>d.x)?{needsFlipping:!0}:null}function ke(S,a,d,v,w,C,B,j,Z,Q,se,le,ye,Le,Pe,Me){const Se=a/24,Ke=S.lineOffsetX*Se,at=S.lineOffsetY*Se;let Fe;if(S.numGlyphs>1){const Je=S.glyphStartIndex+S.numGlyphs,ut=S.lineStartIndex,ft=S.lineStartIndex+S.lineLength,mt=ae(Se,j,Ke,at,d,se,le,S,Z,C,ye,Pe,Me);if(!mt)return{notEnoughRoom:!0};const Tt=Vr(mt.first.point,B,Me).point,Et=Vr(mt.last.point,B,Me).point;if(v&&!d){const Mt=pe(S.writingMode,Tt,Et,Le);if(Mt)return Mt}Fe=[mt.first];for(let Mt=S.glyphStartIndex+1;Mt<Je-1;Mt++)Fe.push(Qe(Se*j.getoffsetX(Mt),Ke,at,d,se,le,S.segment,ut,ft,Z,C,ye,Pe,Me));Fe.push(mt.last)}else{if(v&&!d){const ut=Vr(le,w,Me).point,ft=S.lineStartIndex+S.segment+1,mt=new l.P(Z.getx(ft),Z.gety(ft)),Tt=Vr(mt,w,Me),Et=Tt.signedDistanceFromCamera>0?Tt.point:ge(le,mt,ut,1,w,Me),Mt=pe(S.writingMode,ut,Et,Le);if(Mt)return Mt}const Je=Qe(Se*j.getoffsetX(S.glyphStartIndex),Ke,at,d,se,le,S.segment,S.lineStartIndex,S.lineStartIndex+S.lineLength,Z,C,ye,Pe,Me);if(!Je)return{notEnoughRoom:!0};Fe=[Je]}for(const Je of Fe)l.aj(Q,Je.point,Je.angle);return{}}function ge(S,a,d,v,w,C){const B=Vr(S.add(S.sub(a)._unit()),w,C).point,j=d.sub(B);return d.add(j._mult(v/j.mag()))}function ze(S,a){const{projectionCache:d,lineVertexArray:v,labelPlaneMatrix:w,tileAnchorPoint:C,distanceFromAnchor:B,getElevation:j,previousVertex:Z,direction:Q,absOffsetX:se}=a;if(d.projections[S])return d.projections[S];const le=new l.P(v.getx(S),v.gety(S)),ye=Vr(le,w,j);if(ye.signedDistanceFromCamera>0)return d.projections[S]=ye.point,ye.point;const Le=S-Q;return ge(B===0?C:new l.P(v.getx(Le),v.gety(Le)),le,Z,se-B+1,w,j)}function Ie(S,a,d){return S._unit()._perp()._mult(a*d)}function Ve(S,a,d,v,w,C,B,j){const{projectionCache:Z,direction:Q}=j;if(Z.offsets[S])return Z.offsets[S];const se=d.add(a);if(S+Q<v||S+Q>=w)return Z.offsets[S]=se,se;const le=ze(S+Q,j),ye=Ie(le.sub(d),B,Q),Le=d.add(ye),Pe=le.add(ye);return Z.offsets[S]=l.ak(C,se,Le,Pe)||se,Z.offsets[S]}function Qe(S,a,d,v,w,C,B,j,Z,Q,se,le,ye,Le){const Pe=v?S-a:S+a;let Me=Pe>0?1:-1,Se=0;v&&(Me*=-1,Se=Math.PI),Me<0&&(Se+=Math.PI);let Ke,at,Fe=Me>0?j+B:j+B+1,Je=w,ut=w,ft=0,mt=0;const Tt=Math.abs(Pe),Et=[];let Mt;for(;ft+mt<=Tt;){if(Fe+=Me,Fe<j||Fe>=Z)return null;ft+=mt,ut=Je,at=Ke;const $t={projectionCache:le,lineVertexArray:Q,labelPlaneMatrix:se,tileAnchorPoint:C,distanceFromAnchor:ft,getElevation:Le,previousVertex:ut,direction:Me,absOffsetX:Tt};if(Je=ze(Fe,$t),d===0)Et.push(ut),Mt=Je.sub(ut);else{let yn;const Nn=Je.sub(ut);yn=Nn.mag()===0?Ie(ze(Fe+Me,$t).sub(Je),d,Me):Ie(Nn,d,Me),at||(at=ut.add(yn)),Ke=Ve(Fe,yn,Je,j,Z,at,d,$t),Et.push(at),Mt=Ke.sub(at)}mt=Mt.mag()}const zt=Mt._mult((Tt-ft)/mt)._add(at||ut),Mn=Se+Math.atan2(Je.y-ut.y,Je.x-ut.x);return Et.push(zt),{point:zt,angle:ye?Mn:0,path:Et}}const ot=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function et(S,a){for(let d=0;d<S;d++){const v=a.length;a.resize(v+4),a.float32.set(ot,3*v)}}function ht(S,a,d){const v=a[0],w=a[1];return S[0]=d[0]*v+d[4]*w+d[12],S[1]=d[1]*v+d[5]*w+d[13],S[3]=d[3]*v+d[7]*w+d[15],S}const Zt=100;class an{constructor(a,d=new Zo(a.width+200,a.height+200,25),v=new Zo(a.width+200,a.height+200,25)){this.transform=a,this.grid=d,this.ignoredGrid=v,this.pitchfactor=Math.cos(a._pitch)*a.cameraToCenterDistance,this.screenRightBoundary=a.width+Zt,this.screenBottomBoundary=a.height+Zt,this.gridRightBoundary=a.width+200,this.gridBottomBoundary=a.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(a,d,v,w,C,B){const j=this.projectAndGetPerspectiveRatio(w,a.anchorPointX,a.anchorPointY,B),Z=v*j.perspectiveRatio,Q=a.x1*Z+j.point.x,se=a.y1*Z+j.point.y,le=a.x2*Z+j.point.x,ye=a.y2*Z+j.point.y;return!this.isInsideGrid(Q,se,le,ye)||d!=="always"&&this.grid.hitTest(Q,se,le,ye,d,C)||j.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[Q,se,le,ye],offscreen:this.isOffscreen(Q,se,le,ye)}}placeCollisionCircles(a,d,v,w,C,B,j,Z,Q,se,le,ye,Le,Pe){const Me=[],Se=new l.P(d.anchorX,d.anchorY),Ke=Vr(Se,B,Pe),at=Oe(this.transform.cameraToCenterDistance,Ke.signedDistanceFromCamera),Fe=(se?C/at:C*at)/l.ao,Je=Vr(Se,j,Pe).point,ut=ae(Fe,w,d.lineOffsetX*Fe,d.lineOffsetY*Fe,!1,Je,Se,d,v,j,{projections:{},offsets:{}},!1,Pe);let ft=!1,mt=!1,Tt=!0;if(ut){const Et=.5*ye*at+Le,Mt=new l.P(-100,-100),zt=new l.P(this.screenRightBoundary,this.screenBottomBoundary),Mn=new Pn,$t=ut.first,yn=ut.last;let Nn=[];for(let zn=$t.path.length-1;zn>=1;zn--)Nn.push($t.path[zn]);for(let zn=1;zn<yn.path.length;zn++)Nn.push(yn.path[zn]);const nr=2.5*Et;if(Z){const zn=Nn.map(Vn=>Vr(Vn,Z,Pe));Nn=zn.some(Vn=>Vn.signedDistanceFromCamera<=0)?[]:zn.map(Vn=>Vn.point)}let Ln=[];if(Nn.length>0){const zn=Nn[0].clone(),Vn=Nn[0].clone();for(let wi=1;wi<Nn.length;wi++)zn.x=Math.min(zn.x,Nn[wi].x),zn.y=Math.min(zn.y,Nn[wi].y),Vn.x=Math.max(Vn.x,Nn[wi].x),Vn.y=Math.max(Vn.y,Nn[wi].y);Ln=zn.x>=Mt.x&&Vn.x<=zt.x&&zn.y>=Mt.y&&Vn.y<=zt.y?[Nn]:Vn.x<Mt.x||zn.x>zt.x||Vn.y<Mt.y||zn.y>zt.y?[]:l.al([Nn],Mt.x,Mt.y,zt.x,zt.y)}for(const zn of Ln){Mn.reset(zn,.25*Et);let Vn=0;Vn=Mn.length<=.5*Et?1:Math.ceil(Mn.paddedLength/nr)+1;for(let wi=0;wi<Vn;wi++){const Rr=wi/Math.max(Vn-1,1),ma=Mn.lerp(Rr),co=ma.x+Zt,fi=ma.y+Zt;Me.push(co,fi,Et,0);const ho=co-Et,ga=fi-Et,pu=co+Et,Eh=fi+Et;if(Tt=Tt&&this.isOffscreen(ho,ga,pu,Eh),mt=mt||this.isInsideGrid(ho,ga,pu,Eh),a!=="always"&&this.grid.hitTestCircle(co,fi,Et,a,le)&&(ft=!0,!Q))return{circles:[],offscreen:!1,collisionDetected:ft}}}}return{circles:!Q&&ft||!mt||at<this.perspectiveRatioCutoff?[]:Me,offscreen:Tt,collisionDetected:ft}}queryRenderedSymbols(a){if(a.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const d=[];let v=1/0,w=1/0,C=-1/0,B=-1/0;for(const se of a){const le=new l.P(se.x+Zt,se.y+Zt);v=Math.min(v,le.x),w=Math.min(w,le.y),C=Math.max(C,le.x),B=Math.max(B,le.y),d.push(le)}const j=this.grid.query(v,w,C,B).concat(this.ignoredGrid.query(v,w,C,B)),Z={},Q={};for(const se of j){const le=se.key;if(Z[le.bucketInstanceId]===void 0&&(Z[le.bucketInstanceId]={}),Z[le.bucketInstanceId][le.featureIndex])continue;const ye=[new l.P(se.x1,se.y1),new l.P(se.x2,se.y1),new l.P(se.x2,se.y2),new l.P(se.x1,se.y2)];l.am(d,ye)&&(Z[le.bucketInstanceId][le.featureIndex]=!0,Q[le.bucketInstanceId]===void 0&&(Q[le.bucketInstanceId]=[]),Q[le.bucketInstanceId].push(le.featureIndex))}return Q}insertCollisionBox(a,d,v,w,C,B){(v?this.ignoredGrid:this.grid).insert({bucketInstanceId:w,featureIndex:C,collisionGroupID:B,overlapMode:d},a[0],a[1],a[2],a[3])}insertCollisionCircles(a,d,v,w,C,B){const j=v?this.ignoredGrid:this.grid,Z={bucketInstanceId:w,featureIndex:C,collisionGroupID:B,overlapMode:d};for(let Q=0;Q<a.length;Q+=4)j.insertCircle(Z,a[Q],a[Q+1],a[Q+2])}projectAndGetPerspectiveRatio(a,d,v,w){let C;return w?(C=[d,v,w(d,v),1],l.af(C,C,a)):(C=[d,v,0,1],ht(C,C,a)),{point:new l.P((C[0]/C[3]+1)/2*this.transform.width+Zt,(-C[1]/C[3]+1)/2*this.transform.height+Zt),perspectiveRatio:.5+this.transform.cameraToCenterDistance/C[3]*.5}}isOffscreen(a,d,v,w){return v<Zt||a>=this.screenRightBoundary||w<Zt||d>this.screenBottomBoundary}isInsideGrid(a,d,v,w){return v>=0&&a<this.gridRightBoundary&&w>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const a=l.an([]);return l.H(a,a,[-100,-100,0]),a}}function sn(S,a,d){return a*(l.W/(S.tileSize*Math.pow(2,d-S.tileID.overscaledZ)))}class kn{constructor(a,d,v,w){this.opacity=a?Math.max(0,Math.min(1,a.opacity+(a.placed?d:-d))):w&&v?1:0,this.placed=v}isHidden(){return this.opacity===0&&!this.placed}}class ir{constructor(a,d,v,w,C){this.text=new kn(a?a.text:null,d,v,C),this.icon=new kn(a?a.icon:null,d,w,C)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class hr{constructor(a,d,v){this.text=a,this.icon=d,this.skipFade=v}}class lr{constructor(){this.invProjMatrix=l.F(),this.viewportMatrix=l.F(),this.circles=[]}}class vn{constructor(a,d,v,w,C){this.bucketInstanceId=a,this.featureIndex=d,this.sourceLayerIndex=v,this.bucketIndex=w,this.tileID=C}}class Nr{constructor(a){this.crossSourceCollisions=a,this.maxGroupID=0,this.collisionGroups={}}get(a){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[a]){const d=++this.maxGroupID;this.collisionGroups[a]={ID:d,predicate:v=>v.collisionGroupID===d}}return this.collisionGroups[a]}}function Gr(S,a,d,v,w){const{horizontalAlign:C,verticalAlign:B}=l.at(S);return new l.P(-(C-.5)*a+v[0]*w,-(B-.5)*d+v[1]*w)}function ji(S,a,d,v,w,C){const{x1:B,x2:j,y1:Z,y2:Q,anchorPointX:se,anchorPointY:le}=S,ye=new l.P(a,d);return v&&ye._rotate(w?C:-C),{x1:B+ye.x,y1:Z+ye.y,x2:j+ye.x,y2:Q+ye.y,anchorPointX:se,anchorPointY:le}}class bi{constructor(a,d,v,w,C){this.transform=a.clone(),this.terrain=d,this.collisionIndex=new an(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=v,this.retainedQueryData={},this.collisionGroups=new Nr(w),this.collisionCircleArrays={},this.prevPlacement=C,C&&(C.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(a,d,v,w){const C=v.getBucket(d),B=v.latestFeatureIndex;if(!C||!B||d.id!==C.layerIds[0])return;const j=v.collisionBoxArray,Z=C.layers[0].layout,Q=Math.pow(2,this.transform.zoom-v.tileID.overscaledZ),se=v.tileSize/l.W,le=this.transform.calculatePosMatrix(v.tileID.toUnwrapped()),ye=Z.get("text-pitch-alignment")==="map",Le=Z.get("text-rotation-alignment")==="map",Pe=sn(v,1,this.transform.zoom),Me=Tn(le,ye,Le,this.transform,Pe);let Se=null;if(ye){const at=Gs(le,ye,Le,this.transform,Pe);Se=l.K([],this.transform.labelPlaneMatrix,at)}this.retainedQueryData[C.bucketInstanceId]=new vn(C.bucketInstanceId,B,C.sourceLayerIndex,C.index,v.tileID);const Ke={bucket:C,layout:Z,posMatrix:le,textLabelPlaneMatrix:Me,labelToScreenMatrix:Se,scale:Q,textPixelRatio:se,holdingForFade:v.holdingForFade(),collisionBoxArray:j,partiallyEvaluatedTextSize:l.ag(C.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(C.sourceID)};if(w)for(const at of C.sortKeyRanges){const{sortKey:Fe,symbolInstanceStart:Je,symbolInstanceEnd:ut}=at;a.push({sortKey:Fe,symbolInstanceStart:Je,symbolInstanceEnd:ut,parameters:Ke})}else a.push({symbolInstanceStart:0,symbolInstanceEnd:C.symbolInstances.length,parameters:Ke})}attemptAnchorPlacement(a,d,v,w,C,B,j,Z,Q,se,le,ye,Le,Pe,Me,Se){const Ke=l.ap[a.textAnchor],at=[a.textOffset0,a.textOffset1],Fe=Gr(Ke,v,w,at,C),Je=this.collisionIndex.placeCollisionBox(ji(d,Fe.x,Fe.y,B,j,this.transform.angle),le,Z,Q,se.predicate,Se);if((!Me||this.collisionIndex.placeCollisionBox(ji(Me,Fe.x,Fe.y,B,j,this.transform.angle),le,Z,Q,se.predicate,Se).box.length!==0)&&Je.box.length>0){let ut;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ye.crossTileID]&&this.prevPlacement.placements[ye.crossTileID]&&this.prevPlacement.placements[ye.crossTileID].text&&(ut=this.prevPlacement.variableOffsets[ye.crossTileID].anchor),ye.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ye.crossTileID]={textOffset:at,width:v,height:w,anchor:Ke,textBoxScale:C,prevAnchor:ut},this.markUsedJustification(Le,Ke,ye,Pe),Le.allowVerticalPlacement&&(this.markUsedOrientation(Le,Pe,ye),this.placedOrientations[ye.crossTileID]=Pe),{shift:Fe,placedGlyphBoxes:Je}}}placeLayerBucketPart(a,d,v){const{bucket:w,layout:C,posMatrix:B,textLabelPlaneMatrix:j,labelToScreenMatrix:Z,textPixelRatio:Q,holdingForFade:se,collisionBoxArray:le,partiallyEvaluatedTextSize:ye,collisionGroup:Le}=a.parameters,Pe=C.get("text-optional"),Me=C.get("icon-optional"),Se=l.aq(C,"text-overlap","text-allow-overlap"),Ke=Se==="always",at=l.aq(C,"icon-overlap","icon-allow-overlap"),Fe=at==="always",Je=C.get("text-rotation-alignment")==="map",ut=C.get("text-pitch-alignment")==="map",ft=C.get("icon-text-fit")!=="none",mt=C.get("symbol-z-order")==="viewport-y",Tt=Ke&&(Fe||!w.hasIconData()||Me),Et=Fe&&(Ke||!w.hasTextData()||Pe);!w.collisionArrays&&le&&w.deserializeCollisionBoxes(le);const Mt=this.retainedQueryData[w.bucketInstanceId].tileID,zt=this.terrain?($t,yn)=>this.terrain.getElevation(Mt,$t,yn):null,Mn=($t,yn)=>{var Nn,nr;if(d[$t.crossTileID])return;if(se)return void(this.placements[$t.crossTileID]=new hr(!1,!1,!1));let Ln=!1,zn=!1,Vn=!0,wi=null,Rr={box:null,offscreen:null},ma={box:null,offscreen:null},co=null,fi=null,ho=null,ga=0,pu=0,Eh=0;yn.textFeatureIndex?ga=yn.textFeatureIndex:$t.useRuntimeCollisionCircles&&(ga=$t.featureIndex),yn.verticalTextFeatureIndex&&(pu=yn.verticalTextFeatureIndex);const km=yn.textBox;if(km){const Qi=eo=>{let pi=l.ah.horizontal;if(w.allowVerticalPlacement&&!eo&&this.prevPlacement){const Ka=this.prevPlacement.placedOrientations[$t.crossTileID];Ka&&(this.placedOrientations[$t.crossTileID]=Ka,pi=Ka,this.markUsedOrientation(w,pi,$t))}return pi},di=(eo,pi)=>{if(w.allowVerticalPlacement&&$t.numVerticalGlyphVertices>0&&yn.verticalTextBox){for(const Ka of w.writingModes)if(Ka===l.ah.vertical?(Rr=pi(),ma=Rr):Rr=eo(),Rr&&Rr.box&&Rr.box.length)break}else Rr=eo()},ai=$t.textAnchorOffsetStartIndex,Wa=$t.textAnchorOffsetEndIndex;if(Wa===ai){const eo=(pi,Ka)=>{const to=this.collisionIndex.placeCollisionBox(pi,Se,Q,B,Le.predicate,zt);return to&&to.box&&to.box.length&&(this.markUsedOrientation(w,Ka,$t),this.placedOrientations[$t.crossTileID]=Ka),to};di(()=>eo(km,l.ah.horizontal),()=>{const pi=yn.verticalTextBox;return w.allowVerticalPlacement&&$t.numVerticalGlyphVertices>0&&pi?eo(pi,l.ah.vertical):{box:null,offscreen:null}}),Qi(Rr&&Rr.box&&Rr.box.length)}else{let eo=l.ap[(nr=(Nn=this.prevPlacement)===null||Nn===void 0?void 0:Nn.variableOffsets[$t.crossTileID])===null||nr===void 0?void 0:nr.anchor];const pi=(to,Mi,Iv)=>{const Ox=to.x2-to.x1,Nf=to.y2-to.y1,Df=$t.textBoxScale,uy=ft&&at==="never"?Mi:null;let Th={box:[],offscreen:!1},Pv=Se==="never"?1:2,kx="never";eo&&Pv++;for(let Lv=0;Lv<Pv;Lv++){for(let Av=ai;Av<Wa;Av++){const cy=w.textAnchorOffsets.get(Av);if(eo&&cy.textAnchor!==eo)continue;const Ov=this.attemptAnchorPlacement(cy,to,Ox,Nf,Df,Je,ut,Q,B,Le,kx,$t,w,Iv,uy,zt);if(Ov&&(Th=Ov.placedGlyphBoxes,Th&&Th.box&&Th.box.length))return Ln=!0,wi=Ov.shift,Th}eo?eo=null:kx=Se}return Th};di(()=>pi(km,yn.iconBox,l.ah.horizontal),()=>{const to=yn.verticalTextBox;return w.allowVerticalPlacement&&!(Rr&&Rr.box&&Rr.box.length)&&$t.numVerticalGlyphVertices>0&&to?pi(to,yn.verticalIconBox,l.ah.vertical):{box:null,offscreen:null}}),Rr&&(Ln=Rr.box,Vn=Rr.offscreen);const Ka=Qi(Rr&&Rr.box);if(!Ln&&this.prevPlacement){const to=this.prevPlacement.variableOffsets[$t.crossTileID];to&&(this.variableOffsets[$t.crossTileID]=to,this.markUsedJustification(w,to.anchor,$t,Ka))}}}if(co=Rr,Ln=co&&co.box&&co.box.length>0,Vn=co&&co.offscreen,$t.useRuntimeCollisionCircles){const Qi=w.text.placedSymbolArray.get($t.centerJustifiedTextSymbolIndex),di=l.ai(w.textSizeData,ye,Qi),ai=C.get("text-padding");fi=this.collisionIndex.placeCollisionCircles(Se,Qi,w.lineVertexArray,w.glyphOffsetArray,di,B,j,Z,v,ut,Le.predicate,$t.collisionCircleDiameter,ai,zt),fi.circles.length&&fi.collisionDetected&&!v&&l.w("Collisions detected, but collision boxes are not shown"),Ln=Ke||fi.circles.length>0&&!fi.collisionDetected,Vn=Vn&&fi.offscreen}if(yn.iconFeatureIndex&&(Eh=yn.iconFeatureIndex),yn.iconBox){const Qi=di=>{const ai=ft&&wi?ji(di,wi.x,wi.y,Je,ut,this.transform.angle):di;return this.collisionIndex.placeCollisionBox(ai,at,Q,B,Le.predicate,zt)};ma&&ma.box&&ma.box.length&&yn.verticalIconBox?(ho=Qi(yn.verticalIconBox),zn=ho.box.length>0):(ho=Qi(yn.iconBox),zn=ho.box.length>0),Vn=Vn&&ho.offscreen}const Sh=Pe||$t.numHorizontalGlyphVertices===0&&$t.numVerticalGlyphVertices===0,mu=Me||$t.numIconVertices===0;if(Sh||mu?mu?Sh||(zn=zn&&Ln):Ln=zn&&Ln:zn=Ln=zn&&Ln,Ln&&co&&co.box&&this.collisionIndex.insertCollisionBox(co.box,Se,C.get("text-ignore-placement"),w.bucketInstanceId,ma&&ma.box&&pu?pu:ga,Le.ID),zn&&ho&&this.collisionIndex.insertCollisionBox(ho.box,at,C.get("icon-ignore-placement"),w.bucketInstanceId,Eh,Le.ID),fi&&(Ln&&this.collisionIndex.insertCollisionCircles(fi.circles,Se,C.get("text-ignore-placement"),w.bucketInstanceId,ga,Le.ID),v)){const Qi=w.bucketInstanceId;let di=this.collisionCircleArrays[Qi];di===void 0&&(di=this.collisionCircleArrays[Qi]=new lr);for(let ai=0;ai<fi.circles.length;ai+=4)di.circles.push(fi.circles[ai+0]),di.circles.push(fi.circles[ai+1]),di.circles.push(fi.circles[ai+2]),di.circles.push(fi.collisionDetected?1:0)}if($t.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(w.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[$t.crossTileID]=new hr(Ln||Tt,zn||Et,Vn||w.justReloaded),d[$t.crossTileID]=!0};if(mt){if(a.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const $t=w.getSortedSymbolIndexes(this.transform.angle);for(let yn=$t.length-1;yn>=0;--yn){const Nn=$t[yn];Mn(w.symbolInstances.get(Nn),w.collisionArrays[Nn])}}else for(let $t=a.symbolInstanceStart;$t<a.symbolInstanceEnd;$t++)Mn(w.symbolInstances.get($t),w.collisionArrays[$t]);if(v&&w.bucketInstanceId in this.collisionCircleArrays){const $t=this.collisionCircleArrays[w.bucketInstanceId];l.ar($t.invProjMatrix,B),$t.viewportMatrix=this.collisionIndex.getViewportMatrix()}w.justReloaded=!1}markUsedJustification(a,d,v,w){let C;C=w===l.ah.vertical?v.verticalPlacedTextSymbolIndex:{left:v.leftJustifiedTextSymbolIndex,center:v.centerJustifiedTextSymbolIndex,right:v.rightJustifiedTextSymbolIndex}[l.as(d)];const B=[v.leftJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.rightJustifiedTextSymbolIndex,v.verticalPlacedTextSymbolIndex];for(const j of B)j>=0&&(a.text.placedSymbolArray.get(j).crossTileID=C>=0&&j!==C?0:v.crossTileID)}markUsedOrientation(a,d,v){const w=d===l.ah.horizontal||d===l.ah.horizontalOnly?d:0,C=d===l.ah.vertical?d:0,B=[v.leftJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.rightJustifiedTextSymbolIndex];for(const j of B)a.text.placedSymbolArray.get(j).placedOrientation=w;v.verticalPlacedTextSymbolIndex&&(a.text.placedSymbolArray.get(v.verticalPlacedTextSymbolIndex).placedOrientation=C)}commit(a){this.commitTime=a,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let v=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const w=d?d.symbolFadeChange(a):1,C=d?d.opacities:{},B=d?d.variableOffsets:{},j=d?d.placedOrientations:{};for(const Z in this.placements){const Q=this.placements[Z],se=C[Z];se?(this.opacities[Z]=new ir(se,w,Q.text,Q.icon),v=v||Q.text!==se.text.placed||Q.icon!==se.icon.placed):(this.opacities[Z]=new ir(null,w,Q.text,Q.icon,Q.skipFade),v=v||Q.text||Q.icon)}for(const Z in C){const Q=C[Z];if(!this.opacities[Z]){const se=new ir(Q,w,!1,!1);se.isHidden()||(this.opacities[Z]=se,v=v||Q.text.placed||Q.icon.placed)}}for(const Z in B)this.variableOffsets[Z]||!this.opacities[Z]||this.opacities[Z].isHidden()||(this.variableOffsets[Z]=B[Z]);for(const Z in j)this.placedOrientations[Z]||!this.opacities[Z]||this.opacities[Z].isHidden()||(this.placedOrientations[Z]=j[Z]);if(d&&d.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");v?this.lastPlacementChangeTime=a:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:a)}updateLayerOpacities(a,d){const v={};for(const w of d){const C=w.getBucket(a);C&&w.latestFeatureIndex&&a.id===C.layerIds[0]&&this.updateBucketOpacities(C,v,w.collisionBoxArray)}}updateBucketOpacities(a,d,v){a.hasTextData()&&(a.text.opacityVertexArray.clear(),a.text.hasVisibleVertices=!1),a.hasIconData()&&(a.icon.opacityVertexArray.clear(),a.icon.hasVisibleVertices=!1),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexArray.clear(),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexArray.clear();const w=a.layers[0],C=w.layout,B=new ir(null,0,!1,!1,!0),j=C.get("text-allow-overlap"),Z=C.get("icon-allow-overlap"),Q=w._unevaluatedLayout.hasValue("text-variable-anchor")||w._unevaluatedLayout.hasValue("text-variable-anchor-offset"),se=C.get("text-rotation-alignment")==="map",le=C.get("text-pitch-alignment")==="map",ye=C.get("icon-text-fit")!=="none",Le=new ir(null,0,j&&(Z||!a.hasIconData()||C.get("icon-optional")),Z&&(j||!a.hasTextData()||C.get("text-optional")),!0);!a.collisionArrays&&v&&(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData())&&a.deserializeCollisionBoxes(v);const Pe=(Me,Se,Ke)=>{for(let at=0;at<Se/4;at++)Me.opacityVertexArray.emplaceBack(Ke);Me.hasVisibleVertices=Me.hasVisibleVertices||Ke!==gl};for(let Me=0;Me<a.symbolInstances.length;Me++){const Se=a.symbolInstances.get(Me),{numHorizontalGlyphVertices:Ke,numVerticalGlyphVertices:at,crossTileID:Fe}=Se;let Je=this.opacities[Fe];d[Fe]?Je=B:Je||(Je=Le,this.opacities[Fe]=Je),d[Fe]=!0;const ut=Se.numIconVertices>0,ft=this.placedOrientations[Se.crossTileID],mt=ft===l.ah.vertical,Tt=ft===l.ah.horizontal||ft===l.ah.horizontalOnly;if(Ke>0||at>0){const Et=Co(Je.text);Pe(a.text,Ke,mt?gl:Et),Pe(a.text,at,Tt?gl:Et);const Mt=Je.text.isHidden();[Se.rightJustifiedTextSymbolIndex,Se.centerJustifiedTextSymbolIndex,Se.leftJustifiedTextSymbolIndex].forEach($t=>{$t>=0&&(a.text.placedSymbolArray.get($t).hidden=Mt||mt?1:0)}),Se.verticalPlacedTextSymbolIndex>=0&&(a.text.placedSymbolArray.get(Se.verticalPlacedTextSymbolIndex).hidden=Mt||Tt?1:0);const zt=this.variableOffsets[Se.crossTileID];zt&&this.markUsedJustification(a,zt.anchor,Se,ft);const Mn=this.placedOrientations[Se.crossTileID];Mn&&(this.markUsedJustification(a,"left",Se,Mn),this.markUsedOrientation(a,Mn,Se))}if(ut){const Et=Co(Je.icon),Mt=!(ye&&Se.verticalPlacedIconSymbolIndex&&mt);Se.placedIconSymbolIndex>=0&&(Pe(a.icon,Se.numIconVertices,Mt?Et:gl),a.icon.placedSymbolArray.get(Se.placedIconSymbolIndex).hidden=Je.icon.isHidden()),Se.verticalPlacedIconSymbolIndex>=0&&(Pe(a.icon,Se.numVerticalIconVertices,Mt?gl:Et),a.icon.placedSymbolArray.get(Se.verticalPlacedIconSymbolIndex).hidden=Je.icon.isHidden())}if(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData()){const Et=a.collisionArrays[Me];if(Et){let Mt=new l.P(0,0);if(Et.textBox||Et.verticalTextBox){let Mn=!0;if(Q){const $t=this.variableOffsets[Fe];$t?(Mt=Gr($t.anchor,$t.width,$t.height,$t.textOffset,$t.textBoxScale),se&&Mt._rotate(le?this.transform.angle:-this.transform.angle)):Mn=!1}Et.textBox&&Yr(a.textCollisionBox.collisionVertexArray,Je.text.placed,!Mn||mt,Mt.x,Mt.y),Et.verticalTextBox&&Yr(a.textCollisionBox.collisionVertexArray,Je.text.placed,!Mn||Tt,Mt.x,Mt.y)}const zt=!!(!Tt&&Et.verticalIconBox);Et.iconBox&&Yr(a.iconCollisionBox.collisionVertexArray,Je.icon.placed,zt,ye?Mt.x:0,ye?Mt.y:0),Et.verticalIconBox&&Yr(a.iconCollisionBox.collisionVertexArray,Je.icon.placed,!zt,ye?Mt.x:0,ye?Mt.y:0)}}}if(a.sortFeatures(this.transform.angle),this.retainedQueryData[a.bucketInstanceId]&&(this.retainedQueryData[a.bucketInstanceId].featureSortOrder=a.featureSortOrder),a.hasTextData()&&a.text.opacityVertexBuffer&&a.text.opacityVertexBuffer.updateData(a.text.opacityVertexArray),a.hasIconData()&&a.icon.opacityVertexBuffer&&a.icon.opacityVertexBuffer.updateData(a.icon.opacityVertexArray),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexBuffer&&a.iconCollisionBox.collisionVertexBuffer.updateData(a.iconCollisionBox.collisionVertexArray),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexBuffer&&a.textCollisionBox.collisionVertexBuffer.updateData(a.textCollisionBox.collisionVertexArray),a.text.opacityVertexArray.length!==a.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${a.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${a.text.layoutVertexArray.length}) / 4`);if(a.icon.opacityVertexArray.length!==a.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${a.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${a.icon.layoutVertexArray.length}) / 4`);if(a.bucketInstanceId in this.collisionCircleArrays){const Me=this.collisionCircleArrays[a.bucketInstanceId];a.placementInvProjMatrix=Me.invProjMatrix,a.placementViewportMatrix=Me.viewportMatrix,a.collisionCircleArray=Me.circles,delete this.collisionCircleArrays[a.bucketInstanceId]}}symbolFadeChange(a){return this.fadeDuration===0?1:(a-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(a){return Math.max(0,(this.transform.zoom-a)/1.5)}hasTransitions(a){return this.stale||a-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(a,d){const v=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*v>a}setStale(){this.stale=!0}}function Yr(S,a,d,v,w){S.emplaceBack(a?1:0,d?1:0,v||0,w||0),S.emplaceBack(a?1:0,d?1:0,v||0,w||0),S.emplaceBack(a?1:0,d?1:0,v||0,w||0),S.emplaceBack(a?1:0,d?1:0,v||0,w||0)}const Fn=Math.pow(2,25),ur=Math.pow(2,24),To=Math.pow(2,17),or=Math.pow(2,16),cf=Math.pow(2,9),hm=Math.pow(2,8),ms=Math.pow(2,1);function Co(S){if(S.opacity===0&&!S.placed)return 0;if(S.opacity===1&&S.placed)return 4294967295;const a=S.placed?1:0,d=Math.floor(127*S.opacity);return d*Fn+a*ur+d*To+a*or+d*cf+a*hm+d*ms+a}const gl=0;class gs{constructor(a){this._sortAcrossTiles=a.layout.get("symbol-z-order")!=="viewport-y"&&!a.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(a,d,v,w,C){const B=this._bucketParts;for(;this._currentTileIndex<a.length;)if(d.getBucketParts(B,w,a[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,C())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,B.sort((j,Z)=>j.sortKey-Z.sortKey));this._currentPartIndex<B.length;)if(d.placeLayerBucketPart(B[this._currentPartIndex],this._seenCrossTileIDs,v),this._currentPartIndex++,C())return!0;return!1}}class ys{constructor(a,d,v,w,C,B,j,Z){this.placement=new bi(a,d,B,j,Z),this._currentPlacementIndex=v.length-1,this._forceFullPlacement=w,this._showCollisionBoxes=C,this._done=!1}isDone(){return this._done}continuePlacement(a,d,v){const w=y.now(),C=()=>!this._forceFullPlacement&&y.now()-w>2;for(;this._currentPlacementIndex>=0;){const B=d[a[this._currentPlacementIndex]],j=this.placement.collisionIndex.transform.zoom;if(B.type==="symbol"&&(!B.minzoom||B.minzoom<=j)&&(!B.maxzoom||B.maxzoom>j)){if(this._inProgressLayer||(this._inProgressLayer=new gs(B)),this._inProgressLayer.continuePlacement(v[B.source],this.placement,this._showCollisionBoxes,B,C))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(a){return this.placement.commit(a),this.placement}}const $a=512/l.W/2;class sr{constructor(a,d,v){this.tileID=a,this.bucketInstanceId=v,this._symbolsByKey={};const w=new Map;for(let C=0;C<d.length;C++){const B=d.get(C),j=B.key,Z=w.get(j);Z?Z.push(B):w.set(j,[B])}for(const[C,B]of w){const j={positions:B.map(Z=>({x:Math.floor(Z.anchorX*$a),y:Math.floor(Z.anchorY*$a)})),crossTileIDs:B.map(Z=>Z.crossTileID)};if(j.positions.length>128){const Z=new l.au(j.positions.length,16,Uint16Array);for(const{x:Q,y:se}of j.positions)Z.add(Q,se);Z.finish(),delete j.positions,j.index=Z}this._symbolsByKey[C]=j}}getScaledCoordinates(a,d){const{x:v,y:w,z:C}=this.tileID.canonical,{x:B,y:j,z:Z}=d.canonical,Q=$a/Math.pow(2,Z-C),se=(j*l.W+a.anchorY)*Q,le=w*l.W*$a;return{x:Math.floor((B*l.W+a.anchorX)*Q-v*l.W*$a),y:Math.floor(se-le)}}findMatches(a,d,v){const w=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z);for(let C=0;C<a.length;C++){const B=a.get(C);if(B.crossTileID)continue;const j=this._symbolsByKey[B.key];if(!j)continue;const Z=this.getScaledCoordinates(B,d);if(j.index){const Q=j.index.range(Z.x-w,Z.y-w,Z.x+w,Z.y+w).sort();for(const se of Q){const le=j.crossTileIDs[se];if(!v[le]){v[le]=!0,B.crossTileID=le;break}}}else if(j.positions)for(let Q=0;Q<j.positions.length;Q++){const se=j.positions[Q],le=j.crossTileIDs[Q];if(Math.abs(se.x-Z.x)<=w&&Math.abs(se.y-Z.y)<=w&&!v[le]){v[le]=!0,B.crossTileID=le;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:a})=>a)}}class Bn{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class ou{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(a){const d=Math.round((a-this.lng)/360);if(d!==0)for(const v in this.indexes){const w=this.indexes[v],C={};for(const B in w){const j=w[B];j.tileID=j.tileID.unwrapTo(j.tileID.wrap+d),C[j.tileID.key]=j}this.indexes[v]=C}this.lng=a}addBucket(a,d,v){if(this.indexes[a.overscaledZ]&&this.indexes[a.overscaledZ][a.key]){if(this.indexes[a.overscaledZ][a.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(a.overscaledZ,this.indexes[a.overscaledZ][a.key])}for(let C=0;C<d.symbolInstances.length;C++)d.symbolInstances.get(C).crossTileID=0;this.usedCrossTileIDs[a.overscaledZ]||(this.usedCrossTileIDs[a.overscaledZ]={});const w=this.usedCrossTileIDs[a.overscaledZ];for(const C in this.indexes){const B=this.indexes[C];if(Number(C)>a.overscaledZ)for(const j in B){const Z=B[j];Z.tileID.isChildOf(a)&&Z.findMatches(d.symbolInstances,a,w)}else{const j=B[a.scaledTo(Number(C)).key];j&&j.findMatches(d.symbolInstances,a,w)}}for(let C=0;C<d.symbolInstances.length;C++){const B=d.symbolInstances.get(C);B.crossTileID||(B.crossTileID=v.generate(),w[B.crossTileID]=!0)}return this.indexes[a.overscaledZ]===void 0&&(this.indexes[a.overscaledZ]={}),this.indexes[a.overscaledZ][a.key]=new sr(a,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(a,d){for(const v of d.getCrossTileIDsLists())for(const w of v)delete this.usedCrossTileIDs[a][w]}removeStaleBuckets(a){let d=!1;for(const v in this.indexes){const w=this.indexes[v];for(const C in w)a[w[C].bucketInstanceId]||(this.removeBucketCrossTileIDs(v,w[C]),delete w[C],d=!0)}return d}}class _s{constructor(){this.layerIndexes={},this.crossTileIDs=new Bn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(a,d,v){let w=this.layerIndexes[a.id];w===void 0&&(w=this.layerIndexes[a.id]=new ou);let C=!1;const B={};w.handleWrapJump(v);for(const j of d){const Z=j.getBucket(a);Z&&a.id===Z.layerIds[0]&&(Z.bucketInstanceId||(Z.bucketInstanceId=++this.maxBucketInstanceId),w.addBucket(j.tileID,Z,this.crossTileIDs)&&(C=!0),B[Z.bucketInstanceId]=!0)}return w.removeStaleBuckets(B)&&(C=!0),C}pruneUnusedLayers(a){const d={};a.forEach(v=>{d[v]=!0});for(const v in this.layerIndexes)d[v]||delete this.layerIndexes[v]}}const Lr=(S,a)=>l.t(S,a&&a.filter(d=>d.identifier!=="source.canvas")),th=l.av();class Cn extends l.E{constructor(a,d={}){super(),this._rtlPluginLoaded=()=>{for(const v in this.sourceCaches){const w=this.sourceCaches[v].getSource().type;w!=="vector"&&w!=="geojson"||this.sourceCaches[v].reload()}},this.map=a,this.dispatcher=new it(He(),a._getMapId()),this.dispatcher.registerMessageHandler("GG",(v,w)=>this.getGlyphs(v,w)),this.dispatcher.registerMessageHandler("GI",(v,w)=>this.getImages(v,w)),this.imageManager=new ue,this.imageManager.setEventedParent(this),this.glyphManager=new Be(a._requestManager,d.localIdeographFontFamily),this.lineAtlas=new ce(256,512),this.crossTileSymbolIndex=new _s,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.aw,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",l.ax()),bt().on(en,this._rtlPluginLoaded),this.on("data",v=>{if(v.dataType!=="source"||v.sourceDataType!=="metadata")return;const w=this.sourceCaches[v.sourceId];if(!w)return;const C=w.getSource();if(C&&C.vectorLayerIds)for(const B in this._layers){const j=this._layers[B];j.source===C.id&&this._validateLayer(j)}})}loadURL(a,d={},v){this.fire(new l.k("dataloading",{dataType:"style"})),d.validate=typeof d.validate!="boolean"||d.validate;const w=this.map._requestManager.transformRequest(a,"Style");this._loadStyleRequest=new AbortController,l.h(w,this._loadStyleRequest).then(C=>{this._loadStyleRequest=null,this._load(C.data,d,v)}).catch(C=>{this._loadStyleRequest=null,C&&this.fire(new l.j(C))})}loadJSON(a,d={},v){this.fire(new l.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,y.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,d.validate=d.validate!==!1,this._load(a,d,v)}).catch(()=>{})}loadEmpty(){this.fire(new l.k("dataloading",{dataType:"style"})),this._load(th,{validate:!1})}_load(a,d,v){var w;const C=d.transformStyle?d.transformStyle(v,a):a;if(!d.validate||!Lr(this,l.x(C))){this._loaded=!0,this.stylesheet=C;for(const B in C.sources)this.addSource(B,C.sources[B],{validate:!1});C.sprite?this._loadSprite(C.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(C.glyphs),this._createLayers(),this.light=new ve(this.stylesheet.light),this.map.setTerrain((w=this.stylesheet.terrain)!==null&&w!==void 0?w:null),this.fire(new l.k("data",{dataType:"style"})),this.fire(new l.k("style.load"))}}_createLayers(){const a=l.ay(this.stylesheet.layers);this.dispatcher.broadcast("SL",a),this._order=a.map(d=>d.id),this._layers={},this._serializedLayers=null;for(const d of a){const v=l.az(d);v.setEventedParent(this,{layer:{id:d.id}}),this._layers[d.id]=v}}_loadSprite(a,d=!1,v=void 0){let w;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(C,B,j,Z){return l._(this,void 0,void 0,function*(){const Q=Y(C),se=j>1?"@2x":"",le={},ye={};for(const{id:Le,url:Pe}of Q){const Me=B.transformRequest(B.normalizeSpriteURL(Pe,se,".json"),"SpriteJSON");le[Le]=l.h(Me,Z);const Se=B.transformRequest(B.normalizeSpriteURL(Pe,se,".png"),"SpriteImage");ye[Le]=z.getImage(Se,Z)}return yield Promise.all([...Object.values(le),...Object.values(ye)]),function(Le,Pe){return l._(this,void 0,void 0,function*(){const Me={};for(const Se in Le){Me[Se]={};const Ke=y.getImageCanvasContext((yield Pe[Se]).data),at=(yield Le[Se]).data;for(const Fe in at){const{width:Je,height:ut,x:ft,y:mt,sdf:Tt,pixelRatio:Et,stretchX:Mt,stretchY:zt,content:Mn}=at[Fe];Me[Se][Fe]={data:null,pixelRatio:Et,sdf:Tt,stretchX:Mt,stretchY:zt,content:Mn,spriteData:{width:Je,height:ut,x:ft,y:mt,context:Ke}}}}return Me})}(le,ye)})}(a,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(C=>{if(this._spriteRequest=null,C)for(const B in C){this._spritesImagesIds[B]=[];const j=this._spritesImagesIds[B]?this._spritesImagesIds[B].filter(Z=>!(Z in C)):[];for(const Z of j)this.imageManager.removeImage(Z),this._changedImages[Z]=!0;for(const Z in C[B]){const Q=B==="default"?Z:`${B}:${Z}`;this._spritesImagesIds[B].push(Q),Q in this.imageManager.images?this.imageManager.updateImage(Q,C[B][Z],!1):this.imageManager.addImage(Q,C[B][Z]),d&&(this._changedImages[Q]=!0)}}}).catch(C=>{this._spriteRequest=null,w=C,this.fire(new l.j(w))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),d&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.k("data",{dataType:"style"})),v&&v(w)})}_unloadSprite(){for(const a of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(a),this._changedImages[a]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}_validateLayer(a){const d=this.sourceCaches[a.source];if(!d)return;const v=a.sourceLayer;if(!v)return;const w=d.getSource();(w.type==="geojson"||w.vectorLayerIds&&w.vectorLayerIds.indexOf(v)===-1)&&this.fire(new l.j(new Error(`Source layer "${v}" does not exist on source "${w.id}" as specified by style layer "${a.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const a in this.sourceCaches)if(!this.sourceCaches[a].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(a){const d=this._serializedAllLayers();if(!a||a.length===0)return Object.values(d);const v=[];for(const w of a)d[w]&&v.push(d[w]);return v}_serializedAllLayers(){let a=this._serializedLayers;if(a)return a;a=this._serializedLayers={};const d=Object.keys(this._layers);for(const v of d){const w=this._layers[v];w.type!=="custom"&&(a[v]=w.serialize())}return a}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const a in this.sourceCaches)if(this.sourceCaches[a].hasTransition())return!0;for(const a in this._layers)if(this._layers[a].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(a){if(!this._loaded)return;const d=this._changed;if(d){const w=Object.keys(this._updatedLayers),C=Object.keys(this._removedLayers);(w.length||C.length)&&this._updateWorkerLayers(w,C);for(const B in this._updatedSources){const j=this._updatedSources[B];if(j==="reload")this._reloadSource(B);else{if(j!=="clear")throw new Error(`Invalid action ${j}`);this._clearSource(B)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const B in this._updatedPaintProps)this._layers[B].updateTransitions(a);this.light.updateTransitions(a),this._resetUpdates()}const v={};for(const w in this.sourceCaches){const C=this.sourceCaches[w];v[w]=C.used,C.used=!1}for(const w of this._order){const C=this._layers[w];C.recalculate(a,this._availableImages),!C.isHidden(a.zoom)&&C.source&&(this.sourceCaches[C.source].used=!0)}for(const w in v){const C=this.sourceCaches[w];!!v[w]!=!!C.used&&C.fire(new l.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:w}))}this.light.recalculate(a),this.z=a.zoom,d&&this.fire(new l.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const a=Object.keys(this._changedImages);if(a.length){for(const d in this.sourceCaches)this.sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],a);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const a in this.sourceCaches)this.sourceCaches[a].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(a,d){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(a),removedIds:d})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(a,d={}){var v;this._checkLoaded();const w=this.serialize();if(a=d.transformStyle?d.transformStyle(w,a):a,((v=d.validate)===null||v===void 0||v)&&Lr(this,l.x(a)))return!1;(a=l.aA(a)).layers=l.ay(a.layers);const C=l.aB(w,a),B=this._getOperationsToPerform(C);if(B.unimplemented.length>0)throw new Error(`Unimplemented: ${B.unimplemented.join(", ")}.`);if(B.operations.length===0)return!1;for(const j of B.operations)j();return this.stylesheet=a,this._serializedLayers=null,!0}_getOperationsToPerform(a){const d=[],v=[];for(const w of a)switch(w.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":d.push(()=>this.addLayer.apply(this,w.args));break;case"removeLayer":d.push(()=>this.removeLayer.apply(this,w.args));break;case"setPaintProperty":d.push(()=>this.setPaintProperty.apply(this,w.args));break;case"setLayoutProperty":d.push(()=>this.setLayoutProperty.apply(this,w.args));break;case"setFilter":d.push(()=>this.setFilter.apply(this,w.args));break;case"addSource":d.push(()=>this.addSource.apply(this,w.args));break;case"removeSource":d.push(()=>this.removeSource.apply(this,w.args));break;case"setLayerZoomRange":d.push(()=>this.setLayerZoomRange.apply(this,w.args));break;case"setLight":d.push(()=>this.setLight.apply(this,w.args));break;case"setGeoJSONSourceData":d.push(()=>this.setGeoJSONSourceData.apply(this,w.args));break;case"setGlyphs":d.push(()=>this.setGlyphs.apply(this,w.args));break;case"setSprite":d.push(()=>this.setSprite.apply(this,w.args));break;case"setTerrain":d.push(()=>this.map.setTerrain.apply(this,w.args));break;case"setTransition":d.push(()=>{});break;default:v.push(w.command)}return{operations:d,unimplemented:v}}addImage(a,d){if(this.getImage(a))return this.fire(new l.j(new Error(`An image named "${a}" already exists.`)));this.imageManager.addImage(a,d),this._afterImageUpdated(a)}updateImage(a,d){this.imageManager.updateImage(a,d)}getImage(a){return this.imageManager.getImage(a)}removeImage(a){if(!this.getImage(a))return this.fire(new l.j(new Error(`An image named "${a}" does not exist.`)));this.imageManager.removeImage(a),this._afterImageUpdated(a)}_afterImageUpdated(a){this._availableImages=this.imageManager.listImages(),this._changedImages[a]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(a,d,v={}){if(this._checkLoaded(),this.sourceCaches[a]!==void 0)throw new Error(`Source "${a}" already exists.`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(l.x.source,`sources.${a}`,d,null,v))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const w=this.sourceCaches[a]=new Xr(a,d,this.dispatcher);w.style=this,w.setEventedParent(this,()=>({isSourceLoaded:w.loaded(),source:w.serialize(),sourceId:a})),w.onAdd(this.map),this._changed=!0}removeSource(a){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error("There is no source with this ID");for(const v in this._layers)if(this._layers[v].source===a)return this.fire(new l.j(new Error(`Source "${a}" cannot be removed while layer "${v}" is using it.`)));const d=this.sourceCaches[a];delete this.sourceCaches[a],delete this._updatedSources[a],d.fire(new l.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:a})),d.setEventedParent(null),d.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(a,d){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error(`There is no source with this ID=${a}`);const v=this.sourceCaches[a].getSource();if(v.type!=="geojson")throw new Error(`geojsonSource.type is ${v.type}, which is !== 'geojson`);v.setData(d),this._changed=!0}getSource(a){return this.sourceCaches[a]&&this.sourceCaches[a].getSource()}addLayer(a,d,v={}){this._checkLoaded();const w=a.id;if(this.getLayer(w))return void this.fire(new l.j(new Error(`Layer "${w}" already exists on this map.`)));let C;if(a.type==="custom"){if(Lr(this,l.aC(a)))return;C=l.az(a)}else{if("source"in a&&typeof a.source=="object"&&(this.addSource(w,a.source),a=l.aA(a),a=l.e(a,{source:w})),this._validate(l.x.layer,`layers.${w}`,a,{arrayIndex:-1},v))return;C=l.az(a),this._validateLayer(C),C.setEventedParent(this,{layer:{id:w}})}const B=d?this._order.indexOf(d):this._order.length;if(d&&B===-1)this.fire(new l.j(new Error(`Cannot add layer "${w}" before non-existing layer "${d}".`)));else{if(this._order.splice(B,0,w),this._layerOrderChanged=!0,this._layers[w]=C,this._removedLayers[w]&&C.source&&C.type!=="custom"){const j=this._removedLayers[w];delete this._removedLayers[w],j.type!==C.type?this._updatedSources[C.source]="clear":(this._updatedSources[C.source]="reload",this.sourceCaches[C.source].pause())}this._updateLayer(C),C.onAdd&&C.onAdd(this.map)}}moveLayer(a,d){if(this._checkLoaded(),this._changed=!0,!this._layers[a])return void this.fire(new l.j(new Error(`The layer '${a}' does not exist in the map's style and cannot be moved.`)));if(a===d)return;const v=this._order.indexOf(a);this._order.splice(v,1);const w=d?this._order.indexOf(d):this._order.length;d&&w===-1?this.fire(new l.j(new Error(`Cannot move layer "${a}" before non-existing layer "${d}".`))):(this._order.splice(w,0,a),this._layerOrderChanged=!0)}removeLayer(a){this._checkLoaded();const d=this._layers[a];if(!d)return void this.fire(new l.j(new Error(`Cannot remove non-existing layer "${a}".`)));d.setEventedParent(null);const v=this._order.indexOf(a);this._order.splice(v,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[a]=d,delete this._layers[a],this._serializedLayers&&delete this._serializedLayers[a],delete this._updatedLayers[a],delete this._updatedPaintProps[a],d.onRemove&&d.onRemove(this.map)}getLayer(a){return this._layers[a]}getLayersOrder(){return[...this._order]}hasLayer(a){return a in this._layers}setLayerZoomRange(a,d,v){this._checkLoaded();const w=this.getLayer(a);w?w.minzoom===d&&w.maxzoom===v||(d!=null&&(w.minzoom=d),v!=null&&(w.maxzoom=v),this._updateLayer(w)):this.fire(new l.j(new Error(`Cannot set the zoom range of non-existing layer "${a}".`)))}setFilter(a,d,v={}){this._checkLoaded();const w=this.getLayer(a);if(w){if(!l.aD(w.filter,d))return d==null?(w.filter=void 0,void this._updateLayer(w)):void(this._validate(l.x.filter,`layers.${w.id}.filter`,d,null,v)||(w.filter=l.aA(d),this._updateLayer(w)))}else this.fire(new l.j(new Error(`Cannot filter non-existing layer "${a}".`)))}getFilter(a){return l.aA(this.getLayer(a).filter)}setLayoutProperty(a,d,v,w={}){this._checkLoaded();const C=this.getLayer(a);C?l.aD(C.getLayoutProperty(d),v)||(C.setLayoutProperty(d,v,w),this._updateLayer(C)):this.fire(new l.j(new Error(`Cannot style non-existing layer "${a}".`)))}getLayoutProperty(a,d){const v=this.getLayer(a);if(v)return v.getLayoutProperty(d);this.fire(new l.j(new Error(`Cannot get style of non-existing layer "${a}".`)))}setPaintProperty(a,d,v,w={}){this._checkLoaded();const C=this.getLayer(a);C?l.aD(C.getPaintProperty(d),v)||(C.setPaintProperty(d,v,w)&&this._updateLayer(C),this._changed=!0,this._updatedPaintProps[a]=!0,this._serializedLayers=null):this.fire(new l.j(new Error(`Cannot style non-existing layer "${a}".`)))}getPaintProperty(a,d){return this.getLayer(a).getPaintProperty(d)}setFeatureState(a,d){this._checkLoaded();const v=a.source,w=a.sourceLayer,C=this.sourceCaches[v];if(C===void 0)return void this.fire(new l.j(new Error(`The source '${v}' does not exist in the map's style.`)));const B=C.getSource().type;B==="geojson"&&w?this.fire(new l.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):B!=="vector"||w?(a.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),C.setFeatureState(w,a.id,d)):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(a,d){this._checkLoaded();const v=a.source,w=this.sourceCaches[v];if(w===void 0)return void this.fire(new l.j(new Error(`The source '${v}' does not exist in the map's style.`)));const C=w.getSource().type,B=C==="vector"?a.sourceLayer:void 0;C!=="vector"||B?d&&typeof a.id!="string"&&typeof a.id!="number"?this.fire(new l.j(new Error("A feature id is required to remove its specific state property."))):w.removeFeatureState(B,a.id,d):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(a){this._checkLoaded();const d=a.source,v=a.sourceLayer,w=this.sourceCaches[d];if(w!==void 0)return w.getSource().type!=="vector"||v?(a.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),w.getFeatureState(v,a.id)):void this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.j(new Error(`The source '${d}' does not exist in the map's style.`)))}getTransition(){return l.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const a=l.aE(this.sourceCaches,C=>C.serialize()),d=this._serializeByIds(this._order),v=this.map.getTerrain()||void 0,w=this.stylesheet;return l.aF({version:w.version,name:w.name,metadata:w.metadata,light:w.light,center:w.center,zoom:w.zoom,bearing:w.bearing,pitch:w.pitch,sprite:w.sprite,glyphs:w.glyphs,transition:w.transition,sources:a,layers:d,terrain:v},C=>C!==void 0)}_updateLayer(a){this._updatedLayers[a.id]=!0,a.source&&!this._updatedSources[a.source]&&this.sourceCaches[a.source].getSource().type!=="raster"&&(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(a){const d=B=>this._layers[B].type==="fill-extrusion",v={},w=[];for(let B=this._order.length-1;B>=0;B--){const j=this._order[B];if(d(j)){v[j]=B;for(const Z of a){const Q=Z[j];if(Q)for(const se of Q)w.push(se)}}}w.sort((B,j)=>j.intersectionZ-B.intersectionZ);const C=[];for(let B=this._order.length-1;B>=0;B--){const j=this._order[B];if(d(j))for(let Z=w.length-1;Z>=0;Z--){const Q=w[Z].feature;if(v[Q.layer.id]<B)break;C.push(Q),w.pop()}else for(const Z of a){const Q=Z[j];if(Q)for(const se of Q)C.push(se.feature)}}return C}queryRenderedFeatures(a,d,v){d&&d.filter&&this._validate(l.x.filter,"queryRenderedFeatures.filter",d.filter,null,d);const w={};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new l.j(new Error("parameters.layers must be an Array."))),[];for(const j of d.layers){const Z=this._layers[j];if(!Z)return this.fire(new l.j(new Error(`The layer '${j}' does not exist in the map's style and cannot be queried for features.`))),[];w[Z.source]=!0}}const C=[];d.availableImages=this._availableImages;const B=this._serializedAllLayers();for(const j in this.sourceCaches)d.layers&&!w[j]||C.push(Dt(this.sourceCaches[j],this._layers,B,a,d,v));return this.placement&&C.push(function(j,Z,Q,se,le,ye,Le){const Pe={},Me=ye.queryRenderedSymbols(se),Se=[];for(const Ke of Object.keys(Me).map(Number))Se.push(Le[Ke]);Se.sort(Qt);for(const Ke of Se){const at=Ke.featureIndex.lookupSymbolFeatures(Me[Ke.bucketInstanceId],Z,Ke.bucketIndex,Ke.sourceLayerIndex,le.filter,le.layers,le.availableImages,j);for(const Fe in at){const Je=Pe[Fe]=Pe[Fe]||[],ut=at[Fe];ut.sort((ft,mt)=>{const Tt=Ke.featureSortOrder;if(Tt){const Et=Tt.indexOf(ft.featureIndex);return Tt.indexOf(mt.featureIndex)-Et}return mt.featureIndex-ft.featureIndex});for(const ft of ut)Je.push(ft)}}for(const Ke in Pe)Pe[Ke].forEach(at=>{const Fe=at.feature,Je=Q[j[Ke].source].getFeatureState(Fe.layer["source-layer"],Fe.id);Fe.source=Fe.layer.source,Fe.layer["source-layer"]&&(Fe.sourceLayer=Fe.layer["source-layer"]),Fe.state=Je});return Pe}(this._layers,B,this.sourceCaches,a,d,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(C)}querySourceFeatures(a,d){d&&d.filter&&this._validate(l.x.filter,"querySourceFeatures.filter",d.filter,null,d);const v=this.sourceCaches[a];return v?function(w,C){const B=w.getRenderableIds().map(Q=>w.getTileByID(Q)),j=[],Z={};for(let Q=0;Q<B.length;Q++){const se=B[Q],le=se.tileID.canonical.key;Z[le]||(Z[le]=!0,se.querySourceFeatures(j,C))}return j}(v,d):[]}getLight(){return this.light.getLight()}setLight(a,d={}){this._checkLoaded();const v=this.light.getLight();let w=!1;for(const B in a)if(!l.aD(a[B],v[B])){w=!0;break}if(!w)return;const C={now:y.now(),transition:l.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(a,d),this.light.updateTransitions(C)}_validate(a,d,v,w,C={}){return(!C||C.validate!==!1)&&Lr(this,a.call(l.x,l.e({key:d,style:this.serialize(),value:v,styleSpec:l.v},w)))}_remove(a=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),bt().off(en,this._rtlPluginLoaded);for(const d in this._layers)this._layers[d].setEventedParent(null);for(const d in this.sourceCaches){const v=this.sourceCaches[d];v.setEventedParent(null),v.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),a&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(a)}_clearSource(a){this.sourceCaches[a].clearTiles()}_reloadSource(a){this.sourceCaches[a].resume(),this.sourceCaches[a].reload()}_updateSources(a){for(const d in this.sourceCaches)this.sourceCaches[d].update(a,this.map.terrain)}_generateCollisionBoxes(){for(const a in this.sourceCaches)this._reloadSource(a)}_updatePlacement(a,d,v,w,C=!1){let B=!1,j=!1;const Z={};for(const Q of this._order){const se=this._layers[Q];if(se.type!=="symbol")continue;if(!Z[se.source]){const ye=this.sourceCaches[se.source];Z[se.source]=ye.getRenderableIds(!0).map(Le=>ye.getTileByID(Le)).sort((Le,Pe)=>Pe.tileID.overscaledZ-Le.tileID.overscaledZ||(Le.tileID.isLessThan(Pe.tileID)?-1:1))}const le=this.crossTileSymbolIndex.addLayer(se,Z[se.source],a.center.lng);B=B||le}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((C=C||this._layerOrderChanged||v===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(y.now(),a.zoom))&&(this.pauseablePlacement=new ys(a,this.map.terrain,this._order,C,d,v,w,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Z),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(y.now()),j=!0),B&&this.pauseablePlacement.placement.setStale()),j||B)for(const Q of this._order){const se=this._layers[Q];se.type==="symbol"&&this.placement.updateLayerOpacities(se,Z[se.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(y.now())}_releaseSymbolFadeTiles(){for(const a in this.sourceCaches)this.sourceCaches[a].releaseSymbolFadeTiles()}getImages(a,d){return l._(this,void 0,void 0,function*(){const v=yield this.imageManager.getImages(d.icons);this._updateTilesForChangedImages();const w=this.sourceCaches[d.source];return w&&w.setDependencies(d.tileID.key,d.type,d.icons),v})}getGlyphs(a,d){return l._(this,void 0,void 0,function*(){const v=yield this.glyphManager.getGlyphs(d.stacks),w=this.sourceCaches[d.source];return w&&w.setDependencies(d.tileID.key,d.type,[""]),v})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(a,d={}){this._checkLoaded(),a&&this._validate(l.x.glyphs,"glyphs",a,null,d)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=a,this.glyphManager.entries={},this.glyphManager.setURL(a))}addSprite(a,d,v={},w){this._checkLoaded();const C=[{id:a,url:d}],B=[...Y(this.stylesheet.sprite),...C];this._validate(l.x.sprite,"sprite",B,null,v)||(this.stylesheet.sprite=B,this._loadSprite(C,!0,w))}removeSprite(a){this._checkLoaded();const d=Y(this.stylesheet.sprite);if(d.find(v=>v.id===a)){if(this._spritesImagesIds[a])for(const v of this._spritesImagesIds[a])this.imageManager.removeImage(v),this._changedImages[v]=!0;d.splice(d.findIndex(v=>v.id===a),1),this.stylesheet.sprite=d.length>0?d:void 0,delete this._spritesImagesIds[a],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}else this.fire(new l.j(new Error(`Sprite "${a}" doesn't exists on this map.`)))}getSprite(){return Y(this.stylesheet.sprite)}setSprite(a,d={},v){this._checkLoaded(),a&&this._validate(l.x.sprite,"sprite",a,null,d)||(this.stylesheet.sprite=a,a?this._loadSprite(a,!0,v):(this._unloadSprite(),v&&v(null)))}}var Jr=l.X([{name:"a_pos",type:"Int16",components:2}]),Hs="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const su={prelude:qn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:qn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:qn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:qn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:qn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:qn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:qn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:qn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:qn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:qn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:qn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:qn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:qn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:qn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:qn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:qn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:qn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:qn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:qn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:qn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:qn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:qn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:qn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:qn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:qn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:qn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:qn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Hs),terrainDepth:qn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Hs),terrainCoords:qn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Hs)};function qn(S,a){const d=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,v=a.match(/attribute ([\w]+) ([\w]+)/g),w=S.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),C=a.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),B=C?C.concat(w):w,j={};return{fragmentSource:S=S.replace(d,(Z,Q,se,le,ye)=>(j[ye]=!0,Q==="define"?`
#ifndef HAS_UNIFORM_u_${ye}
varying ${se} ${le} ${ye};
#else
uniform ${se} ${le} u_${ye};
#endif
`:`
#ifdef HAS_UNIFORM_u_${ye}
    ${se} ${le} ${ye} = u_${ye};
#endif
`)),vertexSource:a=a.replace(d,(Z,Q,se,le,ye)=>{const Le=le==="float"?"vec2":"vec4",Pe=ye.match(/color/)?"color":Le;return j[ye]?Q==="define"?`
#ifndef HAS_UNIFORM_u_${ye}
uniform lowp float u_${ye}_t;
attribute ${se} ${Le} a_${ye};
varying ${se} ${le} ${ye};
#else
uniform ${se} ${le} u_${ye};
#endif
`:Pe==="vec4"?`
#ifndef HAS_UNIFORM_u_${ye}
    ${ye} = a_${ye};
#else
    ${se} ${le} ${ye} = u_${ye};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ye}
    ${ye} = unpack_mix_${Pe}(a_${ye}, u_${ye}_t);
#else
    ${se} ${le} ${ye} = u_${ye};
#endif
`:Q==="define"?`
#ifndef HAS_UNIFORM_u_${ye}
uniform lowp float u_${ye}_t;
attribute ${se} ${Le} a_${ye};
#else
uniform ${se} ${le} u_${ye};
#endif
`:Pe==="vec4"?`
#ifndef HAS_UNIFORM_u_${ye}
    ${se} ${le} ${ye} = a_${ye};
#else
    ${se} ${le} ${ye} = u_${ye};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ye}
    ${se} ${le} ${ye} = unpack_mix_${Pe}(a_${ye}, u_${ye}_t);
#else
    ${se} ${le} ${ye} = u_${ye};
#endif
`}),staticAttributes:v,staticUniforms:B}}class Id{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(a,d,v,w,C,B,j,Z,Q){this.context=a;let se=this.boundPaintVertexBuffers.length!==w.length;for(let le=0;!se&&le<w.length;le++)this.boundPaintVertexBuffers[le]!==w[le]&&(se=!0);!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==v||se||this.boundIndexBuffer!==C||this.boundVertexOffset!==B||this.boundDynamicVertexBuffer!==j||this.boundDynamicVertexBuffer2!==Z||this.boundDynamicVertexBuffer3!==Q?this.freshBind(d,v,w,C,B,j,Z,Q):(a.bindVertexArray.set(this.vao),j&&j.bind(),C&&C.dynamicDraw&&C.bind(),Z&&Z.bind(),Q&&Q.bind())}freshBind(a,d,v,w,C,B,j,Z){const Q=a.numAttributes,se=this.context,le=se.gl;this.vao&&this.destroy(),this.vao=se.createVertexArray(),se.bindVertexArray.set(this.vao),this.boundProgram=a,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=v,this.boundIndexBuffer=w,this.boundVertexOffset=C,this.boundDynamicVertexBuffer=B,this.boundDynamicVertexBuffer2=j,this.boundDynamicVertexBuffer3=Z,d.enableAttributes(le,a);for(const ye of v)ye.enableAttributes(le,a);B&&B.enableAttributes(le,a),j&&j.enableAttributes(le,a),Z&&Z.enableAttributes(le,a),d.bind(),d.setVertexAttribPointers(le,a,C);for(const ye of v)ye.bind(),ye.setVertexAttribPointers(le,a,C);B&&(B.bind(),B.setVertexAttribPointers(le,a,C)),w&&w.bind(),j&&(j.bind(),j.setVertexAttribPointers(le,a,C)),Z&&(Z.bind(),Z.setVertexAttribPointers(le,a,C)),se.currentNumAttributes=Q}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function yl(S){const a=[];for(let d=0;d<S.length;d++){if(S[d]===null)continue;const v=S[d].split(" ");a.push(v.pop())}return a}class Wo{constructor(a,d,v,w,C,B){const j=a.gl;this.program=j.createProgram();const Z=yl(d.staticAttributes),Q=v?v.getBinderAttributes():[],se=Z.concat(Q),le=su.prelude.staticUniforms?yl(su.prelude.staticUniforms):[],ye=d.staticUniforms?yl(d.staticUniforms):[],Le=v?v.getBinderUniforms():[],Pe=le.concat(ye).concat(Le),Me=[];for(const ft of Pe)Me.indexOf(ft)<0&&Me.push(ft);const Se=v?v.defines():[];C&&Se.push("#define OVERDRAW_INSPECTOR;"),B&&Se.push("#define TERRAIN3D;");const Ke=Se.concat(su.prelude.fragmentSource,d.fragmentSource).join(`
`),at=Se.concat(su.prelude.vertexSource,d.vertexSource).join(`
`),Fe=j.createShader(j.FRAGMENT_SHADER);if(j.isContextLost())return void(this.failedToCreate=!0);if(j.shaderSource(Fe,Ke),j.compileShader(Fe),!j.getShaderParameter(Fe,j.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${j.getShaderInfoLog(Fe)}`);j.attachShader(this.program,Fe);const Je=j.createShader(j.VERTEX_SHADER);if(j.isContextLost())return void(this.failedToCreate=!0);if(j.shaderSource(Je,at),j.compileShader(Je),!j.getShaderParameter(Je,j.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${j.getShaderInfoLog(Je)}`);j.attachShader(this.program,Je),this.attributes={};const ut={};this.numAttributes=se.length;for(let ft=0;ft<this.numAttributes;ft++)se[ft]&&(j.bindAttribLocation(this.program,ft,se[ft]),this.attributes[se[ft]]=ft);if(j.linkProgram(this.program),!j.getProgramParameter(this.program,j.LINK_STATUS))throw new Error(`Program failed to link: ${j.getProgramInfoLog(this.program)}`);j.deleteShader(Je),j.deleteShader(Fe);for(let ft=0;ft<Me.length;ft++){const mt=Me[ft];if(mt&&!ut[mt]){const Tt=j.getUniformLocation(this.program,mt);Tt&&(ut[mt]=Tt)}}this.fixedUniforms=w(a,ut),this.terrainUniforms=((ft,mt)=>({u_depth:new l.aG(ft,mt.u_depth),u_terrain:new l.aG(ft,mt.u_terrain),u_terrain_dim:new l.aH(ft,mt.u_terrain_dim),u_terrain_matrix:new l.aI(ft,mt.u_terrain_matrix),u_terrain_unpack:new l.aJ(ft,mt.u_terrain_unpack),u_terrain_exaggeration:new l.aH(ft,mt.u_terrain_exaggeration)}))(a,ut),this.binderUniforms=v?v.getUniforms(a,ut):[]}draw(a,d,v,w,C,B,j,Z,Q,se,le,ye,Le,Pe,Me,Se,Ke,at){const Fe=a.gl;if(this.failedToCreate)return;if(a.program.set(this.program),a.setDepthMode(v),a.setStencilMode(w),a.setColorMode(C),a.setCullFace(B),Z){a.activeTexture.set(Fe.TEXTURE2),Fe.bindTexture(Fe.TEXTURE_2D,Z.depthTexture),a.activeTexture.set(Fe.TEXTURE3),Fe.bindTexture(Fe.TEXTURE_2D,Z.texture);for(const ut in this.terrainUniforms)this.terrainUniforms[ut].set(Z[ut])}for(const ut in this.fixedUniforms)this.fixedUniforms[ut].set(j[ut]);Me&&Me.setUniforms(a,this.binderUniforms,Le,{zoom:Pe});let Je=0;switch(d){case Fe.LINES:Je=2;break;case Fe.TRIANGLES:Je=3;break;case Fe.LINE_STRIP:Je=1}for(const ut of ye.get()){const ft=ut.vaos||(ut.vaos={});(ft[Q]||(ft[Q]=new Id)).bind(a,this,se,Me?Me.getPaintVertexBuffers():[],le,ut.vertexOffset,Se,Ke,at),Fe.drawElements(d,ut.primitiveLength*Je,Fe.UNSIGNED_SHORT,ut.primitiveOffset*Je*2)}}}function ii(S,a,d){const v=1/sn(d,1,a.transform.tileZoom),w=Math.pow(2,d.tileID.overscaledZ),C=d.tileSize*Math.pow(2,a.transform.tileZoom)/w,B=C*(d.tileID.canonical.x+d.tileID.wrap*w),j=C*d.tileID.canonical.y;return{u_image:0,u_texsize:d.imageAtlasTexture.size,u_scale:[v,S.fromScale,S.toScale],u_fade:S.t,u_pixel_coord_upper:[B>>16,j>>16],u_pixel_coord_lower:[65535&B,65535&j]}}const ua=(S,a,d,v)=>{const w=a.style.light,C=w.properties.get("position"),B=[C.x,C.y,C.z],j=function(){var Q=new l.A(9);return l.A!=Float32Array&&(Q[1]=0,Q[2]=0,Q[3]=0,Q[5]=0,Q[6]=0,Q[7]=0),Q[0]=1,Q[4]=1,Q[8]=1,Q}();w.properties.get("anchor")==="viewport"&&function(Q,se){var le=Math.sin(se),ye=Math.cos(se);Q[0]=ye,Q[1]=le,Q[2]=0,Q[3]=-le,Q[4]=ye,Q[5]=0,Q[6]=0,Q[7]=0,Q[8]=1}(j,-a.transform.angle),function(Q,se,le){var ye=se[0],Le=se[1],Pe=se[2];Q[0]=ye*le[0]+Le*le[3]+Pe*le[6],Q[1]=ye*le[1]+Le*le[4]+Pe*le[7],Q[2]=ye*le[2]+Le*le[5]+Pe*le[8]}(B,B,j);const Z=w.properties.get("color");return{u_matrix:S,u_lightpos:B,u_lightintensity:w.properties.get("intensity"),u_lightcolor:[Z.r,Z.g,Z.b],u_vertical_gradient:+d,u_opacity:v}},hf=(S,a,d,v,w,C,B)=>l.e(ua(S,a,d,v),ii(C,a,B),{u_height_factor:-Math.pow(2,w.overscaledZ)/B.tileSize/8}),nh=S=>({u_matrix:S}),rh=(S,a,d,v)=>l.e(nh(S),ii(d,a,v)),ff=(S,a)=>({u_matrix:S,u_world:a}),Pd=(S,a,d,v,w)=>l.e(rh(S,a,d,v),{u_world:w}),fm=(S,a,d,v)=>{const w=S.transform;let C,B;if(v.paint.get("circle-pitch-alignment")==="map"){const j=sn(d,1,w.zoom);C=!0,B=[j,j]}else C=!1,B=w.pixelsToGLUnits;return{u_camera_to_center_distance:w.cameraToCenterDistance,u_scale_with_map:+(v.paint.get("circle-pitch-scale")==="map"),u_matrix:S.translatePosMatrix(a.posMatrix,d,v.paint.get("circle-translate"),v.paint.get("circle-translate-anchor")),u_pitch_with_map:+C,u_device_pixel_ratio:S.pixelRatio,u_extrude_scale:B}},df=(S,a,d)=>{const v=sn(d,1,a.zoom),w=Math.pow(2,a.zoom-d.tileID.overscaledZ),C=d.tileID.overscaleFactor();return{u_matrix:S,u_camera_to_center_distance:a.cameraToCenterDistance,u_pixels_to_tile_units:v,u_extrude_scale:[a.pixelsToGLUnits[0]/(v*w),a.pixelsToGLUnits[1]/(v*w)],u_overscale_factor:C}},Ld=(S,a,d=1)=>({u_matrix:S,u_color:a,u_overlay:0,u_overlay_scale:d}),ih=S=>({u_matrix:S}),pf=(S,a,d,v)=>({u_matrix:S,u_extrude_scale:sn(a,1,d),u_intensity:v});function dm(S,a){const d=Math.pow(2,a.canonical.z),v=a.canonical.y;return[new l.Y(0,v/d).toLngLat().lat,new l.Y(0,(v+1)/d).toLngLat().lat]}const oh=(S,a,d,v)=>{const w=S.transform;return{u_matrix:sh(S,a,d,v),u_ratio:1/sn(a,1,w.zoom),u_device_pixel_ratio:S.pixelRatio,u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]]}},Kg=(S,a,d,v,w)=>l.e(oh(S,a,d,w),{u_image:0,u_image_height:v}),An=(S,a,d,v,w)=>{const C=S.transform,B=Xn(a,C);return{u_matrix:sh(S,a,d,w),u_texsize:a.imageAtlasTexture.size,u_ratio:1/sn(a,1,C.zoom),u_device_pixel_ratio:S.pixelRatio,u_image:0,u_scale:[B,v.fromScale,v.toScale],u_fade:v.t,u_units_to_pixels:[1/C.pixelsToGLUnits[0],1/C.pixelsToGLUnits[1]]}},vs=(S,a,d,v,w,C)=>{const B=S.lineAtlas,j=Xn(a,S.transform),Z=d.layout.get("line-cap")==="round",Q=B.getDash(v.from,Z),se=B.getDash(v.to,Z),le=Q.width*w.fromScale,ye=se.width*w.toScale;return l.e(oh(S,a,d,C),{u_patternscale_a:[j/le,-Q.height/2],u_patternscale_b:[j/ye,-se.height/2],u_sdfgamma:B.width/(256*Math.min(le,ye)*S.pixelRatio)/2,u_image:0,u_tex_y_a:Q.y,u_tex_y_b:se.y,u_mix:w.t})};function Xn(S,a){return 1/sn(S,1,a.tileZoom)}function sh(S,a,d,v){return S.translatePosMatrix(v?v.posMatrix:a.tileID.posMatrix,a,d.paint.get("line-translate"),d.paint.get("line-translate-anchor"))}const ah=(S,a,d,v,w)=>{return{u_matrix:S,u_tl_parent:a,u_scale_parent:d,u_buffer_scale:1,u_fade_t:v.mix,u_opacity:v.opacity*w.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:w.paint.get("raster-brightness-min"),u_brightness_high:w.paint.get("raster-brightness-max"),u_saturation_factor:(B=w.paint.get("raster-saturation"),B>0?1-1/(1.001-B):-B),u_contrast_factor:(C=w.paint.get("raster-contrast"),C>0?1/(1-C):1+C),u_spin_weights:rc(w.paint.get("raster-hue-rotate"))};var C,B};function rc(S){S*=Math.PI/180;const a=Math.sin(S),d=Math.cos(S);return[(2*d+1)/3,(-Math.sqrt(3)*a-d+1)/3,(Math.sqrt(3)*a-d+1)/3]}const ic=(S,a,d,v,w,C,B,j,Z,Q)=>{const se=w.transform;return{u_is_size_zoom_constant:+(S==="constant"||S==="source"),u_is_size_feature_constant:+(S==="constant"||S==="camera"),u_size_t:a?a.uSizeT:0,u_size:a?a.uSize:0,u_camera_to_center_distance:se.cameraToCenterDistance,u_pitch:se.pitch/360*2*Math.PI,u_rotate_symbol:+d,u_aspect_ratio:se.width/se.height,u_fade_change:w.options.fadeDuration?w.symbolFadeChange:1,u_matrix:C,u_label_plane_matrix:B,u_coord_matrix:j,u_is_text:+Z,u_pitch_with_map:+v,u_texsize:Q,u_texture:0}},ca=(S,a,d,v,w,C,B,j,Z,Q,se)=>{const le=w.transform;return l.e(ic(S,a,d,v,w,C,B,j,Z,Q),{u_gamma_scale:v?Math.cos(le._pitch)*le.cameraToCenterDistance:1,u_device_pixel_ratio:w.pixelRatio,u_is_halo:+se})},oc=(S,a,d,v,w,C,B,j,Z,Q)=>l.e(ca(S,a,d,v,w,C,B,j,!0,Z,!0),{u_texsize_icon:Q,u_texture_icon:1}),mf=(S,a,d)=>({u_matrix:S,u_opacity:a,u_color:d}),uo=(S,a,d,v,w,C)=>l.e(function(B,j,Z,Q){const se=Z.imageManager.getPattern(B.from.toString()),le=Z.imageManager.getPattern(B.to.toString()),{width:ye,height:Le}=Z.imageManager.getPixelSize(),Pe=Math.pow(2,Q.tileID.overscaledZ),Me=Q.tileSize*Math.pow(2,Z.transform.tileZoom)/Pe,Se=Me*(Q.tileID.canonical.x+Q.tileID.wrap*Pe),Ke=Me*Q.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:se.tl,u_pattern_br_a:se.br,u_pattern_tl_b:le.tl,u_pattern_br_b:le.br,u_texsize:[ye,Le],u_mix:j.t,u_pattern_size_a:se.displaySize,u_pattern_size_b:le.displaySize,u_scale_a:j.fromScale,u_scale_b:j.toScale,u_tile_units_to_pixels:1/sn(Q,1,Z.transform.tileZoom),u_pixel_coord_upper:[Se>>16,Ke>>16],u_pixel_coord_lower:[65535&Se,65535&Ke]}}(v,C,d,w),{u_matrix:S,u_opacity:a}),au={fillExtrusion:(S,a)=>({u_matrix:new l.aI(S,a.u_matrix),u_lightpos:new l.aK(S,a.u_lightpos),u_lightintensity:new l.aH(S,a.u_lightintensity),u_lightcolor:new l.aK(S,a.u_lightcolor),u_vertical_gradient:new l.aH(S,a.u_vertical_gradient),u_opacity:new l.aH(S,a.u_opacity)}),fillExtrusionPattern:(S,a)=>({u_matrix:new l.aI(S,a.u_matrix),u_lightpos:new l.aK(S,a.u_lightpos),u_lightintensity:new l.aH(S,a.u_lightintensity),u_lightcolor:new l.aK(S,a.u_lightcolor),u_vertical_gradient:new l.aH(S,a.u_vertical_gradient),u_height_factor:new l.aH(S,a.u_height_factor),u_image:new l.aG(S,a.u_image),u_texsize:new l.aL(S,a.u_texsize),u_pixel_coord_upper:new l.aL(S,a.u_pixel_coord_upper),u_pixel_coord_lower:new l.aL(S,a.u_pixel_coord_lower),u_scale:new l.aK(S,a.u_scale),u_fade:new l.aH(S,a.u_fade),u_opacity:new l.aH(S,a.u_opacity)}),fill:(S,a)=>({u_matrix:new l.aI(S,a.u_matrix)}),fillPattern:(S,a)=>({u_matrix:new l.aI(S,a.u_matrix),u_image:new l.aG(S,a.u_image),u_texsize:new l.aL(S,a.u_texsize),u_pixel_coord_upper:new l.aL(S,a.u_pixel_coord_upper),u_pixel_coord_lower:new l.aL(S,a.u_pixel_coord_lower),u_scale:new l.aK(S,a.u_scale),u_fade:new l.aH(S,a.u_fade)}),fillOutline:(S,a)=>({u_matrix:new l.aI(S,a.u_matrix),u_world:new l.aL(S,a.u_world)}),fillOutlinePattern:(S,a)=>({u_matrix:new l.aI(S,a.u_matrix),u_world:new l.aL(S,a.u_world),u_image:new l.aG(S,a.u_image),u_texsize:new l.aL(S,a.u_texsize),u_pixel_coord_upper:new l.aL(S,a.u_pixel_coord_upper),u_pixel_coord_lower:new l.aL(S,a.u_pixel_coord_lower),u_scale:new l.aK(S,a.u_scale),u_fade:new l.aH(S,a.u_fade)}),circle:(S,a)=>({u_camera_to_center_distance:new l.aH(S,a.u_camera_to_center_distance),u_scale_with_map:new l.aG(S,a.u_scale_with_map),u_pitch_with_map:new l.aG(S,a.u_pitch_with_map),u_extrude_scale:new l.aL(S,a.u_extrude_scale),u_device_pixel_ratio:new l.aH(S,a.u_device_pixel_ratio),u_matrix:new l.aI(S,a.u_matrix)}),collisionBox:(S,a)=>({u_matrix:new l.aI(S,a.u_matrix),u_camera_to_center_distance:new l.aH(S,a.u_camera_to_center_distance),u_pixels_to_tile_units:new l.aH(S,a.u_pixels_to_tile_units),u_extrude_scale:new l.aL(S,a.u_extrude_scale),u_overscale_factor:new l.aH(S,a.u_overscale_factor)}),collisionCircle:(S,a)=>({u_matrix:new l.aI(S,a.u_matrix),u_inv_matrix:new l.aI(S,a.u_inv_matrix),u_camera_to_center_distance:new l.aH(S,a.u_camera_to_center_distance),u_viewport_size:new l.aL(S,a.u_viewport_size)}),debug:(S,a)=>({u_color:new l.aM(S,a.u_color),u_matrix:new l.aI(S,a.u_matrix),u_overlay:new l.aG(S,a.u_overlay),u_overlay_scale:new l.aH(S,a.u_overlay_scale)}),clippingMask:(S,a)=>({u_matrix:new l.aI(S,a.u_matrix)}),heatmap:(S,a)=>({u_extrude_scale:new l.aH(S,a.u_extrude_scale),u_intensity:new l.aH(S,a.u_intensity),u_matrix:new l.aI(S,a.u_matrix)}),heatmapTexture:(S,a)=>({u_matrix:new l.aI(S,a.u_matrix),u_world:new l.aL(S,a.u_world),u_image:new l.aG(S,a.u_image),u_color_ramp:new l.aG(S,a.u_color_ramp),u_opacity:new l.aH(S,a.u_opacity)}),hillshade:(S,a)=>({u_matrix:new l.aI(S,a.u_matrix),u_image:new l.aG(S,a.u_image),u_latrange:new l.aL(S,a.u_latrange),u_light:new l.aL(S,a.u_light),u_shadow:new l.aM(S,a.u_shadow),u_highlight:new l.aM(S,a.u_highlight),u_accent:new l.aM(S,a.u_accent)}),hillshadePrepare:(S,a)=>({u_matrix:new l.aI(S,a.u_matrix),u_image:new l.aG(S,a.u_image),u_dimension:new l.aL(S,a.u_dimension),u_zoom:new l.aH(S,a.u_zoom),u_unpack:new l.aJ(S,a.u_unpack)}),line:(S,a)=>({u_matrix:new l.aI(S,a.u_matrix),u_ratio:new l.aH(S,a.u_ratio),u_device_pixel_ratio:new l.aH(S,a.u_device_pixel_ratio),u_units_to_pixels:new l.aL(S,a.u_units_to_pixels)}),lineGradient:(S,a)=>({u_matrix:new l.aI(S,a.u_matrix),u_ratio:new l.aH(S,a.u_ratio),u_device_pixel_ratio:new l.aH(S,a.u_device_pixel_ratio),u_units_to_pixels:new l.aL(S,a.u_units_to_pixels),u_image:new l.aG(S,a.u_image),u_image_height:new l.aH(S,a.u_image_height)}),linePattern:(S,a)=>({u_matrix:new l.aI(S,a.u_matrix),u_texsize:new l.aL(S,a.u_texsize),u_ratio:new l.aH(S,a.u_ratio),u_device_pixel_ratio:new l.aH(S,a.u_device_pixel_ratio),u_image:new l.aG(S,a.u_image),u_units_to_pixels:new l.aL(S,a.u_units_to_pixels),u_scale:new l.aK(S,a.u_scale),u_fade:new l.aH(S,a.u_fade)}),lineSDF:(S,a)=>({u_matrix:new l.aI(S,a.u_matrix),u_ratio:new l.aH(S,a.u_ratio),u_device_pixel_ratio:new l.aH(S,a.u_device_pixel_ratio),u_units_to_pixels:new l.aL(S,a.u_units_to_pixels),u_patternscale_a:new l.aL(S,a.u_patternscale_a),u_patternscale_b:new l.aL(S,a.u_patternscale_b),u_sdfgamma:new l.aH(S,a.u_sdfgamma),u_image:new l.aG(S,a.u_image),u_tex_y_a:new l.aH(S,a.u_tex_y_a),u_tex_y_b:new l.aH(S,a.u_tex_y_b),u_mix:new l.aH(S,a.u_mix)}),raster:(S,a)=>({u_matrix:new l.aI(S,a.u_matrix),u_tl_parent:new l.aL(S,a.u_tl_parent),u_scale_parent:new l.aH(S,a.u_scale_parent),u_buffer_scale:new l.aH(S,a.u_buffer_scale),u_fade_t:new l.aH(S,a.u_fade_t),u_opacity:new l.aH(S,a.u_opacity),u_image0:new l.aG(S,a.u_image0),u_image1:new l.aG(S,a.u_image1),u_brightness_low:new l.aH(S,a.u_brightness_low),u_brightness_high:new l.aH(S,a.u_brightness_high),u_saturation_factor:new l.aH(S,a.u_saturation_factor),u_contrast_factor:new l.aH(S,a.u_contrast_factor),u_spin_weights:new l.aK(S,a.u_spin_weights)}),symbolIcon:(S,a)=>({u_is_size_zoom_constant:new l.aG(S,a.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aG(S,a.u_is_size_feature_constant),u_size_t:new l.aH(S,a.u_size_t),u_size:new l.aH(S,a.u_size),u_camera_to_center_distance:new l.aH(S,a.u_camera_to_center_distance),u_pitch:new l.aH(S,a.u_pitch),u_rotate_symbol:new l.aG(S,a.u_rotate_symbol),u_aspect_ratio:new l.aH(S,a.u_aspect_ratio),u_fade_change:new l.aH(S,a.u_fade_change),u_matrix:new l.aI(S,a.u_matrix),u_label_plane_matrix:new l.aI(S,a.u_label_plane_matrix),u_coord_matrix:new l.aI(S,a.u_coord_matrix),u_is_text:new l.aG(S,a.u_is_text),u_pitch_with_map:new l.aG(S,a.u_pitch_with_map),u_texsize:new l.aL(S,a.u_texsize),u_texture:new l.aG(S,a.u_texture)}),symbolSDF:(S,a)=>({u_is_size_zoom_constant:new l.aG(S,a.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aG(S,a.u_is_size_feature_constant),u_size_t:new l.aH(S,a.u_size_t),u_size:new l.aH(S,a.u_size),u_camera_to_center_distance:new l.aH(S,a.u_camera_to_center_distance),u_pitch:new l.aH(S,a.u_pitch),u_rotate_symbol:new l.aG(S,a.u_rotate_symbol),u_aspect_ratio:new l.aH(S,a.u_aspect_ratio),u_fade_change:new l.aH(S,a.u_fade_change),u_matrix:new l.aI(S,a.u_matrix),u_label_plane_matrix:new l.aI(S,a.u_label_plane_matrix),u_coord_matrix:new l.aI(S,a.u_coord_matrix),u_is_text:new l.aG(S,a.u_is_text),u_pitch_with_map:new l.aG(S,a.u_pitch_with_map),u_texsize:new l.aL(S,a.u_texsize),u_texture:new l.aG(S,a.u_texture),u_gamma_scale:new l.aH(S,a.u_gamma_scale),u_device_pixel_ratio:new l.aH(S,a.u_device_pixel_ratio),u_is_halo:new l.aG(S,a.u_is_halo)}),symbolTextAndIcon:(S,a)=>({u_is_size_zoom_constant:new l.aG(S,a.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aG(S,a.u_is_size_feature_constant),u_size_t:new l.aH(S,a.u_size_t),u_size:new l.aH(S,a.u_size),u_camera_to_center_distance:new l.aH(S,a.u_camera_to_center_distance),u_pitch:new l.aH(S,a.u_pitch),u_rotate_symbol:new l.aG(S,a.u_rotate_symbol),u_aspect_ratio:new l.aH(S,a.u_aspect_ratio),u_fade_change:new l.aH(S,a.u_fade_change),u_matrix:new l.aI(S,a.u_matrix),u_label_plane_matrix:new l.aI(S,a.u_label_plane_matrix),u_coord_matrix:new l.aI(S,a.u_coord_matrix),u_is_text:new l.aG(S,a.u_is_text),u_pitch_with_map:new l.aG(S,a.u_pitch_with_map),u_texsize:new l.aL(S,a.u_texsize),u_texsize_icon:new l.aL(S,a.u_texsize_icon),u_texture:new l.aG(S,a.u_texture),u_texture_icon:new l.aG(S,a.u_texture_icon),u_gamma_scale:new l.aH(S,a.u_gamma_scale),u_device_pixel_ratio:new l.aH(S,a.u_device_pixel_ratio),u_is_halo:new l.aG(S,a.u_is_halo)}),background:(S,a)=>({u_matrix:new l.aI(S,a.u_matrix),u_opacity:new l.aH(S,a.u_opacity),u_color:new l.aM(S,a.u_color)}),backgroundPattern:(S,a)=>({u_matrix:new l.aI(S,a.u_matrix),u_opacity:new l.aH(S,a.u_opacity),u_image:new l.aG(S,a.u_image),u_pattern_tl_a:new l.aL(S,a.u_pattern_tl_a),u_pattern_br_a:new l.aL(S,a.u_pattern_br_a),u_pattern_tl_b:new l.aL(S,a.u_pattern_tl_b),u_pattern_br_b:new l.aL(S,a.u_pattern_br_b),u_texsize:new l.aL(S,a.u_texsize),u_mix:new l.aH(S,a.u_mix),u_pattern_size_a:new l.aL(S,a.u_pattern_size_a),u_pattern_size_b:new l.aL(S,a.u_pattern_size_b),u_scale_a:new l.aH(S,a.u_scale_a),u_scale_b:new l.aH(S,a.u_scale_b),u_pixel_coord_upper:new l.aL(S,a.u_pixel_coord_upper),u_pixel_coord_lower:new l.aL(S,a.u_pixel_coord_lower),u_tile_units_to_pixels:new l.aH(S,a.u_tile_units_to_pixels)}),terrain:(S,a)=>({u_matrix:new l.aI(S,a.u_matrix),u_texture:new l.aG(S,a.u_texture),u_ele_delta:new l.aH(S,a.u_ele_delta)}),terrainDepth:(S,a)=>({u_matrix:new l.aI(S,a.u_matrix),u_ele_delta:new l.aH(S,a.u_ele_delta)}),terrainCoords:(S,a)=>({u_matrix:new l.aI(S,a.u_matrix),u_texture:new l.aG(S,a.u_texture),u_terrain_coords_id:new l.aH(S,a.u_terrain_coords_id),u_ele_delta:new l.aH(S,a.u_ele_delta)})};class Xg{constructor(a,d,v){this.context=a;const w=a.gl;this.buffer=w.createBuffer(),this.dynamicDraw=!!v,this.context.unbindVAO(),a.bindElementBuffer.set(this.buffer),w.bufferData(w.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(a){const d=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,a.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const lu={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ad{constructor(a,d,v,w){this.length=d.length,this.attributes=v,this.itemSize=d.bytesPerElement,this.dynamicDraw=w,this.context=a;const C=a.gl;this.buffer=C.createBuffer(),a.bindVertexBuffer.set(this.buffer),C.bufferData(C.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?C.DYNAMIC_DRAW:C.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(a){if(a.length!==this.length)throw new Error(`Length of new data is ${a.length}, which doesn't match current length of ${this.length}`);const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,a.arrayBuffer)}enableAttributes(a,d){for(let v=0;v<this.attributes.length;v++){const w=d.attributes[this.attributes[v].name];w!==void 0&&a.enableVertexAttribArray(w)}}setVertexAttribPointers(a,d,v){for(let w=0;w<this.attributes.length;w++){const C=this.attributes[w],B=d.attributes[C.name];B!==void 0&&a.vertexAttribPointer(B,C.components,a[lu[C.type]],!1,this.itemSize,C.offset+this.itemSize*(v||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Io=new WeakMap;function Yi(S){var a;if(Io.has(S))return Io.get(S);{const d=(a=S.getParameter(S.VERSION))===null||a===void 0?void 0:a.startsWith("WebGL 2.0");return Io.set(S,d),d}}class cr{constructor(a){this.gl=a.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(a){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class gf extends cr{getDefault(){return l.aO.transparent}set(a){const d=this.current;(a.r!==d.r||a.g!==d.g||a.b!==d.b||a.a!==d.a||this.dirty)&&(this.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class Yn extends cr{getDefault(){return 1}set(a){(a!==this.current||this.dirty)&&(this.gl.clearDepth(a),this.current=a,this.dirty=!1)}}class pm extends cr{getDefault(){return 0}set(a){(a!==this.current||this.dirty)&&(this.gl.clearStencil(a),this.current=a,this.dirty=!1)}}class xs extends cr{getDefault(){return[!0,!0,!0,!0]}set(a){const d=this.current;(a[0]!==d[0]||a[1]!==d[1]||a[2]!==d[2]||a[3]!==d[3]||this.dirty)&&(this.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class uu extends cr{getDefault(){return!0}set(a){(a!==this.current||this.dirty)&&(this.gl.depthMask(a),this.current=a,this.dirty=!1)}}class Od extends cr{getDefault(){return 255}set(a){(a!==this.current||this.dirty)&&(this.gl.stencilMask(a),this.current=a,this.dirty=!1)}}class mm extends cr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(a){const d=this.current;(a.func!==d.func||a.ref!==d.ref||a.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(a.func,a.ref,a.mask),this.current=a,this.dirty=!1)}}class lh extends cr{getDefault(){const a=this.gl;return[a.KEEP,a.KEEP,a.KEEP]}set(a){const d=this.current;(a[0]!==d[0]||a[1]!==d[1]||a[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(a[0],a[1],a[2]),this.current=a,this.dirty=!1)}}class Yg extends cr{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;a?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=a,this.dirty=!1}}class gm extends cr{getDefault(){return[0,1]}set(a){const d=this.current;(a[0]!==d[0]||a[1]!==d[1]||this.dirty)&&(this.gl.depthRange(a[0],a[1]),this.current=a,this.dirty=!1)}}class uh extends cr{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;a?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=a,this.dirty=!1}}class vv extends cr{getDefault(){return this.gl.LESS}set(a){(a!==this.current||this.dirty)&&(this.gl.depthFunc(a),this.current=a,this.dirty=!1)}}class ym extends cr{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;a?d.enable(d.BLEND):d.disable(d.BLEND),this.current=a,this.dirty=!1}}class xv extends cr{getDefault(){const a=this.gl;return[a.ONE,a.ZERO]}set(a){const d=this.current;(a[0]!==d[0]||a[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(a[0],a[1]),this.current=a,this.dirty=!1)}}class Ua extends cr{getDefault(){return l.aO.transparent}set(a){const d=this.current;(a.r!==d.r||a.g!==d.g||a.b!==d.b||a.a!==d.a||this.dirty)&&(this.gl.blendColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class bv extends cr{getDefault(){return this.gl.FUNC_ADD}set(a){(a!==this.current||this.dirty)&&(this.gl.blendEquation(a),this.current=a,this.dirty=!1)}}class Jg extends cr{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;a?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=a,this.dirty=!1}}class qa extends cr{getDefault(){return this.gl.BACK}set(a){(a!==this.current||this.dirty)&&(this.gl.cullFace(a),this.current=a,this.dirty=!1)}}class yf extends cr{getDefault(){return this.gl.CCW}set(a){(a!==this.current||this.dirty)&&(this.gl.frontFace(a),this.current=a,this.dirty=!1)}}class kd extends cr{getDefault(){return null}set(a){(a!==this.current||this.dirty)&&(this.gl.useProgram(a),this.current=a,this.dirty=!1)}}class _f extends cr{getDefault(){return this.gl.TEXTURE0}set(a){(a!==this.current||this.dirty)&&(this.gl.activeTexture(a),this.current=a,this.dirty=!1)}}class ch extends cr{getDefault(){const a=this.gl;return[0,0,a.drawingBufferWidth,a.drawingBufferHeight]}set(a){const d=this.current;(a[0]!==d[0]||a[1]!==d[1]||a[2]!==d[2]||a[3]!==d[3]||this.dirty)&&(this.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class _m extends cr{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,a),this.current=a,this.dirty=!1}}class vm extends cr{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class xm extends cr{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,a),this.current=a,this.dirty=!1}}class sc extends cr{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class Rd extends cr{getDefault(){return null}set(a){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class hh extends cr{getDefault(){return null}set(a){var d;if(a===this.current&&!this.dirty)return;const v=this.gl;Yi(v)?v.bindVertexArray(a):(d=v.getExtension("OES_vertex_array_object"))===null||d===void 0||d.bindVertexArrayOES(a),this.current=a,this.dirty=!1}}class ac extends cr{getDefault(){return 4}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,a),this.current=a,this.dirty=!1}}class bm extends cr{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),this.current=a,this.dirty=!1}}class fh extends cr{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,a),this.current=a,this.dirty=!1}}class jn extends cr{constructor(a,d){super(a),this.context=a,this.parent=d}getDefault(){return null}}class Md extends jn{setDirty(){this.dirty=!0}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}}class vf extends jn{set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class bs extends jn{set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class dh{constructor(a,d,v,w,C){this.context=a,this.width=d,this.height=v;const B=a.gl,j=this.framebuffer=B.createFramebuffer();if(this.colorAttachment=new Md(a,j),w)this.depthAttachment=C?new bs(a,j):new vf(a,j);else if(C)throw new Error("Stencil cannot be set without depth");if(B.checkFramebufferStatus(B.FRAMEBUFFER)!==B.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const a=this.context.gl,d=this.colorAttachment.get();if(d&&a.deleteTexture(d),this.depthAttachment){const v=this.depthAttachment.get();v&&a.deleteRenderbuffer(v)}a.deleteFramebuffer(this.framebuffer)}}class hi{constructor(a,d,v){this.blendFunction=a,this.blendColor=d,this.mask=v}}hi.Replace=[1,0],hi.disabled=new hi(hi.Replace,l.aO.transparent,[!1,!1,!1,!1]),hi.unblended=new hi(hi.Replace,l.aO.transparent,[!0,!0,!0,!0]),hi.alphaBlended=new hi([1,771],l.aO.transparent,[!0,!0,!0,!0]);class wv{constructor(a){var d,v;if(this.gl=a,this.clearColor=new gf(this),this.clearDepth=new Yn(this),this.clearStencil=new pm(this),this.colorMask=new xs(this),this.depthMask=new uu(this),this.stencilMask=new Od(this),this.stencilFunc=new mm(this),this.stencilOp=new lh(this),this.stencilTest=new Yg(this),this.depthRange=new gm(this),this.depthTest=new uh(this),this.depthFunc=new vv(this),this.blend=new ym(this),this.blendFunc=new xv(this),this.blendColor=new Ua(this),this.blendEquation=new bv(this),this.cullFace=new Jg(this),this.cullFaceSide=new qa(this),this.frontFace=new yf(this),this.program=new kd(this),this.activeTexture=new _f(this),this.viewport=new ch(this),this.bindFramebuffer=new _m(this),this.bindRenderbuffer=new vm(this),this.bindTexture=new xm(this),this.bindVertexBuffer=new sc(this),this.bindElementBuffer=new Rd(this),this.bindVertexArray=new hh(this),this.pixelStoreUnpack=new ac(this),this.pixelStoreUnpackPremultiplyAlpha=new bm(this),this.pixelStoreUnpackFlipY=new fh(this),this.extTextureFilterAnisotropic=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=a.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE),Yi(a)){this.HALF_FLOAT=a.HALF_FLOAT;const w=a.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(d=a.RGBA16F)!==null&&d!==void 0?d:w==null?void 0:w.RGBA16F_EXT,this.RGB16F=(v=a.RGB16F)!==null&&v!==void 0?v:w==null?void 0:w.RGB16F_EXT,a.getExtension("EXT_color_buffer_float")}else{a.getExtension("EXT_color_buffer_half_float"),a.getExtension("OES_texture_half_float_linear");const w=a.getExtension("OES_texture_half_float");this.HALF_FLOAT=w==null?void 0:w.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(a,d){return new Xg(this,a,d)}createVertexBuffer(a,d,v){return new Ad(this,a,d,v)}createRenderbuffer(a,d,v){const w=this.gl,C=w.createRenderbuffer();return this.bindRenderbuffer.set(C),w.renderbufferStorage(w.RENDERBUFFER,a,d,v),this.bindRenderbuffer.set(null),C}createFramebuffer(a,d,v,w){return new dh(this,a,d,v,w)}clear({color:a,depth:d,stencil:v}){const w=this.gl;let C=0;a&&(C|=w.COLOR_BUFFER_BIT,this.clearColor.set(a),this.colorMask.set([!0,!0,!0,!0])),d!==void 0&&(C|=w.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),v!==void 0&&(C|=w.STENCIL_BUFFER_BIT,this.clearStencil.set(v),this.stencilMask.set(255)),w.clear(C)}setCullFace(a){a.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(a.mode),this.frontFace.set(a.frontFace))}setDepthMode(a){a.func!==this.gl.ALWAYS||a.mask?(this.depthTest.set(!0),this.depthFunc.set(a.func),this.depthMask.set(a.mask),this.depthRange.set(a.range)):this.depthTest.set(!1)}setStencilMode(a){a.test.func!==this.gl.ALWAYS||a.mask?(this.stencilTest.set(!0),this.stencilMask.set(a.mask),this.stencilOp.set([a.fail,a.depthFail,a.pass]),this.stencilFunc.set({func:a.test.func,ref:a.ref,mask:a.test.mask})):this.stencilTest.set(!1)}setColorMode(a){l.aD(a.blendFunction,hi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(a.blendFunction),this.blendColor.set(a.blendColor)),this.colorMask.set(a.mask)}createVertexArray(){var a;return Yi(this.gl)?this.gl.createVertexArray():(a=this.gl.getExtension("OES_vertex_array_object"))===null||a===void 0?void 0:a.createVertexArrayOES()}deleteVertexArray(a){var d;return Yi(this.gl)?this.gl.deleteVertexArray(a):(d=this.gl.getExtension("OES_vertex_array_object"))===null||d===void 0?void 0:d.deleteVertexArrayOES(a)}unbindVAO(){this.bindVertexArray.set(null)}}class Gn{constructor(a,d,v){this.func=a,this.mask=d,this.range=v}}Gn.ReadOnly=!1,Gn.ReadWrite=!0,Gn.disabled=new Gn(519,Gn.ReadOnly,[0,1]);const xf=7680;class Br{constructor(a,d,v,w,C,B){this.test=a,this.ref=d,this.mask=v,this.fail=w,this.depthFail=C,this.pass=B}}Br.disabled=new Br({func:519,mask:0},0,0,xf,xf,xf);class kr{constructor(a,d,v){this.enable=a,this.mode=d,this.frontFace=v}}let cu;function Nd(S,a,d,v,w,C,B){const j=S.context,Z=j.gl,Q=S.useProgram("collisionBox"),se=[];let le=0,ye=0;for(let Fe=0;Fe<v.length;Fe++){const Je=v[Fe],ut=a.getTile(Je),ft=ut.getBucket(d);if(!ft)continue;let mt=Je.posMatrix;w[0]===0&&w[1]===0||(mt=S.translatePosMatrix(Je.posMatrix,ut,w,C));const Tt=B?ft.textCollisionBox:ft.iconCollisionBox,Et=ft.collisionCircleArray;if(Et.length>0){const Mt=l.F(),zt=mt;l.aP(Mt,ft.placementInvProjMatrix,S.transform.glCoordMatrix),l.aP(Mt,Mt,ft.placementViewportMatrix),se.push({circleArray:Et,circleOffset:ye,transform:zt,invTransform:Mt,coord:Je}),le+=Et.length/4,ye=le}Tt&&Q.draw(j,Z.LINES,Gn.disabled,Br.disabled,S.colorModeForRenderPass(),kr.disabled,df(mt,S.transform,ut),S.style.map.terrain&&S.style.map.terrain.getTerrainData(Je),d.id,Tt.layoutVertexBuffer,Tt.indexBuffer,Tt.segments,null,S.transform.zoom,null,null,Tt.collisionVertexBuffer)}if(!B||!se.length)return;const Le=S.useProgram("collisionCircle"),Pe=new l.aQ;Pe.resize(4*le),Pe._trim();let Me=0;for(const Fe of se)for(let Je=0;Je<Fe.circleArray.length/4;Je++){const ut=4*Je,ft=Fe.circleArray[ut+0],mt=Fe.circleArray[ut+1],Tt=Fe.circleArray[ut+2],Et=Fe.circleArray[ut+3];Pe.emplace(Me++,ft,mt,Tt,Et,0),Pe.emplace(Me++,ft,mt,Tt,Et,1),Pe.emplace(Me++,ft,mt,Tt,Et,2),Pe.emplace(Me++,ft,mt,Tt,Et,3)}(!cu||cu.length<2*le)&&(cu=function(Fe){const Je=2*Fe,ut=new l.aS;ut.resize(Je),ut._trim();for(let ft=0;ft<Je;ft++){const mt=6*ft;ut.uint16[mt+0]=4*ft+0,ut.uint16[mt+1]=4*ft+1,ut.uint16[mt+2]=4*ft+2,ut.uint16[mt+3]=4*ft+2,ut.uint16[mt+4]=4*ft+3,ut.uint16[mt+5]=4*ft+0}return ut}(le));const Se=j.createIndexBuffer(cu,!0),Ke=j.createVertexBuffer(Pe,l.aR.members,!0);for(const Fe of se){const Je={u_matrix:Fe.transform,u_inv_matrix:Fe.invTransform,u_camera_to_center_distance:(at=S.transform).cameraToCenterDistance,u_viewport_size:[at.width,at.height]};Le.draw(j,Z.TRIANGLES,Gn.disabled,Br.disabled,S.colorModeForRenderPass(),kr.disabled,Je,S.style.map.terrain&&S.style.map.terrain.getTerrainData(Fe.coord),d.id,Ke,Se,l.$.simpleSegment(0,2*Fe.circleOffset,Fe.circleArray.length,Fe.circleArray.length/2),null,S.transform.zoom,null,null,null)}var at;Ke.destroy(),Se.destroy()}kr.disabled=new kr(!1,1029,2305),kr.backCCW=new kr(!0,1029,2305);const ws=l.an(new Float32Array(16));function lc(S,a,d,v,w,C){const{horizontalAlign:B,verticalAlign:j}=l.at(S);return new l.P((-(B-.5)*a/w+v[0])*C,(-(j-.5)*d/w+v[1])*C)}function Dd(S,a,d,v,w,C,B,j,Z,Q,se){const le=S.text.placedSymbolArray,ye=S.text.dynamicLayoutVertexArray,Le=S.icon.dynamicLayoutVertexArray,Pe={};ye.clear();for(let Me=0;Me<le.length;Me++){const Se=le.get(Me),Ke=Se.hidden||!Se.crossTileID||S.allowVerticalPlacement&&!Se.placedOrientation?null:v[Se.crossTileID];if(Ke){const at=new l.P(Se.anchorX,Se.anchorY),Fe=Vr(at,d?B:C,se),Je=Oe(w.cameraToCenterDistance,Fe.signedDistanceFromCamera);let ut=l.ai(S.textSizeData,Z,Se)*Je/l.ao;d&&(ut*=S.tilePixelRatio/j);const{width:ft,height:mt,anchor:Tt,textOffset:Et,textBoxScale:Mt}=Ke,zt=lc(Tt,ft,mt,Et,Mt,ut),Mn=d?Vr(at.add(zt),C,se).point:Fe.point.add(a?zt.rotate(-w.angle):zt),$t=S.allowVerticalPlacement&&Se.placedOrientation===l.ah.vertical?Math.PI/2:0;for(let yn=0;yn<Se.numGlyphs;yn++)l.aj(ye,Mn,$t);Q&&Se.associatedIconIndex>=0&&(Pe[Se.associatedIconIndex]={shiftedAnchor:Mn,angle:$t})}else et(Se.numGlyphs,ye)}if(Q){Le.clear();const Me=S.icon.placedSymbolArray;for(let Se=0;Se<Me.length;Se++){const Ke=Me.get(Se);if(Ke.hidden)et(Ke.numGlyphs,Le);else{const at=Pe[Se];if(at)for(let Fe=0;Fe<Ke.numGlyphs;Fe++)l.aj(Le,at.shiftedAnchor,at.angle);else et(Ke.numGlyphs,Le)}}S.icon.dynamicLayoutVertexBuffer.updateData(Le)}S.text.dynamicLayoutVertexBuffer.updateData(ye)}function Zs(S,a,d){return d.iconsInText&&a?"symbolTextAndIcon":S?"symbolSDF":"symbolIcon"}function zd(S,a,d,v,w,C,B,j,Z,Q,se,le){const ye=S.context,Le=ye.gl,Pe=S.transform,Me=j==="map",Se=Z==="map",Ke=j!=="viewport"&&d.layout.get("symbol-placement")!=="point",at=Me&&!Se&&!Ke,Fe=!d.layout.get("symbol-sort-key").isConstant();let Je=!1;const ut=S.depthModeForSublayer(0,Gn.ReadOnly),ft=d._unevaluatedLayout.hasValue("text-variable-anchor")||d._unevaluatedLayout.hasValue("text-variable-anchor-offset"),mt=[];for(const Tt of v){const Et=a.getTile(Tt),Mt=Et.getBucket(d);if(!Mt)continue;const zt=w?Mt.text:Mt.icon;if(!zt||!zt.segments.get().length||!zt.hasVisibleVertices)continue;const Mn=zt.programConfigurations.get(d.id),$t=w||Mt.sdfIcons,yn=w?Mt.textSizeData:Mt.iconSizeData,Nn=Se||Pe.pitch!==0,nr=S.useProgram(Zs($t,w,Mt),Mn),Ln=l.ag(yn,Pe.zoom),zn=S.style.map.terrain&&S.style.map.terrain.getTerrainData(Tt);let Vn,wi,Rr,ma,co=[0,0],fi=null;if(w)wi=Et.glyphAtlasTexture,Rr=Le.LINEAR,Vn=Et.glyphAtlasTexture.size,Mt.iconsInText&&(co=Et.imageAtlasTexture.size,fi=Et.imageAtlasTexture,ma=Nn||S.options.rotating||S.options.zooming||yn.kind==="composite"||yn.kind==="camera"?Le.LINEAR:Le.NEAREST);else{const eo=d.layout.get("icon-size").constantOr(0)!==1||Mt.iconsNeedLinear;wi=Et.imageAtlasTexture,Rr=$t||S.options.rotating||S.options.zooming||eo||Nn?Le.LINEAR:Le.NEAREST,Vn=Et.imageAtlasTexture.size}const ho=sn(Et,1,S.transform.zoom),ga=Tn(Tt.posMatrix,Se,Me,S.transform,ho),pu=Gs(Tt.posMatrix,Se,Me,S.transform,ho),Eh=ft&&Mt.hasTextData(),km=d.layout.get("icon-text-fit")!=="none"&&Eh&&Mt.hasIconData();if(Ke){const eo=S.style.map.terrain?(Ka,to)=>S.style.map.terrain.getElevation(Tt,Ka,to):null,pi=d.layout.get("text-rotation-alignment")==="map";te(Mt,Tt.posMatrix,S,w,ga,pu,Se,Q,pi,eo)}const Sh=S.translatePosMatrix(Tt.posMatrix,Et,C,B),mu=Ke||w&&ft||km?ws:ga,Qi=S.translatePosMatrix(pu,Et,C,B,!0),di=$t&&d.paint.get(w?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let ai;ai=$t?Mt.iconsInText?oc(yn.kind,Ln,at,Se,S,Sh,mu,Qi,Vn,co):ca(yn.kind,Ln,at,Se,S,Sh,mu,Qi,w,Vn,!0):ic(yn.kind,Ln,at,Se,S,Sh,mu,Qi,w,Vn);const Wa={program:nr,buffers:zt,uniformValues:ai,atlasTexture:wi,atlasTextureIcon:fi,atlasInterpolation:Rr,atlasInterpolationIcon:ma,isSDF:$t,hasHalo:di};if(Fe&&Mt.canOverlap){Je=!0;const eo=zt.segments.get();for(const pi of eo)mt.push({segments:new l.$([pi]),sortKey:pi.sortKey,state:Wa,terrainData:zn})}else mt.push({segments:zt.segments,sortKey:0,state:Wa,terrainData:zn})}Je&&mt.sort((Tt,Et)=>Tt.sortKey-Et.sortKey);for(const Tt of mt){const Et=Tt.state;if(ye.activeTexture.set(Le.TEXTURE0),Et.atlasTexture.bind(Et.atlasInterpolation,Le.CLAMP_TO_EDGE),Et.atlasTextureIcon&&(ye.activeTexture.set(Le.TEXTURE1),Et.atlasTextureIcon&&Et.atlasTextureIcon.bind(Et.atlasInterpolationIcon,Le.CLAMP_TO_EDGE)),Et.isSDF){const Mt=Et.uniformValues;Et.hasHalo&&(Mt.u_is_halo=1,uc(Et.buffers,Tt.segments,d,S,Et.program,ut,se,le,Mt,Tt.terrainData)),Mt.u_is_halo=0}uc(Et.buffers,Tt.segments,d,S,Et.program,ut,se,le,Et.uniformValues,Tt.terrainData)}}function uc(S,a,d,v,w,C,B,j,Z,Q){const se=v.context;w.draw(se,se.gl.TRIANGLES,C,B,j,kr.disabled,Z,Q,d.id,S.layoutVertexBuffer,S.indexBuffer,a,d.paint,v.transform.zoom,S.programConfigurations.get(d.id),S.dynamicLayoutVertexBuffer,S.opacityVertexBuffer)}function Fd(S,a,d,v,w){if(!d||!v||!v.imageAtlas)return;const C=v.imageAtlas.patternPositions;let B=C[d.to.toString()],j=C[d.from.toString()];if(!B&&j&&(B=j),!j&&B&&(j=B),!B||!j){const Z=w.getPaintProperty(a);B=C[Z],j=C[Z]}B&&j&&S.setConstantPatternPositions(B,j)}function ph(S,a,d,v,w,C,B){const j=S.context.gl,Z="fill-pattern",Q=d.paint.get(Z),se=Q&&Q.constantOr(1),le=d.getCrossfadeParameters();let ye,Le,Pe,Me,Se;B?(Le=se&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ye=j.LINES):(Le=se?"fillPattern":"fill",ye=j.TRIANGLES);const Ke=Q.constantOr(null);for(const at of v){const Fe=a.getTile(at);if(se&&!Fe.patternsLoaded())continue;const Je=Fe.getBucket(d);if(!Je)continue;const ut=Je.programConfigurations.get(d.id),ft=S.useProgram(Le,ut),mt=S.style.map.terrain&&S.style.map.terrain.getTerrainData(at);se&&(S.context.activeTexture.set(j.TEXTURE0),Fe.imageAtlasTexture.bind(j.LINEAR,j.CLAMP_TO_EDGE),ut.updatePaintBuffers(le)),Fd(ut,Z,Ke,Fe,d);const Tt=mt?at:null,Et=S.translatePosMatrix(Tt?Tt.posMatrix:at.posMatrix,Fe,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor"));if(B){Me=Je.indexBuffer2,Se=Je.segments2;const Mt=[j.drawingBufferWidth,j.drawingBufferHeight];Pe=Le==="fillOutlinePattern"&&se?Pd(Et,S,le,Fe,Mt):ff(Et,Mt)}else Me=Je.indexBuffer,Se=Je.segments,Pe=se?rh(Et,S,le,Fe):nh(Et);ft.draw(S.context,ye,w,S.stencilModeForClipping(at),C,kr.disabled,Pe,mt,d.id,Je.layoutVertexBuffer,Me,Se,d.paint,S.transform.zoom,ut)}}function bf(S,a,d,v,w,C,B){const j=S.context,Z=j.gl,Q="fill-extrusion-pattern",se=d.paint.get(Q),le=se.constantOr(1),ye=d.getCrossfadeParameters(),Le=d.paint.get("fill-extrusion-opacity"),Pe=se.constantOr(null);for(const Me of v){const Se=a.getTile(Me),Ke=Se.getBucket(d);if(!Ke)continue;const at=S.style.map.terrain&&S.style.map.terrain.getTerrainData(Me),Fe=Ke.programConfigurations.get(d.id),Je=S.useProgram(le?"fillExtrusionPattern":"fillExtrusion",Fe);le&&(S.context.activeTexture.set(Z.TEXTURE0),Se.imageAtlasTexture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),Fe.updatePaintBuffers(ye)),Fd(Fe,Q,Pe,Se,d);const ut=S.translatePosMatrix(Me.posMatrix,Se,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),ft=d.paint.get("fill-extrusion-vertical-gradient"),mt=le?hf(ut,S,ft,Le,Me,ye,Se):ua(ut,S,ft,Le);Je.draw(j,j.gl.TRIANGLES,w,C,B,kr.backCCW,mt,at,d.id,Ke.layoutVertexBuffer,Ke.indexBuffer,Ke.segments,d.paint,S.transform.zoom,Fe,S.style.map.terrain&&Ke.centroidVertexBuffer)}}function cc(S,a,d,v,w,C,B){const j=S.context,Z=j.gl,Q=d.fbo;if(!Q)return;const se=S.useProgram("hillshade"),le=S.style.map.terrain&&S.style.map.terrain.getTerrainData(a);j.activeTexture.set(Z.TEXTURE0),Z.bindTexture(Z.TEXTURE_2D,Q.colorAttachment.get()),se.draw(j,Z.TRIANGLES,w,C,B,kr.disabled,((ye,Le,Pe,Me)=>{const Se=Pe.paint.get("hillshade-shadow-color"),Ke=Pe.paint.get("hillshade-highlight-color"),at=Pe.paint.get("hillshade-accent-color");let Fe=Pe.paint.get("hillshade-illumination-direction")*(Math.PI/180);Pe.paint.get("hillshade-illumination-anchor")==="viewport"&&(Fe-=ye.transform.angle);const Je=!ye.options.moving;return{u_matrix:Me?Me.posMatrix:ye.transform.calculatePosMatrix(Le.tileID.toUnwrapped(),Je),u_image:0,u_latrange:dm(0,Le.tileID),u_light:[Pe.paint.get("hillshade-exaggeration"),Fe],u_shadow:Se,u_highlight:Ke,u_accent:at}})(S,d,v,le?a:null),le,v.id,S.rasterBoundsBuffer,S.quadTriangleIndexBuffer,S.rasterBoundsSegments)}function wm(S,a,d,v,w,C){const B=S.context,j=B.gl,Z=a.dem;if(Z&&Z.data){const Q=Z.dim,se=Z.stride,le=Z.getPixels();if(B.activeTexture.set(j.TEXTURE1),B.pixelStoreUnpackPremultiplyAlpha.set(!1),a.demTexture=a.demTexture||S.getTileTexture(se),a.demTexture){const Le=a.demTexture;Le.update(le,{premultiply:!1}),Le.bind(j.NEAREST,j.CLAMP_TO_EDGE)}else a.demTexture=new X(B,le,j.RGBA,{premultiply:!1}),a.demTexture.bind(j.NEAREST,j.CLAMP_TO_EDGE);B.activeTexture.set(j.TEXTURE0);let ye=a.fbo;if(!ye){const Le=new X(B,{width:Q,height:Q,data:null},j.RGBA);Le.bind(j.LINEAR,j.CLAMP_TO_EDGE),ye=a.fbo=B.createFramebuffer(Q,Q,!0,!1),ye.colorAttachment.set(Le.texture)}B.bindFramebuffer.set(ye.framebuffer),B.viewport.set([0,0,Q,Q]),S.useProgram("hillshadePrepare").draw(B,j.TRIANGLES,v,w,C,kr.disabled,((Le,Pe)=>{const Me=Pe.stride,Se=l.F();return l.aN(Se,0,l.W,-l.W,0,0,1),l.H(Se,Se,[0,-l.W,0]),{u_matrix:Se,u_image:1,u_dimension:[Me,Me],u_zoom:Le.overscaledZ,u_unpack:Pe.getUnpackVector()}})(a.tileID,Z),null,d.id,S.rasterBoundsBuffer,S.quadTriangleIndexBuffer,S.rasterBoundsSegments),a.needsHillshadePrepare=!1}}function _l(S,a,d,v,w,C){const B=v.paint.get("raster-fade-duration");if(!C&&B>0){const j=y.now(),Z=(j-S.timeAdded)/B,Q=a?(j-a.timeAdded)/B:-1,se=d.getSource(),le=w.coveringZoomLevel({tileSize:se.tileSize,roundZoom:se.roundZoom}),ye=!a||Math.abs(a.tileID.overscaledZ-le)>Math.abs(S.tileID.overscaledZ-le),Le=ye&&S.refreshedUponExpiration?1:l.ac(ye?Z:1-Q,0,1);return S.refreshedUponExpiration&&Z>=1&&(S.refreshedUponExpiration=!1),a?{opacity:1,mix:1-Le}:{opacity:Le,mix:0}}return{opacity:1,mix:0}}const wf=new l.aO(1,0,0,1),Bd=new l.aO(0,1,0,1),Ef=new l.aO(0,0,1,1),Ev=new l.aO(1,0,1,1),Va=new l.aO(0,1,1,1);function oi(S,a,d,v){Fo(S,0,a+d/2,S.transform.width,d,v)}function Es(S,a,d,v){Fo(S,a-d/2,0,d,S.transform.height,v)}function Fo(S,a,d,v,w,C){const B=S.context,j=B.gl;j.enable(j.SCISSOR_TEST),j.scissor(a*S.pixelRatio,d*S.pixelRatio,v*S.pixelRatio,w*S.pixelRatio),B.clear({color:C}),j.disable(j.SCISSOR_TEST)}function ha(S,a,d){const v=S.context,w=v.gl,C=d.posMatrix,B=S.useProgram("debug"),j=Gn.disabled,Z=Br.disabled,Q=S.colorModeForRenderPass(),se="$debug",le=S.style.map.terrain&&S.style.map.terrain.getTerrainData(d);v.activeTexture.set(w.TEXTURE0);const ye=a.getTileByID(d.key).latestRawTileData,Le=Math.floor((ye&&ye.byteLength||0)/1024),Pe=a.getTile(d).tileSize,Me=512/Math.min(Pe,512)*(d.overscaledZ/S.transform.zoom)*.5;let Se=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(Se+=` => ${d.overscaledZ}`),function(Ke,at){Ke.initDebugOverlayCanvas();const Fe=Ke.debugOverlayCanvas,Je=Ke.context.gl,ut=Ke.debugOverlayCanvas.getContext("2d");ut.clearRect(0,0,Fe.width,Fe.height),ut.shadowColor="white",ut.shadowBlur=2,ut.lineWidth=1.5,ut.strokeStyle="white",ut.textBaseline="top",ut.font="bold 36px Open Sans, sans-serif",ut.fillText(at,5,5),ut.strokeText(at,5,5),Ke.debugOverlayTexture.update(Fe),Ke.debugOverlayTexture.bind(Je.LINEAR,Je.CLAMP_TO_EDGE)}(S,`${Se} ${Le}kB`),B.draw(v,w.TRIANGLES,j,Z,hi.alphaBlended,kr.disabled,Ld(C,l.aO.transparent,Me),null,se,S.debugBuffer,S.quadTriangleIndexBuffer,S.debugSegments),B.draw(v,w.LINE_STRIP,j,Z,Q,kr.disabled,Ld(C,l.aO.red),le,se,S.debugBuffer,S.tileBorderIndexBuffer,S.debugSegments)}function hc(S,a,d){const v=S.context,w=v.gl,C=S.colorModeForRenderPass(),B=new Gn(w.LEQUAL,Gn.ReadWrite,S.depthRangeFor3D),j=S.useProgram("terrain"),Z=a.getTerrainMesh();v.bindFramebuffer.set(null),v.viewport.set([0,0,S.width,S.height]);for(const Q of d){const se=S.renderToTexture.getTexture(Q),le=a.getTerrainData(Q.tileID);v.activeTexture.set(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,se.texture);const ye={u_matrix:S.transform.calculatePosMatrix(Q.tileID.toUnwrapped()),u_texture:0,u_ele_delta:a.getMeshFrameDelta(S.transform.zoom)};j.draw(v,w.TRIANGLES,B,Br.disabled,C,kr.backCCW,ye,le,"terrain",Z.vertexBuffer,Z.indexBuffer,Z.segments)}}class Em{constructor(a,d){this.context=new wv(a),this.transform=d,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:l.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Xr.maxUnderzooming+Xr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new _s}resize(a,d,v){if(this.width=Math.floor(a*v),this.height=Math.floor(d*v),this.pixelRatio=v,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const w of this.style._order)this.style._layers[w].resize()}setup(){const a=this.context,d=new l.aV;d.emplaceBack(0,0),d.emplaceBack(l.W,0),d.emplaceBack(0,l.W),d.emplaceBack(l.W,l.W),this.tileExtentBuffer=a.createVertexBuffer(d,Jr.members),this.tileExtentSegments=l.$.simpleSegment(0,0,4,2);const v=new l.aV;v.emplaceBack(0,0),v.emplaceBack(l.W,0),v.emplaceBack(0,l.W),v.emplaceBack(l.W,l.W),this.debugBuffer=a.createVertexBuffer(v,Jr.members),this.debugSegments=l.$.simpleSegment(0,0,4,5);const w=new l.Z;w.emplaceBack(0,0,0,0),w.emplaceBack(l.W,0,l.W,0),w.emplaceBack(0,l.W,0,l.W),w.emplaceBack(l.W,l.W,l.W,l.W),this.rasterBoundsBuffer=a.createVertexBuffer(w,_t.members),this.rasterBoundsSegments=l.$.simpleSegment(0,0,4,2);const C=new l.aV;C.emplaceBack(0,0),C.emplaceBack(1,0),C.emplaceBack(0,1),C.emplaceBack(1,1),this.viewportBuffer=a.createVertexBuffer(C,Jr.members),this.viewportSegments=l.$.simpleSegment(0,0,4,2);const B=new l.aW;B.emplaceBack(0),B.emplaceBack(1),B.emplaceBack(3),B.emplaceBack(2),B.emplaceBack(0),this.tileBorderIndexBuffer=a.createIndexBuffer(B);const j=new l.aX;j.emplaceBack(0,1,2),j.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=a.createIndexBuffer(j);const Z=this.context.gl;this.stencilClearMode=new Br({func:Z.ALWAYS,mask:0},0,255,Z.ZERO,Z.ZERO,Z.ZERO)}clearStencil(){const a=this.context,d=a.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const v=l.F();l.aN(v,0,this.width,this.height,0,0,1),l.J(v,v,[d.drawingBufferWidth,d.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(a,d.TRIANGLES,Gn.disabled,this.stencilClearMode,hi.disabled,kr.disabled,ih(v),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(a,d){if(this.currentStencilSource===a.source||!a.isTileClipped()||!d||!d.length)return;this.currentStencilSource=a.source;const v=this.context,w=v.gl;this.nextStencilID+d.length>256&&this.clearStencil(),v.setColorMode(hi.disabled),v.setDepthMode(Gn.disabled);const C=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const B of d){const j=this._tileClippingMaskIDs[B.key]=this.nextStencilID++,Z=this.style.map.terrain&&this.style.map.terrain.getTerrainData(B);C.draw(v,w.TRIANGLES,Gn.disabled,new Br({func:w.ALWAYS,mask:0},j,255,w.KEEP,w.KEEP,w.REPLACE),hi.disabled,kr.disabled,ih(B.posMatrix),Z,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const a=this.nextStencilID++,d=this.context.gl;return new Br({func:d.NOTEQUAL,mask:255},a,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(a){const d=this.context.gl;return new Br({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[a.key],0,d.KEEP,d.KEEP,d.REPLACE)}stencilConfigForOverlap(a){const d=this.context.gl,v=a.sort((B,j)=>j.overscaledZ-B.overscaledZ),w=v[v.length-1].overscaledZ,C=v[0].overscaledZ-w+1;if(C>1){this.currentStencilSource=void 0,this.nextStencilID+C>256&&this.clearStencil();const B={};for(let j=0;j<C;j++)B[j+w]=new Br({func:d.GEQUAL,mask:255},j+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=C,[B,v]}return[{[w]:Br.disabled},v]}colorModeForRenderPass(){const a=this.context.gl;return this._showOverdrawInspector?new hi([a.CONSTANT_COLOR,a.ONE],new l.aO(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?hi.unblended:hi.alphaBlended}depthModeForSublayer(a,d,v){if(!this.opaquePassEnabledForLayer())return Gn.disabled;const w=1-((1+this.currentLayer)*this.numSublayers+a)*this.depthEpsilon;return new Gn(v||this.context.gl.LEQUAL,d,[w,w])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(a,d){this.style=a,this.options=d,this.lineAtlas=a.lineAtlas,this.imageManager=a.imageManager,this.glyphManager=a.glyphManager,this.symbolFadeChange=a.placement.symbolFadeChange(y.now()),this.imageManager.beginFrame();const v=this.style._order,w=this.style.sourceCaches,C={},B={},j={};for(const Z in w){const Q=w[Z];Q.used&&Q.prepare(this.context),C[Z]=Q.getVisibleCoordinates(),B[Z]=C[Z].slice().reverse(),j[Z]=Q.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Z=0;Z<v.length;Z++)if(this.style._layers[v[Z]].is3D()){this.opaquePassCutoff=Z;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const Z of v){const Q=this.style._layers[Z];if(!Q.hasOffscreenPass()||Q.isHidden(this.transform.zoom))continue;const se=B[Q.source];(Q.type==="custom"||se.length)&&this.renderLayer(this,w[Q.source],Q,se)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:d.showOverdrawInspector?l.aO.black:l.aO.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=d.showOverdrawInspector,this.depthRangeFor3D=[0,1-(a._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=v.length-1;this.currentLayer>=0;this.currentLayer--){const Z=this.style._layers[v[this.currentLayer]],Q=w[Z.source],se=C[Z.source];this._renderTileClippingMasks(Z,se),this.renderLayer(this,Q,Z,se)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<v.length;this.currentLayer++){const Z=this.style._layers[v[this.currentLayer]],Q=w[Z.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(Z))continue;const se=(Z.type==="symbol"?j:B)[Z.source];this._renderTileClippingMasks(Z,C[Z.source]),this.renderLayer(this,Q,Z,se)}if(this.options.showTileBoundaries){const Z=function(Q,se){let le=null;const ye=Object.values(Q._layers).flatMap(Se=>Se.source&&!Se.isHidden(se)?[Q.sourceCaches[Se.source]]:[]),Le=ye.filter(Se=>Se.getSource().type==="vector"),Pe=ye.filter(Se=>Se.getSource().type!=="vector"),Me=Se=>{(!le||le.getSource().maxzoom<Se.getSource().maxzoom)&&(le=Se)};return Le.forEach(Se=>Me(Se)),le||Pe.forEach(Se=>Me(Se)),le}(this.style,this.transform.zoom);Z&&function(Q,se,le){for(let ye=0;ye<le.length;ye++)ha(Q,se,le[ye])}(this,Z,Z.getVisibleCoordinates())}this.options.showPadding&&function(Z){const Q=Z.transform.padding;oi(Z,Z.transform.height-(Q.top||0),3,wf),oi(Z,Q.bottom||0,3,Bd),Es(Z,Q.left||0,3,Ef),Es(Z,Z.transform.width-(Q.right||0),3,Ev);const se=Z.transform.centerPoint;(function(le,ye,Le,Pe){Fo(le,ye-1,Le-10,2,20,Pe),Fo(le,ye-10,Le-1,20,2,Pe)})(Z,se.x,Z.transform.height-se.y,Va)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(a){if(!this.style||!this.style.map||!this.style.map.terrain)return;const d=this.terrainFacilitator.matrix,v=this.transform.projMatrix;let w=this.terrainFacilitator.dirty;w||(w=a?!l.aY(d,v):!l.aZ(d,v)),w||(w=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),w&&(l.a_(d,v),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(C,B){const j=C.context,Z=j.gl,Q=hi.unblended,se=new Gn(Z.LEQUAL,Gn.ReadWrite,[0,1]),le=B.getTerrainMesh(),ye=B.sourceCache.getRenderableTiles(),Le=C.useProgram("terrainDepth");j.bindFramebuffer.set(B.getFramebuffer("depth").framebuffer),j.viewport.set([0,0,C.width/devicePixelRatio,C.height/devicePixelRatio]),j.clear({color:l.aO.transparent,depth:1});for(const Pe of ye){const Me=B.getTerrainData(Pe.tileID),Se={u_matrix:C.transform.calculatePosMatrix(Pe.tileID.toUnwrapped()),u_ele_delta:B.getMeshFrameDelta(C.transform.zoom)};Le.draw(j,Z.TRIANGLES,se,Br.disabled,Q,kr.backCCW,Se,Me,"terrain",le.vertexBuffer,le.indexBuffer,le.segments)}j.bindFramebuffer.set(null),j.viewport.set([0,0,C.width,C.height])}(this,this.style.map.terrain),function(C,B){const j=C.context,Z=j.gl,Q=hi.unblended,se=new Gn(Z.LEQUAL,Gn.ReadWrite,[0,1]),le=B.getTerrainMesh(),ye=B.getCoordsTexture(),Le=B.sourceCache.getRenderableTiles(),Pe=C.useProgram("terrainCoords");j.bindFramebuffer.set(B.getFramebuffer("coords").framebuffer),j.viewport.set([0,0,C.width/devicePixelRatio,C.height/devicePixelRatio]),j.clear({color:l.aO.transparent,depth:1}),B.coordsIndex=[];for(const Me of Le){const Se=B.getTerrainData(Me.tileID);j.activeTexture.set(Z.TEXTURE0),Z.bindTexture(Z.TEXTURE_2D,ye.texture);const Ke={u_matrix:C.transform.calculatePosMatrix(Me.tileID.toUnwrapped()),u_terrain_coords_id:(255-B.coordsIndex.length)/255,u_texture:0,u_ele_delta:B.getMeshFrameDelta(C.transform.zoom)};Pe.draw(j,Z.TRIANGLES,se,Br.disabled,Q,kr.backCCW,Ke,Se,"terrain",le.vertexBuffer,le.indexBuffer,le.segments),B.coordsIndex.push(Me.tileID.key)}j.bindFramebuffer.set(null),j.viewport.set([0,0,C.width,C.height])}(this,this.style.map.terrain))}renderLayer(a,d,v,w){if(!v.isHidden(this.transform.zoom)&&(v.type==="background"||v.type==="custom"||(w||[]).length))switch(this.id=v.id,v.type){case"symbol":(function(C,B,j,Z,Q){if(C.renderPass!=="translucent")return;const se=Br.disabled,le=C.colorModeForRenderPass();(j._unevaluatedLayout.hasValue("text-variable-anchor")||j._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(ye,Le,Pe,Me,Se,Ke,at){const Fe=Le.transform,Je=Se==="map",ut=Ke==="map";for(const ft of ye){const mt=Me.getTile(ft),Tt=mt.getBucket(Pe);if(!Tt||!Tt.text||!Tt.text.segments.get().length)continue;const Et=l.ag(Tt.textSizeData,Fe.zoom),Mt=sn(mt,1,Le.transform.zoom),zt=Tn(ft.posMatrix,ut,Je,Le.transform,Mt),Mn=Pe.layout.get("icon-text-fit")!=="none"&&Tt.hasIconData();if(Et){const $t=Math.pow(2,Fe.zoom-mt.tileID.overscaledZ);Dd(Tt,Je,ut,at,Fe,zt,ft.posMatrix,$t,Et,Mn,Le.style.map.terrain?(yn,Nn)=>Le.style.map.terrain.getElevation(ft,yn,Nn):null)}}}(Z,C,j,B,j.layout.get("text-rotation-alignment"),j.layout.get("text-pitch-alignment"),Q),j.paint.get("icon-opacity").constantOr(1)!==0&&zd(C,B,j,Z,!1,j.paint.get("icon-translate"),j.paint.get("icon-translate-anchor"),j.layout.get("icon-rotation-alignment"),j.layout.get("icon-pitch-alignment"),j.layout.get("icon-keep-upright"),se,le),j.paint.get("text-opacity").constantOr(1)!==0&&zd(C,B,j,Z,!0,j.paint.get("text-translate"),j.paint.get("text-translate-anchor"),j.layout.get("text-rotation-alignment"),j.layout.get("text-pitch-alignment"),j.layout.get("text-keep-upright"),se,le),B.map.showCollisionBoxes&&(Nd(C,B,j,Z,j.paint.get("text-translate"),j.paint.get("text-translate-anchor"),!0),Nd(C,B,j,Z,j.paint.get("icon-translate"),j.paint.get("icon-translate-anchor"),!1))})(a,d,v,w,this.style.placement.variableOffsets);break;case"circle":(function(C,B,j,Z){if(C.renderPass!=="translucent")return;const Q=j.paint.get("circle-opacity"),se=j.paint.get("circle-stroke-width"),le=j.paint.get("circle-stroke-opacity"),ye=!j.layout.get("circle-sort-key").isConstant();if(Q.constantOr(1)===0&&(se.constantOr(1)===0||le.constantOr(1)===0))return;const Le=C.context,Pe=Le.gl,Me=C.depthModeForSublayer(0,Gn.ReadOnly),Se=Br.disabled,Ke=C.colorModeForRenderPass(),at=[];for(let Fe=0;Fe<Z.length;Fe++){const Je=Z[Fe],ut=B.getTile(Je),ft=ut.getBucket(j);if(!ft)continue;const mt=ft.programConfigurations.get(j.id),Tt=C.useProgram("circle",mt),Et=ft.layoutVertexBuffer,Mt=ft.indexBuffer,zt=C.style.map.terrain&&C.style.map.terrain.getTerrainData(Je),Mn={programConfiguration:mt,program:Tt,layoutVertexBuffer:Et,indexBuffer:Mt,uniformValues:fm(C,Je,ut,j),terrainData:zt};if(ye){const $t=ft.segments.get();for(const yn of $t)at.push({segments:new l.$([yn]),sortKey:yn.sortKey,state:Mn})}else at.push({segments:ft.segments,sortKey:0,state:Mn})}ye&&at.sort((Fe,Je)=>Fe.sortKey-Je.sortKey);for(const Fe of at){const{programConfiguration:Je,program:ut,layoutVertexBuffer:ft,indexBuffer:mt,uniformValues:Tt,terrainData:Et}=Fe.state;ut.draw(Le,Pe.TRIANGLES,Me,Se,Ke,kr.disabled,Tt,Et,j.id,ft,mt,Fe.segments,j.paint,C.transform.zoom,Je)}})(a,d,v,w);break;case"heatmap":(function(C,B,j,Z){if(j.paint.get("heatmap-opacity")!==0)if(C.renderPass==="offscreen"){const Q=C.context,se=Q.gl,le=Br.disabled,ye=new hi([se.ONE,se.ONE],l.aO.transparent,[!0,!0,!0,!0]);(function(Le,Pe,Me){const Se=Le.gl;Le.activeTexture.set(Se.TEXTURE1),Le.viewport.set([0,0,Pe.width/4,Pe.height/4]);let Ke=Me.heatmapFbo;if(Ke)Se.bindTexture(Se.TEXTURE_2D,Ke.colorAttachment.get()),Le.bindFramebuffer.set(Ke.framebuffer);else{const at=Se.createTexture();Se.bindTexture(Se.TEXTURE_2D,at),Se.texParameteri(Se.TEXTURE_2D,Se.TEXTURE_WRAP_S,Se.CLAMP_TO_EDGE),Se.texParameteri(Se.TEXTURE_2D,Se.TEXTURE_WRAP_T,Se.CLAMP_TO_EDGE),Se.texParameteri(Se.TEXTURE_2D,Se.TEXTURE_MIN_FILTER,Se.LINEAR),Se.texParameteri(Se.TEXTURE_2D,Se.TEXTURE_MAG_FILTER,Se.LINEAR),Ke=Me.heatmapFbo=Le.createFramebuffer(Pe.width/4,Pe.height/4,!1,!1),function(Fe,Je,ut,ft){var mt,Tt;const Et=Fe.gl,Mt=(mt=Fe.HALF_FLOAT)!==null&&mt!==void 0?mt:Et.UNSIGNED_BYTE,zt=(Tt=Fe.RGBA16F)!==null&&Tt!==void 0?Tt:Et.RGBA;Et.texImage2D(Et.TEXTURE_2D,0,zt,Je.width/4,Je.height/4,0,Et.RGBA,Mt,null),ft.colorAttachment.set(ut)}(Le,Pe,at,Ke)}})(Q,C,j),Q.clear({color:l.aO.transparent});for(let Le=0;Le<Z.length;Le++){const Pe=Z[Le];if(B.hasRenderableParent(Pe))continue;const Me=B.getTile(Pe),Se=Me.getBucket(j);if(!Se)continue;const Ke=Se.programConfigurations.get(j.id),at=C.useProgram("heatmap",Ke),{zoom:Fe}=C.transform;at.draw(Q,se.TRIANGLES,Gn.disabled,le,ye,kr.disabled,pf(Pe.posMatrix,Me,Fe,j.paint.get("heatmap-intensity")),null,j.id,Se.layoutVertexBuffer,Se.indexBuffer,Se.segments,j.paint,C.transform.zoom,Ke)}Q.viewport.set([0,0,C.width,C.height])}else C.renderPass==="translucent"&&(C.context.setColorMode(C.colorModeForRenderPass()),function(Q,se){const le=Q.context,ye=le.gl,Le=se.heatmapFbo;if(!Le)return;le.activeTexture.set(ye.TEXTURE0),ye.bindTexture(ye.TEXTURE_2D,Le.colorAttachment.get()),le.activeTexture.set(ye.TEXTURE1);let Pe=se.colorRampTexture;Pe||(Pe=se.colorRampTexture=new X(le,se.colorRamp,ye.RGBA)),Pe.bind(ye.LINEAR,ye.CLAMP_TO_EDGE),Q.useProgram("heatmapTexture").draw(le,ye.TRIANGLES,Gn.disabled,Br.disabled,Q.colorModeForRenderPass(),kr.disabled,((Me,Se,Ke,at)=>{const Fe=l.F();l.aN(Fe,0,Me.width,Me.height,0,0,1);const Je=Me.context.gl;return{u_matrix:Fe,u_world:[Je.drawingBufferWidth,Je.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Se.paint.get("heatmap-opacity")}})(Q,se),null,se.id,Q.viewportBuffer,Q.quadTriangleIndexBuffer,Q.viewportSegments,se.paint,Q.transform.zoom)}(C,j))})(a,d,v,w);break;case"line":(function(C,B,j,Z){if(C.renderPass!=="translucent")return;const Q=j.paint.get("line-opacity"),se=j.paint.get("line-width");if(Q.constantOr(1)===0||se.constantOr(1)===0)return;const le=C.depthModeForSublayer(0,Gn.ReadOnly),ye=C.colorModeForRenderPass(),Le=j.paint.get("line-dasharray"),Pe=j.paint.get("line-pattern"),Me=Pe.constantOr(1),Se=j.paint.get("line-gradient"),Ke=j.getCrossfadeParameters(),at=Me?"linePattern":Le?"lineSDF":Se?"lineGradient":"line",Fe=C.context,Je=Fe.gl;let ut=!0;for(const ft of Z){const mt=B.getTile(ft);if(Me&&!mt.patternsLoaded())continue;const Tt=mt.getBucket(j);if(!Tt)continue;const Et=Tt.programConfigurations.get(j.id),Mt=C.context.program.get(),zt=C.useProgram(at,Et),Mn=ut||zt.program!==Mt,$t=C.style.map.terrain&&C.style.map.terrain.getTerrainData(ft),yn=Pe.constantOr(null);if(yn&&mt.imageAtlas){const Ln=mt.imageAtlas,zn=Ln.patternPositions[yn.to.toString()],Vn=Ln.patternPositions[yn.from.toString()];zn&&Vn&&Et.setConstantPatternPositions(zn,Vn)}const Nn=$t?ft:null,nr=Me?An(C,mt,j,Ke,Nn):Le?vs(C,mt,j,Le,Ke,Nn):Se?Kg(C,mt,j,Tt.lineClipsArray.length,Nn):oh(C,mt,j,Nn);if(Me)Fe.activeTexture.set(Je.TEXTURE0),mt.imageAtlasTexture.bind(Je.LINEAR,Je.CLAMP_TO_EDGE),Et.updatePaintBuffers(Ke);else if(Le&&(Mn||C.lineAtlas.dirty))Fe.activeTexture.set(Je.TEXTURE0),C.lineAtlas.bind(Fe);else if(Se){const Ln=Tt.gradients[j.id];let zn=Ln.texture;if(j.gradientVersion!==Ln.version){let Vn=256;if(j.stepInterpolant){const wi=B.getSource().maxzoom,Rr=ft.canonical.z===wi?Math.ceil(1<<C.transform.maxZoom-ft.canonical.z):1;Vn=l.ac(l.aT(Tt.maxLineLength/l.W*1024*Rr),256,Fe.maxTextureSize)}Ln.gradient=l.aU({expression:j.gradientExpression(),evaluationKey:"lineProgress",resolution:Vn,image:Ln.gradient||void 0,clips:Tt.lineClipsArray}),Ln.texture?Ln.texture.update(Ln.gradient):Ln.texture=new X(Fe,Ln.gradient,Je.RGBA),Ln.version=j.gradientVersion,zn=Ln.texture}Fe.activeTexture.set(Je.TEXTURE0),zn.bind(j.stepInterpolant?Je.NEAREST:Je.LINEAR,Je.CLAMP_TO_EDGE)}zt.draw(Fe,Je.TRIANGLES,le,C.stencilModeForClipping(ft),ye,kr.disabled,nr,$t,j.id,Tt.layoutVertexBuffer,Tt.indexBuffer,Tt.segments,j.paint,C.transform.zoom,Et,Tt.layoutVertexBuffer2),ut=!1}})(a,d,v,w);break;case"fill":(function(C,B,j,Z){const Q=j.paint.get("fill-color"),se=j.paint.get("fill-opacity");if(se.constantOr(1)===0)return;const le=C.colorModeForRenderPass(),ye=j.paint.get("fill-pattern"),Le=C.opaquePassEnabledForLayer()&&!ye.constantOr(1)&&Q.constantOr(l.aO.transparent).a===1&&se.constantOr(0)===1?"opaque":"translucent";if(C.renderPass===Le){const Pe=C.depthModeForSublayer(1,C.renderPass==="opaque"?Gn.ReadWrite:Gn.ReadOnly);ph(C,B,j,Z,Pe,le,!1)}if(C.renderPass==="translucent"&&j.paint.get("fill-antialias")){const Pe=C.depthModeForSublayer(j.getPaintProperty("fill-outline-color")?2:0,Gn.ReadOnly);ph(C,B,j,Z,Pe,le,!0)}})(a,d,v,w);break;case"fill-extrusion":(function(C,B,j,Z){const Q=j.paint.get("fill-extrusion-opacity");if(Q!==0&&C.renderPass==="translucent"){const se=new Gn(C.context.gl.LEQUAL,Gn.ReadWrite,C.depthRangeFor3D);if(Q!==1||j.paint.get("fill-extrusion-pattern").constantOr(1))bf(C,B,j,Z,se,Br.disabled,hi.disabled),bf(C,B,j,Z,se,C.stencilModeFor3D(),C.colorModeForRenderPass());else{const le=C.colorModeForRenderPass();bf(C,B,j,Z,se,Br.disabled,le)}}})(a,d,v,w);break;case"hillshade":(function(C,B,j,Z){if(C.renderPass!=="offscreen"&&C.renderPass!=="translucent")return;const Q=C.context,se=C.depthModeForSublayer(0,Gn.ReadOnly),le=C.colorModeForRenderPass(),[ye,Le]=C.renderPass==="translucent"?C.stencilConfigForOverlap(Z):[{},Z];for(const Pe of Le){const Me=B.getTile(Pe);Me.needsHillshadePrepare!==void 0&&Me.needsHillshadePrepare&&C.renderPass==="offscreen"?wm(C,Me,j,se,Br.disabled,le):C.renderPass==="translucent"&&cc(C,Pe,Me,j,se,ye[Pe.overscaledZ],le)}Q.viewport.set([0,0,C.width,C.height])})(a,d,v,w);break;case"raster":(function(C,B,j,Z){if(C.renderPass!=="translucent"||j.paint.get("raster-opacity")===0||!Z.length)return;const Q=C.context,se=Q.gl,le=B.getSource(),ye=C.useProgram("raster"),Le=C.colorModeForRenderPass(),[Pe,Me]=le instanceof Pt?[{},Z]:C.stencilConfigForOverlap(Z),Se=Me[Me.length-1].overscaledZ,Ke=!C.options.moving;for(const at of Me){const Fe=C.depthModeForSublayer(at.overscaledZ-Se,j.paint.get("raster-opacity")===1?Gn.ReadWrite:Gn.ReadOnly,se.LESS),Je=B.getTile(at);Je.registerFadeDuration(j.paint.get("raster-fade-duration"));const ut=B.findLoadedParent(at,0),ft=_l(Je,ut,B,j,C.transform,C.style.map.terrain);let mt,Tt;const Et=j.paint.get("raster-resampling")==="nearest"?se.NEAREST:se.LINEAR;Q.activeTexture.set(se.TEXTURE0),Je.texture.bind(Et,se.CLAMP_TO_EDGE,se.LINEAR_MIPMAP_NEAREST),Q.activeTexture.set(se.TEXTURE1),ut?(ut.texture.bind(Et,se.CLAMP_TO_EDGE,se.LINEAR_MIPMAP_NEAREST),mt=Math.pow(2,ut.tileID.overscaledZ-Je.tileID.overscaledZ),Tt=[Je.tileID.canonical.x*mt%1,Je.tileID.canonical.y*mt%1]):Je.texture.bind(Et,se.CLAMP_TO_EDGE,se.LINEAR_MIPMAP_NEAREST);const Mt=C.style.map.terrain&&C.style.map.terrain.getTerrainData(at),zt=Mt?at:null,Mn=zt?zt.posMatrix:C.transform.calculatePosMatrix(at.toUnwrapped(),Ke),$t=ah(Mn,Tt||[0,0],mt||1,ft,j);le instanceof Pt?ye.draw(Q,se.TRIANGLES,Fe,Br.disabled,Le,kr.disabled,$t,Mt,j.id,le.boundsBuffer,C.quadTriangleIndexBuffer,le.boundsSegments):ye.draw(Q,se.TRIANGLES,Fe,Pe[at.overscaledZ],Le,kr.disabled,$t,Mt,j.id,C.rasterBoundsBuffer,C.quadTriangleIndexBuffer,C.rasterBoundsSegments)}})(a,d,v,w);break;case"background":(function(C,B,j,Z){const Q=j.paint.get("background-color"),se=j.paint.get("background-opacity");if(se===0)return;const le=C.context,ye=le.gl,Le=C.transform,Pe=Le.tileSize,Me=j.paint.get("background-pattern");if(C.isPatternMissing(Me))return;const Se=!Me&&Q.a===1&&se===1&&C.opaquePassEnabledForLayer()?"opaque":"translucent";if(C.renderPass!==Se)return;const Ke=Br.disabled,at=C.depthModeForSublayer(0,Se==="opaque"?Gn.ReadWrite:Gn.ReadOnly),Fe=C.colorModeForRenderPass(),Je=C.useProgram(Me?"backgroundPattern":"background"),ut=Z||Le.coveringTiles({tileSize:Pe,terrain:C.style.map.terrain});Me&&(le.activeTexture.set(ye.TEXTURE0),C.imageManager.bind(C.context));const ft=j.getCrossfadeParameters();for(const mt of ut){const Tt=Z?mt.posMatrix:C.transform.calculatePosMatrix(mt.toUnwrapped()),Et=Me?uo(Tt,se,C,Me,{tileID:mt,tileSize:Pe},ft):mf(Tt,se,Q),Mt=C.style.map.terrain&&C.style.map.terrain.getTerrainData(mt);Je.draw(le,ye.TRIANGLES,at,Ke,Fe,kr.disabled,Et,Mt,j.id,C.tileExtentBuffer,C.quadTriangleIndexBuffer,C.tileExtentSegments)}})(a,0,v,w);break;case"custom":(function(C,B,j){const Z=C.context,Q=j.implementation;if(C.renderPass==="offscreen"){const se=Q.prerender;se&&(C.setCustomLayerDefaults(),Z.setColorMode(C.colorModeForRenderPass()),se.call(Q,Z.gl,C.transform.customLayerMatrix()),Z.setDirty(),C.setBaseState())}else if(C.renderPass==="translucent"){C.setCustomLayerDefaults(),Z.setColorMode(C.colorModeForRenderPass()),Z.setStencilMode(Br.disabled);const se=Q.renderingMode==="3d"?new Gn(C.context.gl.LEQUAL,Gn.ReadWrite,C.depthRangeFor3D):C.depthModeForSublayer(0,Gn.ReadOnly);Z.setDepthMode(se),Q.render(Z.gl,C.transform.customLayerMatrix()),Z.setDirty(),C.setBaseState(),Z.bindFramebuffer.set(null)}})(a,0,v)}}translatePosMatrix(a,d,v,w,C){if(!v[0]&&!v[1])return a;const B=C?w==="map"?this.transform.angle:0:w==="viewport"?-this.transform.angle:0;if(B){const Q=Math.sin(B),se=Math.cos(B);v=[v[0]*se-v[1]*Q,v[0]*Q+v[1]*se]}const j=[C?v[0]:sn(d,v[0],this.transform.zoom),C?v[1]:sn(d,v[1],this.transform.zoom),0],Z=new Float32Array(16);return l.H(Z,a,j),Z}saveTileTexture(a){const d=this._tileTextures[a.size[0]];d?d.push(a):this._tileTextures[a.size[0]]=[a]}getTileTexture(a){const d=this._tileTextures[a];return d&&d.length>0?d.pop():null}isPatternMissing(a){if(!a)return!1;if(!a.from||!a.to)return!0;const d=this.imageManager.getPattern(a.from.toString()),v=this.imageManager.getPattern(a.to.toString());return!d||!v}useProgram(a,d){this.cache=this.cache||{};const v=a+(d?d.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[v]||(this.cache[v]=new Wo(this.context,su[a],d,au[a],this._showOverdrawInspector,this.style.map.terrain)),this.cache[v]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const a=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(a.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new X(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:a,drawingBufferHeight:d}=this.context.gl;return this.width!==a||this.height!==d}}class Ga{constructor(a,d){this.points=a,this.planes=d}static fromInvProjectionMatrix(a,d,v){const w=Math.pow(2,v),C=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(j=>{const Z=1/(j=l.af([],j,a))[3]/d*w;return l.a$(j,j,[Z,Z,1/j[3],Z])}),B=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(j=>{const Z=function(ye,Le){var Pe=Le[0],Me=Le[1],Se=Le[2],Ke=Pe*Pe+Me*Me+Se*Se;return Ke>0&&(Ke=1/Math.sqrt(Ke)),ye[0]=Le[0]*Ke,ye[1]=Le[1]*Ke,ye[2]=Le[2]*Ke,ye}([],function(ye,Le,Pe){var Me=Le[0],Se=Le[1],Ke=Le[2],at=Pe[0],Fe=Pe[1],Je=Pe[2];return ye[0]=Se*Je-Ke*Fe,ye[1]=Ke*at-Me*Je,ye[2]=Me*Fe-Se*at,ye}([],H([],C[j[0]],C[j[1]]),H([],C[j[2]],C[j[1]]))),Q=-((se=Z)[0]*(le=C[j[1]])[0]+se[1]*le[1]+se[2]*le[2]);var se,le;return Z.concat(Q)});return new Ga(C,B)}}class fa{constructor(a,d){this.min=a,this.max=d,this.center=function(v,w,C){return v[0]=.5*w[0],v[1]=.5*w[1],v[2]=.5*w[2],v}([],function(v,w,C){return v[0]=w[0]+C[0],v[1]=w[1]+C[1],v[2]=w[2]+C[2],v}([],this.min,this.max))}quadrant(a){const d=[a%2==0,a<2],v=q(this.min),w=q(this.max);for(let C=0;C<d.length;C++)v[C]=d[C]?this.min[C]:this.center[C],w[C]=d[C]?this.center[C]:this.max[C];return w[2]=this.max[2],new fa(v,w)}distanceX(a){return Math.max(Math.min(this.max[0],a[0]),this.min[0])-a[0]}distanceY(a){return Math.max(Math.min(this.max[1],a[1]),this.min[1])-a[1]}intersects(a){const d=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let v=!0;for(let w=0;w<a.planes.length;w++){const C=a.planes[w];let B=0;for(let j=0;j<d.length;j++)l.b0(C,d[j])>=0&&B++;if(B===0)return 0;B!==d.length&&(v=!1)}if(v)return 2;for(let w=0;w<3;w++){let C=Number.MAX_VALUE,B=-Number.MAX_VALUE;for(let j=0;j<a.points.length;j++){const Z=a.points[j][w]-this.min[w];C=Math.min(C,Z),B=Math.max(B,Z)}if(B<0||C>this.max[w]-this.min[w])return 0}return 1}}class hu{constructor(a=0,d=0,v=0,w=0){if(isNaN(a)||a<0||isNaN(d)||d<0||isNaN(v)||v<0||isNaN(w)||w<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=a,this.bottom=d,this.left=v,this.right=w}interpolate(a,d,v){return d.top!=null&&a.top!=null&&(this.top=l.z.number(a.top,d.top,v)),d.bottom!=null&&a.bottom!=null&&(this.bottom=l.z.number(a.bottom,d.bottom,v)),d.left!=null&&a.left!=null&&(this.left=l.z.number(a.left,d.left,v)),d.right!=null&&a.right!=null&&(this.right=l.z.number(a.right,d.right,v)),this}getCenter(a,d){const v=l.ac((this.left+a-this.right)/2,0,a),w=l.ac((this.top+d-this.bottom)/2,0,d);return new l.P(v,w)}equals(a){return this.top===a.top&&this.bottom===a.bottom&&this.left===a.left&&this.right===a.right}clone(){return new hu(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const mh=85.051129;class vl{constructor(a,d,v,w,C){this.tileSize=512,this._renderWorldCopies=C===void 0||!!C,this._minZoom=a||0,this._maxZoom=d||22,this._minPitch=v??0,this._maxPitch=w??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.M(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new hu,this._posMatrixCache={},this._alignedPosMatrixCache={},this.minElevationForCurrentTile=0}clone(){const a=new vl(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return a.apply(this),a}apply(a){this.tileSize=a.tileSize,this.latRange=a.latRange,this.width=a.width,this.height=a.height,this._center=a._center,this._elevation=a._elevation,this.minElevationForCurrentTile=a.minElevationForCurrentTile,this.zoom=a.zoom,this.angle=a.angle,this._fov=a._fov,this._pitch=a._pitch,this._unmodified=a._unmodified,this._edgeInsets=a._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(a){this._minZoom!==a&&(this._minZoom=a,this.zoom=Math.max(this.zoom,a))}get maxZoom(){return this._maxZoom}set maxZoom(a){this._maxZoom!==a&&(this._maxZoom=a,this.zoom=Math.min(this.zoom,a))}get minPitch(){return this._minPitch}set minPitch(a){this._minPitch!==a&&(this._minPitch=a,this.pitch=Math.max(this.pitch,a))}get maxPitch(){return this._maxPitch}set maxPitch(a){this._maxPitch!==a&&(this._maxPitch=a,this.pitch=Math.min(this.pitch,a))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(a){a===void 0?a=!0:a===null&&(a=!1),this._renderWorldCopies=a}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(a){const d=-l.b1(a,-180,180)*Math.PI/180;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=function(){var v=new l.A(4);return l.A!=Float32Array&&(v[1]=0,v[2]=0),v[0]=1,v[3]=1,v}(),function(v,w,C){var B=w[0],j=w[1],Z=w[2],Q=w[3],se=Math.sin(C),le=Math.cos(C);v[0]=B*le+Z*se,v[1]=j*le+Q*se,v[2]=B*-se+Z*le,v[3]=j*-se+Q*le}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(a){const d=l.ac(a,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(a){a=Math.max(.01,Math.min(60,a)),this._fov!==a&&(this._unmodified=!1,this._fov=a/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(a){const d=Math.min(Math.max(a,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._zoom=d,this.tileZoom=Math.max(0,Math.floor(d)),this.scale=this.zoomScale(d),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(a){a.lat===this._center.lat&&a.lng===this._center.lng||(this._unmodified=!1,this._center=a,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(a){a!==this._elevation&&(this._elevation=a,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(a){this._edgeInsets.equals(a)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,a,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(a){return this._edgeInsets.equals(a)}interpolatePadding(a,d,v){this._unmodified=!1,this._edgeInsets.interpolate(a,d,v),this._constrain(),this._calcMatrices()}coveringZoomLevel(a){const d=(a.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/a.tileSize));return Math.max(0,d)}getVisibleUnwrappedCoordinates(a){const d=[new l.b2(0,a)];if(this._renderWorldCopies){const v=this.pointCoordinate(new l.P(0,0)),w=this.pointCoordinate(new l.P(this.width,0)),C=this.pointCoordinate(new l.P(this.width,this.height)),B=this.pointCoordinate(new l.P(0,this.height)),j=Math.floor(Math.min(v.x,w.x,C.x,B.x)),Z=Math.floor(Math.max(v.x,w.x,C.x,B.x)),Q=1;for(let se=j-Q;se<=Z+Q;se++)se!==0&&d.push(new l.b2(se,a))}return d}coveringTiles(a){var d,v;let w=this.coveringZoomLevel(a);const C=w;if(a.minzoom!==void 0&&w<a.minzoom)return[];a.maxzoom!==void 0&&w>a.maxzoom&&(w=a.maxzoom);const B=this.pointCoordinate(this.getCameraPoint()),j=l.Y.fromLngLat(this.center),Z=Math.pow(2,w),Q=[Z*B.x,Z*B.y,0],se=[Z*j.x,Z*j.y,0],le=Ga.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,w);let ye=a.minzoom||0;!a.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(ye=w);const Le=a.terrain?2/Math.min(this.tileSize,a.tileSize)*this.tileSize:3,Pe=Fe=>({aabb:new fa([Fe*Z,0,0],[(Fe+1)*Z,Z,0]),zoom:0,x:0,y:0,wrap:Fe,fullyVisible:!1}),Me=[],Se=[],Ke=w,at=a.reparseOverscaled?C:w;if(this._renderWorldCopies)for(let Fe=1;Fe<=3;Fe++)Me.push(Pe(-Fe)),Me.push(Pe(Fe));for(Me.push(Pe(0));Me.length>0;){const Fe=Me.pop(),Je=Fe.x,ut=Fe.y;let ft=Fe.fullyVisible;if(!ft){const zt=Fe.aabb.intersects(le);if(zt===0)continue;ft=zt===2}const mt=a.terrain?Q:se,Tt=Fe.aabb.distanceX(mt),Et=Fe.aabb.distanceY(mt),Mt=Math.max(Math.abs(Tt),Math.abs(Et));if(Fe.zoom===Ke||Mt>Le+(1<<Ke-Fe.zoom)-2&&Fe.zoom>=ye){const zt=Ke-Fe.zoom,Mn=Q[0]-.5-(Je<<zt),$t=Q[1]-.5-(ut<<zt);Se.push({tileID:new l.Q(Fe.zoom===Ke?at:Fe.zoom,Fe.wrap,Fe.zoom,Je,ut),distanceSq:J([se[0]-.5-Je,se[1]-.5-ut]),tileDistanceToCamera:Math.sqrt(Mn*Mn+$t*$t)})}else for(let zt=0;zt<4;zt++){const Mn=(Je<<1)+zt%2,$t=(ut<<1)+(zt>>1),yn=Fe.zoom+1;let Nn=Fe.aabb.quadrant(zt);if(a.terrain){const nr=new l.Q(yn,Fe.wrap,yn,Mn,$t),Ln=a.terrain.getMinMaxElevation(nr),zn=(d=Ln.minElevation)!==null&&d!==void 0?d:this.elevation,Vn=(v=Ln.maxElevation)!==null&&v!==void 0?v:this.elevation;Nn=new fa([Nn.min[0],Nn.min[1],zn],[Nn.max[0],Nn.max[1],Vn])}Me.push({aabb:Nn,zoom:yn,x:Mn,y:$t,wrap:Fe.wrap,fullyVisible:ft})}}return Se.sort((Fe,Je)=>Fe.distanceSq-Je.distanceSq).map(Fe=>Fe.tileID)}resize(a,d){this.width=a,this.height=d,this.pixelsToGLUnits=[2/a,-2/d],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(a){return Math.pow(2,a)}scaleZoom(a){return Math.log(a)/Math.LN2}project(a){const d=l.ac(a.lat,-85.051129,mh);return new l.P(l.N(a.lng)*this.worldSize,l.O(d)*this.worldSize)}unproject(a){return new l.Y(a.x/this.worldSize,a.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(a){const d=this.elevation,v=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,w=this.pointLocation(this.centerPoint,a),C=a.getElevationForLngLatZoom(w,this.tileZoom);if(!(this.elevation-C))return;const B=v+d-C,j=Math.cos(this._pitch)*this.cameraToCenterDistance/B/l.b3(1,w.lat),Z=this.scaleZoom(j/this.tileSize);this._elevation=C,this._center=w,this.zoom=Z}setLocationAtPoint(a,d){const v=this.pointCoordinate(d),w=this.pointCoordinate(this.centerPoint),C=this.locationCoordinate(a),B=new l.Y(C.x-(v.x-w.x),C.y-(v.y-w.y));this.center=this.coordinateLocation(B),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(a,d){return d?this.coordinatePoint(this.locationCoordinate(a),d.getElevationForLngLatZoom(a,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(a))}pointLocation(a,d){return this.coordinateLocation(this.pointCoordinate(a,d))}locationCoordinate(a){return l.Y.fromLngLat(a)}coordinateLocation(a){return a&&a.toLngLat()}pointCoordinate(a,d){if(d){const ye=d.pointCoordinate(a);if(ye!=null)return ye}const v=[a.x,a.y,0,1],w=[a.x,a.y,1,1];l.af(v,v,this.pixelMatrixInverse),l.af(w,w,this.pixelMatrixInverse);const C=v[3],B=w[3],j=v[1]/C,Z=w[1]/B,Q=v[2]/C,se=w[2]/B,le=Q===se?0:(0-Q)/(se-Q);return new l.Y(l.z.number(v[0]/C,w[0]/B,le)/this.worldSize,l.z.number(j,Z,le)/this.worldSize)}coordinatePoint(a,d=0,v=this.pixelMatrix){const w=[a.x*this.worldSize,a.y*this.worldSize,d,1];return l.af(w,w,v),new l.P(w[0]/w[3],w[1]/w[3])}getBounds(){const a=Math.max(0,this.height/2-this.getHorizon());return new Kt().extend(this.pointLocation(new l.P(0,a))).extend(this.pointLocation(new l.P(this.width,a))).extend(this.pointLocation(new l.P(this.width,this.height))).extend(this.pointLocation(new l.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Kt([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(a){a?(this.lngRange=[a.getWest(),a.getEast()],this.latRange=[a.getSouth(),a.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,mh])}calculatePosMatrix(a,d=!1){const v=a.key,w=d?this._alignedPosMatrixCache:this._posMatrixCache;if(w[v])return w[v];const C=a.canonical,B=this.worldSize/this.zoomScale(C.z),j=C.x+Math.pow(2,C.z)*a.wrap,Z=l.an(new Float64Array(16));return l.H(Z,Z,[j*B,C.y*B,0]),l.J(Z,Z,[B/l.W,B/l.W,1]),l.K(Z,d?this.alignedProjMatrix:this.projMatrix,Z),w[v]=new Float32Array(Z),w[v]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(a,d){d=l.ac(+d,this.minZoom,this.maxZoom);const v={center:new l.M(a.lng,a.lat),zoom:d};let w=this.lngRange;if(!this._renderWorldCopies&&w===null){const Fe=179.9999999999;w=[-Fe,Fe]}const C=this.tileSize*this.zoomScale(v.zoom);let B=0,j=C,Z=0,Q=C,se=0,le=0;const{x:ye,y:Le}=this.size;if(this.latRange){const Fe=this.latRange;B=l.O(Fe[1])*C,j=l.O(Fe[0])*C,j-B<Le&&(se=Le/(j-B))}w&&(Z=l.b1(l.N(w[0])*C,0,C),Q=l.b1(l.N(w[1])*C,0,C),Q<Z&&(Q+=C),Q-Z<ye&&(le=ye/(Q-Z)));const{x:Pe,y:Me}=this.project.call({worldSize:C},a);let Se,Ke;const at=Math.max(le||0,se||0);if(at){const Fe=new l.P(le?(Q+Z)/2:Pe,se?(j+B)/2:Me);return v.center=this.unproject.call({worldSize:C},Fe).wrap(),v.zoom+=this.scaleZoom(at),v}if(this.latRange){const Fe=Le/2;Me-Fe<B&&(Ke=B+Fe),Me+Fe>j&&(Ke=j-Fe)}if(w){const Fe=(Z+Q)/2;let Je=Pe;this._renderWorldCopies&&(Je=l.b1(Pe,Fe-C/2,Fe+C/2));const ut=ye/2;Je-ut<Z&&(Se=Z+ut),Je+ut>Q&&(Se=Q-ut)}if(Se!==void 0||Ke!==void 0){const Fe=new l.P(Se??Pe,Ke??Me);v.center=this.unproject.call({worldSize:C},Fe).wrap()}return v}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const a=this._unmodified,{center:d,zoom:v}=this.getConstrained(this.center,this.zoom);this.center=d,this.zoom=v,this._unmodified=a,this._constraining=!1}_calcMatrices(){if(!this.height)return;const a=this.centerOffset,d=this.point.x,v=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=l.b3(1,this.center.lat)*this.worldSize;let w=l.an(new Float64Array(16));l.J(w,w,[this.width/2,-this.height/2,1]),l.H(w,w,[1,-1,0]),this.labelPlaneMatrix=w,w=l.an(new Float64Array(16)),l.J(w,w,[1,-1,1]),l.H(w,w,[-1,-1,0]),l.J(w,w,[2/this.width,2/this.height,1]),this.glCoordMatrix=w;const C=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),B=Math.min(this.elevation,this.minElevationForCurrentTile),j=C-B*this._pixelPerMeter/Math.cos(this._pitch),Z=B<0?j:C,Q=Math.PI/2+this._pitch,se=this._fov*(.5+a.y/this.height),le=Math.sin(se)*Z/Math.sin(l.ac(Math.PI-Q-se,.01,Math.PI-.01)),ye=this.getHorizon(),Le=2*Math.atan(ye/this.cameraToCenterDistance)*(.5+a.y/(2*ye)),Pe=Math.sin(Le)*Z/Math.sin(l.ac(Math.PI-Q-Le,.01,Math.PI-.01)),Me=Math.min(le,Pe),Se=1.01*(Math.cos(Math.PI/2-this._pitch)*Me+Z),Ke=this.height/50;w=new Float64Array(16),l.b4(w,this._fov,this.width/this.height,Ke,Se),w[8]=2*-a.x/this.width,w[9]=2*a.y/this.height,l.J(w,w,[1,-1,1]),l.H(w,w,[0,0,-this.cameraToCenterDistance]),l.b5(w,w,this._pitch),l.ad(w,w,this.angle),l.H(w,w,[-d,-v,0]),this.mercatorMatrix=l.J([],w,[this.worldSize,this.worldSize,this.worldSize]),l.J(w,w,[1,1,this._pixelPerMeter]),this.pixelMatrix=l.K(new Float64Array(16),this.labelPlaneMatrix,w),l.H(w,w,[0,0,-this.elevation]),this.projMatrix=w,this.invProjMatrix=l.ar([],w),this.pixelMatrix3D=l.K(new Float64Array(16),this.labelPlaneMatrix,w);const at=this.width%2/2,Fe=this.height%2/2,Je=Math.cos(this.angle),ut=Math.sin(this.angle),ft=d-Math.round(d)+Je*at+ut*Fe,mt=v-Math.round(v)+Je*Fe+ut*at,Tt=new Float64Array(w);if(l.H(Tt,Tt,[ft>.5?ft-1:ft,mt>.5?mt-1:mt,0]),this.alignedProjMatrix=Tt,w=l.ar(new Float64Array(16),this.pixelMatrix),!w)throw new Error("failed to invert matrix");this.pixelMatrixInverse=w,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const a=this.pointCoordinate(new l.P(0,0)),d=[a.x*this.worldSize,a.y*this.worldSize,0,1];return l.af(d,d,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const a=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.P(0,a))}getCameraQueryGeometry(a){const d=this.getCameraPoint();if(a.length===1)return[a[0],d];{let v=d.x,w=d.y,C=d.x,B=d.y;for(const j of a)v=Math.min(v,j.x),w=Math.min(w,j.y),C=Math.max(C,j.x),B=Math.max(B,j.y);return[new l.P(v,w),new l.P(C,w),new l.P(C,B),new l.P(v,B),new l.P(v,w)]}}lngLatToCameraDepth(a,d){const v=this.locationCoordinate(a),w=[v.x*this.worldSize,v.y*this.worldSize,d,1];return l.af(w,w,this.projMatrix),w[2]/w[3]}}function gh(S,a){let d,v=!1,w=null,C=null;const B=()=>{w=null,v&&(S.apply(C,d),w=setTimeout(B,a),v=!1)};return(...j)=>(v=!0,C=this,d=j,w||B(),w)}class Sf{constructor(a){this._getCurrentHash=()=>{const d=window.location.hash.replace("#","");if(this._hashName){let v;return d.split("&").map(w=>w.split("=")).forEach(w=>{w[0]===this._hashName&&(v=w)}),(v&&v[1]||"").split("/")}return d.split("/")},this._onHashChange=()=>{const d=this._getCurrentHash();if(d.length>=3&&!d.some(v=>isNaN(v))){const v=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(d[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:v,pitch:+(d[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const d=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,d)}catch{}},this._updateHash=gh(this._updateHashUnthrottled,300),this._hashName=a&&encodeURIComponent(a)}addTo(a){return this._map=a,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(a){const d=this._map.getCenter(),v=Math.round(100*this._map.getZoom())/100,w=Math.ceil((v*Math.LN2+Math.log(512/360/.5))/Math.LN10),C=Math.pow(10,w),B=Math.round(d.lng*C)/C,j=Math.round(d.lat*C)/C,Z=this._map.getBearing(),Q=this._map.getPitch();let se="";if(se+=a?`/${B}/${j}/${v}`:`${v}/${j}/${B}`,(Z||Q)&&(se+="/"+Math.round(10*Z)/10),Q&&(se+=`/${Math.round(Q)}`),this._hashName){const le=this._hashName;let ye=!1;const Le=window.location.hash.slice(1).split("&").map(Pe=>{const Me=Pe.split("=")[0];return Me===le?(ye=!0,`${Me}=${se}`):Pe}).filter(Pe=>Pe);return ye||Le.push(`${le}=${se}`),`#${Le.join("&")}`}return`#${se}`}}const yh={linearity:.3,easing:l.b6(0,0,.3,1)},fc=l.e({deceleration:2500,maxSpeed:1400},yh),Tf=l.e({deceleration:20,maxSpeed:1400},yh),Qg=l.e({deceleration:1e3,maxSpeed:360},yh),Sm=l.e({deceleration:1e3,maxSpeed:90},yh);class ey{constructor(a){this._map=a,this.clear()}clear(){this._inertiaBuffer=[]}record(a){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:y.now(),settings:a})}_drainInertiaBuffer(){const a=this._inertiaBuffer,d=y.now();for(;a.length>0&&d-a[0].time>160;)a.shift()}_onMoveEnd(a){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const d={zoom:0,bearing:0,pitch:0,pan:new l.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:C}of this._inertiaBuffer)d.zoom+=C.zoomDelta||0,d.bearing+=C.bearingDelta||0,d.pitch+=C.pitchDelta||0,C.panDelta&&d.pan._add(C.panDelta),C.around&&(d.around=C.around),C.pinchAround&&(d.pinchAround=C.pinchAround);const v=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,w={};if(d.pan.mag()){const C=Cf(d.pan.mag(),v,l.e({},fc,a||{}));w.offset=d.pan.mult(C.amount/d.pan.mag()),w.center=this._map.transform.center,_h(w,C)}if(d.zoom){const C=Cf(d.zoom,v,Tf);w.zoom=this._map.transform.zoom+C.amount,_h(w,C)}if(d.bearing){const C=Cf(d.bearing,v,Qg);w.bearing=this._map.transform.bearing+l.ac(C.amount,-179,179),_h(w,C)}if(d.pitch){const C=Cf(d.pitch,v,Sm);w.pitch=this._map.transform.pitch+C.amount,_h(w,C)}if(w.zoom||w.bearing){const C=d.pinchAround===void 0?d.around:d.pinchAround;w.around=C?this._map.unproject(C):this._map.getCenter()}return this.clear(),l.e(w,{noMoveStart:!0})}}function _h(S,a){(!S.duration||S.duration<a.duration)&&(S.duration=a.duration,S.easing=a.easing)}function Cf(S,a,d){const{maxSpeed:v,linearity:w,deceleration:C}=d,B=l.ac(S*w/(a/1e3),-v,v),j=Math.abs(B)/(C*w);return{easing:d.easing,duration:1e3*j,amount:B*(j/2)}}class si extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,d,v,w={}){const C=_.mousePos(d.getCanvas(),v),B=d.unproject(C);super(a,l.e({point:C,lngLat:B,originalEvent:v},w)),this._defaultPrevented=!1,this.target=d}}class Ss extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,d,v){const w=a==="touchend"?v.changedTouches:v.touches,C=_.touchPos(d.getCanvasContainer(),w),B=C.map(Z=>d.unproject(Z)),j=C.reduce((Z,Q,se,le)=>Z.add(Q.div(le.length)),new l.P(0,0));super(a,{points:C,point:j,lngLats:B,lngLat:d.unproject(j),originalEvent:v}),this._defaultPrevented=!1}}class Tm extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,d,v){super(a,{originalEvent:v}),this._defaultPrevented=!1}}class Ko{constructor(a,d){this._map=a,this._clickTolerance=d.clickTolerance}reset(){delete this._mousedownPos}wheel(a){return this._firePreventable(new Tm(a.type,this._map,a))}mousedown(a,d){return this._mousedownPos=d,this._firePreventable(new si(a.type,this._map,a))}mouseup(a){this._map.fire(new si(a.type,this._map,a))}click(a,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||this._map.fire(new si(a.type,this._map,a))}dblclick(a){return this._firePreventable(new si(a.type,this._map,a))}mouseover(a){this._map.fire(new si(a.type,this._map,a))}mouseout(a){this._map.fire(new si(a.type,this._map,a))}touchstart(a){return this._firePreventable(new Ss(a.type,this._map,a))}touchmove(a){this._map.fire(new Ss(a.type,this._map,a))}touchend(a){this._map.fire(new Ss(a.type,this._map,a))}touchcancel(a){this._map.fire(new Ss(a.type,this._map,a))}_firePreventable(a){if(this._map.fire(a),a.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ha{constructor(a){this._map=a}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(a){this._map.fire(new si(a.type,this._map,a))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new si("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(a){this._delayContextMenu?this._contextMenuEvent=a:this._ignoreContextMenu||this._map.fire(new si(a.type,this._map,a)),this._map.listens("contextmenu")&&a.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class dc{constructor(a){this._map=a}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(a){return this.transform.pointLocation(l.P.convert(a),this._map.terrain)}}class da{constructor(a,d){this._map=a,this._tr=new dc(a),this._el=a.getCanvasContainer(),this._container=a.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(a,d){this.isEnabled()&&a.shiftKey&&a.button===0&&(_.disableDrag(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(a,d){if(!this._active)return;const v=d;if(this._lastPos.equals(v)||!this._box&&v.dist(this._startPos)<this._clickTolerance)return;const w=this._startPos;this._lastPos=v,this._box||(this._box=_.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",a));const C=Math.min(w.x,v.x),B=Math.max(w.x,v.x),j=Math.min(w.y,v.y),Z=Math.max(w.y,v.y);_.setTransform(this._box,`translate(${C}px,${j}px)`),this._box.style.width=B-C+"px",this._box.style.height=Z-j+"px"}mouseupWindow(a,d){if(!this._active||a.button!==0)return;const v=this._startPos,w=d;if(this.reset(),_.suppressClick(),v.x!==w.x||v.y!==w.y)return this._map.fire(new l.k("boxzoomend",{originalEvent:a})),{cameraAnimation:C=>C.fitScreenCoordinates(v,w,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",a)}keydown(a){this._active&&a.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",a))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(_.remove(this._box),this._box=null),_.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(a,d){return this._map.fire(new l.k(a,{originalEvent:d}))}}function pa(S,a){if(S.length!==a.length)throw new Error(`The number of touches and points are not equal - touches ${S.length}, points ${a.length}`);const d={};for(let v=0;v<S.length;v++)d[S[v].identifier]=a[v];return d}class Sv{constructor(a){this.reset(),this.numTouches=a.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(a,d,v){(this.centroid||v.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=a.timeStamp),v.length===this.numTouches&&(this.centroid=function(w){const C=new l.P(0,0);for(const B of w)C._add(B);return C.div(w.length)}(d),this.touches=pa(v,d)))}touchmove(a,d,v){if(this.aborted||!this.centroid)return;const w=pa(v,d);for(const C in this.touches){const B=w[C];(!B||B.dist(this.touches[C])>30)&&(this.aborted=!0)}}touchend(a,d,v){if((!this.centroid||a.timeStamp-this.startTime>500)&&(this.aborted=!0),v.length===0){const w=!this.aborted&&this.centroid;if(this.reset(),w)return w}}}class fu{constructor(a){this.singleTap=new Sv(a),this.numTaps=a.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(a,d,v){this.singleTap.touchstart(a,d,v)}touchmove(a,d,v){this.singleTap.touchmove(a,d,v)}touchend(a,d,v){const w=this.singleTap.touchend(a,d,v);if(w){const C=a.timeStamp-this.lastTime<500,B=!this.lastTap||this.lastTap.dist(w)<30;if(C&&B||this.reset(),this.count++,this.lastTime=a.timeStamp,this.lastTap=w,this.count===this.numTaps)return this.reset(),w}}}class ty{constructor(a){this._tr=new dc(a),this._zoomIn=new fu({numTouches:1,numTaps:2}),this._zoomOut=new fu({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(a,d,v){this._zoomIn.touchstart(a,d,v),this._zoomOut.touchstart(a,d,v)}touchmove(a,d,v){this._zoomIn.touchmove(a,d,v),this._zoomOut.touchmove(a,d,v)}touchend(a,d,v){const w=this._zoomIn.touchend(a,d,v),C=this._zoomOut.touchend(a,d,v),B=this._tr;return w?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:j=>j.easeTo({duration:300,zoom:B.zoom+1,around:B.unproject(w)},{originalEvent:a})}):C?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:j=>j.easeTo({duration:300,zoom:B.zoom-1,around:B.unproject(C)},{originalEvent:a})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class pc{constructor(a){this._enabled=!!a.enable,this._moveStateManager=a.moveStateManager,this._clickTolerance=a.clickTolerance||1,this._moveFunction=a.move,this._activateOnStart=!!a.activateOnStart,a.assignEvents(this),this.reset()}reset(a){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(a)}_move(...a){const d=this._moveFunction(...a);if(d.bearingDelta||d.pitchDelta||d.around||d.panDelta)return this._active=!0,d}dragStart(a,d){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(a)&&(this._moveStateManager.startMove(a),this._lastPoint=d.length?d[0]:d,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(a,d){if(!this.isEnabled())return;const v=this._lastPoint;if(!v)return;if(a.preventDefault(),!this._moveStateManager.isValidMoveEvent(a))return void this.reset(a);const w=d.length?d[0]:d;return!this._moved&&w.dist(v)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=w,this._move(v,w))}dragEnd(a){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(a)&&(this._moved&&_.suppressClick(),this.reset(a))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const If={0:1,2:2};class Ji{constructor(a){this._correctEvent=a.checkCorrectEvent}startMove(a){const d=_.mouseButton(a);this._eventButton=d}endMove(a){delete this._eventButton}isValidStartEvent(a){return this._correctEvent(a)}isValidMoveEvent(a){return!function(d,v){const w=If[v];return d.buttons===void 0||(d.buttons&w)!==w}(a,this._eventButton)}isValidEndEvent(a){return _.mouseButton(a)===this._eventButton}}class Jt{constructor(){this._firstTouch=void 0}_isOneFingerTouch(a){return a.targetTouches.length===1}_isSameTouchEvent(a){return a.targetTouches[0].identifier===this._firstTouch}startMove(a){this._firstTouch=a.targetTouches[0].identifier}endMove(a){delete this._firstTouch}isValidStartEvent(a){return this._isOneFingerTouch(a)}isValidMoveEvent(a){return this._isOneFingerTouch(a)&&this._isSameTouchEvent(a)}isValidEndEvent(a){return this._isOneFingerTouch(a)&&this._isSameTouchEvent(a)}}const Pf=S=>{S.mousedown=S.dragStart,S.mousemoveWindow=S.dragMove,S.mouseup=S.dragEnd,S.contextmenu=function(a){a.preventDefault()}},Za=({enable:S,clickTolerance:a,bearingDegreesPerPixelMoved:d=.8})=>{const v=new Ji({checkCorrectEvent:w=>_.mouseButton(w)===0&&w.ctrlKey||_.mouseButton(w)===2});return new pc({clickTolerance:a,move:(w,C)=>({bearingDelta:(C.x-w.x)*d}),moveStateManager:v,enable:S,assignEvents:Pf})},vh=({enable:S,clickTolerance:a,pitchDegreesPerPixelMoved:d=-.5})=>{const v=new Ji({checkCorrectEvent:w=>_.mouseButton(w)===0&&w.ctrlKey||_.mouseButton(w)===2});return new pc({clickTolerance:a,move:(w,C)=>({pitchDelta:(C.y-w.y)*d}),moveStateManager:v,enable:S,assignEvents:Pf})};class Lf{constructor(a,d){this._clickTolerance=a.clickTolerance||1,this._map=d,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.P(0,0)}minTouchs(){return this._map.cooperativeGestures.isEnabled()?2:1}touchstart(a,d,v){return this._calculateTransform(a,d,v)}touchmove(a,d,v){if(this._active&&!(v.length<this.minTouchs()))return a.preventDefault(),this._calculateTransform(a,d,v)}touchend(a,d,v){this._calculateTransform(a,d,v),this._active&&v.length<this.minTouchs()&&this.reset()}touchcancel(){this.reset()}_calculateTransform(a,d,v){v.length>0&&(this._active=!0);const w=pa(v,d),C=new l.P(0,0),B=new l.P(0,0);let j=0;for(const Q in w){const se=w[Q],le=this._touches[Q];le&&(C._add(se),B._add(se.sub(le)),j++,w[Q]=se)}if(this._touches=w,j<this.minTouchs()||!B.mag())return;const Z=B.div(j);return this._sum._add(Z),this._sum.mag()<this._clickTolerance?void 0:{around:C.div(j),panDelta:Z}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Vt{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(a,d,v){this._firstTwoTouches||v.length<2||(this._firstTwoTouches=[v[0].identifier,v[1].identifier],this._start([d[0],d[1]]))}touchmove(a,d,v){if(!this._firstTwoTouches)return;a.preventDefault();const[w,C]=this._firstTwoTouches,B=mc(v,d,w),j=mc(v,d,C);if(!B||!j)return;const Z=this._aroundCenter?null:B.add(j).div(2);return this._move([B,j],Z,a)}touchend(a,d,v){if(!this._firstTwoTouches)return;const[w,C]=this._firstTwoTouches,B=mc(v,d,w),j=mc(v,d,C);B&&j||(this._active&&_.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(a){this._enabled=!0,this._aroundCenter=!!a&&a.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function mc(S,a,d){for(let v=0;v<S.length;v++)if(S[v].identifier===d)return a[v]}function Cm(S,a){return Math.log(S/a)/Math.LN2}class ny extends Vt{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(a){this._startDistance=this._distance=a[0].dist(a[1])}_move(a,d){const v=this._distance;if(this._distance=a[0].dist(a[1]),this._active||!(Math.abs(Cm(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Cm(this._distance,v),pinchAround:d}}}function Af(S,a){return 180*S.angleWith(a)/Math.PI}class jd extends Vt{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(a){this._startVector=this._vector=a[0].sub(a[1]),this._minDiameter=a[0].dist(a[1])}_move(a,d,v){const w=this._vector;if(this._vector=a[0].sub(a[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Af(this._vector,w),pinchAround:d}}_isBelowThreshold(a){this._minDiameter=Math.min(this._minDiameter,a.mag());const d=25/(Math.PI*this._minDiameter)*360,v=Af(a,this._startVector);return Math.abs(v)<d}}function Of(S){return Math.abs(S.y)>Math.abs(S.x)}class Im extends Vt{constructor(a){super(),this._currentTouchCount=0,this._map=a}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(a,d,v){super.touchstart(a,d,v),this._currentTouchCount=v.length}_start(a){this._lastPoints=a,Of(a[0].sub(a[1]))&&(this._valid=!1)}_move(a,d,v){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const w=a[0].sub(this._lastPoints[0]),C=a[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(w,C,v.timeStamp),this._valid?(this._lastPoints=a,this._active=!0,{pitchDelta:(w.y+C.y)/2*-.5}):void 0}gestureBeginsVertically(a,d,v){if(this._valid!==void 0)return this._valid;const w=a.mag()>=2,C=d.mag()>=2;if(!w&&!C)return;if(!w||!C)return this._firstMove===void 0&&(this._firstMove=v),v-this._firstMove<100&&void 0;const B=a.y>0==d.y>0;return Of(a)&&Of(d)&&B}}const ry={panStep:100,bearingStep:15,pitchStep:10};class du{constructor(a){this._tr=new dc(a);const d=ry;this._panStep=d.panStep,this._bearingStep=d.bearingStep,this._pitchStep=d.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(a){if(a.altKey||a.ctrlKey||a.metaKey)return;let d=0,v=0,w=0,C=0,B=0;switch(a.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:a.shiftKey?v=-1:(a.preventDefault(),C=-1);break;case 39:a.shiftKey?v=1:(a.preventDefault(),C=1);break;case 38:a.shiftKey?w=1:(a.preventDefault(),B=-1);break;case 40:a.shiftKey?w=-1:(a.preventDefault(),B=1);break;default:return}return this._rotationDisabled&&(v=0,w=0),{cameraAnimation:j=>{const Z=this._tr;j.easeTo({duration:300,easeId:"keyboardHandler",easing:jr,zoom:d?Math.round(Z.zoom)+d*(a.shiftKey?2:1):Z.zoom,bearing:Z.bearing+v*this._bearingStep,pitch:Z.pitch+w*this._pitchStep,offset:[-C*this._panStep,-B*this._panStep],center:Z.center},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function jr(S){return S*(2-S)}const xh=4.000244140625;class $d{constructor(a,d){this._onTimeout=v=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(v)},this._map=a,this._tr=new dc(a),this._triggerRenderFrame=d,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(a){this._defaultZoomRate=a}setWheelZoomRate(a){this._wheelZoomRate=a}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(a){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!a&&a.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(a){if(!this.isEnabled()||this._map.cooperativeGestures.isEnabled()&&!a[this._map.cooperativeGestures._bypassKey])return;let d=a.deltaMode===WheelEvent.DOM_DELTA_LINE?40*a.deltaY:a.deltaY;const v=y.now(),w=v-(this._lastWheelEventTime||0);this._lastWheelEventTime=v,d!==0&&d%xh==0?this._type="wheel":d!==0&&Math.abs(d)<4?this._type="trackpad":w>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,a)):this._type||(this._type=Math.abs(w*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),a.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=a,this._delta-=d,this._active||this._start(a)),a.preventDefault()}_start(a){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=_.mousePos(this._map.getCanvas(),a),v=this._tr;this._around=d.y>v.transform.height/2-v.transform.getHorizon()?l.M.convert(this._aroundCenter?v.center:v.unproject(d)):l.M.convert(v.center),this._aroundPoint=v.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const a=this._tr.transform;if(this._delta!==0){const j=this._type==="wheel"&&Math.abs(this._delta)>xh?this._wheelZoomRate:this._defaultZoomRate;let Z=2/(1+Math.exp(-Math.abs(this._delta*j)));this._delta<0&&Z!==0&&(Z=1/Z);const Q=typeof this._targetZoom=="number"?a.zoomScale(this._targetZoom):a.scale;this._targetZoom=Math.min(a.maxZoom,Math.max(a.minZoom,a.scaleZoom(Q*Z))),this._type==="wheel"&&(this._startZoom=a.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const d=typeof this._targetZoom=="number"?this._targetZoom:a.zoom,v=this._startZoom,w=this._easing;let C,B=!1;if(this._type==="wheel"&&v&&w){const j=Math.min((y.now()-this._lastWheelEventTime)/200,1),Z=w(j);C=l.z.number(v,d,Z),j<1?this._frameId||(this._frameId=!0):B=!0}else C=d,B=!0;return this._active=!0,B&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!B,zoomDelta:C-a.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(a){let d=l.b7;if(this._prevEase){const v=this._prevEase,w=(y.now()-v.start)/v.duration,C=v.easing(w+.01)-v.easing(w),B=.27/Math.sqrt(C*C+1e-4)*.01,j=Math.sqrt(.0729-B*B);d=l.b6(B,j,.25,1)}return this._prevEase={start:y.now(),duration:a,easing:d},d}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class f{constructor(a,d){this._clickZoom=a,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class b{constructor(a){this._tr=new dc(a),this.reset()}reset(){this._active=!1}dblclick(a,d){return a.preventDefault(),{cameraAnimation:v=>{v.easeTo({duration:300,zoom:this._tr.zoom+(a.shiftKey?-1:1),around:this._tr.unproject(d)},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class M{constructor(){this._tap=new fu({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(a,d,v){if(!this._swipePoint)if(this._tapTime){const w=d[0],C=a.timeStamp-this._tapTime<500,B=this._tapPoint.dist(w)<30;C&&B?v.length>0&&(this._swipePoint=w,this._swipeTouch=v[0].identifier):this.reset()}else this._tap.touchstart(a,d,v)}touchmove(a,d,v){if(this._tapTime){if(this._swipePoint){if(v[0].identifier!==this._swipeTouch)return;const w=d[0],C=w.y-this._swipePoint.y;return this._swipePoint=w,a.preventDefault(),this._active=!0,{zoomDelta:C/128}}}else this._tap.touchmove(a,d,v)}touchend(a,d,v){if(this._tapTime)this._swipePoint&&v.length===0&&this.reset();else{const w=this._tap.touchend(a,d,v);w&&(this._tapTime=a.timeStamp,this._tapPoint=w)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class V{constructor(a,d,v){this._el=a,this._mousePan=d,this._touchPan=v}enable(a){this._inertiaOptions=a||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class re{constructor(a,d,v){this._pitchWithRotate=a.pitchWithRotate,this._mouseRotate=d,this._mousePitch=v}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class me{constructor(a,d,v,w){this._el=a,this._touchZoom=d,this._touchRotate=v,this._tapDragZoom=w,this._rotationDisabled=!1,this._enabled=!0}enable(a){this._touchZoom.enable(a),this._rotationDisabled||this._touchRotate.enable(a),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Ce{constructor(a,d){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=a,this._options=d,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const a=this._map.getCanvasContainer();a.classList.add("maplibregl-cooperative-gestures"),this._container=_.create("div","maplibregl-cooperative-gesture-screen",a);let d=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(d=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const v=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),w=document.createElement("div");w.className="maplibregl-desktop-message",w.textContent=d,this._container.appendChild(w);const C=document.createElement("div");C.className="maplibregl-mobile-message",C.textContent=v,this._container.appendChild(C),this._container.setAttribute("aria-hidden","true")}_destoryUI(){this._container&&(_.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destoryUI()}isEnabled(){return this._enabled}touchmove(a){this._onCooperativeGesture(a.touches.length===1)}wheel(a){this._map.scrollZoom.isEnabled()&&this._onCooperativeGesture(!a[this._bypassKey])}_onCooperativeGesture(a){this._enabled&&a&&(this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const We=S=>S.zoom||S.drag||S.pitch||S.rotate;class dt extends l.k{}function It(S){return S.panDelta&&S.panDelta.mag()||S.zoomDelta||S.bearingDelta||S.pitchDelta}class tn{constructor(a,d){this.handleWindowEvent=w=>{this.handleEvent(w,`${w.type}Window`)},this.handleEvent=(w,C)=>{if(w.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const B=w.type==="renderFrame"?void 0:w,j={needsRenderFrame:!1},Z={},Q={},se=w.touches,le=se?this._getMapTouches(se):void 0,ye=le?_.touchPos(this._map.getCanvas(),le):_.mousePos(this._map.getCanvas(),w);for(const{handlerName:Me,handler:Se,allowed:Ke}of this._handlers){if(!Se.isEnabled())continue;let at;this._blockedByActive(Q,Ke,Me)?Se.reset():Se[C||w.type]&&(at=Se[C||w.type](w,ye,le),this.mergeHandlerResult(j,Z,at,Me,B),at&&at.needsRenderFrame&&this._triggerRenderFrame()),(at||Se.isActive())&&(Q[Me]=Se)}const Le={};for(const Me in this._previousActiveHandlers)Q[Me]||(Le[Me]=B);this._previousActiveHandlers=Q,(Object.keys(Le).length||It(j))&&(this._changes.push([j,Z,Le]),this._triggerRenderFrame()),(Object.keys(Q).length||It(j))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Pe}=j;Pe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Pe(this._map))},this._map=a,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ey(a),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(d);const v=this._el;this._listeners=[[v,"touchstart",{passive:!0}],[v,"touchmove",{passive:!1}],[v,"touchend",void 0],[v,"touchcancel",void 0],[v,"mousedown",void 0],[v,"mousemove",void 0],[v,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[v,"mouseover",void 0],[v,"mouseout",void 0],[v,"dblclick",void 0],[v,"click",void 0],[v,"keydown",{capture:!1}],[v,"keyup",void 0],[v,"wheel",{passive:!1}],[v,"contextmenu",void 0],[window,"blur",void 0]];for(const[w,C,B]of this._listeners)_.addEventListener(w,C,w===document?this.handleWindowEvent:this.handleEvent,B)}destroy(){for(const[a,d,v]of this._listeners)_.removeEventListener(a,d,a===document?this.handleWindowEvent:this.handleEvent,v)}_addDefaultHandlers(a){const d=this._map,v=d.getCanvasContainer();this._add("mapEvent",new Ko(d,a));const w=d.boxZoom=new da(d,a);this._add("boxZoom",w),a.interactive&&a.boxZoom&&w.enable();const C=d.cooperativeGestures=new Ce(d,a.cooperativeGestures);this._add("cooperativeGestures",C),a.cooperativeGestures&&C.enable();const B=new ty(d),j=new b(d);d.doubleClickZoom=new f(j,B),this._add("tapZoom",B),this._add("clickZoom",j),a.interactive&&a.doubleClickZoom&&d.doubleClickZoom.enable();const Z=new M;this._add("tapDragZoom",Z);const Q=d.touchPitch=new Im(d);this._add("touchPitch",Q),a.interactive&&a.touchPitch&&d.touchPitch.enable(a.touchPitch);const se=Za(a),le=vh(a);d.dragRotate=new re(a,se,le),this._add("mouseRotate",se,["mousePitch"]),this._add("mousePitch",le,["mouseRotate"]),a.interactive&&a.dragRotate&&d.dragRotate.enable();const ye=(({enable:at,clickTolerance:Fe})=>{const Je=new Ji({checkCorrectEvent:ut=>_.mouseButton(ut)===0&&!ut.ctrlKey});return new pc({clickTolerance:Fe,move:(ut,ft)=>({around:ft,panDelta:ft.sub(ut)}),activateOnStart:!0,moveStateManager:Je,enable:at,assignEvents:Pf})})(a),Le=new Lf(a,d);d.dragPan=new V(v,ye,Le),this._add("mousePan",ye),this._add("touchPan",Le,["touchZoom","touchRotate"]),a.interactive&&a.dragPan&&d.dragPan.enable(a.dragPan);const Pe=new jd,Me=new ny;d.touchZoomRotate=new me(v,Me,Pe,Z),this._add("touchRotate",Pe,["touchPan","touchZoom"]),this._add("touchZoom",Me,["touchPan","touchRotate"]),a.interactive&&a.touchZoomRotate&&d.touchZoomRotate.enable(a.touchZoomRotate);const Se=d.scrollZoom=new $d(d,()=>this._triggerRenderFrame());this._add("scrollZoom",Se,["mousePan"]),a.interactive&&a.scrollZoom&&d.scrollZoom.enable(a.scrollZoom);const Ke=d.keyboard=new du(d);this._add("keyboard",Ke),a.interactive&&a.keyboard&&d.keyboard.enable(),this._add("blockableMapEvent",new Ha(d))}_add(a,d,v){this._handlers.push({handlerName:a,handler:d,allowed:v}),this._handlersById[a]=d}stop(a){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},a),this._changes=[]}}isActive(){for(const{handler:a}of this._handlers)if(a.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!We(this._eventsInProgress)||this.isZooming()}_blockedByActive(a,d,v){for(const w in a)if(w!==v&&(!d||d.indexOf(w)<0))return!0;return!1}_getMapTouches(a){const d=[];for(const v of a)this._el.contains(v.target)&&d.push(v);return d}mergeHandlerResult(a,d,v,w,C){if(!v)return;l.e(a,v);const B={handlerName:w,originalEvent:v.originalEvent||C};v.zoomDelta!==void 0&&(d.zoom=B),v.panDelta!==void 0&&(d.drag=B),v.pitchDelta!==void 0&&(d.pitch=B),v.bearingDelta!==void 0&&(d.rotate=B)}_applyChanges(){const a={},d={},v={};for(const[w,C,B]of this._changes)w.panDelta&&(a.panDelta=(a.panDelta||new l.P(0,0))._add(w.panDelta)),w.zoomDelta&&(a.zoomDelta=(a.zoomDelta||0)+w.zoomDelta),w.bearingDelta&&(a.bearingDelta=(a.bearingDelta||0)+w.bearingDelta),w.pitchDelta&&(a.pitchDelta=(a.pitchDelta||0)+w.pitchDelta),w.around!==void 0&&(a.around=w.around),w.pinchAround!==void 0&&(a.pinchAround=w.pinchAround),w.noInertia&&(a.noInertia=w.noInertia),l.e(d,C),l.e(v,B);this._updateMapTransform(a,d,v),this._changes=[]}_updateMapTransform(a,d,v){const w=this._map,C=w._getTransformForUpdate(),B=w.terrain;if(!(It(a)||B&&this._terrainMovement))return this._fireEvents(d,v,!0);let{panDelta:j,zoomDelta:Z,bearingDelta:Q,pitchDelta:se,around:le,pinchAround:ye}=a;ye!==void 0&&(le=ye),w._stop(!0),le=le||w.transform.centerPoint;const Le=C.pointLocation(j?le.sub(j):le);Q&&(C.bearing+=Q),se&&(C.pitch+=se),Z&&(C.zoom+=Z),B?this._terrainMovement||!d.drag&&!d.zoom?d.drag&&this._terrainMovement?C.center=C.pointLocation(C.centerPoint.sub(j)):C.setLocationAtPoint(Le,le):(this._terrainMovement=!0,this._map._elevationFreeze=!0,C.setLocationAtPoint(Le,le),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,C.recalculateZoom(w.terrain)})):C.setLocationAtPoint(Le,le),w._applyUpdatedTransform(C),this._map._update(),a.noInertia||this._inertia.record(a),this._fireEvents(d,v,!0)}_fireEvents(a,d,v){const w=We(this._eventsInProgress),C=We(a),B={};for(const se in a){const{originalEvent:le}=a[se];this._eventsInProgress[se]||(B[`${se}start`]=le),this._eventsInProgress[se]=a[se]}!w&&C&&this._fireEvent("movestart",C.originalEvent);for(const se in B)this._fireEvent(se,B[se]);C&&this._fireEvent("move",C.originalEvent);for(const se in a){const{originalEvent:le}=a[se];this._fireEvent(se,le)}const j={};let Z;for(const se in this._eventsInProgress){const{handlerName:le,originalEvent:ye}=this._eventsInProgress[se];this._handlersById[le].isActive()||(delete this._eventsInProgress[se],Z=d[le]||ye,j[`${se}end`]=Z)}for(const se in j)this._fireEvent(se,j[se]);const Q=We(this._eventsInProgress);if(v&&(w||C)&&!Q){this._updatingCamera=!0;const se=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),le=ye=>ye!==0&&-this._bearingSnap<ye&&ye<this._bearingSnap;!se||!se.essential&&y.prefersReducedMotion?(this._map.fire(new l.k("moveend",{originalEvent:Z})),le(this._map.getBearing())&&this._map.resetNorth()):(le(se.bearing||this._map.getBearing())&&(se.bearing=0),se.freezeElevation=!0,this._map.easeTo(se,{originalEvent:Z})),this._updatingCamera=!1}}_fireEvent(a,d){this._map.fire(new l.k(a,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(a=>{delete this._frameId,this.handleEvent(new dt("renderFrame",{timeStamp:a})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class hn extends l.E{constructor(a,d){super(),this._renderFrameCallback=()=>{const v=Math.min((y.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(v)),v<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=a,this._bearingSnap=d.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new l.M(this.transform.center.lng,this.transform.center.lat)}setCenter(a,d){return this.jumpTo({center:a},d)}panBy(a,d,v){return a=l.P.convert(a).mult(-1),this.panTo(this.transform.center,l.e({offset:a},d),v)}panTo(a,d,v){return this.easeTo(l.e({center:a},d),v)}getZoom(){return this.transform.zoom}setZoom(a,d){return this.jumpTo({zoom:a},d),this}zoomTo(a,d,v){return this.easeTo(l.e({zoom:a},d),v)}zoomIn(a,d){return this.zoomTo(this.getZoom()+1,a,d),this}zoomOut(a,d){return this.zoomTo(this.getZoom()-1,a,d),this}getBearing(){return this.transform.bearing}setBearing(a,d){return this.jumpTo({bearing:a},d),this}getPadding(){return this.transform.padding}setPadding(a,d){return this.jumpTo({padding:a},d),this}rotateTo(a,d,v){return this.easeTo(l.e({bearing:a},d),v)}resetNorth(a,d){return this.rotateTo(0,l.e({duration:1e3},a),d),this}resetNorthPitch(a,d){return this.easeTo(l.e({bearing:0,pitch:0,duration:1e3},a),d),this}snapToNorth(a,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,d):this}getPitch(){return this.transform.pitch}setPitch(a,d){return this.jumpTo({pitch:a},d),this}cameraForBounds(a,d){a=Kt.convert(a);const v=d&&d.bearing||0;return this._cameraForBoxAndBearing(a.getNorthWest(),a.getSouthEast(),v,d)}_cameraForBoxAndBearing(a,d,v,w){const C={top:0,bottom:0,right:0,left:0};if(typeof(w=l.e({padding:C,offset:[0,0],maxZoom:this.transform.maxZoom},w)).padding=="number"){const zt=w.padding;w.padding={top:zt,bottom:zt,right:zt,left:zt}}w.padding=l.e(C,w.padding);const B=this.transform,j=B.padding,Z=new Kt(a,d),Q=B.project(Z.getNorthWest()),se=B.project(Z.getNorthEast()),le=B.project(Z.getSouthEast()),ye=B.project(Z.getSouthWest()),Le=l.b8(-v),Pe=Q.rotate(Le),Me=se.rotate(Le),Se=le.rotate(Le),Ke=ye.rotate(Le),at=new l.P(Math.max(Pe.x,Me.x,Ke.x,Se.x),Math.max(Pe.y,Me.y,Ke.y,Se.y)),Fe=new l.P(Math.min(Pe.x,Me.x,Ke.x,Se.x),Math.min(Pe.y,Me.y,Ke.y,Se.y)),Je=at.sub(Fe),ut=(B.width-(j.left+j.right+w.padding.left+w.padding.right))/Je.x,ft=(B.height-(j.top+j.bottom+w.padding.top+w.padding.bottom))/Je.y;if(ft<0||ut<0)return void l.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const mt=Math.min(B.scaleZoom(B.scale*Math.min(ut,ft)),w.maxZoom),Tt=l.P.convert(w.offset),Et=new l.P((w.padding.left-w.padding.right)/2,(w.padding.top-w.padding.bottom)/2).rotate(l.b8(v)),Mt=Tt.add(Et).mult(B.scale/B.zoomScale(mt));return{center:B.unproject(Q.add(le).div(2).sub(Mt)),zoom:mt,bearing:v}}fitBounds(a,d,v){return this._fitInternal(this.cameraForBounds(a,d),d,v)}fitScreenCoordinates(a,d,v,w,C){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.P.convert(a)),this.transform.pointLocation(l.P.convert(d)),v,w),w,C)}_fitInternal(a,d,v){return a?(delete(d=l.e(a,d)).padding,d.linear?this.easeTo(d,v):this.flyTo(d,v)):this}jumpTo(a,d){this.stop();const v=this._getTransformForUpdate();let w=!1,C=!1,B=!1;return"zoom"in a&&v.zoom!==+a.zoom&&(w=!0,v.zoom=+a.zoom),a.center!==void 0&&(v.center=l.M.convert(a.center)),"bearing"in a&&v.bearing!==+a.bearing&&(C=!0,v.bearing=+a.bearing),"pitch"in a&&v.pitch!==+a.pitch&&(B=!0,v.pitch=+a.pitch),a.padding==null||v.isPaddingEqual(a.padding)||(v.padding=a.padding),this._applyUpdatedTransform(v),this.fire(new l.k("movestart",d)).fire(new l.k("move",d)),w&&this.fire(new l.k("zoomstart",d)).fire(new l.k("zoom",d)).fire(new l.k("zoomend",d)),C&&this.fire(new l.k("rotatestart",d)).fire(new l.k("rotate",d)).fire(new l.k("rotateend",d)),B&&this.fire(new l.k("pitchstart",d)).fire(new l.k("pitch",d)).fire(new l.k("pitchend",d)),this.fire(new l.k("moveend",d))}calculateCameraOptionsFromTo(a,d,v,w=0){const C=l.Y.fromLngLat(a,d),B=l.Y.fromLngLat(v,w),j=B.x-C.x,Z=B.y-C.y,Q=B.z-C.z,se=Math.hypot(j,Z,Q);if(se===0)throw new Error("Can't calculate camera options with same From and To");const le=Math.hypot(j,Z),ye=this.transform.scaleZoom(this.transform.cameraToCenterDistance/se/this.transform.tileSize),Le=180*Math.atan2(j,-Z)/Math.PI;let Pe=180*Math.acos(le/se)/Math.PI;return Pe=Q<0?90-Pe:90+Pe,{center:B.toLngLat(),zoom:ye,pitch:Pe,bearing:Le}}easeTo(a,d){var v;this._stop(!1,a.easeId),((a=l.e({offset:[0,0],duration:500,easing:l.b7},a)).animate===!1||!a.essential&&y.prefersReducedMotion)&&(a.duration=0);const w=this._getTransformForUpdate(),C=this.getZoom(),B=this.getBearing(),j=this.getPitch(),Z=this.getPadding(),Q="bearing"in a?this._normalizeBearing(a.bearing,B):B,se="pitch"in a?+a.pitch:j,le="padding"in a?a.padding:w.padding,ye=l.P.convert(a.offset);let Le=w.centerPoint.add(ye);const Pe=w.pointLocation(Le),{center:Me,zoom:Se}=w.getConstrained(l.M.convert(a.center||Pe),(v=a.zoom)!==null&&v!==void 0?v:C);this._normalizeCenter(Me);const Ke=w.project(Pe),at=w.project(Me).sub(Ke),Fe=w.zoomScale(Se-C);let Je,ut;a.around&&(Je=l.M.convert(a.around),ut=w.locationPoint(Je));const ft={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Se!==C,this._rotating=this._rotating||B!==Q,this._pitching=this._pitching||se!==j,this._padding=!w.isPaddingEqual(le),this._easeId=a.easeId,this._prepareEase(d,a.noMoveStart,ft),this.terrain&&this._prepareElevation(Me),this._ease(mt=>{if(this._zooming&&(w.zoom=l.z.number(C,Se,mt)),this._rotating&&(w.bearing=l.z.number(B,Q,mt)),this._pitching&&(w.pitch=l.z.number(j,se,mt)),this._padding&&(w.interpolatePadding(Z,le,mt),Le=w.centerPoint.add(ye)),this.terrain&&!a.freezeElevation&&this._updateElevation(mt),Je)w.setLocationAtPoint(Je,ut);else{const Tt=w.zoomScale(w.zoom-C),Et=Se>C?Math.min(2,Fe):Math.max(.5,Fe),Mt=Math.pow(Et,1-mt),zt=w.unproject(Ke.add(at.mult(mt*Mt)).mult(Tt));w.setLocationAtPoint(w.renderWorldCopies?zt.wrap():zt,Le)}this._applyUpdatedTransform(w),this._fireMoveEvents(d)},mt=>{this.terrain&&this._finalizeElevation(),this._afterEase(d,mt)},a),this}_prepareEase(a,d,v={}){this._moving=!0,d||v.moving||this.fire(new l.k("movestart",a)),this._zooming&&!v.zooming&&this.fire(new l.k("zoomstart",a)),this._rotating&&!v.rotating&&this.fire(new l.k("rotatestart",a)),this._pitching&&!v.pitching&&this.fire(new l.k("pitchstart",a))}_prepareElevation(a){this._elevationCenter=a,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(a,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(a){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const d=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(a<1&&d!==this._elevationTarget){const v=this._elevationTarget-this._elevationStart;this._elevationStart+=a*(v-(d-(v*a+this._elevationStart))/(1-a)),this._elevationTarget=d}this.transform.elevation=l.z.number(this._elevationStart,this._elevationTarget,a)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(a){if(!this.transformCameraUpdate)return;const d=a.clone(),{center:v,zoom:w,pitch:C,bearing:B,elevation:j}=this.transformCameraUpdate(d);v&&(d.center=v),w!==void 0&&(d.zoom=w),C!==void 0&&(d.pitch=C),B!==void 0&&(d.bearing=B),j!==void 0&&(d.elevation=j),this.transform.apply(d)}_fireMoveEvents(a){this.fire(new l.k("move",a)),this._zooming&&this.fire(new l.k("zoom",a)),this._rotating&&this.fire(new l.k("rotate",a)),this._pitching&&this.fire(new l.k("pitch",a))}_afterEase(a,d){if(this._easeId&&d&&this._easeId===d)return;delete this._easeId;const v=this._zooming,w=this._rotating,C=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,v&&this.fire(new l.k("zoomend",a)),w&&this.fire(new l.k("rotateend",a)),C&&this.fire(new l.k("pitchend",a)),this.fire(new l.k("moveend",a))}flyTo(a,d){var v;if(!a.essential&&y.prefersReducedMotion){const nr=l.L(a,["center","zoom","bearing","pitch","around"]);return this.jumpTo(nr,d)}this.stop(),a=l.e({offset:[0,0],speed:1.2,curve:1.42,easing:l.b7},a);const w=this._getTransformForUpdate(),C=this.getZoom(),B=this.getBearing(),j=this.getPitch(),Z=this.getPadding(),Q="bearing"in a?this._normalizeBearing(a.bearing,B):B,se="pitch"in a?+a.pitch:j,le="padding"in a?a.padding:w.padding,ye=l.P.convert(a.offset);let Le=w.centerPoint.add(ye);const Pe=w.pointLocation(Le),{center:Me,zoom:Se}=w.getConstrained(l.M.convert(a.center||Pe),(v=a.zoom)!==null&&v!==void 0?v:C);this._normalizeCenter(Me);const Ke=w.zoomScale(Se-C),at=w.project(Pe),Fe=w.project(Me).sub(at);let Je=a.curve;const ut=Math.max(w.width,w.height),ft=ut/Ke,mt=Fe.mag();if("minZoom"in a){const nr=l.ac(Math.min(a.minZoom,C,Se),w.minZoom,w.maxZoom),Ln=ut/w.zoomScale(nr-C);Je=Math.sqrt(Ln/mt*2)}const Tt=Je*Je;function Et(nr){const Ln=(ft*ft-ut*ut+(nr?-1:1)*Tt*Tt*mt*mt)/(2*(nr?ft:ut)*Tt*mt);return Math.log(Math.sqrt(Ln*Ln+1)-Ln)}function Mt(nr){return(Math.exp(nr)-Math.exp(-nr))/2}function zt(nr){return(Math.exp(nr)+Math.exp(-nr))/2}const Mn=Et(!1);let $t=function(nr){return zt(Mn)/zt(Mn+Je*nr)},yn=function(nr){return ut*((zt(Mn)*(Mt(Ln=Mn+Je*nr)/zt(Ln))-Mt(Mn))/Tt)/mt;var Ln},Nn=(Et(!0)-Mn)/Je;if(Math.abs(mt)<1e-6||!isFinite(Nn)){if(Math.abs(ut-ft)<1e-6)return this.easeTo(a,d);const nr=ft<ut?-1:1;Nn=Math.abs(Math.log(ft/ut))/Je,yn=function(){return 0},$t=function(Ln){return Math.exp(nr*Je*Ln)}}return a.duration="duration"in a?+a.duration:1e3*Nn/("screenSpeed"in a?+a.screenSpeed/Je:+a.speed),a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0),this._zooming=!0,this._rotating=B!==Q,this._pitching=se!==j,this._padding=!w.isPaddingEqual(le),this._prepareEase(d,!1),this.terrain&&this._prepareElevation(Me),this._ease(nr=>{const Ln=nr*Nn,zn=1/$t(Ln);w.zoom=nr===1?Se:C+w.scaleZoom(zn),this._rotating&&(w.bearing=l.z.number(B,Q,nr)),this._pitching&&(w.pitch=l.z.number(j,se,nr)),this._padding&&(w.interpolatePadding(Z,le,nr),Le=w.centerPoint.add(ye)),this.terrain&&!a.freezeElevation&&this._updateElevation(nr);const Vn=nr===1?Me:w.unproject(at.add(Fe.mult(yn(Ln))).mult(zn));w.setLocationAtPoint(w.renderWorldCopies?Vn.wrap():Vn,Le),this._applyUpdatedTransform(w),this._fireMoveEvents(d)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(d)},a),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(a,d){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const v=this._onEaseEnd;delete this._onEaseEnd,v.call(this,d)}if(!a){const v=this.handlers;v&&v.stop(!1)}return this}_ease(a,d,v){v.animate===!1||v.duration===0?(a(1),d()):(this._easeStart=y.now(),this._easeOptions=v,this._onEaseFrame=a,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(a,d){a=l.b1(a,-180,180);const v=Math.abs(a-d);return Math.abs(a-360-d)<v&&(a-=360),Math.abs(a+360-d)<v&&(a+=360),a}_normalizeCenter(a){const d=this.transform;if(!d.renderWorldCopies||d.lngRange)return;const v=a.lng-d.center.lng;a.lng+=v>180?-360:v<-180?360:0}queryTerrainElevation(a){return this.terrain?this.terrain.getElevationForLngLatZoom(l.M.convert(a),this.transform.tileZoom)-this.transform.elevation:null}}const Hn={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Hr{constructor(a=Hn){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=d=>{!d||d.sourceDataType!=="metadata"&&d.sourceDataType!=="visibility"&&d.dataType!=="style"&&d.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=a}getDefaultPosition(){return"bottom-right"}onAdd(a){return this._map=a,this._compact=this.options.compact,this._container=_.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=_.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=_.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){_.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(a,d){const v=this._map._getUIString(`AttributionControl.${d}`);a.title=v,a.setAttribute("aria-label",v)}_updateAttributions(){if(!this._map.style)return;let a=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?a=a.concat(this.options.customAttribution.map(w=>typeof w!="string"?"":w)):typeof this.options.customAttribution=="string"&&a.push(this.options.customAttribution)),this._map.style.stylesheet){const w=this._map.style.stylesheet;this.styleOwner=w.owner,this.styleId=w.id}const d=this._map.style.sourceCaches;for(const w in d){const C=d[w];if(C.used||C.usedForTerrain){const B=C.getSource();B.attribution&&a.indexOf(B.attribution)<0&&a.push(B.attribution)}}a=a.filter(w=>String(w).trim()),a.sort((w,C)=>w.length-C.length),a=a.filter((w,C)=>{for(let B=C+1;B<a.length;B++)if(a[B].indexOf(w)>=0)return!1;return!0});const v=a.join(" | ");v!==this._attribHTML&&(this._attribHTML=v,a.length?(this._innerContainer.innerHTML=v,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class $i{constructor(a={}){this._updateCompact=()=>{const d=this._container.children;if(d.length){const v=d[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&v.classList.add("maplibregl-compact"):v.classList.remove("maplibregl-compact")}},this.options=a}getDefaultPosition(){return"bottom-left"}onAdd(a){this._map=a,this._compact=this.options&&this.options.compact,this._container=_.create("div","maplibregl-ctrl");const d=_.create("a","maplibregl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://maplibre.org/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){_.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Po{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(a){const d=++this._id;return this._queue.push({callback:a,id:d,cancelled:!1}),d}remove(a){const d=this._currentlyRunning,v=d?this._queue.concat(d):this._queue;for(const w of v)if(w.id===a)return void(w.cancelled=!0)}run(a=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const d=this._currentlyRunning=this._queue;this._queue=[];for(const v of d)if(!v.cancelled&&(v.callback(a),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var tr=l.X([{name:"a_pos3d",type:"Int16",components:3}]);class $r extends l.E{constructor(a){super(),this.sourceCache=a,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,a.usedForTerrain=!0,a.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(a,d){this.sourceCache.update(a,d),this._renderableTilesKeys=[];const v={};for(const w of a.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:d}))v[w.key]=!0,this._renderableTilesKeys.push(w.key),this._tiles[w.key]||(w.posMatrix=new Float64Array(16),l.aN(w.posMatrix,0,l.W,0,l.W,0,1),this._tiles[w.key]=new Un(w,this.tileSize));for(const w in this._tiles)v[w]||delete this._tiles[w]}freeRtt(a){for(const d in this._tiles){const v=this._tiles[d];(!a||v.tileID.equals(a)||v.tileID.isChildOf(a)||a.isChildOf(v.tileID))&&(v.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(a=>this.getTileByID(a))}getTileByID(a){return this._tiles[a]}getTerrainCoords(a){const d={};for(const v of this._renderableTilesKeys){const w=this._tiles[v].tileID;if(w.canonical.equals(a.canonical)){const C=a.clone();C.posMatrix=new Float64Array(16),l.aN(C.posMatrix,0,l.W,0,l.W,0,1),d[v]=C}else if(w.canonical.isChildOf(a.canonical)){const C=a.clone();C.posMatrix=new Float64Array(16);const B=w.canonical.z-a.canonical.z,j=w.canonical.x-(w.canonical.x>>B<<B),Z=w.canonical.y-(w.canonical.y>>B<<B),Q=l.W>>B;l.aN(C.posMatrix,0,Q,0,Q,0,1),l.H(C.posMatrix,C.posMatrix,[-j*Q,-Z*Q,0]),d[v]=C}else if(a.canonical.isChildOf(w.canonical)){const C=a.clone();C.posMatrix=new Float64Array(16);const B=a.canonical.z-w.canonical.z,j=a.canonical.x-(a.canonical.x>>B<<B),Z=a.canonical.y-(a.canonical.y>>B<<B),Q=l.W>>B;l.aN(C.posMatrix,0,l.W,0,l.W,0,1),l.H(C.posMatrix,C.posMatrix,[j*Q,Z*Q,0]),l.J(C.posMatrix,C.posMatrix,[1/2**B,1/2**B,0]),d[v]=C}}return d}getSourceTile(a,d){const v=this.sourceCache._source;let w=a.overscaledZ-this.deltaZoom;if(w>v.maxzoom&&(w=v.maxzoom),w<v.minzoom)return null;this._sourceTileCache[a.key]||(this._sourceTileCache[a.key]=a.scaledTo(w).key);let C=this.sourceCache.getTileByID(this._sourceTileCache[a.key]);if((!C||!C.dem)&&d)for(;w>=v.minzoom&&(!C||!C.dem);)C=this.sourceCache.getTileByID(a.scaledTo(w--).key);return C}tilesAfterTime(a=Date.now()){return Object.values(this._tiles).filter(d=>d.timeAdded>=a)}}class iy{constructor(a,d,v){this.painter=a,this.sourceCache=new $r(d),this.options=v,this.exaggeration=typeof v.exaggeration=="number"?v.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(a,d,v,w=l.W){var C;if(!(d>=0&&d<w&&v>=0&&v<w))return 0;const B=this.getTerrainData(a),j=(C=B.tile)===null||C===void 0?void 0:C.dem;if(!j)return 0;const Z=function(Pe,Me,Se){var Ke=Me[0],at=Me[1];return Pe[0]=Se[0]*Ke+Se[4]*at+Se[12],Pe[1]=Se[1]*Ke+Se[5]*at+Se[13],Pe}([],[d/w*l.W,v/w*l.W],B.u_terrain_matrix),Q=[Z[0]*j.dim,Z[1]*j.dim],se=Math.floor(Q[0]),le=Math.floor(Q[1]),ye=Q[0]-se,Le=Q[1]-le;return j.get(se,le)*(1-ye)*(1-Le)+j.get(se+1,le)*ye*(1-Le)+j.get(se,le+1)*(1-ye)*Le+j.get(se+1,le+1)*ye*Le}getElevationForLngLatZoom(a,d){const{tileID:v,mercatorX:w,mercatorY:C}=this._getOverscaledTileIDFromLngLatZoom(a,d);return this.getElevation(v,w%l.W,C%l.W,l.W)}getElevation(a,d,v,w=l.W){return this.getDEMElevation(a,d,v,w)*this.exaggeration}getTerrainData(a){if(!this._emptyDemTexture){const w=this.painter.context,C=new l.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new X(w,C,w.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new X(w,new l.R({width:1,height:1}),w.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(w.gl.NEAREST,w.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=l.an([])}const d=this.sourceCache.getSourceTile(a,!0);if(d&&d.dem&&(!d.demTexture||d.needsTerrainPrepare)){const w=this.painter.context;d.demTexture=this.painter.getTileTexture(d.dem.stride),d.demTexture?d.demTexture.update(d.dem.getPixels(),{premultiply:!1}):d.demTexture=new X(w,d.dem.getPixels(),w.gl.RGBA,{premultiply:!1}),d.demTexture.bind(w.gl.NEAREST,w.gl.CLAMP_TO_EDGE),d.needsTerrainPrepare=!1}const v=d&&d+d.tileID.key+a.key;if(v&&!this._demMatrixCache[v]){const w=this.sourceCache.sourceCache._source.maxzoom;let C=a.canonical.z-d.tileID.canonical.z;a.overscaledZ>a.canonical.z&&(a.canonical.z>=w?C=a.canonical.z-w:l.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const B=a.canonical.x-(a.canonical.x>>C<<C),j=a.canonical.y-(a.canonical.y>>C<<C),Z=l.b9(new Float64Array(16),[1/(l.W<<C),1/(l.W<<C),0]);l.H(Z,Z,[B*l.W,j*l.W,0]),this._demMatrixCache[a.key]={matrix:Z,coord:a}}return{u_depth:2,u_terrain:3,u_terrain_dim:d&&d.dem&&d.dem.dim||1,u_terrain_matrix:v?this._demMatrixCache[a.key].matrix:this._emptyDemMatrix,u_terrain_unpack:d&&d.dem&&d.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(d&&d.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:d}}getFramebuffer(a){const d=this.painter,v=d.width/devicePixelRatio,w=d.height/devicePixelRatio;return!this._fbo||this._fbo.width===v&&this._fbo.height===w||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new X(d.context,{width:v,height:w,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new X(d.context,{width:v,height:w,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=d.context.createFramebuffer(v,w,!0,!1),this._fbo.depthAttachment.set(d.context.createRenderbuffer(d.context.gl.DEPTH_COMPONENT16,v,w))),this._fbo.colorAttachment.set(a==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const a=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const d=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let C=0,B=0;C<this._coordsTextureSize;C++)for(let j=0;j<this._coordsTextureSize;j++,B+=4)d[B+0]=255&j,d[B+1]=255&C,d[B+2]=j>>8<<4|C>>8,d[B+3]=0;const v=new l.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(d.buffer)),w=new X(a,v,a.gl.RGBA,{premultiply:!1});return w.bind(a.gl.NEAREST,a.gl.CLAMP_TO_EDGE),this._coordsTexture=w,w}pointCoordinate(a){this.painter.maybeDrawDepthAndCoords(!0);const d=new Uint8Array(4),v=this.painter.context,w=v.gl,C=Math.round(a.x*this.painter.pixelRatio/devicePixelRatio),B=Math.round(a.y*this.painter.pixelRatio/devicePixelRatio),j=Math.round(this.painter.height/devicePixelRatio);v.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),w.readPixels(C,j-B-1,1,1,w.RGBA,w.UNSIGNED_BYTE,d),v.bindFramebuffer.set(null);const Z=d[0]+(d[2]>>4<<8),Q=d[1]+((15&d[2])<<8),se=this.coordsIndex[255-d[3]],le=se&&this.sourceCache.getTileByID(se);if(!le)return null;const ye=this._coordsTextureSize,Le=(1<<le.tileID.canonical.z)*ye;return new l.Y((le.tileID.canonical.x*ye+Z)/Le+le.tileID.wrap,(le.tileID.canonical.y*ye+Q)/Le,this.getElevation(le.tileID,Z,Q,ye))}depthAtPoint(a){const d=new Uint8Array(4),v=this.painter.context,w=v.gl;return v.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),w.readPixels(a.x,this.painter.height/devicePixelRatio-a.y-1,1,1,w.RGBA,w.UNSIGNED_BYTE,d),v.bindFramebuffer.set(null),(d[0]/16777216+d[1]/65536+d[2]/256+d[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const a=this.painter.context,d=new l.ba,v=new l.aX,w=this.meshSize,C=l.W/w,B=w*w;for(let le=0;le<=w;le++)for(let ye=0;ye<=w;ye++)d.emplaceBack(ye*C,le*C,0);for(let le=0;le<B;le+=w+1)for(let ye=0;ye<w;ye++)v.emplaceBack(ye+le,w+ye+le+1,w+ye+le+2),v.emplaceBack(ye+le,w+ye+le+2,ye+le+1);const j=d.length,Z=j+2*(w+1);for(const le of[0,1])for(let ye=0;ye<=w;ye++)for(const Le of[0,1])d.emplaceBack(ye*C,le*l.W,Le);for(let le=0;le<2*w;le+=2)v.emplaceBack(Z+le,Z+le+1,Z+le+3),v.emplaceBack(Z+le,Z+le+3,Z+le+2),v.emplaceBack(j+le,j+le+3,j+le+1),v.emplaceBack(j+le,j+le+2,j+le+3);const Q=d.length,se=Q+2*(w+1);for(const le of[0,1])for(let ye=0;ye<=w;ye++)for(const Le of[0,1])d.emplaceBack(le*l.W,ye*C,Le);for(let le=0;le<2*w;le+=2)v.emplaceBack(Q+le,Q+le+1,Q+le+3),v.emplaceBack(Q+le,Q+le+3,Q+le+2),v.emplaceBack(se+le,se+le+3,se+le+1),v.emplaceBack(se+le,se+le+2,se+le+3);return this._mesh={indexBuffer:a.createIndexBuffer(v),vertexBuffer:a.createVertexBuffer(d,tr.members),segments:l.$.simpleSegment(0,0,d.length,v.length)},this._mesh}getMeshFrameDelta(a){return 2*Math.PI*l.bb/Math.pow(2,a)/5}getMinTileElevationForLngLatZoom(a,d){var v;const{tileID:w}=this._getOverscaledTileIDFromLngLatZoom(a,d);return(v=this.getMinMaxElevation(w).minElevation)!==null&&v!==void 0?v:0}getMinMaxElevation(a){const d=this.getTerrainData(a).tile,v={minElevation:null,maxElevation:null};return d&&d.dem&&(v.minElevation=d.dem.min*this.exaggeration,v.maxElevation=d.dem.max*this.exaggeration),v}_getOverscaledTileIDFromLngLatZoom(a,d){const v=l.Y.fromLngLat(a.wrap()),w=(1<<d)*l.W,C=v.x*w,B=v.y*w,j=Math.floor(C/l.W),Z=Math.floor(B/l.W);return{tileID:new l.Q(d,0,d,j,Z),mercatorX:C,mercatorY:B}}}class kf{constructor(a,d,v){this._context=a,this._size=d,this._tileSize=v,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const a of this._objects)a.texture.destroy(),a.fbo.destroy()}_createObject(a){const d=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),v=new X(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return v.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),d.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),d.colorAttachment.set(v.texture),{id:a,fbo:d,texture:v,stamp:-1,inUse:!1}}getObjectForId(a){return this._objects[a]}useObject(a){a.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(d=>a.id!==d),this._recentlyUsed.push(a.id)}stampObject(a){a.stamp=++this._stamp}getOrCreateFreeObject(){for(const d of this._recentlyUsed)if(!this._objects[d].inUse)return this._objects[d];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const a=this._createObject(this._objects.length);return this._objects.push(a),a}freeObject(a){a.inUse=!1}freeAllObjects(){for(const a of this._objects)this.freeObject(a)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(a=>!a.inUse)===!1}}const xl={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Ud{constructor(a,d){this.painter=a,this.terrain=d,this.pool=new kf(a.context,30,d.sourceCache.tileSize*d.qualityFactor)}destruct(){this.pool.destruct()}getTexture(a){return this.pool.getObjectForId(a.rtt[this._stacks.length-1].id).texture}prepareForRender(a,d){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=a._order.filter(v=>!a._layers[v].isHidden(d)),this._coordsDescendingInv={};for(const v in a.sourceCaches){this._coordsDescendingInv[v]={};const w=a.sourceCaches[v].getVisibleCoordinates();for(const C of w){const B=this.terrain.sourceCache.getTerrainCoords(C);for(const j in B)this._coordsDescendingInv[v][j]||(this._coordsDescendingInv[v][j]=[]),this._coordsDescendingInv[v][j].push(B[j])}}this._coordsDescendingInvStr={};for(const v of a._order){const w=a._layers[v],C=w.source;if(xl[w.type]&&!this._coordsDescendingInvStr[C]){this._coordsDescendingInvStr[C]={};for(const B in this._coordsDescendingInv[C])this._coordsDescendingInvStr[C][B]=this._coordsDescendingInv[C][B].map(j=>j.key).sort().join()}}for(const v of this._renderableTiles)for(const w in this._coordsDescendingInvStr){const C=this._coordsDescendingInvStr[w][v.tileID.key];C&&C!==v.rttCoords[w]&&(v.rtt=[])}}renderLayer(a){if(a.isHidden(this.painter.transform.zoom))return!1;const d=a.type,v=this.painter,w=this._renderableLayerIds[this._renderableLayerIds.length-1]===a.id;if(xl[d]&&(this._prevType&&xl[this._prevType]||this._stacks.push([]),this._prevType=d,this._stacks[this._stacks.length-1].push(a.id),!w))return!0;if(xl[this._prevType]||xl[d]&&w){this._prevType=d;const C=this._stacks.length-1,B=this._stacks[C]||[];for(const j of this._renderableTiles){if(this.pool.isFull()&&(hc(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(j),j.rtt[C]){const Q=this.pool.getObjectForId(j.rtt[C].id);if(Q.stamp===j.rtt[C].stamp){this.pool.useObject(Q);continue}}const Z=this.pool.getOrCreateFreeObject();this.pool.useObject(Z),this.pool.stampObject(Z),j.rtt[C]={id:Z.id,stamp:Z.stamp},v.context.bindFramebuffer.set(Z.fbo.framebuffer),v.context.clear({color:l.aO.transparent,stencil:0}),v.currentStencilSource=void 0;for(let Q=0;Q<B.length;Q++){const se=v.style._layers[B[Q]],le=se.source?this._coordsDescendingInv[se.source][j.tileID.key]:[j.tileID];v.context.viewport.set([0,0,Z.fbo.width,Z.fbo.height]),v._renderTileClippingMasks(se,le),v.renderLayer(v,v.style.sourceCaches[se.source],se,le),se.source&&(j.rttCoords[se.source]=this._coordsDescendingInvStr[se.source][j.tileID.key])}}return hc(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),xl[d]}return!1}}const Pm={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},qd=p,Qr={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:Hn,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:l.a.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},gc=S=>{S.touchstart=S.dragStart,S.touchmoveWindow=S.dragMove,S.touchend=S.dragEnd},Lm={showCompass:!0,showZoom:!0,visualizePitch:!1};class Am{constructor(a,d,v=!1){this.mousedown=B=>{this.startMouse(l.e({},B,{ctrlKey:!0,preventDefault:()=>B.preventDefault()}),_.mousePos(this.element,B)),_.addEventListener(window,"mousemove",this.mousemove),_.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=B=>{this.moveMouse(B,_.mousePos(this.element,B))},this.mouseup=B=>{this.mouseRotate.dragEnd(B),this.mousePitch&&this.mousePitch.dragEnd(B),this.offTemp()},this.touchstart=B=>{B.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=_.touchPos(this.element,B.targetTouches)[0],this.startTouch(B,this._startPos),_.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),_.addEventListener(window,"touchend",this.touchend))},this.touchmove=B=>{B.targetTouches.length!==1?this.reset():(this._lastPos=_.touchPos(this.element,B.targetTouches)[0],this.moveTouch(B,this._lastPos))},this.touchend=B=>{B.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const w=a.dragRotate._mouseRotate.getClickTolerance(),C=a.dragRotate._mousePitch.getClickTolerance();this.element=d,this.mouseRotate=Za({clickTolerance:w,enable:!0}),this.touchRotate=(({enable:B,clickTolerance:j,bearingDegreesPerPixelMoved:Z=.8})=>{const Q=new Jt;return new pc({clickTolerance:j,move:(se,le)=>({bearingDelta:(le.x-se.x)*Z}),moveStateManager:Q,enable:B,assignEvents:gc})})({clickTolerance:w,enable:!0}),this.map=a,v&&(this.mousePitch=vh({clickTolerance:C,enable:!0}),this.touchPitch=(({enable:B,clickTolerance:j,pitchDegreesPerPixelMoved:Z=-.5})=>{const Q=new Jt;return new pc({clickTolerance:j,move:(se,le)=>({pitchDelta:(le.y-se.y)*Z}),moveStateManager:Q,enable:B,assignEvents:gc})})({clickTolerance:C,enable:!0})),_.addEventListener(d,"mousedown",this.mousedown),_.addEventListener(d,"touchstart",this.touchstart,{passive:!1}),_.addEventListener(d,"touchcancel",this.reset)}startMouse(a,d){this.mouseRotate.dragStart(a,d),this.mousePitch&&this.mousePitch.dragStart(a,d),_.disableDrag()}startTouch(a,d){this.touchRotate.dragStart(a,d),this.touchPitch&&this.touchPitch.dragStart(a,d),_.disableDrag()}moveMouse(a,d){const v=this.map,{bearingDelta:w}=this.mouseRotate.dragMove(a,d)||{};if(w&&v.setBearing(v.getBearing()+w),this.mousePitch){const{pitchDelta:C}=this.mousePitch.dragMove(a,d)||{};C&&v.setPitch(v.getPitch()+C)}}moveTouch(a,d){const v=this.map,{bearingDelta:w}=this.touchRotate.dragMove(a,d)||{};if(w&&v.setBearing(v.getBearing()+w),this.touchPitch){const{pitchDelta:C}=this.touchPitch.dragMove(a,d)||{};C&&v.setPitch(v.getPitch()+C)}}off(){const a=this.element;_.removeEventListener(a,"mousedown",this.mousedown),_.removeEventListener(a,"touchstart",this.touchstart,{passive:!1}),_.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),_.removeEventListener(window,"touchend",this.touchend),_.removeEventListener(a,"touchcancel",this.reset),this.offTemp()}offTemp(){_.enableDrag(),_.removeEventListener(window,"mousemove",this.mousemove),_.removeEventListener(window,"mouseup",this.mouseup),_.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),_.removeEventListener(window,"touchend",this.touchend)}}let bl;function bh(S,a,d){const v=new l.M(S.lng,S.lat);if(S=new l.M(S.lng,S.lat),a){const w=new l.M(S.lng-360,S.lat),C=new l.M(S.lng+360,S.lat),B=d.locationPoint(S).distSqr(a);d.locationPoint(w).distSqr(a)<B?S=w:d.locationPoint(C).distSqr(a)<B&&(S=C)}for(;Math.abs(S.lng-d.center.lng)>180;){const w=d.locationPoint(S);if(w.x>=0&&w.y>=0&&w.x<=d.width&&w.y<=d.height)break;S.lng>d.center.lng?S.lng-=360:S.lng+=360}return S.lng!==v.lng&&d.locationPoint(S).y>d.height/2-d.getHorizon()?S:v}const wh={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Vd(S,a,d){const v=S.classList;for(const w in wh)v.remove(`maplibregl-${d}-anchor-${w}`);v.add(`maplibregl-${d}-anchor-${a}`)}class Om extends l.E{constructor(a){if(super(),this._onKeyPress=d=>{const v=d.code,w=d.charCode||d.keyCode;v!=="Space"&&v!=="Enter"&&w!==32&&w!==13||this.togglePopup()},this._onMapClick=d=>{const v=d.originalEvent.target,w=this._element;this._popup&&(v===w||w.contains(v))&&this.togglePopup()},this._update=d=>{var v;if(!this._map)return;const w=this._map.loaded()&&!this._map.isMoving();((d==null?void 0:d.type)==="terrain"||(d==null?void 0:d.type)==="render"&&!w)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?bh(this._lngLat,this._flatPos,this._map.transform):(v=this._lngLat)===null||v===void 0?void 0:v.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let C="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?C=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(C=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let B="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?B="rotateX(0deg)":this._pitchAlignment==="map"&&(B=`rotateX(${this._map.getPitch()}deg)`),d&&d.type!=="moveend"||(this._pos=this._pos.round()),_.setTransform(this._element,`${wh[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${B} ${C}`),y.frameAsync(new AbortController).then(()=>{this._updateOpacity(d&&d.type==="moveend")}).catch(()=>{})},this._onMove=d=>{if(!this._isDragging){const v=this._clickTolerance||this._map._clickTolerance;this._isDragging=d.point.dist(this._pointerdownPos)>=v}this._isDragging&&(this._pos=d.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.k("dragstart"))),this.fire(new l.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.k("dragend")),this._state="inactive"},this._addDragHandler=d=>{this._element.contains(d.originalEvent.target)&&(d.preventDefault(),this._positionDelta=d.point.sub(this._pos).add(this._offset),this._pointerdownPos=d.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=a&&a.anchor||"center",this._color=a&&a.color||"#3FB1CE",this._scale=a&&a.scale||1,this._draggable=a&&a.draggable||!1,this._clickTolerance=a&&a.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=a&&a.rotation||0,this._rotationAlignment=a&&a.rotationAlignment||"auto",this._pitchAlignment=a&&a.pitchAlignment&&a.pitchAlignment!=="auto"?a.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(a==null?void 0:a.opacity,a==null?void 0:a.opacityWhenCovered),a&&a.element)this._element=a.element,this._offset=l.P.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0,this._element=_.create("div"),this._element.setAttribute("aria-label","Map marker");const d=_.createNS("http://www.w3.org/2000/svg","svg"),v=41,w=27;d.setAttributeNS(null,"display","block"),d.setAttributeNS(null,"height",`${v}px`),d.setAttributeNS(null,"width",`${w}px`),d.setAttributeNS(null,"viewBox",`0 0 ${w} ${v}`);const C=_.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"stroke","none"),C.setAttributeNS(null,"stroke-width","1"),C.setAttributeNS(null,"fill","none"),C.setAttributeNS(null,"fill-rule","evenodd");const B=_.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"fill-rule","nonzero");const j=_.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"transform","translate(3.0, 29.0)"),j.setAttributeNS(null,"fill","#000000");const Z=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ke of Z){const at=_.createNS("http://www.w3.org/2000/svg","ellipse");at.setAttributeNS(null,"opacity","0.04"),at.setAttributeNS(null,"cx","10.5"),at.setAttributeNS(null,"cy","5.80029008"),at.setAttributeNS(null,"rx",Ke.rx),at.setAttributeNS(null,"ry",Ke.ry),j.appendChild(at)}const Q=_.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"fill",this._color);const se=_.createNS("http://www.w3.org/2000/svg","path");se.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Q.appendChild(se);const le=_.createNS("http://www.w3.org/2000/svg","g");le.setAttributeNS(null,"opacity","0.25"),le.setAttributeNS(null,"fill","#000000");const ye=_.createNS("http://www.w3.org/2000/svg","path");ye.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),le.appendChild(ye);const Le=_.createNS("http://www.w3.org/2000/svg","g");Le.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Le.setAttributeNS(null,"fill","#FFFFFF");const Pe=_.createNS("http://www.w3.org/2000/svg","g");Pe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Me=_.createNS("http://www.w3.org/2000/svg","circle");Me.setAttributeNS(null,"fill","#000000"),Me.setAttributeNS(null,"opacity","0.25"),Me.setAttributeNS(null,"cx","5.5"),Me.setAttributeNS(null,"cy","5.5"),Me.setAttributeNS(null,"r","5.4999962");const Se=_.createNS("http://www.w3.org/2000/svg","circle");Se.setAttributeNS(null,"fill","#FFFFFF"),Se.setAttributeNS(null,"cx","5.5"),Se.setAttributeNS(null,"cy","5.5"),Se.setAttributeNS(null,"r","5.4999962"),Pe.appendChild(Me),Pe.appendChild(Se),B.appendChild(j),B.appendChild(Q),B.appendChild(le),B.appendChild(Le),B.appendChild(Pe),d.appendChild(B),d.setAttributeNS(null,"height",v*this._scale+"px"),d.setAttributeNS(null,"width",w*this._scale+"px"),this._element.appendChild(d),this._offset=l.P.convert(a&&a.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",d=>{d.preventDefault()}),this._element.addEventListener("mousedown",d=>{d.preventDefault()}),Vd(this._element,this._anchor,"marker"),a&&a.className)for(const d of a.className.split(" "))this._element.classList.add(d);this._popup=null}addTo(a){return this.remove(),this._map=a,a.getCanvasContainer().appendChild(this._element),a.on("move",this._update),a.on("moveend",this._update),a.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),_.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(a){return this._lngLat=l.M.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(a){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),a){if(!("offset"in a.options)){const w=Math.abs(13.5)/Math.SQRT2;a.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[w,-1*(38.1-13.5+w)],"bottom-right":[-w,-1*(38.1-13.5+w)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=a,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const a=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:a?(a.isOpen()?a.remove():(a.setLngLat(this._lngLat),a.addTo(this._map)),this):this}_updateOpacity(a=!1){var d,v;if(!(!((d=this._map)===null||d===void 0)&&d.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(a)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const w=this._map,C=w.terrain.depthAtPoint(this._pos),B=w.terrain.getElevationForLngLatZoom(this._lngLat,w.transform.tileZoom);if(w.transform.lngLatToCameraDepth(this._lngLat,B)-C<.006)return void(this._element.style.opacity=this._opacity);const j=-this._offset.y/w.transform._pixelPerMeter,Z=Math.sin(w.getPitch()*Math.PI/180)*j,Q=w.terrain.depthAtPoint(new l.P(this._pos.x,this._pos.y-this._offset.y)),se=w.transform.lngLatToCameraDepth(this._lngLat,B+Z)-Q>.006;!((v=this._popup)===null||v===void 0)&&v.isOpen()&&se&&this._popup.remove(),this._element.style.opacity=se?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(a){return this._offset=l.P.convert(a),this._update(),this}addClassName(a){this._element.classList.add(a)}removeClassName(a){this._element.classList.remove(a)}toggleClassName(a){return this._element.classList.toggle(a)}setDraggable(a){return this._draggable=!!a,this._map&&(a?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(a){return this._rotation=a||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(a){return this._rotationAlignment=a||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(a){return this._pitchAlignment=a&&a!=="auto"?a:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(a,d){return a===void 0&&d===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),a!==void 0&&(this._opacity=a),d!==void 0&&(this._opacityWhenCovered=d),this._map&&this._updateOpacity(!0),this}}const oy={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Gd=0,Rf=!1;const sy={maxWidth:100,unit:"metric"};function ay(S,a,d){const v=d&&d.maxWidth||100,w=S._container.clientHeight/2,C=S.unproject([0,w]),B=S.unproject([v,w]),j=C.distanceTo(B);if(d&&d.unit==="imperial"){const Z=3.2808*j;Z>5280?Mf(a,v,Z/5280,S._getUIString("ScaleControl.Miles")):Mf(a,v,Z,S._getUIString("ScaleControl.Feet"))}else d&&d.unit==="nautical"?Mf(a,v,j/1852,S._getUIString("ScaleControl.NauticalMiles")):j>=1e3?Mf(a,v,j/1e3,S._getUIString("ScaleControl.Kilometers")):Mf(a,v,j,S._getUIString("ScaleControl.Meters"))}function Mf(S,a,d,v){const w=function(C){const B=Math.pow(10,`${Math.floor(C)}`.length-1);let j=C/B;return j=j>=10?10:j>=5?5:j>=3?3:j>=2?2:j>=1?1:function(Z){const Q=Math.pow(10,Math.ceil(-Math.log(Z)/Math.LN10));return Math.round(Z*Q)/Q}(j),B*j}(d);S.style.width=a*(w/d)+"px",S.innerHTML=`${w}&nbsp;${v}`}const Tv={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},Cv=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ly(S){if(S){if(typeof S=="number"){const a=Math.round(Math.abs(S)/Math.SQRT2);return{center:new l.P(0,0),top:new l.P(0,S),"top-left":new l.P(a,a),"top-right":new l.P(-a,a),bottom:new l.P(0,-S),"bottom-left":new l.P(a,-a),"bottom-right":new l.P(-a,-a),left:new l.P(S,0),right:new l.P(-S,0)}}if(S instanceof l.P||Array.isArray(S)){const a=l.P.convert(S);return{center:a,top:a,"top-left":a,"top-right":a,bottom:a,"bottom-left":a,"bottom-right":a,left:a,right:a}}return{center:l.P.convert(S.center||[0,0]),top:l.P.convert(S.top||[0,0]),"top-left":l.P.convert(S["top-left"]||[0,0]),"top-right":l.P.convert(S["top-right"]||[0,0]),bottom:l.P.convert(S.bottom||[0,0]),"bottom-left":l.P.convert(S["bottom-left"]||[0,0]),"bottom-right":l.P.convert(S["bottom-right"]||[0,0]),left:l.P.convert(S.left||[0,0]),right:l.P.convert(S.right||[0,0])}}return ly(new l.P(0,0))}const Ax=p;u.AJAXError=l.be,u.Evented=l.E,u.LngLat=l.M,u.MercatorCoordinate=l.Y,u.Point=l.P,u.addProtocol=l.bf,u.config=l.a,u.removeProtocol=l.bg,u.AttributionControl=Hr,u.BoxZoomHandler=da,u.CanvasSource=vt,u.CooperativeGesturesHandler=Ce,u.DoubleClickZoomHandler=f,u.DragPanHandler=V,u.DragRotateHandler=re,u.EdgeInsets=hu,u.FullscreenControl=class extends l.E{constructor(S={}){super(),this._onFullscreenChange=()=>{var a;let d=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((a=d==null?void 0:d.shadowRoot)===null||a===void 0)&&a.fullscreenElement;)d=d.shadowRoot.fullscreenElement;d===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,S&&S.container&&(S.container instanceof HTMLElement?this._container=S.container:l.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(S){return this._map=S,this._container||(this._container=this._map.getContainer()),this._controlContainer=_.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){_.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const S=this._fullscreenButton=_.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);_.create("span","maplibregl-ctrl-icon",S).setAttribute("aria-hidden","true"),S.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const S=this._getTitle();this._fullscreenButton.setAttribute("aria-label",S),this._fullscreenButton.title=S}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new l.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new l.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},u.GeoJSONSource=gt,u.GeolocateControl=class extends l.E{constructor(S){super(),this._onSuccess=a=>{if(this._map){if(this._isOutOfMapMaxBounds(a))return this._setErrorState(),this.fire(new l.k("outofmaxbounds",a)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=a,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(a),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(a),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new l.k("geolocate",a)),this._finish()}},this._updateCamera=a=>{const d=new l.M(a.coords.longitude,a.coords.latitude),v=a.coords.accuracy,w=this._map.getBearing(),C=l.e({bearing:w},this.options.fitBoundsOptions),B=Kt.fromLngLat(d,v);this._map.fitBounds(B,C,{geolocateSource:!0})},this._updateMarker=a=>{if(a){const d=new l.M(a.coords.longitude,a.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=a.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=a=>{if(this._map){if(this.options.trackUserLocation)if(a.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(a.code===3&&Rf)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new l.k("error",a)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=a=>{if(this._map){if(this._container.addEventListener("contextmenu",d=>d.preventDefault()),this._geolocateButton=_.create("button","maplibregl-ctrl-geolocate",this._container),_.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",a===!1){l.w("Geolocation support is not available so the GeolocateControl will be disabled.");const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}else{const d=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=_.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Om({element:this._dotElement}),this._circleElement=_.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Om({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",d=>{d.geolocateSource||this._watchState!=="ACTIVE_LOCK"||d.originalEvent&&d.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new l.k("trackuserlocationend")))})}},this.options=l.e({},oy,S)}onAdd(S){return this._map=S,this._container=_.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(){return l._(this,arguments,void 0,function*(a=!1){if(bl!==void 0&&!a)return bl;if(window.navigator.permissions===void 0)return bl=!!window.navigator.geolocation,bl;try{bl=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{bl=!!window.navigator.geolocation}return bl})}().then(a=>this._setupUI(a)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),_.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Gd=0,Rf=!1}_isOutOfMapMaxBounds(S){const a=this._map.getMaxBounds(),d=S.coords;return a&&(d.longitude<a.getWest()||d.longitude>a.getEast()||d.latitude<a.getSouth()||d.latitude>a.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const S=this._map.getBounds(),a=S.getSouthEast(),d=S.getNorthEast(),v=a.distanceTo(d),w=Math.ceil(this._accuracy/(v/this._map._container.clientHeight)*2);this._circleElement.style.width=`${w}px`,this._circleElement.style.height=`${w}px`}trigger(){if(!this._setup)return l.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Gd--,Rf=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new l.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let S;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Gd++,Gd>1?(S={maximumAge:6e5,timeout:0},Rf=!0):(S=this.options.positionOptions,Rf=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,S)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},u.Hash=Sf,u.ImageSource=Pt,u.KeyboardHandler=du,u.LngLatBounds=Kt,u.LogoControl=$i,u.Map=class extends hn{constructor(S){if(l.bc.mark(l.bd.create),(S=l.e({},Qr,S)).minZoom!=null&&S.maxZoom!=null&&S.minZoom>S.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(S.minPitch!=null&&S.maxPitch!=null&&S.minPitch>S.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(S.minPitch!=null&&S.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(S.maxPitch!=null&&S.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new vl(S.minZoom,S.maxZoom,S.minPitch,S.maxPitch,S.renderWorldCopies),{bearingSnap:S.bearingSnap}),this._contextLost=a=>{a.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new l.k("webglcontextlost",{originalEvent:a}))},this._contextRestored=a=>{this._setupPainter(),this.resize(),this._update(),this.fire(new l.k("webglcontextrestored",{originalEvent:a}))},this._onMapScroll=a=>{if(a.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=S.interactive,this._maxTileCacheSize=S.maxTileCacheSize,this._maxTileCacheZoomLevels=S.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=S.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=S.preserveDrawingBuffer,this._antialias=S.antialias,this._trackResize=S.trackResize,this._bearingSnap=S.bearingSnap,this._refreshExpiredTiles=S.refreshExpiredTiles,this._fadeDuration=S.fadeDuration,this._crossSourceCollisions=S.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=S.collectResourceTiming,this._renderTaskQueue=new Po,this._controls=[],this._mapId=l.a3(),this._locale=l.e({},Pm,S.locale),this._clickTolerance=S.clickTolerance,this._overridePixelRatio=S.pixelRatio,this._maxCanvasSize=S.maxCanvasSize,this.transformCameraUpdate=S.transformCameraUpdate,this._imageQueueHandle=z.addThrottleControl(()=>this.isMoving()),this._requestManager=new D(S.transformRequest),typeof S.container=="string"){if(this._container=document.getElementById(S.container),!this._container)throw new Error(`Container '${S.container}' not found.`)}else{if(!(S.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=S.container}if(S.maxBounds&&this.setMaxBounds(S.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let a=!1;const d=gh(v=>{this._trackResize&&!this._removed&&this.resize(v)._update()},50);this._resizeObserver=new ResizeObserver(v=>{a?d(v):a=!0}),this._resizeObserver.observe(this._container)}this.handlers=new tn(this,S),this._hash=S.hash&&new Sf(typeof S.hash=="string"&&S.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:S.center,zoom:S.zoom,bearing:S.bearing,pitch:S.pitch}),S.bounds&&(this.resize(),this.fitBounds(S.bounds,l.e({},S.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=S.localIdeographFontFamily,this._validateStyle=S.validateStyle,S.style&&this.setStyle(S.style,{localIdeographFontFamily:S.localIdeographFontFamily}),S.attributionControl&&this.addControl(new Hr(typeof S.attributionControl=="boolean"?void 0:S.attributionControl)),S.maplibreLogo&&this.addControl(new $i,S.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",a=>{this._update(a.dataType==="style"),this.fire(new l.k(`${a.dataType}data`,a))}),this.on("dataloading",a=>{this.fire(new l.k(`${a.dataType}dataloading`,a))}),this.on("dataabort",a=>{this.fire(new l.k("sourcedataabort",a))})}_getMapId(){return this._mapId}addControl(S,a){if(a===void 0&&(a=S.getDefaultPosition?S.getDefaultPosition():"top-right"),!S||!S.onAdd)return this.fire(new l.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=S.onAdd(this);this._controls.push(S);const v=this._controlPositions[a];return a.indexOf("bottom")!==-1?v.insertBefore(d,v.firstChild):v.appendChild(d),this}removeControl(S){if(!S||!S.onRemove)return this.fire(new l.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const a=this._controls.indexOf(S);return a>-1&&this._controls.splice(a,1),S.onRemove(this),this}hasControl(S){return this._controls.indexOf(S)>-1}calculateCameraOptionsFromTo(S,a,d,v){return v==null&&this.terrain&&(v=this.terrain.getElevationForLngLatZoom(d,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(S,a,d,v)}resize(S){var a;const d=this._containerDimensions(),v=d[0],w=d[1],C=this._getClampedPixelRatio(v,w);if(this._resizeCanvas(v,w,C),this.painter.resize(v,w,C),this.painter.overLimit()){const j=this.painter.context.gl;this._maxCanvasSize=[j.drawingBufferWidth,j.drawingBufferHeight];const Z=this._getClampedPixelRatio(v,w);this._resizeCanvas(v,w,Z),this.painter.resize(v,w,Z)}this.transform.resize(v,w),(a=this._requestedCameraState)===null||a===void 0||a.resize(v,w);const B=!this._moving;return B&&(this.stop(),this.fire(new l.k("movestart",S)).fire(new l.k("move",S))),this.fire(new l.k("resize",S)),B&&this.fire(new l.k("moveend",S)),this}_getClampedPixelRatio(S,a){const{0:d,1:v}=this._maxCanvasSize,w=this.getPixelRatio(),C=S*w,B=a*w;return Math.min(C>d?d/C:1,B>v?v/B:1)*w}getPixelRatio(){var S;return(S=this._overridePixelRatio)!==null&&S!==void 0?S:devicePixelRatio}setPixelRatio(S){this._overridePixelRatio=S,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(S){return this.transform.setMaxBounds(Kt.convert(S)),this._update()}setMinZoom(S){if((S=S??-2)>=-2&&S<=this.transform.maxZoom)return this.transform.minZoom=S,this._update(),this.getZoom()<S&&this.setZoom(S),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(S){if((S=S??22)>=this.transform.minZoom)return this.transform.maxZoom=S,this._update(),this.getZoom()>S&&this.setZoom(S),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(S){if((S=S??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(S>=0&&S<=this.transform.maxPitch)return this.transform.minPitch=S,this._update(),this.getPitch()<S&&this.setPitch(S),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(S){if((S=S??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(S>=this.transform.minPitch)return this.transform.maxPitch=S,this._update(),this.getPitch()>S&&this.setPitch(S),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(S){return this.transform.renderWorldCopies=S,this._update()}project(S){return this.transform.locationPoint(l.M.convert(S),this.style&&this.terrain)}unproject(S){return this.transform.pointLocation(l.P.convert(S),this.terrain)}isMoving(){var S;return this._moving||((S=this.handlers)===null||S===void 0?void 0:S.isMoving())}isZooming(){var S;return this._zooming||((S=this.handlers)===null||S===void 0?void 0:S.isZooming())}isRotating(){var S;return this._rotating||((S=this.handlers)===null||S===void 0?void 0:S.isRotating())}_createDelegatedListener(S,a,d){if(S==="mouseenter"||S==="mouseover"){let v=!1;return{layer:a,listener:d,delegates:{mousemove:C=>{const B=this.getLayer(a)?this.queryRenderedFeatures(C.point,{layers:[a]}):[];B.length?v||(v=!0,d.call(this,new si(S,this,C.originalEvent,{features:B}))):v=!1},mouseout:()=>{v=!1}}}}if(S==="mouseleave"||S==="mouseout"){let v=!1;return{layer:a,listener:d,delegates:{mousemove:B=>{(this.getLayer(a)?this.queryRenderedFeatures(B.point,{layers:[a]}):[]).length?v=!0:v&&(v=!1,d.call(this,new si(S,this,B.originalEvent)))},mouseout:B=>{v&&(v=!1,d.call(this,new si(S,this,B.originalEvent)))}}}}{const v=w=>{const C=this.getLayer(a)?this.queryRenderedFeatures(w.point,{layers:[a]}):[];C.length&&(w.features=C,d.call(this,w),delete w.features)};return{layer:a,listener:d,delegates:{[S]:v}}}}on(S,a,d){if(d===void 0)return super.on(S,a);const v=this._createDelegatedListener(S,a,d);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[S]=this._delegatedListeners[S]||[],this._delegatedListeners[S].push(v);for(const w in v.delegates)this.on(w,v.delegates[w]);return this}once(S,a,d){if(d===void 0)return super.once(S,a);const v=this._createDelegatedListener(S,a,d);for(const w in v.delegates)this.once(w,v.delegates[w]);return this}off(S,a,d){return d===void 0?super.off(S,a):(this._delegatedListeners&&this._delegatedListeners[S]&&(v=>{const w=this._delegatedListeners[S];for(let C=0;C<w.length;C++){const B=w[C];if(B.layer===a&&B.listener===d){for(const j in B.delegates)this.off(j,B.delegates[j]);return w.splice(C,1),this}}})(),this)}queryRenderedFeatures(S,a){if(!this.style)return[];let d;const v=S instanceof l.P||Array.isArray(S),w=v?S:[[0,0],[this.transform.width,this.transform.height]];if(a=a||(v?{}:S)||{},w instanceof l.P||typeof w[0]=="number")d=[l.P.convert(w)];else{const C=l.P.convert(w[0]),B=l.P.convert(w[1]);d=[C,new l.P(B.x,C.y),B,new l.P(C.x,B.y),C]}return this.style.queryRenderedFeatures(d,a,this.transform)}querySourceFeatures(S,a){return this.style.querySourceFeatures(S,a)}setStyle(S,a){return(a=l.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},a)).diff!==!1&&a.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&S?(this._diffStyle(S,a),this):(this._localIdeographFontFamily=a.localIdeographFontFamily,this._updateStyle(S,a))}setTransformRequest(S){return this._requestManager.setTransformRequest(S),this}_getUIString(S){const a=this._locale[S];if(a==null)throw new Error(`Missing UI string '${S}'`);return a}_updateStyle(S,a){if(a.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(S,a));const d=this.style&&a.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!S)),S?(this.style=new Cn(this,a||{}),this.style.setEventedParent(this,{style:this.style}),typeof S=="string"?this.style.loadURL(S,a,d):this.style.loadJSON(S,a,d),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Cn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(S,a){if(typeof S=="string"){const d=this._requestManager.transformRequest(S,"Style");l.h(d,new AbortController).then(v=>{this._updateDiff(v.data,a)}).catch(v=>{v&&this.fire(new l.j(v))})}else typeof S=="object"&&this._updateDiff(S,a)}_updateDiff(S,a){try{this.style.setState(S,a)&&this._update(!0)}catch(d){l.w(`Unable to perform style diff: ${d.message||d.error||d}.  Rebuilding the style from scratch.`),this._updateStyle(S,a)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.w("There is no style added to the map.")}addSource(S,a){return this._lazyInitEmptyStyle(),this.style.addSource(S,a),this._update(!0)}isSourceLoaded(S){const a=this.style&&this.style.sourceCaches[S];if(a!==void 0)return a.loaded();this.fire(new l.j(new Error(`There is no source with ID '${S}'`)))}setTerrain(S){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),S){const a=this.style.sourceCaches[S.source];if(!a)throw new Error(`cannot load terrain, because there exists no source with ID: ${S.source}`);this.terrain===null&&a.reload();for(const d in this.style._layers){const v=this.style._layers[d];v.type==="hillshade"&&v.source===S.source&&l.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new iy(this.painter,a,S),this.painter.renderToTexture=new Ud(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=d=>{d.dataType==="style"?this.terrain.sourceCache.freeRtt():d.dataType==="source"&&d.tile&&(d.sourceId!==S.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(d.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new l.k("terrain",{terrain:S})),this}getTerrain(){var S,a;return(a=(S=this.terrain)===null||S===void 0?void 0:S.options)!==null&&a!==void 0?a:null}areTilesLoaded(){const S=this.style&&this.style.sourceCaches;for(const a in S){const d=S[a]._tiles;for(const v in d){const w=d[v];if(w.state!=="loaded"&&w.state!=="errored")return!1}}return!0}removeSource(S){return this.style.removeSource(S),this._update(!0)}getSource(S){return this.style.getSource(S)}addImage(S,a,d={}){const{pixelRatio:v=1,sdf:w=!1,stretchX:C,stretchY:B,content:j}=d;if(this._lazyInitEmptyStyle(),!(a instanceof HTMLImageElement||l.b(a))){if(a.width===void 0||a.height===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:Z,height:Q,data:se}=a,le=a;return this.style.addImage(S,{data:new l.R({width:Z,height:Q},new Uint8Array(se)),pixelRatio:v,stretchX:C,stretchY:B,content:j,sdf:w,version:0,userImage:le}),le.onAdd&&le.onAdd(this,S),this}}{const{width:Z,height:Q,data:se}=y.getImageData(a);this.style.addImage(S,{data:new l.R({width:Z,height:Q},se),pixelRatio:v,stretchX:C,stretchY:B,content:j,sdf:w,version:0})}}updateImage(S,a){const d=this.style.getImage(S);if(!d)return this.fire(new l.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const v=a instanceof HTMLImageElement||l.b(a)?y.getImageData(a):a,{width:w,height:C,data:B}=v;if(w===void 0||C===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(w!==d.data.width||C!==d.data.height)return this.fire(new l.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const j=!(a instanceof HTMLImageElement||l.b(a));return d.data.replace(B,j),this.style.updateImage(S,d),this}getImage(S){return this.style.getImage(S)}hasImage(S){return S?!!this.style.getImage(S):(this.fire(new l.j(new Error("Missing required image id"))),!1)}removeImage(S){this.style.removeImage(S)}loadImage(S){return z.getImage(this._requestManager.transformRequest(S,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(S,a){return this._lazyInitEmptyStyle(),this.style.addLayer(S,a),this._update(!0)}moveLayer(S,a){return this.style.moveLayer(S,a),this._update(!0)}removeLayer(S){return this.style.removeLayer(S),this._update(!0)}getLayer(S){return this.style.getLayer(S)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(S,a,d){return this.style.setLayerZoomRange(S,a,d),this._update(!0)}setFilter(S,a,d={}){return this.style.setFilter(S,a,d),this._update(!0)}getFilter(S){return this.style.getFilter(S)}setPaintProperty(S,a,d,v={}){return this.style.setPaintProperty(S,a,d,v),this._update(!0)}getPaintProperty(S,a){return this.style.getPaintProperty(S,a)}setLayoutProperty(S,a,d,v={}){return this.style.setLayoutProperty(S,a,d,v),this._update(!0)}getLayoutProperty(S,a){return this.style.getLayoutProperty(S,a)}setGlyphs(S,a={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(S,a),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(S,a,d={}){return this._lazyInitEmptyStyle(),this.style.addSprite(S,a,d,v=>{v||this._update(!0)}),this}removeSprite(S){return this._lazyInitEmptyStyle(),this.style.removeSprite(S),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(S,a={}){return this._lazyInitEmptyStyle(),this.style.setSprite(S,a,d=>{d||this._update(!0)}),this}setLight(S,a={}){return this._lazyInitEmptyStyle(),this.style.setLight(S,a),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(S,a){return this.style.setFeatureState(S,a),this._update()}removeFeatureState(S,a){return this.style.removeFeatureState(S,a),this._update()}getFeatureState(S){return this.style.getFeatureState(S)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let S=0,a=0;return this._container&&(S=this._container.clientWidth||400,a=this._container.clientHeight||300),[S,a]}_setupContainer(){const S=this._container;S.classList.add("maplibregl-map");const a=this._canvasContainer=_.create("div","maplibregl-canvas-container",S);this._interactive&&a.classList.add("maplibregl-interactive"),this._canvas=_.create("canvas","maplibregl-canvas",a),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const d=this._containerDimensions(),v=this._getClampedPixelRatio(d[0],d[1]);this._resizeCanvas(d[0],d[1],v);const w=this._controlContainer=_.create("div","maplibregl-control-container",S),C=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(B=>{C[B]=_.create("div",`maplibregl-ctrl-${B} `,w)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(S,a,d){this._canvas.width=Math.floor(d*S),this._canvas.height=Math.floor(d*a),this._canvas.style.width=`${S}px`,this._canvas.style.height=`${a}px`}_setupPainter(){const S={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let a=null;this._canvas.addEventListener("webglcontextcreationerror",v=>{a={requestedAttributes:S},v&&(a.statusMessage=v.statusMessage,a.type=v.type)},{once:!0});const d=this._canvas.getContext("webgl2",S)||this._canvas.getContext("webgl",S);if(!d){const v="Failed to initialize WebGL";throw a?(a.message=v,new Error(JSON.stringify(a))):new Error(v)}this.painter=new Em(d,this.transform),T.testSupport(d)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(S){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||S,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(S){return this._update(),this._renderTaskQueue.add(S)}_cancelRenderFrame(S){this._renderTaskQueue.remove(S)}_render(S){const a=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(S),this._removed)return;let d=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const w=this.transform.zoom,C=y.now();this.style.zoomHistory.update(w,C);const B=new l.a8(w,{now:C,fadeDuration:a,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),j=B.crossFadingFactor();j===1&&j===this._crossFadingFactor||(d=!0,this._crossFadingFactor=j),this.style.update(B)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,a,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:a,showPadding:this.showPadding}),this.fire(new l.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.bc.mark(l.bd.load),this.fire(new l.k("load"))),this.style&&(this.style.hasTransitions()||d)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const v=this._sourcesDirty||this._styleDirty||this._placementDirty;return v||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.k("idle")),!this._loaded||this._fullyLoaded||v||(this._fullyLoaded=!0,l.bc.mark(l.bd.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var S;this._hash&&this._hash.remove();for(const d of this._controls)d.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),z.removeThrottleControl(this._imageQueueHandle),(S=this._resizeObserver)===null||S===void 0||S.disconnect();const a=this.painter.context.gl.getExtension("WEBGL_lose_context");a&&a.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),_.remove(this._canvasContainer),_.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),l.bc.clearMetrics(),this._removed=!0,this.fire(new l.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,y.frameAsync(this._frameRequest).then(S=>{l.bc.frame(S),this._frameRequest=null,this._render(S)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(S){this._showTileBoundaries!==S&&(this._showTileBoundaries=S,this._update())}get showPadding(){return!!this._showPadding}set showPadding(S){this._showPadding!==S&&(this._showPadding=S,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(S){this._showCollisionBoxes!==S&&(this._showCollisionBoxes=S,S?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(S){this._showOverdrawInspector!==S&&(this._showOverdrawInspector=S,this._update())}get repaint(){return!!this._repaint}set repaint(S){this._repaint!==S&&(this._repaint=S,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(S){this._vertices=S,this._update()}get version(){return qd}getCameraTargetElevation(){return this.transform.elevation}},u.MapMouseEvent=si,u.MapTouchEvent=Ss,u.MapWheelEvent=Tm,u.Marker=Om,u.NavigationControl=class{constructor(S){this._updateZoomButtons=()=>{const a=this._map.getZoom(),d=a===this._map.getMaxZoom(),v=a===this._map.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=v,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",v.toString())},this._rotateCompassArrow=()=>{const a=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=a},this._setButtonTitle=(a,d)=>{const v=this._map._getUIString(`NavigationControl.${d}`);a.title=v,a.setAttribute("aria-label",v)},this.options=l.e({},Lm,S),this._container=_.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",a=>a.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",a=>this._map.zoomIn({},{originalEvent:a})),_.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",a=>this._map.zoomOut({},{originalEvent:a})),_.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",a=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:a}):this._map.resetNorth({},{originalEvent:a})}),this._compassIcon=_.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(S){return this._map=S,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Am(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){_.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(S,a){const d=_.create("button",S,this._container);return d.type="button",d.addEventListener("click",a),d}},u.Popup=class extends l.E{constructor(S){super(),this.remove=()=>(this._content&&_.remove(this._content),this._container&&(_.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new l.k("close"))),this),this._onMouseUp=a=>{this._update(a.point)},this._onMouseMove=a=>{this._update(a.point)},this._onDrag=a=>{this._update(a.point)},this._update=a=>{var d;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=_.create("div","maplibregl-popup",this._map.getContainer()),this._tip=_.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const j of this.options.className.split(" "))this._container.classList.add(j);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?bh(this._lngLat,this._flatPos,this._map.transform):(d=this._lngLat)===null||d===void 0?void 0:d.wrap(),this._trackPointer&&!a)return;const v=this._flatPos=this._pos=this._trackPointer&&a?a:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&a?a:this._map.transform.locationPoint(this._lngLat));let w=this.options.anchor;const C=ly(this.options.offset);if(!w){const j=this._container.offsetWidth,Z=this._container.offsetHeight;let Q;Q=v.y+C.bottom.y<Z?["top"]:v.y>this._map.transform.height-Z?["bottom"]:[],v.x<j/2?Q.push("left"):v.x>this._map.transform.width-j/2&&Q.push("right"),w=Q.length===0?"bottom":Q.join("-")}let B=v.add(C[w]);this.options.subpixelPositioning||(B=B.round()),_.setTransform(this._container,`${wh[w]} translate(${B.x}px,${B.y}px)`),Vd(this._container,w,"popup")},this._onClose=()=>{this.remove()},this.options=l.e(Object.create(Tv),S)}addTo(S){return this._map&&this.remove(),this._map=S,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new l.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(S){return this._lngLat=l.M.convert(S),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(S){return this.setDOMContent(document.createTextNode(S))}setHTML(S){const a=document.createDocumentFragment(),d=document.createElement("body");let v;for(d.innerHTML=S;v=d.firstChild,v;)a.appendChild(v);return this.setDOMContent(a)}getMaxWidth(){var S;return(S=this._container)===null||S===void 0?void 0:S.style.maxWidth}setMaxWidth(S){return this.options.maxWidth=S,this._update(),this}setDOMContent(S){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=_.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(S),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(S){this._container&&this._container.classList.add(S)}removeClassName(S){this._container&&this._container.classList.remove(S)}setOffset(S){return this.options.offset=S,this._update(),this}toggleClassName(S){if(this._container)return this._container.classList.toggle(S)}setSubpixelPositioning(S){this.options.subpixelPositioning=S}_createCloseButton(){this.options.closeButton&&(this._closeButton=_.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const S=this._container.querySelector(Cv);S&&S.focus()}},u.RasterDEMTileSource=lt,u.RasterTileSource=rt,u.ScaleControl=class{constructor(S){this._onMove=()=>{ay(this._map,this._container,this.options)},this.setUnit=a=>{this.options.unit=a,ay(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},sy),S)}getDefaultPosition(){return"bottom-left"}onAdd(S){return this._map=S,this._container=_.create("div","maplibregl-ctrl maplibregl-ctrl-scale",S.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){_.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},u.ScrollZoomHandler=$d,u.Style=Cn,u.TerrainControl=class{constructor(S){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=S}onAdd(S){return this._map=S,this._container=_.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=_.create("button","maplibregl-ctrl-terrain",this._container),_.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){_.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},u.TwoFingersTouchPitchHandler=Im,u.TwoFingersTouchRotateHandler=jd,u.TwoFingersTouchZoomHandler=ny,u.TwoFingersTouchZoomRotateHandler=me,u.VectorTileSource=Tr,u.VideoSource=je,u.addSourceType=(S,a)=>l._(void 0,void 0,void 0,function*(){if(Lt(S))throw new Error(`A source type called "${S}" already exists.`);((d,v)=>{St[d]=v})(S,a)}),u.clearPrewarmedResources=function(){const S=$e;S&&(S.isPreloaded()&&S.numActive()===1?(S.release(xe),$e=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},u.getMaxParallelImageRequests=function(){return l.a.MAX_PARALLEL_IMAGE_REQUESTS},u.getRTLTextPluginStatus=function(){return bt().getRTLTextPluginStatus()},u.getVersion=function(){return Ax},u.getWorkerCount=function(){return Ee.workerCount},u.getWorkerUrl=function(){return l.a.WORKER_URL},u.importScriptInWorkers=function(S){return ct().broadcast("IS",S)},u.prewarm=function(){He().acquire(xe)},u.setMaxParallelImageRequests=function(S){l.a.MAX_PARALLEL_IMAGE_REQUESTS=S},u.setRTLTextPlugin=function(S,a){return bt().setRTLTextPlugin(S,a)},u.setWorkerCount=function(S){Ee.workerCount=S},u.setWorkerUrl=function(S){l.a.WORKER_URL=S}});var o=n;return o})})($6);var gne=$6.exports;const xn=xd(gne),q6="3.7.7",yne=q6,av=typeof Buffer=="function",dD=typeof TextDecoder=="function"?new TextDecoder:void 0,pD=typeof TextEncoder=="function"?new TextEncoder:void 0,_ne="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",C0=Array.prototype.slice.call(_ne),Ab=(e=>{let t={};return e.forEach((n,r)=>t[n]=r),t})(C0),vne=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,Ms=String.fromCharCode.bind(String),mD=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),V6=e=>e.replace(/=/g,"").replace(/[+\/]/g,t=>t=="+"?"-":"_"),G6=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),H6=e=>{let t,n,r,i,o="";const u=e.length%3;for(let l=0;l<e.length;){if((n=e.charCodeAt(l++))>255||(r=e.charCodeAt(l++))>255||(i=e.charCodeAt(l++))>255)throw new TypeError("invalid character found");t=n<<16|r<<8|i,o+=C0[t>>18&63]+C0[t>>12&63]+C0[t>>6&63]+C0[t&63]}return u?o.slice(0,u-3)+"===".substring(u):o},RA=typeof btoa=="function"?e=>btoa(e):av?e=>Buffer.from(e,"binary").toString("base64"):H6,JI=av?e=>Buffer.from(e).toString("base64"):e=>{let n=[];for(let r=0,i=e.length;r<i;r+=4096)n.push(Ms.apply(null,e.subarray(r,r+4096)));return RA(n.join(""))},pw=(e,t=!1)=>t?V6(JI(e)):JI(e),xne=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?Ms(192|t>>>6)+Ms(128|t&63):Ms(224|t>>>12&15)+Ms(128|t>>>6&63)+Ms(128|t&63)}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return Ms(240|t>>>18&7)+Ms(128|t>>>12&63)+Ms(128|t>>>6&63)+Ms(128|t&63)}},bne=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,Z6=e=>e.replace(bne,xne),gD=av?e=>Buffer.from(e,"utf8").toString("base64"):pD?e=>JI(pD.encode(e)):e=>RA(Z6(e)),e_=(e,t=!1)=>t?V6(gD(e)):gD(e),yD=e=>e_(e,!0),wne=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Ene=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),n=t-65536;return Ms((n>>>10)+55296)+Ms((n&1023)+56320);case 3:return Ms((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return Ms((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},W6=e=>e.replace(wne,Ene),K6=e=>{if(e=e.replace(/\s+/g,""),!vne.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,n="",r,i;for(let o=0;o<e.length;)t=Ab[e.charAt(o++)]<<18|Ab[e.charAt(o++)]<<12|(r=Ab[e.charAt(o++)])<<6|(i=Ab[e.charAt(o++)]),n+=r===64?Ms(t>>16&255):i===64?Ms(t>>16&255,t>>8&255):Ms(t>>16&255,t>>8&255,t&255);return n},MA=typeof atob=="function"?e=>atob(G6(e)):av?e=>Buffer.from(e,"base64").toString("binary"):K6,X6=av?e=>mD(Buffer.from(e,"base64")):e=>mD(MA(e).split("").map(t=>t.charCodeAt(0))),Y6=e=>X6(J6(e)),Sne=av?e=>Buffer.from(e,"base64").toString("utf8"):dD?e=>dD.decode(X6(e)):e=>W6(MA(e)),J6=e=>G6(e.replace(/[-_]/g,t=>t=="-"?"+":"/")),QI=e=>Sne(J6(e)),Tne=e=>{if(typeof e!="string")return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},Q6=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),ej=function(){const e=(t,n)=>Object.defineProperty(String.prototype,t,Q6(n));e("fromBase64",function(){return QI(this)}),e("toBase64",function(t){return e_(this,t)}),e("toBase64URI",function(){return e_(this,!0)}),e("toBase64URL",function(){return e_(this,!0)}),e("toUint8Array",function(){return Y6(this)})},tj=function(){const e=(t,n)=>Object.defineProperty(Uint8Array.prototype,t,Q6(n));e("toBase64",function(t){return pw(this,t)}),e("toBase64URI",function(){return pw(this,!0)}),e("toBase64URL",function(){return pw(this,!0)})},Cne=()=>{ej(),tj()},Ine={version:q6,VERSION:yne,atob:MA,atobPolyfill:K6,btoa:RA,btoaPolyfill:H6,fromBase64:QI,toBase64:e_,encode:e_,encodeURI:yD,encodeURL:yD,utob:Z6,btou:W6,decode:QI,isValid:Tne,fromUint8Array:pw,toUint8Array:Y6,extendString:ej,extendUint8Array:tj,extendBuiltins:Cne};var NA={exports:{}},t_=typeof Reflect=="object"?Reflect:null,_D=t_&&typeof t_.apply=="function"?t_.apply:function(t,n,r){return Function.prototype.apply.call(t,n,r)},mw;t_&&typeof t_.ownKeys=="function"?mw=t_.ownKeys:Object.getOwnPropertySymbols?mw=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:mw=function(t){return Object.getOwnPropertyNames(t)};function Pne(e){console&&console.warn&&console.warn(e)}var nj=Number.isNaN||function(t){return t!==t};function ni(){ni.init.call(this)}NA.exports=ni;NA.exports.once=kne;ni.EventEmitter=ni;ni.prototype._events=void 0;ni.prototype._eventsCount=0;ni.prototype._maxListeners=void 0;var vD=10;function IS(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(ni,"defaultMaxListeners",{enumerable:!0,get:function(){return vD},set:function(e){if(typeof e!="number"||e<0||nj(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");vD=e}});ni.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};ni.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||nj(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function rj(e){return e._maxListeners===void 0?ni.defaultMaxListeners:e._maxListeners}ni.prototype.getMaxListeners=function(){return rj(this)};ni.prototype.emit=function(t){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=t==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var u;if(n.length>0&&(u=n[0]),u instanceof Error)throw u;var l=new Error("Unhandled error."+(u?" ("+u.message+")":""));throw l.context=u,l}var p=o[t];if(p===void 0)return!1;if(typeof p=="function")_D(p,this,n);else for(var g=p.length,x=lj(p,g),r=0;r<g;++r)_D(x[r],this,n);return!0};function ij(e,t,n,r){var i,o,u;if(IS(n),o=e._events,o===void 0?(o=e._events=Object.create(null),e._eventsCount=0):(o.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),u=o[t]),u===void 0)u=o[t]=n,++e._eventsCount;else if(typeof u=="function"?u=o[t]=r?[n,u]:[u,n]:r?u.unshift(n):u.push(n),i=rj(e),i>0&&u.length>i&&!u.warned){u.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=u.length,Pne(l)}return e}ni.prototype.addListener=function(t,n){return ij(this,t,n,!1)};ni.prototype.on=ni.prototype.addListener;ni.prototype.prependListener=function(t,n){return ij(this,t,n,!0)};function Lne(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function oj(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=Lne.bind(r);return i.listener=n,r.wrapFn=i,i}ni.prototype.once=function(t,n){return IS(n),this.on(t,oj(this,t,n)),this};ni.prototype.prependOnceListener=function(t,n){return IS(n),this.prependListener(t,oj(this,t,n)),this};ni.prototype.removeListener=function(t,n){var r,i,o,u,l;if(IS(n),i=this._events,i===void 0)return this;if(r=i[t],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,r.listener||n));else if(typeof r!="function"){for(o=-1,u=r.length-1;u>=0;u--)if(r[u]===n||r[u].listener===n){l=r[u].listener,o=u;break}if(o<0)return this;o===0?r.shift():Ane(r,o),r.length===1&&(i[t]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",t,l||n)}return this};ni.prototype.off=ni.prototype.removeListener;ni.prototype.removeAllListeners=function(t){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[t]),this;if(arguments.length===0){var o=Object.keys(r),u;for(i=0;i<o.length;++i)u=o[i],u!=="removeListener"&&this.removeAllListeners(u);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(t,n[i]);return this};function sj(e,t,n){var r=e._events;if(r===void 0)return[];var i=r[t];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?One(i):lj(i,i.length)}ni.prototype.listeners=function(t){return sj(this,t,!0)};ni.prototype.rawListeners=function(t){return sj(this,t,!1)};ni.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):aj.call(e,t)};ni.prototype.listenerCount=aj;function aj(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}ni.prototype.eventNames=function(){return this._eventsCount>0?mw(this._events):[]};function lj(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function Ane(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function One(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function kne(e,t){return new Promise(function(n,r){function i(u){e.removeListener(t,o),r(u)}function o(){typeof e.removeListener=="function"&&e.removeListener("error",i),n([].slice.call(arguments))}uj(e,t,o,{once:!0}),t!=="error"&&Rne(e,i,{once:!0})})}function Rne(e,t,n){typeof e.on=="function"&&uj(e,"error",t,n)}function uj(e,t,n,r){if(typeof e.on=="function")r.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function i(o){r.once&&e.removeEventListener(t,i),n(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var Mne=NA.exports;const Nne=xd(Mne);var Cu,Si,io,yp,tx,_p,nx,eP,Ol,Sc,CE,cj,rx,tP,ix,nP,ox,rP,IE,hj,sx,iP;class Dne extends Map{constructor(n={}){super();cn(this,nx);cn(this,Ol);cn(this,CE);cn(this,rx);cn(this,ix);cn(this,ox);cn(this,IE);cn(this,sx);cn(this,Cu,0);cn(this,Si,new Map);cn(this,io,new Map);cn(this,yp,void 0);cn(this,tx,void 0);cn(this,_p,void 0);if(!(n.maxSize&&n.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof n.maxAge=="number"&&n.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");rn(this,yp,n.maxSize),rn(this,tx,n.maxAge||Number.POSITIVE_INFINITY),rn(this,_p,n.onEviction)}get __oldCache(){return Xe(this,io)}get(n){if(Xe(this,Si).has(n)){const r=Xe(this,Si).get(n);return En(this,rx,tP).call(this,n,r)}if(Xe(this,io).has(n)){const r=Xe(this,io).get(n);if(En(this,Ol,Sc).call(this,n,r)===!1)return En(this,IE,hj).call(this,n,r),r.value}}set(n,r,{maxAge:i=Xe(this,tx)}={}){const o=typeof i=="number"&&i!==Number.POSITIVE_INFINITY?Date.now()+i:void 0;return Xe(this,Si).has(n)?Xe(this,Si).set(n,{value:r,expiry:o}):En(this,ox,rP).call(this,n,{value:r,expiry:o}),this}has(n){return Xe(this,Si).has(n)?!En(this,Ol,Sc).call(this,n,Xe(this,Si).get(n)):Xe(this,io).has(n)?!En(this,Ol,Sc).call(this,n,Xe(this,io).get(n)):!1}peek(n){if(Xe(this,Si).has(n))return En(this,ix,nP).call(this,n,Xe(this,Si));if(Xe(this,io).has(n))return En(this,ix,nP).call(this,n,Xe(this,io))}delete(n){const r=Xe(this,Si).delete(n);return r&&by(this,Cu)._--,Xe(this,io).delete(n)||r}clear(){Xe(this,Si).clear(),Xe(this,io).clear(),rn(this,Cu,0)}resize(n){if(!(n&&n>0))throw new TypeError("`maxSize` must be a number greater than 0");const r=[...En(this,sx,iP).call(this)],i=r.length-n;i<0?(rn(this,Si,new Map(r)),rn(this,io,new Map),rn(this,Cu,r.length)):(i>0&&En(this,nx,eP).call(this,r.slice(0,i)),rn(this,io,new Map(r.slice(i))),rn(this,Si,new Map),rn(this,Cu,0)),rn(this,yp,n)}*keys(){for(const[n]of this)yield n}*values(){for(const[,n]of this)yield n}*[Symbol.iterator](){for(const n of Xe(this,Si)){const[r,i]=n;En(this,Ol,Sc).call(this,r,i)===!1&&(yield[r,i.value])}for(const n of Xe(this,io)){const[r,i]=n;Xe(this,Si).has(r)||En(this,Ol,Sc).call(this,r,i)===!1&&(yield[r,i.value])}}*entriesDescending(){let n=[...Xe(this,Si)];for(let r=n.length-1;r>=0;--r){const i=n[r],[o,u]=i;En(this,Ol,Sc).call(this,o,u)===!1&&(yield[o,u.value])}n=[...Xe(this,io)];for(let r=n.length-1;r>=0;--r){const i=n[r],[o,u]=i;Xe(this,Si).has(o)||En(this,Ol,Sc).call(this,o,u)===!1&&(yield[o,u.value])}}*entriesAscending(){for(const[n,r]of En(this,sx,iP).call(this))yield[n,r.value]}get size(){if(!Xe(this,Cu))return Xe(this,io).size;let n=0;for(const r of Xe(this,io).keys())Xe(this,Si).has(r)||n++;return Math.min(Xe(this,Cu)+n,Xe(this,yp))}get maxSize(){return Xe(this,yp)}entries(){return this.entriesAscending()}forEach(n,r=this){for(const[i,o]of this.entriesAscending())n.call(r,o,i,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}Cu=new WeakMap,Si=new WeakMap,io=new WeakMap,yp=new WeakMap,tx=new WeakMap,_p=new WeakMap,nx=new WeakSet,eP=function(n){if(typeof Xe(this,_p)=="function")for(const[r,i]of n)Xe(this,_p).call(this,r,i.value)},Ol=new WeakSet,Sc=function(n,r){return typeof r.expiry=="number"&&r.expiry<=Date.now()?(typeof Xe(this,_p)=="function"&&Xe(this,_p).call(this,n,r.value),this.delete(n)):!1},CE=new WeakSet,cj=function(n,r){if(En(this,Ol,Sc).call(this,n,r)===!1)return r.value},rx=new WeakSet,tP=function(n,r){return r.expiry?En(this,CE,cj).call(this,n,r):r.value},ix=new WeakSet,nP=function(n,r){const i=r.get(n);return En(this,rx,tP).call(this,n,i)},ox=new WeakSet,rP=function(n,r){Xe(this,Si).set(n,r),by(this,Cu)._++,Xe(this,Cu)>=Xe(this,yp)&&(rn(this,Cu,0),En(this,nx,eP).call(this,Xe(this,io)),rn(this,io,Xe(this,Si)),rn(this,Si,new Map))},IE=new WeakSet,hj=function(n,r){Xe(this,io).delete(n),En(this,ox,rP).call(this,n,r)},sx=new WeakSet,iP=function*(){for(const n of Xe(this,io)){const[r,i]=n;Xe(this,Si).has(r)||En(this,Ol,Sc).call(this,r,i)===!1&&(yield n)}for(const n of Xe(this,Si)){const[r,i]=n;En(this,Ol,Sc).call(this,r,i)===!1&&(yield n)}};function zne(){return typeof self<"u"?fetch.bind(self):typeof global<"u"&&global.fetch?global.fetch:null}class Fne{constructor(){this._apiKey="",this._fetch=zne(),this.tileCacheSize=200}set apiKey(t){this._apiKey=t}get apiKey(){return this._apiKey}set fetch(t){this._fetch=t}get fetch(){return this._fetch}}const qo=new Fne,wx={AUTO:"auto",ALBANIAN:"sq",ARABIC:"ar",ARMENIAN:"hy",AZERBAIJANI:"az",BELORUSSIAN:"be",BOSNIAN:"bs",BRETON:"br",BULGARIAN:"bg",CATALAN:"ca",CHINESE:"zh",CROATIAN:"hr",CZECH:"cs",DANISH:"da",DUTCH:"nl",ENGLISH:"en",ESPERANTO:"eo",ESTONIAN:"et",FINNISH:"fi",FRENCH:"fr",FRISIAN:"fy",GEORGIAN:"ka",GERMAN:"de",GREEK:"el",HEBREW:"he",HUNGARIAN:"hu",ICELANDIC:"is",IRISH:"ga",ITALIAN:"it",JAPANESE:"ja",KANNADA:"kn",KAZAKH:"kk",KOREAN:"ko",ROMAN_LATIN:"la",LATVIAN:"lv",LITHUANIAN:"lt",LUXEMBOURGISH:"lb",MACEDONIAN:"mk",MALTESE:"mt",NORWEGIAN:"no",POLISH:"pl",PORTUGUESE:"pt",ROMANIAN:"ro",ROMANSH:"rm",RUSSIAN:"ru",SCOTTISH_GAELIC:"gd",SERBIAN_CYRILLIC:"sr",SLOVAK:"sk",SLOVENE:"sl",SPANISH:"es",SWEDISH:"sv",THAI:"th",TURKISH:"tr",UKRAINIAN:"uk",WELSH:"cy"},Bne=new Set(Object.values(wx));function fj(){if(typeof navigator>"u")return Intl.DateTimeFormat().resolvedOptions().locale.split("-")[0];const e=Array.from(new Set(navigator.languages.map(t=>t.split("-")[0]))).filter(t=>Bne.has(t));return e.length?e[0]:wx.ENGLISH}async function Jc(e,t={}){if(qo.fetch===null)throw new Error("The fetch function was not found. If on NodeJS < 18 please specify the fetch function with config.fetch");if(new URL(e).searchParams.get("key").trim()==="")throw new Error("The MapTiler Cloud API key is missing. Set it in `config.apiKey` or get one for free at https://maptiler.com");return qo.fetch(e,t)}const nu={maptilerApiURL:"https://api.maptiler.com/",mapStyle:"streets-v2"};Object.freeze(nu);class Qu extends Error{constructor(t,n=""){super(`Call to enpoint ${t.url} failed with the status code ${t.status}. ${n}`),this.res=t}}const PS={400:"Query too long / Invalid parameters",403:"Key is missing, invalid or restricted"};function dj(e,t){const{language:n}=t;if(n==null)return;const r=Array.from(new Set((Array.isArray(n)?n:[n]).map(i=>i===wx.AUTO?fj():i))).join(",");e.set("language",r)}function pj(e,t){const{apiKey:n,limit:r,types:i,excludeTypes:o}=t;e.set("key",n??qo.apiKey),r!=null&&e.set("limit",String(r)),i!=null&&e.set("types",i.join(",")),o!=null&&e.set("excludeTypes",String(o)),dj(e,t)}function mj(e,t){pj(e,t);const{bbox:n,proximity:r,country:i,fuzzyMatch:o,autocomplete:u}=t;n!=null&&e.set("bbox",n.join(",")),r!=null&&e.set("proximity",r==="ip"?r:r.join(",")),i!=null&&e.set("country",i.join(",")),o!=null&&e.set("fuzzyMatch",o?"true":"false"),u!=null&&e.set("autocomplete",u?"true":"false")}async function jne(e,t={}){if(typeof e!="string"||e.trim().length===0)throw new Error("The query must be a non-empty string");const n=new URL(`geocoding/${encodeURIComponent(e)}.json`,nu.maptilerApiURL),{searchParams:r}=n;mj(r,t);const i=n.toString(),o=await Jc(i);if(!o.ok)throw new Qu(o,PS[o.status]??"");return await o.json()}async function $ne(e,t={}){if(!Array.isArray(e)||e.length<2)throw new Error("The position must be an array of form [lng, lat].");const n=new URL(`geocoding/${e[0]},${e[1]}.json`,nu.maptilerApiURL);pj(n.searchParams,t);const r=n.toString(),i=await Jc(r);if(!i.ok)throw new Qu(i,PS[i.status]??"");return await i.json()}async function Une(e,t={}){const n=new URL(`geocoding/${e}.json`,nu.maptilerApiURL);n.searchParams.set("key",t.apiKey??qo.apiKey),dj(n.searchParams,t);const r=n.toString(),i=await Jc(r);if(!i.ok)throw new Qu(i,PS[i.status]??"");return await i.json()}async function qne(e,t={}){if(!e.length)return[];const n=e.map(p=>encodeURIComponent(p)).join(";"),r=new URL(`geocoding/${n}.json`,nu.maptilerApiURL),{searchParams:i}=r;mj(i,t);const o=r.toString(),u=await Jc(o);if(!u.ok)throw new Qu(u,PS[u.status]??"");const l=await u.json();return e.length===1?[l]:l}const Vne={forward:jne,reverse:$ne,byId:Une,batch:qne,language:wx},xD={403:"Key is missing, invalid or restricted"};async function Gne(e={}){const t=new URL("geolocation/ip.json",nu.maptilerApiURL);t.searchParams.set("key",e.apiKey??qo.apiKey);const n=t.toString(),r=await Jc(n);if(!r.ok)throw new Qu(r,r.status in xD?xD[r.status]:"");return await r.json()}const oP={info:Gne},sE={403:"Key is missing, invalid or restricted"};async function Hne(e,t={}){if(typeof e!="string"||e.trim().length===0)throw new Error("The query must be a non-empty string");const n=new URL(`coordinates/search/${e}.json`,nu.maptilerApiURL);n.searchParams.set("key",t.apiKey??qo.apiKey),"limit"in t&&n.searchParams.set("limit",t.limit.toString()),"transformations"in t&&n.searchParams.set("transformations",t.transformations.toString()),"exports"in t&&n.searchParams.set("exports",t.exports.toString());const r=n.toString(),i=await Jc(r);if(!i.ok)throw new Qu(i,i.status in sE?sE[i.status]:"");return await i.json()}async function Zne(e,t={}){const n=(Array.isArray(e[0])?e:[e]).map(l=>`${l[0]},${l[1]}`).join(";"),r=new URL(`coordinates/transform/${n}.json`,nu.maptilerApiURL);r.searchParams.set("key",t.apiKey??qo.apiKey),"sourceCrs"in t&&r.searchParams.set("s_srs",t.sourceCrs.toString()),"targetCrs"in t&&r.searchParams.set("t_srs",t.targetCrs.toString()),"operations"in t&&r.searchParams.set("ops",(Array.isArray(t.operations)?t.operations:[t.operations]).join("|"));const i=r.toString(),o=await Jc(i);if(!o.ok)throw new Qu(o,o.status in sE?sE[o.status]:"");return await o.json()}const Wne={search:Hne,transform:Zne},bD={403:"Key is missing, invalid or restricted"};async function Kne(e,t={}){if(typeof e!="string"||e.trim().length===0)throw new Error("The data ID must be a non-empty string");const n=new URL(`data/${encodeURIComponent(e)}/features.json`,nu.maptilerApiURL);n.searchParams.set("key",t.apiKey??qo.apiKey);const r=n.toString(),i=await Jc(r);if(!i.ok)throw new Qu(i,i.status in bD?bD[i.status]:"");return await i.json()}const Xne={get:Kne};function DA(e){const t=/^maptiler:\/\/(.*)/;let n;const r=e.trim();let i;return r.startsWith("http://")||r.startsWith("https://")?i=r:(n=t.exec(r))!==null?i=`https://api.maptiler.com/maps/${n[1]}/style.json`:i=`https://api.maptiler.com/maps/${r}/style.json`,i}class LS{constructor(t,n,r,i,o,u){this.name=t,this.variantType=n,this.id=r,this.referenceStyle=i,this.description=o,this.imageURL=u}getName(){return this.name}getFullName(){return`${this.referenceStyle.getName()} ${this.name}`}getType(){return this.variantType}getId(){return this.id}getDescription(){return this.description}getReferenceStyle(){return this.referenceStyle}hasVariant(t){return this.referenceStyle.hasVariant(t)}getVariant(t){return this.referenceStyle.getVariant(t)}getVariants(){return this.referenceStyle.getVariants().filter(t=>t!==this)}getImageURL(){return this.imageURL}getExpandedStyleURL(){return DA(this.getId())}}class AS{constructor(t,n){this.name=t,this.id=n,this.variants={},this.orderedVariants=[]}getName(){return this.name}getId(){return this.id}addVariant(t){this.variants[t.getType()]=t,this.orderedVariants.push(t)}hasVariant(t){return t in this.variants}getVariant(t){return t in this.variants?this.variants[t]:this.orderedVariants[0]}getVariants(){return Object.values(this.variants)}getDefaultVariant(){return this.orderedVariants[0]}}const C1=[{referenceStyleID:"STREETS",name:"Streets",description:"",variants:[{id:"streets-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"streets-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"streets-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"streets-v2-night",name:"Night",variantType:"NIGHT",description:"",imageURL:""},{id:"streets-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""}]},{referenceStyleID:"OUTDOOR",name:"Outdoor",description:"",variants:[{id:"outdoor-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"outdoor-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""}]},{referenceStyleID:"WINTER",name:"Winter",description:"",variants:[{id:"winter-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"winter-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""}]},{referenceStyleID:"SATELLITE",name:"Satellite",description:"",variants:[{id:"satellite",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"HYBRID",name:"Hybrid",description:"",variants:[{id:"hybrid",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"BASIC",name:"Basic",description:"",variants:[{id:"basic-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"basic-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"basic-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"BRIGHT",name:"Bright",description:"",variants:[{id:"bright-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"bright-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"bright-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"bright-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""}]},{referenceStyleID:"OPENSTREETMAP",name:"OpenStreetMap",description:"",variants:[{id:"openstreetmap",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"TOPO",name:"Topo",description:"",variants:[{id:"topo-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"topo-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"topo-v2-shiny",name:"Shiny",variantType:"SHINY",description:"",imageURL:""},{id:"topo-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""},{id:"topo-v2-topographique",name:"Topographique",variantType:"TOPOGRAPHIQUE",description:"",imageURL:""}]},{referenceStyleID:"VOYAGER",name:"Voyager",description:"",variants:[{id:"voyager-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"voyager-v2-darkmatter",name:"Darkmatter",variantType:"DARK",description:"",imageURL:""},{id:"voyager-v2-positron",name:"Positron",variantType:"LIGHT",description:"",imageURL:""},{id:"voyager-v2-vintage",name:"Vintage",variantType:"VINTAGE",description:"",imageURL:""}]},{referenceStyleID:"TONER",name:"Toner",description:"",variants:[{id:"toner-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"toner-v2-background",name:"Background",variantType:"BACKGROUND",description:"",imageURL:""},{id:"toner-v2-lite",name:"Lite",variantType:"LITE",description:"",imageURL:""},{id:"toner-v2-lines",name:"Lines",variantType:"LINES",description:"",imageURL:""}]},{referenceStyleID:"DATAVIZ",name:"Dataviz",description:"",variants:[{id:"dataviz",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"dataviz-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"dataviz-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"BACKDROP",name:"Backdrop",description:"",variants:[{id:"backdrop",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"backdrop-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"backdrop-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"OCEAN",name:"Ocean",description:"",variants:[{id:"ocean",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]}];function Yne(e){return new Proxy(e,{get(t,n,r){return t.hasVariant(n)?t.getVariant(n):n.toString().toUpperCase()===n?e.getDefaultVariant():Reflect.get(t,n,r)}})}function Jne(){const e={};for(let t=0;t<C1.length;t+=1){const n=C1[t],r=Yne(new AS(n.name,n.referenceStyleID));for(let i=0;i<n.variants.length;i+=1){const o=n.variants[i],u=new LS(o.name,o.variantType,o.id,r,o.description,o.imageURL);r.addVariant(u)}e[n.referenceStyleID]=r}return e}function OS(e){if(!e)return kS[C1[0].referenceStyleID].getDefaultVariant().getId();if(typeof e=="string"||e instanceof String)return e.trim().toLowerCase();if(e instanceof LS)return e.getId();if(e instanceof AS)return e.getDefaultVariant().getId()}const kS=Jne();function Qne(e){const t=[];function n(o){(o.type==="LineString"||o.type==="MultiLineString")&&t.push(o)}function r(o){o.geometry&&n(o.geometry)}function i(o){for(const u of o.features)u.type==="Feature"?r(u):u.type==="FeatureCollection"&&i(u)}return e.type==="Feature"?r(e):e.type==="FeatureCollection"?i(e):n(e),t}function ere(e,t,n){let r=t[0],i=t[1],o=n[0]-r,u=n[1]-i;if(o!==0||u!==0){const l=((e[0]-r)*o+(e[1]-i)*u)/(o*o+u*u);l>1?(r=n[0],i=n[1]):l>0&&(r+=o*l,i+=u*l)}return o=e[0]-r,u=e[1]-i,o*o+u*u}function sP(e,t,n,r,i){let o=r,u;for(let l=t+1;l<n;l++){const p=ere(e[l],e[t],e[n]);p>o&&(u=l,o=p)}o>r&&(u-t>1&&sP(e,t,u,r,i),i.push(e[u]),n-u>1&&sP(e,u,n,r,i))}function tre(e,t){const n=e.length-1,r=[e[0]];return sP(e,0,n,t,r),r.push(e[n]),r}function nre(e,t){if(e.length<=2)return e;const n=t!==void 0?t*t:1;return tre(e,n)}const gj={extractLineStrings:Qne,simplify:nre};function zA(e,t=!0){let n=`${e[0]},${e[1]}`;return e.length===3&&t&&(n+=`,${e[2]}`),n}function FA(e,t=3e3){let n=e.map(o=>o.join(",")).join("|"),r=5e-6;const i=1e-5;for(;n.length>t;)n=gj.simplify(e,r).map(u=>`${u[0]},${u[1]}`).join("|"),r+=i;return n}function rre(e,t,n={}){const r=OS(n.style),i=n.hiDPI?"@2x":"",o=n.format??"png";let u=~~(n.width??1024),l=~~(n.height??1024);n.hiDPI&&(u=~~(u/2),l=~~(l/2));const p=new URL(`maps/${encodeURIComponent(r)}/static/${e[0]},${e[1]},${t}/${u}x${l}${i}.${o}`,nu.maptilerApiURL);if("attribution"in n&&p.searchParams.set("attribution",n.attribution.toString()),"markers"in n){let g="";const x="markerIcon"in n;x&&(g+=`icon:${n.markerIcon}|`),x&&"markerAnchor"in n&&(g+=`anchor:${n.markerAnchor}|`),x&&n.hiDPI&&(g+="scale:2|");const y=Array.isArray(n.markers[0])?n.markers:[n.markers];g+=y.map(_=>zA(_,!x)).join("|"),p.searchParams.set("markers",g)}if("path"in n){let g="";if(g+=`fill:${n.pathFillColor??"none"}|`,"pathStrokeColor"in n&&(g+=`stroke:${n.pathStrokeColor}|`),"pathWidth"in n){const x=n.pathWidth/(n.hiDPI?2:1);g+=`width:${x.toString()}|`}g+=FA(n.path),p.searchParams.set("path",g)}return p.searchParams.set("key",n.apiKey??qo.apiKey),p.toString()}function ire(e,t={}){const n=OS(t.style),r=t.hiDPI?"@2x":"",i=t.format??"png";let o=~~(t.width??1024),u=~~(t.height??1024);t.hiDPI&&(o=~~(o/2),u=~~(u/2));const l=new URL(`maps/${encodeURIComponent(n)}/static/${e[0]},${e[1]},${e[2]},${e[3]}/${o}x${u}${r}.${i}`,nu.maptilerApiURL);if("attribution"in t&&l.searchParams.set("attribution",t.attribution.toString()),"padding"in t&&l.searchParams.set("padding",t.padding.toString()),"markers"in t){let p="";const g="markerIcon"in t;g&&(p+=`icon:${t.markerIcon}|`),g&&"markerAnchor"in t&&(p+=`anchor:${t.markerAnchor}|`),g&&t.hiDPI&&(p+="scale:2|");const x=Array.isArray(t.markers[0])?t.markers:[t.markers];p+=x.map(y=>zA(y,!g)).join("|"),l.searchParams.set("markers",p)}if("path"in t){let p="";if(p+=`fill:${t.pathFillColor??"none"}|`,"pathStrokeColor"in t&&(p+=`stroke:${t.pathStrokeColor}|`),"pathWidth"in t){const g=t.pathWidth/(t.hiDPI?2:1);p+=`width:${g.toString()}|`}p+=FA(t.path),l.searchParams.set("path",p)}return l.searchParams.set("key",t.apiKey??qo.apiKey),l.toString()}function ore(e={}){if(!("markers"in e)&&!("path"in e))throw new Error("Automatic static maps require markers and/or path to be created.");const t=OS(e.style),n=e.hiDPI?"@2x":"",r=e.format??"png";let i=~~(e.width??1024),o=~~(e.height??1024);e.hiDPI&&(i=~~(i/2),o=~~(o/2));const u=new URL(`maps/${encodeURIComponent(t)}/static/auto/${i}x${o}${n}.${r}`,nu.maptilerApiURL);if("attribution"in e&&u.searchParams.set("attribution",e.attribution.toString()),"padding"in e&&u.searchParams.set("padding",e.padding.toString()),"markers"in e){let l="";const p="markerIcon"in e;p&&(l+=`icon:${e.markerIcon}|`),p&&"markerAnchor"in e&&(l+=`anchor:${e.markerAnchor}|`),p&&e.hiDPI&&(l+="scale:2|");const g=Array.isArray(e.markers[0])?e.markers:[e.markers];l+=g.map(x=>zA(x,!p)).join("|"),u.searchParams.set("markers",l)}if("path"in e){let l="";if(l+=`fill:${e.pathFillColor??"none"}|`,"pathStrokeColor"in e&&(l+=`stroke:${e.pathStrokeColor}|`),"pathWidth"in e){const p=e.pathWidth/(e.hiDPI?2:1);l+=`width:${p.toString()}|`}l+=FA(e.path),u.searchParams.set("path",l)}return u.searchParams.set("key",e.apiKey??qo.apiKey),u.toString()}const sre={centered:rre,bounded:ire,automatic:ore},RS=63710088e-1,yj=2*Math.PI*RS;function _j(e){return(180+e)/360}function vj(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function xj(e){const t=Ej(e);return[_j(t[0]),vj(t[1])]}function bj(e){return e*360-180}function wj(e){const t=180-e*360;return 360/Math.PI*Math.atan(Math.exp(t*Math.PI/180))-90}function are(e){return[bj(e[0]),wj(e[1])]}function BA(e,t){const n=Math.PI/180,r=e[1]*n,i=t[1]*n,o=Math.sin(r)*Math.sin(i)+Math.cos(r)*Math.cos(i)*Math.cos((t[0]-e[0])*n);return RS*Math.acos(Math.min(o,1))}function lre(e){const t=Array(e.length);t[0]=0;const n=t.length;for(let r=1;r<n;r++)t[r]=BA(e[r-1],e[r])+t[r-1];return t}function Ej(e){const t=e[0],n=e[1],r=360,i=((t+180)%r+r)%r-180;return[i===-180?180:i,n]}function Sj(e){return yj*Math.cos(e*Math.PI/180)}function Tj(e,t,n=!0){const r=2**t,i=[e[0]*r,e[1]*r];return n?[~~i[0],~~i[1]]:i}function ure(e,t,n=!0){const r=xj(e);return Tj(r,t,n)}function I0(e){return e*Math.PI/180}function aP(e){return e*180/Math.PI}function cre(e,t,n){const r=BA(e,t),i=I0(e[0]),o=I0(e[1]),u=I0(t[0]),l=I0(t[1]),p=r/RS,g=Math.sin((1-n)*p)/Math.sin(p),x=Math.sin(n*p)/Math.sin(p),y=g*Math.cos(o)*Math.cos(i)+x*Math.cos(l)*Math.cos(u),_=g*Math.cos(o)*Math.sin(i)+x*Math.cos(l)*Math.sin(u),T=g*Math.sin(o)+x*Math.sin(l),A=Math.atan2(T,Math.sqrt(y*y+_*_)),O=Math.atan2(_,y);return[aP(O),aP(A)]}const jA={EARTH_RADIUS:RS,EARTH_CIRCUMFERENCE:yj,longitudeToMercatorX:_j,latitudeToMercatorY:vj,wgs84ToMercator:xj,mercatorXToLongitude:bj,mercatorYToLatitude:wj,mercatorToWgs84:are,haversineDistanceWgs84:BA,wrapWgs84:Ej,circumferenceAtLatitude:Sj,mercatorToTileIndex:Tj,wgs84ToTileIndex:ure,toRadians:I0,toDegrees:aP,haversineIntermediateWgs84:cre,haversineCumulatedDistanceWgs84:lre};let G2=null;function $A(){return G2||(G2=new Dne({maxSize:qo.tileCacheSize})),G2}async function Cj(e){const t=new Blob([e]),n=await createImageBitmap(t),r=document.createElement("canvas"),i=r.getContext("2d");r.width=n.width,r.height=n.height,i.drawImage(n,0,0);const o=i.getImageData(0,0,r.width,r.height);return{pixels:o.data,width:r.width,height:r.height,components:o.data.length/(r.width*r.height)}}function UA(){if(qo.bufferToPixelData)return qo.bufferToPixelData;if(typeof window<"u")return Cj;throw new Error("An image file buffer to pixel data parser is necessary. Specify it in `config.bufferToPixelData`")}const hre="tiles/terrain-rgb-v2/tiles.json";let Yf=null;const qA={403:"Key is missing, invalid or restricted"};async function Ij(e){const t=new URL(hre,nu.maptilerApiURL);t.searchParams.set("key",e);const n=t.toString(),r=await Jc(n);if(r.ok)return Yf=await r.json(),Yf;if(!r.ok)throw new Qu(r,qA[r.status]??"")}async function fre(e,t={}){const n=t.apiKey??qo.apiKey;Yf||await Ij(n);const r=Yf.maxzoom;let i=~~(t.zoom??r);(i>r||i<0)&&(i=r);const o=jA.wgs84ToTileIndex(e,i,!1),u=~~o[0],l=~~o[1];if(!Yf.tiles.length)throw new Error("Terrain tileJSON tile list is empty.");const p=`terrain_${i.toString()}_${u.toString()}_${l.toString()}`;let g;const x=$A();if(x.has(p))g=x.get(p);else{const R=Yf.tiles[0].replace("{x}",u.toString()).replace("{y}",l.toString()).replace("{z}",i.toString()),z=await Jc(R);if(!z.ok)throw new Qu(z,qA[z.status]??"");const D=await z.arrayBuffer();g=await UA()(D),x.set(p,g)}const y=~~(g.width*(o[0]%1)),T=(~~(g.height*(o[1]%1))*g.width+y)*g.components,A=g.pixels[T],O=g.pixels[T+1],N=g.pixels[T+2],k=-1e4+(A*256*256+O*256+N)*.1;return[e[0],e[1],k]}async function VA(e,t={}){const n=t.apiKey??qo.apiKey;Yf||await Ij(n);const r=UA(),i=Yf.tiles[0],o=$A(),u=Yf.maxzoom;let l=~~(t.zoom??u);(l>u||l<0)&&(l=u);const p=e.map(D=>jA.wgs84ToTileIndex(D,l,!1)),x=p.map(D=>[~~D[0],~~D[1]]).map(D=>`terrain_${l.toString()}_${D[0].toString()}_${D[1].toString()}`),y=Array.from(new Set(x.filter(D=>!o.has(D)))).map(D=>D.split("_").slice(1)),T=y.map(D=>i.replace("{x}",D[1].toString()).replace("{y}",D[2].toString()).replace("{z}",D[0].toString())).map(D=>Jc(D)),O=(await Promise.allSettled(T)).map(D=>D.status==="fulfilled"?D.value:null).filter(D=>D),N=O.filter(D=>!D.ok);if(O.length!==T.length)throw new Error("Some tiles could not be fetched.");if(N.length)throw new Qu(N[0],qA[N[0].status]??"");const k=await Promise.all(O.map(D=>D.arrayBuffer()));if(!k.every(D=>D.byteLength>0))throw new Error("Some tiles are not available.");(await Promise.all(k.map(D=>r(D)))).forEach((D,U)=>{const q=y[U],G=`terrain_${q[0].toString()}_${q[1].toString()}_${q[2].toString()}`;o.set(G,D)});const z=e.map((D,U)=>{const q=x[U],G=p[U],H=o.get(q),J=Math.min(Math.round(H.width*(G[0]%1)),H.width-1),X=(Math.min(Math.round(H.height*(G[1]%1)),H.height-1)*H.width+J)*H.components,ee=H.pixels[X],ue=H.pixels[X+1],oe=H.pixels[X+2],we=-1e4+(ee*256*256+ue*256+oe)*.1;return[D[0],D[1],~~(we*1e3)/1e3]});if(t.smoothingKernelSize){const D=~~(t.smoothingKernelSize/2)*2+1,U=z.map(G=>G[2]),q=~~(D/2);for(let G=q;G<U.length-q-1;G+=1){let H=0;for(let J=0;J<D;J+=1){const Y=U[G-q+J];H+=Y}H/=D,z[G][2]=H}}return z}async function dre(e,t={}){if(e.type!=="LineString")throw new Error("The provided object is not a GeoJSON LineString");const n=structuredClone(e),r=await VA(n.coordinates,t);return n.coordinates=r,n}async function pre(e,t={}){if(e.type!=="MultiLineString")throw new Error("The provided object is not a GeoJSON MultiLineString");const n=structuredClone(e),r=n.coordinates.map(p=>p.length),i=n.coordinates.flat(),o=await VA(i,t),u=[];let l=0;for(const p of r)u.push(o.slice(l,l+p)),l+=p;return n.coordinates=u,n}const mre={at:fre,batch:VA,fromLineString:dre,fromMultiLineString:pre};let Ob;const gre=new Uint8Array(16);function yre(){if(!Ob&&(Ob=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ob))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ob(gre)}const Ls=[];for(let e=0;e<256;++e)Ls.push((e+256).toString(16).slice(1));function _re(e,t=0){return Ls[e[t+0]]+Ls[e[t+1]]+Ls[e[t+2]]+Ls[e[t+3]]+"-"+Ls[e[t+4]]+Ls[e[t+5]]+"-"+Ls[e[t+6]]+Ls[e[t+7]]+"-"+Ls[e[t+8]]+Ls[e[t+9]]+"-"+Ls[e[t+10]]+Ls[e[t+11]]+Ls[e[t+12]]+Ls[e[t+13]]+Ls[e[t+14]]+Ls[e[t+15]]}const vre=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),wD={randomUUID:vre};function xre(e,t,n){if(wD.randomUUID&&!t&&!e)return wD.randomUUID();e=e||{};const r=e.random||(e.rng||yre)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(let i=0;i<16;++i)t[n+i]=r[i];return t}return _re(r)}var bre="@maptiler/sdk",wre="2.0.3",Ere="The Javascript & TypeScript map SDK tailored for MapTiler Cloud",Sre="dist/maptiler-sdk.mjs",Tre="dist/maptiler-sdk.d.ts",Cre="dist/maptiler-sdk.css",Ire="module",Pre={".":{import:"./dist/maptiler-sdk.mjs",types:"./dist/maptiler-sdk.d.ts"},"./dist/maptiler-sdk.css":{import:"./dist/maptiler-sdk.css"},"./style.css":{import:"./dist/maptiler-sdk.css"}},Lre=["maptiler","map","sdk","webmap","cloud","webGL","maplibre"],Are="https://docs.maptiler.com/sdk-js/",Ore="BSD-3-Clause",kre={type:"git",url:"https://github.com/maptiler/maptiler-sdk-js.git"},Rre={build:"rm -rf dist/* && NODE_ENV=production rollup -c",dev:"rm -rf dist/* && NODE_ENV=development rollup -c -w","format:fix":'prettier --write "src/**/*.{js,ts,tsx}"',format:'prettier -c "src/**/*.{js,ts,tsx}"',"lint:fix":'eslint --fix "src/**/*.{js,ts}"',lint:'eslint "src/**/*.{js,ts}"',doc:"rm -rf docs/* && typedoc --out docs && cp -r images docs/",prepare:"npm run format:fix && npm run lint:fix && npm run build && npm run test","test:dev":"vitest dev",test:"vitest run"},Mre="MapTiler",Nre={"@rollup/plugin-commonjs":"^24.1.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.2","@types/uuid":"^9.0.2","@types/xmldom":"^0.1.31","@typescript-eslint/eslint-plugin":"^6.9.0","@typescript-eslint/parser":"^6.9.0",eslint:"^8.52.0","eslint-config-prettier":"^9.0.0","eslint-plugin-prettier":"^5.0.1",prettier:"^3.0.3",rollup:"^3.20.6","rollup-plugin-copy-merge":"^1.0.0","rollup-plugin-dts":"^5.3.0","rollup-plugin-esbuild":"^5.0.0","rollup-plugin-node-globals":"^1.4.0","rollup-plugin-shell":"^1.0.9","rollup-plugin-string":"^3.0.0","rollup-plugin-swc":"^0.2.1",serve:"^14.2.0",terser:"^5.17.1",typedoc:"^0.24.8",typescript:"^5.1.6",vitest:"^0.34.2",xmldom:"^0.6.0"},Dre={"@maptiler/client":"^1.8.1",events:"^3.3.0","js-base64":"^3.7.4","maplibre-gl":"^4.1.3",uuid:"^9.0.0"},zre={name:bre,version:wre,description:Ere,module:Sre,types:Tre,style:Cre,type:Ire,exports:Pre,keywords:Lre,homepage:Are,license:Ore,repository:kre,scripts:Rre,author:Mre,devDependencies:Nre,dependencies:Dre};const Ir={VISITOR:"visitor",VISITOR_ENGLISH:"visitor_en",STYLE:"style",AUTO:"auto",STYLE_LOCK:"style_lock",LATIN:"name:latin",NON_LATIN:"name:nonlatin",LOCAL:"name",INTERNATIONAL:"name_int",ALBANIAN:"name:sq",AMHARIC:"name:am",ARABIC:"name:ar",ARMENIAN:"name:hy",AZERBAIJANI:"name:az",BASQUE:"name:eu",BELORUSSIAN:"name:be",BENGALI:"name:bn",BOSNIAN:"name:bs",BRETON:"name:br",BULGARIAN:"name:bg",CATALAN:"name:ca",CHINESE:"name:zh",TRADITIONAL_CHINESE:"name:zh-Hant",SIMPLIFIED_CHINESE:"name:zh-Hans",CORSICAN:"name:co",CROATIAN:"name:hr",CZECH:"name:cs",DANISH:"name:da",DUTCH:"name:nl",ENGLISH:"name:en",ESPERANTO:"name:eo",ESTONIAN:"name:et",FINNISH:"name:fi",FRENCH:"name:fr",FRISIAN:"name:fy",GEORGIAN:"name:ka",GERMAN:"name:de",GREEK:"name:el",HEBREW:"name:he",HINDI:"name:hi",HUNGARIAN:"name:hu",ICELANDIC:"name:is",INDONESIAN:"name:id",IRISH:"name:ga",ITALIAN:"name:it",JAPANESE:"name:ja",JAPANESE_HIRAGANA:"name:ja-Hira",JAPANESE_KANA:"name:ja_kana",JAPANESE_LATIN:"name:ja_rm",JAPANESE_2018:"name:ja-Latn",KANNADA:"name:kn",KAZAKH:"name:kk",KOREAN:"name:ko",KOREAN_LATIN:"name:ko-Latn",KURDISH:"name:ku",ROMAN_LATIN:"name:la",LATVIAN:"name:lv",LITHUANIAN:"name:lt",LUXEMBOURGISH:"name:lb",MACEDONIAN:"name:mk",MALAYALAM:"name:ml",MALTESE:"name:mt",NORWEGIAN:"name:no",OCCITAN:"name:oc",PERSIAN:"name:fa",POLISH:"name:pl",PORTUGUESE:"name:pt",PUNJABI:"name:pa",WESTERN_PUNJABI:"name:pnb",ROMANIAN:"name:ro",ROMANSH:"name:rm",RUSSIAN:"name:ru",SCOTTISH_GAELIC:"name:gd",SERBIAN_CYRILLIC:"name:sr",SERBIAN_LATIN:"name:sr-Latn",SLOVAK:"name:sk",SLOVENE:"name:sl",SPANISH:"name:es",SWEDISH:"name:sv",TAMIL:"name:ta",TELUGU:"name:te",THAI:"name:th",TURKISH:"name:tr",UKRAINIAN:"name:uk",URDU:"name:ur",VIETNAMIAN_LATIN:"name:vi",WELSH:"name:cy"},Fre=new Set(Object.values(Ir));function lP(e){return Fre.has(e)}const Bre=new Set(Object.values(Ir));function uP(){if(typeof navigator>"u")return`name:${Intl.DateTimeFormat().resolvedOptions().locale.split("-")[0]}`;const e=Array.from(new Set(navigator.languages.map(t=>`name:${t.split("-")[0]}`))).filter(t=>Bre.has(t));return e.length?e[0]:Ir.LOCAL}const Qa={maptilerLogoURL:"https://api.maptiler.com/resources/logo.svg",maptilerURL:"https://www.maptiler.com/",maptilerApiHost:"api.maptiler.com",rtlPluginURL:"https://cdn.maptiler.com/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.min.js",primaryLanguage:Ir.STYLE,secondaryLanguage:Ir.LOCAL,terrainSourceURL:"https://api.maptiler.com/tiles/terrain-rgb-v2/tiles.json",terrainSourceId:"maptiler-terrain"};Object.freeze(Qa);var jre=Object.defineProperty,$re=(e,t,n)=>t in e?jre(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Sy=(e,t,n)=>($re(e,typeof t!="symbol"?t+"":t,n),n);const Pj=xre();class Lj extends Nne{constructor(){super(),Sy(this,"primaryLanguage",Qa.primaryLanguage),Sy(this,"secondaryLanguage"),Sy(this,"session",!0),Sy(this,"caching",!0),Sy(this,"_unit","metric"),Sy(this,"_apiKey","")}set unit(t){this._unit=t,this.emit("unit",t)}get unit(){return this._unit}set apiKey(t){this._apiKey=t,qo.apiKey=t,this.emit("apiKey",t)}get apiKey(){return this._apiKey}set fetch(t){qo.fetch=t}get fetch(){return qo.fetch}}const ns=new Lj;class Aj extends xn.LogoControl{onAdd(t){return super.onAdd(t)}}var Ure=Object.defineProperty,qre=(e,t,n)=>t in e?Ure(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ED=(e,t,n)=>(qre(e,typeof t!="symbol"?t+"":t,n),n);class cP extends Aj{constructor(t={}){var n,r;super(t),ED(this,"logoURL",""),ED(this,"linkURL",""),this.logoURL=(n=t.logoURL)!=null?n:Qa.maptilerLogoURL,this.linkURL=(r=t.linkURL)!=null?r:Qa.maptilerURL}onAdd(t){var n;this._map=t,this._compact=(n=this.options.compact)!=null?n:!1,this._container=window.document.createElement("div"),this._container.className="maplibregl-ctrl";const r=window.document.createElement("a");return r.style.backgroundRepeat="no-repeat",r.style.cursor="pointer",r.style.display="block",r.style.height="23px",r.style.margin="0 0 -4px -4px",r.style.overflow="hidden",r.style.width="88px",r.style.backgroundImage=`url(${this.logoURL})`,r.style.backgroundSize="100px 30px",r.style.width="100px",r.style.height="30px",r.target="_blank",r.rel="noopener",r.href=this.linkURL,r.setAttribute("aria-label","MapTiler logo"),r.setAttribute("rel","noopener"),this._container.appendChild(r),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}}var G0=(e,t,n)=>new Promise((r,i)=>{var o=p=>{try{l(n.next(p))}catch(g){i(g)}},u=p=>{try{l(n.throw(p))}catch(g){i(g)}},l=p=>p.done?r(p.value):Promise.resolve(p.value).then(o,u);l((n=n.apply(e,t)).next())});const hP="localcache_source",fP="localcache",Vre="maptiler_sdk",Gre=1e3,Hre=100;function Zre(e,t){if(ns.caching&&ns.session&&e.host===Qa.maptilerApiHost){if(t=="Source"&&e.href.includes("tiles.json"))return e.href.replace("https://",`${hP}://`);if(t=="Tile"||t=="Glyphs")return e.href.replace("https://",`${fP}://`)}return e.href}let H2;function Oj(){return G0(this,null,function*(){return H2||(H2=yield caches.open(Vre)),H2})}let SD=0;function Wre(){return G0(this,null,function*(){const e=yield Oj(),t=yield e.keys(),n=t.slice(0,Math.max(t.length-Gre,0));for(const r of n)e.delete(r)})}function Kre(){xP(hP,(e,t)=>G0(this,null,function*(){if(!e.url)throw new Error("");e.url=e.url.replace(`${hP}://`,"https://");const n=e;n.signal=t.signal;const r=yield fetch(e.url,n),i=yield r.json();return i.tiles&&i.tiles.length>0&&(i.tiles[0]+="&last-modified="+r.headers.get("Last-Modified")),{data:i,cacheControl:r.headers.get("Cache-Control"),expires:r.headers.get("Expires")}})),xP(fP,(e,t)=>G0(this,null,function*(){if(!e.url)throw new Error("");e.url=e.url.replace(`${fP}://`,"https://");const n=new URL(e.url),r=new URL(n);r.searchParams.delete("mtsid"),r.searchParams.delete("key");const i=r.toString(),o=new URL(n);o.searchParams.delete("last-modified");const u=o.toString(),l=x=>G0(this,null,function*(){return{data:yield x.arrayBuffer(),cacheControl:x.headers.get("Cache-Control"),expires:x.headers.get("Expires")}}),p=yield Oj(),g=yield p.match(i);if(g)return l(g);{const x=e;x.signal=t.signal;const y=yield fetch(u,x);return y.status>=200&&y.status<300&&(p.put(i,y.clone()).catch(()=>{}),++SD>Hre&&(Wre(),SD=0)),l(y)}}))}var Xre=Object.defineProperty,TD=Object.getOwnPropertySymbols,Yre=Object.prototype.hasOwnProperty,Jre=Object.prototype.propertyIsEnumerable,CD=(e,t,n)=>t in e?Xre(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ID=(e,t)=>{for(var n in t||(t={}))Yre.call(t,n)&&CD(e,n,t[n]);if(TD)for(var n of TD(t))Jre.call(t,n)&&CD(e,n,t[n]);return e};function Qre(){xn.getRTLTextPluginStatus()==="unavailable"&&xn.setRTLTextPlugin(Qa.rtlPluginURL,e=>{e&&console.error(e)},!0)}function eie(e,t){e.forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})}function wp(e,t,n){const r=window.document.createElement(e);return t!==void 0&&(r.className=t),n&&n.appendChild(r),r}function kj(e){e.parentNode&&e.parentNode.removeChild(e)}function PD(e,t){let n=null;try{n=new URL(e)}catch{return{url:e}}return n.host===Qa.maptilerApiHost&&(n.searchParams.has("key")||n.searchParams.append("key",ns.apiKey),ns.session&&n.searchParams.append("mtsid",Pj)),{url:Zre(n,t)}}function LD(e){return function(t,n){var r;if(e!==void 0){const i=e(t,n),o=PD((r=i==null?void 0:i.url)!=null?r:"",n);return ID(ID({},i),o)}else return PD(t,n)}}function Rj(){return Math.random().toString(36).substring(2)}function MS(e){return/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/gi.test(e)}function tie(e){try{return JSON.parse(e)}catch{}return null}function AD(e){return e?typeof e=="string"||e instanceof String?!e.startsWith("http")&&e.toLowerCase().includes(".json")?e:DA(e):e instanceof LS?e.getExpandedStyleURL():e instanceof AS?e.getDefaultVariant().getExpandedStyleURL():e:kS[C1[0].referenceStyleID].getDefaultVariant().getExpandedStyleURL()}var nie=Object.defineProperty,rie=(e,t,n)=>t in e?nie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Z2=(e,t,n)=>(rie(e,typeof t!="symbol"?t+"":t,n),n);class Mj{constructor(){Z2(this,"_map"),Z2(this,"_container"),Z2(this,"_terrainButton"),eie(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(t){return this._map=t,this._container=wp("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=wp("button","maplibregl-ctrl-terrain",this._container),wp("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){kj(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.hasTerrain()?this._map.disableTerrain():this._map.enableTerrain(),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.hasTerrain()?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))}}class Nj extends xn.NavigationControl{onAdd(t){return super.onAdd(t)}}var iie=Object.defineProperty,oie=(e,t,n)=>t in e?iie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sie=(e,t,n)=>(oie(e,typeof t!="symbol"?t+"":t,n),n);class Dj extends Nj{constructor(){super({showCompass:!0,showZoom:!0,visualizePitch:!0}),sie(this,"_rotateCompassArrow",()=>{const t=this.options.visualizePitch?`scale(${Math.min(1.5,1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5))}) rotateX(${Math.min(70,this._map.transform.pitch)}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=t}),this._compass.removeEventListener("click",this._compass.clickFunction),this._compass.addEventListener("click",t=>{this._map.getPitch()===0?this._map.easeTo({pitch:Math.min(this._map.getMaxPitch(),80)}):this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})})}_createButton(t,n){const r=super._createButton(t,n);return r.clickFunction=n,r}}class zj extends xn.GeolocateControl{onAdd(t){return super.onAdd(t)}}var aie=Object.defineProperty,lie=Object.defineProperties,uie=Object.getOwnPropertyDescriptors,OD=Object.getOwnPropertySymbols,cie=Object.prototype.hasOwnProperty,hie=Object.prototype.propertyIsEnumerable,dP=(e,t,n)=>t in e?aie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fie=(e,t)=>{for(var n in t||(t={}))cie.call(t,n)&&dP(e,n,t[n]);if(OD)for(var n of OD(t))hie.call(t,n)&&dP(e,n,t[n]);return e},die=(e,t)=>lie(e,uie(t)),kb=(e,t,n)=>(dP(e,typeof t!="symbol"?t+"":t,n),n);const kD=xn.Marker,RD=xn.LngLat,pie=xn.LngLatBounds;class Fj extends zj{constructor(){super(...arguments),kb(this,"lastUpdatedCenter",new RD(0,0)),kb(this,"_updateCamera",t=>{var n,r,i;const o=new RD(t.coords.longitude,t.coords.latitude),u=t.coords.accuracy,l=this._map.getBearing(),p=die(fie({bearing:l},this.options.fitBoundsOptions),{linear:!0}),g=this._map.getZoom();g>((i=(r=(n=this.options)==null?void 0:n.fitBoundsOptions)==null?void 0:r.maxZoom)!=null?i:30)&&(p.zoom=g),this._map.fitBounds(pie.fromLngLat(o,u),p,{geolocateSource:!0});let x=!1;const y=()=>{x=!0};this._map.once("click",y),this._map.once("dblclick",y),this._map.once("dragstart",y),this._map.once("mousedown",y),this._map.once("touchstart",y),this._map.once("wheel",y),this._map.once("moveend",()=>{this._map.off("click",y),this._map.off("dblclick",y),this._map.off("dragstart",y),this._map.off("mousedown",y),this._map.off("touchstart",y),this._map.off("wheel",y),!x&&(this.lastUpdatedCenter=this._map.getCenter())})}),kb(this,"_setupUI",t=>{if(this.lastUpdatedCenter=this._map.getCenter(),this._container.addEventListener("contextmenu",n=>n.preventDefault()),this._geolocateButton=wp("button","maplibregl-ctrl-geolocate",this._container),wp("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",t===!1){const n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}else{const n=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=wp("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new kD({element:this._dotElement}),this._circleElement=wp("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new kD({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("move",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("moveend",n=>{const r=n.originalEvent&&n.originalEvent.type==="resize",i=this.lastUpdatedCenter.distanceTo(this._map.getCenter());!n.geolocateSource&&this._watchState==="ACTIVE_LOCK"&&!r&&i>1&&(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new Event("trackuserlocationend")))})}),kb(this,"_onZoom",()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()})}_updateCircleRadius(){if(this._watchState!=="BACKGROUND"&&this._watchState!=="ACTIVE_LOCK")return;const t=[this._lastKnownPosition.coords.longitude,this._lastKnownPosition.coords.latitude],n=this._map.project(t),r=this._map.unproject([n.x,n.y]),i=this._map.unproject([n.x+20,n.y]),o=r.distanceTo(i)/20,u=Math.ceil(2*this._accuracy/o);this._circleElement.style.width=`${u}px`,this._circleElement.style.height=`${u}px`}}class Bj extends xn.ScaleControl{onAdd(t){return super.onAdd(t)}}class jj extends xn.FullscreenControl{onAdd(t){return super.onAdd(t)}}var mie=Object.defineProperty,gie=Object.defineProperties,yie=Object.getOwnPropertyDescriptors,MD=Object.getOwnPropertySymbols,_ie=Object.prototype.hasOwnProperty,vie=Object.prototype.propertyIsEnumerable,pP=(e,t,n)=>t in e?mie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,n_=(e,t)=>{for(var n in t||(t={}))_ie.call(t,n)&&pP(e,n,t[n]);if(MD)for(var n of MD(t))vie.call(t,n)&&pP(e,n,t[n]);return e},ND=(e,t)=>gie(e,yie(t)),xie=(e,t,n)=>(pP(e,typeof t!="symbol"?t+"":t,n),n),GA=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},vr=(e,t,n)=>(GA(e,t,"read from private field"),n?n.call(e):t.get(e)),Lh=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Iy=(e,t,n,r)=>(GA(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Il=(e,t,n)=>(GA(e,t,"access private method"),n),Pl,Gh,Um,$j,cg,xu,gw,mP,Uj,Ll,Eu,gP,qj;class W2{constructor(t,n){Lh(this,mP),Lh(this,Ll),Lh(this,gP),Lh(this,Pl,void 0),xie(this,"map"),Lh(this,Gh,void 0),Lh(this,Um,void 0),Lh(this,$j,void 0),Lh(this,cg,void 0),Lh(this,xu,!1),Lh(this,gw,void 0);var r;t.style!==void 0&&Iy(this,xu,!0),Iy(this,Pl,ND(n_(ND(n_({zoomAdjust:-4,position:"top-right"},n),{forceNoAttributionControl:!0,attributionControl:!1,navigationControl:!1,geolocateControl:!1,maptilerLogo:!1,minimap:!1,hash:!1,pitchAdjust:!1}),t),{containerStyle:n_({border:"1px solid #000",width:"400px",height:"300px"},(r=t.containerStyle)!=null?r:{})})),t.lockZoom!==void 0&&(vr(this,Pl).minZoom=t.lockZoom,vr(this,Pl).maxZoom=t.lockZoom)}setStyle(t,n){vr(this,xu)||this.map.setStyle(t,n),Il(this,Ll,Eu).call(this)}addLayer(t,n){return vr(this,xu)||this.map.addLayer(t,n),Il(this,Ll,Eu).call(this),this.map}moveLayer(t,n){return vr(this,xu)||this.map.moveLayer(t,n),Il(this,Ll,Eu).call(this),this.map}removeLayer(t){return vr(this,xu)||this.map.removeLayer(t),Il(this,Ll,Eu).call(this),this}setLayerZoomRange(t,n,r){return vr(this,xu)||this.map.setLayerZoomRange(t,n,r),Il(this,Ll,Eu).call(this),this}setFilter(t,n,r){return vr(this,xu)||this.map.setFilter(t,n,r),Il(this,Ll,Eu).call(this),this}setPaintProperty(t,n,r,i){return vr(this,xu)||this.map.setPaintProperty(t,n,r,i),Il(this,Ll,Eu).call(this),this}setLayoutProperty(t,n,r,i){return vr(this,xu)||this.map.setLayoutProperty(t,n,r,i),Il(this,Ll,Eu).call(this),this}setGlyphs(t,n){return vr(this,xu)||this.map.setGlyphs(t,n),Il(this,Ll,Eu).call(this),this}onAdd(t){Iy(this,Gh,t),Iy(this,Um,wp("div","maplibregl-ctrl maplibregl-ctrl-group"));for(const[n,r]of Object.entries(vr(this,Pl).containerStyle))vr(this,Um).style.setProperty(n,r);return vr(this,Pl).container=vr(this,Um),vr(this,Pl).zoom=t.getZoom()+vr(this,Pl).zoomAdjust,this.map=new HA(vr(this,Pl)),this.map.once("style.load",()=>{this.map.resize()}),this.map.once("load",()=>{Il(this,mP,Uj).call(this,vr(this,Pl).parentRect),Iy(this,gw,Il(this,gP,qj).call(this))}),vr(this,Um)}onRemove(){var t;(t=vr(this,gw))==null||t.call(this),kj(vr(this,Um))}}Pl=new WeakMap;Gh=new WeakMap;Um=new WeakMap;$j=new WeakMap;cg=new WeakMap;xu=new WeakMap;gw=new WeakMap;mP=new WeakSet;Uj=function(e){e===void 0||e.linePaint===void 0&&e.fillPaint===void 0||(Iy(this,cg,{type:"Feature",properties:{name:"parentRect"},geometry:{type:"Polygon",coordinates:[[[],[],[],[],[]]]}}),this.map.addSource("parentRect",{type:"geojson",data:vr(this,cg)}),(e.lineLayout!==void 0||e.linePaint!==void 0)&&this.map.addLayer({id:"parentRectOutline",type:"line",source:"parentRect",layout:n_({},e.lineLayout),paint:n_({"line-color":"#FFF","line-width":1,"line-opacity":.85},e.linePaint)}),e.fillPaint!==void 0&&this.map.addLayer({id:"parentRectFill",type:"fill",source:"parentRect",layout:{},paint:n_({"fill-color":"#08F","fill-opacity":.135},e.fillPaint)}),Il(this,Ll,Eu).call(this))};Ll=new WeakSet;Eu=function(){if(vr(this,cg)===void 0)return;const{devicePixelRatio:e}=window,t=vr(this,Gh).getCanvas(),n=t.width/e,r=t.height/e,i=vr(this,Gh).unproject.bind(vr(this,Gh)),o=i([0,0]),u=i([n,0]),l=i([0,r]),p=i([n,r]);vr(this,cg).geometry.coordinates=[[l.toArray(),p.toArray(),u.toArray(),o.toArray(),l.toArray()]],this.map.getSource("parentRect").setData(vr(this,cg))};gP=new WeakSet;qj=function(){const{pitchAdjust:e}=vr(this,Pl),t=()=>{o("parent")},n=()=>{o("minimap")},r=()=>{vr(this,Gh).on("move",t),this.map.on("move",n)},i=()=>{vr(this,Gh).off("move",t),this.map.off("move",n)},o=u=>{var l;i();const p=u==="parent"?vr(this,Gh):this.map,g=u==="parent"?this.map:vr(this,Gh),x=p.getCenter(),y=p.getZoom()+((l=vr(this,Pl).zoomAdjust)!=null?l:-4)*(u==="parent"?1:-1),_=p.getBearing(),T=p.getPitch();g.jumpTo({center:x,zoom:y,bearing:_,pitch:e?T:0}),Il(this,Ll,Eu).call(this),r()};return r(),()=>{i()}};var bie=Object.defineProperty,wie=Object.defineProperties,Eie=Object.getOwnPropertyDescriptors,DD=Object.getOwnPropertySymbols,Sie=Object.prototype.hasOwnProperty,Tie=Object.prototype.propertyIsEnumerable,yP=(e,t,n)=>t in e?bie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,K2=(e,t)=>{for(var n in t||(t={}))Sie.call(t,n)&&yP(e,n,t[n]);if(DD)for(var n of DD(t))Tie.call(t,n)&&yP(e,n,t[n]);return e},Cie=(e,t)=>wie(e,Eie(t)),Uf=(e,t,n)=>(yP(e,typeof t!="symbol"?t+"":t,n),n),qf=(e,t,n)=>new Promise((r,i)=>{var o=p=>{try{l(n.next(p))}catch(g){i(g)}},u=p=>{try{l(n.throw(p))}catch(g){i(g)}},l=p=>p.done?r(p.value):Promise.resolve(p.value).then(o,u);l((n=n.apply(e,t)).next())});const Vj={POINT:"POINT",COUNTRY:"COUNTRY"};let HA=class extends xn.Map{constructor(t){var n,r,i;t.apiKey&&(ns.apiKey=t.apiKey);const o=AD(t.style),u=location.hash;ns.apiKey||console.warn("MapTiler Cloud API key is not set. Visit https://maptiler.com and try Cloud for free!");let l={compact:!1};t.customAttribution?l.customAttribution=t.customAttribution:t.attributionControl&&typeof t.attributionControl=="object"&&(l=K2(K2({},l),t.attributionControl)),super(Cie(K2({},t),{style:o,maplibreLogo:!1,transformRequest:LD(t.transformRequest),attributionControl:t.forceNoAttributionControl===!0?!1:l})),Uf(this,"isTerrainEnabled",!1),Uf(this,"terrainExaggeration",1),Uf(this,"primaryLanguage"),Uf(this,"terrainGrowing",!1),Uf(this,"terrainFlattening",!1),Uf(this,"minimap"),Uf(this,"forceLanguageUpdate"),Uf(this,"languageAlwaysBeenStyle"),Uf(this,"isReady",!1),ns.caching&&Kre(),this.primaryLanguage=(n=t.language)!=null?n:ns.primaryLanguage,this.forceLanguageUpdate=!(this.primaryLanguage===Ir.STYLE||this.primaryLanguage===Ir.STYLE_LOCK),this.languageAlwaysBeenStyle=this.primaryLanguage===Ir.STYLE,this.terrainExaggeration=(r=t.terrainExaggeration)!=null?r:this.terrainExaggeration,this.once("styledata",()=>qf(this,null,function*(){if(!t.geolocate||t.center||t.hash&&u)return;try{if(t.geolocate===Vj.COUNTRY){yield this.fitToIpBounds();return}}catch(A){console.warn(A.message)}let _;try{yield this.centerOnIpPoint(t.zoom),_=this.getCameraHash()}catch(A){console.warn(A.message)}(yield navigator.permissions.query({name:"geolocation"})).state==="granted"&&navigator.geolocation.getCurrentPosition(A=>{_===this.getCameraHash()&&(this.terrain?this.easeTo({center:[A.coords.longitude,A.coords.latitude],zoom:t.zoom||12,duration:2e3}):this.once("terrain",()=>{this.easeTo({center:[A.coords.longitude,A.coords.latitude],zoom:t.zoom||12,duration:2e3})}))},null,{maximumAge:24*3600*1e3,timeout:5e3,enableHighAccuracy:!1})})),this.on("styledata",()=>{this.setPrimaryLanguage(this.primaryLanguage)}),this.on("styledata",()=>{this.getTerrain()===null&&this.isTerrainEnabled&&this.enableTerrain(this.terrainExaggeration)}),this.once("load",()=>qf(this,null,function*(){Qre()})),this.once("load",()=>qf(this,null,function*(){let _={logo:null};try{const T=Object.keys(this.style.sourceCaches).map(N=>this.getSource(N)).filter(N=>N&&"url"in N&&typeof N.url=="string"&&(N==null?void 0:N.url.includes("tiles.json"))),A=new URL(T[0].url);A.searchParams.has("key")||A.searchParams.append("key",ns.apiKey),_=yield(yield fetch(A.href)).json()}catch{}if(t.forceNoAttributionControl!==!0)if("logo"in _&&_.logo){const T=_.logo;this.addControl(new cP({logoURL:T}),t.logoPosition)}else t.maptilerLogo&&this.addControl(new cP,t.logoPosition);if(t.scaleControl){const T=t.scaleControl===!0||t.scaleControl===void 0?"bottom-right":t.scaleControl,A=new Bj({unit:ns.unit});this.addControl(A,T),ns.on("unit",O=>{A.setUnit(O)})}if(t.navigationControl!==!1){const T=t.navigationControl===!0||t.navigationControl===void 0?"top-right":t.navigationControl;this.addControl(new Dj,T)}if(t.geolocateControl!==!1){const T=t.geolocateControl===!0||t.geolocateControl===void 0?"top-right":t.geolocateControl;this.addControl(new Fj({positionOptions:{enableHighAccuracy:!0,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!0,showAccuracyCircle:!0,showUserLocation:!0}),T)}if(t.terrainControl){const T=t.terrainControl===!0||t.terrainControl===void 0?"top-right":t.terrainControl;this.addControl(new Mj,T)}if(t.fullscreenControl){const T=t.fullscreenControl===!0||t.fullscreenControl===void 0?"top-right":t.fullscreenControl;this.addControl(new jj({}),T)}this.isReady=!0,this.fire("ready",{target:this})}));let p=!1,g=!1,x;this.once("ready",()=>{p=!0,g&&this.fire("loadWithTerrain",x)}),this.once("style.load",()=>{var _;const{minimap:T}=t;if(typeof T=="object"){const{zoom:A,center:O,style:N,language:k,apiKey:R,maptilerLogo:z,antialias:D,refreshExpiredTiles:U,maxBounds:q,scrollZoom:G,minZoom:H,maxZoom:J,boxZoom:Y,locale:X,fadeDuration:ee,crossSourceCollisions:ue,clickTolerance:oe,bounds:we,fitBoundsOptions:Ne,pixelRatio:Be,validateStyle:De}=t;this.minimap=new W2(T,{zoom:A,center:O,style:N,language:k,apiKey:R,container:"null",maptilerLogo:z,antialias:D,refreshExpiredTiles:U,maxBounds:q,scrollZoom:G,minZoom:H,maxZoom:J,boxZoom:Y,locale:X,fadeDuration:ee,crossSourceCollisions:ue,clickTolerance:oe,bounds:we,fitBoundsOptions:Ne,pixelRatio:Be,validateStyle:De}),this.addControl(this.minimap,(_=T.position)!=null?_:"bottom-left")}else T===!0?(this.minimap=new W2({},t),this.addControl(this.minimap,"bottom-left")):T!==void 0&&T!==!1&&(this.minimap=new W2({},t),this.addControl(this.minimap,T))});const y=_=>{_.terrain&&(g=!0,x={type:"loadWithTerrain",target:this,terrain:_.terrain},this.off("terrain",y),p&&this.fire("loadWithTerrain",x))};this.on("terrain",y),t.terrain&&this.enableTerrain((i=t.terrainExaggeration)!=null?i:this.terrainExaggeration)}onLoadAsync(){return qf(this,null,function*(){return new Promise(t=>{if(this.loaded())return t(this);this.once("load",()=>{t(this)})})})}onReadyAsync(){return qf(this,null,function*(){return new Promise(t=>{if(this.isReady)return t(this);this.once("ready",()=>{t(this)})})})}onLoadWithTerrainAsync(){return qf(this,null,function*(){return new Promise(t=>{if(this.isReady&&this.terrain)return t(this);this.once("loadWithTerrain",()=>{t(this)})})})}setStyle(t,n){var r;return(r=this.minimap)==null||r.setStyle(t),this.forceLanguageUpdate=!0,this.once("idle",()=>{this.forceLanguageUpdate=!1}),super.setStyle(AD(t),n)}addLayer(t,n){var r;return(r=this.minimap)==null||r.addLayer(t,n),super.addLayer(t,n)}moveLayer(t,n){var r;return(r=this.minimap)==null||r.moveLayer(t,n),super.moveLayer(t,n)}removeLayer(t){var n;return(n=this.minimap)==null||n.removeLayer(t),super.removeLayer(t)}setLayerZoomRange(t,n,r){var i;return(i=this.minimap)==null||i.setLayerZoomRange(t,n,r),super.setLayerZoomRange(t,n,r)}setFilter(t,n,r){var i;return(i=this.minimap)==null||i.setFilter(t,n,r),super.setFilter(t,n,r)}setPaintProperty(t,n,r,i){var o;return(o=this.minimap)==null||o.setPaintProperty(t,n,r,i),super.setPaintProperty(t,n,r,i)}setLayoutProperty(t,n,r,i){var o;return(o=this.minimap)==null||o.setLayoutProperty(t,n,r,i),super.setLayoutProperty(t,n,r,i)}setGlyphs(t,n){var r;return(r=this.minimap)==null||r.setGlyphs(t,n),super.setGlyphs(t,n)}getStyleLanguage(){return!this.style.stylesheet.metadata||typeof this.style.stylesheet.metadata!="object"?null:"maptiler:language"in this.style.stylesheet.metadata&&typeof this.style.stylesheet.metadata["maptiler:language"]=="string"?this.style.stylesheet.metadata["maptiler:language"]:null}setLanguage(t){var n,r;(r=(n=this.minimap)==null?void 0:n.map)==null||r.setLanguage(t),this.onStyleReady(()=>{this.setPrimaryLanguage(t)})}setPrimaryLanguage(t){const n=this.getStyleLanguage();if(!(t===Ir.STYLE&&(n===Ir.AUTO||n===Ir.VISITOR))&&(t!==Ir.STYLE&&(this.languageAlwaysBeenStyle=!1),this.languageAlwaysBeenStyle||this.primaryLanguage===t&&!this.forceLanguageUpdate))return;if(!lP(t)){console.warn(`The language "${t}" is not supported.`);return}if(this.primaryLanguage===Ir.STYLE_LOCK){console.warn("The language cannot be changed because this map has been instantiated with the STYLE_LOCK language flag.");return}this.primaryLanguage=t;let r=t;if(t===Ir.STYLE){if(!n){console.warn("The style has no default languages.");return}if(!lP(n)){console.warn("The language defined in the style is not valid.");return}r=n}let i=Ir.LOCAL,o=`{${i}}`;r==Ir.VISITOR?(i=uP(),o=["case",["all",["has",i],["has",Ir.LOCAL]],["case",["==",["get",i],["get",Ir.LOCAL]],["get",Ir.LOCAL],["format",["get",i],{"font-scale":.8},`
`,["get",Ir.LOCAL],{"font-scale":1.1}]],["get",Ir.LOCAL]]):r==Ir.VISITOR_ENGLISH?(i=Ir.ENGLISH,o=["case",["all",["has",i],["has",Ir.LOCAL]],["case",["==",["get",i],["get",Ir.LOCAL]],["get",Ir.LOCAL],["format",["get",i],{"font-scale":.8},`
`,["get",Ir.LOCAL],{"font-scale":1.1}]],["get",Ir.LOCAL]]):r===Ir.AUTO?(i=uP(),o=["case",["has",i],["get",i],["get",Ir.LOCAL]]):r===Ir.LOCAL?(i=Ir.LOCAL,o=`{${i}}`):(i=r,o=["case",["has",i],["get",i],["get",Ir.LOCAL]]);const{layers:u}=this.getStyle();for(const l of u){if(l.type!=="symbol")continue;const p=l,g=this.getSource(p.source);if(!g||!("url"in g&&typeof g.url=="string")||new URL(g.url).host!==Qa.maptilerApiHost)continue;const{id:y,layout:_}=p;if(!_||!("text-field"in _))continue;const T=this.getLayoutProperty(y,"text-field");typeof T=="string"&&(T.toLowerCase().includes("ref")||T.toLowerCase().includes("housenumber"))||this.setLayoutProperty(y,"text-field",o)}}getPrimaryLanguage(){return this.primaryLanguage}getTerrainExaggeration(){return this.terrainExaggeration}hasTerrain(){return this.isTerrainEnabled}growTerrain(t,n=1e3){if(!this.terrain)return;const r=performance.now(),i=this.terrain.exaggeration,o=t-i,u=()=>{if(!this.terrain||this.terrainFlattening)return;const l=(performance.now()-r)/n;if(l<.99){const p=1-Math.pow(1-l,4),g=i+p*o;this.terrain.exaggeration=g,requestAnimationFrame(u)}else this.terrainGrowing=!1,this.terrainFlattening=!1,this.terrain.exaggeration=t;this.triggerRepaint()};this.terrainGrowing=!0,this.terrainFlattening=!1,requestAnimationFrame(u)}enableTerrain(t=this.terrainExaggeration){if(t<0){console.warn("Terrain exaggeration cannot be negative.");return}const n=i=>qf(this,null,function*(){!this.terrain||i.type!=="data"||i.dataType!=="source"||!("source"in i)||i.sourceId!=="maptiler-terrain"||i.source.type!=="raster-dem"||i.isSourceLoaded&&(this.off("data",n),this.growTerrain(t))}),r=()=>{this.isTerrainEnabled=!0,this.terrainExaggeration=t,this.on("data",n),this.addSource(Qa.terrainSourceId,{type:"raster-dem",url:Qa.terrainSourceURL}),this.setTerrain({source:Qa.terrainSourceId,exaggeration:0})};if(this.getTerrain()){this.isTerrainEnabled=!0,this.growTerrain(t);return}this.loaded()||this.isTerrainEnabled?r():this.once("load",()=>{this.getTerrain()&&this.getSource(Qa.terrainSourceId)||r()})}disableTerrain(){if(!this.terrain)return;this.isTerrainEnabled=!1;const t=1*1e3,n=performance.now(),r=this.terrain.exaggeration,i=()=>{if(!this.terrain||this.terrainGrowing)return;const o=(performance.now()-n)/t;if(o<.99){const u=Math.pow(1-o,4),l=r*u;this.terrain.exaggeration=l,requestAnimationFrame(i)}else this.terrain.exaggeration=0,this.terrainGrowing=!1,this.terrainFlattening=!1,this.setTerrain(),this.getSource(Qa.terrainSourceId)&&this.removeSource(Qa.terrainSourceId);this.triggerRepaint()};this.terrainGrowing=!1,this.terrainFlattening=!0,requestAnimationFrame(i)}setTerrainExaggeration(t,n=!0){!n&&this.terrain?(this.terrainExaggeration=t,this.terrain.exaggeration=t,this.triggerRepaint()):this.enableTerrain(t)}onStyleReady(t){this.isStyleLoaded()?t():this.once("styledata",()=>{t()})}fitToIpBounds(){return qf(this,null,function*(){const t=yield oP.info();this.fitBounds(t.country_bounds,{duration:0,padding:100})})}centerOnIpPoint(t){return qf(this,null,function*(){var n,r;const i=yield oP.info();this.jumpTo({center:[(n=i==null?void 0:i.longitude)!=null?n:0,(r=i==null?void 0:i.latitude)!=null?r:0],zoom:t||11})})}getCameraHash(){const t=new Float32Array(5),n=this.getCenter();return t[0]=n.lng,t[1]=n.lat,t[2]=this.getZoom(),t[3]=this.getPitch(),t[4]=this.getBearing(),Ine.fromUint8Array(new Uint8Array(t.buffer))}getSdkConfig(){return ns}getMaptilerSessionId(){return Pj}setTransformRequest(t){return super.setTransformRequest(LD(t)),this}};class Gj extends xn.Marker{addTo(t){return super.addTo(t)}}class Iie extends xn.Popup{addTo(t){return super.addTo(t)}}class Pie extends xn.Style{constructor(t,n={}){super(t,n)}}class Lie extends xn.CanvasSource{onAdd(t){super.onAdd(t)}}class Aie extends xn.GeoJSONSource{onAdd(t){super.onAdd(t)}}class Oie extends xn.ImageSource{onAdd(t){super.onAdd(t)}}class kie extends xn.RasterTileSource{onAdd(t){super.onAdd(t)}}class Rie extends xn.RasterDEMTileSource{onAdd(t){super.onAdd(t)}}class Mie extends xn.VectorTileSource{onAdd(t){super.onAdd(t)}}class Nie extends xn.VideoSource{onAdd(t){super.onAdd(t)}}class Die extends xn.AttributionControl{onAdd(t){return super.onAdd(t)}}class zie extends xn.TerrainControl{onAdd(t){return super.onAdd(t)}}class Fie extends xn.BoxZoomHandler{constructor(t,n){super(t,n)}}class Bie extends xn.ScrollZoomHandler{constructor(t,n){super(t,n)}}class jie extends xn.CooperativeGesturesHandler{constructor(t,n){super(t,n)}}class $ie extends xn.KeyboardHandler{constructor(t){super(t)}}class Uie extends xn.TwoFingersTouchPitchHandler{constructor(t){super(t)}}class qie extends xn.MapWheelEvent{constructor(t,n,r){super(t,n,r)}}class Vie extends xn.MapTouchEvent{constructor(t,n,r){super(t,n,r)}}class Gie extends xn.MapMouseEvent{constructor(t,n,r,i={}){super(t,n,r,i)}}var Hie=Object.defineProperty,zD=Object.getOwnPropertySymbols,Zie=Object.prototype.hasOwnProperty,Wie=Object.prototype.propertyIsEnumerable,FD=(e,t,n)=>t in e?Hie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wg=(e,t)=>{for(var n in t||(t={}))Zie.call(t,n)&&FD(e,n,t[n]);if(zD)for(var n of zD(t))Wie.call(t,n)&&FD(e,n,t[n]);return e};function NS(e){if(typeof DOMParser<"u"){const t=new DOMParser().parseFromString(e,"application/xml");if(t.querySelector("parsererror"))throw new Error("The provided string is not valid XML");return t}else throw new Error("No XML parser found")}function ZA(e,t){if(!e.hasChildNodes())return!1;for(const n of Array.from(e.childNodes)){const r=n.nodeName;if(typeof r=="string"&&r.trim().toLowerCase()===t.toLowerCase())return!0}return!1}function _P(e){if(typeof XMLSerializer<"u")return new XMLSerializer().serializeToString(e);throw new Error("No XML serializer found")}function WA(e){if(typeof e=="string"&&(e=NS(e)),!ZA(e,"gpx"))throw new Error("The XML document is not valid GPX");const t=is(e,"trk"),n=is(e,"rte"),r=is(e,"wpt"),i={type:"FeatureCollection",features:[]};for(const o of Array.from(t)){const u=Jie(o);u&&i.features.push(u)}for(const o of Array.from(n)){const u=Qie(o);u&&i.features.push(u)}for(const o of Array.from(r))i.features.push(eoe(o));return i}function KA(e,t){var n;if(typeof e=="string"&&(e=NS(e)),!ZA(e,"kml"))throw new Error("The XML document is not valid KML");const r={type:"FeatureCollection",features:[]},i={},o={},u={},l=is(e,"Placemark"),p=is(e,"Style"),g=is(e,"StyleMap");for(const x of Array.from(p)){const y=jD(t!==void 0?t(x):_P(x)).toString(16);i["#"+hg(x,"id")]=y,o[y]=x}for(const x of Array.from(g)){i["#"+hg(x,"id")]=jD(t!==void 0?t(x):_P(x)).toString(16);const y=is(x,"Pair"),_={};for(const T of Array.from(y))_[(n=Ur($n(T,"key")))!=null?n:""]=Ur($n(T,"styleUrl"));u["#"+hg(x,"id")]=_}for(const x of Array.from(l))r.features=r.features.concat(Yie(x,i,o,u));return r}function BD(e){if(e===null)return["#000000",1];let t="",n=1;return e.substring(0,1)==="#"&&(e=e.substring(1)),(e.length===6||e.length===3)&&(t=e),e.length===8&&(n=parseInt(e.substring(0,2),16)/255,t="#"+e.substring(6,8)+e.substring(4,6)+e.substring(2,4)),[t??"#000000",n??1]}function Kie(e){return Wj(e.split(" "))}function Xie(e){var t;let n=is(e,"coord");const r=[],i=[];n.length===0&&(n=is(e,"gx:coord"));for(const u of Array.from(n))r.push(Kie((t=Ur(u))!=null?t:""));const o=is(e,"when");for(const u of Array.from(o))i.push(Ur(u));return{coords:r,times:i}}function yw(e){var t,n,r;const i=["Polygon","LineString","Point","Track","gx:Track"];let o,u,l,p,g;const x=[],y=[];if($n(e,"MultiGeometry")!==null)return yw($n(e,"MultiGeometry"));if($n(e,"MultiTrack")!==null)return yw($n(e,"MultiTrack"));if($n(e,"gx:MultiTrack")!==null)return yw($n(e,"gx:MultiTrack"));for(l=0;l<i.length;l++)if(u=is(e,i[l]),u){for(p=0;p<u.length;p++)if(o=u[p],i[l]==="Point")x.push({type:"Point",coordinates:Kj((t=Ur($n(o,"coordinates")))!=null?t:"")});else if(i[l]==="LineString")x.push({type:"LineString",coordinates:UD((n=Ur($n(o,"coordinates")))!=null?n:"")});else if(i[l]==="Polygon"){const _=is(o,"LinearRing"),T=[];for(g=0;g<_.length;g++)T.push(UD((r=Ur($n(_[g],"coordinates")))!=null?r:""));x.push({type:"Polygon",coordinates:T})}else if(i[l]==="Track"||i[l]==="gx:Track"){const _=Xie(o);x.push({type:"LineString",coordinates:_.coords}),_.times.length&&y.push(_.times)}}return{geoms:x,coordTimes:y}}function Yie(e,t,n,r){var i,o,u,l,p,g,x,y,_,T;const A=yw(e),O={},N=Ur($n(e,"name")),k=Ur($n(e,"address")),R=Ur($n(e,"description")),z=$n(e,"TimeSpan"),D=$n(e,"TimeStamp"),U=$n(e,"ExtendedData"),q=$n(e,"visibility");let G,H=Ur($n(e,"styleUrl")),J=$n(e,"LineStyle"),Y=$n(e,"PolyStyle");if(!A.geoms.length)return[];if(N&&(O.name=N),k&&(O.address=k),H){H[0]!=="#"&&(H="#"+H),O.styleUrl=H,t[H]&&(O.styleHash=t[H]),r[H]&&(O.styleMapHash=r[H],O.styleHash=t[(i=r[H].normal)!=null?i:""]);const ee=n[(o=O.styleHash)!=null?o:""];if(ee){J||(J=$n(ee,"LineStyle")),Y||(Y=$n(ee,"PolyStyle"));const ue=$n(ee,"IconStyle");if(ue){const oe=$n(ue,"Icon");if(oe){const we=Ur($n(oe,"href"));we&&(O.icon=we)}}}}if(R&&(O.description=R),z){const ee=Ur($n(z,"begin")),ue=Ur($n(z,"end"));ee&&ue&&(O.timespan={begin:ee,end:ue})}if(D!==null&&(O.timestamp=(u=Ur($n(D,"when")))!=null?u:new Date().toISOString()),J!==null){const ee=BD(Ur($n(J,"color"))),ue=ee[0],oe=ee[1],we=parseFloat((l=Ur($n(J,"width")))!=null?l:"");ue&&(O.stroke=ue),isNaN(oe)||(O["stroke-opacity"]=oe),isNaN(we)||(O["stroke-width"]=we)}if(Y){const ee=BD(Ur($n(Y,"color"))),ue=ee[0],oe=ee[1],we=Ur($n(Y,"fill")),Ne=Ur($n(Y,"outline"));ue&&(O.fill=ue),isNaN(oe)||(O["fill-opacity"]=oe),we&&(O["fill-opacity"]=we==="1"?O["fill-opacity"]||1:0),Ne&&(O["stroke-opacity"]=Ne==="1"?O["stroke-opacity"]||1:0)}if(U){const ee=is(U,"Data"),ue=is(U,"SimpleData");for(G=0;G<ee.length;G++)O[(p=ee[G].getAttribute("name"))!=null?p:""]=(g=Ur($n(ee[G],"value")))!=null?g:"";for(G=0;G<ue.length;G++)O[(x=ue[G].getAttribute("name"))!=null?x:""]=(y=Ur(ue[G]))!=null?y:""}q!==null&&(O.visibility=(_=Ur(q))!=null?_:""),A.coordTimes.length!==0&&(O.coordTimes=A.coordTimes.length===1?A.coordTimes[0]:A.coordTimes);const X={type:"Feature",geometry:A.geoms.length===1?A.geoms[0]:{type:"GeometryCollection",geometries:A.geoms},properties:O};return hg(e,"id")&&(X.id=(T=hg(e,"id"))!=null?T:void 0),[X]}function Hj(e,t){const n=is(e,t),r=[],i=[];let o=[];const u=n.length;if(!(u<2)){for(let l=0;l<u;l++){const p=Xj(n[l]);r.push(p.coordinates),p.time&&i.push(p.time),(p.heartRate||o.length)&&(o.length===0&&(o=new Array(l).fill(null)),o.push(p.heartRate))}return{line:r,times:i,heartRates:o}}}function Jie(e){const t=is(e,"trkseg"),n=[],r=[],i=[];let o;for(let l=0;l<t.length;l++)if(o=Hj(t[l],"trkpt"),o!==void 0&&(o.line&&n.push(o.line),o.times&&o.times.length&&r.push(o.times),i.length||o.heartRates&&o.heartRates.length)){if(!i.length)for(let p=0;p<l;p++)i.push(new Array(n[p].length).fill(null));o.heartRates&&o.heartRates.length?i.push(o.heartRates):i.push(new Array(o.line.length).fill(null))}if(n.length===0)return;const u=wg(wg({},XA(e)),Zj($n(e,"extensions")));return r.length!==0&&(u.coordTimes=n.length===1?r[0]:r),i.length!==0&&(u.heartRates=n.length===1?i[0]:i),n.length===1?{type:"Feature",properties:u,geometry:{type:"LineString",coordinates:n[0]}}:{type:"Feature",properties:u,geometry:{type:"MultiLineString",coordinates:n}}}function Qie(e){const t=Hj(e,"rtept");return t===void 0?void 0:{type:"Feature",properties:wg(wg({},XA(e)),Zj($n(e,"extensions"))),geometry:{type:"LineString",coordinates:t.line}}}function eoe(e){return{type:"Feature",properties:wg(wg({},XA(e)),vP(e,["sym"])),geometry:{type:"Point",coordinates:Xj(e).coordinates}}}function Zj(e){var t,n;const r={};if(e){const i=$n(e,"line");if(i){const o=Ur($n(i,"color")),u=parseFloat((t=Ur($n(i,"opacity")))!=null?t:"0"),l=parseFloat((n=Ur($n(i,"width")))!=null?n:"0");o&&(r.stroke=o),isNaN(u)||(r["stroke-opacity"]=u),isNaN(l)||(r["stroke-width"]=l*96/25.4)}}return r}function XA(e){const t=vP(e,["name","cmt","desc","type","time","keywords"]),n=is(e,"link");if(n.length!==0){t.links=[];for(const r of Array.from(n)){const i=wg({href:hg(r,"href")},vP(r,["text","type"]));t.links.push(i)}}return t}function jD(e){let t=0;if(!e||!e.length)return t;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n)|0;return t}function is(e,t){return e.getElementsByTagName(t)}function hg(e,t){return e.getAttribute(t)}function $D(e,t){var n;return parseFloat((n=hg(e,t))!=null?n:"0")}function $n(e,t){const n=is(e,t);return n.length?n[0]:null}function toe(e){return e.normalize&&e.normalize(),e}function Wj(e){return e.map(parseFloat).map(t=>isNaN(t)?null:t)}function Ur(e){return e&&toe(e),e&&e.textContent}function vP(e,t){var n;const r={};let i,o;for(o=0;o<t.length;o++)i=$n(e,t[o]),i&&(r[t[o]]=(n=Ur(i))!=null?n:"");return r}function Kj(e){return Wj(e.replace(/\s*/g,"").split(","))}function UD(e){const t=e.replace(/^\s*|\s*$/g,"").split(/\s+/),n=[];for(const r of t)n.push(Kj(r));return n}function Xj(e){var t,n;const r=[$D(e,"lon"),$D(e,"lat")],i=$n(e,"ele"),o=$n(e,"gpxtpx:hr")||$n(e,"hr"),u=$n(e,"time");let l;return i&&(l=parseFloat((t=Ur(i))!=null?t:"0"),isNaN(l)||r.push(l)),{coordinates:r,time:u?Ur(u):null,heartRate:o!==null?parseFloat((n=Ur(o))!=null?n:"0"):null}}function Yj(e){try{typeof e=="string"&&(e=NS(e))}catch{return null}try{return WA(e)}catch{}try{return KA(e)}catch{}return null}var noe=Object.defineProperty,roe=(e,t,n)=>t in e?noe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qD=(e,t,n)=>(roe(e,typeof t!="symbol"?t+"":t,n),n);function Rb(e){const t=e.toString(16);return t.length==1?"0"+t:t}function ioe(e){return"#"+Rb(e[0])+Rb(e[1])+Rb(e[2])+(e.length===4?Rb(e[3]):"")}class In extends Array{constructor(t={}){super(),qD(this,"min",0),qD(this,"max",1),"min"in t&&(this.min=t.min),"max"in t&&(this.max=t.max),"stops"in t&&this.setStops(t.stops,{clone:!1})}static fromArrayDefinition(t){return new In({stops:t.map(n=>({value:n[0],color:n[1]}))})}setStops(t,n={clone:!0}){const r=n.clone?this.clone():this;r.length=0;let i=1/0,o=-1/0;for(let u=0;u<t.length;u+=1)i=Math.min(i,t[u].value),o=Math.max(o,t[u].value),r.push({value:t[u].value,color:t[u].color.slice()});return r.sort((u,l)=>u.value<l.value?-1:1),this.min=i,this.max=o,r}scale(t,n,r={clone:!0}){const i=r.clone,o=this[0].value,l=this.at(-1).value-o,p=n-t,g=[];for(let x=0;x<this.length;x+=1){const T=(this[x].value-o)/l*p+t;i?g.push({value:T,color:this[x].color.slice()}):this[x].value=T}return i?new In({stops:g}):this}at(t){return t<0?this[this.length+t]:this[t]}clone(){return new In({stops:this.getRawColorStops()})}getRawColorStops(){const t=[];for(let n=0;n<this.length;n+=1)t.push({value:this[n].value,color:this[n].color});return t}reverse(t={clone:!0}){const n=t.clone?this.clone():this;for(let r=0;r<~~(n.length/2);r+=1){const i=n[r].color;n[r].color=n.at(-(r+1)).color,n.at(-(r+1)).color=i}return n}getBounds(){return{min:this.min,max:this.max}}getColor(t,n={smooth:!0}){if(t<=this[0].value)return this[0].color;if(t>=this.at(-1).value)return this.at(-1).color;for(let r=0;r<this.length-1;r+=1){if(t>this[r+1].value)continue;const i=this[r].color;if(!n.smooth)return i.slice();const o=this[r].value,u=this[r+1].value,l=this[r+1].color,p=(u-t)/(u-o);return i.map((g,x)=>Math.round(g*p+l[x]*(1-p)))}return[0,0,0]}getColorHex(t,n={smooth:!0,withAlpha:!1}){return ioe(this.getColor(t,n))}getColorRelative(t,n={smooth:!0}){const r=this.getBounds();return this.getColor(r.min+t*(r.max-r.min),n)}getCanvasStrip(t={horizontal:!0,size:512,smooth:!0}){const n=document.createElement("canvas");n.width=t.horizontal?t.size:1,n.height=t.horizontal?1:t.size;const r=n.getContext("2d");if(!r)throw new Error("Canvs context is missing");const i=r.getImageData(0,0,n.width,n.height),o=i.data,u=t.size,l=this[0].value,x=(this.at(-1).value-l)/u;for(let y=0;y<u;y+=1){const _=this.getColor(l+y*x,{smooth:t.smooth});o[y*4]=_[0],o[y*4+1]=_[1],o[y*4+2]=_[2],o[y*4+3]=_.length>3?_[3]:255}return r.putImageData(i,0,0),n}resample(t,n=15){const r=this.getBounds(),i=this.scale(0,1),o=1/(n-1);let u;if(t==="ease-in-square")u=Array.from({length:n},(g,x)=>{const y=x*o,_=Math.pow(y,2),T=i.getColor(_);return{value:y,color:T}});else if(t==="ease-out-square")u=Array.from({length:n},(g,x)=>{const y=x*o,_=1-Math.pow(1-y,2),T=i.getColor(_);return{value:y,color:T}});else if(t==="ease-out-sqrt")u=Array.from({length:n},(g,x)=>{const y=x*o,_=Math.pow(y,.5),T=i.getColor(_);return{value:y,color:T}});else if(t==="ease-in-sqrt")u=Array.from({length:n},(g,x)=>{const y=x*o,_=1-Math.pow(1-y,.5),T=i.getColor(_);return{value:y,color:T}});else if(t==="ease-out-exp")u=Array.from({length:n},(g,x)=>{const y=x*o,_=1-Math.pow(2,-10*y),T=i.getColor(_);return{value:y,color:T}});else if(t==="ease-in-exp")u=Array.from({length:n},(g,x)=>{const y=x*o,_=Math.pow(2,10*y-10),T=i.getColor(_);return{value:y,color:T}});else throw new Error("Invalid ressampling method.");return new In({stops:u}).scale(r.min,r.max)}transparentStart(){const t=this.getRawColorStops();return t.unshift({value:t[0].value,color:t[0].color.slice()}),t[1].value+=.001,t.forEach(n=>{n.color.length===3&&n.color.push(255)}),t[0].color[3]=0,new In({stops:t})}hasTransparentStart(){return this[0].color.length===4&&this[0].color[3]===0}}const YA={NULL:new In({stops:[{value:0,color:[0,0,0,0]},{value:1,color:[0,0,0,0]}]}),GRAY:new In({stops:[{value:0,color:[0,0,0]},{value:1,color:[255,255,255]}]}),JET:new In({stops:[{value:0,color:[0,0,131]},{value:.125,color:[0,60,170]},{value:.375,color:[5,255,255]},{value:.625,color:[255,255,0]},{value:.875,color:[250,0,0]},{value:1,color:[128,0,0]}]}),HSV:new In({stops:[{value:0,color:[255,0,0]},{value:.169,color:[253,255,2]},{value:.173,color:[247,255,2]},{value:.337,color:[0,252,4]},{value:.341,color:[0,252,10]},{value:.506,color:[1,249,255]},{value:.671,color:[2,0,253]},{value:.675,color:[8,0,253]},{value:.839,color:[255,0,251]},{value:.843,color:[255,0,245]},{value:1,color:[255,0,6]}]}),HOT:new In({stops:[{value:0,color:[0,0,0]},{value:.3,color:[230,0,0]},{value:.6,color:[255,210,0]},{value:1,color:[255,255,255]}]}),SPRING:new In({stops:[{value:0,color:[255,0,255]},{value:1,color:[255,255,0]}]}),SUMMER:new In({stops:[{value:0,color:[0,128,102]},{value:1,color:[255,255,102]}]}),AUTOMN:new In({stops:[{value:0,color:[255,0,0]},{value:1,color:[255,255,0]}]}),WINTER:new In({stops:[{value:0,color:[0,0,255]},{value:1,color:[0,255,128]}]}),BONE:new In({stops:[{value:0,color:[0,0,0]},{value:.376,color:[84,84,116]},{value:.753,color:[169,200,200]},{value:1,color:[255,255,255]}]}),COPPER:new In({stops:[{value:0,color:[0,0,0]},{value:.804,color:[255,160,102]},{value:1,color:[255,199,127]}]}),GREYS:new In({stops:[{value:0,color:[0,0,0]},{value:1,color:[255,255,255]}]}),YIGNBU:new In({stops:[{value:0,color:[8,29,88]},{value:.125,color:[37,52,148]},{value:.25,color:[34,94,168]},{value:.375,color:[29,145,192]},{value:.5,color:[65,182,196]},{value:.625,color:[127,205,187]},{value:.75,color:[199,233,180]},{value:.875,color:[237,248,217]},{value:1,color:[255,255,217]}]}),GREENS:new In({stops:[{value:0,color:[0,68,27]},{value:.125,color:[0,109,44]},{value:.25,color:[35,139,69]},{value:.375,color:[65,171,93]},{value:.5,color:[116,196,118]},{value:.625,color:[161,217,155]},{value:.75,color:[199,233,192]},{value:.875,color:[229,245,224]},{value:1,color:[247,252,245]}]}),YIORRD:new In({stops:[{value:0,color:[128,0,38]},{value:.125,color:[189,0,38]},{value:.25,color:[227,26,28]},{value:.375,color:[252,78,42]},{value:.5,color:[253,141,60]},{value:.625,color:[254,178,76]},{value:.75,color:[254,217,118]},{value:.875,color:[255,237,160]},{value:1,color:[255,255,204]}]}),BLUERED:new In({stops:[{value:0,color:[0,0,255]},{value:1,color:[255,0,0]}]}),RDBU:new In({stops:[{value:0,color:[5,10,172]},{value:.35,color:[106,137,247]},{value:.5,color:[190,190,190]},{value:.6,color:[220,170,132]},{value:.7,color:[230,145,90]},{value:1,color:[178,10,28]}]}),PICNIC:new In({stops:[{value:0,color:[0,0,255]},{value:.1,color:[51,153,255]},{value:.2,color:[102,204,255]},{value:.3,color:[153,204,255]},{value:.4,color:[204,204,255]},{value:.5,color:[255,255,255]},{value:.6,color:[255,204,255]},{value:.7,color:[255,153,255]},{value:.8,color:[255,102,204]},{value:.9,color:[255,102,102]},{value:1,color:[255,0,0]}]}),RAINBOW:new In({stops:[{value:0,color:[150,0,90]},{value:.125,color:[0,0,200]},{value:.25,color:[0,25,255]},{value:.375,color:[0,152,255]},{value:.5,color:[44,255,150]},{value:.625,color:[151,255,0]},{value:.75,color:[255,234,0]},{value:.875,color:[255,111,0]},{value:1,color:[255,0,0]}]}),PORTLAND:new In({stops:[{value:0,color:[12,51,131]},{value:.25,color:[10,136,186]},{value:.5,color:[242,211,56]},{value:.75,color:[242,143,56]},{value:1,color:[217,30,30]}]}),BLACKBODY:new In({stops:[{value:0,color:[0,0,0]},{value:.2,color:[230,0,0]},{value:.4,color:[230,210,0]},{value:.7,color:[255,255,255]},{value:1,color:[160,200,255]}]}),EARTH:new In({stops:[{value:0,color:[0,0,130]},{value:.1,color:[0,180,180]},{value:.2,color:[40,210,40]},{value:.4,color:[230,230,50]},{value:.6,color:[120,70,20]},{value:1,color:[255,255,255]}]}),ELECTRIC:new In({stops:[{value:0,color:[0,0,0]},{value:.15,color:[30,0,100]},{value:.4,color:[120,0,100]},{value:.6,color:[160,90,0]},{value:.8,color:[230,200,0]},{value:1,color:[255,250,220]}]}),VIRIDIS:new In({stops:[{value:0,color:[68,1,84]},{value:.13,color:[71,44,122]},{value:.25,color:[59,81,139]},{value:.38,color:[44,113,142]},{value:.5,color:[33,144,141]},{value:.63,color:[39,173,129]},{value:.75,color:[92,200,99]},{value:.88,color:[170,220,50]},{value:1,color:[253,231,37]}]}),INFERNO:new In({stops:[{value:0,color:[0,0,4]},{value:.13,color:[31,12,72]},{value:.25,color:[85,15,109]},{value:.38,color:[136,34,106]},{value:.5,color:[186,54,85]},{value:.63,color:[227,89,51]},{value:.75,color:[249,140,10]},{value:.88,color:[249,201,50]},{value:1,color:[252,255,164]}]}),MAGMA:new In({stops:[{value:0,color:[0,0,4]},{value:.13,color:[28,16,68]},{value:.25,color:[79,18,123]},{value:.38,color:[129,37,129]},{value:.5,color:[181,54,122]},{value:.63,color:[229,80,100]},{value:.75,color:[251,135,97]},{value:.88,color:[254,194,135]},{value:1,color:[252,253,191]}]}),PLASMA:new In({stops:[{value:0,color:[13,8,135]},{value:.13,color:[75,3,161]},{value:.25,color:[125,3,168]},{value:.38,color:[168,34,150]},{value:.5,color:[203,70,121]},{value:.63,color:[229,107,93]},{value:.75,color:[248,148,65]},{value:.88,color:[253,195,40]},{value:1,color:[240,249,33]}]}),WARM:new In({stops:[{value:0,color:[125,0,179]},{value:.13,color:[172,0,187]},{value:.25,color:[219,0,170]},{value:.38,color:[255,0,130]},{value:.5,color:[255,63,74]},{value:.63,color:[255,123,0]},{value:.75,color:[234,176,0]},{value:.88,color:[190,228,0]},{value:1,color:[147,255,0]}]}),COOL:new In({stops:[{value:0,color:[125,0,179]},{value:.13,color:[116,0,218]},{value:.25,color:[98,74,237]},{value:.38,color:[68,146,231]},{value:.5,color:[0,204,197]},{value:.63,color:[0,247,146]},{value:.75,color:[0,255,88]},{value:.88,color:[40,255,8]},{value:1,color:[147,255,0]}]}),RAINBOW_SOFT:new In({stops:[{value:0,color:[125,0,179]},{value:.1,color:[199,0,180]},{value:.2,color:[255,0,121]},{value:.3,color:[255,108,0]},{value:.4,color:[222,194,0]},{value:.5,color:[150,255,0]},{value:.6,color:[0,255,55]},{value:.7,color:[0,246,150]},{value:.8,color:[50,167,222]},{value:.9,color:[103,51,235]},{value:1,color:[124,0,186]}]}),BATHYMETRY:new In({stops:[{value:0,color:[40,26,44]},{value:.13,color:[59,49,90]},{value:.25,color:[64,76,139]},{value:.38,color:[63,110,151]},{value:.5,color:[72,142,158]},{value:.63,color:[85,174,163]},{value:.75,color:[120,206,163]},{value:.88,color:[187,230,172]},{value:1,color:[253,254,204]}]}),CDOM:new In({stops:[{value:0,color:[47,15,62]},{value:.13,color:[87,23,86]},{value:.25,color:[130,28,99]},{value:.38,color:[171,41,96]},{value:.5,color:[206,67,86]},{value:.63,color:[230,106,84]},{value:.75,color:[242,149,103]},{value:.88,color:[249,193,135]},{value:1,color:[254,237,176]}]}),CHLOROPHYLL:new In({stops:[{value:0,color:[18,36,20]},{value:.13,color:[25,63,41]},{value:.25,color:[24,91,59]},{value:.38,color:[13,119,72]},{value:.5,color:[18,148,80]},{value:.63,color:[80,173,89]},{value:.75,color:[132,196,122]},{value:.88,color:[175,221,162]},{value:1,color:[215,249,208]}]}),DENSITY:new In({stops:[{value:0,color:[54,14,36]},{value:.13,color:[89,23,80]},{value:.25,color:[110,45,132]},{value:.38,color:[120,77,178]},{value:.5,color:[120,113,213]},{value:.63,color:[115,151,228]},{value:.75,color:[134,185,227]},{value:.88,color:[177,214,227]},{value:1,color:[230,241,241]}]}),FREESURFACE_BLUE:new In({stops:[{value:0,color:[30,4,110]},{value:.13,color:[47,14,176]},{value:.25,color:[41,45,236]},{value:.38,color:[25,99,212]},{value:.5,color:[68,131,200]},{value:.63,color:[114,156,197]},{value:.75,color:[157,181,203]},{value:.88,color:[200,208,216]},{value:1,color:[241,237,236]}]}),FREESURFACE_RED:new In({stops:[{value:0,color:[60,9,18]},{value:.13,color:[100,17,27]},{value:.25,color:[142,20,29]},{value:.38,color:[177,43,27]},{value:.5,color:[192,87,63]},{value:.63,color:[205,125,105]},{value:.75,color:[216,162,148]},{value:.88,color:[227,199,193]},{value:1,color:[241,237,236]}]}),OXYGEN:new In({stops:[{value:0,color:[64,5,5]},{value:.13,color:[106,6,15]},{value:.25,color:[144,26,7]},{value:.38,color:[168,64,3]},{value:.5,color:[188,100,4]},{value:.63,color:[206,136,11]},{value:.75,color:[220,174,25]},{value:.88,color:[231,215,44]},{value:1,color:[248,254,105]}]}),PAR:new In({stops:[{value:0,color:[51,20,24]},{value:.13,color:[90,32,35]},{value:.25,color:[129,44,34]},{value:.38,color:[159,68,25]},{value:.5,color:[182,99,19]},{value:.63,color:[199,134,22]},{value:.75,color:[212,171,35]},{value:.88,color:[221,210,54]},{value:1,color:[225,253,75]}]}),PHASE:new In({stops:[{value:0,color:[145,105,18]},{value:.13,color:[184,71,38]},{value:.25,color:[186,58,115]},{value:.38,color:[160,71,185]},{value:.5,color:[110,97,218]},{value:.63,color:[50,123,164]},{value:.75,color:[31,131,110]},{value:.88,color:[77,129,34]},{value:1,color:[145,105,18]}]}),SALINITY:new In({stops:[{value:0,color:[42,24,108]},{value:.13,color:[33,50,162]},{value:.25,color:[15,90,145]},{value:.38,color:[40,118,137]},{value:.5,color:[59,146,135]},{value:.63,color:[79,175,126]},{value:.75,color:[120,203,104]},{value:.88,color:[193,221,100]},{value:1,color:[253,239,154]}]}),TEMPERATURE:new In({stops:[{value:0,color:[4,35,51]},{value:.13,color:[23,51,122]},{value:.25,color:[85,59,157]},{value:.38,color:[129,79,143]},{value:.5,color:[175,95,130]},{value:.63,color:[222,112,101]},{value:.75,color:[249,146,66]},{value:.88,color:[249,196,65]},{value:1,color:[232,250,91]}]}),TURBIDITY:new In({stops:[{value:0,color:[34,31,27]},{value:.13,color:[65,50,41]},{value:.25,color:[98,69,52]},{value:.38,color:[131,89,57]},{value:.5,color:[161,112,59]},{value:.63,color:[185,140,66]},{value:.75,color:[202,174,88]},{value:.88,color:[216,209,126]},{value:1,color:[233,246,171]}]}),VELOCITY_BLUE:new In({stops:[{value:0,color:[17,32,64]},{value:.13,color:[35,52,116]},{value:.25,color:[29,81,156]},{value:.38,color:[31,113,162]},{value:.5,color:[50,144,169]},{value:.63,color:[87,173,176]},{value:.75,color:[149,196,189]},{value:.88,color:[203,221,211]},{value:1,color:[254,251,230]}]}),VELOCITY_GREEN:new In({stops:[{value:0,color:[23,35,19]},{value:.13,color:[24,64,38]},{value:.25,color:[11,95,45]},{value:.38,color:[39,123,35]},{value:.5,color:[95,146,12]},{value:.63,color:[152,165,18]},{value:.75,color:[201,186,69]},{value:.88,color:[233,216,137]},{value:1,color:[255,253,205]}]}),CUBEHELIX:new In({stops:[{value:0,color:[0,0,0]},{value:.07,color:[22,5,59]},{value:.13,color:[60,4,105]},{value:.2,color:[109,1,135]},{value:.27,color:[161,0,147]},{value:.33,color:[210,2,142]},{value:.4,color:[251,11,123]},{value:.47,color:[255,29,97]},{value:.53,color:[255,54,69]},{value:.6,color:[255,85,46]},{value:.67,color:[255,120,34]},{value:.73,color:[255,157,37]},{value:.8,color:[241,191,57]},{value:.87,color:[224,220,93]},{value:.93,color:[218,241,142]},{value:1,color:[227,253,198]}]}),CIVIDIS:new In({stops:[{value:0,color:[0,32,77,255]},{value:.125,color:[5,54,110,255]},{value:.25,color:[65,77,108,255]},{value:.375,color:[97,100,111,255]},{value:.5,color:[125,124,121,255]},{value:.625,color:[156,149,120,255]},{value:.75,color:[190,175,111,255]},{value:.875,color:[225,204,94,255]},{value:1,color:[255,235,70,255]}]}),TURBO:new In({stops:[{value:0,color:[48,18,59,255]},{value:.125,color:[70,107,227,255]},{value:.25,color:[40,187,236,255]},{value:.375,color:[49,242,153,255]},{value:.5,color:[162,252,60,255]},{value:.625,color:[237,208,58,255]},{value:.75,color:[251,128,34,255]},{value:.875,color:[210,49,5,255]},{value:1,color:[122,4,3,255]}]}),ROCKET:new In({stops:[{value:0,color:[250,235,221,0]},{value:.133,color:[250,235,221,255]},{value:.266,color:[246,170,130,255]},{value:.4,color:[240,96,67,255]},{value:.533,color:[203,27,79,255]},{value:.666,color:[132,30,90,255]},{value:.8,color:[63,27,68,255]},{value:1,color:[3,5,26,255]}]}),MAKO:new In({stops:[{value:0,color:[11,4,5,255]},{value:.125,color:[43,28,53,255]},{value:.25,color:[62,53,107,255]},{value:.375,color:[59,86,152,255]},{value:.5,color:[53,123,162,255]},{value:.625,color:[53,158,170,255]},{value:.75,color:[73,193,173,255]},{value:.875,color:[150,221,181,255]},{value:1,color:[222,245,229,255]}]})},VD=[["#1D5B79","#468B97","#EF6262","#F3AA60"],["#614BC3","#33BBC5","#85E6C5","#C8FFE0"],["#461959","#7A316F","#CD6688","#AED8CC"],["#0079FF","#00DFA2","#F6FA70","#FF0060"],["#39B5E0","#A31ACB","#FF78F0","#F5EA5A"],["#37E2D5","#590696","#C70A80","#FBCB0A"],["#FFD36E","#FFF56D","#99FFCD","#9FB4FF"],["#00EAD3","#FFF5B7","#FF449F","#005F99"],["#10A19D","#540375","#FF7000","#FFBF00"]];function JA(){return VD[~~(Math.random()*VD.length)][~~(Math.random()*4)]}function DS(){return`maptiler_source_${Rj()}`}function zS(){return`maptiler_layer_${Rj()}`}function GD(e,t){if(t<=e[0].zoom)return e[0].value;if(t>=e[e.length-1].zoom)return e[e.length-1].value;for(let n=0;n<e.length-1;n+=1)if(t>=e[n].zoom&&t<e[n+1].zoom){const r=e[n+1].zoom-e[n].zoom,i=(t-e[n].zoom)/r;return i*e[n+1].value+(1-i)*e[n].value}return 0}function fg(e){return["interpolate",["linear"],["zoom"],...e.map(t=>[t.zoom,t.value]).flat()]}function qr(e){return["interpolate",["linear"],["zoom"],...e.map(t=>[t.zoom,t.value]).flat()]}function ooe(e,t){if(typeof t=="number"&&typeof e=="number")return 2*t+e;if(typeof t=="number"&&Array.isArray(e))return["interpolate",["linear"],["zoom"],...e.map(n=>[n.zoom,2*t+n.value]).flat()];if(typeof e=="number"&&Array.isArray(t))return["interpolate",["linear"],["zoom"],...t.map(n=>[n.zoom,2*n.value+e]).flat()];if(Array.isArray(e)&&Array.isArray(t)){const n=Array.from(new Set([...e.map(r=>r.zoom),...t.map(r=>r.zoom)])).sort((r,i)=>r<i?-1:1);return["interpolate",["linear"],["zoom"],...n.map(r=>[r,2*GD(t,r)+GD(e,r)]).flat()]}return 0}function soe(e,t){return["interpolate",["linear"],["get",t],...e.map(n=>[n.propertyValue,n.value]).flat()]}function Jj(e){const t=e.trimStart(),n=`${t}${" ".repeat(e.length-t.length)}`,r=Array.from(n);if(!r.every(l=>l===" "||l==="_"))throw new Error("A dash pattern must be composed only of whitespace and underscore characters.");if(!(r.some(l=>l==="_")&&r.some(l=>l===" ")))throw new Error("A dash pattern must contain at least one underscore and one whitespace character");const u=[1];for(let l=1;l<r.length;l+=1){const p=r[l-1],g=r[l];p===g?u[u.length-1]+=1:u.push(1)}return u}function HD(e,t){return["interpolate",["linear"],["get",t],...e.map(n=>[n.value,n.color]).flat()]}function ZD(e,t,n=!0){return n?["interpolate",["linear"],["zoom"],0,["interpolate",["linear"],["get",t],...e.map(r=>[r.value,r.pointRadius*.025]).flat()],2,["interpolate",["linear"],["get",t],...e.map(r=>[r.value,r.pointRadius*.05]).flat()],4,["interpolate",["linear"],["get",t],...e.map(r=>[r.value,r.pointRadius*.1]).flat()],8,["interpolate",["linear"],["get",t],...e.map(r=>[r.value,r.pointRadius*.25]).flat()],16,["interpolate",["linear"],["get",t],...e.map(r=>[r.value,r.pointRadius]).flat()]]:["interpolate",["linear"],["get",t],...e.map(r=>[r.value,r.pointRadius]).flat()]}function aoe(e,t,n=!0){return n?["interpolate",["linear"],["zoom"],0,["interpolate",["linear"],["get",t],...e.map(r=>[r.propertyValue,r.value*.025]).flat()],2,["interpolate",["linear"],["get",t],...e.map(r=>[r.propertyValue,r.value*.05]).flat()],4,["interpolate",["linear"],["get",t],...e.map(r=>[r.propertyValue,r.value*.1]).flat()],8,["interpolate",["linear"],["get",t],...e.map(r=>[r.propertyValue,r.value*.25]).flat()],16,["interpolate",["linear"],["get",t],...e.map(r=>[r.propertyValue,r.value]).flat()]]:["interpolate",["linear"],["get",t],...e.map(r=>[r.propertyValue,r.value]).flat()]}function WD(e,t){return e.every(n=>n.color[3]===e[0].color[3])?e[0].color[3]?e[0].color[3]/255:1:["interpolate",["linear"],["get",t],...e.getRawColorStops().map(n=>{const r=n.value,i=n.color;return[r,i.length===4?i[3]/255:1]}).flat()]}function loe(e,t=10){return["interpolate",["linear"],["heatmap-density"],...Array.from({length:t+1},(n,r)=>{const i=r/t;return[i,e.getColorHex(i)]}).flat()]}var uoe=Object.defineProperty,coe=Object.defineProperties,hoe=Object.getOwnPropertyDescriptors,KD=Object.getOwnPropertySymbols,foe=Object.prototype.hasOwnProperty,doe=Object.prototype.propertyIsEnumerable,XD=(e,t,n)=>t in e?uoe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dg=(e,t)=>{for(var n in t||(t={}))foe.call(t,n)&&XD(e,n,t[n]);if(KD)for(var n of KD(t))doe.call(t,n)&&XD(e,n,t[n]);return e},poe=(e,t)=>coe(e,hoe(t)),moe=(e,t,n)=>new Promise((r,i)=>{var o=p=>{try{l(n.next(p))}catch(g){i(g)}},u=p=>{try{l(n.throw(p))}catch(g){i(g)}},l=p=>p.done?r(p.value):Promise.resolve(p.value).then(o,u);l((n=n.apply(e,t)).next())});function goe(e,t){return moe(this,arguments,function*(n,r,i={}){var o,u,l;if(!r.sourceId&&!r.data)throw new Error("Creating a polyline layer requires an existing .sourceId or a valid .data property");let p=r.data;if(typeof p=="string"){if(MS(p))p=`https://api.maptiler.com/data/${r.data}/features.json?key=${ns.apiKey}`;else if(((o=p.split(".").pop())==null?void 0:o.toLowerCase().trim())==="gpx"){const x=yield(yield fetch(p,i)).text();p=WA(x)}else if(((u=p.split(".").pop())==null?void 0:u.toLowerCase().trim())==="kml"){const x=yield(yield fetch(p,i)).text();p=KA(x)}else{const g=(l=tie(p))!=null?l:Yj(p);g&&(p=g)}if(!p)throw new Error("Polyline data was provided as string but is incompatible with valid formats.")}return yoe(n,poe(dg({},r),{data:p}))})}function yoe(e,t){var n,r,i,o,u,l,p,g,x,y,_,T,A,O,N,k,R,z,D,U;if(t.layerId&&e.getLayer(t.layerId))throw new Error(`A layer already exists with the layer id: ${t.layerId}`);const q=(n=t.sourceId)!=null?n:DS(),G=(r=t.layerId)!=null?r:zS(),H={polylineLayerId:G,polylineOutlineLayerId:"",polylineSourceId:q};t.data&&!e.getSource(q)&&e.addSource(q,{type:"geojson",data:t.data});const J=(i=t.lineWidth)!=null?i:3,Y=(o=t.lineColor)!=null?o:JA(),X=(u=t.lineOpacity)!=null?u:1,ee=(l=t.lineBlur)!=null?l:0,ue=(p=t.lineGapWidth)!=null?p:0;let oe=(g=t.lineDashArray)!=null?g:null;const we=(x=t.outlineWidth)!=null?x:1,Ne=(y=t.outlineColor)!=null?y:"#FFFFFF",Be=(_=t.outlineOpacity)!=null?_:1,De=(T=t.outlineBlur)!=null?T:0;if(typeof oe=="string"&&(oe=Jj(oe)),t.outline===!0){const Ae=`${G}_outline`;H.polylineOutlineLayerId=Ae,e.addLayer({id:Ae,type:"line",source:q,layout:{"line-join":(A=t.lineJoin)!=null?A:"round","line-cap":(O=t.lineCap)!=null?O:"round"},minzoom:(N=t.minzoom)!=null?N:0,maxzoom:(k=t.maxzoom)!=null?k:23,paint:{"line-opacity":typeof Be=="number"?Be:qr(Be),"line-color":typeof Ne=="string"?Ne:fg(Ne),"line-width":ooe(J,we),"line-blur":typeof De=="number"?De:qr(De)}},t.beforeId)}return e.addLayer({id:G,type:"line",source:q,layout:{"line-join":(R=t.lineJoin)!=null?R:"round","line-cap":(z=t.lineCap)!=null?z:"round"},minzoom:(D=t.minzoom)!=null?D:0,maxzoom:(U=t.maxzoom)!=null?U:23,paint:dg({"line-opacity":typeof X=="number"?X:qr(X),"line-color":typeof Y=="string"?Y:fg(Y),"line-width":typeof J=="number"?J:qr(J),"line-blur":typeof ee=="number"?ee:qr(ee),"line-gap-width":typeof ue=="number"?ue:qr(ue)},oe&&{"line-dasharray":oe})},t.beforeId),H}function _oe(e,t){var n,r,i,o,u,l,p,g,x,y,_;if(t.layerId&&e.getLayer(t.layerId))throw new Error(`A layer already exists with the layer id: ${t.layerId}`);const T=(n=t.sourceId)!=null?n:DS(),A=(r=t.layerId)!=null?r:zS(),O={polygonLayerId:A,polygonOutlineLayerId:t.outline?`${A}_outline`:"",polygonSourceId:T};if(t.data&&!e.getSource(T)){let Y=t.data;typeof Y=="string"&&MS(Y)&&(Y=`https://api.maptiler.com/data/${Y}/features.json?key=${ns.apiKey}`),e.addSource(T,{type:"geojson",data:Y})}let N=(i=t.outlineDashArray)!=null?i:null;const k=(o=t.outlineWidth)!=null?o:1,R=(u=t.outlineColor)!=null?u:"#FFFFFF",z=(l=t.outlineOpacity)!=null?l:1,D=(p=t.outlineBlur)!=null?p:0,U=(g=t.fillColor)!=null?g:JA(),q=(x=t.fillOpacity)!=null?x:1,G=(y=t.outlinePosition)!=null?y:"center",H=(_=t.pattern)!=null?_:null;typeof N=="string"&&(N=Jj(N));const J=(Y=null)=>{var X,ee,ue,oe,we,Ne;if(e.addLayer({id:A,type:"fill",source:T,minzoom:(X=t.minzoom)!=null?X:0,maxzoom:(ee=t.maxzoom)!=null?ee:23,paint:dg({"fill-color":typeof U=="string"?U:fg(U),"fill-opacity":typeof q=="number"?q:qr(q)},Y&&{"fill-pattern":Y})},t.beforeId),t.outline===!0){let Be;G==="inside"?typeof k=="number"?Be=.5*k:Be=qr(k.map(({zoom:De,value:Ae})=>({zoom:De,value:.5*Ae}))):G==="outside"?typeof k=="number"?Be=-.5*k:Be=qr(k.map(De=>({zoom:De.zoom,value:-.5*De.value}))):Be=0,e.addLayer({id:O.polygonOutlineLayerId,type:"line",source:T,layout:{"line-join":(ue=t.outlineJoin)!=null?ue:"round","line-cap":(oe=t.outlineCap)!=null?oe:"butt"},minzoom:(we=t.minzoom)!=null?we:0,maxzoom:(Ne=t.maxzoom)!=null?Ne:23,paint:dg({"line-opacity":typeof z=="number"?z:qr(z),"line-color":typeof R=="string"?R:fg(R),"line-width":typeof k=="number"?k:qr(k),"line-blur":typeof D=="number"?D:qr(D),"line-offset":Be},N&&{"line-dasharray":N})},t.beforeId)}};return H?e.hasImage(H)?J(H):e.loadImage(H).then(Y=>{e.addImage(H,Y.data),J(H)}).catch(Y=>(console.error("Could not load the pattern image.",Y.message),J())):J(),O}function voe(e,t){var n,r,i,o,u,l,p,g,x,y,_,T,A,O,N,k;if(t.layerId&&e.getLayer(t.layerId))throw new Error(`A layer already exists with the layer id: ${t.layerId}`);const R=(n=t.minPointRadius)!=null?n:10,z=(r=t.maxPointRadius)!=null?r:50,D=(i=t.cluster)!=null?i:!1,U=20,q=Array.isArray(t.pointColor)?t.pointColor:YA.TURBO.scale(10,t.cluster?1e4:1e3).resample("ease-out-square"),G=q.getBounds(),H=(o=t.sourceId)!=null?o:DS(),J=(u=t.layerId)!=null?u:zS(),Y=(l=t.showLabel)!=null?l:D,X=(p=t.alignOnViewport)!=null?p:!0,ee=(g=t.outline)!=null?g:!1,ue=(x=t.outlineOpacity)!=null?x:1,oe=(y=t.outlineWidth)!=null?y:1,we=(_=t.outlineColor)!=null?_:"#FFFFFF";let Ne;const Be=(T=t.zoomCompensation)!=null?T:!0,De=(A=t.minzoom)!=null?A:0,Ae=(O=t.maxzoom)!=null?O:23;typeof t.pointOpacity=="number"?Ne=t.pointOpacity:Array.isArray(t.pointOpacity)?Ne=qr(t.pointOpacity):t.cluster?Ne=WD(q,"point_count"):t.property?Ne=WD(q,t.property):Ne=qr([{zoom:De,value:0},{zoom:De+.25,value:1},{zoom:Ae-.25,value:1},{zoom:Ae,value:0}]);const ve={pointLayerId:J,clusterLayerId:"",labelLayerId:"",pointSourceId:H};if(t.data&&!e.getSource(H)){let ce=t.data;typeof ce=="string"&&MS(ce)&&(ce=`https://api.maptiler.com/data/${ce}/features.json?key=${ns.apiKey}`),e.addSource(H,{type:"geojson",data:ce,cluster:D})}if(D){ve.clusterLayerId=`${J}_cluster`;const ce=Array.from({length:U},(xe,Ee)=>{const Ge=G.min+Ee*(G.max-G.min)/(U-1);return{value:Ge,pointRadius:R+(z-R)*Math.pow(Ee/(U-1),.5),color:q.getColorHex(Ge)}});e.addLayer({id:ve.clusterLayerId,type:"circle",source:H,filter:["has","point_count"],paint:dg({"circle-color":typeof t.pointColor=="string"?t.pointColor:HD(ce,"point_count"),"circle-radius":typeof t.pointRadius=="number"?t.pointRadius:Array.isArray(t.pointRadius)?qr(t.pointRadius):ZD(ce,"point_count",!1),"circle-pitch-alignment":X?"viewport":"map","circle-pitch-scale":"map","circle-opacity":Ne},ee&&{"circle-stroke-opacity":typeof ue=="number"?ue:qr(ue),"circle-stroke-width":typeof oe=="number"?oe:qr(oe),"circle-stroke-color":typeof we=="string"?we:fg(we)}),minzoom:De,maxzoom:Ae},t.beforeId),e.addLayer({id:ve.pointLayerId,type:"circle",source:H,filter:["!",["has","point_count"]],paint:dg({"circle-pitch-alignment":X?"viewport":"map","circle-pitch-scale":"map","circle-color":typeof t.pointColor=="string"?t.pointColor:q.getColorHex(q.getBounds().min),"circle-radius":typeof t.pointRadius=="number"?t.pointRadius:Array.isArray(t.pointRadius)?qr(t.pointRadius):ce[0].pointRadius*.75,"circle-opacity":Ne},ee&&{"circle-stroke-opacity":typeof ue=="number"?ue:qr(ue),"circle-stroke-width":typeof oe=="number"?oe:qr(oe),"circle-stroke-color":typeof we=="string"?we:fg(we)}),minzoom:De,maxzoom:Ae},t.beforeId)}else{let ce=typeof t.pointColor=="string"?t.pointColor:Array.isArray(t.pointColor)?t.pointColor.getColorHex(t.pointColor.getBounds().min):JA(),xe=typeof t.pointRadius=="number"?Be?qr([{zoom:0,value:t.pointRadius*.025},{zoom:2,value:t.pointRadius*.05},{zoom:4,value:t.pointRadius*.1},{zoom:8,value:t.pointRadius*.25},{zoom:16,value:t.pointRadius*1}]):t.pointRadius:Array.isArray(t.pointRadius)?qr(t.pointRadius):Be?qr([{zoom:0,value:R*.05},{zoom:2,value:R*.1},{zoom:4,value:R*.2},{zoom:8,value:R*.5},{zoom:16,value:R*1}]):R;if(t.property&&Array.isArray(t.pointColor)){const Ee=Array.from({length:U},(Ge,$e)=>{const be=G.min+$e*(G.max-G.min)/(U-1);return{value:be,pointRadius:typeof t.pointRadius=="number"?t.pointRadius:R+(z-R)*Math.pow($e/(U-1),.5),color:typeof t.pointColor=="string"?t.pointColor:q.getColorHex(be)}});ce=HD(Ee,t.property),xe=ZD(Ee,t.property,Be)}e.addLayer({id:ve.pointLayerId,type:"circle",source:H,layout:{"circle-sort-key":t.property?["/",1,["get",t.property]]:0},paint:dg({"circle-pitch-alignment":X?"viewport":"map","circle-pitch-scale":"map","circle-color":ce,"circle-opacity":Ne,"circle-radius":xe},ee&&{"circle-stroke-opacity":typeof ue=="number"?ue:qr(ue),"circle-stroke-width":typeof oe=="number"?oe:qr(oe),"circle-stroke-color":typeof we=="string"?we:fg(we)}),minzoom:De,maxzoom:Ae},t.beforeId)}if(Y!==!1&&(t.cluster||t.property)){ve.labelLayerId=`${J}_label`;const ce=(N=t.labelColor)!=null?N:"#fff",xe=(k=t.labelSize)!=null?k:12;e.addLayer({id:ve.labelLayerId,type:"symbol",source:H,filter:["has",t.cluster?"point_count":t.property],layout:{"text-field":t.cluster?"{point_count_abbreviated}":`{${t.property}}`,"text-font":["Noto Sans Regular"],"text-size":xe,"text-pitch-alignment":X?"viewport":"map","symbol-sort-key":["/",1,["get",t.cluster?"point_count":t.property]]},paint:{"text-color":ce,"text-opacity":Ne},minzoom:De,maxzoom:Ae},t.beforeId)}return ve}function xoe(e,t){var n,r,i,o,u,l,p,g,x,y;if(t.layerId&&e.getLayer(t.layerId))throw new Error(`A layer already exists with the layer id: ${t.layerId}`);const _=(n=t.sourceId)!=null?n:DS(),T=(r=t.layerId)!=null?r:zS(),A=(i=t.minzoom)!=null?i:0,O=(o=t.maxzoom)!=null?o:23,N=(u=t.zoomCompensation)!=null?u:!0,k=(l=t.opacity)!=null?l:[{zoom:A,value:0},{zoom:A+.25,value:1},{zoom:O-.25,value:1},{zoom:O,value:0}];let R=Array.isArray(t.colorRamp)?t.colorRamp:YA.TURBO.transparentStart();const z=R.getBounds();(z.min!==0||z.max!==1)&&(R=R.scale(0,1)),R.hasTransparentStart()||(R=R.transparentStart());const D=(p=t.intensity)!=null?p:[{zoom:0,value:.01},{zoom:4,value:.2},{zoom:16,value:1}],U=(g=t.property)!=null?g:null,q=(x=t.weight)!=null?x:1;let G=1;U?typeof q=="number"?(G=q,typeof t.weight=="number"&&console.warn("The option `.property` is ignored when `.propertyValueWeights` is not of type `PropertyValueWeights`")):Array.isArray(q)?G=soe(q,U):console.warn("The option `.property` is ignored when `.propertyValueWeights` is not of type `PropertyValueWeights`"):typeof q=="number"?G=q:Array.isArray(q)&&console.warn("The options `.propertyValueWeights` can only be used when `.property` is provided.");const H=[{zoom:0,value:50*.025},{zoom:2,value:50*.05},{zoom:4,value:50*.1},{zoom:8,value:50*.25},{zoom:16,value:50}],J=(y=t.radius)!=null?y:N?H:10;let Y=1;typeof J=="number"?Y=J:Array.isArray(J)&&"zoom"in J[0]?Y=qr(J):U&&Array.isArray(J)&&"propertyValue"in J[0]?Y=aoe(J,U,N):!U&&Array.isArray(J)&&"propertyValue"in J[0]?(Y=qr(H),console.warn("The option `.radius` can only be property-driven if the option `.property` is provided.")):Y=qr(H);const X={heatmapLayerId:T,heatmapSourceId:_};if(t.data&&!e.getSource(_)){let ee=t.data;typeof ee=="string"&&MS(ee)&&(ee=`https://api.maptiler.com/data/${ee}/features.json?key=${ns.apiKey}`),e.addSource(_,{type:"geojson",data:ee})}return e.addLayer({id:T,type:"heatmap",source:_,minzoom:A,maxzoom:O,paint:{"heatmap-weight":G,"heatmap-intensity":typeof D=="number"?D:qr(D),"heatmap-color":loe(R),"heatmap-radius":Y,"heatmap-opacity":typeof k=="number"?k:qr(k)}}),X}const boe={addPolyline:goe,addPolygon:_oe,addPoint:voe,addHeatmap:xoe},{setRTLTextPlugin:woe,getRTLTextPluginStatus:Eoe,LngLat:Soe,LngLatBounds:Toe,MercatorCoordinate:Coe,Evented:Ioe,AJAXError:Poe,prewarm:Loe,clearPrewarmedResources:Aoe,addProtocol:xP,removeProtocol:Ooe,Hash:koe,Point:Roe,config:Moe,EdgeInsets:Noe,DragRotateHandler:Doe,DragPanHandler:zoe,TwoFingersTouchZoomRotateHandler:Foe,DoubleClickZoomHandler:Boe,TwoFingersTouchZoomHandler:joe,TwoFingersTouchRotateHandler:$oe,getWorkerCount:Uoe,setWorkerCount:qoe,getMaxParallelImageRequests:Voe,setMaxParallelImageRequests:Goe,getWorkerUrl:Hoe,setWorkerUrl:Zoe,addSourceType:Woe,importScriptInWorkers:Koe}=xn;function Xoe(){return zre.version}function Yoe(){return xn.getVersion()}const Joe=xn.Map,Qoe=xn.Marker,ese=xn.Popup,tse=xn.Style,nse=xn.CanvasSource,rse=xn.GeoJSONSource,ise=xn.ImageSource,ose=xn.RasterTileSource,sse=xn.RasterDEMTileSource,ase=xn.VectorTileSource,lse=xn.VideoSource;xn.NavigationControl;xn.GeolocateControl;xn.AttributionControl;xn.LogoControl;xn.ScaleControl;xn.FullscreenControl;xn.TerrainControl;const use=xn.BoxZoomHandler,cse=xn.ScrollZoomHandler,hse=xn.CooperativeGesturesHandler,fse=xn.KeyboardHandler,dse=xn.TwoFingersTouchPitchHandler,pse=xn.MapWheelEvent,mse=xn.MapTouchEvent,gse=xn.MapMouseEvent,yse=Object.freeze(Object.defineProperty({__proto__:null,AJAXError:Poe,AttributionControl:Die,BoxZoomHandler:Fie,BoxZoomHandlerMLGL:use,CanvasSource:Lie,CanvasSourceMLGL:nse,ColorRamp:In,ColorRampCollection:YA,CooperativeGesturesHandler:jie,CooperativeGesturesHandlerMLGL:hse,DoubleClickZoomHandler:Boe,DragPanHandler:zoe,DragRotateHandler:Doe,EdgeInsets:Noe,Evented:Ioe,FullscreenControl:jj,GeoJSONSource:Aie,GeoJSONSourceMLGL:rse,GeolocateControl:zj,GeolocationType:Vj,Hash:koe,ImageSource:Oie,ImageSourceMLGL:ise,KeyboardHandler:$ie,KeyboardHandlerMLGL:fse,Language:Ir,LanguageGeocoding:wx,LngLat:Soe,LngLatBounds:Toe,LogoControl:Aj,Map:HA,MapMLGL:Joe,MapMouseEvent:Gie,MapMouseEventMLGL:gse,MapStyle:kS,MapStyleVariant:LS,MapTouchEvent:Vie,MapTouchEventMLGL:mse,MapWheelEvent:qie,MapWheelEventMLGL:pse,MaptilerGeolocateControl:Fj,MaptilerLogoControl:cP,MaptilerNavigationControl:Dj,MaptilerTerrainControl:Mj,Marker:Gj,MarkerMLGL:Qoe,MercatorCoordinate:Coe,NavigationControl:Nj,Point:Roe,Popup:Iie,PopupMLGL:ese,RasterDEMTileSource:Rie,RasterDEMTileSourceMLGL:sse,RasterTileSource:kie,RasterTileSourceMLGL:ose,ReferenceMapStyle:AS,ScaleControl:Bj,ScrollZoomHandler:Bie,ScrollZoomHandlerMLGL:cse,SdkConfig:Lj,ServiceError:Qu,Style:Pie,StyleMLGL:tse,TerrainControl:zie,TwoFingersTouchPitchHandler:Uie,TwoFingersTouchPitchHandlerMLGL:dse,TwoFingersTouchRotateHandler:$oe,TwoFingersTouchZoomHandler:joe,TwoFingersTouchZoomRotateHandler:Foe,VectorTileSource:Mie,VectorTileSourceMLGL:ase,VideoSource:Nie,VideoSourceMLGL:lse,addProtocol:xP,addSourceType:Woe,bufferToPixelDataBrowser:Cj,circumferenceAtLatitude:Sj,clearPrewarmedResources:Aoe,config:ns,configMLGL:Moe,coordinates:Wne,data:Xne,elevation:mre,expandMapStyle:DA,geocoding:Vne,geolocation:oP,getAutoLanguageGeocoding:fj,getBrowserLanguage:uP,getBufferToPixelDataParser:UA,getMapLibreVersion:Yoe,getMaxParallelImageRequests:Voe,getRTLTextPluginStatus:Eoe,getTileCache:$A,getVersion:Xoe,getWorkerCount:Uoe,getWorkerUrl:Hoe,gpx:WA,gpxOrKml:Yj,hasChildNodeWithName:ZA,helpers:boe,importScriptInWorkers:Koe,isLanguageSupported:lP,kml:KA,mapStylePresetList:C1,math:jA,misc:gj,prewarm:Loe,removeProtocol:Ooe,setMaxParallelImageRequests:Goe,setRTLTextPlugin:woe,setWorkerCount:qoe,setWorkerUrl:Zoe,staticMaps:sre,str2xml:NS,styleToStyle:OS,xml2str:_P},Symbol.toStringTag,{value:"Module"}));var Qj={},_se=Object.defineProperty,vse=(e,t,n)=>t in e?_se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,YD=(e,t,n)=>(vse(e,typeof t!="symbol"?t+"":t,n),n),e$=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},wc=(e,t,n)=>(e$(e,t,"read from private field"),n?n.call(e):t.get(e)),JD=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},X2=(e,t,n,r)=>(e$(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);function Ai(){}function xse(e,t){for(const n in t)e[n]=t[n];return e}function t$(e){return e()}function QD(){return Object.create(null)}function Td(e){e.forEach(t$)}function n$(e){return typeof e=="function"}function im(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let Mb;function ia(e,t){return e===t?!0:(Mb||(Mb=document.createElement("a")),Mb.href=t,e===Mb.href)}function bse(e){return Object.keys(e).length===0}function wse(e,t,n,r){if(e){const i=r$(e,t,n,r);return e[0](i)}}function r$(e,t,n,r){return e[1]&&r?xse(n.ctx.slice(),e[1](r(t))):n.ctx}function Ese(e,t,n,r){if(e[2]&&r){const i=e[2](r(n));if(t.dirty===void 0)return i;if(typeof i=="object"){const o=[],u=Math.max(t.dirty.length,i.length);for(let l=0;l<u;l+=1)o[l]=t.dirty[l]|i[l];return o}return t.dirty|i}return t.dirty}function Sse(e,t,n,r,i,o){if(i){const u=r$(t,n,r,o);e.p(u,i)}}function Tse(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let r=0;r<n;r++)t[r]=-1;return t}return-1}function e3(e){return e??""}function br(e,t){e.appendChild(t)}function Fi(e,t,n){e.insertBefore(t,n||null)}function ki(e){e.parentNode&&e.parentNode.removeChild(e)}function ti(e){return document.createElement(e)}function Dc(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function jp(e){return document.createTextNode(e)}function Rl(){return jp(" ")}function Cse(){return jp("")}function Ca(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function Ise(e){return function(t){return t.preventDefault(),e.call(this,t)}}function At(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Pse(e){return Array.from(e.childNodes)}function I1(e,t){t=""+t,e.data!==t&&(e.data=t)}function t3(e,t){e.value=t??""}function Nb(e,t,n,r){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function Nu(e,t,n){e.classList.toggle(t,!!n)}function Lse(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}let P1;function H0(e){P1=e}function i$(){if(!P1)throw new Error("Function called outside component initialization");return P1}function Ase(e){i$().$$.on_destroy.push(e)}function Ose(){const e=i$();return(t,n,{cancelable:r=!1}={})=>{const i=e.$$.callbacks[t];if(i){const o=Lse(t,n,{cancelable:r});return i.slice().forEach(u=>{u.call(e,o)}),!o.defaultPrevented}return!0}}function n3(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(r=>r.call(this,t))}const Py=[],bP=[];let r_=[];const r3=[],kse=Promise.resolve();let wP=!1;function Rse(){wP||(wP=!0,kse.then(o$))}function EP(e){r_.push(e)}const Y2=new Set;let Ty=0;function o$(){if(Ty!==0)return;const e=P1;do{try{for(;Ty<Py.length;){const t=Py[Ty];Ty++,H0(t),Mse(t.$$)}}catch(t){throw Py.length=0,Ty=0,t}for(H0(null),Py.length=0,Ty=0;bP.length;)bP.pop()();for(let t=0;t<r_.length;t+=1){const n=r_[t];Y2.has(n)||(Y2.add(n),n())}r_.length=0}while(Py.length);for(;r3.length;)r3.pop()();wP=!1,Y2.clear(),H0(e)}function Mse(e){if(e.fragment!==null){e.update(),Td(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(EP)}}function Nse(e){const t=[],n=[];r_.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),r_=t}const _w=new Set;let Xm;function vw(){Xm={r:0,c:[],p:Xm}}function xw(){Xm.r||Td(Xm.c),Xm=Xm.p}function xo(e,t){e&&e.i&&(_w.delete(e),e.i(t))}function es(e,t,n,r){if(e&&e.o){if(_w.has(e))return;_w.add(e),Xm.c.push(()=>{_w.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function i3(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Dse(e,t){es(e,1,1,()=>{t.delete(e.key)})}function zse(e,t,n,r,i,o,u,l,p,g,x,y){let _=e.length,T=o.length,A=_;const O={};for(;A--;)O[e[A].key]=A;const N=[],k=new Map,R=new Map,z=[];for(A=T;A--;){const G=y(i,o,A),H=n(G);let J=u.get(H);J?r&&z.push(()=>J.p(G,t)):(J=g(H,G),J.c()),k.set(H,N[A]=J),H in O&&R.set(H,Math.abs(A-O[H]))}const D=new Set,U=new Set;function q(G){xo(G,1),G.m(l,x),u.set(G.key,G),x=G.first,T--}for(;_&&T;){const G=N[T-1],H=e[_-1],J=G.key,Y=H.key;G===H?(x=G.first,_--,T--):k.has(Y)?!u.has(J)||D.has(J)?q(G):U.has(Y)?_--:R.get(J)>R.get(Y)?(U.add(J),q(G)):(D.add(Y),_--):(p(H,u),_--)}for(;_--;){const G=e[_];k.has(G.key)||p(G,u)}for(;T;)q(N[T-1]);return Td(z),N}function $p(e){e&&e.c()}function ud(e,t,n){const{fragment:r,after_update:i}=e.$$;r&&r.m(t,n),EP(()=>{const o=e.$$.on_mount.map(t$).filter(n$);e.$$.on_destroy?e.$$.on_destroy.push(...o):Td(o),e.$$.on_mount=[]}),i.forEach(EP)}function cd(e,t){const n=e.$$;n.fragment!==null&&(Nse(n.after_update),Td(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Fse(e,t){e.$$.dirty[0]===-1&&(Py.push(e),Rse(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function om(e,t,n,r,i,o,u=null,l=[-1]){const p=P1;H0(e);const g=e.$$={fragment:null,ctx:[],props:o,update:Ai,not_equal:i,bound:QD(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(p?p.$$.context:[])),callbacks:QD(),dirty:l,skip_bound:!1,root:t.target||p.$$.root};u&&u(g.root);let x=!1;if(g.ctx=n?n(e,t.props||{},(y,_,...T)=>{const A=T.length?T[0]:_;return g.ctx&&i(g.ctx[y],g.ctx[y]=A)&&(!g.skip_bound&&g.bound[y]&&g.bound[y](A),x&&Fse(e,y)),_}):[],g.update(),x=!0,Td(g.before_update),g.fragment=r?r(g.ctx):!1,t.target){if(t.hydrate){const y=Pse(t.target);g.fragment&&g.fragment.l(y),y.forEach(ki)}else g.fragment&&g.fragment.c();t.intro&&xo(e.$$.fragment),ud(e,t.target,t.anchor),o$()}H0(p)}class sm{constructor(){YD(this,"$$"),YD(this,"$$set")}$destroy(){cd(this,1),this.$destroy=Ai}$on(t,n){if(!n$(n))return Ai;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!bse(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Bse="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Bse);function jse(e){let t,n;return{c(){t=Dc("svg"),n=Dc("path"),At(n,"d","M13.12.706a.982.982 0 0 0-1.391 0L6.907 5.517 2.087.696a.982.982 0 1 0-1.391 1.39l4.821 4.821L.696 11.73a.982.982 0 1 0 1.39 1.39l4.821-4.821 4.822 4.821a.982.982 0 1 0 1.39-1.39L8.298 6.908l4.821-4.822a.988.988 0 0 0 0-1.38Z"),At(t,"viewBox","0 0 14 14"),At(t,"width","13"),At(t,"height","13"),At(t,"class","svelte-en2qvf")},m(r,i){Fi(r,t,i),br(t,n)},p:Ai,i:Ai,o:Ai,d(r){r&&ki(t)}}}class s$ extends sm{constructor(t){super(),om(this,t,null,jse,im,{})}}function $se(e){let t,n;return{c(){t=Dc("svg"),n=Dc("path"),At(n,"d","M15 0C6.705 0 0 6.705 0 15C0 23.295 6.705 30 15 30C23.295 30 30 23.295 30 15C30 6.705 23.295 0 15 0ZM22.5 20.385L20.385 22.5L15 17.115L9.615 22.5L7.5 20.385L12.885 15L7.5 9.615L9.615 7.5L15 12.885L20.385 7.5L22.5 9.615L17.115 15L22.5 20.385Z"),At(t,"viewBox","0 0 30 30"),At(t,"fill","none"),At(t,"xmlns","http://www.w3.org/2000/svg"),At(t,"class","svelte-d2loi5")},m(r,i){Fi(r,t,i),br(t,n)},p:Ai,i:Ai,o:Ai,d(r){r&&ki(t)}}}class a$ extends sm{constructor(t){super(),om(this,t,null,$se,im,{})}}function Use(e){let t,n;return{c(){t=ti("img"),ia(t.src,n=e[3]+"area.svg")||At(t,"src",n),At(t,"alt",e[6]),At(t,"class","svelte-ltkwvy")},m(r,i){Fi(r,t,i)},p(r,i){i&8&&!ia(t.src,n=r[3]+"area.svg")&&At(t,"src",n),i&64&&At(t,"alt",r[6])},d(r){r&&ki(t)}}}function qse(e){let t,n;return{c(){t=ti("img"),ia(t.src,n=e[3]+"reverse.svg")||At(t,"src",n),At(t,"alt",e[6]),At(t,"class","svelte-ltkwvy")},m(r,i){Fi(r,t,i)},p(r,i){i&8&&!ia(t.src,n=r[3]+"reverse.svg")&&At(t,"src",n),i&64&&At(t,"alt",r[6])},d(r){r&&ki(t)}}}function Vse(e){let t,n;return{c(){t=ti("img"),ia(t.src,n=e[3]+"poi.svg")||At(t,"src",n),At(t,"alt",e[6]),At(t,"class","svelte-ltkwvy")},m(r,i){Fi(r,t,i)},p(r,i){i&8&&!ia(t.src,n=r[3]+"poi.svg")&&At(t,"src",n),i&64&&At(t,"alt",r[6])},d(r){r&&ki(t)}}}function Gse(e){let t,n;return{c(){t=ti("img"),ia(t.src,n=e[3]+"postal_code.svg")||At(t,"src",n),At(t,"alt",e[6]),At(t,"class","svelte-ltkwvy")},m(r,i){Fi(r,t,i)},p(r,i){i&8&&!ia(t.src,n=r[3]+"postal_code.svg")&&At(t,"src",n),i&64&&At(t,"alt",r[6])},d(r){r&&ki(t)}}}function Hse(e){let t,n;return{c(){t=ti("img"),ia(t.src,n=e[3]+"street.svg")||At(t,"src",n),At(t,"alt",e[6]),At(t,"class","svelte-ltkwvy")},m(r,i){Fi(r,t,i)},p(r,i){i&8&&!ia(t.src,n=r[3]+"street.svg")&&At(t,"src",n),i&64&&At(t,"alt",r[6])},d(r){r&&ki(t)}}}function Zse(e){let t,n;return{c(){t=ti("img"),ia(t.src,n=e[3]+"road.svg")||At(t,"src",n),At(t,"alt",e[6]),At(t,"class","svelte-ltkwvy")},m(r,i){Fi(r,t,i)},p(r,i){i&8&&!ia(t.src,n=r[3]+"road.svg")&&At(t,"src",n),i&64&&At(t,"alt",r[6])},d(r){r&&ki(t)}}}function Wse(e){let t,n;return{c(){t=ti("img"),ia(t.src,n=e[3]+"housenumber.svg")||At(t,"src",n),At(t,"alt",e[6]),At(t,"class","svelte-ltkwvy")},m(r,i){Fi(r,t,i)},p(r,i){i&8&&!ia(t.src,n=r[3]+"housenumber.svg")&&At(t,"src",n),i&64&&At(t,"alt",r[6])},d(r){r&&ki(t)}}}function Kse(e){let t,n,r,i;return{c(){t=ti("img"),ia(t.src,n=e[5])||At(t,"src",n),At(t,"alt",e[4]),At(t,"class","svelte-ltkwvy")},m(o,u){Fi(o,t,u),r||(i=Ca(t,"error",e[14]),r=!0)},p(o,u){u&32&&!ia(t.src,n=o[5])&&At(t,"src",n),u&16&&At(t,"alt",o[4])},d(o){o&&ki(t),r=!1,i()}}}function o3(e){let t,n;return{c(){t=ti("span"),n=jp(e[6]),At(t,"class","secondary svelte-ltkwvy")},m(r,i){Fi(r,t,i),br(t,n)},p(r,i){i&64&&I1(n,r[6])},d(r){r&&ki(t)}}}function Xse(e){var t,n;let r,i,o,u,l,p,g,x,y=(e[7]?e[0].place_name:e[0].place_name.replace(/,.*/,""))+"",_,T,A=e[2]==="always"||e[2]&&!e[0].address&&((t=e[0].properties)==null?void 0:t.kind)!=="road"&&((n=e[0].properties)==null?void 0:n.kind)!=="road_relation"&&!e[0].id.startsWith("address.")&&!e[0].id.startsWith("postal_code.")&&(!e[0].id.startsWith("poi.")||!e[5])&&!e[7],O,N,k=(e[7]?"":e[0].place_name.replace(/[^,]*,?\s*/,""))+"",R,z,D;function U(J,Y){var X,ee;return Y&1&&(i=null),Y&1&&(o=null),Y&1&&(u=null),J[5]?Kse:J[0].address?Wse:((X=J[0].properties)==null?void 0:X.kind)==="road"||((ee=J[0].properties)==null?void 0:ee.kind)==="road_relation"?Zse:(i==null&&(i=!!J[0].id.startsWith("address.")),i?Hse:(o==null&&(o=!!J[0].id.startsWith("postal_code.")),o?Gse:(u==null&&(u=!!J[0].id.startsWith("poi.")),u?Vse:J[7]?qse:Use)))}let q=U(e,-1),G=q(e),H=A&&o3(e);return{c(){r=ti("li"),G.c(),l=Rl(),p=ti("span"),g=ti("span"),x=ti("span"),_=jp(y),T=Rl(),H&&H.c(),O=Rl(),N=ti("span"),R=jp(k),At(x,"class","primary svelte-ltkwvy"),At(g,"class","svelte-ltkwvy"),At(N,"class","line2 svelte-ltkwvy"),At(p,"class","texts svelte-ltkwvy"),At(r,"tabindex","0"),At(r,"data-selected",e[1]),At(r,"class","svelte-ltkwvy"),Nu(r,"selected",e[1])},m(J,Y){Fi(J,r,Y),G.m(r,null),br(r,l),br(r,p),br(p,g),br(g,x),br(x,_),br(g,T),H&&H.m(g,null),br(p,O),br(p,N),br(N,R),z||(D=[Ca(r,"mouseenter",e[12]),Ca(r,"focus",e[13])],z=!0)},p(J,[Y]){var X,ee;q===(q=U(J,Y))&&G?G.p(J,Y):(G.d(1),G=q(J),G&&(G.c(),G.m(r,l))),Y&1&&y!==(y=(J[7]?J[0].place_name:J[0].place_name.replace(/,.*/,""))+"")&&I1(_,y),Y&37&&(A=J[2]==="always"||J[2]&&!J[0].address&&((X=J[0].properties)==null?void 0:X.kind)!=="road"&&((ee=J[0].properties)==null?void 0:ee.kind)!=="road_relation"&&!J[0].id.startsWith("address.")&&!J[0].id.startsWith("postal_code.")&&(!J[0].id.startsWith("poi.")||!J[5])&&!J[7]),A?H?H.p(J,Y):(H=o3(J),H.c(),H.m(g,null)):H&&(H.d(1),H=null),Y&1&&k!==(k=(J[7]?"":J[0].place_name.replace(/[^,]*,?\s*/,""))+"")&&I1(R,k),Y&2&&At(r,"data-selected",J[1]),Y&2&&Nu(r,"selected",J[1])},i:Ai,o:Ai,d(J){J&&ki(r),G.d(),H&&H.d(),z=!1,Td(D)}}}function Yse(e,t,n){var r;let i,o,{feature:u}=t,{selected:l=!1}=t,{showPlaceType:p}=t,{missingIconsCache:g}=t,{iconsBaseUrl:x}=t;const y=(r=u.properties)==null?void 0:r.categories;let _,T,A=0,O=u.place_type[0]==="reverse";function N(D){T&&g.add(T),n(10,A++,A)}function k(D){n3.call(this,e,D)}function R(D){n3.call(this,e,D)}const z=D=>N(D.currentTarget);return e.$$set=D=>{"feature"in D&&n(0,u=D.feature),"selected"in D&&n(1,l=D.selected),"showPlaceType"in D&&n(2,p=D.showPlaceType),"missingIconsCache"in D&&n(9,g=D.missingIconsCache),"iconsBaseUrl"in D&&n(3,x=D.iconsBaseUrl)},e.$$.update=()=>{var D,U,q,G;if(e.$$.dirty&3640)do n(11,i--,i),n(4,_=y==null?void 0:y[i]),n(5,T=_?x+_.replace(/ /g,"_")+".svg":void 0);while(i>-1&&(!T||g.has(T)));e.$$.dirty&1&&n(6,o=u.id.startsWith("poi.")?(U=(D=u.properties)==null?void 0:D.categories)==null?void 0:U.join(", "):((G=(q=u.properties)==null?void 0:q.place_type_name)==null?void 0:G[0])??u.place_type[0])},n(11,i=(y==null?void 0:y.length)??0),[u,l,p,x,_,T,o,O,N,g,A,i,k,R,z]}class Jse extends sm{constructor(t){super(),om(this,t,Yse,Xse,im,{feature:0,selected:1,showPlaceType:2,missingIconsCache:9,iconsBaseUrl:3})}}function Qse(e){let t;return{c(){t=ti("div"),t.innerHTML='<svg viewBox="0 0 18 18" width="24" height="24" class="svelte-7cmwmc"><path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"></path><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"></path></svg>',At(t,"class","svelte-7cmwmc")},m(n,r){Fi(n,t,r)},p:Ai,i:Ai,o:Ai,d(n){n&&ki(t)}}}class eae extends sm{constructor(t){super(),om(this,t,null,Qse,im,{})}}function tae(e){let t,n,r;return{c(){t=Dc("svg"),n=Dc("path"),At(n,"stroke-width","4"),At(n,"d","M 5,33.103579 C 5,17.607779 18.457,5 35,5 C 51.543,5 65,17.607779 65,33.103579 C 65,56.388679 40.4668,76.048179 36.6112,79.137779 C 36.3714,79.329879 36.2116,79.457979 36.1427,79.518879 C 35.8203,79.800879 35.4102,79.942779 35,79.942779 C 34.5899,79.942779 34.1797,79.800879 33.8575,79.518879 C 33.7886,79.457979 33.6289,79.330079 33.3893,79.138079 C 29.5346,76.049279 5,56.389379 5,33.103579 Z M 35.0001,49.386379 C 43.1917,49.386379 49.8323,42.646079 49.8323,34.331379 C 49.8323,26.016779 43.1917,19.276479 35.0001,19.276479 C 26.8085,19.276479 20.1679,26.016779 20.1679,34.331379 C 20.1679,42.646079 26.8085,49.386379 35.0001,49.386379 Z"),At(n,"class","svelte-gzo3ar"),At(t,"width",r=e[0]==="list"?20:void 0),At(t,"viewBox","0 0 70 85"),At(t,"fill","none"),At(t,"class","svelte-gzo3ar"),Nu(t,"in-map",e[0]!=="list"),Nu(t,"list-icon",e[0]==="list")},m(i,o){Fi(i,t,o),br(t,n)},p(i,[o]){o&1&&r!==(r=i[0]==="list"?20:void 0)&&At(t,"width",r),o&1&&Nu(t,"in-map",i[0]!=="list"),o&1&&Nu(t,"list-icon",i[0]==="list")},i:Ai,o:Ai,d(i){i&&ki(t)}}}function nae(e,t,n){let{displayIn:r}=t;return e.$$set=i=>{"displayIn"in i&&n(0,r=i.displayIn)},[r]}class rae extends sm{constructor(t){super(),om(this,t,nae,tae,im,{displayIn:0})}}function iae(e){let t,n;return{c(){t=Dc("svg"),n=Dc("path"),At(n,"d","M30.003-26.765C13.46-26.765 0-14.158 0 1.337c0 23.286 24.535 42.952 28.39 46.04.24.192.402.316.471.376.323.282.732.424 1.142.424.41 0 .82-.142 1.142-.424.068-.06.231-.183.471-.376 3.856-3.09 28.39-22.754 28.39-46.04 0-15.495-13.46-28.102-30.003-28.102Zm1.757 12.469c4.38 0 7.858 1.052 10.431 3.158 2.595 2.105 3.89 4.913 3.89 8.422 0 2.34-.53 4.362-1.593 6.063-1.063 1.702-3.086 3.616-6.063 5.742-2.042 1.51-3.337 2.659-3.89 3.446-.532.787-.8 1.82-.8 3.096v1.914h-8.449V15.18c0-2.041.434-3.815 1.306-5.325.872-1.51 2.467-3.118 4.785-4.82 2.233-1.594 3.7-2.89 4.402-3.889a5.582 5.582 0 0 0 1.087-3.35c0-1.382-.51-2.435-1.531-3.158-1.02-.723-2.45-1.087-4.28-1.087-3.19 0-6.826 1.047-10.91 3.131l-3.472-6.986c4.742-2.659 9.77-3.992 15.087-3.992Zm-1.88 37.324c1.765 0 3.124.472 4.08 1.408.98.936 1.47 2.276 1.47 4.02 0 1.68-.49 3.007-1.47 3.985-.977.957-2.336 1.435-4.08 1.435-1.787 0-3.171-.465-4.15-1.4-.978-.958-1.47-2.298-1.47-4.02 0-1.787.48-3.14 1.436-4.054.957-.915 2.355-1.374 4.184-1.374Z"),At(t,"viewBox","0 0 60.006 21.412"),At(t,"width","14"),At(t,"height","20"),At(t,"class","svelte-en2qvf")},m(r,i){Fi(r,t,i),br(t,n)},p:Ai,i:Ai,o:Ai,d(r){r&&ki(t)}}}class oae extends sm{constructor(t){super(),om(this,t,null,iae,im,{})}}function sae(e){let t,n,r;return{c(){t=Dc("svg"),n=Dc("circle"),r=Dc("path"),At(n,"cx","4.789"),At(n,"cy","4.787"),At(n,"r","3.85"),Nb(n,"stroke-width","1.875"),Nb(n,"fill","none"),At(r,"d","M12.063 12.063 7.635 7.635"),Nb(r,"stroke-width","1.875"),Nb(r,"stroke-linecap","round"),At(t,"xmlns","http://www.w3.org/2000/svg"),At(t,"width","13"),At(t,"height","13"),At(t,"viewBox","0 0 13 13"),At(t,"class","svelte-1bpbt60")},m(i,o){Fi(i,t,o),br(t,n),br(t,r)},p:Ai,i:Ai,o:Ai,d(i){i&&ki(t)}}}class aae extends sm{constructor(t){super(),om(this,t,null,sae,im,{})}}function lae(e,t,n){const r=t[1],i=t[0],o=r-i;return e===r&&n?e:((e-i)%o+o)%o+i}function s3(e){const t=[...e];return t[2]<t[0]&&(t[2]+=360),t}let h0;async function uae(e,t,n){const r=e==null?void 0:e.getCenterAndZoom();for(const i of t??[])if(!(r&&(i.minZoom!=null&&i.minZoom>r[0]||i.maxZoom!=null&&i.maxZoom<r[0]))){if(i.type==="fixed")return i.coordinates.join(",");e:if(i.type==="client-geolocation"){if(h0&&i.cachedLocationExpiry&&h0.time+i.cachedLocationExpiry>Date.now()){if(!h0.coords)break e;return h0.coords}let o;try{return o=await new Promise((u,l)=>{n.signal.addEventListener("abort",()=>{l(Error("aborted"))}),navigator.geolocation.getCurrentPosition(p=>{u([p.coords.longitude,p.coords.latitude].map(g=>g.toFixed(6)).join(","))},p=>{l(p)},i)}),o}catch{}finally{i.cachedLocationExpiry&&(h0={time:Date.now(),coords:o})}if(n.signal.aborted)return}if(i.type==="server-geolocation")return"ip";if(r&&i.type==="map-center")return r[1].toFixed(6)+","+r[2].toFixed(6)}}const a3=/(NORTH|SOUTH|[NS])?[\s]*([+-]?[0-8]?[0-9](?:[\.,]\d{3,}))[\s]*([•º°]?)[\s]*(NORTH|SOUTH|[NS])?[\s]*[,/;]?[\s]*(EAST|WEST|[EW])?[\s]*([+-]?[0-1]?[0-9]?[0-9](?:[\.,]\d{3,}))[\s]*([•º°]?)[\s]*(EAST|WEST|[EW])?/i,l3=/(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*(\.)\s*([0-5]?[0-9])\s*(\.)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*(\.)\s*([0-5]?[0-9])\s*(\.)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(EAST|WEST|[EW])?/i,u3=/(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*(D(?:EG)?(?:REES)?)\s*([0-5]?[0-9])\s*(M(?:IN)?(?:UTES)?)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(S(?:EC)?(?:ONDS)?)?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*(D(?:EG)?(?:REES)?)\s*([0-5]?[0-9])\s*(M(?:IN)?(?:UTES)?)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(S(?:EC)?(?:ONDS)?)\s*(EAST|WEST|[EW])?/i,c3=/(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*([•º°\.:]|D(?:EG)?(?:REES)?)?\s*,?([0-5]?[0-9](?:[\.,]\d{1,})?)?\s*(['′´’\.:]|M(?:IN)?(?:UTES)?)?\s*,?((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(''|′′|’’|´´|["″”\.])?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*([•º°\.:]|D(?:EG)?(?:REES)?)?\s*,?([0-5]?[0-9](?:[\.,]\d{1,})?)?\s*(['′´’\.:]|M(?:IN)?(?:UTES)?)?\s*,?((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(''|′′|´´|’’|["″”\.])?\s*(EAST|WEST|[EW])?/i;function cae(e){if(!["DMS","DM","DD"].includes(e))throw new Error("invalid format specified");if(this.decimalCoordinates&&this.decimalCoordinates.trim()){if(e=="DD")return this.decimalCoordinates;const t=this.decimalCoordinates.split(",").map(u=>Number(u.trim()));let n=h3(t[0],e),r=h3(t[1],e);n.endsWith('.0"')&&r.endsWith('.0"')&&(n=n.replace(/\.0"$/,'"'),r=r.replace(/\.0"$/,'"'));const i=t[0]>=0?" N":" S",o=t[1]>=0?" E":" W";return`${n+i}, ${r+o}`}else throw new Error("no decimal coordinates to convert")}function h3(e,t){const n=Math.abs(e),r=Math.floor(n),i=(n-r)*60;if(t=="DM"){let l=hae(i,3).toFixed(3).padStart(6,"0");return`${r}° ${l}'`}let o=Math.floor(i),u=((i-o)*60).toFixed(1).padStart(4,"0");return o=o.toString().padStart(2,"0"),`${r}° ${o}' ${u}"`}function hae(e,t){const n=Math.pow(10,t);return Math.round((e+Number.EPSILON)*n)/n}function QA(e,t){t||(t=5),e=e.replace(/\s+/g," ").trim();let n=null,r=null,i="",o="",u=[],l=!1;if(a3.test(e))if(u=a3.exec(e),l=Db(u),l){if(n=u[2],r=u[6],n.includes(",")&&(n=n.replace(",",".")),r.includes(",")&&(r=r.replace(",",".")),Number(Math.round(n))==Number(n))throw new Error("integer only coordinate provided");if(Number(Math.round(r))==Number(r))throw new Error("integer only coordinate provided");u[1]?(i=u[1],o=u[5]):u[4]&&(i=u[4],o=u[8])}else throw new Error("invalid decimal coordinate format");else if(l3.test(e))if(u=l3.exec(e),l=Db(u),l)n=Math.abs(parseInt(u[2])),u[4]&&(n+=u[4]/60),u[6]&&(n+=u[6].replace(",",".")/3600),parseInt(u[2])<0&&(n=-1*n),r=Math.abs(parseInt(u[9])),u[11]&&(r+=u[11]/60),u[13]&&(r+=u[13].replace(",",".")/3600),parseInt(u[9])<0&&(r=-1*r),u[1]?(i=u[1],o=u[8]):u[7]&&(i=u[7],o=u[14]);else throw new Error("invalid DMS coordinates format");else if(u3.test(e))if(u=u3.exec(e),l=Db(u),l)n=Math.abs(parseInt(u[2])),u[4]&&(n+=u[4]/60),u[6]&&(n+=u[6]/3600),parseInt(u[2])<0&&(n=-1*n),r=Math.abs(parseInt(u[10])),u[12]&&(r+=u[12]/60),u[14]&&(r+=u[14]/3600),parseInt(u[10])<0&&(r=-1*r),u[1]?(i=u[1],o=u[9]):u[8]&&(i=u[8],o=u[16]);else throw new Error("invalid DMS coordinates format");else if(c3.test(e))if(u=c3.exec(e),l=Db(u),l)n=Math.abs(parseInt(u[2])),u[4]&&(n+=u[4]/60),u[6]&&(n+=u[6]/3600),parseInt(u[2])<0&&(n=-1*n),r=Math.abs(parseInt(u[10])),u[12]&&(r+=u[12]/60),u[14]&&(r+=u[14]/3600),parseInt(u[10])<0&&(r=-1*r),u[1]?(i=u[1],o=u[9]):u[8]&&(i=u[8],o=u[16]);else throw new Error("invalid coordinates format");if(l){if(Math.abs(r)>=180)throw new Error("invalid longitude value");if(Math.abs(n)>=90)throw new Error("invalid latitude value");if((i||o)&&(!i||!o))throw new Error("invalid coordinates format");if(i&&i==o)throw new Error("invalid coordinates format");let p=/S|SOUTH/i;p.test(i)&&n>0&&(n=-1*n),p=/W|WEST/i,p.test(o)&&r>0&&(r=-1*r);const g=u[0].trim();let x,y;const _=/[,/;\u0020]/g,T=g.match(_);if(T==null){const N=Math.floor(e.length/2);x=g.substring(0,N).trim(),y=g.substring(N).trim()}else{let N;T.length%2==1?N=Math.floor(T.length/2):N=T.length/2-1;let k=0;if(N==0)k=g.indexOf(T[0]),x=g.substring(0,k).trim(),y=g.substring(k+1).trim();else{let R=0,z=0;for(;R<=N;)k=g.indexOf(T[R],z),z=k+1,R++;x=g.substring(0,k).trim(),y=g.substring(k+1).trim()}}const A=x.split(".");if(A.length==2&&A[1]==0&&A[1].length!=2)throw new Error("invalid coordinates format");const O=y.split(".");if(O.length==2&&O[1]==0&&O[1].length!=2)throw new Error("invalid coordinates format");if(/^\d+$/.test(x)||/^\d+$/.test(y))throw new Error("degree only coordinate/s provided");return isNaN(n)&&n.includes(",")&&(n=n.replace(",",".")),n=Number(Number(n).toFixed(t)),isNaN(r)&&r.includes(",")&&(r=r.replace(",",".")),r=Number(Number(r).toFixed(t)),Object.freeze({verbatimCoordinates:g,verbatimLatitude:x,verbatimLongitude:y,decimalLatitude:n,decimalLongitude:r,decimalCoordinates:`${n},${r}`,closeEnough:fae,toCoordinateFormat:cae})}else throw new Error("coordinates pattern match failed")}function Db(e){if(!isNaN(e[0]))return!1;const t=[...e];if(t.shift(),t.length%2>0)return!1;const n=/^[-+]?\d+([\.,]\d+)?$/,r=/[eastsouthnorthwest]+/i,i=t.length/2;for(let o=0;o<i;o++){const u=t[o],l=t[o+i],p=n.test(u)&&n.test(l),g=r.test(u)&&r.test(l),x=u==l;if(!(u==null&&l==null)){if(u==null||l==null)return!1;if(p||g||x)continue;return!1}}return!0}function f3(e,t){const n=Math.abs(e-t);return Number(n.toFixed(6))<=1e-5}function fae(e){if(e.includes(",")){const t=e.split(",");if(Number(t[0])==NaN||Number(t[1])==NaN)throw new Error("coords are not valid decimals");return f3(this.decimalLatitude,Number(t[0]))&&f3(this.decimalLongitude,t[1])}else throw new Error("coords being tested must be separated by a comma")}const dae=Object.freeze({DMS:"DMS",DM:"DM",DD:"DD"});QA.to=dae;const pae=[{verbatimCoordinates:"40.123, -74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123° N 74.123° W",verbatimLatitude:"40.123° N",verbatimLongitude:"74.123° W"},{verbatimCoordinates:"40.123° N 74.123° W",verbatimLatitude:"40.123° N",verbatimLongitude:"74.123° W"},{verbatimCoordinates:'40° 7´ 22.8" N 74° 7´ 22.8" W',verbatimLatitude:'40° 7´ 22.8" N',verbatimLongitude:'74° 7´ 22.8" W'},{verbatimCoordinates:"40° 7.38’ , -74° 7.38’",verbatimLatitude:"40° 7.38’",verbatimLongitude:"-74° 7.38’"},{verbatimCoordinates:"N40°7’22.8’’, W74°7’22.8’’",verbatimLatitude:"N40°7’22.8’’",verbatimLongitude:"W74°7’22.8’’"},{verbatimCoordinates:'40°7’22.8"N, 74°7’22.8"W',verbatimLatitude:'40°7’22.8"N',verbatimLongitude:'74°7’22.8"W'},{verbatimCoordinates:`40°7'22.8"N, 74°7'22.8"W`,verbatimLatitude:`40°7'22.8"N`,verbatimLongitude:`74°7'22.8"W`},{verbatimCoordinates:"40 7 22.8, -74 7 22.8",verbatimLatitude:"40 7 22.8",verbatimLongitude:"-74 7 22.8"},{verbatimCoordinates:"40.123 -74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123°,-74.123°",verbatimLatitude:"40.123°",verbatimLongitude:"-74.123°"},{verbatimCoordinates:"40.123N74.123W",verbatimLatitude:"40.123N",verbatimLongitude:"74.123W"},{verbatimCoordinates:"4007.38N7407.38W",verbatimLatitude:"4007.38N",verbatimLongitude:"7407.38W"},{verbatimCoordinates:'40°7’22.8"N, 74°7’22.8"W',verbatimLatitude:'40°7’22.8"N',verbatimLongitude:'74°7’22.8"W'},{verbatimCoordinates:"400722.8N740722.8W",verbatimLatitude:"400722.8N",verbatimLongitude:"740722.8W"},{verbatimCoordinates:"N 40 7.38 W 74 7.38",verbatimLatitude:"N 40 7.38",verbatimLongitude:"W 74 7.38"},{verbatimCoordinates:"40:7:22.8N 74:7:22.8W",verbatimLatitude:"40:7:22.8N",verbatimLongitude:"74:7:22.8W"},{verbatimCoordinates:"40:7:23N,74:7:23W",verbatimLatitude:"40:7:23N",verbatimLongitude:"74:7:23W",decimalLatitude:40.1230555555,decimalLongitude:-74.1230555555},{verbatimCoordinates:'40°7’23"N 74°7’23"W',verbatimLatitude:'40°7’23"N',verbatimLongitude:'74°7’23"W',decimalLatitude:40.1230555555,decimalLongitude:-74.12305555555555},{verbatimCoordinates:'40°7’23"S 74°7’23"E',verbatimLatitude:'40°7’23"S',verbatimLongitude:'74°7’23"E',decimalLatitude:-40.1230555555,decimalLongitude:74.12305555555555},{verbatimCoordinates:'40°7’23" -74°7’23"',verbatimLatitude:'40°7’23"',verbatimLongitude:'-74°7’23"',decimalLatitude:40.1230555555,decimalLongitude:-74.123055555},{verbatimCoordinates:'40d 7’ 23" N 74d 7’ 23" W',verbatimLatitude:'40d 7’ 23" N',verbatimLongitude:'74d 7’ 23" W',decimalLatitude:40.1230555555,decimalLongitude:-74.123055555},{verbatimCoordinates:"40.123N 74.123W",verbatimLatitude:"40.123N",verbatimLongitude:"74.123W"},{verbatimCoordinates:"40° 7.38, -74° 7.38",verbatimLatitude:"40° 7.38",verbatimLongitude:"-74° 7.38"},{verbatimCoordinates:"40° 7.38, -74° 7.38",verbatimLatitude:"40° 7.38",verbatimLongitude:"-74° 7.38"},{verbatimCoordinates:"40 7 22.8; -74 7 22.8",verbatimLatitude:"40 7 22.8",verbatimLongitude:"-74 7 22.8"}],mae={decimalLatitude:40.123,decimalLongitude:-74.123},gae=[{verbatimCoordinates:`50°4'17.698"south, 14°24'2.826"east`,verbatimLatitude:`50°4'17.698"south`,verbatimLongitude:`14°24'2.826"east`,decimalLatitude:-50.07158277777778,decimalLongitude:14.400785},{verbatimCoordinates:"50d4m17.698S 14d24m2.826E",verbatimLatitude:"50d4m17.698S",verbatimLongitude:"14d24m2.826E",decimalLatitude:-50.07158277777778,decimalLongitude:14.400785},{verbatimCoordinates:"40:26:46N,79:56:55W",verbatimLatitude:"40:26:46N",verbatimLongitude:"79:56:55W",decimalLatitude:40.44611111111111,decimalLongitude:-79.9486111111111},{verbatimCoordinates:"40:26:46.302N 79:56:55.903W",verbatimLatitude:"40:26:46.302N",verbatimLongitude:"79:56:55.903W",decimalLatitude:40.446195,decimalLongitude:-79.94886194444445},{verbatimCoordinates:"40°26′47″N 79°58′36″W",verbatimLatitude:"40°26′47″N",verbatimLongitude:"79°58′36″W",decimalLatitude:40.44638888888889,decimalLongitude:-79.97666666666667},{verbatimCoordinates:"40d 26′ 47″ N 79d 58′ 36″ W",verbatimLatitude:"40d 26′ 47″ N",verbatimLongitude:"79d 58′ 36″ W",decimalLatitude:40.44638888888889,decimalLongitude:-79.97666666666667},{verbatimCoordinates:"40.446195N 79.948862W",verbatimLatitude:"40.446195N",verbatimLongitude:"79.948862W",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40,446195° 79,948862°",verbatimLatitude:"40,446195°",verbatimLongitude:"79,948862°",decimalLatitude:40.446195,decimalLongitude:79.948862},{verbatimCoordinates:"40° 26.7717, -79° 56.93172",verbatimLatitude:"40° 26.7717",verbatimLongitude:"-79° 56.93172",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40.446195, -79.948862",verbatimLatitude:"40.446195",verbatimLongitude:"-79.948862",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40.123256; -74.123256",verbatimLatitude:"40.123256",verbatimLongitude:"-74.123256",decimalLatitude:40.123256,decimalLongitude:-74.123256},{verbatimCoordinates:"18°24S 22°45E",verbatimLatitude:"18°24S",verbatimLongitude:"22°45E",decimalLatitude:-18.4,decimalLongitude:22.75}],yae=[{verbatimCoordinates:"10.432342S 10.6345345E",verbatimLatitude:"10.432342S",verbatimLongitude:"10.6345345E",decimalLatitude:-10.432342,decimalLongitude:10.6345345},{verbatimCoordinates:"10.00S 10.00E",verbatimLatitude:"10.00S",verbatimLongitude:"10.00E",decimalLatitude:-10,decimalLongitude:10},{verbatimCoordinates:"00.00S 01.00E",verbatimLatitude:"00.00S",verbatimLongitude:"01.00E",decimalLatitude:0,decimalLongitude:1},{verbatimCoordinates:"18.24S 22.45E",verbatimLatitude:"18.24S",verbatimLongitude:"22.45E",decimalLatitude:-18.4,decimalLongitude:22.75},{verbatimCoordinates:"27deg 15min 45.2sec S 18deg 32min 53.7sec E",verbatimLatitude:"27deg 15min 45.2sec S",verbatimLongitude:"18deg 32min 53.7sec E",decimalLatitude:-27.262555555555554,decimalLongitude:18.54825},{verbatimCoordinates:"-23.3245° S / 28.2344° E",verbatimLatitude:"-23.3245° S",verbatimLongitude:"28.2344° E",decimalLatitude:-23.3245,decimalLongitude:28.2344},{verbatimCoordinates:"40° 26.7717 -79° 56.93172",verbatimLatitude:"40° 26.7717",verbatimLongitude:"-79° 56.93172",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"27.15.45S 18.32.53E",verbatimLatitude:"27.15.45S",verbatimLongitude:"18.32.53E",decimalLatitude:-27.2625,decimalLongitude:18.548055},{verbatimCoordinates:"-27.15.45 18.32.53",verbatimLatitude:"-27.15.45",verbatimLongitude:"18.32.53",decimalLatitude:-27.2625,decimalLongitude:18.548055},{verbatimCoordinates:"27.15.45.2S 18.32.53.4E",verbatimLatitude:"27.15.45.2S",verbatimLongitude:"18.32.53.4E",decimalLatitude:-27.262556,decimalLongitude:18.548167},{verbatimCoordinates:"27.15.45,2S 18.32.53,4E",verbatimLatitude:"27.15.45,2S",verbatimLongitude:"18.32.53,4E",decimalLatitude:-27.262556,decimalLongitude:18.548167},{verbatimCoordinates:"S23.43563 °  E22.45634 °",verbatimLatitude:"S23.43563 °",verbatimLongitude:"E22.45634 °",decimalLatitude:-23.43563,decimalLongitude:22.45634},{verbatimCoordinates:"27,71372° S 23,07771° E",verbatimLatitude:"27,71372° S",verbatimLongitude:"23,07771° E",decimalLatitude:-27.71372,decimalLongitude:23.07771},{verbatimCoordinates:"27.45.34 S 23.23.23 E",verbatimLatitude:"27.45.34 S",verbatimLongitude:"23.23.23 E",decimalLatitude:-27.759444,decimalLongitude:23.38972222},{verbatimCoordinates:"S 27.45.34 E 23.23.23",verbatimLatitude:"S 27.45.34",verbatimLongitude:"E 23.23.23",decimalLatitude:-27.759444,decimalLongitude:23.38972222}];function _ae(){const e=[];return pae.forEach(t=>{t.decimalLatitude?e.push(t):e.push({...t,...mae})}),[...e,...gae,...yae]}const vae=_ae();QA.formats=vae.map(e=>e.verbatimCoordinates);const xae=QA;function d3(e,t,n){const r=e.slice();return r[81]=t[n],r[83]=n,r}function p3(e){let t,n;return t=new eae({}),{c(){$p(t.$$.fragment)},m(r,i){ud(t,r,i),n=!0},i(r){n||(xo(t.$$.fragment,r),n=!0)},o(r){es(t.$$.fragment,r),n=!1},d(r){cd(t,r)}}}function m3(e){let t,n,r,i,o;return n=new oae({}),{c(){t=ti("button"),$p(n.$$.fragment),At(t,"type","button"),At(t,"title",e[9]),At(t,"class","svelte-zh3kmv"),Nu(t,"active",e[0])},m(u,l){Fi(u,t,l),ud(n,t,null),r=!0,i||(o=Ca(t,"click",e[67]),i=!0)},p(u,l){(!r||l[0]&512)&&At(t,"title",u[9]),(!r||l[0]&1)&&Nu(t,"active",u[0])},i(u){r||(xo(n.$$.fragment,u),r=!0)},o(u){es(n.$$.fragment,u),r=!1},d(u){u&&ki(t),cd(n),i=!1,o()}}}function bae(e){let t,n=[],r=new Map,i,o,u,l=i3(e[14]);const p=g=>g[81].id+(g[81].address?","+g[81].address:"");for(let g=0;g<l.length;g+=1){let x=d3(e,l,g),y=p(x);r.set(y,n[g]=g3(y,x))}return{c(){t=ti("ul");for(let g=0;g<n.length;g+=1)n[g].c();At(t,"class","svelte-zh3kmv")},m(g,x){Fi(g,t,x);for(let y=0;y<n.length;y+=1)n[y]&&n[y].m(t,null);i=!0,o||(u=[Ca(t,"mouseleave",e[71]),Ca(t,"blur",e[72])],o=!0)},p(g,x){x[0]&17880064&&(l=i3(g[14]),vw(),n=zse(n,x,p,1,g,l,r,t,Dse,g3,null,d3),xw())},i(g){if(!i){for(let x=0;x<l.length;x+=1)xo(n[x]);i=!0}},o(g){for(let x=0;x<n.length;x+=1)es(n[x]);i=!1},d(g){g&&ki(t);for(let x=0;x<n.length;x+=1)n[x].d();o=!1,Td(u)}}}function wae(e){let t,n,r,i,o,u;return n=new a$({}),{c(){t=ti("div"),$p(n.$$.fragment),r=Rl(),i=ti("div"),o=jp(e[7]),At(i,"class","svelte-zh3kmv"),At(t,"class","no-results svelte-zh3kmv")},m(l,p){Fi(l,t,p),ud(n,t,null),br(t,r),br(t,i),br(i,o),u=!0},p(l,p){(!u||p[0]&128)&&I1(o,l[7])},i(l){u||(xo(n.$$.fragment,l),u=!0)},o(l){es(n.$$.fragment,l),u=!1},d(l){l&&ki(t),cd(n)}}}function Eae(e){let t="",n;return{c(){n=jp(t)},m(r,i){Fi(r,n,i)},p:Ai,i:Ai,o:Ai,d(r){r&&ki(n)}}}function Sae(e){let t,n,r,i,o,u,l,p,g,x,y;return n=new a$({}),p=new s$({}),{c(){t=ti("div"),$p(n.$$.fragment),r=Rl(),i=ti("div"),o=jp(e[6]),u=Rl(),l=ti("button"),$p(p.$$.fragment),At(i,"class","svelte-zh3kmv"),At(l,"class","svelte-zh3kmv"),At(t,"class","error svelte-zh3kmv")},m(_,T){Fi(_,t,T),ud(n,t,null),br(t,r),br(t,i),br(i,o),br(t,u),br(t,l),ud(p,l,null),g=!0,x||(y=Ca(l,"click",e[68]),x=!0)},p(_,T){(!g||T[0]&64)&&I1(o,_[6])},i(_){g||(xo(n.$$.fragment,_),xo(p.$$.fragment,_),g=!0)},o(_){es(n.$$.fragment,_),es(p.$$.fragment,_),g=!1},d(_){_&&ki(t),cd(n),cd(p),x=!1,y()}}}function g3(e,t){let n,r,i;function o(){return t[69](t[83])}function u(){return t[70](t[81])}return r=new Jse({props:{feature:t[81],showPlaceType:t[10],selected:t[15]===t[83],missingIconsCache:t[20],iconsBaseUrl:t[12]}}),r.$on("mouseenter",o),r.$on("focus",u),{key:e,first:null,c(){n=Cse(),$p(r.$$.fragment),this.first=n},m(l,p){Fi(l,n,p),ud(r,l,p),i=!0},p(l,p){t=l;const g={};p[0]&16384&&(g.feature=t[81]),p[0]&1024&&(g.showPlaceType=t[10]),p[0]&49152&&(g.selected=t[15]===t[83]),p[0]&4096&&(g.iconsBaseUrl=t[12]),r.$set(g)},i(l){i||(xo(r.$$.fragment,l),i=!0)},o(l){es(r.$$.fragment,l),i=!1},d(l){l&&ki(n),cd(r,l)}}}function Tae(e){let t,n,r,i,o,u,l,p,g,x,y,_,T,A,O,N,k,R,z,D,U,q=!1;o=new aae({}),y=new s$({});let G=e[19]&&p3(),H=e[5]===!0&&m3(e);const J=e[59].default,Y=wse(J,e,e[58],null),X=[Sae,Eae,wae,bae],ee=[];function ue(oe,we){var Ne,Be;return oe[18]?0:oe[16]?((Ne=oe[14])==null?void 0:Ne.length)===0?2:oe[16]&&(Be=oe[14])!=null&&Be.length?3:-1:1}return~(N=ue(e))&&(k=ee[N]=X[N](e)),{c(){t=Rl(),n=ti("form"),r=ti("div"),i=ti("button"),$p(o.$$.fragment),u=Rl(),l=ti("input"),p=Rl(),g=ti("div"),x=ti("button"),$p(y.$$.fragment),_=Rl(),G&&G.c(),T=Rl(),H&&H.c(),A=Rl(),Y&&Y.c(),O=Rl(),k&&k.c(),At(i,"class","search-button svelte-zh3kmv"),At(i,"type","button"),At(l,"placeholder",e[8]),At(l,"aria-label",e[8]),At(l,"class","svelte-zh3kmv"),At(x,"type","button"),At(x,"title",e[3]),At(x,"class","svelte-zh3kmv"),At(g,"class","clear-button-container svelte-zh3kmv"),Nu(g,"displayable",e[1]!==""),At(r,"class","input-group svelte-zh3kmv"),At(n,"tabindex","0"),At(n,"class",R=e3(e[2])+" svelte-zh3kmv"),Nu(n,"can-collapse",e[4]&&e[1]==="")},m(oe,we){Fi(oe,t,we),Fi(oe,n,we),br(n,r),br(r,i),ud(o,i,null),br(r,u),br(r,l),e[61](l),t3(l,e[1]),br(r,p),br(r,g),br(g,x),ud(y,x,null),br(g,_),G&&G.m(g,null),br(r,T),H&&H.m(r,null),br(r,A),Y&&Y.m(r,null),br(n,O),~N&&ee[N].m(n,null),z=!0,D||(U=[Ca(i,"click",e[60]),Ca(l,"input",e[62]),Ca(l,"focus",e[63]),Ca(l,"blur",e[64]),Ca(l,"keydown",e[22]),Ca(l,"input",e[65]),Ca(x,"click",e[66]),Ca(n,"submit",Ise(e[21]))],D=!0)},p(oe,we){(!z||we[0]&256)&&At(l,"placeholder",oe[8]),(!z||we[0]&256)&&At(l,"aria-label",oe[8]),we[0]&2&&l.value!==oe[1]&&t3(l,oe[1]),(!z||we[0]&8)&&At(x,"title",oe[3]),oe[19]?G?we[0]&524288&&xo(G,1):(G=p3(),G.c(),xo(G,1),G.m(g,null)):G&&(vw(),es(G,1,1,()=>{G=null}),xw()),(!z||we[0]&2)&&Nu(g,"displayable",oe[1]!==""),oe[5]===!0?H?(H.p(oe,we),we[0]&32&&xo(H,1)):(H=m3(oe),H.c(),xo(H,1),H.m(r,A)):H&&(vw(),es(H,1,1,()=>{H=null}),xw()),Y&&Y.p&&(!z||we[1]&134217728)&&Sse(Y,J,oe,oe[58],z?Ese(J,oe[58],we,null):Tse(oe[58]),null);let Ne=N;N=ue(oe),N===Ne?~N&&ee[N].p(oe,we):(k&&(vw(),es(ee[Ne],1,1,()=>{ee[Ne]=null}),xw()),~N?(k=ee[N],k?k.p(oe,we):(k=ee[N]=X[N](oe),k.c()),xo(k,1),k.m(n,null)):k=null),(!z||we[0]&4&&R!==(R=e3(oe[2])+" svelte-zh3kmv"))&&At(n,"class",R),(!z||we[0]&22)&&Nu(n,"can-collapse",oe[4]&&oe[1]==="")},i(oe){z||(xo(q),xo(o.$$.fragment,oe),xo(y.$$.fragment,oe),xo(G),xo(H),xo(Y,oe),xo(k),z=!0)},o(oe){es(q),es(o.$$.fragment,oe),es(y.$$.fragment,oe),es(G),es(H),es(Y,oe),es(k),z=!1},d(oe){oe&&(ki(t),ki(n)),cd(o),e[61](null),cd(y),G&&G.d(),H&&H.d(),Y&&Y.d(oe),~N&&ee[N].d(),D=!1,Td(U)}}}function Cae(e,t,n){let r,{$$slots:i={},$$scope:o}=t,{class:u=void 0}=t,{apiKey:l}=t,{bbox:p=void 0}=t,{clearButtonTitle:g="clear"}=t,{clearOnBlur:x=!1}=t,{collapsed:y=!1}=t,{country:_=void 0}=t,{debounceSearch:T=200}=t,{enableReverse:A=!1}=t,{errorMessage:O="Something went wrong…"}=t,{filter:N=()=>!0}=t,{flyTo:k=!0}=t,{fuzzyMatch:R=!0}=t,{language:z=void 0}=t,{limit:D=void 0}=t,{mapController:U=void 0}=t,{minLength:q=2}=t,{noResultsMessage:G="Oops! Looks like you're trying to predict something that's not quite right. We can't seem to find what you're looking for. Maybe try double-checking your spelling or try a different search term. Keep on typing - we'll do our best to get you where you need to go!"}=t,{placeholder:H="Search"}=t,{proximity:J=[{type:"server-geolocation"}]}=t,{reverseActive:Y=A==="always"}=t,{reverseButtonTitle:X="toggle reverse geocoding"}=t,{searchValue:ee=""}=t,{showFullGeometry:ue=!0}=t,{showPlaceType:oe="ifNeeded"}=t,{showResultsWhileTyping:we=!0}=t,{selectFirst:Ne=!0}=t,{flyToSelected:Be=!1}=t,{markerOnSelected:De=!0}=t,{types:Ae=void 0}=t,{excludeTypes:ve=!1}=t,{zoom:ce=16}=t,{maxZoom:xe=18}=t,{apiUrl:Ee="https://api.maptiler.com/geocoding"}=t,{fetchParameters:Ge={}}=t,{iconsBaseUrl:$e="https://cdn.maptiler.com/maptiler-geocoding-control/v1.2.2/icons/"}=t,{adjustUrlQuery:be=ge=>{}}=t;function He(){rt.focus()}function it(){rt.blur()}function ct(ge,ze=!0){n(1,ee=ge),ze?(n(15,lt=-1),wn()):(Xr(),setTimeout(()=>{rt.focus(),rt.select()}))}function xt(){n(14,Ft=void 0),n(55,Gt=void 0),n(15,lt=-1)}function Dt(){n(54,Kt=[]),n(55,Gt=void 0)}let Qt=!1,Ft,Kt,Gt,Tr="",rt,lt=-1,gt,_t=[],Pt,je,vt,St;const Lt=new Set,en=Ose();Ase(()=>{U&&(U.setEventHandler(void 0),U.indicateReverse(!1),U.setSelectedMarker(-1),U.setMarkers(void 0,void 0))});function wn(ge){if(je&&(clearTimeout(je),je=void 0),lt>-1&&Ft)n(55,Gt=Ft[lt]),n(1,ee=Gt.place_type[0]==="reverse"?Gt.place_name:Gt.place_name.replace(/,.*/,"")),n(18,gt=void 0),n(54,Kt=void 0),n(15,lt=-1);else if(ee){const ze=ge||!gn(ee);bt(ee,{exact:!0}).then(()=>{n(54,Kt=Ft),n(55,Gt=void 0),ze&&Un()}).catch(Ie=>n(18,gt=Ie))}}function gn(ge){try{return xae(ge,6)}catch{return!1}}async function bt(ge,{byId:ze=!1,exact:Ie=!1}={}){n(18,gt=void 0),Pt==null||Pt.abort();const Ve=new AbortController;n(19,Pt=Ve);try{const Qe=gn(ge),ot=new URLSearchParams;if(z!==void 0&&ot.set("language",Array.isArray(z)?z.join(","):z??""),Ae&&ot.set("types",Ae.join(",")),ve&&ot.set("excludeTypes",String(ve)),p&&ot.set("bbox",p.map(an=>an.toFixed(6)).join(",")),_&&ot.set("country",Array.isArray(_)?_.join(","):_),!ze&&!Qe){const an=await uae(U,J,Ve);an&&ot.set("proximity",an),(Ie||!we)&&ot.set("autocomplete","false"),ot.set("fuzzyMatch",String(R))}D!==void 0&&(!Qe||(Ae==null?void 0:Ae.length)===1)&&ot.set("limit",String(D)),ot.set("key",l),be(ot);const et=Ee+"/"+encodeURIComponent(Qe?Qe.decimalLongitude+","+Qe.decimalLatitude:ge)+".json?"+ot.toString();if(et===Tr){ze?(n(14,Ft=void 0),n(55,Gt=_t[0])):n(14,Ft=_t);return}Tr=et;const ht=await fetch(et,{signal:Ve.signal,...Ge});if(!ht.ok)throw new Error(await ht.text());const Zt=await ht.json();en("response",{url:et,featureCollection:Zt}),ze?(n(14,Ft=void 0),n(55,Gt=Zt.features[0]),_t=[Gt]):(n(14,Ft=Zt.features.filter(N)),Qe&&Ft.unshift({type:"Feature",properties:{},id:"reverse_"+Qe.decimalLongitude+"_"+Qe.decimalLatitude,text:Qe.decimalLatitude+", "+Qe.decimalLongitude,place_name:Qe.decimalLatitude+", "+Qe.decimalLongitude,place_type:["reverse"],center:[Qe.decimalLongitude,Qe.decimalLatitude],bbox:[Qe.decimalLongitude,Qe.decimalLatitude,Qe.decimalLongitude,Qe.decimalLatitude],geometry:{type:"Point",coordinates:[Qe.decimalLongitude,Qe.decimalLatitude]}}),_t=Ft,Qe&&rt.focus())}catch(Qe){if(Qe&&typeof Qe=="object"&&"name"in Qe&&Qe.name==="AbortError")return;throw Qe}finally{Ve===Pt&&n(19,Pt=void 0)}}function Un(){var ge;if(!(Kt!=null&&Kt.length)||!k)return;const ze=[180,90,-180,-90],Ie=!Kt.some(Ve=>!Ve.matching_text);for(const Ve of Kt)if(Ie||!Ve.matching_text)for(const Qe of[0,1,2,3])ze[Qe]=Math[Qe<2?"min":"max"](ze[Qe],((ge=Ve.bbox)==null?void 0:ge[Qe])??Ve.center[Qe%2]);U&&Kt.length>0&&(Gt&&ze[0]===ze[2]&&ze[1]===ze[3]?U.flyTo(Gt.center,ce):U.fitBounds(s3(ze),50,xe))}function yr(ge){n(0,Y=A==="always"),n(14,Ft=void 0),n(55,Gt=void 0),n(15,lt=-1),ct(ge[1].toFixed(6)+", "+lae(ge[0],[-180,180],!0).toFixed(6),!1)}function Vs(ge){if(!Ft)return;let ze=ge.key==="ArrowDown"?1:ge.key==="ArrowUp"?-1:0;ze&&(lt===(Ne?0:-1)&&ze===-1&&n(15,lt=Ft.length),n(15,lt+=ze),lt>=Ft.length&&n(15,lt=-1),lt<0&&Ne&&n(15,lt=0),ge.preventDefault())}function Xr(ge=!0){if(n(18,gt=void 0),we){if(je&&clearTimeout(je),ee.length<q)return;const ze=ee;je=window.setTimeout(()=>{bt(ze).catch(Ie=>n(18,gt=Ie))},ge?T:0)}else n(14,Ft=void 0),n(18,gt=void 0)}function kt(ge){n(55,Gt=ge),n(1,ee=ge.place_name),n(15,lt=-1)}const _n=()=>rt.focus();function Pn(ge){bP[ge?"unshift":"push"](()=>{rt=ge,n(17,rt)})}function Cr(){ee=this.value,n(1,ee),n(13,Qt),n(27,x)}const Zo=()=>n(13,Qt=!0),Tn=()=>n(13,Qt=!1),Gs=()=>Xr(),Vr=()=>{n(1,ee=""),rt.focus()},Oe=()=>n(0,Y=!Y),K=()=>n(18,gt=void 0),te=ge=>n(15,lt=ge),ae=ge=>kt(ge),pe=()=>{Ne||n(15,lt=-1)},ke=()=>{};return e.$$set=ge=>{"class"in ge&&n(2,u=ge.class),"apiKey"in ge&&n(25,l=ge.apiKey),"bbox"in ge&&n(26,p=ge.bbox),"clearButtonTitle"in ge&&n(3,g=ge.clearButtonTitle),"clearOnBlur"in ge&&n(27,x=ge.clearOnBlur),"collapsed"in ge&&n(4,y=ge.collapsed),"country"in ge&&n(28,_=ge.country),"debounceSearch"in ge&&n(29,T=ge.debounceSearch),"enableReverse"in ge&&n(5,A=ge.enableReverse),"errorMessage"in ge&&n(6,O=ge.errorMessage),"filter"in ge&&n(30,N=ge.filter),"flyTo"in ge&&n(31,k=ge.flyTo),"fuzzyMatch"in ge&&n(32,R=ge.fuzzyMatch),"language"in ge&&n(33,z=ge.language),"limit"in ge&&n(34,D=ge.limit),"mapController"in ge&&n(35,U=ge.mapController),"minLength"in ge&&n(36,q=ge.minLength),"noResultsMessage"in ge&&n(7,G=ge.noResultsMessage),"placeholder"in ge&&n(8,H=ge.placeholder),"proximity"in ge&&n(37,J=ge.proximity),"reverseActive"in ge&&n(0,Y=ge.reverseActive),"reverseButtonTitle"in ge&&n(9,X=ge.reverseButtonTitle),"searchValue"in ge&&n(1,ee=ge.searchValue),"showFullGeometry"in ge&&n(38,ue=ge.showFullGeometry),"showPlaceType"in ge&&n(10,oe=ge.showPlaceType),"showResultsWhileTyping"in ge&&n(39,we=ge.showResultsWhileTyping),"selectFirst"in ge&&n(11,Ne=ge.selectFirst),"flyToSelected"in ge&&n(40,Be=ge.flyToSelected),"markerOnSelected"in ge&&n(41,De=ge.markerOnSelected),"types"in ge&&n(42,Ae=ge.types),"excludeTypes"in ge&&n(43,ve=ge.excludeTypes),"zoom"in ge&&n(44,ce=ge.zoom),"maxZoom"in ge&&n(45,xe=ge.maxZoom),"apiUrl"in ge&&n(46,Ee=ge.apiUrl),"fetchParameters"in ge&&n(47,Ge=ge.fetchParameters),"iconsBaseUrl"in ge&&n(12,$e=ge.iconsBaseUrl),"adjustUrlQuery"in ge&&n(48,be=ge.adjustUrlQuery),"$$scope"in ge&&n(58,o=ge.$$scope)},e.$$.update=()=>{if(e.$$.dirty[0]&134225920&&setTimeout(()=>{n(16,vt=Qt),x&&!Qt&&n(1,ee="")}),e.$$.dirty[0]&16386|e.$$.dirty[1]&32&&ee.length<q&&(n(55,Gt=void 0),n(14,Ft=void 0),n(18,gt=void 0),n(54,Kt=Ft)),e.$$.dirty[1]&16777344&&ue&&Gt&&!Gt.address&&Gt.geometry.type==="Point"&&Gt.place_type[0]!=="reverse"&&bt(Gt.id,{byId:!0}).catch(ge=>n(18,gt=ge)),e.$$.dirty[1]&50356241&&(U&&Gt&&Gt.id!==St&&k&&(!Gt.bbox||Gt.bbox[0]===Gt.bbox[2]&&Gt.bbox[1]===Gt.bbox[3]?U.flyTo(Gt.center,Gt.id.startsWith("poi.")||Gt.id.startsWith("address.")?xe:ce):U.fitBounds(s3(Gt.bbox),50,xe),n(14,Ft=void 0),n(54,Kt=void 0),n(15,lt=-1)),n(56,St=Gt==null?void 0:Gt.id)),e.$$.dirty[0]&18432&&Ne&&Ft!=null&&Ft.length&&n(15,lt=0),e.$$.dirty[0]&2050&&(Ne||n(15,lt=-1)),e.$$.dirty[0]&16384|e.$$.dirty[1]&8388608&&Kt!==Ft&&n(54,Kt=void 0),e.$$.dirty[0]&81921|e.$$.dirty[1]&8388624&&U&&U.setEventHandler(ge=>{switch(ge.type){case"mapClick":Y&&yr(ge.coordinates);break;case"markerClick":{const ze=Ft==null?void 0:Ft.find(Ie=>Ie.id===ge.id);ze&&kt(ze)}break;case"markerMouseEnter":Kt&&n(15,lt=vt?(Ft==null?void 0:Ft.findIndex(ze=>ze.id===ge.id))??-1:-1);break;case"markerMouseLeave":Kt&&n(15,lt=-1);break}}),e.$$.dirty[0]&49152&&n(57,r=Ft==null?void 0:Ft[lt]),e.$$.dirty[1]&67133969&&U&&r&&k&&Be&&U.flyTo(r.center,r.id.startsWith("poi.")||r.id.startsWith("address.")?xe:ce),e.$$.dirty[1]&1040&&(De||U==null||U.setMarkers(void 0,void 0)),e.$$.dirty[1]&75498512&&U&&De&&!Kt&&(U.setMarkers(r?[r]:void 0,void 0),U.setSelectedMarker(r?0:-1)),e.$$.dirty[1]&25165840&&U&&U.setMarkers(Kt,Gt),e.$$.dirty[0]&32768|e.$$.dirty[1]&8388624&&Kt&&U&&U.setSelectedMarker(lt),e.$$.dirty[0]&2|e.$$.dirty[1]&16&&U){const ge=gn(ee);U.setReverseMarker(ge?[ge.decimalLongitude,ge.decimalLatitude]:void 0)}e.$$.dirty[1]&67108864&&en("select",r),e.$$.dirty[1]&16777216&&en("pick",Gt),e.$$.dirty[0]&81920&&en("optionsVisibilityChange",vt&&!!Ft),e.$$.dirty[0]&16384&&en("featuresListed",Ft),e.$$.dirty[1]&8388608&&en("featuresMarked",Kt),e.$$.dirty[0]&1&&en("reverseToggle",Y),e.$$.dirty[0]&2&&en("queryChange",ee),e.$$.dirty[0]&1|e.$$.dirty[1]&16&&U&&U.indicateReverse(Y)},[Y,ee,u,g,y,A,O,G,H,X,oe,Ne,$e,Qt,Ft,lt,vt,rt,gt,Pt,Lt,wn,Vs,Xr,kt,l,p,x,_,T,N,k,R,z,D,U,q,J,ue,we,Be,De,Ae,ve,ce,xe,Ee,Ge,be,He,it,ct,xt,Dt,Kt,Gt,St,r,o,i,_n,Pn,Cr,Zo,Tn,Gs,Vr,Oe,K,te,ae,pe,ke]}let Iae=class extends sm{constructor(e){super(),om(this,e,Cae,Tae,im,{class:2,apiKey:25,bbox:26,clearButtonTitle:3,clearOnBlur:27,collapsed:4,country:28,debounceSearch:29,enableReverse:5,errorMessage:6,filter:30,flyTo:31,fuzzyMatch:32,language:33,limit:34,mapController:35,minLength:36,noResultsMessage:7,placeholder:8,proximity:37,reverseActive:0,reverseButtonTitle:9,searchValue:1,showFullGeometry:38,showPlaceType:10,showResultsWhileTyping:39,selectFirst:11,flyToSelected:40,markerOnSelected:41,types:42,excludeTypes:43,zoom:44,maxZoom:45,apiUrl:46,fetchParameters:47,iconsBaseUrl:12,adjustUrlQuery:48,focus:49,blur:50,setQuery:51,clearList:52,clearMap:53},null,[-1,-1,-1])}get focus(){return this.$$.ctx[49]}get blur(){return this.$$.ctx[50]}get setQuery(){return this.$$.ctx[51]}get clearList(){return this.$$.ctx[52]}get clearMap(){return this.$$.ctx[53]}};/**
 * splaytree v3.1.2
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function Pae(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,u;return u={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function l(g){return function(x){return p([g,x])}}function p(g){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=g[0]&2?i.return:g[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,g[1])).done)return o;switch(i=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,i=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){n.label=g[1];break}if(g[0]===6&&n.label<o[1]){n.label=o[1],o=g;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(g);break}o[2]&&n.ops.pop(),n.trys.pop();continue}g=t.call(e,n)}catch(x){g=[6,x],i=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}var Up=function(){function e(t,n){this.next=null,this.key=t,this.data=n,this.left=null,this.right=null}return e}();function Lae(e,t){return e>t?1:e<t?-1:0}function cp(e,t,n){for(var r=new Up(null,null),i=r,o=r;;){var u=n(e,t.key);if(u<0){if(t.left===null)break;if(n(e,t.left.key)<0){var l=t.left;if(t.left=l.right,l.right=t,t=l,t.left===null)break}o.left=t,o=t,t=t.left}else if(u>0){if(t.right===null)break;if(n(e,t.right.key)>0){var l=t.right;if(t.right=l.left,l.left=t,t=l,t.right===null)break}i.right=t,i=t,t=t.right}else break}return i.right=t.left,o.left=t.right,t.left=r.right,t.right=r.left,t}function J2(e,t,n,r){var i=new Up(e,t);if(n===null)return i.left=i.right=null,i;n=cp(e,n,r);var o=r(e,n.key);return o<0?(i.left=n.left,i.right=n,n.left=null):o>=0&&(i.right=n.right,i.left=n,n.right=null),i}function y3(e,t,n){var r=null,i=null;if(t){t=cp(e,t,n);var o=n(t.key,e);o===0?(r=t.left,i=t.right):o<0?(i=t.right,t.right=null,r=t):(r=t.left,t.left=null,i=t)}return{left:r,right:i}}function Aae(e,t,n){return t===null?e:(e===null||(t=cp(e.key,t,n),t.left=e),t)}function SP(e,t,n,r,i){if(e){r(""+t+(n?"└── ":"├── ")+i(e)+`
`);var o=t+(n?"    ":"│   ");e.left&&SP(e.left,o,!1,r,i),e.right&&SP(e.right,o,!0,r,i)}}var eO=function(){function e(t){t===void 0&&(t=Lae),this._root=null,this._size=0,this._comparator=t}return e.prototype.insert=function(t,n){return this._size++,this._root=J2(t,n,this._root,this._comparator)},e.prototype.add=function(t,n){var r=new Up(t,n);this._root===null&&(r.left=r.right=null,this._size++,this._root=r);var i=this._comparator,o=cp(t,this._root,i),u=i(t,o.key);return u===0?this._root=o:(u<0?(r.left=o.left,r.right=o,o.left=null):u>0&&(r.right=o.right,r.left=o,o.right=null),this._size++,this._root=r),this._root},e.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},e.prototype._remove=function(t,n,r){var i;if(n===null)return null;n=cp(t,n,r);var o=r(t,n.key);return o===0?(n.left===null?i=n.right:(i=cp(t,n.left,r),i.right=n.right),this._size--,i):n},e.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=cp(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},e.prototype.findStatic=function(t){for(var n=this._root,r=this._comparator;n;){var i=r(t,n.key);if(i===0)return n;i<0?n=n.left:n=n.right}return null},e.prototype.find=function(t){return this._root&&(this._root=cp(t,this._root,this._comparator),this._comparator(t,this._root.key)!==0)?null:this._root},e.prototype.contains=function(t){for(var n=this._root,r=this._comparator;n;){var i=r(t,n.key);if(i===0)return!0;i<0?n=n.left:n=n.right}return!1},e.prototype.forEach=function(t,n){for(var r=this._root,i=[],o=!1;!o;)r!==null?(i.push(r),r=r.left):i.length!==0?(r=i.pop(),t.call(n,r),r=r.right):o=!0;return this},e.prototype.range=function(t,n,r,i){for(var o=[],u=this._comparator,l=this._root,p;o.length!==0||l;)if(l)o.push(l),l=l.left;else{if(l=o.pop(),p=u(l.key,n),p>0)break;if(u(l.key,t)>=0&&r.call(i,l))return this;l=l.right}return this},e.prototype.keys=function(){var t=[];return this.forEach(function(n){var r=n.key;return t.push(r)}),t},e.prototype.values=function(){var t=[];return this.forEach(function(n){var r=n.data;return t.push(r)}),t},e.prototype.min=function(){return this._root?this.minNode(this._root).key:null},e.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},e.prototype.minNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.left;)t=t.left;return t},e.prototype.maxNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.right;)t=t.right;return t},e.prototype.at=function(t){for(var n=this._root,r=!1,i=0,o=[];!r;)if(n)o.push(n),n=n.left;else if(o.length>0){if(n=o.pop(),i===t)return n;i++,n=n.right}else r=!0;return null},e.prototype.next=function(t){var n=this._root,r=null;if(t.right){for(r=t.right;r.left;)r=r.left;return r}for(var i=this._comparator;n;){var o=i(t.key,n.key);if(o===0)break;o<0?(r=n,n=n.left):n=n.right}return r},e.prototype.prev=function(t){var n=this._root,r=null;if(t.left!==null){for(r=t.left;r.right;)r=r.right;return r}for(var i=this._comparator;n;){var o=i(t.key,n.key);if(o===0)break;o<0?n=n.left:(r=n,n=n.right)}return r},e.prototype.clear=function(){return this._root=null,this._size=0,this},e.prototype.toList=function(){return kae(this._root)},e.prototype.load=function(t,n,r){n===void 0&&(n=[]),r===void 0&&(r=!1);var i=t.length,o=this._comparator;if(r&&IP(t,n,0,i-1,o),this._root===null)this._root=TP(t,n,0,i),this._size=i;else{var u=Rae(this.toList(),Oae(t,n),o);i=this._size+i,this._root=CP({head:u},0,i)}return this},e.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),e.prototype.toString=function(t){t===void 0&&(t=function(r){return String(r.key)});var n=[];return SP(this._root,"",!0,function(r){return n.push(r)},t),n.join("")},e.prototype.update=function(t,n,r){var i=this._comparator,o=y3(t,this._root,i),u=o.left,l=o.right;i(t,n)<0?l=J2(n,r,l,i):u=J2(n,r,u,i),this._root=Aae(u,l,i)},e.prototype.split=function(t){return y3(t,this._root,this._comparator)},e.prototype[Symbol.iterator]=function(){var t,n,r;return Pae(this,function(i){switch(i.label){case 0:t=this._root,n=[],r=!1,i.label=1;case 1:return r?[3,6]:t===null?[3,2]:(n.push(t),t=t.left,[3,5]);case 2:return n.length===0?[3,4]:(t=n.pop(),[4,t]);case 3:return i.sent(),t=t.right,[3,5];case 4:r=!0,i.label=5;case 5:return[3,1];case 6:return[2]}})},e}();function TP(e,t,n,r){var i=r-n;if(i>0){var o=n+Math.floor(i/2),u=e[o],l=t[o],p=new Up(u,l);return p.left=TP(e,t,n,o),p.right=TP(e,t,o+1,r),p}return null}function Oae(e,t){for(var n=new Up(null,null),r=n,i=0;i<e.length;i++)r=r.next=new Up(e[i],t[i]);return r.next=null,n.next}function kae(e){for(var t=e,n=[],r=!1,i=new Up(null,null),o=i;!r;)t?(n.push(t),t=t.left):n.length>0?(t=o=o.next=n.pop(),t=t.right):r=!0;return o.next=null,i.next}function CP(e,t,n){var r=n-t;if(r>0){var i=t+Math.floor(r/2),o=CP(e,t,i),u=e.head;return u.left=o,e.head=e.head.next,u.right=CP(e,i+1,n),u}return null}function Rae(e,t,n){for(var r=new Up(null,null),i=r,o=e,u=t;o!==null&&u!==null;)n(o.key,u.key)<0?(i.next=o,o=o.next):(i.next=u,u=u.next),i=i.next;return o!==null?i.next=o:u!==null&&(i.next=u),r.next}function IP(e,t,n,r,i){if(!(n>=r)){for(var o=e[n+r>>1],u=n-1,l=r+1;;){do u++;while(i(e[u],o)<0);do l--;while(i(e[l],o)>0);if(u>=l)break;var p=e[u];e[u]=e[l],e[l]=p,p=t[u],t[u]=t[l],t[l]=p}IP(e,t,n,l,i),IP(e,t,l+1,r,i)}}function ec(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ka(e,t,n){return t&&_3(e.prototype,t),n&&_3(e,n),e}var f0=function(e,t){return e.ll.x<=t.x&&t.x<=e.ur.x&&e.ll.y<=t.y&&t.y<=e.ur.y},PP=function(e,t){if(t.ur.x<e.ll.x||e.ur.x<t.ll.x||t.ur.y<e.ll.y||e.ur.y<t.ll.y)return null;var n=e.ll.x<t.ll.x?t.ll.x:e.ll.x,r=e.ur.x<t.ur.x?e.ur.x:t.ur.x,i=e.ll.y<t.ll.y?t.ll.y:e.ll.y,o=e.ur.y<t.ur.y?e.ur.y:t.ur.y;return{ll:{x:n,y:i},ur:{x:r,y:o}}},Ep=Number.EPSILON;Ep===void 0&&(Ep=Math.pow(2,-52));var Mae=Ep*Ep,LP=function(e,t){if(-Ep<e&&e<Ep&&-Ep<t&&t<Ep)return 0;var n=e-t;return n*n<Mae*e*t?0:e<t?-1:1},Nae=function(){function e(){ec(this,e),this.reset()}return ka(e,[{key:"reset",value:function(){this.xRounder=new v3,this.yRounder=new v3}},{key:"round",value:function(t,n){return{x:this.xRounder.round(t),y:this.yRounder.round(n)}}}]),e}(),v3=function(){function e(){ec(this,e),this.tree=new eO,this.round(0)}return ka(e,[{key:"round",value:function(t){var n=this.tree.add(t),r=this.tree.prev(n);if(r!==null&&LP(n.key,r.key)===0)return this.tree.remove(t),r.key;var i=this.tree.next(n);return i!==null&&LP(n.key,i.key)===0?(this.tree.remove(t),i.key):t}}]),e}(),L1=new Nae,Z0=function(e,t){return e.x*t.y-e.y*t.x},l$=function(e,t){return e.x*t.x+e.y*t.y},x3=function(e,t,n){var r={x:t.x-e.x,y:t.y-e.y},i={x:n.x-e.x,y:n.y-e.y},o=Z0(r,i);return LP(o,0)},aE=function(e){return Math.sqrt(l$(e,e))},Dae=function(e,t,n){var r={x:t.x-e.x,y:t.y-e.y},i={x:n.x-e.x,y:n.y-e.y};return Z0(i,r)/aE(i)/aE(r)},zae=function(e,t,n){var r={x:t.x-e.x,y:t.y-e.y},i={x:n.x-e.x,y:n.y-e.y};return l$(i,r)/aE(i)/aE(r)},b3=function(e,t,n){return t.y===0?null:{x:e.x+t.x/t.y*(n-e.y),y:n}},w3=function(e,t,n){return t.x===0?null:{x:n,y:e.y+t.y/t.x*(n-e.x)}},Fae=function(e,t,n,r){if(t.x===0)return w3(n,r,e.x);if(r.x===0)return w3(e,t,n.x);if(t.y===0)return b3(n,r,e.y);if(r.y===0)return b3(e,t,n.y);var i=Z0(t,r);if(i==0)return null;var o={x:n.x-e.x,y:n.y-e.y},u=Z0(o,t)/i,l=Z0(o,r)/i,p=e.x+l*t.x,g=n.x+u*r.x,x=e.y+l*t.y,y=n.y+u*r.y,_=(p+g)/2,T=(x+y)/2;return{x:_,y:T}},zh=function(){ka(e,null,[{key:"compare",value:function(t,n){var r=e.comparePoints(t.point,n.point);return r!==0?r:(t.point!==n.point&&t.link(n),t.isLeft!==n.isLeft?t.isLeft?1:-1:lE.compare(t.segment,n.segment))}},{key:"comparePoints",value:function(t,n){return t.x<n.x?-1:t.x>n.x?1:t.y<n.y?-1:t.y>n.y?1:0}}]);function e(t,n){ec(this,e),t.events===void 0?t.events=[this]:t.events.push(this),this.point=t,this.isLeft=n}return ka(e,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var n=t.point.events,r=0,i=n.length;r<i;r++){var o=n[r];this.point.events.push(o),o.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,n=0;n<t;n++){var r=this.point.events[n];if(r.segment.consumedBy===void 0)for(var i=n+1;i<t;i++){var o=this.point.events[i];o.consumedBy===void 0&&r.otherSE.point.events===o.otherSE.point.events&&r.segment.consume(o.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],n=0,r=this.point.events.length;n<r;n++){var i=this.point.events[n];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&t.push(i)}return t}},{key:"getLeftmostComparator",value:function(t){var n=this,r=new Map,i=function(o){var u=o.otherSE;r.set(o,{sine:Dae(n.point,t.point,u.point),cosine:zae(n.point,t.point,u.point)})};return function(o,u){r.has(o)||i(o),r.has(u)||i(u);var l=r.get(o),p=l.sine,g=l.cosine,x=r.get(u),y=x.sine,_=x.cosine;return p>=0&&y>=0?g<_?1:g>_?-1:0:p<0&&y<0?g<_?-1:g>_?1:0:y<p?-1:y>p?1:0}}}]),e}(),Bae=0,lE=function(){ka(e,null,[{key:"compare",value:function(t,n){var r=t.leftSE.point.x,i=n.leftSE.point.x,o=t.rightSE.point.x,u=n.rightSE.point.x;if(u<r)return 1;if(o<i)return-1;var l=t.leftSE.point.y,p=n.leftSE.point.y,g=t.rightSE.point.y,x=n.rightSE.point.y;if(r<i){if(p<l&&p<g)return 1;if(p>l&&p>g)return-1;var y=t.comparePoint(n.leftSE.point);if(y<0)return 1;if(y>0)return-1;var _=n.comparePoint(t.rightSE.point);return _!==0?_:-1}if(r>i){if(l<p&&l<x)return-1;if(l>p&&l>x)return 1;var T=n.comparePoint(t.leftSE.point);if(T!==0)return T;var A=t.comparePoint(n.rightSE.point);return A<0?1:A>0?-1:1}if(l<p)return-1;if(l>p)return 1;if(o<u){var O=n.comparePoint(t.rightSE.point);if(O!==0)return O}if(o>u){var N=t.comparePoint(n.rightSE.point);if(N<0)return 1;if(N>0)return-1}if(o!==u){var k=g-l,R=o-r,z=x-p,D=u-i;if(k>R&&z<D)return 1;if(k<R&&z>D)return-1}return o>u?1:o<u||g<x?-1:g>x?1:t.id<n.id?-1:t.id>n.id?1:0}}]);function e(t,n,r,i){ec(this,e),this.id=++Bae,this.leftSE=t,t.segment=this,t.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=t,this.rings=r,this.windings=i}return ka(e,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<n?t:n},ur:{x:this.rightSE.point.x,y:t>n?t:n}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var n=this.leftSE.point,r=this.rightSE.point,i=this.vector();if(n.x===r.x)return t.x===n.x?0:t.x<n.x?1:-1;var o=(t.y-n.y)/i.y,u=n.x+o*i.x;if(t.x===u)return 0;var l=(t.x-n.x)/i.x,p=n.y+l*i.y;return t.y===p?0:t.y<p?-1:1}},{key:"getIntersection",value:function(t){var n=this.bbox(),r=t.bbox(),i=PP(n,r);if(i===null)return null;var o=this.leftSE.point,u=this.rightSE.point,l=t.leftSE.point,p=t.rightSE.point,g=f0(n,l)&&this.comparePoint(l)===0,x=f0(r,o)&&t.comparePoint(o)===0,y=f0(n,p)&&this.comparePoint(p)===0,_=f0(r,u)&&t.comparePoint(u)===0;if(x&&g)return _&&!y?u:!_&&y?p:null;if(x)return y&&o.x===p.x&&o.y===p.y?null:o;if(g)return _&&u.x===l.x&&u.y===l.y?null:l;if(_&&y)return null;if(_)return u;if(y)return p;var T=Fae(o,this.vector(),l,t.vector());return T===null||!f0(i,T)?null:L1.round(T.x,T.y)}},{key:"split",value:function(t){var n=[],r=t.events!==void 0,i=new zh(t,!0),o=new zh(t,!1),u=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(i);var l=new e(i,u,this.rings.slice(),this.windings.slice());return zh.comparePoints(l.leftSE.point,l.rightSE.point)>0&&l.swapEvents(),zh.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),o.checkForConsuming()),n}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var n=0,r=this.windings.length;n<r;n++)this.windings[n]*=-1}},{key:"consume",value:function(t){for(var n=this,r=t;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;var i=e.compare(n,r);if(i!==0){if(i>0){var o=n;n=r,r=o}if(n.prev===r){var u=n;n=r,r=u}for(var l=0,p=r.rings.length;l<p;l++){var g=r.rings[l],x=r.windings[l],y=n.rings.indexOf(g);y===-1?(n.rings.push(g),n.windings.push(x)):n.windings[y]+=x}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var n=this._afterState.rings,r=this._afterState.windings,i=this._afterState.multiPolys,o=0,u=this.rings.length;o<u;o++){var l=this.rings[o],p=this.windings[o],g=n.indexOf(l);g===-1?(n.push(l),r.push(p)):r[g]+=p}for(var x=[],y=[],_=0,T=n.length;_<T;_++)if(r[_]!==0){var A=n[_],O=A.poly;if(y.indexOf(O)===-1)if(A.isExterior)x.push(O);else{y.indexOf(O)===-1&&y.push(O);var N=x.indexOf(A.poly);N!==-1&&x.splice(N,1)}}for(var k=0,R=x.length;k<R;k++){var z=x[k].multiPoly;i.indexOf(z)===-1&&i.push(z)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var t=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch(Rc.type){case"union":{var r=t.length===0,i=n.length===0;this._isInResult=r!==i;break}case"intersection":{var o,u;t.length<n.length?(o=t.length,u=n.length):(o=n.length,u=t.length),this._isInResult=u===Rc.numMultiPolys&&o<u;break}case"xor":{var l=Math.abs(t.length-n.length);this._isInResult=l%2===1;break}case"difference":{var p=function(g){return g.length===1&&g[0].isSubject};this._isInResult=p(t)!==p(n);break}default:throw new Error("Unrecognized operation type found ".concat(Rc.type))}return this._isInResult}}],[{key:"fromRing",value:function(t,n,r){var i,o,u,l=zh.comparePoints(t,n);if(l<0)i=t,o=n,u=1;else if(l>0)i=n,o=t,u=-1;else throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));var p=new zh(i,!0),g=new zh(o,!1);return new e(p,g,[r],[u])}}]),e}(),E3=function(){function e(t,n,r){if(ec(this,e),!Array.isArray(t)||t.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=r,this.segments=[],typeof t[0][0]!="number"||typeof t[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var i=L1.round(t[0][0],t[0][1]);this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};for(var o=i,u=1,l=t.length;u<l;u++){if(typeof t[u][0]!="number"||typeof t[u][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var p=L1.round(t[u][0],t[u][1]);p.x===o.x&&p.y===o.y||(this.segments.push(lE.fromRing(o,p,this)),p.x<this.bbox.ll.x&&(this.bbox.ll.x=p.x),p.y<this.bbox.ll.y&&(this.bbox.ll.y=p.y),p.x>this.bbox.ur.x&&(this.bbox.ur.x=p.x),p.y>this.bbox.ur.y&&(this.bbox.ur.y=p.y),o=p)}(i.x!==o.x||i.y!==o.y)&&this.segments.push(lE.fromRing(o,i,this))}return ka(e,[{key:"getSweepEvents",value:function(){for(var t=[],n=0,r=this.segments.length;n<r;n++){var i=this.segments[n];t.push(i.leftSE),t.push(i.rightSE)}return t}}]),e}(),jae=function(){function e(t,n){if(ec(this,e),!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new E3(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var r=1,i=t.length;r<i;r++){var o=new E3(t[r],this,!1);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.interiorRings.push(o)}this.multiPoly=n}return ka(e,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),n=0,r=this.interiorRings.length;n<r;n++)for(var i=this.interiorRings[n].getSweepEvents(),o=0,u=i.length;o<u;o++)t.push(i[o]);return t}}]),e}(),S3=function(){function e(t,n){if(ec(this,e),!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof t[0][0][0]=="number"&&(t=[t])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var r=0,i=t.length;r<i;r++){var o=new jae(t[r],this);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.polys.push(o)}this.isSubject=n}return ka(e,[{key:"getSweepEvents",value:function(){for(var t=[],n=0,r=this.polys.length;n<r;n++)for(var i=this.polys[n].getSweepEvents(),o=0,u=i.length;o<u;o++)t.push(i[o]);return t}}]),e}(),$ae=function(){ka(e,null,[{key:"factory",value:function(t){for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r];if(!(!o.isInResult()||o.ringOut)){for(var u=null,l=o.leftSE,p=o.rightSE,g=[l],x=l.point,y=[];u=l,l=p,g.push(l),l.point!==x;)for(;;){var _=l.getAvailableLinkedEvents();if(_.length===0){var T=g[0].point,A=g[g.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(T.x,",")+" ".concat(T.y,"]. Last matching segment found ends at")+" [".concat(A.x,", ").concat(A.y,"]."))}if(_.length===1){p=_[0].otherSE;break}for(var O=null,N=0,k=y.length;N<k;N++)if(y[N].point===l.point){O=N;break}if(O!==null){var R=y.splice(O)[0],z=g.splice(R.index);z.unshift(z[0].otherSE),n.push(new e(z.reverse()));continue}y.push({index:g.length,point:l.point});var D=l.getLeftmostComparator(u);p=_.sort(D)[0].otherSE;break}n.push(new e(g))}}return n}}]);function e(t){ec(this,e),this.events=t;for(var n=0,r=t.length;n<r;n++)t[n].segment.ringOut=this;this.poly=null}return ka(e,[{key:"getGeom",value:function(){for(var t=this.events[0].point,n=[t],r=1,i=this.events.length-1;r<i;r++){var o=this.events[r].point,u=this.events[r+1].point;x3(o,t,u)!==0&&(n.push(o),t=o)}if(n.length===1)return null;var l=n[0],p=n[1];x3(l,t,p)===0&&n.shift(),n.push(n[0]);for(var g=this.isExteriorRing()?1:-1,x=this.isExteriorRing()?0:n.length-1,y=this.isExteriorRing()?n.length:-1,_=[],T=x;T!=y;T+=g)_.push([n[T].x,n[T].y]);return _}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var t=this.enclosingRing();this._isExteriorRing=t?!t.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],n=1,r=this.events.length;n<r;n++){var i=this.events[n];zh.compare(t,i)>0&&(t=i)}for(var o=t.segment.prevInResult(),u=o?o.prevInResult():null;;){if(!o)return null;if(!u)return o.ringOut;if(u.ringOut!==o.ringOut)return u.ringOut.enclosingRing()!==o.ringOut?o.ringOut:o.ringOut.enclosingRing();o=u.prevInResult(),u=o?o.prevInResult():null}}}]),e}(),T3=function(){function e(t){ec(this,e),this.exteriorRing=t,t.poly=this,this.interiorRings=[]}return ka(e,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(t[0]===null)return null;for(var n=0,r=this.interiorRings.length;n<r;n++){var i=this.interiorRings[n].getGeom();i!==null&&t.push(i)}return t}}]),e}(),Uae=function(){function e(t){ec(this,e),this.rings=t,this.polys=this._composePolys(t)}return ka(e,[{key:"getGeom",value:function(){for(var t=[],n=0,r=this.polys.length;n<r;n++){var i=this.polys[n].getGeom();i!==null&&t.push(i)}return t}},{key:"_composePolys",value:function(t){for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r];if(!o.poly)if(o.isExteriorRing())n.push(new T3(o));else{var u=o.enclosingRing();u.poly||n.push(new T3(u)),u.poly.addInterior(o)}}return n}}]),e}(),qae=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:lE.compare;ec(this,e),this.queue=t,this.tree=new eO(n),this.segments=[]}return ka(e,[{key:"process",value:function(t){var n=t.segment,r=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(n),r;var i=t.isLeft?this.tree.insert(n):this.tree.find(n);if(!i)throw new Error("Unable to find segment #".concat(n.id," ")+"[".concat(n.leftSE.point.x,", ").concat(n.leftSE.point.y,"] -> ")+"[".concat(n.rightSE.point.x,", ").concat(n.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var o=i,u=i,l=void 0,p=void 0;l===void 0;)o=this.tree.prev(o),o===null?l=null:o.key.consumedBy===void 0&&(l=o.key);for(;p===void 0;)u=this.tree.next(u),u===null?p=null:u.key.consumedBy===void 0&&(p=u.key);if(t.isLeft){var g=null;if(l){var x=l.getIntersection(n);if(x!==null&&(n.isAnEndpoint(x)||(g=x),!l.isAnEndpoint(x)))for(var y=this._splitSafely(l,x),_=0,T=y.length;_<T;_++)r.push(y[_])}var A=null;if(p){var O=p.getIntersection(n);if(O!==null&&(n.isAnEndpoint(O)||(A=O),!p.isAnEndpoint(O)))for(var N=this._splitSafely(p,O),k=0,R=N.length;k<R;k++)r.push(N[k])}if(g!==null||A!==null){var z=null;if(g===null)z=A;else if(A===null)z=g;else{var D=zh.comparePoints(g,A);z=D<=0?g:A}this.queue.remove(n.rightSE),r.push(n.rightSE);for(var U=n.split(z),q=0,G=U.length;q<G;q++)r.push(U[q])}r.length>0?(this.tree.remove(n),r.push(t)):(this.segments.push(n),n.prev=l)}else{if(l&&p){var H=l.getIntersection(p);if(H!==null){if(!l.isAnEndpoint(H))for(var J=this._splitSafely(l,H),Y=0,X=J.length;Y<X;Y++)r.push(J[Y]);if(!p.isAnEndpoint(H))for(var ee=this._splitSafely(p,H),ue=0,oe=ee.length;ue<oe;ue++)r.push(ee[ue])}}this.tree.remove(n)}return r}},{key:"_splitSafely",value:function(t,n){this.tree.remove(t);var r=t.rightSE;this.queue.remove(r);var i=t.split(n);return i.push(r),t.consumedBy===void 0&&this.tree.insert(t),i}}]),e}(),C3=typeof process<"u"&&Qj.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Vae=typeof process<"u"&&Qj.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Gae=function(){function e(){ec(this,e)}return ka(e,[{key:"run",value:function(t,n,r){Rc.type=t,L1.reset();for(var i=[new S3(n,!0)],o=0,u=r.length;o<u;o++)i.push(new S3(r[o],!1));if(Rc.numMultiPolys=i.length,Rc.type==="difference")for(var l=i[0],p=1;p<i.length;)PP(i[p].bbox,l.bbox)!==null?p++:i.splice(p,1);if(Rc.type==="intersection"){for(var g=0,x=i.length;g<x;g++)for(var y=i[g],_=g+1,T=i.length;_<T;_++)if(PP(y.bbox,i[_].bbox)===null)return[]}for(var A=new eO(zh.compare),O=0,N=i.length;O<N;O++)for(var k=i[O].getSweepEvents(),R=0,z=k.length;R<z;R++)if(A.insert(k[R]),A.size>C3)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var D=new qae(A),U=A.size,q=A.pop();q;){var G=q.key;if(A.size===U){var H=G.segment;throw new Error("Unable to pop() ".concat(G.isLeft?"left":"right"," SweepEvent ")+"[".concat(G.point.x,", ").concat(G.point.y,"] from segment #").concat(H.id," ")+"[".concat(H.leftSE.point.x,", ").concat(H.leftSE.point.y,"] -> ")+"[".concat(H.rightSE.point.x,", ").concat(H.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(A.size>C3)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(D.segments.length>Vae)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var J=D.process(G),Y=0,X=J.length;Y<X;Y++){var ee=J[Y];ee.consumedBy===void 0&&A.insert(ee)}U=A.size,q=A.pop()}L1.reset();var ue=$ae.factory(D.segments),oe=new Uae(ue);return oe.getGeom()}}]),e}(),Rc=new Gae,Hae=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Rc.run("union",e,n)},Zae=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Rc.run("intersection",e,n)},Wae=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Rc.run("xor",e,n)},Kae=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Rc.run("difference",e,n)},u$={union:Hae,intersection:Zae,xor:Wae,difference:Kae},ba=63710088e-1,c$={centimeters:ba*100,centimetres:ba*100,degrees:ba/111325,feet:ba*3.28084,inches:ba*39.37,kilometers:ba/1e3,kilometres:ba/1e3,meters:ba,metres:ba,miles:ba/1609.344,millimeters:ba*1e3,millimetres:ba*1e3,nauticalmiles:ba/1852,radians:1,yards:ba*1.0936};function FS(e,t,n){n===void 0&&(n={});var r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function Xae(e,t,n){if(n===void 0&&(n={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!I3(e[0])||!I3(e[1]))throw new Error("coordinates must contain numbers");var r={type:"Point",coordinates:e};return FS(r,t,n)}function h$(e,t,n){n===void 0&&(n={});for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var u=0;u<o[o.length-1].length;u++)if(o[o.length-1][u]!==o[0][u])throw new Error("First and last Position are not equivalent.")}var l={type:"Polygon",coordinates:e};return FS(l,t,n)}function AP(e,t){t===void 0&&(t={});var n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function f$(e,t,n){n===void 0&&(n={});var r={type:"MultiPolygon",coordinates:e};return FS(r,t,n)}function Yae(e,t){t===void 0&&(t="kilometers");var n=c$[t];if(!n)throw new Error(t+" units is invalid");return e*n}function Jae(e,t){t===void 0&&(t="kilometers");var n=c$[t];if(!n)throw new Error(t+" units is invalid");return e/n}function I3(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function uE(e){return e.type==="Feature"?e.geometry:e}function Qae(e,t,n){n===void 0&&(n={});var r=uE(e),i=uE(t),o=u$.union(r.coordinates,i.coordinates);return o.length===0?null:o.length===1?h$(o[0],n.properties):f$(o,n.properties)}function d$(e,t,n){if(e!==null)for(var r,i,o,u,l,p,g,x=0,y=0,_,T=e.type,A=T==="FeatureCollection",O=T==="Feature",N=A?e.features.length:1,k=0;k<N;k++){g=A?e.features[k].geometry:O?e.geometry:e,_=g?g.type==="GeometryCollection":!1,l=_?g.geometries.length:1;for(var R=0;R<l;R++){var z=0,D=0;if(u=_?g.geometries[R]:g,u!==null){p=u.coordinates;var U=u.type;switch(x=n&&(U==="Polygon"||U==="MultiPolygon")?1:0,U){case null:break;case"Point":if(t(p,y,k,z,D)===!1)return!1;y++,z++;break;case"LineString":case"MultiPoint":for(r=0;r<p.length;r++){if(t(p[r],y,k,z,D)===!1)return!1;y++,U==="MultiPoint"&&z++}U==="LineString"&&z++;break;case"Polygon":case"MultiLineString":for(r=0;r<p.length;r++){for(i=0;i<p[r].length-x;i++){if(t(p[r][i],y,k,z,D)===!1)return!1;y++}U==="MultiLineString"&&z++,U==="Polygon"&&D++}U==="Polygon"&&z++;break;case"MultiPolygon":for(r=0;r<p.length;r++){for(D=0,i=0;i<p[r].length;i++){for(o=0;o<p[r][i].length-x;o++){if(t(p[r][i][o],y,k,z,D)===!1)return!1;y++}D++}z++}break;case"GeometryCollection":for(r=0;r<u.geometries.length;r++)if(d$(u.geometries[r],t,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function P3(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var n=0;n<e.features.length&&t(e.features[n],n)!==!1;n++);}function p$(e,t){var n,r,i,o,u,l,p,g,x,y,_=0,T=e.type==="FeatureCollection",A=e.type==="Feature",O=T?e.features.length:1;for(n=0;n<O;n++){for(l=T?e.features[n].geometry:A?e.geometry:e,g=T?e.features[n].properties:A?e.properties:{},x=T?e.features[n].bbox:A?e.bbox:void 0,y=T?e.features[n].id:A?e.id:void 0,p=l?l.type==="GeometryCollection":!1,u=p?l.geometries.length:1,i=0;i<u;i++){if(o=p?l.geometries[i]:l,o===null){if(t(null,_,g,x,y)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(o,_,g,x,y)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<o.geometries.length;r++)if(t(o.geometries[r],_,g,x,y)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}_++}}function OP(e){var t=[1/0,1/0,-1/0,-1/0];return d$(e,function(n){t[0]>n[0]&&(t[0]=n[0]),t[1]>n[1]&&(t[1]=n[1]),t[2]<n[0]&&(t[2]=n[0]),t[3]<n[1]&&(t[3]=n[1])}),t}OP.default=OP;function ele(e,t){t===void 0&&(t={});var n=OP(e),r=(n[0]+n[2])/2,i=(n[1]+n[3])/2;return Xae([r,i],t.properties,t)}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(e){if(this===void 0||this===null)throw new TypeError(this+" is not an object");var t=Object(this),n=Math.max(Math.min(t.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&arguments[2]!==void 0?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)t[r]=e,++r;return t},writable:!0});Number.isFinite=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)};Number.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};Number.parseFloat=Number.parseFloat||parseFloat;Number.isNaN=Number.isNaN||function(e){return e!==e};Math.trunc=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};var Eg=function(){};Eg.prototype.interfaces_=function(){return[]};Eg.prototype.getClass=function(){return Eg};Eg.prototype.equalsWithTolerance=function(e,t,n){return Math.abs(e-t)<=n};var ri=function(e){function t(n){e.call(this,n),this.name="IllegalArgumentException",this.message=n,this.stack=new e().stack}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),On=function(){},m$={MAX_VALUE:{configurable:!0}};On.isNaN=function(e){return Number.isNaN(e)};On.doubleToLongBits=function(e){return e};On.longBitsToDouble=function(e){return e};On.isInfinite=function(e){return!Number.isFinite(e)};m$.MAX_VALUE.get=function(){return Number.MAX_VALUE};Object.defineProperties(On,m$);var pl=function(){},BS=function(){},O_=function(){};function ml(){}var nt=function e(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)this.x=0,this.y=0,this.z=e.NULL_ORDINATE;else if(arguments.length===1){var t=arguments[0];this.x=t.x,this.y=t.y,this.z=t.z}else arguments.length===2?(this.x=arguments[0],this.y=arguments[1],this.z=e.NULL_ORDINATE):arguments.length===3&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},Vg={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};nt.prototype.setOrdinate=function(e,t){switch(e){case nt.X:this.x=t;break;case nt.Y:this.y=t;break;case nt.Z:this.z=t;break;default:throw new ri("Invalid ordinate index: "+e)}};nt.prototype.equals2D=function(){if(arguments.length===1){var e=arguments[0];return!(this.x!==e.x||this.y!==e.y)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];return!(!Eg.equalsWithTolerance(this.x,t.x,n)||!Eg.equalsWithTolerance(this.y,t.y,n))}};nt.prototype.getOrdinate=function(e){switch(e){case nt.X:return this.x;case nt.Y:return this.y;case nt.Z:return this.z}throw new ri("Invalid ordinate index: "+e)};nt.prototype.equals3D=function(e){return this.x===e.x&&this.y===e.y&&(this.z===e.z||On.isNaN(this.z))&&On.isNaN(e.z)};nt.prototype.equals=function(e){return e instanceof nt?this.equals2D(e):!1};nt.prototype.equalInZ=function(e,t){return Eg.equalsWithTolerance(this.z,e.z,t)};nt.prototype.compareTo=function(e){var t=e;return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0};nt.prototype.clone=function(){};nt.prototype.copy=function(){return new nt(this)};nt.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};nt.prototype.distance3D=function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return Math.sqrt(t*t+n*n+r*r)};nt.prototype.distance=function(e){var t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)};nt.prototype.hashCode=function(){var e=17;return e=37*e+nt.hashCode(this.x),e=37*e+nt.hashCode(this.y),e};nt.prototype.setCoordinate=function(e){this.x=e.x,this.y=e.y,this.z=e.z};nt.prototype.interfaces_=function(){return[pl,BS,ml]};nt.prototype.getClass=function(){return nt};nt.hashCode=function(){if(arguments.length===1){var e=arguments[0],t=On.doubleToLongBits(e);return Math.trunc((t^t)>>>32)}};Vg.DimensionalComparator.get=function(){return Jf};Vg.serialVersionUID.get=function(){return 6683108902428367e3};Vg.NULL_ORDINATE.get=function(){return On.NaN};Vg.X.get=function(){return 0};Vg.Y.get=function(){return 1};Vg.Z.get=function(){return 2};Object.defineProperties(nt,Vg);var Jf=function(e){if(this._dimensionsToTest=2,arguments.length!==0&&arguments.length===1){var t=arguments[0];if(t!==2&&t!==3)throw new ri("only 2 or 3 dimensions may be specified");this._dimensionsToTest=t}};Jf.prototype.compare=function(e,t){var n=e,r=t,i=Jf.compare(n.x,r.x);if(i!==0)return i;var o=Jf.compare(n.y,r.y);if(o!==0)return o;if(this._dimensionsToTest<=2)return 0;var u=Jf.compare(n.z,r.z);return u};Jf.prototype.interfaces_=function(){return[O_]};Jf.prototype.getClass=function(){return Jf};Jf.compare=function(e,t){return e<t?-1:e>t?1:On.isNaN(e)?On.isNaN(t)?0:-1:On.isNaN(t)?1:0};var k_=function(){};k_.prototype.create=function(){};k_.prototype.interfaces_=function(){return[]};k_.prototype.getClass=function(){return k_};var st=function(){},Ex={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};st.prototype.interfaces_=function(){return[]};st.prototype.getClass=function(){return st};st.toLocationSymbol=function(e){switch(e){case st.EXTERIOR:return"e";case st.BOUNDARY:return"b";case st.INTERIOR:return"i";case st.NONE:return"-"}throw new ri("Unknown location value: "+e)};Ex.INTERIOR.get=function(){return 0};Ex.BOUNDARY.get=function(){return 1};Ex.EXTERIOR.get=function(){return 2};Ex.NONE.get=function(){return-1};Object.defineProperties(st,Ex);var Sn=function(e,t){return e.interfaces_&&e.interfaces_().indexOf(t)>-1},Ra=function(){},g$={LOG_10:{configurable:!0}};Ra.prototype.interfaces_=function(){return[]};Ra.prototype.getClass=function(){return Ra};Ra.log10=function(e){var t=Math.log(e);return On.isInfinite(t)||On.isNaN(t)?t:t/Ra.LOG_10};Ra.min=function(e,t,n,r){var i=e;return t<i&&(i=t),n<i&&(i=n),r<i&&(i=r),i};Ra.clamp=function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],t=arguments[1],n=arguments[2];return e<t?t:e>n?n:e}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}};Ra.wrap=function(e,t){return e<0?t- -e%t:e%t};Ra.max=function(){if(arguments.length===3){var e=arguments[0],t=arguments[1],n=arguments[2],r=e;return t>r&&(r=t),n>r&&(r=n),r}else if(arguments.length===4){var i=arguments[0],o=arguments[1],u=arguments[2],l=arguments[3],p=i;return o>p&&(p=o),u>p&&(p=u),l>p&&(p=l),p}};Ra.average=function(e,t){return(e+t)/2};g$.LOG_10.get=function(){return Math.log(10)};Object.defineProperties(Ra,g$);var tc=function(e){this.str=e};tc.prototype.append=function(e){this.str+=e};tc.prototype.setCharAt=function(e,t){this.str=this.str.substr(0,e)+t+this.str.substr(e+1)};tc.prototype.toString=function(e){return this.str};var qu=function(e){this.value=e};qu.prototype.intValue=function(){return this.value};qu.prototype.compareTo=function(e){return this.value<e?-1:this.value>e?1:0};qu.isNaN=function(e){return Number.isNaN(e)};var A1=function(){};A1.isWhitespace=function(e){return e<=32&&e>=0||e===127};A1.toUpperCase=function(e){return e.toUpperCase()};var pt=function e(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof e){var n=arguments[0];this.init(n)}else if(typeof arguments[0]=="string"){var r=arguments[0];e.call(this,e.parse(r))}}else if(arguments.length===2){var i=arguments[0],o=arguments[1];this.init(i,o)}},ru={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};pt.prototype.le=function(e){return(this._hi<e._hi||this._hi===e._hi)&&this._lo<=e._lo};pt.prototype.extractSignificantDigits=function(e,t){var n=this.abs(),r=pt.magnitude(n._hi),i=pt.TEN.pow(r);n=n.divide(i),n.gt(pt.TEN)?(n=n.divide(pt.TEN),r+=1):n.lt(pt.ONE)&&(n=n.multiply(pt.TEN),r-=1);for(var o=r+1,u=new tc,l=pt.MAX_PRINT_DIGITS-1,p=0;p<=l;p++){e&&p===o&&u.append(".");var g=Math.trunc(n._hi);if(g<0)break;var x=!1,y=0;g>9?(x=!0,y="9"):y="0"+g,u.append(y),n=n.subtract(pt.valueOf(g)).multiply(pt.TEN),x&&n.selfAdd(pt.TEN);var _=!0,T=pt.magnitude(n._hi);if(T<0&&Math.abs(T)>=l-p&&(_=!1),!_)break}return t[0]=r,u.toString()};pt.prototype.sqr=function(){return this.multiply(this)};pt.prototype.doubleValue=function(){return this._hi+this._lo};pt.prototype.subtract=function(){if(arguments[0]instanceof pt){var e=arguments[0];return this.add(e.negate())}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.add(-t)}};pt.prototype.equals=function(){if(arguments.length===1){var e=arguments[0];return this._hi===e._hi&&this._lo===e._lo}};pt.prototype.isZero=function(){return this._hi===0&&this._lo===0};pt.prototype.selfSubtract=function(){if(arguments[0]instanceof pt){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e._hi,-e._lo)}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t,0)}};pt.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null};pt.prototype.min=function(e){return this.le(e)?this:e};pt.prototype.selfDivide=function(){if(arguments.length===1){if(arguments[0]instanceof pt){var e=arguments[0];return this.selfDivide(e._hi,e._lo)}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.selfDivide(t,0)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=null,o=null,u=null,l=null,p=null,g=null,x=null,y=null;return p=this._hi/n,g=pt.SPLIT*p,i=g-p,y=pt.SPLIT*n,i=g-i,o=p-i,u=y-n,x=p*n,u=y-u,l=n-u,y=i*u-x+i*l+o*u+o*l,g=(this._hi-x-y+this._lo-p*r)/n,y=p+g,this._hi=y,this._lo=p-y+g,this}};pt.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"};pt.prototype.divide=function(){if(arguments[0]instanceof pt){var e=arguments[0],t=null,n=null,r=null,i=null,o=null,u=null,l=null,p=null;o=this._hi/e._hi,u=pt.SPLIT*o,t=u-o,p=pt.SPLIT*e._hi,t=u-t,n=o-t,r=p-e._hi,l=o*e._hi,r=p-r,i=e._hi-r,p=t*r-l+t*i+n*r+n*i,u=(this._hi-l-p+this._lo-o*e._lo)/e._hi,p=o+u;var g=p,x=o-p+u;return new pt(g,x)}else if(typeof arguments[0]=="number"){var y=arguments[0];return On.isNaN(y)?pt.createNaN():pt.copy(this).selfDivide(y,0)}};pt.prototype.ge=function(e){return(this._hi>e._hi||this._hi===e._hi)&&this._lo>=e._lo};pt.prototype.pow=function(e){if(e===0)return pt.valueOf(1);var t=new pt(this),n=pt.valueOf(1),r=Math.abs(e);if(r>1)for(;r>0;)r%2===1&&n.selfMultiply(t),r/=2,r>0&&(t=t.sqr());else n=t;return e<0?n.reciprocal():n};pt.prototype.ceil=function(){if(this.isNaN())return pt.NaN;var e=Math.ceil(this._hi),t=0;return e===this._hi&&(t=Math.ceil(this._lo)),new pt(e,t)};pt.prototype.compareTo=function(e){var t=e;return this._hi<t._hi?-1:this._hi>t._hi?1:this._lo<t._lo?-1:this._lo>t._lo?1:0};pt.prototype.rint=function(){if(this.isNaN())return this;var e=this.add(.5);return e.floor()};pt.prototype.setValue=function(){if(arguments[0]instanceof pt){var e=arguments[0];return this.init(e),this}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.init(t),this}};pt.prototype.max=function(e){return this.ge(e)?this:e};pt.prototype.sqrt=function(){if(this.isZero())return pt.valueOf(0);if(this.isNegative())return pt.NaN;var e=1/Math.sqrt(this._hi),t=this._hi*e,n=pt.valueOf(t),r=this.subtract(n.sqr()),i=r._hi*(e*.5);return n.add(i)};pt.prototype.selfAdd=function(){if(arguments.length===1){if(arguments[0]instanceof pt){var e=arguments[0];return this.selfAdd(e._hi,e._lo)}else if(typeof arguments[0]=="number"){var t=arguments[0],n=null,r=null,i=null,o=null,u=null,l=null;return i=this._hi+t,u=i-this._hi,o=i-u,o=t-u+(this._hi-o),l=o+this._lo,n=i+l,r=l+(i-n),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(arguments.length===2){var p=arguments[0],g=arguments[1],x=null,y=null,_=null,T=null,A=null,O=null,N=null,k=null;A=this._hi+p,_=this._lo+g,N=A-this._hi,k=_-this._lo,O=A-N,T=_-k,O=p-N+(this._hi-O),T=g-k+(this._lo-T),N=O+_,x=A+N,y=N+(A-x),N=T+y;var R=x+N,z=N+(x-R);return this._hi=R,this._lo=z,this}};pt.prototype.selfMultiply=function(){if(arguments.length===1){if(arguments[0]instanceof pt){var e=arguments[0];return this.selfMultiply(e._hi,e._lo)}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.selfMultiply(t,0)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=null,o=null,u=null,l=null,p=null,g=null;p=pt.SPLIT*this._hi,i=p-this._hi,g=pt.SPLIT*n,i=p-i,o=this._hi-i,u=g-n,p=this._hi*n,u=g-u,l=n-u,g=i*u-p+i*l+o*u+o*l+(this._hi*r+this._lo*n);var x=p+g;i=p-x;var y=g+i;return this._hi=x,this._lo=y,this}};pt.prototype.selfSqr=function(){return this.selfMultiply(this)};pt.prototype.floor=function(){if(this.isNaN())return pt.NaN;var e=Math.floor(this._hi),t=0;return e===this._hi&&(t=Math.floor(this._lo)),new pt(e,t)};pt.prototype.negate=function(){return this.isNaN()?this:new pt(-this._hi,-this._lo)};pt.prototype.clone=function(){};pt.prototype.multiply=function(){if(arguments[0]instanceof pt){var e=arguments[0];return e.isNaN()?pt.createNaN():pt.copy(this).selfMultiply(e)}else if(typeof arguments[0]=="number"){var t=arguments[0];return On.isNaN(t)?pt.createNaN():pt.copy(this).selfMultiply(t,0)}};pt.prototype.isNaN=function(){return On.isNaN(this._hi)};pt.prototype.intValue=function(){return Math.trunc(this._hi)};pt.prototype.toString=function(){var e=pt.magnitude(this._hi);return e>=-3&&e<=20?this.toStandardNotation():this.toSciNotation()};pt.prototype.toStandardNotation=function(){var e=this.getSpecialNumberString();if(e!==null)return e;var t=new Array(1).fill(null),n=this.extractSignificantDigits(!0,t),r=t[0]+1,i=n;if(n.charAt(0)===".")i="0"+n;else if(r<0)i="0."+pt.stringOfChar("0",-r)+n;else if(n.indexOf(".")===-1){var o=r-n.length,u=pt.stringOfChar("0",o);i=n+u+".0"}return this.isNegative()?"-"+i:i};pt.prototype.reciprocal=function(){var e=null,t=null,n=null,r=null,i=null,o=null,u=null,l=null;i=1/this._hi,o=pt.SPLIT*i,e=o-i,l=pt.SPLIT*this._hi,e=o-e,t=i-e,n=l-this._hi,u=i*this._hi,n=l-n,r=this._hi-n,l=e*n-u+e*r+t*n+t*r,o=(1-u-l-i*this._lo)/this._hi;var p=i+o,g=i-p+o;return new pt(p,g)};pt.prototype.toSciNotation=function(){if(this.isZero())return pt.SCI_NOT_ZERO;var e=this.getSpecialNumberString();if(e!==null)return e;var t=new Array(1).fill(null),n=this.extractSignificantDigits(!1,t),r=pt.SCI_NOT_EXPONENT_CHAR+t[0];if(n.charAt(0)==="0")throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r};pt.prototype.abs=function(){return this.isNaN()?pt.NaN:this.isNegative()?this.negate():new pt(this)};pt.prototype.isPositive=function(){return(this._hi>0||this._hi===0)&&this._lo>0};pt.prototype.lt=function(e){return(this._hi<e._hi||this._hi===e._hi)&&this._lo<e._lo};pt.prototype.add=function(){if(arguments[0]instanceof pt){var e=arguments[0];return pt.copy(this).selfAdd(e)}else if(typeof arguments[0]=="number"){var t=arguments[0];return pt.copy(this).selfAdd(t)}};pt.prototype.init=function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var e=arguments[0];this._hi=e,this._lo=0}else if(arguments[0]instanceof pt){var t=arguments[0];this._hi=t._hi,this._lo=t._lo}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}};pt.prototype.gt=function(e){return(this._hi>e._hi||this._hi===e._hi)&&this._lo>e._lo};pt.prototype.isNegative=function(){return(this._hi<0||this._hi===0)&&this._lo<0};pt.prototype.trunc=function(){return this.isNaN()?pt.NaN:this.isPositive()?this.floor():this.ceil()};pt.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0};pt.prototype.interfaces_=function(){return[ml,pl,BS]};pt.prototype.getClass=function(){return pt};pt.sqr=function(e){return pt.valueOf(e).selfMultiply(e)};pt.valueOf=function(){if(typeof arguments[0]=="string"){var e=arguments[0];return pt.parse(e)}else if(typeof arguments[0]=="number"){var t=arguments[0];return new pt(t)}};pt.sqrt=function(e){return pt.valueOf(e).sqrt()};pt.parse=function(e){for(var t=0,n=e.length;A1.isWhitespace(e.charAt(t));)t++;var r=!1;if(t<n){var i=e.charAt(t);(i==="-"||i==="+")&&(t++,i==="-"&&(r=!0))}for(var o=new pt,u=0,l=0,p=0;!(t>=n);){var g=e.charAt(t);if(t++,A1.isDigit(g)){var x=g-"0";o.selfMultiply(pt.TEN),o.selfAdd(x),u++;continue}if(g==="."){l=u;continue}if(g==="e"||g==="E"){var y=e.substring(t);try{p=qu.parseInt(y)}catch(N){throw N instanceof Error?new Error("Invalid exponent "+y+" in string "+e):N}finally{}break}throw new Error("Unexpected character '"+g+"' at position "+t+" in string "+e)}var _=o,T=u-l-p;if(T===0)_=o;else if(T>0){var A=pt.TEN.pow(T);_=o.divide(A)}else if(T<0){var O=pt.TEN.pow(-T);_=o.multiply(O)}return r?_.negate():_};pt.createNaN=function(){return new pt(On.NaN,On.NaN)};pt.copy=function(e){return new pt(e)};pt.magnitude=function(e){var t=Math.abs(e),n=Math.log(t)/Math.log(10),r=Math.trunc(Math.floor(n)),i=Math.pow(10,r);return i*10<=t&&(r+=1),r};pt.stringOfChar=function(e,t){for(var n=new tc,r=0;r<t;r++)n.append(e);return n.toString()};ru.PI.get=function(){return new pt(3.141592653589793,12246467991473532e-32)};ru.TWO_PI.get=function(){return new pt(6.283185307179586,24492935982947064e-32)};ru.PI_2.get=function(){return new pt(1.5707963267948966,6123233995736766e-32)};ru.E.get=function(){return new pt(2.718281828459045,14456468917292502e-32)};ru.NaN.get=function(){return new pt(On.NaN,On.NaN)};ru.EPS.get=function(){return 123259516440783e-46};ru.SPLIT.get=function(){return 134217729};ru.MAX_PRINT_DIGITS.get=function(){return 32};ru.TEN.get=function(){return pt.valueOf(10)};ru.ONE.get=function(){return pt.valueOf(1)};ru.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"};ru.SCI_NOT_ZERO.get=function(){return"0.0E0"};Object.defineProperties(pt,ru);var zs=function(){},y$={DP_SAFE_EPSILON:{configurable:!0}};zs.prototype.interfaces_=function(){return[]};zs.prototype.getClass=function(){return zs};zs.orientationIndex=function(e,t,n){var r=zs.orientationIndexFilter(e,t,n);if(r<=1)return r;var i=pt.valueOf(t.x).selfAdd(-e.x),o=pt.valueOf(t.y).selfAdd(-e.y),u=pt.valueOf(n.x).selfAdd(-t.x),l=pt.valueOf(n.y).selfAdd(-t.y);return i.selfMultiply(l).selfSubtract(o.selfMultiply(u)).signum()};zs.signOfDet2x2=function(e,t,n,r){var i=e.multiply(r).selfSubtract(t.multiply(n));return i.signum()};zs.intersection=function(e,t,n,r){var i=pt.valueOf(r.y).selfSubtract(n.y).selfMultiply(pt.valueOf(t.x).selfSubtract(e.x)),o=pt.valueOf(r.x).selfSubtract(n.x).selfMultiply(pt.valueOf(t.y).selfSubtract(e.y)),u=i.subtract(o),l=pt.valueOf(r.x).selfSubtract(n.x).selfMultiply(pt.valueOf(e.y).selfSubtract(n.y)),p=pt.valueOf(r.y).selfSubtract(n.y).selfMultiply(pt.valueOf(e.x).selfSubtract(n.x)),g=l.subtract(p),x=g.selfDivide(u).doubleValue(),y=pt.valueOf(e.x).selfAdd(pt.valueOf(t.x).selfSubtract(e.x).selfMultiply(x)).doubleValue(),_=pt.valueOf(t.x).selfSubtract(e.x).selfMultiply(pt.valueOf(e.y).selfSubtract(n.y)),T=pt.valueOf(t.y).selfSubtract(e.y).selfMultiply(pt.valueOf(e.x).selfSubtract(n.x)),A=_.subtract(T),O=A.selfDivide(u).doubleValue(),N=pt.valueOf(n.y).selfAdd(pt.valueOf(r.y).selfSubtract(n.y).selfMultiply(O)).doubleValue();return new nt(y,N)};zs.orientationIndexFilter=function(e,t,n){var r=null,i=(e.x-n.x)*(t.y-n.y),o=(e.y-n.y)*(t.x-n.x),u=i-o;if(i>0){if(o<=0)return zs.signum(u);r=i+o}else if(i<0){if(o>=0)return zs.signum(u);r=-i-o}else return zs.signum(u);var l=zs.DP_SAFE_EPSILON*r;return u>=l||-u>=l?zs.signum(u):2};zs.signum=function(e){return e>0?1:e<0?-1:0};y$.DP_SAFE_EPSILON.get=function(){return 1e-15};Object.defineProperties(zs,y$);var rr=function(){},Sx={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};Sx.X.get=function(){return 0};Sx.Y.get=function(){return 1};Sx.Z.get=function(){return 2};Sx.M.get=function(){return 3};rr.prototype.setOrdinate=function(e,t,n){};rr.prototype.size=function(){};rr.prototype.getOrdinate=function(e,t){};rr.prototype.getCoordinate=function(){};rr.prototype.getCoordinateCopy=function(e){};rr.prototype.getDimension=function(){};rr.prototype.getX=function(e){};rr.prototype.clone=function(){};rr.prototype.expandEnvelope=function(e){};rr.prototype.copy=function(){};rr.prototype.getY=function(e){};rr.prototype.toCoordinateArray=function(){};rr.prototype.interfaces_=function(){return[BS]};rr.prototype.getClass=function(){return rr};Object.defineProperties(rr,Sx);var _$=function(){},lv=function(e){function t(){e.call(this,"Projective point not representable on the Cartesian plane.")}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(_$),Mo=function(){};Mo.arraycopy=function(e,t,n,r,i){for(var o=0,u=t;u<t+i;u++)n[r+o]=e[u],o++};Mo.getProperty=function(e){return{"line.separator":`
`}[e]};var jl=function e(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof e&&arguments[1]instanceof e){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof nt&&arguments[1]instanceof nt){var u=arguments[0],l=arguments[1];this.x=u.y-l.y,this.y=l.x-u.x,this.w=u.x*l.y-l.x*u.y}}else if(arguments.length===3){var p=arguments[0],g=arguments[1],x=arguments[2];this.x=p,this.y=g,this.w=x}else if(arguments.length===4){var y=arguments[0],_=arguments[1],T=arguments[2],A=arguments[3],O=y.y-_.y,N=_.x-y.x,k=y.x*_.y-_.x*y.y,R=T.y-A.y,z=A.x-T.x,D=T.x*A.y-A.x*T.y;this.x=N*D-z*k,this.y=R*k-O*D,this.w=O*z-R*N}};jl.prototype.getY=function(){var e=this.y/this.w;if(On.isNaN(e)||On.isInfinite(e))throw new lv;return e};jl.prototype.getX=function(){var e=this.x/this.w;if(On.isNaN(e)||On.isInfinite(e))throw new lv;return e};jl.prototype.getCoordinate=function(){var e=new nt;return e.x=this.getX(),e.y=this.getY(),e};jl.prototype.interfaces_=function(){return[]};jl.prototype.getClass=function(){return jl};jl.intersection=function(e,t,n,r){var i=e.y-t.y,o=t.x-e.x,u=e.x*t.y-t.x*e.y,l=n.y-r.y,p=r.x-n.x,g=n.x*r.y-r.x*n.y,x=o*g-p*u,y=l*u-i*g,_=i*p-l*o,T=x/_,A=y/_;if(On.isNaN(T)||On.isInfinite(T)||On.isNaN(A)||On.isInfinite(A))throw new lv;return new nt(T,A)};var dn=function e(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof nt){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof e){var n=arguments[0];this.init(n)}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(arguments.length===4){var o=arguments[0],u=arguments[1],l=arguments[2],p=arguments[3];this.init(o,u,l,p)}},v$={serialVersionUID:{configurable:!0}};dn.prototype.getArea=function(){return this.getWidth()*this.getHeight()};dn.prototype.equals=function(e){if(!(e instanceof dn))return!1;var t=e;return this.isNull()?t.isNull():this._maxx===t.getMaxX()&&this._maxy===t.getMaxY()&&this._minx===t.getMinX()&&this._miny===t.getMinY()};dn.prototype.intersection=function(e){if(this.isNull()||e.isNull()||!this.intersects(e))return new dn;var t=this._minx>e._minx?this._minx:e._minx,n=this._miny>e._miny?this._miny:e._miny,r=this._maxx<e._maxx?this._maxx:e._maxx,i=this._maxy<e._maxy?this._maxy:e._maxy;return new dn(t,r,n,i)};dn.prototype.isNull=function(){return this._maxx<this._minx};dn.prototype.getMaxX=function(){return this._maxx};dn.prototype.covers=function(){if(arguments.length===1){if(arguments[0]instanceof nt){var e=arguments[0];return this.covers(e.x,e.y)}else if(arguments[0]instanceof dn){var t=arguments[0];return this.isNull()||t.isNull()?!1:t.getMinX()>=this._minx&&t.getMaxX()<=this._maxx&&t.getMinY()>=this._miny&&t.getMaxY()<=this._maxy}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.isNull()?!1:n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}};dn.prototype.intersects=function(){if(arguments.length===1){if(arguments[0]instanceof dn){var e=arguments[0];return this.isNull()||e.isNull()?!1:!(e._minx>this._maxx||e._maxx<this._minx||e._miny>this._maxy||e._maxy<this._miny)}else if(arguments[0]instanceof nt){var t=arguments[0];return this.intersects(t.x,t.y)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.isNull()?!1:!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}};dn.prototype.getMinY=function(){return this._miny};dn.prototype.getMinX=function(){return this._minx};dn.prototype.expandToInclude=function(){if(arguments.length===1){if(arguments[0]instanceof nt){var e=arguments[0];this.expandToInclude(e.x,e.y)}else if(arguments[0]instanceof dn){var t=arguments[0];if(t.isNull())return null;this.isNull()?(this._minx=t.getMinX(),this._maxx=t.getMaxX(),this._miny=t.getMinY(),this._maxy=t.getMaxY()):(t._minx<this._minx&&(this._minx=t._minx),t._maxx>this._maxx&&(this._maxx=t._maxx),t._miny<this._miny&&(this._miny=t._miny),t._maxy>this._maxy&&(this._maxy=t._maxy))}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}};dn.prototype.minExtent=function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return e<t?e:t};dn.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx};dn.prototype.compareTo=function(e){var t=e;return this.isNull()?t.isNull()?0:-1:t.isNull()?1:this._minx<t._minx?-1:this._minx>t._minx?1:this._miny<t._miny?-1:this._miny>t._miny?1:this._maxx<t._maxx?-1:this._maxx>t._maxx?1:this._maxy<t._maxy?-1:this._maxy>t._maxy?1:0};dn.prototype.translate=function(e,t){if(this.isNull())return null;this.init(this.getMinX()+e,this.getMaxX()+e,this.getMinY()+t,this.getMaxY()+t)};dn.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"};dn.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1};dn.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny};dn.prototype.maxExtent=function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return e>t?e:t};dn.prototype.expandBy=function(){if(arguments.length===1){var e=arguments[0];this.expandBy(e,e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=t,this._maxx+=t,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}};dn.prototype.contains=function(){if(arguments.length===1){if(arguments[0]instanceof dn){var e=arguments[0];return this.covers(e)}else if(arguments[0]instanceof nt){var t=arguments[0];return this.covers(t)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.covers(n,r)}};dn.prototype.centre=function(){return this.isNull()?null:new nt((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)};dn.prototype.init=function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof nt){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof dn){var t=arguments[0];this._minx=t._minx,this._maxx=t._maxx,this._miny=t._miny,this._maxy=t._maxy}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(arguments.length===4){var i=arguments[0],o=arguments[1],u=arguments[2],l=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),u<l?(this._miny=u,this._maxy=l):(this._miny=l,this._maxy=u)}};dn.prototype.getMaxY=function(){return this._maxy};dn.prototype.distance=function(e){if(this.intersects(e))return 0;var t=0;this._maxx<e._minx?t=e._minx-this._maxx:this._minx>e._maxx&&(t=this._minx-e._maxx);var n=0;return this._maxy<e._miny?n=e._miny-this._maxy:this._miny>e._maxy&&(n=this._miny-e._maxy),t===0?n:n===0?t:Math.sqrt(t*t+n*n)};dn.prototype.hashCode=function(){var e=17;return e=37*e+nt.hashCode(this._minx),e=37*e+nt.hashCode(this._maxx),e=37*e+nt.hashCode(this._miny),e=37*e+nt.hashCode(this._maxy),e};dn.prototype.interfaces_=function(){return[pl,ml]};dn.prototype.getClass=function(){return dn};dn.intersects=function(){if(arguments.length===3){var e=arguments[0],t=arguments[1],n=arguments[2];return n.x>=(e.x<t.x?e.x:t.x)&&n.x<=(e.x>t.x?e.x:t.x)&&n.y>=(e.y<t.y?e.y:t.y)&&n.y<=(e.y>t.y?e.y:t.y)}else if(arguments.length===4){var r=arguments[0],i=arguments[1],o=arguments[2],u=arguments[3],l=Math.min(o.x,u.x),p=Math.max(o.x,u.x),g=Math.min(r.x,i.x),x=Math.max(r.x,i.x);return!(g>p||x<l||(l=Math.min(o.y,u.y),p=Math.max(o.y,u.y),g=Math.min(r.y,i.y),x=Math.max(r.y,i.y),g>p)||x<l)}};v$.serialVersionUID.get=function(){return 5873921885273102e3};Object.defineProperties(dn,v$);var wu={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},jS=function(e){this.geometryFactory=e||new Wn};jS.prototype.read=function(e){var t,n,r;e=e.replace(/[\n\r]/g," ");var i=wu.typeStr.exec(e);if(e.search("EMPTY")!==-1&&(i=wu.emptyTypeStr.exec(e),i[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],Gy[n]&&(t=Gy[n].apply(this,[r]))),t===void 0)throw new Error("Could not parse WKT "+e);return t};jS.prototype.write=function(e){return this.extractGeometry(e)};jS.prototype.extractGeometry=function(e){var t=e.getGeometryType().toLowerCase();if(!Mh[t])return null;var n=t.toUpperCase(),r;return e.isEmpty()?r=n+" EMPTY":r=n+"("+Mh[t].apply(this,[e])+")",r};var Mh={coordinate:function(e){return e.x+" "+e.y},point:function(e){return Mh.coordinate.call(this,e._coordinates._coordinates[0])},multipoint:function(e){for(var t=this,n=[],r=0,i=e._geometries.length;r<i;++r)n.push("("+Mh.point.apply(t,[e._geometries[r]])+")");return n.join(",")},linestring:function(e){for(var t=this,n=[],r=0,i=e._points._coordinates.length;r<i;++r)n.push(Mh.coordinate.apply(t,[e._points._coordinates[r]]));return n.join(",")},linearring:function(e){for(var t=this,n=[],r=0,i=e._points._coordinates.length;r<i;++r)n.push(Mh.coordinate.apply(t,[e._points._coordinates[r]]));return n.join(",")},multilinestring:function(e){for(var t=this,n=[],r=0,i=e._geometries.length;r<i;++r)n.push("("+Mh.linestring.apply(t,[e._geometries[r]])+")");return n.join(",")},polygon:function(e){var t=this,n=[];n.push("("+Mh.linestring.apply(this,[e._shell])+")");for(var r=0,i=e._holes.length;r<i;++r)n.push("("+Mh.linestring.apply(t,[e._holes[r]])+")");return n.join(",")},multipolygon:function(e){for(var t=this,n=[],r=0,i=e._geometries.length;r<i;++r)n.push("("+Mh.polygon.apply(t,[e._geometries[r]])+")");return n.join(",")},geometrycollection:function(e){for(var t=this,n=[],r=0,i=e._geometries.length;r<i;++r)n.push(t.extractGeometry(e._geometries[r]));return n.join(",")}},Gy={point:function(e){if(e===void 0)return this.geometryFactory.createPoint();var t=e.trim().split(wu.spaces);return this.geometryFactory.createPoint(new nt(Number.parseFloat(t[0]),Number.parseFloat(t[1])))},multipoint:function(e){var t=this;if(e===void 0)return this.geometryFactory.createMultiPoint();for(var n,r=e.trim().split(","),i=[],o=0,u=r.length;o<u;++o)n=r[o].replace(wu.trimParens,"$1"),i.push(Gy.point.apply(t,[n]));return this.geometryFactory.createMultiPoint(i)},linestring:function(e){if(e===void 0)return this.geometryFactory.createLineString();for(var t=e.trim().split(","),n=[],r,i=0,o=t.length;i<o;++i)r=t[i].trim().split(wu.spaces),n.push(new nt(Number.parseFloat(r[0]),Number.parseFloat(r[1])));return this.geometryFactory.createLineString(n)},linearring:function(e){if(e===void 0)return this.geometryFactory.createLinearRing();for(var t=e.trim().split(","),n=[],r,i=0,o=t.length;i<o;++i)r=t[i].trim().split(wu.spaces),n.push(new nt(Number.parseFloat(r[0]),Number.parseFloat(r[1])));return this.geometryFactory.createLinearRing(n)},multilinestring:function(e){var t=this;if(e===void 0)return this.geometryFactory.createMultiLineString();for(var n,r=e.trim().split(wu.parenComma),i=[],o=0,u=r.length;o<u;++o)n=r[o].replace(wu.trimParens,"$1"),i.push(Gy.linestring.apply(t,[n]));return this.geometryFactory.createMultiLineString(i)},polygon:function(e){var t=this;if(e===void 0)return this.geometryFactory.createPolygon();for(var n,r,i,o=e.trim().split(wu.parenComma),u,l=[],p=0,g=o.length;p<g;++p)n=o[p].replace(wu.trimParens,"$1"),r=Gy.linestring.apply(t,[n]),i=t.geometryFactory.createLinearRing(r._points),p===0?u=i:l.push(i);return this.geometryFactory.createPolygon(u,l)},multipolygon:function(e){var t=this;if(e===void 0)return this.geometryFactory.createMultiPolygon();for(var n,r=e.trim().split(wu.doubleParenComma),i=[],o=0,u=r.length;o<u;++o)n=r[o].replace(wu.trimParens,"$1"),i.push(Gy.polygon.apply(t,[n]));return this.geometryFactory.createMultiPolygon(i)},geometrycollection:function(e){var t=this;if(e===void 0)return this.geometryFactory.createGeometryCollection();e=e.replace(/,\s*([A-Za-z])/g,"|$1");for(var n=e.trim().split("|"),r=[],i=0,o=n.length;i<o;++i)r.push(t.read(n[i]));return this.geometryFactory.createGeometryCollection(r)}},Gl=function(e){this.parser=new jS(e)};Gl.prototype.write=function(e){return this.parser.write(e)};Gl.toLineString=function(e,t){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+e.x+" "+e.y+", "+t.x+" "+t.y+" )"};var Yh=function(e){function t(n){e.call(this,n),this.name="RuntimeException",this.message=n,this.stack=new e().stack}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),cE=function(e){function t(){if(e.call(this),arguments.length===0)e.call(this);else if(arguments.length===1){var n=arguments[0];e.call(this,n)}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Yh),Dn=function(){};Dn.prototype.interfaces_=function(){return[]};Dn.prototype.getClass=function(){return Dn};Dn.shouldNeverReachHere=function(){if(arguments.length===0)Dn.shouldNeverReachHere(null);else if(arguments.length===1){var e=arguments[0];throw new cE("Should never reach here"+(e!==null?": "+e:""))}};Dn.isTrue=function(){var e,t;if(arguments.length===1)e=arguments[0],Dn.isTrue(e,null);else if(arguments.length===2&&(e=arguments[0],t=arguments[1],!e))throw t===null?new cE:new cE(t)};Dn.equals=function(){var e,t,n;if(arguments.length===2)e=arguments[0],t=arguments[1],Dn.equals(e,t,null);else if(arguments.length===3&&(e=arguments[0],t=arguments[1],n=arguments[2],!t.equals(e)))throw new cE("Expected "+e+" but encountered "+t+(n!==null?": "+n:""))};var ui=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new nt,this._intPt[1]=new nt,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},Gg={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};ui.prototype.getIndexAlongSegment=function(e,t){return this.computeIntLineIndex(),this._intLineIndex[e][t]};ui.prototype.getTopologySummary=function(){var e=new tc;return this.isEndPoint()&&e.append(" endpoint"),this._isProper&&e.append(" proper"),this.isCollinear()&&e.append(" collinear"),e.toString()};ui.prototype.computeIntersection=function(e,t,n,r){this._inputLines[0][0]=e,this._inputLines[0][1]=t,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(e,t,n,r)};ui.prototype.getIntersectionNum=function(){return this._result};ui.prototype.computeIntLineIndex=function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var e=arguments[0],t=this.getEdgeDistance(e,0),n=this.getEdgeDistance(e,1);t>n?(this._intLineIndex[e][0]=0,this._intLineIndex[e][1]=1):(this._intLineIndex[e][0]=1,this._intLineIndex[e][1]=0)}};ui.prototype.isProper=function(){return this.hasIntersection()&&this._isProper};ui.prototype.setPrecisionModel=function(e){this._precisionModel=e};ui.prototype.isInteriorIntersection=function(){var e=this;if(arguments.length===0)return!!(this.isInteriorIntersection(0)||this.isInteriorIntersection(1));if(arguments.length===1){for(var t=arguments[0],n=0;n<this._result;n++)if(!(e._intPt[n].equals2D(e._inputLines[t][0])||e._intPt[n].equals2D(e._inputLines[t][1])))return!0;return!1}};ui.prototype.getIntersection=function(e){return this._intPt[e]};ui.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper};ui.prototype.hasIntersection=function(){return this._result!==ui.NO_INTERSECTION};ui.prototype.getEdgeDistance=function(e,t){var n=ui.computeEdgeDistance(this._intPt[t],this._inputLines[e][0],this._inputLines[e][1]);return n};ui.prototype.isCollinear=function(){return this._result===ui.COLLINEAR_INTERSECTION};ui.prototype.toString=function(){return Gl.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Gl.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()};ui.prototype.getEndpoint=function(e,t){return this._inputLines[e][t]};ui.prototype.isIntersection=function(e){for(var t=this,n=0;n<this._result;n++)if(t._intPt[n].equals2D(e))return!0;return!1};ui.prototype.getIntersectionAlongSegment=function(e,t){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[e][t]]};ui.prototype.interfaces_=function(){return[]};ui.prototype.getClass=function(){return ui};ui.computeEdgeDistance=function(e,t,n){var r=Math.abs(n.x-t.x),i=Math.abs(n.y-t.y),o=-1;if(e.equals(t))o=0;else if(e.equals(n))r>i?o=r:o=i;else{var u=Math.abs(e.x-t.x),l=Math.abs(e.y-t.y);r>i?o=u:o=l,o===0&&!e.equals(t)&&(o=Math.max(u,l))}return Dn.isTrue(!(o===0&&!e.equals(t)),"Bad distance calculation"),o};ui.nonRobustComputeEdgeDistance=function(e,t,n){var r=e.x-t.x,i=e.y-t.y,o=Math.sqrt(r*r+i*i);return Dn.isTrue(!(o===0&&!e.equals(t)),"Invalid distance calculation"),o};Gg.DONT_INTERSECT.get=function(){return 0};Gg.DO_INTERSECT.get=function(){return 1};Gg.COLLINEAR.get=function(){return 2};Gg.NO_INTERSECTION.get=function(){return 0};Gg.POINT_INTERSECTION.get=function(){return 1};Gg.COLLINEAR_INTERSECTION.get=function(){return 2};Object.defineProperties(ui,Gg);var am=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isInSegmentEnvelopes=function(n){var r=new dn(this._inputLines[0][0],this._inputLines[0][1]),i=new dn(this._inputLines[1][0],this._inputLines[1][1]);return r.contains(n)&&i.contains(n)},t.prototype.computeIntersection=function(){if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2];if(this._isProper=!1,dn.intersects(r,i,n)&&Yt.orientationIndex(r,i,n)===0&&Yt.orientationIndex(i,r,n)===0)return this._isProper=!0,(n.equals(r)||n.equals(i))&&(this._isProper=!1),this._result=e.POINT_INTERSECTION,null;this._result=e.NO_INTERSECTION}else return e.prototype.computeIntersection.apply(this,arguments)},t.prototype.normalizeToMinimum=function(n,r,i,o,u){u.x=this.smallestInAbsValue(n.x,r.x,i.x,o.x),u.y=this.smallestInAbsValue(n.y,r.y,i.y,o.y),n.x-=u.x,n.y-=u.y,r.x-=u.x,r.y-=u.y,i.x-=u.x,i.y-=u.y,o.x-=u.x,o.y-=u.y},t.prototype.safeHCoordinateIntersection=function(n,r,i,o){var u=null;try{u=jl.intersection(n,r,i,o)}catch(l){if(l instanceof lv)u=t.nearestEndpoint(n,r,i,o);else throw l}finally{}return u},t.prototype.intersection=function(n,r,i,o){var u=this.intersectionWithNormalization(n,r,i,o);return this.isInSegmentEnvelopes(u)||(u=new nt(t.nearestEndpoint(n,r,i,o))),this._precisionModel!==null&&this._precisionModel.makePrecise(u),u},t.prototype.smallestInAbsValue=function(n,r,i,o){var u=n,l=Math.abs(u);return Math.abs(r)<l&&(u=r,l=Math.abs(r)),Math.abs(i)<l&&(u=i,l=Math.abs(i)),Math.abs(o)<l&&(u=o),u},t.prototype.checkDD=function(n,r,i,o,u){var l=zs.intersection(n,r,i,o),p=this.isInSegmentEnvelopes(l);Mo.out.println("DD in env = "+p+"  --------------------- "+l),u.distance(l)>1e-4&&Mo.out.println("Distance = "+u.distance(l))},t.prototype.intersectionWithNormalization=function(n,r,i,o){var u=new nt(n),l=new nt(r),p=new nt(i),g=new nt(o),x=new nt;this.normalizeToEnvCentre(u,l,p,g,x);var y=this.safeHCoordinateIntersection(u,l,p,g);return y.x+=x.x,y.y+=x.y,y},t.prototype.computeCollinearIntersection=function(n,r,i,o){var u=dn.intersects(n,r,i),l=dn.intersects(n,r,o),p=dn.intersects(i,o,n),g=dn.intersects(i,o,r);return u&&l?(this._intPt[0]=i,this._intPt[1]=o,e.COLLINEAR_INTERSECTION):p&&g?(this._intPt[0]=n,this._intPt[1]=r,e.COLLINEAR_INTERSECTION):u&&p?(this._intPt[0]=i,this._intPt[1]=n,i.equals(n)&&!l&&!g?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):u&&g?(this._intPt[0]=i,this._intPt[1]=r,i.equals(r)&&!l&&!p?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):l&&p?(this._intPt[0]=o,this._intPt[1]=n,o.equals(n)&&!u&&!g?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):l&&g?(this._intPt[0]=o,this._intPt[1]=r,o.equals(r)&&!u&&!p?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):e.NO_INTERSECTION},t.prototype.normalizeToEnvCentre=function(n,r,i,o,u){var l=n.x<r.x?n.x:r.x,p=n.y<r.y?n.y:r.y,g=n.x>r.x?n.x:r.x,x=n.y>r.y?n.y:r.y,y=i.x<o.x?i.x:o.x,_=i.y<o.y?i.y:o.y,T=i.x>o.x?i.x:o.x,A=i.y>o.y?i.y:o.y,O=l>y?l:y,N=g<T?g:T,k=p>_?p:_,R=x<A?x:A,z=(O+N)/2,D=(k+R)/2;u.x=z,u.y=D,n.x-=u.x,n.y-=u.y,r.x-=u.x,r.y-=u.y,i.x-=u.x,i.y-=u.y,o.x-=u.x,o.y-=u.y},t.prototype.computeIntersect=function(n,r,i,o){if(this._isProper=!1,!dn.intersects(n,r,i,o))return e.NO_INTERSECTION;var u=Yt.orientationIndex(n,r,i),l=Yt.orientationIndex(n,r,o);if(u>0&&l>0||u<0&&l<0)return e.NO_INTERSECTION;var p=Yt.orientationIndex(i,o,n),g=Yt.orientationIndex(i,o,r);if(p>0&&g>0||p<0&&g<0)return e.NO_INTERSECTION;var x=u===0&&l===0&&p===0&&g===0;return x?this.computeCollinearIntersection(n,r,i,o):(u===0||l===0||p===0||g===0?(this._isProper=!1,n.equals2D(i)||n.equals2D(o)?this._intPt[0]=n:r.equals2D(i)||r.equals2D(o)?this._intPt[0]=r:u===0?this._intPt[0]=new nt(i):l===0?this._intPt[0]=new nt(o):p===0?this._intPt[0]=new nt(n):g===0&&(this._intPt[0]=new nt(r))):(this._isProper=!0,this._intPt[0]=this.intersection(n,r,i,o)),e.POINT_INTERSECTION)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.nearestEndpoint=function(n,r,i,o){var u=n,l=Yt.distancePointLine(n,i,o),p=Yt.distancePointLine(r,i,o);return p<l&&(l=p,u=r),p=Yt.distancePointLine(i,n,r),p<l&&(l=p,u=i),p=Yt.distancePointLine(o,n,r),p<l&&(l=p,u=o),u},t}(ui),Sg=function(){};Sg.prototype.interfaces_=function(){return[]};Sg.prototype.getClass=function(){return Sg};Sg.orientationIndex=function(e,t,n){var r=t.x-e.x,i=t.y-e.y,o=n.x-t.x,u=n.y-t.y;return Sg.signOfDet2x2(r,i,o,u)};Sg.signOfDet2x2=function(e,t,n,r){var i=null,o=null,u=null;if(i=1,e===0||r===0)return t===0||n===0?0:t>0?n>0?-i:i:n>0?i:-i;if(t===0||n===0)return r>0?e>0?i:-i:e>0?-i:i;if(t>0?r>0?t<=r||(i=-i,o=e,e=n,n=o,o=t,t=r,r=o):t<=-r?(i=-i,n=-n,r=-r):(o=e,e=-n,n=o,o=t,t=-r,r=o):r>0?-t<=r?(i=-i,e=-e,t=-t):(o=-e,e=n,n=o,o=-t,t=r,r=o):t>=r?(e=-e,t=-t,n=-n,r=-r):(i=-i,o=-e,e=-n,n=o,o=-t,t=-r,r=o),e>0)if(n>0){if(!(e<=n))return i}else return i;else{if(n>0)return-i;if(e>=n)i=-i,e=-e,n=-n;else return-i}for(;;){if(u=Math.floor(n/e),n=n-u*e,r=r-u*t,r<0)return-i;if(r>t)return i;if(e>n+n){if(t<r+r)return i}else{if(t>r+r)return-i;n=e-n,r=t-r,i=-i}if(r===0)return n===0?0:-i;if(n===0||(u=Math.floor(e/n),e=e-u*n,t=t-u*r,t<0))return i;if(t>r)return-i;if(n>e+e){if(r<t+t)return-i}else{if(r>t+t)return i;e=n-e,t=r-t,i=-i}if(t===0)return e===0?0:i;if(e===0)return-i}};var Bu=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var e=arguments[0];this._p=e};Bu.prototype.countSegment=function(e,t){if(e.x<this._p.x&&t.x<this._p.x)return null;if(this._p.x===t.x&&this._p.y===t.y)return this._isPointOnSegment=!0,null;if(e.y===this._p.y&&t.y===this._p.y){var n=e.x,r=t.x;return n>r&&(n=t.x,r=e.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(e.y>this._p.y&&t.y<=this._p.y||t.y>this._p.y&&e.y<=this._p.y){var i=e.x-this._p.x,o=e.y-this._p.y,u=t.x-this._p.x,l=t.y-this._p.y,p=Sg.signOfDet2x2(i,o,u,l);if(p===0)return this._isPointOnSegment=!0,null;l<o&&(p=-p),p>0&&this._crossingCount++}};Bu.prototype.isPointInPolygon=function(){return this.getLocation()!==st.EXTERIOR};Bu.prototype.getLocation=function(){return this._isPointOnSegment?st.BOUNDARY:this._crossingCount%2===1?st.INTERIOR:st.EXTERIOR};Bu.prototype.isOnSegment=function(){return this._isPointOnSegment};Bu.prototype.interfaces_=function(){return[]};Bu.prototype.getClass=function(){return Bu};Bu.locatePointInRing=function(){if(arguments[0]instanceof nt&&Sn(arguments[1],rr)){for(var e=arguments[0],t=arguments[1],n=new Bu(e),r=new nt,i=new nt,o=1;o<t.size();o++)if(t.getCoordinate(o,r),t.getCoordinate(o-1,i),n.countSegment(r,i),n.isOnSegment())return n.getLocation();return n.getLocation()}else if(arguments[0]instanceof nt&&arguments[1]instanceof Array){for(var u=arguments[0],l=arguments[1],p=new Bu(u),g=1;g<l.length;g++){var x=l[g],y=l[g-1];if(p.countSegment(x,y),p.isOnSegment())return p.getLocation()}return p.getLocation()}};var Yt=function(){},Hg={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};Yt.prototype.interfaces_=function(){return[]};Yt.prototype.getClass=function(){return Yt};Yt.orientationIndex=function(e,t,n){return zs.orientationIndex(e,t,n)};Yt.signedArea=function(){if(arguments[0]instanceof Array){var e=arguments[0];if(e.length<3)return 0;for(var t=0,n=e[0].x,r=1;r<e.length-1;r++){var i=e[r].x-n,o=e[r+1].y,u=e[r-1].y;t+=i*(u-o)}return t/2}else if(Sn(arguments[0],rr)){var l=arguments[0],p=l.size();if(p<3)return 0;var g=new nt,x=new nt,y=new nt;l.getCoordinate(0,x),l.getCoordinate(1,y);var _=x.x;y.x-=_;for(var T=0,A=1;A<p-1;A++)g.y=x.y,x.x=y.x,x.y=y.y,l.getCoordinate(A+1,y),y.x-=_,T+=x.x*(g.y-y.y);return T/2}};Yt.distanceLineLine=function(e,t,n,r){if(e.equals(t))return Yt.distancePointLine(e,n,r);if(n.equals(r))return Yt.distancePointLine(r,e,t);var i=!1;if(!dn.intersects(e,t,n,r))i=!0;else{var o=(t.x-e.x)*(r.y-n.y)-(t.y-e.y)*(r.x-n.x);if(o===0)i=!0;else{var u=(e.y-n.y)*(r.x-n.x)-(e.x-n.x)*(r.y-n.y),l=(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y),p=l/o,g=u/o;(g<0||g>1||p<0||p>1)&&(i=!0)}}return i?Ra.min(Yt.distancePointLine(e,n,r),Yt.distancePointLine(t,n,r),Yt.distancePointLine(n,e,t),Yt.distancePointLine(r,e,t)):0};Yt.isPointInRing=function(e,t){return Yt.locatePointInRing(e,t)!==st.EXTERIOR};Yt.computeLength=function(e){var t=e.size();if(t<=1)return 0;var n=0,r=new nt;e.getCoordinate(0,r);for(var i=r.x,o=r.y,u=1;u<t;u++){e.getCoordinate(u,r);var l=r.x,p=r.y,g=l-i,x=p-o;n+=Math.sqrt(g*g+x*x),i=l,o=p}return n};Yt.isCCW=function(e){var t=e.length-1;if(t<3)throw new ri("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=e[0],r=0,i=1;i<=t;i++){var o=e[i];o.y>n.y&&(n=o,r=i)}var u=r;do u=u-1,u<0&&(u=t);while(e[u].equals2D(n)&&u!==r);var l=r;do l=(l+1)%t;while(e[l].equals2D(n)&&l!==r);var p=e[u],g=e[l];if(p.equals2D(n)||g.equals2D(n)||p.equals2D(g))return!1;var x=Yt.computeOrientation(p,n,g),y=!1;return x===0?y=p.x>g.x:y=x>0,y};Yt.locatePointInRing=function(e,t){return Bu.locatePointInRing(e,t)};Yt.distancePointLinePerpendicular=function(e,t,n){var r=(n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y),i=((t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y))/r;return Math.abs(i)*Math.sqrt(r)};Yt.computeOrientation=function(e,t,n){return Yt.orientationIndex(e,t,n)};Yt.distancePointLine=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];if(t.length===0)throw new ri("Line array must contain at least one vertex");for(var n=e.distance(t[0]),r=0;r<t.length-1;r++){var i=Yt.distancePointLine(e,t[r],t[r+1]);i<n&&(n=i)}return n}else if(arguments.length===3){var o=arguments[0],u=arguments[1],l=arguments[2];if(u.x===l.x&&u.y===l.y)return o.distance(u);var p=(l.x-u.x)*(l.x-u.x)+(l.y-u.y)*(l.y-u.y),g=((o.x-u.x)*(l.x-u.x)+(o.y-u.y)*(l.y-u.y))/p;if(g<=0)return o.distance(u);if(g>=1)return o.distance(l);var x=((u.y-o.y)*(l.x-u.x)-(u.x-o.x)*(l.y-u.y))/p;return Math.abs(x)*Math.sqrt(p)}};Yt.isOnLine=function(e,t){for(var n=new am,r=1;r<t.length;r++){var i=t[r-1],o=t[r];if(n.computeIntersection(e,i,o),n.hasIntersection())return!0}return!1};Hg.CLOCKWISE.get=function(){return-1};Hg.RIGHT.get=function(){return Yt.CLOCKWISE};Hg.COUNTERCLOCKWISE.get=function(){return 1};Hg.LEFT.get=function(){return Yt.COUNTERCLOCKWISE};Hg.COLLINEAR.get=function(){return 0};Hg.STRAIGHT.get=function(){return Yt.COLLINEAR};Object.defineProperties(Yt,Hg);var Jh=function(){};Jh.prototype.filter=function(e){};Jh.prototype.interfaces_=function(){return[]};Jh.prototype.getClass=function(){return Jh};var bn=function(){var e=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=e,this._SRID=e.getSRID()},Qc={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};bn.prototype.isGeometryCollection=function(){return this.getSortIndex()===bn.SORTINDEX_GEOMETRYCOLLECTION};bn.prototype.getFactory=function(){return this._factory};bn.prototype.getGeometryN=function(e){return this};bn.prototype.getArea=function(){return 0};bn.prototype.isRectangle=function(){return!1};bn.prototype.equals=function(){if(arguments[0]instanceof bn){var e=arguments[0];return e===null?!1:this.equalsTopo(e)}else if(arguments[0]instanceof Object){var t=arguments[0];if(!(t instanceof bn))return!1;var n=t;return this.equalsExact(n)}};bn.prototype.equalsExact=function(e){return this===e||this.equalsExact(e,0)};bn.prototype.geometryChanged=function(){this.apply(bn.geometryChangedFilter)};bn.prototype.geometryChangedAction=function(){this._envelope=null};bn.prototype.equalsNorm=function(e){return e===null?!1:this.norm().equalsExact(e.norm())};bn.prototype.getLength=function(){return 0};bn.prototype.getNumGeometries=function(){return 1};bn.prototype.compareTo=function(){if(arguments.length===1){var e=arguments[0],t=e;return this.getSortIndex()!==t.getSortIndex()?this.getSortIndex()-t.getSortIndex():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}};bn.prototype.getUserData=function(){return this._userData};bn.prototype.getSRID=function(){return this._SRID};bn.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())};bn.prototype.checkNotGeometryCollection=function(e){if(e.getSortIndex()===bn.SORTINDEX_GEOMETRYCOLLECTION)throw new ri("This method does not support GeometryCollection arguments")};bn.prototype.equal=function(e,t,n){return n===0?e.equals(t):e.distance(t)<=n};bn.prototype.norm=function(){var e=this.copy();return e.normalize(),e};bn.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()};bn.prototype.getEnvelopeInternal=function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new dn(this._envelope)};bn.prototype.setSRID=function(e){this._SRID=e};bn.prototype.setUserData=function(e){this._userData=e};bn.prototype.compare=function(e,t){for(var n=e.iterator(),r=t.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),u=i.compareTo(o);if(u!==0)return u}return n.hasNext()?1:r.hasNext()?-1:0};bn.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()};bn.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===bn.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===bn.SORTINDEX_MULTIPOINT||this.getSortIndex()===bn.SORTINDEX_MULTILINESTRING||this.getSortIndex()===bn.SORTINDEX_MULTIPOLYGON};bn.prototype.interfaces_=function(){return[BS,pl,ml]};bn.prototype.getClass=function(){return bn};bn.hasNonEmptyElements=function(e){for(var t=0;t<e.length;t++)if(!e[t].isEmpty())return!0;return!1};bn.hasNullElements=function(e){for(var t=0;t<e.length;t++)if(e[t]===null)return!0;return!1};Qc.serialVersionUID.get=function(){return 8763622679187377e3};Qc.SORTINDEX_POINT.get=function(){return 0};Qc.SORTINDEX_MULTIPOINT.get=function(){return 1};Qc.SORTINDEX_LINESTRING.get=function(){return 2};Qc.SORTINDEX_LINEARRING.get=function(){return 3};Qc.SORTINDEX_MULTILINESTRING.get=function(){return 4};Qc.SORTINDEX_POLYGON.get=function(){return 5};Qc.SORTINDEX_MULTIPOLYGON.get=function(){return 6};Qc.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7};Qc.geometryChangedFilter.get=function(){return tO};Object.defineProperties(bn,Qc);var tO=function(){};tO.interfaces_=function(){return[Jh]};tO.filter=function(e){e.geometryChangedAction()};var Uc=function(){};Uc.prototype.filter=function(e){};Uc.prototype.interfaces_=function(){return[]};Uc.prototype.getClass=function(){return Uc};var hl=function(){},lf={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};hl.prototype.isInBoundary=function(e){};hl.prototype.interfaces_=function(){return[]};hl.prototype.getClass=function(){return hl};lf.Mod2BoundaryNodeRule.get=function(){return R_};lf.EndPointBoundaryNodeRule.get=function(){return M_};lf.MultiValentEndPointBoundaryNodeRule.get=function(){return N_};lf.MonoValentEndPointBoundaryNodeRule.get=function(){return D_};lf.MOD2_BOUNDARY_RULE.get=function(){return new R_};lf.ENDPOINT_BOUNDARY_RULE.get=function(){return new M_};lf.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new N_};lf.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new D_};lf.OGC_SFS_BOUNDARY_RULE.get=function(){return hl.MOD2_BOUNDARY_RULE};Object.defineProperties(hl,lf);var R_=function(){};R_.prototype.isInBoundary=function(e){return e%2===1};R_.prototype.interfaces_=function(){return[hl]};R_.prototype.getClass=function(){return R_};var M_=function(){};M_.prototype.isInBoundary=function(e){return e>0};M_.prototype.interfaces_=function(){return[hl]};M_.prototype.getClass=function(){return M_};var N_=function(){};N_.prototype.isInBoundary=function(e){return e>1};N_.prototype.interfaces_=function(){return[hl]};N_.prototype.getClass=function(){return N_};var D_=function(){};D_.prototype.isInBoundary=function(e){return e===1};D_.prototype.interfaces_=function(){return[hl]};D_.prototype.getClass=function(){return D_};var Vi=function(){};Vi.prototype.add=function(){};Vi.prototype.addAll=function(){};Vi.prototype.isEmpty=function(){};Vi.prototype.iterator=function(){};Vi.prototype.size=function(){};Vi.prototype.toArray=function(){};Vi.prototype.remove=function(){};function nO(e){this.message=e||""}nO.prototype=new Error;nO.prototype.name="IndexOutOfBoundsException";var uv=function(){};uv.prototype.hasNext=function(){};uv.prototype.next=function(){};uv.prototype.remove=function(){};var $l=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(){},t.prototype.set=function(){},t.prototype.isEmpty=function(){},t}(Vi);function cv(e){this.message=e||""}cv.prototype=new Error;cv.prototype.name="NoSuchElementException";var qt=function(e){function t(){e.call(this),this.array_=[],arguments[0]instanceof Vi&&this.addAll(arguments[0])}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.ensureCapacity=function(){},t.prototype.interfaces_=function(){return[e,Vi]},t.prototype.add=function(n){return arguments.length===1?this.array_.push(n):this.array_.splice(arguments[0],arguments[1]),!0},t.prototype.clear=function(){this.array_=[]},t.prototype.addAll=function(n){for(var r=this,i=n.iterator();i.hasNext();)r.add(i.next());return!0},t.prototype.set=function(n,r){var i=this.array_[n];return this.array_[n]=r,i},t.prototype.iterator=function(){return new tle(this)},t.prototype.get=function(n){if(n<0||n>=this.size())throw new nO;return this.array_[n]},t.prototype.isEmpty=function(){return this.array_.length===0},t.prototype.size=function(){return this.array_.length},t.prototype.toArray=function(){for(var n=this,r=[],i=0,o=this.array_.length;i<o;i++)r.push(n.array_[i]);return r},t.prototype.remove=function(n){for(var r=this,i=!1,o=0,u=this.array_.length;o<u;o++)if(r.array_[o]===n){r.array_.splice(o,1),i=!0;break}return i},t}($l),tle=function(e){function t(n){e.call(this),this.arrayList_=n,this.position_=0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new cv;return this.arrayList_.get(this.position_++)},t.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},t.prototype.set=function(n){return this.arrayList_.set(this.position_-1,n)},t.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},t}(uv),Tx=function(e){function t(){if(e.call(this),arguments.length!==0){if(arguments.length===1){var r=arguments[0];this.ensureCapacity(r.length),this.add(r,!0)}else if(arguments.length===2){var i=arguments[0],o=arguments[1];this.ensureCapacity(i.length),this.add(i,o)}}}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},t.prototype.getCoordinate=function(r){return this.get(r)},t.prototype.addAll=function(){var r=this;if(arguments.length===2){for(var i=arguments[0],o=arguments[1],u=!1,l=i.iterator();l.hasNext();)r.add(l.next(),o),u=!0;return u}else return e.prototype.addAll.apply(this,arguments)},t.prototype.clone=function(){for(var r=this,i=e.prototype.clone.call(this),o=0;o<this.size();o++)i.add(o,r.get(o).copy());return i},t.prototype.toCoordinateArray=function(){return this.toArray(t.coordArrayType)},t.prototype.add=function(){var r=this;if(arguments.length===1){var i=arguments[0];e.prototype.add.call(this,i)}else if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var o=arguments[0],u=arguments[1];return this.add(o,u,!0),!0}else if(arguments[0]instanceof nt&&typeof arguments[1]=="boolean"){var l=arguments[0],p=arguments[1];if(!p&&this.size()>=1){var g=this.get(this.size()-1);if(g.equals2D(l))return null}e.prototype.add.call(this,l)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var x=arguments[0],y=arguments[1];return this.add(x,y),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var _=arguments[0],T=arguments[1],A=arguments[2];if(A)for(var O=0;O<_.length;O++)r.add(_[O],T);else for(var N=_.length-1;N>=0;N--)r.add(_[N],T);return!0}else if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof nt){var k=arguments[0],R=arguments[1],z=arguments[2];if(!z){var D=this.size();if(D>0){if(k>0){var U=this.get(k-1);if(U.equals2D(R))return null}if(k<D){var q=this.get(k);if(q.equals2D(R))return null}}}e.prototype.add.call(this,k,R)}}else if(arguments.length===4){var G=arguments[0],H=arguments[1],J=arguments[2],Y=arguments[3],X=1;J>Y&&(X=-1);for(var ee=J;ee!==Y;ee+=X)r.add(G[ee],H);return!0}},t.prototype.closeRing=function(){this.size()>0&&this.add(new nt(this.get(0)),!1)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},Object.defineProperties(t,n),t}(qt),Kn=function(){},$S={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};$S.ForwardComparator.get=function(){return O1};$S.BidirectionalComparator.get=function(){return z_};$S.coordArrayType.get=function(){return new Array(0).fill(null)};Kn.prototype.interfaces_=function(){return[]};Kn.prototype.getClass=function(){return Kn};Kn.isRing=function(e){return!(e.length<4||!e[0].equals2D(e[e.length-1]))};Kn.ptNotInList=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(Kn.indexOf(r,t)<0)return r}return null};Kn.scroll=function(e,t){var n=Kn.indexOf(t,e);if(n<0)return null;var r=new Array(e.length).fill(null);Mo.arraycopy(e,n,r,0,e.length-n),Mo.arraycopy(e,0,r,e.length-n,n),Mo.arraycopy(r,0,e,0,e.length)};Kn.equals=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];if(e===t)return!0;if(e===null||t===null||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].equals(t[n]))return!1;return!0}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(r===null||i===null||r.length!==i.length)return!1;for(var u=0;u<r.length;u++)if(o.compare(r[u],i[u])!==0)return!1;return!0}};Kn.intersection=function(e,t){for(var n=new Tx,r=0;r<e.length;r++)t.intersects(e[r])&&n.add(e[r],!0);return n.toCoordinateArray()};Kn.hasRepeatedPoints=function(e){for(var t=1;t<e.length;t++)if(e[t-1].equals(e[t]))return!0;return!1};Kn.removeRepeatedPoints=function(e){if(!Kn.hasRepeatedPoints(e))return e;var t=new Tx(e,!1);return t.toCoordinateArray()};Kn.reverse=function(e){for(var t=e.length-1,n=Math.trunc(t/2),r=0;r<=n;r++){var i=e[r];e[r]=e[t-r],e[t-r]=i}};Kn.removeNull=function(e){for(var t=0,n=0;n<e.length;n++)e[n]!==null&&t++;var r=new Array(t).fill(null);if(t===0)return r;for(var i=0,o=0;o<e.length;o++)e[o]!==null&&(r[i++]=e[o]);return r};Kn.copyDeep=function(){if(arguments.length===1){for(var e=arguments[0],t=new Array(e.length).fill(null),n=0;n<e.length;n++)t[n]=new nt(e[n]);return t}else if(arguments.length===5)for(var r=arguments[0],i=arguments[1],o=arguments[2],u=arguments[3],l=arguments[4],p=0;p<l;p++)o[u+p]=new nt(r[i+p])};Kn.isEqualReversed=function(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=t[e.length-n-1];if(r.compareTo(i)!==0)return!1}return!0};Kn.envelope=function(e){for(var t=new dn,n=0;n<e.length;n++)t.expandToInclude(e[n]);return t};Kn.toCoordinateArray=function(e){return e.toArray(Kn.coordArrayType)};Kn.atLeastNCoordinatesOrNothing=function(e,t){return t.length>=e?t:[]};Kn.indexOf=function(e,t){for(var n=0;n<t.length;n++)if(e.equals(t[n]))return n;return-1};Kn.increasingDirection=function(e){for(var t=0;t<Math.trunc(e.length/2);t++){var n=e.length-1-t,r=e[t].compareTo(e[n]);if(r!==0)return r}return 1};Kn.compare=function(e,t){for(var n=0;n<e.length&&n<t.length;){var r=e[n].compareTo(t[n]);if(r!==0)return r;n++}return n<t.length?-1:n<e.length?1:0};Kn.minCoordinate=function(e){for(var t=null,n=0;n<e.length;n++)(t===null||t.compareTo(e[n])>0)&&(t=e[n]);return t};Kn.extract=function(e,t,n){t=Ra.clamp(t,0,e.length),n=Ra.clamp(n,-1,e.length);var r=n-t+1;n<0&&(r=0),t>=e.length&&(r=0),n<t&&(r=0);var i=new Array(r).fill(null);if(r===0)return i;for(var o=0,u=t;u<=n;u++)i[o++]=e[u];return i};Object.defineProperties(Kn,$S);var O1=function(){};O1.prototype.compare=function(e,t){var n=e,r=t;return Kn.compare(n,r)};O1.prototype.interfaces_=function(){return[O_]};O1.prototype.getClass=function(){return O1};var z_=function(){};z_.prototype.compare=function(e,t){var n=e,r=t;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(n.length===0)return 0;var i=Kn.compare(n,r),o=Kn.isEqualReversed(n,r);return o?0:i};z_.prototype.OLDcompare=function(e,t){var n=e,r=t;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(n.length===0)return 0;for(var i=Kn.increasingDirection(n),o=Kn.increasingDirection(r),u=i>0?0:n.length-1,l=o>0?0:n.length-1,p=0;p<n.length;p++){var g=n[u].compareTo(r[l]);if(g!==0)return g;u+=i,l+=o}return 0};z_.prototype.interfaces_=function(){return[O_]};z_.prototype.getClass=function(){return z_};var Zg=function(){};Zg.prototype.get=function(){};Zg.prototype.put=function(){};Zg.prototype.size=function(){};Zg.prototype.values=function(){};Zg.prototype.entrySet=function(){};var nle=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Zg);function Cx(e){this.message=e||""}Cx.prototype=new Error;Cx.prototype.name="OperationNotSupported";function US(){}US.prototype=new Vi;US.prototype.contains=function(){};var rO=function(e){function t(){e.call(this),this.array_=[],arguments[0]instanceof Vi&&this.addAll(arguments[0])}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.contains=function(n){for(var r=this,i=0,o=this.array_.length;i<o;i++){var u=r.array_[i];if(u===n)return!0}return!1},t.prototype.add=function(n){return this.contains(n)?!1:(this.array_.push(n),!0)},t.prototype.addAll=function(n){for(var r=this,i=n.iterator();i.hasNext();)r.add(i.next());return!0},t.prototype.remove=function(n){throw new Error},t.prototype.size=function(){return this.array_.length},t.prototype.isEmpty=function(){return this.array_.length===0},t.prototype.toArray=function(){for(var n=this,r=[],i=0,o=this.array_.length;i<o;i++)r.push(n.array_[i]);return r},t.prototype.iterator=function(){return new rle(this)},t}(US),rle=function(e){function t(n){e.call(this),this.hashSet_=n,this.position_=0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new cv;return this.hashSet_.array_[this.position_++]},t.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},t.prototype.remove=function(){throw new Cx},t}(uv),Fh=0,ep=1;function L3(e){return e===null?Fh:e.color}function zr(e){return e===null?null:e.parent}function Ah(e,t){e!==null&&(e.color=t)}function Q2(e){return e===null?null:e.left}function A3(e){return e===null?null:e.right}function Vo(){this.root_=null,this.size_=0}Vo.prototype=new nle;Vo.prototype.get=function(e){for(var t=this.root_;t!==null;){var n=e.compareTo(t.key);if(n<0)t=t.left;else if(n>0)t=t.right;else return t.value}return null};Vo.prototype.put=function(e,t){if(this.root_===null)return this.root_={key:e,value:t,left:null,right:null,parent:null,color:Fh,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n=this.root_,r,i;do if(r=n,i=e.compareTo(n.key),i<0)n=n.left;else if(i>0)n=n.right;else{var o=n.value;return n.value=t,o}while(n!==null);var u={key:e,left:null,right:null,value:t,parent:r,color:Fh,getValue:function(){return this.value},getKey:function(){return this.key}};return i<0?r.left=u:r.right=u,this.fixAfterInsertion(u),this.size_++,null};Vo.prototype.fixAfterInsertion=function(e){var t=this;for(e.color=ep;e!=null&&e!==this.root_&&e.parent.color===ep;)if(zr(e)===Q2(zr(zr(e)))){var n=A3(zr(zr(e)));L3(n)===ep?(Ah(zr(e),Fh),Ah(n,Fh),Ah(zr(zr(e)),ep),e=zr(zr(e))):(e===A3(zr(e))&&(e=zr(e),t.rotateLeft(e)),Ah(zr(e),Fh),Ah(zr(zr(e)),ep),t.rotateRight(zr(zr(e))))}else{var r=Q2(zr(zr(e)));L3(r)===ep?(Ah(zr(e),Fh),Ah(r,Fh),Ah(zr(zr(e)),ep),e=zr(zr(e))):(e===Q2(zr(e))&&(e=zr(e),t.rotateRight(e)),Ah(zr(e),Fh),Ah(zr(zr(e)),ep),t.rotateLeft(zr(zr(e))))}this.root_.color=Fh};Vo.prototype.values=function(){var e=new qt,t=this.getFirstEntry();if(t!==null)for(e.add(t.value);(t=Vo.successor(t))!==null;)e.add(t.value);return e};Vo.prototype.entrySet=function(){var e=new rO,t=this.getFirstEntry();if(t!==null)for(e.add(t);(t=Vo.successor(t))!==null;)e.add(t);return e};Vo.prototype.rotateLeft=function(e){if(e!=null){var t=e.right;e.right=t.left,t.left!=null&&(t.left.parent=e),t.parent=e.parent,e.parent===null?this.root_=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}};Vo.prototype.rotateRight=function(e){if(e!=null){var t=e.left;e.left=t.right,t.right!=null&&(t.right.parent=e),t.parent=e.parent,e.parent===null?this.root_=t:e.parent.right===e?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}};Vo.prototype.getFirstEntry=function(){var e=this.root_;if(e!=null)for(;e.left!=null;)e=e.left;return e};Vo.successor=function(e){if(e===null)return null;if(e.right!==null){for(var t=e.right;t.left!==null;)t=t.left;return t}else{for(var n=e.parent,r=e;n!==null&&r===n.right;)r=n,n=n.parent;return n}};Vo.prototype.size=function(){return this.size_};var k1=function(){};k1.prototype.interfaces_=function(){return[]};k1.prototype.getClass=function(){return k1};function x$(){}x$.prototype=new US;function Vu(){this.array_=[],arguments[0]instanceof Vi&&this.addAll(arguments[0])}Vu.prototype=new x$;Vu.prototype.contains=function(e){for(var t=this,n=0,r=this.array_.length;n<r;n++){var i=t.array_[n];if(i.compareTo(e)===0)return!0}return!1};Vu.prototype.add=function(e){var t=this;if(this.contains(e))return!1;for(var n=0,r=this.array_.length;n<r;n++){var i=t.array_[n];if(i.compareTo(e)===1)return t.array_.splice(n,0,e),!0}return this.array_.push(e),!0};Vu.prototype.addAll=function(e){for(var t=this,n=e.iterator();n.hasNext();)t.add(n.next());return!0};Vu.prototype.remove=function(e){throw new Cx};Vu.prototype.size=function(){return this.array_.length};Vu.prototype.isEmpty=function(){return this.array_.length===0};Vu.prototype.toArray=function(){for(var e=this,t=[],n=0,r=this.array_.length;n<r;n++)t.push(e.array_[n]);return t};Vu.prototype.iterator=function(){return new qS(this)};var qS=function(e){this.treeSet_=e,this.position_=0};qS.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new cv;return this.treeSet_.array_[this.position_++]};qS.prototype.hasNext=function(){return this.position_<this.treeSet_.size()};qS.prototype.remove=function(){throw new Cx};var Rp=function(){};Rp.sort=function(){var e=arguments[0],t,n,r,i;if(arguments.length===1)i=function(u,l){return u.compareTo(l)},e.sort(i);else if(arguments.length===2)r=arguments[1],i=function(u,l){return r.compare(u,l)},e.sort(i);else if(arguments.length===3){n=e.slice(arguments[1],arguments[2]),n.sort();var o=e.slice(0,arguments[1]).concat(n,e.slice(arguments[2],e.length));for(e.splice(0,e.length),t=0;t<o.length;t++)e.push(o[t])}else if(arguments.length===4)for(n=e.slice(arguments[1],arguments[2]),r=arguments[3],i=function(u,l){return r.compare(u,l)},n.sort(i),o=e.slice(0,arguments[1]).concat(n,e.slice(arguments[2],e.length)),e.splice(0,e.length),t=0;t<o.length;t++)e.push(o[t])};Rp.asList=function(e){for(var t=new qt,n=0,r=e.length;n<r;n++)t.add(e[n]);return t};var dr=function(){},iu={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};iu.P.get=function(){return 0};iu.L.get=function(){return 1};iu.A.get=function(){return 2};iu.FALSE.get=function(){return-1};iu.TRUE.get=function(){return-2};iu.DONTCARE.get=function(){return-3};iu.SYM_FALSE.get=function(){return"F"};iu.SYM_TRUE.get=function(){return"T"};iu.SYM_DONTCARE.get=function(){return"*"};iu.SYM_P.get=function(){return"0"};iu.SYM_L.get=function(){return"1"};iu.SYM_A.get=function(){return"2"};dr.prototype.interfaces_=function(){return[]};dr.prototype.getClass=function(){return dr};dr.toDimensionSymbol=function(e){switch(e){case dr.FALSE:return dr.SYM_FALSE;case dr.TRUE:return dr.SYM_TRUE;case dr.DONTCARE:return dr.SYM_DONTCARE;case dr.P:return dr.SYM_P;case dr.L:return dr.SYM_L;case dr.A:return dr.SYM_A}throw new ri("Unknown dimension value: "+e)};dr.toDimensionValue=function(e){switch(A1.toUpperCase(e)){case dr.SYM_FALSE:return dr.FALSE;case dr.SYM_TRUE:return dr.TRUE;case dr.SYM_DONTCARE:return dr.DONTCARE;case dr.SYM_P:return dr.P;case dr.SYM_L:return dr.L;case dr.SYM_A:return dr.A}throw new ri("Unknown dimension symbol: "+e)};Object.defineProperties(dr,iu);var Gu=function(){};Gu.prototype.filter=function(e){};Gu.prototype.interfaces_=function(){return[]};Gu.prototype.getClass=function(){return Gu};var Hl=function(){};Hl.prototype.filter=function(e,t){};Hl.prototype.isDone=function(){};Hl.prototype.isGeometryChanged=function(){};Hl.prototype.interfaces_=function(){return[]};Hl.prototype.getClass=function(){return Hl};var cs=function(e){function t(r,i){if(e.call(this,i),this._geometries=r||[],e.hasNullElements(this._geometries))throw new ri("geometries must not contain null elements")}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){for(var r=this,i=new dn,o=0;o<this._geometries.length;o++)i.expandToInclude(r._geometries[o].getEnvelopeInternal());return i},t.prototype.getGeometryN=function(r){return this._geometries[r]},t.prototype.getSortIndex=function(){return e.SORTINDEX_GEOMETRYCOLLECTION},t.prototype.getCoordinates=function(){for(var r=this,i=new Array(this.getNumPoints()).fill(null),o=-1,u=0;u<this._geometries.length;u++)for(var l=r._geometries[u].getCoordinates(),p=0;p<l.length;p++)o++,i[o]=l[p];return i},t.prototype.getArea=function(){for(var r=this,i=0,o=0;o<this._geometries.length;o++)i+=r._geometries[o].getArea();return i},t.prototype.equalsExact=function(){var r=this;if(arguments.length===2){var i=arguments[0],o=arguments[1];if(!this.isEquivalentClass(i))return!1;var u=i;if(this._geometries.length!==u._geometries.length)return!1;for(var l=0;l<this._geometries.length;l++)if(!r._geometries[l].equalsExact(u._geometries[l],o))return!1;return!0}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){for(var r=this,i=0;i<this._geometries.length;i++)r._geometries[i].normalize();Rp.sort(this._geometries)},t.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},t.prototype.getBoundaryDimension=function(){for(var r=this,i=dr.FALSE,o=0;o<this._geometries.length;o++)i=Math.max(i,r._geometries[o].getBoundaryDimension());return i},t.prototype.getDimension=function(){for(var r=this,i=dr.FALSE,o=0;o<this._geometries.length;o++)i=Math.max(i,r._geometries[o].getDimension());return i},t.prototype.getLength=function(){for(var r=this,i=0,o=0;o<this._geometries.length;o++)i+=r._geometries[o].getLength();return i},t.prototype.getNumPoints=function(){for(var r=this,i=0,o=0;o<this._geometries.length;o++)i+=r._geometries[o].getNumPoints();return i},t.prototype.getNumGeometries=function(){return this._geometries.length},t.prototype.reverse=function(){for(var r=this,i=this._geometries.length,o=new Array(i).fill(null),u=0;u<this._geometries.length;u++)o[u]=r._geometries[u].reverse();return this.getFactory().createGeometryCollection(o)},t.prototype.compareToSameClass=function(){var r=this;if(arguments.length===1){var i=arguments[0],o=new Vu(Rp.asList(this._geometries)),u=new Vu(Rp.asList(i._geometries));return this.compare(o,u)}else if(arguments.length===2){for(var l=arguments[0],p=arguments[1],g=l,x=this.getNumGeometries(),y=g.getNumGeometries(),_=0;_<x&&_<y;){var T=r.getGeometryN(_),A=g.getGeometryN(_),O=T.compareToSameClass(A,p);if(O!==0)return O;_++}return _<x?1:_<y?-1:0}},t.prototype.apply=function(){var r=this;if(Sn(arguments[0],Uc))for(var i=arguments[0],o=0;o<this._geometries.length;o++)r._geometries[o].apply(i);else if(Sn(arguments[0],Hl)){var u=arguments[0];if(this._geometries.length===0)return null;for(var l=0;l<this._geometries.length&&(r._geometries[l].apply(u),!u.isDone());l++);u.isGeometryChanged()&&this.geometryChanged()}else if(Sn(arguments[0],Gu)){var p=arguments[0];p.filter(this);for(var g=0;g<this._geometries.length;g++)r._geometries[g].apply(p)}else if(Sn(arguments[0],Jh)){var x=arguments[0];x.filter(this);for(var y=0;y<this._geometries.length;y++)r._geometries[y].apply(x)}},t.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),Dn.shouldNeverReachHere(),null},t.prototype.clone=function(){var r=this,i=e.prototype.clone.call(this);i._geometries=new Array(this._geometries.length).fill(null);for(var o=0;o<this._geometries.length;o++)i._geometries[o]=r._geometries[o].clone();return i},t.prototype.getGeometryType=function(){return"GeometryCollection"},t.prototype.copy=function(){for(var r=this,i=new Array(this._geometries.length).fill(null),o=0;o<i.length;o++)i[o]=r._geometries[o].copy();return new t(i,this._factory)},t.prototype.isEmpty=function(){for(var r=this,i=0;i<this._geometries.length;i++)if(!r._geometries[i].isEmpty())return!1;return!0},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-5694727726395021e3},Object.defineProperties(t,n),t}(bn),qp=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return bn.SORTINDEX_MULTILINESTRING},t.prototype.equalsExact=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.isEquivalentClass(r)?e.prototype.equalsExact.call(this,r,i):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return this.isClosed()?dr.FALSE:0},t.prototype.isClosed=function(){var r=this;if(this.isEmpty())return!1;for(var i=0;i<this._geometries.length;i++)if(!r._geometries[i].isClosed())return!1;return!0},t.prototype.getDimension=function(){return 1},t.prototype.reverse=function(){for(var r=this,i=this._geometries.length,o=new Array(i).fill(null),u=0;u<this._geometries.length;u++)o[i-1-u]=r._geometries[u].reverse();return this.getFactory().createMultiLineString(o)},t.prototype.getBoundary=function(){return new al(this).getBoundary()},t.prototype.getGeometryType=function(){return"MultiLineString"},t.prototype.copy=function(){for(var r=this,i=new Array(this._geometries.length).fill(null),o=0;o<i.length;o++)i[o]=r._geometries[o].copy();return new t(i,this._factory)},t.prototype.interfaces_=function(){return[k1]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return 8166665132445434e3},Object.defineProperties(t,n),t}(cs),al=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,arguments.length===1){var e=arguments[0],t=hl.MOD2_BOUNDARY_RULE;this._geom=e,this._geomFact=e.getFactory(),this._bnRule=t}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};al.prototype.boundaryMultiLineString=function(e){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var t=this.computeBoundaryCoordinates(e);return t.length===1?this._geomFact.createPoint(t[0]):this._geomFact.createMultiPointFromCoords(t)};al.prototype.getBoundary=function(){return this._geom instanceof vi?this.boundaryLineString(this._geom):this._geom instanceof qp?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()};al.prototype.boundaryLineString=function(e){if(this._geom.isEmpty())return this.getEmptyMultiPoint();if(e.isClosed()){var t=this._bnRule.isInBoundary(2);return t?e.getStartPoint():this._geomFact.createMultiPoint()}return this._geomFact.createMultiPoint([e.getStartPoint(),e.getEndPoint()])};al.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()};al.prototype.computeBoundaryCoordinates=function(e){var t=this,n=new qt;this._endpointMap=new Vo;for(var r=0;r<e.getNumGeometries();r++){var i=e.getGeometryN(r);i.getNumPoints()!==0&&(t.addEndpoint(i.getCoordinateN(0)),t.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var o=this._endpointMap.entrySet().iterator();o.hasNext();){var u=o.next(),l=u.getValue(),p=l.count;t._bnRule.isInBoundary(p)&&n.add(u.getKey())}return Kn.toCoordinateArray(n)};al.prototype.addEndpoint=function(e){var t=this._endpointMap.get(e);t===null&&(t=new hE,this._endpointMap.put(e,t)),t.count++};al.prototype.interfaces_=function(){return[]};al.prototype.getClass=function(){return al};al.getBoundary=function(){if(arguments.length===1){var e=arguments[0],t=new al(e);return t.getBoundary()}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=new al(n,r);return i.getBoundary()}};var hE=function(){this.count=null};hE.prototype.interfaces_=function(){return[]};hE.prototype.getClass=function(){return hE};function ile(){}function ole(){}var sle=function(){};function ale(){}function lle(){}function ule(){}var ll=function(){},iO={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};ll.prototype.interfaces_=function(){return[]};ll.prototype.getClass=function(){return ll};ll.chars=function(e,t){for(var n=new Array(t).fill(null),r=0;r<t;r++)n[r]=e;return String(n)};ll.getStackTrace=function(){if(arguments.length===1){var e=arguments[0],t=new ale,n=new ile;return e.printStackTrace(n),t.toString()}else if(arguments.length===2){var r=arguments[0],i=arguments[1],o="";new ole(ll.getStackTrace(r));for(var u=new ule,l=0;l<i;l++)try{o+=u.readLine()+ll.NEWLINE}catch(p){if(p instanceof lle)Dn.shouldNeverReachHere();else throw p}finally{}return o}};ll.split=function(e,t){for(var n=t.length,r=new qt,i=""+e,o=i.indexOf(t);o>=0;){var u=i.substring(0,o);r.add(u),i=i.substring(o+n),o=i.indexOf(t)}i.length>0&&r.add(i);for(var l=new Array(r.size()).fill(null),p=0;p<l.length;p++)l[p]=r.get(p);return l};ll.toString=function(){if(arguments.length===1){var e=arguments[0];return ll.SIMPLE_ORDINATE_FORMAT.format(e)}};ll.spaces=function(e){return ll.chars(" ",e)};iO.NEWLINE.get=function(){return Mo.getProperty("line.separator")};iO.SIMPLE_ORDINATE_FORMAT.get=function(){return new sle};Object.defineProperties(ll,iO);var Oi=function(){};Oi.prototype.interfaces_=function(){return[]};Oi.prototype.getClass=function(){return Oi};Oi.copyCoord=function(e,t,n,r){for(var i=Math.min(e.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,e.getOrdinate(t,o))};Oi.isRing=function(e){var t=e.size();return t===0?!0:t<=3?!1:e.getOrdinate(0,rr.X)===e.getOrdinate(t-1,rr.X)&&e.getOrdinate(0,rr.Y)===e.getOrdinate(t-1,rr.Y)};Oi.isEqual=function(e,t){var n=e.size(),r=t.size();if(n!==r)return!1;for(var i=Math.min(e.getDimension(),t.getDimension()),o=0;o<n;o++)for(var u=0;u<i;u++){var l=e.getOrdinate(o,u),p=t.getOrdinate(o,u);if(e.getOrdinate(o,u)!==t.getOrdinate(o,u)&&!(On.isNaN(l)&&On.isNaN(p)))return!1}return!0};Oi.extend=function(e,t,n){var r=e.create(n,t.getDimension()),i=t.size();if(Oi.copy(t,0,r,0,i),i>0)for(var o=i;o<n;o++)Oi.copy(t,i-1,r,o,1);return r};Oi.reverse=function(e){for(var t=e.size()-1,n=Math.trunc(t/2),r=0;r<=n;r++)Oi.swap(e,r,t-r)};Oi.swap=function(e,t,n){if(t===n)return null;for(var r=0;r<e.getDimension();r++){var i=e.getOrdinate(t,r);e.setOrdinate(t,r,e.getOrdinate(n,r)),e.setOrdinate(n,r,i)}};Oi.copy=function(e,t,n,r,i){for(var o=0;o<i;o++)Oi.copyCoord(e,t+o,n,r+o)};Oi.toString=function(){if(arguments.length===1){var e=arguments[0],t=e.size();if(t===0)return"()";var n=e.getDimension(),r=new tc;r.append("(");for(var i=0;i<t;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(ll.toString(e.getOrdinate(i,o)))}return r.append(")"),r.toString()}};Oi.ensureValidRing=function(e,t){var n=t.size();if(n===0)return t;if(n<=3)return Oi.createClosedRing(e,t,4);var r=t.getOrdinate(0,rr.X)===t.getOrdinate(n-1,rr.X)&&t.getOrdinate(0,rr.Y)===t.getOrdinate(n-1,rr.Y);return r?t:Oi.createClosedRing(e,t,n+1)};Oi.createClosedRing=function(e,t,n){var r=e.create(n,t.getDimension()),i=t.size();Oi.copy(t,0,r,0,i);for(var o=i;o<n;o++)Oi.copy(t,0,r,o,1);return r};var vi=function(e){function t(r,i){e.call(this,i),this._points=null,this.init(r)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new dn:this._points.expandEnvelope(new dn)},t.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},t.prototype.getSortIndex=function(){return e.SORTINDEX_LINESTRING},t.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},t.prototype.equalsExact=function(){var r=this;if(arguments.length===2){var i=arguments[0],o=arguments[1];if(!this.isEquivalentClass(i))return!1;var u=i;if(this._points.size()!==u._points.size())return!1;for(var l=0;l<this._points.size();l++)if(!r.equal(r._points.getCoordinate(l),u._points.getCoordinate(l),o))return!1;return!0}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){for(var r=this,i=0;i<Math.trunc(this._points.size()/2);i++){var o=r._points.size()-1-i;if(!r._points.getCoordinate(i).equals(r._points.getCoordinate(o)))return r._points.getCoordinate(i).compareTo(r._points.getCoordinate(o))>0&&Oi.reverse(r._points),null}},t.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},t.prototype.getBoundaryDimension=function(){return this.isClosed()?dr.FALSE:0},t.prototype.isClosed=function(){return this.isEmpty()?!1:this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},t.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},t.prototype.getDimension=function(){return 1},t.prototype.getLength=function(){return Yt.computeLength(this._points)},t.prototype.getNumPoints=function(){return this._points.size()},t.prototype.reverse=function(){var r=this._points.copy();Oi.reverse(r);var i=this.getFactory().createLineString(r);return i},t.prototype.compareToSameClass=function(){var r=this;if(arguments.length===1){for(var i=arguments[0],o=i,u=0,l=0;u<this._points.size()&&l<o._points.size();){var p=r._points.getCoordinate(u).compareTo(o._points.getCoordinate(l));if(p!==0)return p;u++,l++}return u<this._points.size()?1:l<o._points.size()?-1:0}else if(arguments.length===2){var g=arguments[0],x=arguments[1],y=g;return x.compare(this._points,y._points)}},t.prototype.apply=function(){var r=this;if(Sn(arguments[0],Uc))for(var i=arguments[0],o=0;o<this._points.size();o++)i.filter(r._points.getCoordinate(o));else if(Sn(arguments[0],Hl)){var u=arguments[0];if(this._points.size()===0)return null;for(var l=0;l<this._points.size()&&(u.filter(r._points,l),!u.isDone());l++);u.isGeometryChanged()&&this.geometryChanged()}else if(Sn(arguments[0],Gu)){var p=arguments[0];p.filter(this)}else if(Sn(arguments[0],Jh)){var g=arguments[0];g.filter(this)}},t.prototype.getBoundary=function(){return new al(this).getBoundary()},t.prototype.isEquivalentClass=function(r){return r instanceof t},t.prototype.clone=function(){var r=e.prototype.clone.call(this);return r._points=this._points.clone(),r},t.prototype.getCoordinateN=function(r){return this._points.getCoordinate(r)},t.prototype.getGeometryType=function(){return"LineString"},t.prototype.copy=function(){return new t(this._points.copy(),this._factory)},t.prototype.getCoordinateSequence=function(){return this._points},t.prototype.isEmpty=function(){return this._points.size()===0},t.prototype.init=function(r){if(r===null&&(r=this.getFactory().getCoordinateSequenceFactory().create([])),r.size()===1)throw new ri("Invalid number of points in LineString (found "+r.size()+" - must be 0 or >= 2)");this._points=r},t.prototype.isCoordinate=function(r){for(var i=this,o=0;o<this._points.size();o++)if(i._points.getCoordinate(o).equals(r))return!0;return!1},t.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},t.prototype.getPointN=function(r){return this.getFactory().createPoint(this._points.getCoordinate(r))},t.prototype.interfaces_=function(){return[k1]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(t,n),t}(bn),R1=function(){};R1.prototype.interfaces_=function(){return[]};R1.prototype.getClass=function(){return R1};var oa=function(e){function t(r,i){e.call(this,i),this._coordinates=r||null,this.init(this._coordinates)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new dn;var r=new dn;return r.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),r},t.prototype.getSortIndex=function(){return e.SORTINDEX_POINT},t.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},t.prototype.equalsExact=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.isEquivalentClass(r)?this.isEmpty()&&r.isEmpty()?!0:this.isEmpty()!==r.isEmpty()?!1:this.equal(r.getCoordinate(),this.getCoordinate(),i):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){},t.prototype.getCoordinate=function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null},t.prototype.getBoundaryDimension=function(){return dr.FALSE},t.prototype.getDimension=function(){return 0},t.prototype.getNumPoints=function(){return this.isEmpty()?0:1},t.prototype.reverse=function(){return this.copy()},t.prototype.getX=function(){if(this.getCoordinate()===null)throw new Error("getX called on empty Point");return this.getCoordinate().x},t.prototype.compareToSameClass=function(){if(arguments.length===1){var r=arguments[0],i=r;return this.getCoordinate().compareTo(i.getCoordinate())}else if(arguments.length===2){var o=arguments[0],u=arguments[1],l=o;return u.compare(this._coordinates,l._coordinates)}},t.prototype.apply=function(){if(Sn(arguments[0],Uc)){var r=arguments[0];if(this.isEmpty())return null;r.filter(this.getCoordinate())}else if(Sn(arguments[0],Hl)){var i=arguments[0];if(this.isEmpty())return null;i.filter(this._coordinates,0),i.isGeometryChanged()&&this.geometryChanged()}else if(Sn(arguments[0],Gu)){var o=arguments[0];o.filter(this)}else if(Sn(arguments[0],Jh)){var u=arguments[0];u.filter(this)}},t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},t.prototype.clone=function(){var r=e.prototype.clone.call(this);return r._coordinates=this._coordinates.clone(),r},t.prototype.getGeometryType=function(){return"Point"},t.prototype.copy=function(){return new t(this._coordinates.copy(),this._factory)},t.prototype.getCoordinateSequence=function(){return this._coordinates},t.prototype.getY=function(){if(this.getCoordinate()===null)throw new Error("getY called on empty Point");return this.getCoordinate().y},t.prototype.isEmpty=function(){return this._coordinates.size()===0},t.prototype.init=function(r){r===null&&(r=this.getFactory().getCoordinateSequenceFactory().create([])),Dn.isTrue(r.size()<=1),this._coordinates=r},t.prototype.isSimple=function(){return!0},t.prototype.interfaces_=function(){return[R1]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return 4902022702746615e3},Object.defineProperties(t,n),t}(bn),hd=function(){};hd.prototype.interfaces_=function(){return[]};hd.prototype.getClass=function(){return hd};var Xi=function(e){function t(r,i,o){if(e.call(this,o),this._shell=null,this._holes=null,r===null&&(r=this.getFactory().createLinearRing()),i===null&&(i=[]),e.hasNullElements(i))throw new ri("holes must not contain null elements");if(r.isEmpty()&&e.hasNonEmptyElements(i))throw new ri("shell is empty but holes are not");this._shell=r,this._holes=i}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},t.prototype.getSortIndex=function(){return e.SORTINDEX_POLYGON},t.prototype.getCoordinates=function(){var r=this;if(this.isEmpty())return[];for(var i=new Array(this.getNumPoints()).fill(null),o=-1,u=this._shell.getCoordinates(),l=0;l<u.length;l++)o++,i[o]=u[l];for(var p=0;p<this._holes.length;p++)for(var g=r._holes[p].getCoordinates(),x=0;x<g.length;x++)o++,i[o]=g[x];return i},t.prototype.getArea=function(){var r=this,i=0;i+=Math.abs(Yt.signedArea(this._shell.getCoordinateSequence()));for(var o=0;o<this._holes.length;o++)i-=Math.abs(Yt.signedArea(r._holes[o].getCoordinateSequence()));return i},t.prototype.isRectangle=function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var r=this._shell.getCoordinateSequence(),i=this.getEnvelopeInternal(),o=0;o<5;o++){var u=r.getX(o);if(!(u===i.getMinX()||u===i.getMaxX()))return!1;var l=r.getY(o);if(!(l===i.getMinY()||l===i.getMaxY()))return!1}for(var p=r.getX(0),g=r.getY(0),x=1;x<=4;x++){var y=r.getX(x),_=r.getY(x),T=y!==p,A=_!==g;if(T===A)return!1;p=y,g=_}return!0},t.prototype.equalsExact=function(){var r=this;if(arguments.length===2){var i=arguments[0],o=arguments[1];if(!this.isEquivalentClass(i))return!1;var u=i,l=this._shell,p=u._shell;if(!l.equalsExact(p,o)||this._holes.length!==u._holes.length)return!1;for(var g=0;g<this._holes.length;g++)if(!r._holes[g].equalsExact(u._holes[g],o))return!1;return!0}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){var r=this;if(arguments.length===0){this.normalize(this._shell,!0);for(var i=0;i<this._holes.length;i++)r.normalize(r._holes[i],!1);Rp.sort(this._holes)}else if(arguments.length===2){var o=arguments[0],u=arguments[1];if(o.isEmpty())return null;var l=new Array(o.getCoordinates().length-1).fill(null);Mo.arraycopy(o.getCoordinates(),0,l,0,l.length);var p=Kn.minCoordinate(o.getCoordinates());Kn.scroll(l,p),Mo.arraycopy(l,0,o.getCoordinates(),0,l.length),o.getCoordinates()[l.length]=l[0],Yt.isCCW(o.getCoordinates())===u&&Kn.reverse(o.getCoordinates())}},t.prototype.getCoordinate=function(){return this._shell.getCoordinate()},t.prototype.getNumInteriorRing=function(){return this._holes.length},t.prototype.getBoundaryDimension=function(){return 1},t.prototype.getDimension=function(){return 2},t.prototype.getLength=function(){var r=this,i=0;i+=this._shell.getLength();for(var o=0;o<this._holes.length;o++)i+=r._holes[o].getLength();return i},t.prototype.getNumPoints=function(){for(var r=this,i=this._shell.getNumPoints(),o=0;o<this._holes.length;o++)i+=r._holes[o].getNumPoints();return i},t.prototype.reverse=function(){var r=this,i=this.copy();i._shell=this._shell.copy().reverse(),i._holes=new Array(this._holes.length).fill(null);for(var o=0;o<this._holes.length;o++)i._holes[o]=r._holes[o].copy().reverse();return i},t.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},t.prototype.compareToSameClass=function(){var r=this;if(arguments.length===1){var i=arguments[0],o=this._shell,u=i._shell;return o.compareToSameClass(u)}else if(arguments.length===2){var l=arguments[0],p=arguments[1],g=l,x=this._shell,y=g._shell,_=x.compareToSameClass(y,p);if(_!==0)return _;for(var T=this.getNumInteriorRing(),A=g.getNumInteriorRing(),O=0;O<T&&O<A;){var N=r.getInteriorRingN(O),k=g.getInteriorRingN(O),R=N.compareToSameClass(k,p);if(R!==0)return R;O++}return O<T?1:O<A?-1:0}},t.prototype.apply=function(r){var i=this;if(Sn(r,Uc)){this._shell.apply(r);for(var o=0;o<this._holes.length;o++)i._holes[o].apply(r)}else if(Sn(r,Hl)){if(this._shell.apply(r),!r.isDone())for(var u=0;u<this._holes.length&&(i._holes[u].apply(r),!r.isDone());u++);r.isGeometryChanged()&&this.geometryChanged()}else if(Sn(r,Gu))r.filter(this);else if(Sn(r,Jh)){r.filter(this),this._shell.apply(r);for(var l=0;l<this._holes.length;l++)i._holes[l].apply(r)}},t.prototype.getBoundary=function(){var r=this;if(this.isEmpty())return this.getFactory().createMultiLineString();var i=new Array(this._holes.length+1).fill(null);i[0]=this._shell;for(var o=0;o<this._holes.length;o++)i[o+1]=r._holes[o];return i.length<=1?this.getFactory().createLinearRing(i[0].getCoordinateSequence()):this.getFactory().createMultiLineString(i)},t.prototype.clone=function(){var r=this,i=e.prototype.clone.call(this);i._shell=this._shell.clone(),i._holes=new Array(this._holes.length).fill(null);for(var o=0;o<this._holes.length;o++)i._holes[o]=r._holes[o].clone();return i},t.prototype.getGeometryType=function(){return"Polygon"},t.prototype.copy=function(){for(var r=this,i=this._shell.copy(),o=new Array(this._holes.length).fill(null),u=0;u<o.length;u++)o[u]=r._holes[u].copy();return new t(i,o,this._factory)},t.prototype.getExteriorRing=function(){return this._shell},t.prototype.isEmpty=function(){return this._shell.isEmpty()},t.prototype.getInteriorRingN=function(r){return this._holes[r]},t.prototype.interfaces_=function(){return[hd]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(t,n),t}(bn),F_=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return bn.SORTINDEX_MULTIPOINT},t.prototype.isValid=function(){return!0},t.prototype.equalsExact=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.isEquivalentClass(r)?e.prototype.equalsExact.call(this,r,i):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.getCoordinate=function(){if(arguments.length===1){var r=arguments[0];return this._geometries[r].getCoordinate()}else return e.prototype.getCoordinate.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return dr.FALSE},t.prototype.getDimension=function(){return 0},t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},t.prototype.getGeometryType=function(){return"MultiPoint"},t.prototype.copy=function(){for(var r=this,i=new Array(this._geometries.length).fill(null),o=0;o<i.length;o++)i[o]=r._geometries[o].copy();return new t(i,this._factory)},t.prototype.interfaces_=function(){return[R1]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-8048474874175356e3},Object.defineProperties(t,n),t}(cs),qc=function(e){function t(r,i){r instanceof nt&&i instanceof Wn&&(r=i.getCoordinateSequenceFactory().create(r)),e.call(this,r,i),this.validateConstruction()}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return bn.SORTINDEX_LINEARRING},t.prototype.getBoundaryDimension=function(){return dr.FALSE},t.prototype.isClosed=function(){return this.isEmpty()?!0:e.prototype.isClosed.call(this)},t.prototype.reverse=function(){var r=this._points.copy();Oi.reverse(r);var i=this.getFactory().createLinearRing(r);return i},t.prototype.validateConstruction=function(){if(!this.isEmpty()&&!e.prototype.isClosed.call(this))throw new ri("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<t.MINIMUM_VALID_SIZE)throw new ri("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},t.prototype.getGeometryType=function(){return"LinearRing"},t.prototype.copy=function(){return new t(this._points.copy(),this._factory)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(t,n),t}(vi),zc=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return bn.SORTINDEX_MULTIPOLYGON},t.prototype.equalsExact=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.isEquivalentClass(r)?e.prototype.equalsExact.call(this,r,i):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return 1},t.prototype.getDimension=function(){return 2},t.prototype.reverse=function(){for(var r=this,i=this._geometries.length,o=new Array(i).fill(null),u=0;u<this._geometries.length;u++)o[u]=r._geometries[u].reverse();return this.getFactory().createMultiPolygon(o)},t.prototype.getBoundary=function(){var r=this;if(this.isEmpty())return this.getFactory().createMultiLineString();for(var i=new qt,o=0;o<this._geometries.length;o++)for(var u=r._geometries[o],l=u.getBoundary(),p=0;p<l.getNumGeometries();p++)i.add(l.getGeometryN(p));var g=new Array(i.size()).fill(null);return this.getFactory().createMultiLineString(i.toArray(g))},t.prototype.getGeometryType=function(){return"MultiPolygon"},t.prototype.copy=function(){for(var r=this,i=new Array(this._geometries.length).fill(null),o=0;o<i.length;o++)i[o]=r._geometries[o].copy();return new t(i,this._factory)},t.prototype.interfaces_=function(){return[hd]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(t,n),t}(cs),fl=function(e){this._factory=e||null,this._isUserDataCopied=!1},VS={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};fl.prototype.setCopyUserData=function(e){this._isUserDataCopied=e};fl.prototype.edit=function(e,t){if(e===null)return null;var n=this.editInternal(e,t);return this._isUserDataCopied&&n.setUserData(e.getUserData()),n};fl.prototype.editInternal=function(e,t){return this._factory===null&&(this._factory=e.getFactory()),e instanceof cs?this.editGeometryCollection(e,t):e instanceof Xi?this.editPolygon(e,t):e instanceof oa?t.edit(e,this._factory):e instanceof vi?t.edit(e,this._factory):(Dn.shouldNeverReachHere("Unsupported Geometry class: "+e.getClass().getName()),null)};fl.prototype.editGeometryCollection=function(e,t){for(var n=this,r=t.edit(e,this._factory),i=new qt,o=0;o<r.getNumGeometries();o++){var u=n.edit(r.getGeometryN(o),t);u===null||u.isEmpty()||i.add(u)}return r.getClass()===F_?this._factory.createMultiPoint(i.toArray([])):r.getClass()===qp?this._factory.createMultiLineString(i.toArray([])):r.getClass()===zc?this._factory.createMultiPolygon(i.toArray([])):this._factory.createGeometryCollection(i.toArray([]))};fl.prototype.editPolygon=function(e,t){var n=this,r=t.edit(e,this._factory);if(r===null&&(r=this._factory.createPolygon(null)),r.isEmpty())return r;var i=this.edit(r.getExteriorRing(),t);if(i===null||i.isEmpty())return this._factory.createPolygon();for(var o=new qt,u=0;u<r.getNumInteriorRing();u++){var l=n.edit(r.getInteriorRingN(u),t);l===null||l.isEmpty()||o.add(l)}return this._factory.createPolygon(i,o.toArray([]))};fl.prototype.interfaces_=function(){return[]};fl.prototype.getClass=function(){return fl};fl.GeometryEditorOperation=function(){};VS.NoOpGeometryOperation.get=function(){return M1};VS.CoordinateOperation.get=function(){return N1};VS.CoordinateSequenceOperation.get=function(){return D1};Object.defineProperties(fl,VS);var M1=function(){};M1.prototype.edit=function(e,t){return e};M1.prototype.interfaces_=function(){return[fl.GeometryEditorOperation]};M1.prototype.getClass=function(){return M1};var N1=function(){};N1.prototype.edit=function(e,t){var n=this.editCoordinates(e.getCoordinates(),e);return n===null?e:e instanceof qc?t.createLinearRing(n):e instanceof vi?t.createLineString(n):e instanceof oa?n.length>0?t.createPoint(n[0]):t.createPoint():e};N1.prototype.interfaces_=function(){return[fl.GeometryEditorOperation]};N1.prototype.getClass=function(){return N1};var D1=function(){};D1.prototype.edit=function(e,t){return e instanceof qc?t.createLinearRing(this.edit(e.getCoordinateSequence(),e)):e instanceof vi?t.createLineString(this.edit(e.getCoordinateSequence(),e)):e instanceof oa?t.createPoint(this.edit(e.getCoordinateSequence(),e)):e};D1.prototype.interfaces_=function(){return[fl.GeometryEditorOperation]};D1.prototype.getClass=function(){return D1};var Pi=function(){var e=this;if(this._dimension=3,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var n=0;n<t;n++)e._coordinates[n]=new nt}else if(Sn(arguments[0],rr)){var r=arguments[0];if(r===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=r.getDimension(),this._coordinates=new Array(r.size()).fill(null);for(var i=0;i<this._coordinates.length;i++)e._coordinates[i]=r.getCoordinateCopy(i)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var o=arguments[0],u=arguments[1];this._coordinates=o,this._dimension=u,o===null&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var l=arguments[0],p=arguments[1];this._coordinates=new Array(l).fill(null),this._dimension=p;for(var g=0;g<l;g++)e._coordinates[g]=new nt}}},b$={serialVersionUID:{configurable:!0}};Pi.prototype.setOrdinate=function(e,t,n){switch(t){case rr.X:this._coordinates[e].x=n;break;case rr.Y:this._coordinates[e].y=n;break;case rr.Z:this._coordinates[e].z=n;break;default:throw new ri("invalid ordinateIndex")}};Pi.prototype.size=function(){return this._coordinates.length};Pi.prototype.getOrdinate=function(e,t){switch(t){case rr.X:return this._coordinates[e].x;case rr.Y:return this._coordinates[e].y;case rr.Z:return this._coordinates[e].z}return On.NaN};Pi.prototype.getCoordinate=function(){if(arguments.length===1){var e=arguments[0];return this._coordinates[e]}else if(arguments.length===2){var t=arguments[0],n=arguments[1];n.x=this._coordinates[t].x,n.y=this._coordinates[t].y,n.z=this._coordinates[t].z}};Pi.prototype.getCoordinateCopy=function(e){return new nt(this._coordinates[e])};Pi.prototype.getDimension=function(){return this._dimension};Pi.prototype.getX=function(e){return this._coordinates[e].x};Pi.prototype.clone=function(){for(var e=this,t=new Array(this.size()).fill(null),n=0;n<this._coordinates.length;n++)t[n]=e._coordinates[n].clone();return new Pi(t,this._dimension)};Pi.prototype.expandEnvelope=function(e){for(var t=this,n=0;n<this._coordinates.length;n++)e.expandToInclude(t._coordinates[n]);return e};Pi.prototype.copy=function(){for(var e=this,t=new Array(this.size()).fill(null),n=0;n<this._coordinates.length;n++)t[n]=e._coordinates[n].copy();return new Pi(t,this._dimension)};Pi.prototype.toString=function(){var e=this;if(this._coordinates.length>0){var t=new tc(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var n=1;n<this._coordinates.length;n++)t.append(", "),t.append(e._coordinates[n]);return t.append(")"),t.toString()}else return"()"};Pi.prototype.getY=function(e){return this._coordinates[e].y};Pi.prototype.toCoordinateArray=function(){return this._coordinates};Pi.prototype.interfaces_=function(){return[rr,ml]};Pi.prototype.getClass=function(){return Pi};b$.serialVersionUID.get=function(){return-0xcb44a778db18e00};Object.defineProperties(Pi,b$);var Vc=function(){},oO={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};Vc.prototype.readResolve=function(){return Vc.instance()};Vc.prototype.create=function(){if(arguments.length===1){if(arguments[0]instanceof Array){var e=arguments[0];return new Pi(e)}else if(Sn(arguments[0],rr)){var t=arguments[0];return new Pi(t)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return r>3&&(r=3),r<2?new Pi(n):new Pi(n,r)}};Vc.prototype.interfaces_=function(){return[k_,ml]};Vc.prototype.getClass=function(){return Vc};Vc.instance=function(){return Vc.instanceObject};oO.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00};oO.instanceObject.get=function(){return new Vc};Object.defineProperties(Vc,oO);var w$=function(e){function t(){e.call(this),this.map_=new Map}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(n){return this.map_.get(n)||null},t.prototype.put=function(n,r){return this.map_.set(n,r),r},t.prototype.values=function(){for(var n=new qt,r=this.map_.values(),i=r.next();!i.done;)n.add(i.value),i=r.next();return n},t.prototype.entrySet=function(){var n=new rO;return this.map_.entries().forEach(function(r){return n.add(r)}),n},t.prototype.size=function(){return this.map_.size()},t}(Zg),mr=function e(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=e.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof Hu){var t=arguments[0];this._modelType=t,t===e.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var n=arguments[0];this._modelType=e.FIXED,this.setScale(n)}else if(arguments[0]instanceof e){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}}},sO={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};mr.prototype.equals=function(e){if(!(e instanceof mr))return!1;var t=e;return this._modelType===t._modelType&&this._scale===t._scale};mr.prototype.compareTo=function(e){var t=e,n=this.getMaximumSignificantDigits(),r=t.getMaximumSignificantDigits();return new qu(n).compareTo(new qu(r))};mr.prototype.getScale=function(){return this._scale};mr.prototype.isFloating=function(){return this._modelType===mr.FLOATING||this._modelType===mr.FLOATING_SINGLE};mr.prototype.getType=function(){return this._modelType};mr.prototype.toString=function(){var e="UNKNOWN";return this._modelType===mr.FLOATING?e="Floating":this._modelType===mr.FLOATING_SINGLE?e="Floating-Single":this._modelType===mr.FIXED&&(e="Fixed (Scale="+this.getScale()+")"),e};mr.prototype.makePrecise=function(){if(typeof arguments[0]=="number"){var e=arguments[0];if(On.isNaN(e))return e;if(this._modelType===mr.FLOATING_SINGLE){var t=e;return t}return this._modelType===mr.FIXED?Math.round(e*this._scale)/this._scale:e}else if(arguments[0]instanceof nt){var n=arguments[0];if(this._modelType===mr.FLOATING)return null;n.x=this.makePrecise(n.x),n.y=this.makePrecise(n.y)}};mr.prototype.getMaximumSignificantDigits=function(){var e=16;return this._modelType===mr.FLOATING?e=16:this._modelType===mr.FLOATING_SINGLE?e=6:this._modelType===mr.FIXED&&(e=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),e};mr.prototype.setScale=function(e){this._scale=Math.abs(e)};mr.prototype.interfaces_=function(){return[ml,pl]};mr.prototype.getClass=function(){return mr};mr.mostPrecise=function(e,t){return e.compareTo(t)>=0?e:t};sO.serialVersionUID.get=function(){return 7777263578777804e3};sO.maximumPreciseValue.get=function(){return 9007199254740992};Object.defineProperties(mr,sO);var Hu=function e(t){this._name=t||null,e.nameToTypeMap.put(t,this)},aO={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};Hu.prototype.readResolve=function(){return Hu.nameToTypeMap.get(this._name)};Hu.prototype.toString=function(){return this._name};Hu.prototype.interfaces_=function(){return[ml]};Hu.prototype.getClass=function(){return Hu};aO.serialVersionUID.get=function(){return-552860263173159e4};aO.nameToTypeMap.get=function(){return new w$};Object.defineProperties(Hu,aO);mr.Type=Hu;mr.FIXED=new Hu("FIXED");mr.FLOATING=new Hu("FLOATING");mr.FLOATING_SINGLE=new Hu("FLOATING SINGLE");var Wn=function e(){this._precisionModel=new mr,this._SRID=0,this._coordinateSequenceFactory=e.getDefaultCoordinateSequenceFactory(),arguments.length===0||(arguments.length===1?Sn(arguments[0],k_)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof mr&&(this._precisionModel=arguments[0]):arguments.length===2?(this._precisionModel=arguments[0],this._SRID=arguments[1]):arguments.length===3&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},E$={serialVersionUID:{configurable:!0}};Wn.prototype.toGeometry=function(e){return e.isNull()?this.createPoint(null):e.getMinX()===e.getMaxX()&&e.getMinY()===e.getMaxY()?this.createPoint(new nt(e.getMinX(),e.getMinY())):e.getMinX()===e.getMaxX()||e.getMinY()===e.getMaxY()?this.createLineString([new nt(e.getMinX(),e.getMinY()),new nt(e.getMaxX(),e.getMaxY())]):this.createPolygon(this.createLinearRing([new nt(e.getMinX(),e.getMinY()),new nt(e.getMinX(),e.getMaxY()),new nt(e.getMaxX(),e.getMaxY()),new nt(e.getMaxX(),e.getMinY()),new nt(e.getMinX(),e.getMinY())]),null)};Wn.prototype.createLineString=function(e){if(e){if(e instanceof Array)return new vi(this.getCoordinateSequenceFactory().create(e),this);if(Sn(e,rr))return new vi(e,this)}else return new vi(this.getCoordinateSequenceFactory().create([]),this)};Wn.prototype.createMultiLineString=function(){if(arguments.length===0)return new qp(null,this);if(arguments.length===1){var e=arguments[0];return new qp(e,this)}};Wn.prototype.buildGeometry=function(e){for(var t=null,n=!1,r=!1,i=e.iterator();i.hasNext();){var o=i.next(),u=o.getClass();t===null&&(t=u),u!==t&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(t===null)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(Wn.toGeometryArray(e));var l=e.iterator().next(),p=e.size()>1;if(p){if(l instanceof Xi)return this.createMultiPolygon(Wn.toPolygonArray(e));if(l instanceof vi)return this.createMultiLineString(Wn.toLineStringArray(e));if(l instanceof oa)return this.createMultiPoint(Wn.toPointArray(e));Dn.shouldNeverReachHere("Unhandled class: "+l.getClass().getName())}return l};Wn.prototype.createMultiPointFromCoords=function(e){return this.createMultiPoint(e!==null?this.getCoordinateSequenceFactory().create(e):null)};Wn.prototype.createPoint=function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof nt){var e=arguments[0];return this.createPoint(e!==null?this.getCoordinateSequenceFactory().create([e]):null)}else if(Sn(arguments[0],rr)){var t=arguments[0];return new oa(t,this)}}};Wn.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory};Wn.prototype.createPolygon=function(){if(arguments.length===0)return new Xi(null,null,this);if(arguments.length===1){if(Sn(arguments[0],rr)){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}else if(arguments[0]instanceof Array){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}else if(arguments[0]instanceof qc){var n=arguments[0];return this.createPolygon(n,null)}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];return new Xi(r,i,this)}};Wn.prototype.getSRID=function(){return this._SRID};Wn.prototype.createGeometryCollection=function(){if(arguments.length===0)return new cs(null,this);if(arguments.length===1){var e=arguments[0];return new cs(e,this)}};Wn.prototype.createGeometry=function(e){var t=new fl(this);return t.edit(e,{edit:function(){if(arguments.length===2){var n=arguments[0];return this._coordinateSequenceFactory.create(n)}}})};Wn.prototype.getPrecisionModel=function(){return this._precisionModel};Wn.prototype.createLinearRing=function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var e=arguments[0];return this.createLinearRing(e!==null?this.getCoordinateSequenceFactory().create(e):null)}else if(Sn(arguments[0],rr)){var t=arguments[0];return new qc(t,this)}}};Wn.prototype.createMultiPolygon=function(){if(arguments.length===0)return new zc(null,this);if(arguments.length===1){var e=arguments[0];return new zc(e,this)}};Wn.prototype.createMultiPoint=function(){var e=this;if(arguments.length===0)return new F_(null,this);if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return new F_(t,this)}else if(arguments[0]instanceof Array){var n=arguments[0];return this.createMultiPoint(n!==null?this.getCoordinateSequenceFactory().create(n):null)}else if(Sn(arguments[0],rr)){var r=arguments[0];if(r===null)return this.createMultiPoint(new Array(0).fill(null));for(var i=new Array(r.size()).fill(null),o=0;o<r.size();o++){var u=e.getCoordinateSequenceFactory().create(1,r.getDimension());Oi.copy(r,o,u,0,1),i[o]=e.createPoint(u)}return this.createMultiPoint(i)}}};Wn.prototype.interfaces_=function(){return[ml]};Wn.prototype.getClass=function(){return Wn};Wn.toMultiPolygonArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};Wn.toGeometryArray=function(e){if(e===null)return null;var t=new Array(e.size()).fill(null);return e.toArray(t)};Wn.getDefaultCoordinateSequenceFactory=function(){return Vc.instance()};Wn.toMultiLineStringArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};Wn.toLineStringArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};Wn.toMultiPointArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};Wn.toLinearRingArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};Wn.toPointArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};Wn.toPolygonArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};Wn.createPointFromInternalCoord=function(e,t){return t.getPrecisionModel().makePrecise(e),t.getFactory().createPoint(e)};E$.serialVersionUID.get=function(){return-6820524753094096e3};Object.defineProperties(Wn,E$);var cle=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],GS=function(e){this.geometryFactory=e||new Wn};GS.prototype.read=function(e){var t;typeof e=="string"?t=JSON.parse(e):t=e;var n=t.type;if(!Lu[n])throw new Error("Unknown GeoJSON type: "+t.type);return cle.indexOf(n)!==-1?Lu[n].apply(this,[t.coordinates]):n==="GeometryCollection"?Lu[n].apply(this,[t.geometries]):Lu[n].apply(this,[t])};GS.prototype.write=function(e){var t=e.getGeometryType();if(!Nh[t])throw new Error("Geometry is not supported");return Nh[t].apply(this,[e])};var Lu={Feature:function(e){var t={};for(var n in e)t[n]=e[n];if(e.geometry){var r=e.geometry.type;if(!Lu[r])throw new Error("Unknown GeoJSON type: "+e.type);t.geometry=this.read(e.geometry)}return e.bbox&&(t.bbox=Lu.bbox.apply(this,[e.bbox])),t},FeatureCollection:function(e){var t=this,n={};if(e.features){n.features=[];for(var r=0;r<e.features.length;++r)n.features.push(t.read(e.features[r]))}return e.bbox&&(n.bbox=this.parse.bbox.apply(this,[e.bbox])),n},coordinates:function(e){for(var t=[],n=0;n<e.length;++n){var r=e[n];t.push(new nt(r[0],r[1]))}return t},bbox:function(e){return this.geometryFactory.createLinearRing([new nt(e[0],e[1]),new nt(e[2],e[1]),new nt(e[2],e[3]),new nt(e[0],e[3]),new nt(e[0],e[1])])},Point:function(e){var t=new nt(e[0],e[1]);return this.geometryFactory.createPoint(t)},MultiPoint:function(e){for(var t=this,n=[],r=0;r<e.length;++r)n.push(Lu.Point.apply(t,[e[r]]));return this.geometryFactory.createMultiPoint(n)},LineString:function(e){var t=Lu.coordinates.apply(this,[e]);return this.geometryFactory.createLineString(t)},MultiLineString:function(e){for(var t=this,n=[],r=0;r<e.length;++r)n.push(Lu.LineString.apply(t,[e[r]]));return this.geometryFactory.createMultiLineString(n)},Polygon:function(e){for(var t=this,n=Lu.coordinates.apply(this,[e[0]]),r=this.geometryFactory.createLinearRing(n),i=[],o=1;o<e.length;++o){var u=e[o],l=Lu.coordinates.apply(t,[u]),p=t.geometryFactory.createLinearRing(l);i.push(p)}return this.geometryFactory.createPolygon(r,i)},MultiPolygon:function(e){for(var t=this,n=[],r=0;r<e.length;++r){var i=e[r];n.push(Lu.Polygon.apply(t,[i]))}return this.geometryFactory.createMultiPolygon(n)},GeometryCollection:function(e){for(var t=this,n=[],r=0;r<e.length;++r){var i=e[r];n.push(t.read(i))}return this.geometryFactory.createGeometryCollection(n)}},Nh={coordinate:function(e){return[e.x,e.y]},Point:function(e){var t=Nh.coordinate.apply(this,[e.getCoordinate()]);return{type:"Point",coordinates:t}},MultiPoint:function(e){for(var t=this,n=[],r=0;r<e._geometries.length;++r){var i=e._geometries[r],o=Nh.Point.apply(t,[i]);n.push(o.coordinates)}return{type:"MultiPoint",coordinates:n}},LineString:function(e){for(var t=this,n=[],r=e.getCoordinates(),i=0;i<r.length;++i){var o=r[i];n.push(Nh.coordinate.apply(t,[o]))}return{type:"LineString",coordinates:n}},MultiLineString:function(e){for(var t=this,n=[],r=0;r<e._geometries.length;++r){var i=e._geometries[r],o=Nh.LineString.apply(t,[i]);n.push(o.coordinates)}return{type:"MultiLineString",coordinates:n}},Polygon:function(e){var t=this,n=[],r=Nh.LineString.apply(this,[e._shell]);n.push(r.coordinates);for(var i=0;i<e._holes.length;++i){var o=e._holes[i],u=Nh.LineString.apply(t,[o]);n.push(u.coordinates)}return{type:"Polygon",coordinates:n}},MultiPolygon:function(e){for(var t=this,n=[],r=0;r<e._geometries.length;++r){var i=e._geometries[r],o=Nh.Polygon.apply(t,[i]);n.push(o.coordinates)}return{type:"MultiPolygon",coordinates:n}},GeometryCollection:function(e){for(var t=this,n=[],r=0;r<e._geometries.length;++r){var i=e._geometries[r],o=i.getGeometryType();n.push(Nh[o].apply(t,[i]))}return{type:"GeometryCollection",geometries:n}}},lO=function(e){this.geometryFactory=e||new Wn,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new GS(this.geometryFactory)};lO.prototype.read=function(e){var t=this.parser.read(e);return this.precisionModel.getType()===mr.FIXED&&this.reducePrecision(t),t};lO.prototype.reducePrecision=function(e){var t=this,n,r;if(e.coordinate)this.precisionModel.makePrecise(e.coordinate);else if(e.points)for(n=0,r=e.points.length;n<r;n++)t.precisionModel.makePrecise(e.points[n]);else if(e.geometries)for(n=0,r=e.geometries.length;n<r;n++)t.reducePrecision(e.geometries[n])};var S$=function(){this.parser=new GS(this.geometryFactory)};S$.prototype.write=function(e){return this.parser.write(e)};var Rt=function(){},HS={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Rt.prototype.interfaces_=function(){return[]};Rt.prototype.getClass=function(){return Rt};Rt.opposite=function(e){return e===Rt.LEFT?Rt.RIGHT:e===Rt.RIGHT?Rt.LEFT:e};HS.ON.get=function(){return 0};HS.LEFT.get=function(){return 1};HS.RIGHT.get=function(){return 2};Object.defineProperties(Rt,HS);function ZS(e){this.message=e||""}ZS.prototype=new Error;ZS.prototype.name="EmptyStackException";function nc(){this.array_=[]}nc.prototype=new $l;nc.prototype.add=function(e){return this.array_.push(e),!0};nc.prototype.get=function(e){if(e<0||e>=this.size())throw new Error;return this.array_[e]};nc.prototype.push=function(e){return this.array_.push(e),e};nc.prototype.pop=function(e){if(this.array_.length===0)throw new ZS;return this.array_.pop()};nc.prototype.peek=function(){if(this.array_.length===0)throw new ZS;return this.array_[this.array_.length-1]};nc.prototype.empty=function(){return this.array_.length===0};nc.prototype.isEmpty=function(){return this.empty()};nc.prototype.search=function(e){return this.array_.indexOf(e)};nc.prototype.size=function(){return this.array_.length};nc.prototype.toArray=function(){for(var e=this,t=[],n=0,r=this.array_.length;n<r;n++)t.push(e.array_[n]);return t};var Zu=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Zu.prototype.getCoordinate=function(){return this._minCoord};Zu.prototype.getRightmostSide=function(e,t){var n=this.getRightmostSideOfSegment(e,t);return n<0&&(n=this.getRightmostSideOfSegment(e,t-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(e)),n};Zu.prototype.findRightmostEdgeAtVertex=function(){var e=this._minDe.getEdge().getCoordinates();Dn.isTrue(this._minIndex>0&&this._minIndex<e.length,"rightmost point expected to be interior vertex of edge");var t=e[this._minIndex-1],n=e[this._minIndex+1],r=Yt.computeOrientation(this._minCoord,n,t),i=!1;(t.y<this._minCoord.y&&n.y<this._minCoord.y&&r===Yt.COUNTERCLOCKWISE||t.y>this._minCoord.y&&n.y>this._minCoord.y&&r===Yt.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)};Zu.prototype.getRightmostSideOfSegment=function(e,t){var n=e.getEdge(),r=n.getCoordinates();if(t<0||t+1>=r.length||r[t].y===r[t+1].y)return-1;var i=Rt.LEFT;return r[t].y<r[t+1].y&&(i=Rt.RIGHT),i};Zu.prototype.getEdge=function(){return this._orientedDe};Zu.prototype.checkForRightmostCoordinate=function(e){for(var t=this,n=e.getEdge().getCoordinates(),r=0;r<n.length-1;r++)(t._minCoord===null||n[r].x>t._minCoord.x)&&(t._minDe=e,t._minIndex=r,t._minCoord=n[r])};Zu.prototype.findRightmostEdgeAtNode=function(){var e=this._minDe.getNode(),t=e.getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)};Zu.prototype.findEdge=function(e){for(var t=this,n=e.iterator();n.hasNext();){var r=n.next();r.isForward()&&t.checkForRightmostCoordinate(r)}Dn.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe;var i=this.getRightmostSide(this._minDe,this._minIndex);i===Rt.LEFT&&(this._orientedDe=this._minDe.getSym())};Zu.prototype.interfaces_=function(){return[]};Zu.prototype.getClass=function(){return Zu};var Qh=function(e){function t(n,r){e.call(this,t.msgWithCoord(n,r)),this.pt=r?new nt(r):null,this.name="TopologyException"}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getCoordinate=function(){return this.pt},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.msgWithCoord=function(n,r){return r?n:n+" [ "+r+" ]"},t}(Yh),WS=function(){this.array_=[]};WS.prototype.addLast=function(e){this.array_.push(e)};WS.prototype.removeFirst=function(){return this.array_.shift()};WS.prototype.isEmpty=function(){return this.array_.length===0};var hs=function(){this._finder=null,this._dirEdgeList=new qt,this._nodes=new qt,this._rightMostCoord=null,this._env=null,this._finder=new Zu};hs.prototype.clearVisitedEdges=function(){for(var e=this._dirEdgeList.iterator();e.hasNext();){var t=e.next();t.setVisited(!1)}};hs.prototype.getRightmostCoordinate=function(){return this._rightMostCoord};hs.prototype.computeNodeDepth=function(e){for(var t=this,n=null,r=e.getEdges().iterator();r.hasNext();){var i=r.next();if(i.isVisited()||i.getSym().isVisited()){n=i;break}}if(n===null)throw new Qh("unable to find edge to compute depths at "+e.getCoordinate());e.getEdges().computeDepths(n);for(var o=e.getEdges().iterator();o.hasNext();){var u=o.next();u.setVisited(!0),t.copySymDepths(u)}};hs.prototype.computeDepth=function(e){this.clearVisitedEdges();var t=this._finder.getEdge();t.setEdgeDepths(Rt.RIGHT,e),this.copySymDepths(t),this.computeDepths(t)};hs.prototype.create=function(e){this.addReachable(e),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()};hs.prototype.findResultEdges=function(){for(var e=this._dirEdgeList.iterator();e.hasNext();){var t=e.next();t.getDepth(Rt.RIGHT)>=1&&t.getDepth(Rt.LEFT)<=0&&!t.isInteriorAreaEdge()&&t.setInResult(!0)}};hs.prototype.computeDepths=function(e){var t=this,n=new rO,r=new WS,i=e.getNode();for(r.addLast(i),n.add(i),e.setVisited(!0);!r.isEmpty();){var o=r.removeFirst();n.add(o),t.computeNodeDepth(o);for(var u=o.getEdges().iterator();u.hasNext();){var l=u.next(),p=l.getSym();if(!p.isVisited()){var g=p.getNode();n.contains(g)||(r.addLast(g),n.add(g))}}}};hs.prototype.compareTo=function(e){var t=e;return this._rightMostCoord.x<t._rightMostCoord.x?-1:this._rightMostCoord.x>t._rightMostCoord.x?1:0};hs.prototype.getEnvelope=function(){if(this._env===null){for(var e=new dn,t=this._dirEdgeList.iterator();t.hasNext();)for(var n=t.next(),r=n.getEdge().getCoordinates(),i=0;i<r.length-1;i++)e.expandToInclude(r[i]);this._env=e}return this._env};hs.prototype.addReachable=function(e){var t=this,n=new nc;for(n.add(e);!n.empty();){var r=n.pop();t.add(r,n)}};hs.prototype.copySymDepths=function(e){var t=e.getSym();t.setDepth(Rt.LEFT,e.getDepth(Rt.RIGHT)),t.setDepth(Rt.RIGHT,e.getDepth(Rt.LEFT))};hs.prototype.add=function(e,t){var n=this;e.setVisited(!0),this._nodes.add(e);for(var r=e.getEdges().iterator();r.hasNext();){var i=r.next();n._dirEdgeList.add(i);var o=i.getSym(),u=o.getNode();u.isVisited()||t.push(u)}};hs.prototype.getNodes=function(){return this._nodes};hs.prototype.getDirectedEdges=function(){return this._dirEdgeList};hs.prototype.interfaces_=function(){return[pl]};hs.prototype.getClass=function(){return hs};var Fr=function e(){var t=this;if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var n=arguments[0];this.init(n.length)}else if(Number.isInteger(arguments[0])){var r=arguments[0];this.init(1),this.location[Rt.ON]=r}else if(arguments[0]instanceof e){var i=arguments[0];if(this.init(i.location.length),i!==null)for(var o=0;o<this.location.length;o++)t.location[o]=i.location[o]}}else if(arguments.length===3){var u=arguments[0],l=arguments[1],p=arguments[2];this.init(3),this.location[Rt.ON]=u,this.location[Rt.LEFT]=l,this.location[Rt.RIGHT]=p}};Fr.prototype.setAllLocations=function(e){for(var t=this,n=0;n<this.location.length;n++)t.location[n]=e};Fr.prototype.isNull=function(){for(var e=this,t=0;t<this.location.length;t++)if(e.location[t]!==st.NONE)return!1;return!0};Fr.prototype.setAllLocationsIfNull=function(e){for(var t=this,n=0;n<this.location.length;n++)t.location[n]===st.NONE&&(t.location[n]=e)};Fr.prototype.isLine=function(){return this.location.length===1};Fr.prototype.merge=function(e){var t=this;if(e.location.length>this.location.length){var n=new Array(3).fill(null);n[Rt.ON]=this.location[Rt.ON],n[Rt.LEFT]=st.NONE,n[Rt.RIGHT]=st.NONE,this.location=n}for(var r=0;r<this.location.length;r++)t.location[r]===st.NONE&&r<e.location.length&&(t.location[r]=e.location[r])};Fr.prototype.getLocations=function(){return this.location};Fr.prototype.flip=function(){if(this.location.length<=1)return null;var e=this.location[Rt.LEFT];this.location[Rt.LEFT]=this.location[Rt.RIGHT],this.location[Rt.RIGHT]=e};Fr.prototype.toString=function(){var e=new tc;return this.location.length>1&&e.append(st.toLocationSymbol(this.location[Rt.LEFT])),e.append(st.toLocationSymbol(this.location[Rt.ON])),this.location.length>1&&e.append(st.toLocationSymbol(this.location[Rt.RIGHT])),e.toString()};Fr.prototype.setLocations=function(e,t,n){this.location[Rt.ON]=e,this.location[Rt.LEFT]=t,this.location[Rt.RIGHT]=n};Fr.prototype.get=function(e){return e<this.location.length?this.location[e]:st.NONE};Fr.prototype.isArea=function(){return this.location.length>1};Fr.prototype.isAnyNull=function(){for(var e=this,t=0;t<this.location.length;t++)if(e.location[t]===st.NONE)return!0;return!1};Fr.prototype.setLocation=function(){if(arguments.length===1){var e=arguments[0];this.setLocation(Rt.ON,e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this.location[t]=n}};Fr.prototype.init=function(e){this.location=new Array(e).fill(null),this.setAllLocations(st.NONE)};Fr.prototype.isEqualOnSide=function(e,t){return this.location[t]===e.location[t]};Fr.prototype.allPositionsEqual=function(e){for(var t=this,n=0;n<this.location.length;n++)if(t.location[n]!==e)return!1;return!0};Fr.prototype.interfaces_=function(){return[]};Fr.prototype.getClass=function(){return Fr};var Sr=function e(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new Fr(t),this.elt[1]=new Fr(t)}else if(arguments[0]instanceof e){var n=arguments[0];this.elt[0]=new Fr(n.elt[0]),this.elt[1]=new Fr(n.elt[1])}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];this.elt[0]=new Fr(st.NONE),this.elt[1]=new Fr(st.NONE),this.elt[r].setLocation(i)}else if(arguments.length===3){var o=arguments[0],u=arguments[1],l=arguments[2];this.elt[0]=new Fr(o,u,l),this.elt[1]=new Fr(o,u,l)}else if(arguments.length===4){var p=arguments[0],g=arguments[1],x=arguments[2],y=arguments[3];this.elt[0]=new Fr(st.NONE,st.NONE,st.NONE),this.elt[1]=new Fr(st.NONE,st.NONE,st.NONE),this.elt[p].setLocations(g,x,y)}};Sr.prototype.getGeometryCount=function(){var e=0;return this.elt[0].isNull()||e++,this.elt[1].isNull()||e++,e};Sr.prototype.setAllLocations=function(e,t){this.elt[e].setAllLocations(t)};Sr.prototype.isNull=function(e){return this.elt[e].isNull()};Sr.prototype.setAllLocationsIfNull=function(){if(arguments.length===1){var e=arguments[0];this.setAllLocationsIfNull(0,e),this.setAllLocationsIfNull(1,e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this.elt[t].setAllLocationsIfNull(n)}};Sr.prototype.isLine=function(e){return this.elt[e].isLine()};Sr.prototype.merge=function(e){for(var t=this,n=0;n<2;n++)t.elt[n]===null&&e.elt[n]!==null?t.elt[n]=new Fr(e.elt[n]):t.elt[n].merge(e.elt[n])};Sr.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()};Sr.prototype.getLocation=function(){if(arguments.length===1){var e=arguments[0];return this.elt[e].get(Rt.ON)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];return this.elt[t].get(n)}};Sr.prototype.toString=function(){var e=new tc;return this.elt[0]!==null&&(e.append("A:"),e.append(this.elt[0].toString())),this.elt[1]!==null&&(e.append(" B:"),e.append(this.elt[1].toString())),e.toString()};Sr.prototype.isArea=function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var e=arguments[0];return this.elt[e].isArea()}};Sr.prototype.isAnyNull=function(e){return this.elt[e].isAnyNull()};Sr.prototype.setLocation=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];this.elt[e].setLocation(Rt.ON,t)}else if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}};Sr.prototype.isEqualOnSide=function(e,t){return this.elt[0].isEqualOnSide(e.elt[0],t)&&this.elt[1].isEqualOnSide(e.elt[1],t)};Sr.prototype.allPositionsEqual=function(e,t){return this.elt[e].allPositionsEqual(t)};Sr.prototype.toLine=function(e){this.elt[e].isArea()&&(this.elt[e]=new Fr(this.elt[e].location[0]))};Sr.prototype.interfaces_=function(){return[]};Sr.prototype.getClass=function(){return Sr};Sr.toLineLabel=function(e){for(var t=new Sr(st.NONE),n=0;n<2;n++)t.setLocation(n,e.getLocation(n));return t};var Bi=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new qt,this._pts=new qt,this._label=new Sr(st.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new qt,this._geometryFactory=null;var e=arguments[0],t=arguments[1];this._geometryFactory=t,this.computePoints(e),this.computeRing()};Bi.prototype.computeRing=function(){var e=this;if(this._ring!==null)return null;for(var t=new Array(this._pts.size()).fill(null),n=0;n<this._pts.size();n++)t[n]=e._pts.get(n);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=Yt.isCCW(this._ring.getCoordinates())};Bi.prototype.isIsolated=function(){return this._label.getGeometryCount()===1};Bi.prototype.computePoints=function(e){var t=this;this._startDe=e;var n=e,r=!0;do{if(n===null)throw new Qh("Found null DirectedEdge");if(n.getEdgeRing()===t)throw new Qh("Directed Edge visited twice during ring-building at "+n.getCoordinate());t._edges.add(n);var i=n.getLabel();Dn.isTrue(i.isArea()),t.mergeLabel(i),t.addPoints(n.getEdge(),n.isForward(),r),r=!1,t.setEdgeRing(n,t),n=t.getNext(n)}while(n!==this._startDe)};Bi.prototype.getLinearRing=function(){return this._ring};Bi.prototype.getCoordinate=function(e){return this._pts.get(e)};Bi.prototype.computeMaxNodeDegree=function(){var e=this;this._maxNodeDegree=0;var t=this._startDe;do{var n=t.getNode(),r=n.getEdges().getOutgoingDegree(e);r>e._maxNodeDegree&&(e._maxNodeDegree=r),t=e.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2};Bi.prototype.addPoints=function(e,t,n){var r=this,i=e.getCoordinates();if(t){var o=1;n&&(o=0);for(var u=o;u<i.length;u++)r._pts.add(i[u])}else{var l=i.length-2;n&&(l=i.length-1);for(var p=l;p>=0;p--)r._pts.add(i[p])}};Bi.prototype.isHole=function(){return this._isHole};Bi.prototype.setInResult=function(){var e=this._startDe;do e.getEdge().setInResult(!0),e=e.getNext();while(e!==this._startDe)};Bi.prototype.containsPoint=function(e){var t=this.getLinearRing(),n=t.getEnvelopeInternal();if(!n.contains(e)||!Yt.isPointInRing(e,t.getCoordinates()))return!1;for(var r=this._holes.iterator();r.hasNext();){var i=r.next();if(i.containsPoint(e))return!1}return!0};Bi.prototype.addHole=function(e){this._holes.add(e)};Bi.prototype.isShell=function(){return this._shell===null};Bi.prototype.getLabel=function(){return this._label};Bi.prototype.getEdges=function(){return this._edges};Bi.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree};Bi.prototype.getShell=function(){return this._shell};Bi.prototype.mergeLabel=function(){if(arguments.length===1){var e=arguments[0];this.mergeLabel(e,0),this.mergeLabel(e,1)}else if(arguments.length===2){var t=arguments[0],n=arguments[1],r=t.getLocation(n,Rt.RIGHT);if(r===st.NONE)return null;if(this._label.getLocation(n)===st.NONE)return this._label.setLocation(n,r),null}};Bi.prototype.setShell=function(e){this._shell=e,e!==null&&e.addHole(this)};Bi.prototype.toPolygon=function(e){for(var t=this,n=new Array(this._holes.size()).fill(null),r=0;r<this._holes.size();r++)n[r]=t._holes.get(r).getLinearRing();var i=e.createPolygon(this.getLinearRing(),n);return i};Bi.prototype.interfaces_=function(){return[]};Bi.prototype.getClass=function(){return Bi};var hle=function(e){function t(){var n=arguments[0],r=arguments[1];e.call(this,n,r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setEdgeRing=function(n,r){n.setMinEdgeRing(r)},t.prototype.getNext=function(n){return n.getNextMin()},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Bi),fle=function(e){function t(){var n=arguments[0],r=arguments[1];e.call(this,n,r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.buildMinimalRings=function(){var n=this,r=new qt,i=this._startDe;do{if(i.getMinEdgeRing()===null){var o=new hle(i,n._geometryFactory);r.add(o)}i=i.getNext()}while(i!==this._startDe);return r},t.prototype.setEdgeRing=function(n,r){n.setEdgeRing(r)},t.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var n=this,r=this._startDe;do{var i=r.getNode();i.getEdges().linkMinimalDirectedEdges(n),r=r.getNext()}while(r!==this._startDe)},t.prototype.getNext=function(n){return n.getNext()},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Bi),Ma=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0&&arguments.length===1){var e=arguments[0];this._label=e}};Ma.prototype.setVisited=function(e){this._isVisited=e};Ma.prototype.setInResult=function(e){this._isInResult=e};Ma.prototype.isCovered=function(){return this._isCovered};Ma.prototype.isCoveredSet=function(){return this._isCoveredSet};Ma.prototype.setLabel=function(e){this._label=e};Ma.prototype.getLabel=function(){return this._label};Ma.prototype.setCovered=function(e){this._isCovered=e,this._isCoveredSet=!0};Ma.prototype.updateIM=function(e){Dn.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(e)};Ma.prototype.isInResult=function(){return this._isInResult};Ma.prototype.isVisited=function(){return this._isVisited};Ma.prototype.interfaces_=function(){return[]};Ma.prototype.getClass=function(){return Ma};var KS=function(e){function t(){e.call(this),this._coord=null,this._edges=null;var n=arguments[0],r=arguments[1];this._coord=n,this._edges=r,this._label=new Sr(0,st.NONE)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isIncidentEdgeInResult=function(){for(var n=this.getEdges().getEdges().iterator();n.hasNext();){var r=n.next();if(r.getEdge().isInResult())return!0}return!1},t.prototype.isIsolated=function(){return this._label.getGeometryCount()===1},t.prototype.getCoordinate=function(){return this._coord},t.prototype.print=function(n){n.println("node "+this._coord+" lbl: "+this._label)},t.prototype.computeIM=function(n){},t.prototype.computeMergedLocation=function(n,r){var i=st.NONE;if(i=this._label.getLocation(r),!n.isNull(r)){var o=n.getLocation(r);i!==st.BOUNDARY&&(i=o)}return i},t.prototype.setLabel=function(){if(arguments.length===2){var n=arguments[0],r=arguments[1];this._label===null?this._label=new Sr(n,r):this._label.setLocation(n,r)}else return e.prototype.setLabel.apply(this,arguments)},t.prototype.getEdges=function(){return this._edges},t.prototype.mergeLabel=function(){var n=this;if(arguments[0]instanceof t){var r=arguments[0];this.mergeLabel(r._label)}else if(arguments[0]instanceof Sr)for(var i=arguments[0],o=0;o<2;o++){var u=n.computeMergedLocation(i,o),l=n._label.getLocation(o);l===st.NONE&&n._label.setLocation(o,u)}},t.prototype.add=function(n){this._edges.insert(n),n.setNode(this)},t.prototype.setLabelBoundary=function(n){if(this._label===null)return null;var r=st.NONE;this._label!==null&&(r=this._label.getLocation(n));var i=null;switch(r){case st.BOUNDARY:i=st.INTERIOR;break;case st.INTERIOR:i=st.BOUNDARY;break;default:i=st.BOUNDARY;break}this._label.setLocation(n,i)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Ma),Wu=function(){this.nodeMap=new Vo,this.nodeFact=null;var e=arguments[0];this.nodeFact=e};Wu.prototype.find=function(e){return this.nodeMap.get(e)};Wu.prototype.addNode=function(){if(arguments[0]instanceof nt){var e=arguments[0],t=this.nodeMap.get(e);return t===null&&(t=this.nodeFact.createNode(e),this.nodeMap.put(e,t)),t}else if(arguments[0]instanceof KS){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return r===null?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}};Wu.prototype.print=function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}};Wu.prototype.iterator=function(){return this.nodeMap.values().iterator()};Wu.prototype.values=function(){return this.nodeMap.values()};Wu.prototype.getBoundaryNodes=function(e){for(var t=new qt,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(e)===st.BOUNDARY&&t.add(r)}return t};Wu.prototype.add=function(e){var t=e.getCoordinate(),n=this.addNode(t);n.add(e)};Wu.prototype.interfaces_=function(){return[]};Wu.prototype.getClass=function(){return Wu};var Ar=function(){},Ix={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Ar.prototype.interfaces_=function(){return[]};Ar.prototype.getClass=function(){return Ar};Ar.isNorthern=function(e){return e===Ar.NE||e===Ar.NW};Ar.isOpposite=function(e,t){if(e===t)return!1;var n=(e-t+4)%4;return n===2};Ar.commonHalfPlane=function(e,t){if(e===t)return e;var n=(e-t+4)%4;if(n===2)return-1;var r=e<t?e:t,i=e>t?e:t;return r===0&&i===3?3:r};Ar.isInHalfPlane=function(e,t){return t===Ar.SE?e===Ar.SE||e===Ar.SW:e===t||e===t+1};Ar.quadrant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],t=arguments[1];if(e===0&&t===0)throw new ri("Cannot compute the quadrant for point ( "+e+", "+t+" )");return e>=0?t>=0?Ar.NE:Ar.SE:t>=0?Ar.NW:Ar.SW}else if(arguments[0]instanceof nt&&arguments[1]instanceof nt){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new ri("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?Ar.NE:Ar.SE:r.y>=n.y?Ar.NW:Ar.SW}};Ix.NE.get=function(){return 0};Ix.NW.get=function(){return 1};Ix.SW.get=function(){return 2};Ix.SE.get=function(){return 3};Object.defineProperties(Ar,Ix);var Go=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var e=arguments[0];this._edge=e}else if(arguments.length===3){var t=arguments[0],n=arguments[1],r=arguments[2],i=null;this._edge=t,this.init(n,r),this._label=i}else if(arguments.length===4){var o=arguments[0],u=arguments[1],l=arguments[2],p=arguments[3];this._edge=o,this.init(u,l),this._label=p}};Go.prototype.compareDirection=function(e){return this._dx===e._dx&&this._dy===e._dy?0:this._quadrant>e._quadrant?1:this._quadrant<e._quadrant?-1:Yt.computeOrientation(e._p0,e._p1,this._p1)};Go.prototype.getDy=function(){return this._dy};Go.prototype.getCoordinate=function(){return this._p0};Go.prototype.setNode=function(e){this._node=e};Go.prototype.print=function(e){var t=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);e.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label)};Go.prototype.compareTo=function(e){var t=e;return this.compareDirection(t)};Go.prototype.getDirectedCoordinate=function(){return this._p1};Go.prototype.getDx=function(){return this._dx};Go.prototype.getLabel=function(){return this._label};Go.prototype.getEdge=function(){return this._edge};Go.prototype.getQuadrant=function(){return this._quadrant};Go.prototype.getNode=function(){return this._node};Go.prototype.toString=function(){var e=Math.atan2(this._dy,this._dx),t=this.getClass().getName(),n=t.lastIndexOf("."),r=t.substring(n+1);return"  "+r+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label};Go.prototype.computeLabel=function(e){};Go.prototype.init=function(e,t){this._p0=e,this._p1=t,this._dx=t.x-e.x,this._dy=t.y-e.y,this._quadrant=Ar.quadrant(this._dx,this._dy),Dn.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")};Go.prototype.interfaces_=function(){return[pl]};Go.prototype.getClass=function(){return Go};var kP=function(e){function t(){var n=arguments[0],r=arguments[1];if(e.call(this,n),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=r,r)this.init(n.getCoordinate(0),n.getCoordinate(1));else{var i=n.getNumPoints()-1;this.init(n.getCoordinate(i),n.getCoordinate(i-1))}this.computeDirectedLabel()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getNextMin=function(){return this._nextMin},t.prototype.getDepth=function(n){return this._depth[n]},t.prototype.setVisited=function(n){this._isVisited=n},t.prototype.computeDirectedLabel=function(){this._label=new Sr(this._edge.getLabel()),this._isForward||this._label.flip()},t.prototype.getNext=function(){return this._next},t.prototype.setDepth=function(n,r){if(this._depth[n]!==-999&&this._depth[n]!==r)throw new Qh("assigned depths do not match",this.getCoordinate());this._depth[n]=r},t.prototype.isInteriorAreaEdge=function(){for(var n=this,r=!0,i=0;i<2;i++)n._label.isArea(i)&&n._label.getLocation(i,Rt.LEFT)===st.INTERIOR&&n._label.getLocation(i,Rt.RIGHT)===st.INTERIOR||(r=!1);return r},t.prototype.setNextMin=function(n){this._nextMin=n},t.prototype.print=function(n){e.prototype.print.call(this,n),n.print(" "+this._depth[Rt.LEFT]+"/"+this._depth[Rt.RIGHT]),n.print(" ("+this.getDepthDelta()+")"),this._isInResult&&n.print(" inResult")},t.prototype.setMinEdgeRing=function(n){this._minEdgeRing=n},t.prototype.isLineEdge=function(){var n=this._label.isLine(0)||this._label.isLine(1),r=!this._label.isArea(0)||this._label.allPositionsEqual(0,st.EXTERIOR),i=!this._label.isArea(1)||this._label.allPositionsEqual(1,st.EXTERIOR);return n&&r&&i},t.prototype.setEdgeRing=function(n){this._edgeRing=n},t.prototype.getMinEdgeRing=function(){return this._minEdgeRing},t.prototype.getDepthDelta=function(){var n=this._edge.getDepthDelta();return this._isForward||(n=-n),n},t.prototype.setInResult=function(n){this._isInResult=n},t.prototype.getSym=function(){return this._sym},t.prototype.isForward=function(){return this._isForward},t.prototype.getEdge=function(){return this._edge},t.prototype.printEdge=function(n){this.print(n),n.print(" "),this._isForward?this._edge.print(n):this._edge.printReverse(n)},t.prototype.setSym=function(n){this._sym=n},t.prototype.setVisitedEdge=function(n){this.setVisited(n),this._sym.setVisited(n)},t.prototype.setEdgeDepths=function(n,r){var i=this.getEdge().getDepthDelta();this._isForward||(i=-i);var o=1;n===Rt.LEFT&&(o=-1);var u=Rt.opposite(n),l=i*o,p=r+l;this.setDepth(n,r),this.setDepth(u,p)},t.prototype.getEdgeRing=function(){return this._edgeRing},t.prototype.isInResult=function(){return this._isInResult},t.prototype.setNext=function(n){this._next=n},t.prototype.isVisited=function(){return this._isVisited},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.depthFactor=function(n,r){return n===st.EXTERIOR&&r===st.INTERIOR?1:n===st.INTERIOR&&r===st.EXTERIOR?-1:0},t}(Go),B_=function(){};B_.prototype.createNode=function(e){return new KS(e,null)};B_.prototype.interfaces_=function(){return[]};B_.prototype.getClass=function(){return B_};var ci=function(){if(this._edges=new qt,this._nodes=null,this._edgeEndList=new qt,arguments.length===0)this._nodes=new Wu(new B_);else if(arguments.length===1){var e=arguments[0];this._nodes=new Wu(e)}};ci.prototype.printEdges=function(e){var t=this;e.println("Edges:");for(var n=0;n<this._edges.size();n++){e.println("edge "+n+":");var r=t._edges.get(n);r.print(e),r.eiList.print(e)}};ci.prototype.find=function(e){return this._nodes.find(e)};ci.prototype.addNode=function(){if(arguments[0]instanceof KS){var e=arguments[0];return this._nodes.addNode(e)}else if(arguments[0]instanceof nt){var t=arguments[0];return this._nodes.addNode(t)}};ci.prototype.getNodeIterator=function(){return this._nodes.iterator()};ci.prototype.linkResultDirectedEdges=function(){for(var e=this._nodes.iterator();e.hasNext();){var t=e.next();t.getEdges().linkResultDirectedEdges()}};ci.prototype.debugPrintln=function(e){Mo.out.println(e)};ci.prototype.isBoundaryNode=function(e,t){var n=this._nodes.find(t);if(n===null)return!1;var r=n.getLabel();return r!==null&&r.getLocation(e)===st.BOUNDARY};ci.prototype.linkAllDirectedEdges=function(){for(var e=this._nodes.iterator();e.hasNext();){var t=e.next();t.getEdges().linkAllDirectedEdges()}};ci.prototype.matchInSameDirection=function(e,t,n,r){return e.equals(n)?Yt.computeOrientation(e,t,r)===Yt.COLLINEAR&&Ar.quadrant(e,t)===Ar.quadrant(n,r):!1};ci.prototype.getEdgeEnds=function(){return this._edgeEndList};ci.prototype.debugPrint=function(e){Mo.out.print(e)};ci.prototype.getEdgeIterator=function(){return this._edges.iterator()};ci.prototype.findEdgeInSameDirection=function(e,t){for(var n=this,r=0;r<this._edges.size();r++){var i=n._edges.get(r),o=i.getCoordinates();if(n.matchInSameDirection(e,t,o[0],o[1])||n.matchInSameDirection(e,t,o[o.length-1],o[o.length-2]))return i}return null};ci.prototype.insertEdge=function(e){this._edges.add(e)};ci.prototype.findEdgeEnd=function(e){for(var t=this.getEdgeEnds().iterator();t.hasNext();){var n=t.next();if(n.getEdge()===e)return n}return null};ci.prototype.addEdges=function(e){for(var t=this,n=e.iterator();n.hasNext();){var r=n.next();t._edges.add(r);var i=new kP(r,!0),o=new kP(r,!1);i.setSym(o),o.setSym(i),t.add(i),t.add(o)}};ci.prototype.add=function(e){this._nodes.add(e),this._edgeEndList.add(e)};ci.prototype.getNodes=function(){return this._nodes.values()};ci.prototype.findEdge=function(e,t){for(var n=this,r=0;r<this._edges.size();r++){var i=n._edges.get(r),o=i.getCoordinates();if(e.equals(o[0])&&t.equals(o[1]))return i}return null};ci.prototype.interfaces_=function(){return[]};ci.prototype.getClass=function(){return ci};ci.linkResultDirectedEdges=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();n.getEdges().linkResultDirectedEdges()}};var sa=function(){this._geometryFactory=null,this._shellList=new qt;var e=arguments[0];this._geometryFactory=e};sa.prototype.sortShellsAndHoles=function(e,t,n){for(var r=e.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):t.add(i)}};sa.prototype.computePolygons=function(e){for(var t=this,n=new qt,r=e.iterator();r.hasNext();){var i=r.next(),o=i.toPolygon(t._geometryFactory);n.add(o)}return n};sa.prototype.placeFreeHoles=function(e,t){for(var n=this,r=t.iterator();r.hasNext();){var i=r.next();if(i.getShell()===null){var o=n.findEdgeRingContaining(i,e);if(o===null)throw new Qh("unable to assign hole to a shell",i.getCoordinate(0));i.setShell(o)}}};sa.prototype.buildMinimalEdgeRings=function(e,t,n){for(var r=this,i=new qt,o=e.iterator();o.hasNext();){var u=o.next();if(u.getMaxNodeDegree()>2){u.linkDirectedEdgesForMinimalEdgeRings();var l=u.buildMinimalRings(),p=r.findShell(l);p!==null?(r.placePolygonHoles(p,l),t.add(p)):n.addAll(l)}else i.add(u)}return i};sa.prototype.containsPoint=function(e){for(var t=this._shellList.iterator();t.hasNext();){var n=t.next();if(n.containsPoint(e))return!0}return!1};sa.prototype.buildMaximalEdgeRings=function(e){for(var t=this,n=new qt,r=e.iterator();r.hasNext();){var i=r.next();if(i.isInResult()&&i.getLabel().isArea()&&i.getEdgeRing()===null){var o=new fle(i,t._geometryFactory);n.add(o),o.setInResult()}}return n};sa.prototype.placePolygonHoles=function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(e)}};sa.prototype.getPolygons=function(){var e=this.computePolygons(this._shellList);return e};sa.prototype.findEdgeRingContaining=function(e,t){for(var n=e.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,u=null,l=t.iterator();l.hasNext();){var p=l.next(),g=p.getLinearRing(),x=g.getEnvelopeInternal();o!==null&&(u=o.getLinearRing().getEnvelopeInternal());var y=!1;x.contains(r)&&Yt.isPointInRing(i,g.getCoordinates())&&(y=!0),y&&(o===null||u.contains(x))&&(o=p)}return o};sa.prototype.findShell=function(e){for(var t=0,n=null,r=e.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,t++)}return Dn.isTrue(t<=1,"found two shells in MinimalEdgeRing list"),n};sa.prototype.add=function(){if(arguments.length===1){var e=arguments[0];this.add(e.getEdgeEnds(),e.getNodes())}else if(arguments.length===2){var t=arguments[0],n=arguments[1];ci.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(t),i=new qt,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}};sa.prototype.interfaces_=function(){return[]};sa.prototype.getClass=function(){return sa};var j_=function(){};j_.prototype.getBounds=function(){};j_.prototype.interfaces_=function(){return[]};j_.prototype.getClass=function(){return j_};var Zl=function(){this._bounds=null,this._item=null;var e=arguments[0],t=arguments[1];this._bounds=e,this._item=t};Zl.prototype.getItem=function(){return this._item};Zl.prototype.getBounds=function(){return this._bounds};Zl.prototype.interfaces_=function(){return[j_,ml]};Zl.prototype.getClass=function(){return Zl};var ef=function(){this._size=null,this._items=null,this._size=0,this._items=new qt,this._items.add(null)};ef.prototype.poll=function(){if(this.isEmpty())return null;var e=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),e};ef.prototype.size=function(){return this._size};ef.prototype.reorder=function(e){for(var t=this,n=null,r=this._items.get(e);e*2<=this._size&&(n=e*2,n!==t._size&&t._items.get(n+1).compareTo(t._items.get(n))<0&&n++,t._items.get(n).compareTo(r)<0);e=n)t._items.set(e,t._items.get(n));this._items.set(e,r)};ef.prototype.clear=function(){this._size=0,this._items.clear()};ef.prototype.isEmpty=function(){return this._size===0};ef.prototype.add=function(e){var t=this;this._items.add(null),this._size+=1;var n=this._size;for(this._items.set(0,e);e.compareTo(this._items.get(Math.trunc(n/2)))<0;n/=2)t._items.set(n,t._items.get(Math.trunc(n/2)));this._items.set(n,e)};ef.prototype.interfaces_=function(){return[]};ef.prototype.getClass=function(){return ef};var fd=function(){};fd.prototype.visitItem=function(e){};fd.prototype.interfaces_=function(){return[]};fd.prototype.getClass=function(){return fd};var Tg=function(){};Tg.prototype.insert=function(e,t){};Tg.prototype.remove=function(e,t){};Tg.prototype.query=function(){};Tg.prototype.interfaces_=function(){return[]};Tg.prototype.getClass=function(){return Tg};var Zi=function(){if(this._childBoundables=new qt,this._bounds=null,this._level=null,arguments.length!==0&&arguments.length===1){var e=arguments[0];this._level=e}},T$={serialVersionUID:{configurable:!0}};Zi.prototype.getLevel=function(){return this._level};Zi.prototype.size=function(){return this._childBoundables.size()};Zi.prototype.getChildBoundables=function(){return this._childBoundables};Zi.prototype.addChildBoundable=function(e){Dn.isTrue(this._bounds===null),this._childBoundables.add(e)};Zi.prototype.isEmpty=function(){return this._childBoundables.isEmpty()};Zi.prototype.getBounds=function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds};Zi.prototype.interfaces_=function(){return[j_,ml]};Zi.prototype.getClass=function(){return Zi};T$.serialVersionUID.get=function(){return 6493722185909574e3};Object.defineProperties(Zi,T$);var Wl=function(){};Wl.reverseOrder=function(){return{compare:function(e,t){return t.compareTo(e)}}};Wl.min=function(e){return Wl.sort(e),e.get(0)};Wl.sort=function(e,t){var n=e.toArray();t?Rp.sort(n,t):Rp.sort(n);for(var r=e.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])};Wl.singletonList=function(e){var t=new qt;return t.add(e),t};var Di=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var e=arguments[0],t=arguments[1],n=arguments[2];this._boundable1=e,this._boundable2=t,this._itemDistance=n,this._distance=this.distance()};Di.prototype.expandToQueue=function(e,t){var n=Di.isComposite(this._boundable1),r=Di.isComposite(this._boundable2);if(n&&r)return Di.area(this._boundable1)>Di.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,e,t),null):(this.expand(this._boundable2,this._boundable1,e,t),null);if(n)return this.expand(this._boundable1,this._boundable2,e,t),null;if(r)return this.expand(this._boundable2,this._boundable1,e,t),null;throw new ri("neither boundable is composite")};Di.prototype.isLeaves=function(){return!(Di.isComposite(this._boundable1)||Di.isComposite(this._boundable2))};Di.prototype.compareTo=function(e){var t=e;return this._distance<t._distance?-1:this._distance>t._distance?1:0};Di.prototype.expand=function(e,t,n,r){for(var i=this,o=e.getChildBoundables(),u=o.iterator();u.hasNext();){var l=u.next(),p=new Di(l,t,i._itemDistance);p.getDistance()<r&&n.add(p)}};Di.prototype.getBoundable=function(e){return e===0?this._boundable1:this._boundable2};Di.prototype.getDistance=function(){return this._distance};Di.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())};Di.prototype.interfaces_=function(){return[pl]};Di.prototype.getClass=function(){return Di};Di.area=function(e){return e.getBounds().getArea()};Di.isComposite=function(e){return e instanceof Zi};var wo=function e(){if(this._root=null,this._built=!1,this._itemBoundables=new qt,this._nodeCapacity=null,arguments.length===0){var t=e.DEFAULT_NODE_CAPACITY;this._nodeCapacity=t}else if(arguments.length===1){var n=arguments[0];Dn.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},XS={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};wo.prototype.getNodeCapacity=function(){return this._nodeCapacity};wo.prototype.lastNode=function(e){return e.get(e.size()-1)};wo.prototype.size=function(){var e=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var t=arguments[0],n=0,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Zi?n+=e.size(i):i instanceof Zl&&(n+=1)}return n}};wo.prototype.removeItem=function(e,t){for(var n=null,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Zl&&i.getItem()===t&&(n=i)}return n!==null?(e.getChildBoundables().remove(n),!0):!1};wo.prototype.itemsTree=function(){var e=this;if(arguments.length===0){this.build();var t=this.itemsTree(this._root);return t===null?new qt:t}else if(arguments.length===1){for(var n=arguments[0],r=new qt,i=n.getChildBoundables().iterator();i.hasNext();){var o=i.next();if(o instanceof Zi){var u=e.itemsTree(o);u!==null&&r.add(u)}else o instanceof Zl?r.add(o.getItem()):Dn.shouldNeverReachHere()}return r.size()<=0?null:r}};wo.prototype.insert=function(e,t){Dn.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Zl(e,t))};wo.prototype.boundablesAtLevel=function(){var e=this;if(arguments.length===1){var t=arguments[0],n=new qt;return this.boundablesAtLevel(t,this._root,n),n}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];if(Dn.isTrue(r>-2),i.getLevel()===r)return o.add(i),null;for(var u=i.getChildBoundables().iterator();u.hasNext();){var l=u.next();l instanceof Zi?e.boundablesAtLevel(r,l,o):(Dn.isTrue(l instanceof Zl),r===-1&&o.add(l))}return null}};wo.prototype.query=function(){var e=this;if(arguments.length===1){var t=arguments[0];this.build();var n=new qt;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,n),n}else if(arguments.length===2){var r=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),r)&&this.query(r,this._root,i)}else if(arguments.length===3){if(Sn(arguments[2],fd)&&arguments[0]instanceof Object&&arguments[1]instanceof Zi)for(var o=arguments[0],u=arguments[1],l=arguments[2],p=u.getChildBoundables(),g=0;g<p.size();g++){var x=p.get(g);e.getIntersectsOp().intersects(x.getBounds(),o)&&(x instanceof Zi?e.query(o,x,l):x instanceof Zl?l.visitItem(x.getItem()):Dn.shouldNeverReachHere())}else if(Sn(arguments[2],$l)&&arguments[0]instanceof Object&&arguments[1]instanceof Zi)for(var y=arguments[0],_=arguments[1],T=arguments[2],A=_.getChildBoundables(),O=0;O<A.size();O++){var N=A.get(O);e.getIntersectsOp().intersects(N.getBounds(),y)&&(N instanceof Zi?e.query(y,N,T):N instanceof Zl?T.add(N.getItem()):Dn.shouldNeverReachHere())}}};wo.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0};wo.prototype.getRoot=function(){return this.build(),this._root};wo.prototype.remove=function(){var e=this;if(arguments.length===2){var t=arguments[0],n=arguments[1];return this.build(),this.getIntersectsOp().intersects(this._root.getBounds(),t)?this.remove(t,this._root,n):!1}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2],u=this.removeItem(i,o);if(u)return!0;for(var l=null,p=i.getChildBoundables().iterator();p.hasNext();){var g=p.next();if(e.getIntersectsOp().intersects(g.getBounds(),r)&&g instanceof Zi&&(u=e.remove(r,g,o),u)){l=g;break}}return l!==null&&l.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(l),u}};wo.prototype.createHigherLevels=function(e,t){Dn.isTrue(!e.isEmpty());var n=this.createParentBoundables(e,t+1);return n.size()===1?n.get(0):this.createHigherLevels(n,t+1)};wo.prototype.depth=function(){var e=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var t=arguments[0],n=0,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof Zi){var o=e.depth(i);o>n&&(n=o)}}return n+1}};wo.prototype.createParentBoundables=function(e,t){var n=this;Dn.isTrue(!e.isEmpty());var r=new qt;r.add(this.createNode(t));var i=new qt(e);Wl.sort(i,this.getComparator());for(var o=i.iterator();o.hasNext();){var u=o.next();n.lastNode(r).getChildBoundables().size()===n.getNodeCapacity()&&r.add(n.createNode(t)),n.lastNode(r).addChildBoundable(u)}return r};wo.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()};wo.prototype.interfaces_=function(){return[ml]};wo.prototype.getClass=function(){return wo};wo.compareDoubles=function(e,t){return e>t?1:e<t?-1:0};XS.IntersectsOp.get=function(){return dle};XS.serialVersionUID.get=function(){return-3886435814360241e3};XS.DEFAULT_NODE_CAPACITY.get=function(){return 10};Object.defineProperties(wo,XS);var dle=function(){},$_=function(){};$_.prototype.distance=function(e,t){};$_.prototype.interfaces_=function(){return[]};$_.prototype.getClass=function(){return $_};var C$=function(e){function t(r){r=r||t.DEFAULT_NODE_CAPACITY,e.call(this,r)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return t.prototype.createParentBoundablesFromVerticalSlices=function(r,i){var o=this;Dn.isTrue(r.length>0);for(var u=new qt,l=0;l<r.length;l++)u.addAll(o.createParentBoundablesFromVerticalSlice(r[l],i));return u},t.prototype.createNode=function(r){return new O3(r)},t.prototype.size=function(){return arguments.length===0?e.prototype.size.call(this):e.prototype.size.apply(this,arguments)},t.prototype.insert=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];if(r.isNull())return null;e.prototype.insert.call(this,r,i)}else return e.prototype.insert.apply(this,arguments)},t.prototype.getIntersectsOp=function(){return t.intersectsOp},t.prototype.verticalSlices=function(r,i){for(var o=Math.trunc(Math.ceil(r.size()/i)),u=new Array(i).fill(null),l=r.iterator(),p=0;p<i;p++){u[p]=new qt;for(var g=0;l.hasNext()&&g<o;){var x=l.next();u[p].add(x),g++}}return u},t.prototype.query=function(){if(arguments.length===1){var r=arguments[0];return e.prototype.query.call(this,r)}else if(arguments.length===2){var i=arguments[0],o=arguments[1];e.prototype.query.call(this,i,o)}else if(arguments.length===3){if(Sn(arguments[2],fd)&&arguments[0]instanceof Object&&arguments[1]instanceof Zi){var u=arguments[0],l=arguments[1],p=arguments[2];e.prototype.query.call(this,u,l,p)}else if(Sn(arguments[2],$l)&&arguments[0]instanceof Object&&arguments[1]instanceof Zi){var g=arguments[0],x=arguments[1],y=arguments[2];e.prototype.query.call(this,g,x,y)}}},t.prototype.getComparator=function(){return t.yComparator},t.prototype.createParentBoundablesFromVerticalSlice=function(r,i){return e.prototype.createParentBoundables.call(this,r,i)},t.prototype.remove=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];return e.prototype.remove.call(this,r,i)}else return e.prototype.remove.apply(this,arguments)},t.prototype.depth=function(){return arguments.length===0?e.prototype.depth.call(this):e.prototype.depth.apply(this,arguments)},t.prototype.createParentBoundables=function(r,i){Dn.isTrue(!r.isEmpty());var o=Math.trunc(Math.ceil(r.size()/this.getNodeCapacity())),u=new qt(r);Wl.sort(u,t.xComparator);var l=this.verticalSlices(u,Math.trunc(Math.ceil(Math.sqrt(o))));return this.createParentBoundablesFromVerticalSlices(l,i)},t.prototype.nearestNeighbour=function(){if(arguments.length===1){if(Sn(arguments[0],$_)){var r=arguments[0],i=new Di(this.getRoot(),this.getRoot(),r);return this.nearestNeighbour(i)}else if(arguments[0]instanceof Di){var o=arguments[0];return this.nearestNeighbour(o,On.POSITIVE_INFINITY)}}else if(arguments.length===2){if(arguments[0]instanceof t&&Sn(arguments[1],$_)){var u=arguments[0],l=arguments[1],p=new Di(this.getRoot(),u.getRoot(),l);return this.nearestNeighbour(p)}else if(arguments[0]instanceof Di&&typeof arguments[1]=="number"){var g=arguments[0],x=arguments[1],y=x,_=null,T=new ef;for(T.add(g);!T.isEmpty()&&y>0;){var A=T.poll(),O=A.getDistance();if(O>=y)break;A.isLeaves()?(y=O,_=A):A.expandToQueue(T,y)}return[_.getBoundable(0).getItem(),_.getBoundable(1).getItem()]}}else if(arguments.length===3){var N=arguments[0],k=arguments[1],R=arguments[2],z=new Zl(N,k),D=new Di(this.getRoot(),z,R);return this.nearestNeighbour(D)[0]}},t.prototype.interfaces_=function(){return[Tg,ml]},t.prototype.getClass=function(){return t},t.centreX=function(r){return t.avg(r.getMinX(),r.getMaxX())},t.avg=function(r,i){return(r+i)/2},t.centreY=function(r){return t.avg(r.getMinY(),r.getMaxY())},n.STRtreeNode.get=function(){return O3},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[O_]},compare:function(r,i){return e.compareDoubles(t.centreX(r.getBounds()),t.centreX(i.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[O_]},compare:function(r,i){return e.compareDoubles(t.centreY(r.getBounds()),t.centreY(i.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[e.IntersectsOp]},intersects:function(r,i){return r.intersects(i)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(t,n),t}(wo),O3=function(e){function t(){var n=arguments[0];e.call(this,n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.computeBounds=function(){for(var n=null,r=this.getChildBoundables().iterator();r.hasNext();){var i=r.next();n===null?n=new dn(i.getBounds()):n.expandToInclude(i.getBounds())}return n},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Zi),Rs=function(){};Rs.prototype.interfaces_=function(){return[]};Rs.prototype.getClass=function(){return Rs};Rs.relativeSign=function(e,t){return e<t?-1:e>t?1:0};Rs.compare=function(e,t,n){if(t.equals2D(n))return 0;var r=Rs.relativeSign(t.x,n.x),i=Rs.relativeSign(t.y,n.y);switch(e){case 0:return Rs.compareValue(r,i);case 1:return Rs.compareValue(i,r);case 2:return Rs.compareValue(i,-r);case 3:return Rs.compareValue(-r,i);case 4:return Rs.compareValue(-r,-i);case 5:return Rs.compareValue(-i,-r);case 6:return Rs.compareValue(-i,r);case 7:return Rs.compareValue(r,-i)}return Dn.shouldNeverReachHere("invalid octant value"),0};Rs.compareValue=function(e,t){return e<0?-1:e>0?1:t<0?-1:t>0?1:0};var dd=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3];this._segString=e,this.coord=new nt(t),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!t.equals2D(e.getCoordinate(n))};dd.prototype.getCoordinate=function(){return this.coord};dd.prototype.print=function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex)};dd.prototype.compareTo=function(e){var t=e;return this.segmentIndex<t.segmentIndex?-1:this.segmentIndex>t.segmentIndex?1:this.coord.equals2D(t.coord)?0:Rs.compare(this._segmentOctant,this.coord,t.coord)};dd.prototype.isEndPoint=function(e){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===e};dd.prototype.isInterior=function(){return this._isInterior};dd.prototype.interfaces_=function(){return[pl]};dd.prototype.getClass=function(){return dd};var fs=function(){this._nodeMap=new Vo,this._edge=null;var e=arguments[0];this._edge=e};fs.prototype.getSplitCoordinates=function(){var e=this,t=new Tx;this.addEndpoints();for(var n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();e.addEdgeCoordinates(r,i,t),r=i}return t.toCoordinateArray()};fs.prototype.addCollapsedNodes=function(){var e=this,t=new qt;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var n=t.iterator();n.hasNext();){var r=n.next().intValue();e.add(e._edge.getCoordinate(r),r)}};fs.prototype.print=function(e){e.println("Intersections:");for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}};fs.prototype.findCollapsesFromExistingVertices=function(e){for(var t=this,n=0;n<this._edge.size()-2;n++){var r=t._edge.getCoordinate(n),i=t._edge.getCoordinate(n+2);r.equals2D(i)&&e.add(new qu(n+1))}};fs.prototype.addEdgeCoordinates=function(e,t,n){var r=this,i=this._edge.getCoordinate(t.segmentIndex),o=t.isInterior()||!t.coord.equals2D(i);n.add(new nt(e.coord),!1);for(var u=e.segmentIndex+1;u<=t.segmentIndex;u++)n.add(r._edge.getCoordinate(u));o&&n.add(new nt(t.coord))};fs.prototype.iterator=function(){return this._nodeMap.values().iterator()};fs.prototype.addSplitEdges=function(e){var t=this;this.addEndpoints(),this.addCollapsedNodes();for(var n=this.iterator(),r=n.next();n.hasNext();){var i=n.next(),o=t.createSplitEdge(r,i);e.add(o),r=i}};fs.prototype.findCollapseIndex=function(e,t,n){if(!e.coord.equals2D(t.coord))return!1;var r=t.segmentIndex-e.segmentIndex;return t.isInterior()||r--,r===1?(n[0]=e.segmentIndex+1,!0):!1};fs.prototype.findCollapsesFromInsertedNodes=function(e){for(var t=this,n=new Array(1).fill(null),r=this.iterator(),i=r.next();r.hasNext();){var o=r.next(),u=t.findCollapseIndex(i,o,n);u&&e.add(new qu(n[0])),i=o}};fs.prototype.getEdge=function(){return this._edge};fs.prototype.addEndpoints=function(){var e=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(e),e)};fs.prototype.createSplitEdge=function(e,t){var n=this,r=t.segmentIndex-e.segmentIndex+2,i=this._edge.getCoordinate(t.segmentIndex),o=t.isInterior()||!t.coord.equals2D(i);o||r--;var u=new Array(r).fill(null),l=0;u[l++]=new nt(e.coord);for(var p=e.segmentIndex+1;p<=t.segmentIndex;p++)u[l++]=n._edge.getCoordinate(p);return o&&(u[l]=new nt(t.coord)),new Ri(u,this._edge.getData())};fs.prototype.add=function(e,t){var n=new dd(this._edge,e,t,this._edge.getSegmentOctant(t)),r=this._nodeMap.get(n);return r!==null?(Dn.isTrue(r.coord.equals2D(e),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)};fs.prototype.checkSplitEdgesCorrectness=function(e){var t=this._edge.getCoordinates(),n=e.get(0),r=n.getCoordinate(0);if(!r.equals2D(t[0]))throw new Yh("bad split edge start point at "+r);var i=e.get(e.size()-1),o=i.getCoordinates(),u=o[o.length-1];if(!u.equals2D(t[t.length-1]))throw new Yh("bad split edge end point at "+u)};fs.prototype.interfaces_=function(){return[]};fs.prototype.getClass=function(){return fs};var Cg=function(){};Cg.prototype.interfaces_=function(){return[]};Cg.prototype.getClass=function(){return Cg};Cg.octant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],t=arguments[1];if(e===0&&t===0)throw new ri("Cannot compute the octant for point ( "+e+", "+t+" )");var n=Math.abs(e),r=Math.abs(t);return e>=0?t>=0?n>=r?0:1:n>=r?7:6:t>=0?n>=r?3:2:n>=r?4:5}else if(arguments[0]instanceof nt&&arguments[1]instanceof nt){var i=arguments[0],o=arguments[1],u=o.x-i.x,l=o.y-i.y;if(u===0&&l===0)throw new ri("Cannot compute the octant for two identical points "+i);return Cg.octant(u,l)}};var Gc=function(){};Gc.prototype.getCoordinates=function(){};Gc.prototype.size=function(){};Gc.prototype.getCoordinate=function(e){};Gc.prototype.isClosed=function(){};Gc.prototype.setData=function(e){};Gc.prototype.getData=function(){};Gc.prototype.interfaces_=function(){return[]};Gc.prototype.getClass=function(){return Gc};var z1=function(){};z1.prototype.addIntersection=function(e,t){};z1.prototype.interfaces_=function(){return[Gc]};z1.prototype.getClass=function(){return z1};var Ri=function(){this._nodeList=new fs(this),this._pts=null,this._data=null;var e=arguments[0],t=arguments[1];this._pts=e,this._data=t};Ri.prototype.getCoordinates=function(){return this._pts};Ri.prototype.size=function(){return this._pts.length};Ri.prototype.getCoordinate=function(e){return this._pts[e]};Ri.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])};Ri.prototype.getSegmentOctant=function(e){return e===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(e),this.getCoordinate(e+1))};Ri.prototype.setData=function(e){this._data=e};Ri.prototype.safeOctant=function(e,t){return e.equals2D(t)?0:Cg.octant(e,t)};Ri.prototype.getData=function(){return this._data};Ri.prototype.addIntersection=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];this.addIntersectionNode(e,t)}else if(arguments.length===4){var n=arguments[0],r=arguments[1],i=arguments[3],o=new nt(n.getIntersection(i));this.addIntersection(o,r)}};Ri.prototype.toString=function(){return Gl.toLineString(new Pi(this._pts))};Ri.prototype.getNodeList=function(){return this._nodeList};Ri.prototype.addIntersectionNode=function(e,t){var n=t,r=n+1;if(r<this._pts.length){var i=this._pts[r];e.equals2D(i)&&(n=r)}var o=this._nodeList.add(e,n);return o};Ri.prototype.addIntersections=function(e,t,n){for(var r=this,i=0;i<e.getIntersectionNum();i++)r.addIntersection(e,t,n,i)};Ri.prototype.interfaces_=function(){return[z1]};Ri.prototype.getClass=function(){return Ri};Ri.getNodedSubstrings=function(){if(arguments.length===1){var e=arguments[0],t=new qt;return Ri.getNodedSubstrings(e,t),t}else if(arguments.length===2)for(var n=arguments[0],r=arguments[1],i=n.iterator();i.hasNext();){var o=i.next();o.getNodeList().addSplitEdges(r)}};var pn=function(){if(this.p0=null,this.p1=null,arguments.length===0)this.p0=new nt,this.p1=new nt;else if(arguments.length===1){var e=arguments[0];this.p0=new nt(e.p0),this.p1=new nt(e.p1)}else if(arguments.length===2)this.p0=arguments[0],this.p1=arguments[1];else if(arguments.length===4){var t=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new nt(t,n),this.p1=new nt(r,i)}},I$={serialVersionUID:{configurable:!0}};pn.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)};pn.prototype.orientationIndex=function(){if(arguments[0]instanceof pn){var e=arguments[0],t=Yt.orientationIndex(this.p0,this.p1,e.p0),n=Yt.orientationIndex(this.p0,this.p1,e.p1);return t>=0&&n>=0||t<=0&&n<=0?Math.max(t,n):0}else if(arguments[0]instanceof nt){var r=arguments[0];return Yt.orientationIndex(this.p0,this.p1,r)}};pn.prototype.toGeometry=function(e){return e.createLineString([this.p0,this.p1])};pn.prototype.isVertical=function(){return this.p0.x===this.p1.x};pn.prototype.equals=function(e){if(!(e instanceof pn))return!1;var t=e;return this.p0.equals(t.p0)&&this.p1.equals(t.p1)};pn.prototype.intersection=function(e){var t=new am;return t.computeIntersection(this.p0,this.p1,e.p0,e.p1),t.hasIntersection()?t.getIntersection(0):null};pn.prototype.project=function(){if(arguments[0]instanceof nt){var e=arguments[0];if(e.equals(this.p0)||e.equals(this.p1))return new nt(e);var t=this.projectionFactor(e),n=new nt;return n.x=this.p0.x+t*(this.p1.x-this.p0.x),n.y=this.p0.y+t*(this.p1.y-this.p0.y),n}else if(arguments[0]instanceof pn){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1||i<=0&&o<=0)return null;var u=this.project(r.p0);i<0&&(u=this.p0),i>1&&(u=this.p1);var l=this.project(r.p1);return o<0&&(l=this.p0),o>1&&(l=this.p1),new pn(u,l)}};pn.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()};pn.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)};pn.prototype.getCoordinate=function(e){return e===0?this.p0:this.p1};pn.prototype.distancePerpendicular=function(e){return Yt.distancePointLinePerpendicular(e,this.p0,this.p1)};pn.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)};pn.prototype.midPoint=function(){return pn.midPoint(this.p0,this.p1)};pn.prototype.projectionFactor=function(e){if(e.equals(this.p0))return 0;if(e.equals(this.p1))return 1;var t=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=t*t+n*n;if(r<=0)return On.NaN;var i=((e.x-this.p0.x)*t+(e.y-this.p0.y)*n)/r;return i};pn.prototype.closestPoints=function(e){var t=this.intersection(e);if(t!==null)return[t,t];var n=new Array(2).fill(null),r=On.MAX_VALUE,i=null,o=this.closestPoint(e.p0);r=o.distance(e.p0),n[0]=o,n[1]=e.p0;var u=this.closestPoint(e.p1);i=u.distance(e.p1),i<r&&(r=i,n[0]=u,n[1]=e.p1);var l=e.closestPoint(this.p0);i=l.distance(this.p0),i<r&&(r=i,n[0]=this.p0,n[1]=l);var p=e.closestPoint(this.p1);return i=p.distance(this.p1),i<r&&(r=i,n[0]=this.p1,n[1]=p),n};pn.prototype.closestPoint=function(e){var t=this.projectionFactor(e);if(t>0&&t<1)return this.project(e);var n=this.p0.distance(e),r=this.p1.distance(e);return n<r?this.p0:this.p1};pn.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)};pn.prototype.getLength=function(){return this.p0.distance(this.p1)};pn.prototype.compareTo=function(e){var t=e,n=this.p0.compareTo(t.p0);return n!==0?n:this.p1.compareTo(t.p1)};pn.prototype.reverse=function(){var e=this.p0;this.p0=this.p1,this.p1=e};pn.prototype.equalsTopo=function(e){return this.p0.equals(e.p0)&&(this.p1.equals(e.p1)||this.p0.equals(e.p1))&&this.p1.equals(e.p0)};pn.prototype.lineIntersection=function(e){try{var t=jl.intersection(this.p0,this.p1,e.p0,e.p1);return t}catch(n){if(!(n instanceof lv))throw n}finally{}return null};pn.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)};pn.prototype.pointAlongOffset=function(e,t){var n=this.p0.x+e*(this.p1.x-this.p0.x),r=this.p0.y+e*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,u=Math.sqrt(i*i+o*o),l=0,p=0;if(t!==0){if(u<=0)throw new Error("Cannot compute offset from zero-length line segment");l=t*i/u,p=t*o/u}var g=n-p,x=r+l,y=new nt(g,x);return y};pn.prototype.setCoordinates=function(){if(arguments.length===1){var e=arguments[0];this.setCoordinates(e.p0,e.p1)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this.p0.x=t.x,this.p0.y=t.y,this.p1.x=n.x,this.p1.y=n.y}};pn.prototype.segmentFraction=function(e){var t=this.projectionFactor(e);return t<0?t=0:(t>1||On.isNaN(t))&&(t=1),t};pn.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"};pn.prototype.isHorizontal=function(){return this.p0.y===this.p1.y};pn.prototype.distance=function(){if(arguments[0]instanceof pn){var e=arguments[0];return Yt.distanceLineLine(this.p0,this.p1,e.p0,e.p1)}else if(arguments[0]instanceof nt){var t=arguments[0];return Yt.distancePointLine(t,this.p0,this.p1)}};pn.prototype.pointAlong=function(e){var t=new nt;return t.x=this.p0.x+e*(this.p1.x-this.p0.x),t.y=this.p0.y+e*(this.p1.y-this.p0.y),t};pn.prototype.hashCode=function(){var e=On.doubleToLongBits(this.p0.x);e^=On.doubleToLongBits(this.p0.y)*31;var t=Math.trunc(e)^Math.trunc(e>>32),n=On.doubleToLongBits(this.p1.x);n^=On.doubleToLongBits(this.p1.y)*31;var r=Math.trunc(n)^Math.trunc(n>>32);return t^r};pn.prototype.interfaces_=function(){return[pl,ml]};pn.prototype.getClass=function(){return pn};pn.midPoint=function(e,t){return new nt((e.x+t.x)/2,(e.y+t.y)/2)};I$.serialVersionUID.get=function(){return 0x2d2172135f411c00};Object.defineProperties(pn,I$);var F1=function(){this.tempEnv1=new dn,this.tempEnv2=new dn,this._overlapSeg1=new pn,this._overlapSeg2=new pn};F1.prototype.overlap=function(){if(arguments.length!==2&&arguments.length===4){var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3];e.getLineSegment(t,this._overlapSeg1),n.getLineSegment(r,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}};F1.prototype.interfaces_=function(){return[]};F1.prototype.getClass=function(){return F1};var aa=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3];this._pts=e,this._start=t,this._end=n,this._context=r};aa.prototype.getLineSegment=function(e,t){t.p0=this._pts[e],t.p1=this._pts[e+1]};aa.prototype.computeSelect=function(e,t,n,r){var i=this._pts[t],o=this._pts[n];if(r.tempEnv1.init(i,o),n-t===1)return r.select(this,t),null;if(!e.intersects(r.tempEnv1))return null;var u=Math.trunc((t+n)/2);t<u&&this.computeSelect(e,t,u,r),u<n&&this.computeSelect(e,u,n,r)};aa.prototype.getCoordinates=function(){for(var e=this,t=new Array(this._end-this._start+1).fill(null),n=0,r=this._start;r<=this._end;r++)t[n++]=e._pts[r];return t};aa.prototype.computeOverlaps=function(e,t){this.computeOverlapsInternal(this._start,this._end,e,e._start,e._end,t)};aa.prototype.setId=function(e){this._id=e};aa.prototype.select=function(e,t){this.computeSelect(e,this._start,this._end,t)};aa.prototype.getEnvelope=function(){if(this._env===null){var e=this._pts[this._start],t=this._pts[this._end];this._env=new dn(e,t)}return this._env};aa.prototype.getEndIndex=function(){return this._end};aa.prototype.getStartIndex=function(){return this._start};aa.prototype.getContext=function(){return this._context};aa.prototype.getId=function(){return this._id};aa.prototype.computeOverlapsInternal=function(e,t,n,r,i,o){var u=this._pts[e],l=this._pts[t],p=n._pts[r],g=n._pts[i];if(t-e===1&&i-r===1)return o.overlap(this,e,n,r),null;if(o.tempEnv1.init(u,l),o.tempEnv2.init(p,g),!o.tempEnv1.intersects(o.tempEnv2))return null;var x=Math.trunc((e+t)/2),y=Math.trunc((r+i)/2);e<x&&(r<y&&this.computeOverlapsInternal(e,x,n,r,y,o),y<i&&this.computeOverlapsInternal(e,x,n,y,i,o)),x<t&&(r<y&&this.computeOverlapsInternal(x,t,n,r,y,o),y<i&&this.computeOverlapsInternal(x,t,n,y,i,o))};aa.prototype.interfaces_=function(){return[]};aa.prototype.getClass=function(){return aa};var ju=function(){};ju.prototype.interfaces_=function(){return[]};ju.prototype.getClass=function(){return ju};ju.getChainStartIndices=function(e){var t=0,n=new qt;n.add(new qu(t));do{var r=ju.findChainEnd(e,t);n.add(new qu(r)),t=r}while(t<e.length-1);var i=ju.toIntArray(n);return i};ju.findChainEnd=function(e,t){for(var n=t;n<e.length-1&&e[n].equals2D(e[n+1]);)n++;if(n>=e.length-1)return e.length-1;for(var r=Ar.quadrant(e[n],e[n+1]),i=t+1;i<e.length;){if(!e[i-1].equals2D(e[i])){var o=Ar.quadrant(e[i-1],e[i]);if(o!==r)break}i++}return i-1};ju.getChains=function(){if(arguments.length===1){var e=arguments[0];return ju.getChains(e,null)}else if(arguments.length===2){for(var t=arguments[0],n=arguments[1],r=new qt,i=ju.getChainStartIndices(t),o=0;o<i.length-1;o++){var u=new aa(t,i[o],i[o+1],n);r.add(u)}return r}};ju.toIntArray=function(e){for(var t=new Array(e.size()).fill(null),n=0;n<t.length;n++)t[n]=e.get(n).intValue();return t};var Vp=function(){};Vp.prototype.computeNodes=function(e){};Vp.prototype.getNodedSubstrings=function(){};Vp.prototype.interfaces_=function(){return[]};Vp.prototype.getClass=function(){return Vp};var B1=function(){if(this._segInt=null,arguments.length!==0&&arguments.length===1){var e=arguments[0];this.setSegmentIntersector(e)}};B1.prototype.setSegmentIntersector=function(e){this._segInt=e};B1.prototype.interfaces_=function(){return[Vp]};B1.prototype.getClass=function(){return B1};var uO=function(e){function t(r){r?e.call(this,r):e.call(this),this._monoChains=new qt,this._index=new C$,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={SegmentOverlapAction:{configurable:!0}};return t.prototype.getMonotoneChains=function(){return this._monoChains},t.prototype.getNodedSubstrings=function(){return Ri.getNodedSubstrings(this._nodedSegStrings)},t.prototype.getIndex=function(){return this._index},t.prototype.add=function(r){for(var i=this,o=ju.getChains(r.getCoordinates(),r),u=o.iterator();u.hasNext();){var l=u.next();l.setId(i._idCounter++),i._index.insert(l.getEnvelope(),l),i._monoChains.add(l)}},t.prototype.computeNodes=function(r){var i=this;this._nodedSegStrings=r;for(var o=r.iterator();o.hasNext();)i.add(o.next());this.intersectChains()},t.prototype.intersectChains=function(){for(var r=this,i=new k3(this._segInt),o=this._monoChains.iterator();o.hasNext();)for(var u=o.next(),l=r._index.query(u.getEnvelope()),p=l.iterator();p.hasNext();){var g=p.next();if(g.getId()>u.getId()&&(u.computeOverlaps(g,i),r._nOverlaps++),r._segInt.isDone())return null}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},n.SegmentOverlapAction.get=function(){return k3},Object.defineProperties(t,n),t}(B1),k3=function(e){function t(){e.call(this),this._si=null;var n=arguments[0];this._si=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.overlap=function(){if(arguments.length===4){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3],u=n.getContext(),l=i.getContext();this._si.processIntersections(u,r,l,o)}else return e.prototype.overlap.apply(this,arguments)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(F1),pr=function e(){if(this._quadrantSegments=e.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=e.CAP_ROUND,this._joinStyle=e.JOIN_ROUND,this._mitreLimit=e.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=e.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.setQuadrantSegments(t)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(arguments.length===4){var i=arguments[0],o=arguments[1],u=arguments[2],l=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(u),this.setMitreLimit(l)}}},uf={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};pr.prototype.getEndCapStyle=function(){return this._endCapStyle};pr.prototype.isSingleSided=function(){return this._isSingleSided};pr.prototype.setQuadrantSegments=function(e){this._quadrantSegments=e,this._quadrantSegments===0&&(this._joinStyle=pr.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=pr.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),e<=0&&(this._quadrantSegments=1),this._joinStyle!==pr.JOIN_ROUND&&(this._quadrantSegments=pr.DEFAULT_QUADRANT_SEGMENTS)};pr.prototype.getJoinStyle=function(){return this._joinStyle};pr.prototype.setJoinStyle=function(e){this._joinStyle=e};pr.prototype.setSimplifyFactor=function(e){this._simplifyFactor=e<0?0:e};pr.prototype.getSimplifyFactor=function(){return this._simplifyFactor};pr.prototype.getQuadrantSegments=function(){return this._quadrantSegments};pr.prototype.setEndCapStyle=function(e){this._endCapStyle=e};pr.prototype.getMitreLimit=function(){return this._mitreLimit};pr.prototype.setMitreLimit=function(e){this._mitreLimit=e};pr.prototype.setSingleSided=function(e){this._isSingleSided=e};pr.prototype.interfaces_=function(){return[]};pr.prototype.getClass=function(){return pr};pr.bufferDistanceError=function(e){var t=Math.PI/2/e;return 1-Math.cos(t/2)};uf.CAP_ROUND.get=function(){return 1};uf.CAP_FLAT.get=function(){return 2};uf.CAP_SQUARE.get=function(){return 3};uf.JOIN_ROUND.get=function(){return 1};uf.JOIN_MITRE.get=function(){return 2};uf.JOIN_BEVEL.get=function(){return 3};uf.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8};uf.DEFAULT_MITRE_LIMIT.get=function(){return 5};uf.DEFAULT_SIMPLIFY_FACTOR.get=function(){return .01};Object.defineProperties(pr,uf);var xi=function(e){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Yt.COUNTERCLOCKWISE,this._inputLine=e||null},Px={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};xi.prototype.isDeletable=function(e,t,n,r){var i=this._inputLine[e],o=this._inputLine[t],u=this._inputLine[n];return!this.isConcave(i,o,u)||!this.isShallow(i,o,u,r)?!1:this.isShallowSampled(i,o,e,n,r)};xi.prototype.deleteShallowConcavities=function(){for(var e=this,t=1,n=this.findNextNonDeletedIndex(t),r=this.findNextNonDeletedIndex(n),i=!1;r<this._inputLine.length;){var o=!1;e.isDeletable(t,n,r,e._distanceTol)&&(e._isDeleted[n]=xi.DELETE,o=!0,i=!0),o?t=r:t=n,n=e.findNextNonDeletedIndex(t),r=e.findNextNonDeletedIndex(n)}return i};xi.prototype.isShallowConcavity=function(e,t,n,r){var i=Yt.computeOrientation(e,t,n),o=i===this._angleOrientation;if(!o)return!1;var u=Yt.distancePointLine(t,e,n);return u<r};xi.prototype.isShallowSampled=function(e,t,n,r,i){var o=this,u=Math.trunc((r-n)/xi.NUM_PTS_TO_CHECK);u<=0&&(u=1);for(var l=n;l<r;l+=u)if(!o.isShallow(e,t,o._inputLine[l],i))return!1;return!0};xi.prototype.isConcave=function(e,t,n){var r=Yt.computeOrientation(e,t,n),i=r===this._angleOrientation;return i};xi.prototype.simplify=function(e){var t=this;this._distanceTol=Math.abs(e),e<0&&(this._angleOrientation=Yt.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var n=!1;do n=t.deleteShallowConcavities();while(n);return this.collapseLine()};xi.prototype.findNextNonDeletedIndex=function(e){for(var t=e+1;t<this._inputLine.length&&this._isDeleted[t]===xi.DELETE;)t++;return t};xi.prototype.isShallow=function(e,t,n,r){var i=Yt.distancePointLine(t,e,n);return i<r};xi.prototype.collapseLine=function(){for(var e=this,t=new Tx,n=0;n<this._inputLine.length;n++)e._isDeleted[n]!==xi.DELETE&&t.add(e._inputLine[n]);return t.toCoordinateArray()};xi.prototype.interfaces_=function(){return[]};xi.prototype.getClass=function(){return xi};xi.simplify=function(e,t){var n=new xi(e);return n.simplify(t)};Px.INIT.get=function(){return 0};Px.DELETE.get=function(){return 1};Px.KEEP.get=function(){return 1};Px.NUM_PTS_TO_CHECK.get=function(){return 10};Object.defineProperties(xi,Px);var Na=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new qt},P$={COORDINATE_ARRAY_TYPE:{configurable:!0}};Na.prototype.getCoordinates=function(){var e=this._ptList.toArray(Na.COORDINATE_ARRAY_TYPE);return e};Na.prototype.setPrecisionModel=function(e){this._precisionModel=e};Na.prototype.addPt=function(e){var t=new nt(e);if(this._precisionModel.makePrecise(t),this.isRedundant(t))return null;this._ptList.add(t)};Na.prototype.revere=function(){};Na.prototype.addPts=function(e,t){var n=this;if(t)for(var r=0;r<e.length;r++)n.addPt(e[r]);else for(var i=e.length-1;i>=0;i--)n.addPt(e[i])};Na.prototype.isRedundant=function(e){if(this._ptList.size()<1)return!1;var t=this._ptList.get(this._ptList.size()-1),n=e.distance(t);return n<this._minimimVertexDistance};Na.prototype.toString=function(){var e=new Wn,t=e.createLineString(this.getCoordinates());return t.toString()};Na.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var e=new nt(this._ptList.get(0)),t=this._ptList.get(this._ptList.size()-1);if(e.equals(t))return null;this._ptList.add(e)};Na.prototype.setMinimumVertexDistance=function(e){this._minimimVertexDistance=e};Na.prototype.interfaces_=function(){return[]};Na.prototype.getClass=function(){return Na};P$.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)};Object.defineProperties(Na,P$);var er=function(){},Wg={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};er.prototype.interfaces_=function(){return[]};er.prototype.getClass=function(){return er};er.toDegrees=function(e){return e*180/Math.PI};er.normalize=function(e){for(;e>Math.PI;)e-=er.PI_TIMES_2;for(;e<=-Math.PI;)e+=er.PI_TIMES_2;return e};er.angle=function(){if(arguments.length===1){var e=arguments[0];return Math.atan2(e.y,e.x)}else if(arguments.length===2){var t=arguments[0],n=arguments[1],r=n.x-t.x,i=n.y-t.y;return Math.atan2(i,r)}};er.isAcute=function(e,t,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-t.x,u=n.y-t.y,l=r*o+i*u;return l>0};er.isObtuse=function(e,t,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-t.x,u=n.y-t.y,l=r*o+i*u;return l<0};er.interiorAngle=function(e,t,n){var r=er.angle(t,e),i=er.angle(t,n);return Math.abs(i-r)};er.normalizePositive=function(e){if(e<0){for(;e<0;)e+=er.PI_TIMES_2;e>=er.PI_TIMES_2&&(e=0)}else{for(;e>=er.PI_TIMES_2;)e-=er.PI_TIMES_2;e<0&&(e=0)}return e};er.angleBetween=function(e,t,n){var r=er.angle(t,e),i=er.angle(t,n);return er.diff(r,i)};er.diff=function(e,t){var n=null;return e<t?n=t-e:n=e-t,n>Math.PI&&(n=2*Math.PI-n),n};er.toRadians=function(e){return e*Math.PI/180};er.getTurn=function(e,t){var n=Math.sin(t-e);return n>0?er.COUNTERCLOCKWISE:n<0?er.CLOCKWISE:er.NONE};er.angleBetweenOriented=function(e,t,n){var r=er.angle(t,e),i=er.angle(t,n),o=i-r;return o<=-Math.PI?o+er.PI_TIMES_2:o>Math.PI?o-er.PI_TIMES_2:o};Wg.PI_TIMES_2.get=function(){return 2*Math.PI};Wg.PI_OVER_2.get=function(){return Math.PI/2};Wg.PI_OVER_4.get=function(){return Math.PI/4};Wg.COUNTERCLOCKWISE.get=function(){return Yt.COUNTERCLOCKWISE};Wg.CLOCKWISE.get=function(){return Yt.CLOCKWISE};Wg.NONE.get=function(){return Yt.COLLINEAR};Object.defineProperties(er,Wg);var Wr=function e(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new pn,this._seg1=new pn,this._offset0=new pn,this._offset1=new pn,this._side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=t,this._bufParams=n,this._li=new am,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===pr.JOIN_ROUND&&(this._closingSegLengthFactor=e.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},Lx={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Wr.prototype.addNextSegment=function(e,t){if(this._s0=this._s1,this._s1=this._s2,this._s2=e,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=Yt.computeOrientation(this._s0,this._s1,this._s2),r=n===Yt.CLOCKWISE&&this._side===Rt.LEFT||n===Yt.COUNTERCLOCKWISE&&this._side===Rt.RIGHT;n===0?this.addCollinear(t):r?this.addOutsideTurn(n,t):this.addInsideTurn(n,t)};Wr.prototype.addLineEndCap=function(e,t){var n=new pn(e,t),r=new pn;this.computeOffsetSegment(n,Rt.LEFT,this._distance,r);var i=new pn;this.computeOffsetSegment(n,Rt.RIGHT,this._distance,i);var o=t.x-e.x,u=t.y-e.y,l=Math.atan2(u,o);switch(this._bufParams.getEndCapStyle()){case pr.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(t,l+Math.PI/2,l-Math.PI/2,Yt.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case pr.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case pr.CAP_SQUARE:var p=new nt;p.x=Math.abs(this._distance)*Math.cos(l),p.y=Math.abs(this._distance)*Math.sin(l);var g=new nt(r.p1.x+p.x,r.p1.y+p.y),x=new nt(i.p1.x+p.x,i.p1.y+p.y);this._segList.addPt(g),this._segList.addPt(x);break}};Wr.prototype.getCoordinates=function(){var e=this._segList.getCoordinates();return e};Wr.prototype.addMitreJoin=function(e,t,n,r){var i=!0,o=null;try{o=jl.intersection(t.p0,t.p1,n.p0,n.p1);var u=r<=0?1:o.distance(e)/Math.abs(r);u>this._bufParams.getMitreLimit()&&(i=!1)}catch(l){if(l instanceof lv)o=new nt(0,0),i=!1;else throw l}finally{}i?this._segList.addPt(o):this.addLimitedMitreJoin(t,n,r,this._bufParams.getMitreLimit())};Wr.prototype.addFilletCorner=function(e,t,n,r,i){var o=t.x-e.x,u=t.y-e.y,l=Math.atan2(u,o),p=n.x-e.x,g=n.y-e.y,x=Math.atan2(g,p);r===Yt.CLOCKWISE?l<=x&&(l+=2*Math.PI):l>=x&&(l-=2*Math.PI),this._segList.addPt(t),this.addFilletArc(e,l,x,r,i),this._segList.addPt(n)};Wr.prototype.addOutsideTurn=function(e,t){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Wr.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===pr.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===pr.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(t&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,e,this._distance),this._segList.addPt(this._offset1.p0))};Wr.prototype.createSquare=function(e){this._segList.addPt(new nt(e.x+this._distance,e.y+this._distance)),this._segList.addPt(new nt(e.x+this._distance,e.y-this._distance)),this._segList.addPt(new nt(e.x-this._distance,e.y-this._distance)),this._segList.addPt(new nt(e.x-this._distance,e.y+this._distance)),this._segList.closeRing()};Wr.prototype.addSegments=function(e,t){this._segList.addPts(e,t)};Wr.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)};Wr.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)};Wr.prototype.initSideSegments=function(e,t,n){this._s1=e,this._s2=t,this._side=n,this._seg1.setCoordinates(e,t),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)};Wr.prototype.addLimitedMitreJoin=function(e,t,n,r){var i=this._seg0.p1,o=er.angle(i,this._seg0.p0),u=er.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1),l=u/2,p=er.normalize(o+l),g=er.normalize(p+Math.PI),x=r*n,y=x*Math.abs(Math.sin(l)),_=n-y,T=i.x+x*Math.cos(g),A=i.y+x*Math.sin(g),O=new nt(T,A),N=new pn(i,O),k=N.pointAlongOffset(1,_),R=N.pointAlongOffset(1,-_);this._side===Rt.LEFT?(this._segList.addPt(k),this._segList.addPt(R)):(this._segList.addPt(R),this._segList.addPt(k))};Wr.prototype.computeOffsetSegment=function(e,t,n,r){var i=t===Rt.LEFT?1:-1,o=e.p1.x-e.p0.x,u=e.p1.y-e.p0.y,l=Math.sqrt(o*o+u*u),p=i*n*o/l,g=i*n*u/l;r.p0.x=e.p0.x-g,r.p0.y=e.p0.y+p,r.p1.x=e.p1.x-g,r.p1.y=e.p1.y+p};Wr.prototype.addFilletArc=function(e,t,n,r,i){var o=this,u=r===Yt.CLOCKWISE?-1:1,l=Math.abs(t-n),p=Math.trunc(l/this._filletAngleQuantum+.5);if(p<1)return null;for(var g=0,x=l/p,y=g,_=new nt;y<l;){var T=t+u*y;_.x=e.x+i*Math.cos(T),_.y=e.y+i*Math.sin(T),o._segList.addPt(_),y+=x}};Wr.prototype.addInsideTurn=function(e,t){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Wr.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new nt((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new nt((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}};Wr.prototype.createCircle=function(e){var t=new nt(e.x+this._distance,e.y);this._segList.addPt(t),this.addFilletArc(e,0,2*Math.PI,-1,this._distance),this._segList.closeRing()};Wr.prototype.addBevelJoin=function(e,t){this._segList.addPt(e.p1),this._segList.addPt(t.p0)};Wr.prototype.init=function(e){this._distance=e,this._maxCurveSegmentError=e*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Na,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(e*Wr.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)};Wr.prototype.addCollinear=function(e){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2);var t=this._li.getIntersectionNum();t>=2&&(this._bufParams.getJoinStyle()===pr.JOIN_BEVEL||this._bufParams.getJoinStyle()===pr.JOIN_MITRE?(e&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,Yt.CLOCKWISE,this._distance))};Wr.prototype.closeRing=function(){this._segList.closeRing()};Wr.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle};Wr.prototype.interfaces_=function(){return[]};Wr.prototype.getClass=function(){return Wr};Lx.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return .001};Lx.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return .001};Lx.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6};Lx.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80};Object.defineProperties(Wr,Lx);var js=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var e=arguments[0],t=arguments[1];this._precisionModel=e,this._bufParams=t};js.prototype.getOffsetCurve=function(e,t){if(this._distance=t,t===0)return null;var n=t<0,r=Math.abs(t),i=this.getSegGen(r);e.length<=1?this.computePointCurve(e[0],i):this.computeOffsetCurve(e,n,i);var o=i.getCoordinates();return n&&Kn.reverse(o),o};js.prototype.computeSingleSidedBufferCurve=function(e,t,n){var r=this.simplifyTolerance(this._distance);if(t){n.addSegments(e,!0);var i=xi.simplify(e,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Rt.LEFT),n.addFirstSegment();for(var u=o-2;u>=0;u--)n.addNextSegment(i[u],!0)}else{n.addSegments(e,!1);var l=xi.simplify(e,r),p=l.length-1;n.initSideSegments(l[0],l[1],Rt.LEFT),n.addFirstSegment();for(var g=2;g<=p;g++)n.addNextSegment(l[g],!0)}n.addLastSegment(),n.closeRing()};js.prototype.computeRingBufferCurve=function(e,t,n){var r=this.simplifyTolerance(this._distance);t===Rt.RIGHT&&(r=-r);var i=xi.simplify(e,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],t);for(var u=1;u<=o;u++){var l=u!==1;n.addNextSegment(i[u],l)}n.closeRing()};js.prototype.computeLineBufferCurve=function(e,t){var n=this.simplifyTolerance(this._distance),r=xi.simplify(e,n),i=r.length-1;t.initSideSegments(r[0],r[1],Rt.LEFT);for(var o=2;o<=i;o++)t.addNextSegment(r[o],!0);t.addLastSegment(),t.addLineEndCap(r[i-1],r[i]);var u=xi.simplify(e,-n),l=u.length-1;t.initSideSegments(u[l],u[l-1],Rt.LEFT);for(var p=l-2;p>=0;p--)t.addNextSegment(u[p],!0);t.addLastSegment(),t.addLineEndCap(u[1],u[0]),t.closeRing()};js.prototype.computePointCurve=function(e,t){switch(this._bufParams.getEndCapStyle()){case pr.CAP_ROUND:t.createCircle(e);break;case pr.CAP_SQUARE:t.createSquare(e);break}};js.prototype.getLineCurve=function(e,t){if(this._distance=t,t<0&&!this._bufParams.isSingleSided()||t===0)return null;var n=Math.abs(t),r=this.getSegGen(n);if(e.length<=1)this.computePointCurve(e[0],r);else if(this._bufParams.isSingleSided()){var i=t<0;this.computeSingleSidedBufferCurve(e,i,r)}else this.computeLineBufferCurve(e,r);var o=r.getCoordinates();return o};js.prototype.getBufferParameters=function(){return this._bufParams};js.prototype.simplifyTolerance=function(e){return e*this._bufParams.getSimplifyFactor()};js.prototype.getRingCurve=function(e,t,n){if(this._distance=n,e.length<=2)return this.getLineCurve(e,n);if(n===0)return js.copyCoordinates(e);var r=this.getSegGen(n);return this.computeRingBufferCurve(e,t,r),r.getCoordinates()};js.prototype.computeOffsetCurve=function(e,t,n){var r=this.simplifyTolerance(this._distance);if(t){var i=xi.simplify(e,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Rt.LEFT),n.addFirstSegment();for(var u=o-2;u>=0;u--)n.addNextSegment(i[u],!0)}else{var l=xi.simplify(e,r),p=l.length-1;n.initSideSegments(l[0],l[1],Rt.LEFT),n.addFirstSegment();for(var g=2;g<=p;g++)n.addNextSegment(l[g],!0)}n.addLastSegment()};js.prototype.getSegGen=function(e){return new Wr(this._precisionModel,this._bufParams,e)};js.prototype.interfaces_=function(){return[]};js.prototype.getClass=function(){return js};js.copyCoordinates=function(e){for(var t=new Array(e.length).fill(null),n=0;n<t.length;n++)t[n]=new nt(e[n]);return t};var Ig=function(){this._subgraphs=null,this._seg=new pn,this._cga=new Yt;var e=arguments[0];this._subgraphs=e},L$={DepthSegment:{configurable:!0}};Ig.prototype.findStabbedSegments=function(){var e=this;if(arguments.length===1){for(var t=arguments[0],n=new qt,r=this._subgraphs.iterator();r.hasNext();){var i=r.next(),o=i.getEnvelope();t.y<o.getMinY()||t.y>o.getMaxY()||e.findStabbedSegments(t,i.getDirectedEdges(),n)}return n}else if(arguments.length===3){if(Sn(arguments[2],$l)&&arguments[0]instanceof nt&&arguments[1]instanceof kP)for(var u=arguments[0],l=arguments[1],p=arguments[2],g=l.getEdge().getCoordinates(),x=0;x<g.length-1;x++){e._seg.p0=g[x],e._seg.p1=g[x+1],e._seg.p0.y>e._seg.p1.y&&e._seg.reverse();var y=Math.max(e._seg.p0.x,e._seg.p1.x);if(!(y<u.x)&&!e._seg.isHorizontal()&&!(u.y<e._seg.p0.y||u.y>e._seg.p1.y)&&Yt.computeOrientation(e._seg.p0,e._seg.p1,u)!==Yt.RIGHT){var _=l.getDepth(Rt.LEFT);e._seg.p0.equals(g[x])||(_=l.getDepth(Rt.RIGHT));var T=new Gp(e._seg,_);p.add(T)}}else if(Sn(arguments[2],$l)&&arguments[0]instanceof nt&&Sn(arguments[1],$l))for(var A=arguments[0],O=arguments[1],N=arguments[2],k=O.iterator();k.hasNext();){var R=k.next();R.isForward()&&e.findStabbedSegments(A,R,N)}}};Ig.prototype.getDepth=function(e){var t=this.findStabbedSegments(e);if(t.size()===0)return 0;var n=Wl.min(t);return n._leftDepth};Ig.prototype.interfaces_=function(){return[]};Ig.prototype.getClass=function(){return Ig};L$.DepthSegment.get=function(){return Gp};Object.defineProperties(Ig,L$);var Gp=function(){this._upwardSeg=null,this._leftDepth=null;var e=arguments[0],t=arguments[1];this._upwardSeg=new pn(e),this._leftDepth=t};Gp.prototype.compareTo=function(e){var t=e;if(this._upwardSeg.minX()>=t._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=t._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(t._upwardSeg);return n!==0||(n=-1*t._upwardSeg.orientationIndex(this._upwardSeg),n!==0)?n:this._upwardSeg.compareTo(t._upwardSeg)};Gp.prototype.compareX=function(e,t){var n=e.p0.compareTo(t.p0);return n!==0?n:e.p1.compareTo(t.p1)};Gp.prototype.toString=function(){return this._upwardSeg.toString()};Gp.prototype.interfaces_=function(){return[pl]};Gp.prototype.getClass=function(){return Gp};var gr=function(e,t,n){this.p0=e||null,this.p1=t||null,this.p2=n||null};gr.prototype.area=function(){return gr.area(this.p0,this.p1,this.p2)};gr.prototype.signedArea=function(){return gr.signedArea(this.p0,this.p1,this.p2)};gr.prototype.interpolateZ=function(e){if(e===null)throw new ri("Supplied point is null.");return gr.interpolateZ(e,this.p0,this.p1,this.p2)};gr.prototype.longestSideLength=function(){return gr.longestSideLength(this.p0,this.p1,this.p2)};gr.prototype.isAcute=function(){return gr.isAcute(this.p0,this.p1,this.p2)};gr.prototype.circumcentre=function(){return gr.circumcentre(this.p0,this.p1,this.p2)};gr.prototype.area3D=function(){return gr.area3D(this.p0,this.p1,this.p2)};gr.prototype.centroid=function(){return gr.centroid(this.p0,this.p1,this.p2)};gr.prototype.inCentre=function(){return gr.inCentre(this.p0,this.p1,this.p2)};gr.prototype.interfaces_=function(){return[]};gr.prototype.getClass=function(){return gr};gr.area=function(e,t,n){return Math.abs(((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2)};gr.signedArea=function(e,t,n){return((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2};gr.det=function(e,t,n,r){return e*r-t*n};gr.interpolateZ=function(e,t,n,r){var i=t.x,o=t.y,u=n.x-i,l=r.x-i,p=n.y-o,g=r.y-o,x=u*g-l*p,y=e.x-i,_=e.y-o,T=(g*y-l*_)/x,A=(-p*y+u*_)/x,O=t.z+T*(n.z-t.z)+A*(r.z-t.z);return O};gr.longestSideLength=function(e,t,n){var r=e.distance(t),i=t.distance(n),o=n.distance(e),u=r;return i>u&&(u=i),o>u&&(u=o),u};gr.isAcute=function(e,t,n){return!(!er.isAcute(e,t,n)||!er.isAcute(t,n,e)||!er.isAcute(n,e,t))};gr.circumcentre=function(e,t,n){var r=n.x,i=n.y,o=e.x-r,u=e.y-i,l=t.x-r,p=t.y-i,g=2*gr.det(o,u,l,p),x=gr.det(u,o*o+u*u,p,l*l+p*p),y=gr.det(o,o*o+u*u,l,l*l+p*p),_=r-x/g,T=i+y/g;return new nt(_,T)};gr.perpendicularBisector=function(e,t){var n=t.x-e.x,r=t.y-e.y,i=new jl(e.x+n/2,e.y+r/2,1),o=new jl(e.x-r+n/2,e.y+n+r/2,1);return new jl(i,o)};gr.angleBisector=function(e,t,n){var r=t.distance(e),i=t.distance(n),o=r/(r+i),u=n.x-e.x,l=n.y-e.y,p=new nt(e.x+o*u,e.y+o*l);return p};gr.area3D=function(e,t,n){var r=t.x-e.x,i=t.y-e.y,o=t.z-e.z,u=n.x-e.x,l=n.y-e.y,p=n.z-e.z,g=i*p-o*l,x=o*u-r*p,y=r*l-i*u,_=g*g+x*x+y*y,T=Math.sqrt(_)/2;return T};gr.centroid=function(e,t,n){var r=(e.x+t.x+n.x)/3,i=(e.y+t.y+n.y)/3;return new nt(r,i)};gr.inCentre=function(e,t,n){var r=t.distance(n),i=e.distance(n),o=e.distance(t),u=r+i+o,l=(r*e.x+i*t.x+o*n.x)/u,p=(r*e.y+i*t.y+o*n.y)/u;return new nt(l,p)};var dl=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new qt;var e=arguments[0],t=arguments[1],n=arguments[2];this._inputGeom=e,this._distance=t,this._curveBuilder=n};dl.prototype.addPoint=function(e){if(this._distance<=0)return null;var t=e.getCoordinates(),n=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(n,st.EXTERIOR,st.INTERIOR)};dl.prototype.addPolygon=function(e){var t=this,n=this._distance,r=Rt.LEFT;this._distance<0&&(n=-this._distance,r=Rt.RIGHT);var i=e.getExteriorRing(),o=Kn.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance)||this._distance<=0&&o.length<3)return null;this.addPolygonRing(o,n,r,st.EXTERIOR,st.INTERIOR);for(var u=0;u<e.getNumInteriorRing();u++){var l=e.getInteriorRingN(u),p=Kn.removeRepeatedPoints(l.getCoordinates());t._distance>0&&t.isErodedCompletely(l,-t._distance)||t.addPolygonRing(p,n,Rt.opposite(r),st.INTERIOR,st.EXTERIOR)}};dl.prototype.isTriangleErodedCompletely=function(e,t){var n=new gr(e[0],e[1],e[2]),r=n.inCentre(),i=Yt.distancePointLine(r,n.p0,n.p1);return i<Math.abs(t)};dl.prototype.addLineString=function(e){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var t=Kn.removeRepeatedPoints(e.getCoordinates()),n=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(n,st.EXTERIOR,st.INTERIOR)};dl.prototype.addCurve=function(e,t,n){if(e===null||e.length<2)return null;var r=new Ri(e,new Sr(0,st.BOUNDARY,t,n));this._curveList.add(r)};dl.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList};dl.prototype.addPolygonRing=function(e,t,n,r,i){if(t===0&&e.length<qc.MINIMUM_VALID_SIZE)return null;var o=r,u=i;e.length>=qc.MINIMUM_VALID_SIZE&&Yt.isCCW(e)&&(o=i,u=r,n=Rt.opposite(n));var l=this._curveBuilder.getRingCurve(e,n,t);this.addCurve(l,o,u)};dl.prototype.add=function(e){if(e.isEmpty())return null;e instanceof Xi?this.addPolygon(e):e instanceof vi?this.addLineString(e):e instanceof oa?this.addPoint(e):e instanceof F_?this.addCollection(e):e instanceof qp?this.addCollection(e):e instanceof zc?this.addCollection(e):e instanceof cs&&this.addCollection(e)};dl.prototype.isErodedCompletely=function(e,t){var n=e.getCoordinates();if(n.length<4)return t<0;if(n.length===4)return this.isTriangleErodedCompletely(n,t);var r=e.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return t<0&&2*Math.abs(t)>i};dl.prototype.addCollection=function(e){for(var t=this,n=0;n<e.getNumGeometries();n++){var r=e.getGeometryN(n);t.add(r)}};dl.prototype.interfaces_=function(){return[]};dl.prototype.getClass=function(){return dl};var U_=function(){};U_.prototype.locate=function(e){};U_.prototype.interfaces_=function(){return[]};U_.prototype.getClass=function(){return U_};var Fc=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var e=arguments[0];this._parent=e,this._atStart=!0,this._index=0,this._max=e.getNumGeometries()};Fc.prototype.next=function(){if(this._atStart)return this._atStart=!1,Fc.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new cv;var e=this._parent.getGeometryN(this._index++);return e instanceof cs?(this._subcollectionIterator=new Fc(e),this._subcollectionIterator.next()):e};Fc.prototype.remove=function(){throw new Error(this.getClass().getName())};Fc.prototype.hasNext=function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)};Fc.prototype.interfaces_=function(){return[uv]};Fc.prototype.getClass=function(){return Fc};Fc.isAtomic=function(e){return!(e instanceof cs)};var Oa=function(){this._geom=null;var e=arguments[0];this._geom=e};Oa.prototype.locate=function(e){return Oa.locate(e,this._geom)};Oa.prototype.interfaces_=function(){return[U_]};Oa.prototype.getClass=function(){return Oa};Oa.isPointInRing=function(e,t){return t.getEnvelopeInternal().intersects(e)?Yt.isPointInRing(e,t.getCoordinates()):!1};Oa.containsPointInPolygon=function(e,t){if(t.isEmpty())return!1;var n=t.getExteriorRing();if(!Oa.isPointInRing(e,n))return!1;for(var r=0;r<t.getNumInteriorRing();r++){var i=t.getInteriorRingN(r);if(Oa.isPointInRing(e,i))return!1}return!0};Oa.containsPoint=function(e,t){if(t instanceof Xi)return Oa.containsPointInPolygon(e,t);if(t instanceof cs)for(var n=new Fc(t);n.hasNext();){var r=n.next();if(r!==t&&Oa.containsPoint(e,r))return!0}return!1};Oa.locate=function(e,t){return t.isEmpty()?st.EXTERIOR:Oa.containsPoint(e,t)?st.INTERIOR:st.EXTERIOR};var Ho=function(){this._edgeMap=new Vo,this._edgeList=null,this._ptInAreaLocation=[st.NONE,st.NONE]};Ho.prototype.getNextCW=function(e){this.getEdges();var t=this._edgeList.indexOf(e),n=t-1;return t===0&&(n=this._edgeList.size()-1),this._edgeList.get(n)};Ho.prototype.propagateSideLabels=function(e){for(var t=st.NONE,n=this.iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea(e)&&i.getLocation(e,Rt.LEFT)!==st.NONE&&(t=i.getLocation(e,Rt.LEFT))}if(t===st.NONE)return null;for(var o=t,u=this.iterator();u.hasNext();){var l=u.next(),p=l.getLabel();if(p.getLocation(e,Rt.ON)===st.NONE&&p.setLocation(e,Rt.ON,o),p.isArea(e)){var g=p.getLocation(e,Rt.LEFT),x=p.getLocation(e,Rt.RIGHT);if(x!==st.NONE){if(x!==o)throw new Qh("side location conflict",l.getCoordinate());g===st.NONE&&Dn.shouldNeverReachHere("found single null side (at "+l.getCoordinate()+")"),o=g}else Dn.isTrue(p.getLocation(e,Rt.LEFT)===st.NONE,"found single null side"),p.setLocation(e,Rt.RIGHT,o),p.setLocation(e,Rt.LEFT,o)}}};Ho.prototype.getCoordinate=function(){var e=this.iterator();if(!e.hasNext())return null;var t=e.next();return t.getCoordinate()};Ho.prototype.print=function(e){Mo.out.println("EdgeEndStar:   "+this.getCoordinate());for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}};Ho.prototype.isAreaLabelsConsistent=function(e){return this.computeEdgeEndLabels(e.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)};Ho.prototype.checkAreaLabelsConsistent=function(e){var t=this.getEdges();if(t.size()<=0)return!0;var n=t.size()-1,r=t.get(n).getLabel(),i=r.getLocation(e,Rt.LEFT);Dn.isTrue(i!==st.NONE,"Found unlabelled area edge");for(var o=i,u=this.iterator();u.hasNext();){var l=u.next(),p=l.getLabel();Dn.isTrue(p.isArea(e),"Found non-area edge");var g=p.getLocation(e,Rt.LEFT),x=p.getLocation(e,Rt.RIGHT);if(g===x||x!==o)return!1;o=g}return!0};Ho.prototype.findIndex=function(e){var t=this;this.iterator();for(var n=0;n<this._edgeList.size();n++){var r=t._edgeList.get(n);if(r===e)return n}return-1};Ho.prototype.iterator=function(){return this.getEdges().iterator()};Ho.prototype.getEdges=function(){return this._edgeList===null&&(this._edgeList=new qt(this._edgeMap.values())),this._edgeList};Ho.prototype.getLocation=function(e,t,n){return this._ptInAreaLocation[e]===st.NONE&&(this._ptInAreaLocation[e]=Oa.locate(t,n[e].getGeometry())),this._ptInAreaLocation[e]};Ho.prototype.toString=function(){var e=new tc;e.append("EdgeEndStar:   "+this.getCoordinate()),e.append(`
`);for(var t=this.iterator();t.hasNext();){var n=t.next();e.append(n),e.append(`
`)}return e.toString()};Ho.prototype.computeEdgeEndLabels=function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();n.computeLabel(e)}};Ho.prototype.computeLabelling=function(e){var t=this;this.computeEdgeEndLabels(e[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var n=[!1,!1],r=this.iterator();r.hasNext();)for(var i=r.next(),o=i.getLabel(),u=0;u<2;u++)o.isLine(u)&&o.getLocation(u)===st.BOUNDARY&&(n[u]=!0);for(var l=this.iterator();l.hasNext();)for(var p=l.next(),g=p.getLabel(),x=0;x<2;x++)if(g.isAnyNull(x)){var y=st.NONE;if(n[x])y=st.EXTERIOR;else{var _=p.getCoordinate();y=t.getLocation(x,_,e)}g.setAllLocationsIfNull(x,y)}};Ho.prototype.getDegree=function(){return this._edgeMap.size()};Ho.prototype.insertEdgeEnd=function(e,t){this._edgeMap.put(e,t),this._edgeList=null};Ho.prototype.interfaces_=function(){return[]};Ho.prototype.getClass=function(){return Ho};var ple=function(e){function t(){e.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.linkResultDirectedEdges=function(){var n=this;this.getResultAreaEdges();for(var r=null,i=null,o=this._SCANNING_FOR_INCOMING,u=0;u<this._resultAreaEdgeList.size();u++){var l=n._resultAreaEdgeList.get(u),p=l.getSym();if(l.getLabel().isArea())switch(r===null&&l.isInResult()&&(r=l),o){case n._SCANNING_FOR_INCOMING:if(!p.isInResult())continue;i=p,o=n._LINKING_TO_OUTGOING;break;case n._LINKING_TO_OUTGOING:if(!l.isInResult())continue;i.setNext(l),o=n._SCANNING_FOR_INCOMING;break}}if(o===this._LINKING_TO_OUTGOING){if(r===null)throw new Qh("no outgoing dirEdge found",this.getCoordinate());Dn.isTrue(r.isInResult(),"unable to link last incoming dirEdge"),i.setNext(r)}},t.prototype.insert=function(n){var r=n;this.insertEdgeEnd(r,r)},t.prototype.getRightmostEdge=function(){var n=this.getEdges(),r=n.size();if(r<1)return null;var i=n.get(0);if(r===1)return i;var o=n.get(r-1),u=i.getQuadrant(),l=o.getQuadrant();return Ar.isNorthern(u)&&Ar.isNorthern(l)?i:!Ar.isNorthern(u)&&!Ar.isNorthern(l)?o:i.getDy()!==0?i:o.getDy()!==0?o:(Dn.shouldNeverReachHere("found two horizontal edges incident on node"),null)},t.prototype.print=function(n){Mo.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var r=this.iterator();r.hasNext();){var i=r.next();n.print("out "),i.print(n),n.println(),n.print("in "),i.getSym().print(n),n.println()}},t.prototype.getResultAreaEdges=function(){var n=this;if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new qt;for(var r=this.iterator();r.hasNext();){var i=r.next();(i.isInResult()||i.getSym().isInResult())&&n._resultAreaEdgeList.add(i)}return this._resultAreaEdgeList},t.prototype.updateLabelling=function(n){for(var r=this.iterator();r.hasNext();){var i=r.next(),o=i.getLabel();o.setAllLocationsIfNull(0,n.getLocation(0)),o.setAllLocationsIfNull(1,n.getLocation(1))}},t.prototype.linkAllDirectedEdges=function(){var n=this;this.getEdges();for(var r=null,i=null,o=this._edgeList.size()-1;o>=0;o--){var u=n._edgeList.get(o),l=u.getSym();i===null&&(i=l),r!==null&&l.setNext(r),r=u}i.setNext(r)},t.prototype.computeDepths=function(){var n=this;if(arguments.length===1){var r=arguments[0],i=this.findIndex(r),o=r.getDepth(Rt.LEFT),u=r.getDepth(Rt.RIGHT),l=this.computeDepths(i+1,this._edgeList.size(),o),p=this.computeDepths(0,i,l);if(p!==u)throw new Qh("depth mismatch at "+r.getCoordinate())}else if(arguments.length===3){for(var g=arguments[0],x=arguments[1],y=arguments[2],_=y,T=g;T<x;T++){var A=n._edgeList.get(T);A.setEdgeDepths(Rt.RIGHT,_),_=A.getDepth(Rt.LEFT)}return _}},t.prototype.mergeSymLabels=function(){for(var n=this.iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.merge(r.getSym().getLabel())}},t.prototype.linkMinimalDirectedEdges=function(n){for(var r=this,i=null,o=null,u=this._SCANNING_FOR_INCOMING,l=this._resultAreaEdgeList.size()-1;l>=0;l--){var p=r._resultAreaEdgeList.get(l),g=p.getSym();switch(i===null&&p.getEdgeRing()===n&&(i=p),u){case r._SCANNING_FOR_INCOMING:if(g.getEdgeRing()!==n)continue;o=g,u=r._LINKING_TO_OUTGOING;break;case r._LINKING_TO_OUTGOING:if(p.getEdgeRing()!==n)continue;o.setNextMin(p),u=r._SCANNING_FOR_INCOMING;break}}u===this._LINKING_TO_OUTGOING&&(Dn.isTrue(i!==null,"found null for first outgoing dirEdge"),Dn.isTrue(i.getEdgeRing()===n,"unable to link last incoming dirEdge"),o.setNextMin(i))},t.prototype.getOutgoingDegree=function(){if(arguments.length===0){for(var n=0,r=this.iterator();r.hasNext();){var i=r.next();i.isInResult()&&n++}return n}else if(arguments.length===1){for(var o=arguments[0],u=0,l=this.iterator();l.hasNext();){var p=l.next();p.getEdgeRing()===o&&u++}return u}},t.prototype.getLabel=function(){return this._label},t.prototype.findCoveredLineEdges=function(){for(var n=st.NONE,r=this.iterator();r.hasNext();){var i=r.next(),o=i.getSym();if(!i.isLineEdge()){if(i.isInResult()){n=st.INTERIOR;break}if(o.isInResult()){n=st.EXTERIOR;break}}}if(n===st.NONE)return null;for(var u=n,l=this.iterator();l.hasNext();){var p=l.next(),g=p.getSym();p.isLineEdge()?p.getEdge().setCovered(u===st.INTERIOR):(p.isInResult()&&(u=st.EXTERIOR),g.isInResult()&&(u=st.INTERIOR))}},t.prototype.computeLabelling=function(n){var r=this;e.prototype.computeLabelling.call(this,n),this._label=new Sr(st.NONE);for(var i=this.iterator();i.hasNext();)for(var o=i.next(),u=o.getEdge(),l=u.getLabel(),p=0;p<2;p++){var g=l.getLocation(p);(g===st.INTERIOR||g===st.BOUNDARY)&&r._label.setLocation(p,st.INTERIOR)}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Ho),A$=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createNode=function(n){return new KS(n,new ple)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(B_),pd=function e(){this._pts=null,this._orientation=null;var t=arguments[0];this._pts=t,this._orientation=e.orientation(t)};pd.prototype.compareTo=function(e){var t=e,n=pd.compareOriented(this._pts,this._orientation,t._pts,t._orientation);return n};pd.prototype.interfaces_=function(){return[pl]};pd.prototype.getClass=function(){return pd};pd.orientation=function(e){return Kn.increasingDirection(e)===1};pd.compareOriented=function(e,t,n,r){for(var i=t?1:-1,o=r?1:-1,u=t?e.length:-1,l=r?n.length:-1,p=t?0:e.length-1,g=r?0:n.length-1;;){var x=e[p].compareTo(n[g]);if(x!==0)return x;p+=i,g+=o;var y=p===u,_=g===l;if(y&&!_)return-1;if(!y&&_)return 1;if(y&&_)return 0}};var Kl=function(){this._edges=new qt,this._ocaMap=new Vo};Kl.prototype.print=function(e){var t=this;e.print("MULTILINESTRING ( ");for(var n=0;n<this._edges.size();n++){var r=t._edges.get(n);n>0&&e.print(","),e.print("(");for(var i=r.getCoordinates(),o=0;o<i.length;o++)o>0&&e.print(","),e.print(i[o].x+" "+i[o].y);e.println(")")}e.print(")  ")};Kl.prototype.addAll=function(e){for(var t=this,n=e.iterator();n.hasNext();)t.add(n.next())};Kl.prototype.findEdgeIndex=function(e){for(var t=this,n=0;n<this._edges.size();n++)if(t._edges.get(n).equals(e))return n;return-1};Kl.prototype.iterator=function(){return this._edges.iterator()};Kl.prototype.getEdges=function(){return this._edges};Kl.prototype.get=function(e){return this._edges.get(e)};Kl.prototype.findEqualEdge=function(e){var t=new pd(e.getCoordinates()),n=this._ocaMap.get(t);return n};Kl.prototype.add=function(e){this._edges.add(e);var t=new pd(e.getCoordinates());this._ocaMap.put(t,e)};Kl.prototype.interfaces_=function(){return[]};Kl.prototype.getClass=function(){return Kl};var Hp=function(){};Hp.prototype.processIntersections=function(e,t,n,r){};Hp.prototype.isDone=function(){};Hp.prototype.interfaces_=function(){return[]};Hp.prototype.getClass=function(){return Hp};var Da=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var e=arguments[0];this._li=e};Da.prototype.isTrivialIntersection=function(e,t,n,r){if(e===n&&this._li.getIntersectionNum()===1){if(Da.isAdjacentSegments(t,r))return!0;if(e.isClosed()){var i=e.size()-1;if(t===0&&r===i||r===0&&t===i)return!0}}return!1};Da.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint};Da.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior};Da.prototype.getLineIntersector=function(){return this._li};Da.prototype.hasProperIntersection=function(){return this._hasProper};Da.prototype.processIntersections=function(e,t,n,r){if(e===n&&t===r)return null;this.numTests++;var i=e.getCoordinates()[t],o=e.getCoordinates()[t+1],u=n.getCoordinates()[r],l=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,u,l),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(e,t,n,r)||(this._hasIntersection=!0,e.addIntersections(this._li,t,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))};Da.prototype.hasIntersection=function(){return this._hasIntersection};Da.prototype.isDone=function(){return!1};Da.prototype.hasInteriorIntersection=function(){return this._hasInterior};Da.prototype.interfaces_=function(){return[Hp]};Da.prototype.getClass=function(){return Da};Da.isAdjacentSegments=function(e,t){return Math.abs(e-t)===1};var Ku=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var e=arguments[0],t=arguments[1],n=arguments[2];this.coord=new nt(e),this.segmentIndex=t,this.dist=n};Ku.prototype.getSegmentIndex=function(){return this.segmentIndex};Ku.prototype.getCoordinate=function(){return this.coord};Ku.prototype.print=function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex),e.println(" dist = "+this.dist)};Ku.prototype.compareTo=function(e){var t=e;return this.compare(t.segmentIndex,t.dist)};Ku.prototype.isEndPoint=function(e){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===e};Ku.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist};Ku.prototype.getDistance=function(){return this.dist};Ku.prototype.compare=function(e,t){return this.segmentIndex<e?-1:this.segmentIndex>e?1:this.dist<t?-1:this.dist>t?1:0};Ku.prototype.interfaces_=function(){return[pl]};Ku.prototype.getClass=function(){return Ku};var Hc=function(){this._nodeMap=new Vo,this.edge=null;var e=arguments[0];this.edge=e};Hc.prototype.print=function(e){e.println("Intersections:");for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}};Hc.prototype.iterator=function(){return this._nodeMap.values().iterator()};Hc.prototype.addSplitEdges=function(e){var t=this;this.addEndpoints();for(var n=this.iterator(),r=n.next();n.hasNext();){var i=n.next(),o=t.createSplitEdge(r,i);e.add(o),r=i}};Hc.prototype.addEndpoints=function(){var e=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[e],e,0)};Hc.prototype.createSplitEdge=function(e,t){var n=this,r=t.segmentIndex-e.segmentIndex+2,i=this.edge.pts[t.segmentIndex],o=t.dist>0||!t.coord.equals2D(i);o||r--;var u=new Array(r).fill(null),l=0;u[l++]=new nt(e.coord);for(var p=e.segmentIndex+1;p<=t.segmentIndex;p++)u[l++]=n.edge.pts[p];return o&&(u[l]=t.coord),new fE(u,new Sr(this.edge._label))};Hc.prototype.add=function(e,t,n){var r=new Ku(e,t,n),i=this._nodeMap.get(r);return i!==null?i:(this._nodeMap.put(r,r),r)};Hc.prototype.isIntersection=function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();if(n.coord.equals(e))return!0}return!1};Hc.prototype.interfaces_=function(){return[]};Hc.prototype.getClass=function(){return Hc};var Zp=function(){};Zp.prototype.getChainStartIndices=function(e){var t=this,n=0,r=new qt;r.add(new qu(n));do{var i=t.findChainEnd(e,n);r.add(new qu(i)),n=i}while(n<e.length-1);var o=Zp.toIntArray(r);return o};Zp.prototype.findChainEnd=function(e,t){for(var n=Ar.quadrant(e[t],e[t+1]),r=t+1;r<e.length;){var i=Ar.quadrant(e[r-1],e[r]);if(i!==n)break;r++}return r-1};Zp.prototype.interfaces_=function(){return[]};Zp.prototype.getClass=function(){return Zp};Zp.toIntArray=function(e){for(var t=new Array(e.size()).fill(null),n=0;n<t.length;n++)t[n]=e.get(n).intValue();return t};var tf=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new dn,this.env2=new dn;var e=arguments[0];this.e=e,this.pts=e.getCoordinates();var t=new Zp;this.startIndex=t.getChainStartIndices(this.pts)};tf.prototype.getCoordinates=function(){return this.pts};tf.prototype.getMaxX=function(e){var t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return t>n?t:n};tf.prototype.getMinX=function(e){var t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return t<n?t:n};tf.prototype.computeIntersectsForChain=function(){if(arguments.length===4){var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[e],this.startIndex[e+1],t,t.startIndex[n],t.startIndex[n+1],r)}else if(arguments.length===6){var i=arguments[0],o=arguments[1],u=arguments[2],l=arguments[3],p=arguments[4],g=arguments[5],x=this.pts[i],y=this.pts[o],_=u.pts[l],T=u.pts[p];if(o-i===1&&p-l===1)return g.addIntersections(this.e,i,u.e,l),null;if(this.env1.init(x,y),this.env2.init(_,T),!this.env1.intersects(this.env2))return null;var A=Math.trunc((i+o)/2),O=Math.trunc((l+p)/2);i<A&&(l<O&&this.computeIntersectsForChain(i,A,u,l,O,g),O<p&&this.computeIntersectsForChain(i,A,u,O,p,g)),A<o&&(l<O&&this.computeIntersectsForChain(A,o,u,l,O,g),O<p&&this.computeIntersectsForChain(A,o,u,O,p,g))}};tf.prototype.getStartIndexes=function(){return this.startIndex};tf.prototype.computeIntersects=function(e,t){for(var n=this,r=0;r<this.startIndex.length-1;r++)for(var i=0;i<e.startIndex.length-1;i++)n.computeIntersectsForChain(r,e,i,t)};tf.prototype.interfaces_=function(){return[]};tf.prototype.getClass=function(){return tf};var Ro=function e(){var t=this;this._depth=Array(2).fill().map(function(){return Array(3)});for(var n=0;n<2;n++)for(var r=0;r<3;r++)t._depth[n][r]=e.NULL_VALUE},O$={NULL_VALUE:{configurable:!0}};Ro.prototype.getDepth=function(e,t){return this._depth[e][t]};Ro.prototype.setDepth=function(e,t,n){this._depth[e][t]=n};Ro.prototype.isNull=function(){var e=this;if(arguments.length===0){for(var t=0;t<2;t++)for(var n=0;n<3;n++)if(e._depth[t][n]!==Ro.NULL_VALUE)return!1;return!0}else if(arguments.length===1){var r=arguments[0];return this._depth[r][1]===Ro.NULL_VALUE}else if(arguments.length===2){var i=arguments[0],o=arguments[1];return this._depth[i][o]===Ro.NULL_VALUE}};Ro.prototype.normalize=function(){for(var e=this,t=0;t<2;t++)if(!e.isNull(t)){var n=e._depth[t][1];e._depth[t][2]<n&&(n=e._depth[t][2]),n<0&&(n=0);for(var r=1;r<3;r++){var i=0;e._depth[t][r]>n&&(i=1),e._depth[t][r]=i}}};Ro.prototype.getDelta=function(e){return this._depth[e][Rt.RIGHT]-this._depth[e][Rt.LEFT]};Ro.prototype.getLocation=function(e,t){return this._depth[e][t]<=0?st.EXTERIOR:st.INTERIOR};Ro.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]};Ro.prototype.add=function(){var e=this;if(arguments.length===1)for(var t=arguments[0],n=0;n<2;n++)for(var r=1;r<3;r++){var i=t.getLocation(n,r);(i===st.EXTERIOR||i===st.INTERIOR)&&(e.isNull(n,r)?e._depth[n][r]=Ro.depthAtLocation(i):e._depth[n][r]+=Ro.depthAtLocation(i))}else if(arguments.length===3){var o=arguments[0],u=arguments[1],l=arguments[2];l===st.INTERIOR&&this._depth[o][u]++}};Ro.prototype.interfaces_=function(){return[]};Ro.prototype.getClass=function(){return Ro};Ro.depthAtLocation=function(e){return e===st.EXTERIOR?0:e===st.INTERIOR?1:Ro.NULL_VALUE};O$.NULL_VALUE.get=function(){return-1};Object.defineProperties(Ro,O$);var fE=function(e){function t(){if(e.call(this),this.pts=null,this._env=null,this.eiList=new Hc(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Ro,this._depthDelta=0,arguments.length===1){var n=arguments[0];t.call(this,n,null)}else if(arguments.length===2){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDepth=function(){return this._depth},t.prototype.getCollapsedEdge=function(){var n=new Array(2).fill(null);n[0]=this.pts[0],n[1]=this.pts[1];var r=new t(n,Sr.toLineLabel(this._label));return r},t.prototype.isIsolated=function(){return this._isIsolated},t.prototype.getCoordinates=function(){return this.pts},t.prototype.setIsolated=function(n){this._isIsolated=n},t.prototype.setName=function(n){this._name=n},t.prototype.equals=function(n){var r=this;if(!(n instanceof t))return!1;var i=n;if(this.pts.length!==i.pts.length)return!1;for(var o=!0,u=!0,l=this.pts.length,p=0;p<this.pts.length;p++)if(r.pts[p].equals2D(i.pts[p])||(o=!1),r.pts[p].equals2D(i.pts[--l])||(u=!1),!o&&!u)return!1;return!0},t.prototype.getCoordinate=function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var n=arguments[0];return this.pts[n]}},t.prototype.print=function(n){var r=this;n.print("edge "+this._name+": "),n.print("LINESTRING (");for(var i=0;i<this.pts.length;i++)i>0&&n.print(","),n.print(r.pts[i].x+" "+r.pts[i].y);n.print(")  "+this._label+" "+this._depthDelta)},t.prototype.computeIM=function(n){t.updateIM(this._label,n)},t.prototype.isCollapsed=function(){return!this._label.isArea()||this.pts.length!==3?!1:!!this.pts[0].equals(this.pts[2])},t.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},t.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},t.prototype.getDepthDelta=function(){return this._depthDelta},t.prototype.getNumPoints=function(){return this.pts.length},t.prototype.printReverse=function(n){var r=this;n.print("edge "+this._name+": ");for(var i=this.pts.length-1;i>=0;i--)n.print(r.pts[i]+" ");n.println("")},t.prototype.getMonotoneChainEdge=function(){return this._mce===null&&(this._mce=new tf(this)),this._mce},t.prototype.getEnvelope=function(){var n=this;if(this._env===null){this._env=new dn;for(var r=0;r<this.pts.length;r++)n._env.expandToInclude(n.pts[r])}return this._env},t.prototype.addIntersection=function(n,r,i,o){var u=new nt(n.getIntersection(o)),l=r,p=n.getEdgeDistance(i,o),g=l+1;if(g<this.pts.length){var x=this.pts[g];u.equals2D(x)&&(l=g,p=0)}this.eiList.add(u,l,p)},t.prototype.toString=function(){var n=this,r=new tc;r.append("edge "+this._name+": "),r.append("LINESTRING (");for(var i=0;i<this.pts.length;i++)i>0&&r.append(","),r.append(n.pts[i].x+" "+n.pts[i].y);return r.append(")  "+this._label+" "+this._depthDelta),r.toString()},t.prototype.isPointwiseEqual=function(n){var r=this;if(this.pts.length!==n.pts.length)return!1;for(var i=0;i<this.pts.length;i++)if(!r.pts[i].equals2D(n.pts[i]))return!1;return!0},t.prototype.setDepthDelta=function(n){this._depthDelta=n},t.prototype.getEdgeIntersectionList=function(){return this.eiList},t.prototype.addIntersections=function(n,r,i){for(var o=this,u=0;u<n.getIntersectionNum();u++)o.addIntersection(n,r,i,u)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.updateIM=function(){if(arguments.length===2){var n=arguments[0],r=arguments[1];r.setAtLeastIfValid(n.getLocation(0,Rt.ON),n.getLocation(1,Rt.ON),1),n.isArea()&&(r.setAtLeastIfValid(n.getLocation(0,Rt.LEFT),n.getLocation(1,Rt.LEFT),2),r.setAtLeastIfValid(n.getLocation(0,Rt.RIGHT),n.getLocation(1,Rt.RIGHT),2))}else return e.prototype.updateIM.apply(this,arguments)},t}(Ma),us=function(e){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Kl,this._bufParams=e||null};us.prototype.setWorkingPrecisionModel=function(e){this._workingPrecisionModel=e};us.prototype.insertUniqueEdge=function(e){var t=this._edgeList.findEqualEdge(e);if(t!==null){var n=t.getLabel(),r=e.getLabel();t.isPointwiseEqual(e)||(r=new Sr(e.getLabel()),r.flip()),n.merge(r);var i=us.depthDelta(r),o=t.getDepthDelta(),u=o+i;t.setDepthDelta(u)}else this._edgeList.add(e),e.setDepthDelta(us.depthDelta(e.getLabel()))};us.prototype.buildSubgraphs=function(e,t){for(var n=new qt,r=e.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),u=new Ig(n),l=u.getDepth(o);i.computeDepth(l),i.findResultEdges(),n.add(i),t.add(i.getDirectedEdges(),i.getNodes())}};us.prototype.createSubgraphs=function(e){for(var t=new qt,n=e.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new hs;i.create(r),t.add(i)}}return Wl.sort(t,Wl.reverseOrder()),t};us.prototype.createEmptyResultGeometry=function(){var e=this._geomFact.createPolygon();return e};us.prototype.getNoder=function(e){if(this._workingNoder!==null)return this._workingNoder;var t=new uO,n=new am;return n.setPrecisionModel(e),t.setSegmentIntersector(new Da(n)),t};us.prototype.buffer=function(e,t){var n=this._workingPrecisionModel;n===null&&(n=e.getPrecisionModel()),this._geomFact=e.getFactory();var r=new js(n,this._bufParams),i=new dl(e,t,r),o=i.getCurves();if(o.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(o,n),this._graph=new ci(new A$),this._graph.addEdges(this._edgeList.getEdges());var u=this.createSubgraphs(this._graph),l=new sa(this._geomFact);this.buildSubgraphs(u,l);var p=l.getPolygons();if(p.size()<=0)return this.createEmptyResultGeometry();var g=this._geomFact.buildGeometry(p);return g};us.prototype.computeNodedEdges=function(e,t){var n=this,r=this.getNoder(t);r.computeNodes(e);for(var i=r.getNodedSubstrings(),o=i.iterator();o.hasNext();){var u=o.next(),l=u.getCoordinates();if(!(l.length===2&&l[0].equals2D(l[1]))){var p=u.getData(),g=new fE(u.getCoordinates(),new Sr(p));n.insertUniqueEdge(g)}}};us.prototype.setNoder=function(e){this._workingNoder=e};us.prototype.interfaces_=function(){return[]};us.prototype.getClass=function(){return us};us.depthDelta=function(e){var t=e.getLocation(0,Rt.LEFT),n=e.getLocation(0,Rt.RIGHT);return t===st.INTERIOR&&n===st.EXTERIOR?1:t===st.EXTERIOR&&n===st.INTERIOR?-1:0};us.convertSegStrings=function(e){for(var t=new Wn,n=new qt;e.hasNext();){var r=e.next(),i=t.createLineString(r.getCoordinates());n.add(i)}return t.buildGeometry(n)};var md=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var e=arguments[0],t=arguments[1];this._noder=e,this._scaleFactor=t,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(arguments.length===4){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};md.prototype.rescale=function(){var e=this;if(Sn(arguments[0],Vi))for(var t=arguments[0],n=t.iterator();n.hasNext();){var r=n.next();e.rescale(r.getCoordinates())}else if(arguments[0]instanceof Array){for(var i=arguments[0],o=0;o<i.length;o++)i[o].x=i[o].x/e._scaleFactor+e._offsetX,i[o].y=i[o].y/e._scaleFactor+e._offsetY;i.length===2&&i[0].equals2D(i[1])&&Mo.out.println(i)}};md.prototype.scale=function(){var e=this;if(Sn(arguments[0],Vi)){for(var t=arguments[0],n=new qt,r=t.iterator();r.hasNext();){var i=r.next();n.add(new Ri(e.scale(i.getCoordinates()),i.getData()))}return n}else if(arguments[0]instanceof Array){for(var o=arguments[0],u=new Array(o.length).fill(null),l=0;l<o.length;l++)u[l]=new nt(Math.round((o[l].x-e._offsetX)*e._scaleFactor),Math.round((o[l].y-e._offsetY)*e._scaleFactor),o[l].z);var p=Kn.removeRepeatedPoints(u);return p}};md.prototype.isIntegerPrecision=function(){return this._scaleFactor===1};md.prototype.getNodedSubstrings=function(){var e=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(e),e};md.prototype.computeNodes=function(e){var t=e;this._isScaled&&(t=this.scale(e)),this._noder.computeNodes(t)};md.prototype.interfaces_=function(){return[Vp]};md.prototype.getClass=function(){return md};var Xu=function(){this._li=new am,this._segStrings=null;var e=arguments[0];this._segStrings=e},k$={fact:{configurable:!0}};Xu.prototype.checkEndPtVertexIntersections=function(){var e=this;if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();){var n=t.next(),r=n.getCoordinates();e.checkEndPtVertexIntersections(r[0],e._segStrings),e.checkEndPtVertexIntersections(r[r.length-1],e._segStrings)}else if(arguments.length===2){for(var i=arguments[0],o=arguments[1],u=o.iterator();u.hasNext();)for(var l=u.next(),p=l.getCoordinates(),g=1;g<p.length-1;g++)if(p[g].equals(i))throw new Yh("found endpt/interior pt intersection at index "+g+" :pt "+i)}};Xu.prototype.checkInteriorIntersections=function(){var e=this;if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();)for(var n=t.next(),r=this._segStrings.iterator();r.hasNext();){var i=r.next();e.checkInteriorIntersections(n,i)}else if(arguments.length===2)for(var o=arguments[0],u=arguments[1],l=o.getCoordinates(),p=u.getCoordinates(),g=0;g<l.length-1;g++)for(var x=0;x<p.length-1;x++)e.checkInteriorIntersections(o,g,u,x);else if(arguments.length===4){var y=arguments[0],_=arguments[1],T=arguments[2],A=arguments[3];if(y===T&&_===A)return null;var O=y.getCoordinates()[_],N=y.getCoordinates()[_+1],k=T.getCoordinates()[A],R=T.getCoordinates()[A+1];if(this._li.computeIntersection(O,N,k,R),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,O,N)||this.hasInteriorIntersection(this._li,k,R)))throw new Yh("found non-noded intersection at "+O+"-"+N+" and "+k+"-"+R)}};Xu.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()};Xu.prototype.checkCollapses=function(){var e=this;if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();){var n=t.next();e.checkCollapses(n)}else if(arguments.length===1)for(var r=arguments[0],i=r.getCoordinates(),o=0;o<i.length-2;o++)e.checkCollapse(i[o],i[o+1],i[o+2])};Xu.prototype.hasInteriorIntersection=function(e,t,n){for(var r=0;r<e.getIntersectionNum();r++){var i=e.getIntersection(r);if(!(i.equals(t)||i.equals(n)))return!0}return!1};Xu.prototype.checkCollapse=function(e,t,n){if(e.equals(n))throw new Yh("found non-noded collapse at "+Xu.fact.createLineString([e,t,n]))};Xu.prototype.interfaces_=function(){return[]};Xu.prototype.getClass=function(){return Xu};k$.fact.get=function(){return new Wn};Object.defineProperties(Xu,k$);var $s=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var e=arguments[0],t=arguments[1],n=arguments[2];if(this._originalPt=e,this._pt=e,this._scaleFactor=t,this._li=n,t<=0)throw new ri("Scale factor must be non-zero");t!==1&&(this._pt=new nt(this.scale(e.x),this.scale(e.y)),this._p0Scaled=new nt,this._p1Scaled=new nt),this.initCorners(this._pt)},R$={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};$s.prototype.intersectsScaled=function(e,t){var n=Math.min(e.x,t.x),r=Math.max(e.x,t.x),i=Math.min(e.y,t.y),o=Math.max(e.y,t.y),u=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(u)return!1;var l=this.intersectsToleranceSquare(e,t);return Dn.isTrue(!(u&&l),"Found bad envelope test"),l};$s.prototype.initCorners=function(e){var t=.5;this._minx=e.x-t,this._maxx=e.x+t,this._miny=e.y-t,this._maxy=e.y+t,this._corner[0]=new nt(this._maxx,this._maxy),this._corner[1]=new nt(this._minx,this._maxy),this._corner[2]=new nt(this._minx,this._miny),this._corner[3]=new nt(this._maxx,this._miny)};$s.prototype.intersects=function(e,t){return this._scaleFactor===1?this.intersectsScaled(e,t):(this.copyScaled(e,this._p0Scaled),this.copyScaled(t,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))};$s.prototype.scale=function(e){return Math.round(e*this._scaleFactor)};$s.prototype.getCoordinate=function(){return this._originalPt};$s.prototype.copyScaled=function(e,t){t.x=this.scale(e.x),t.y=this.scale(e.y)};$s.prototype.getSafeEnvelope=function(){if(this._safeEnv===null){var e=$s.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new dn(this._originalPt.x-e,this._originalPt.x+e,this._originalPt.y-e,this._originalPt.y+e)}return this._safeEnv};$s.prototype.intersectsPixelClosure=function(e,t){return this._li.computeIntersection(e,t,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(e,t,this._corner[1],this._corner[2]),this._li.hasIntersection())||(this._li.computeIntersection(e,t,this._corner[2],this._corner[3]),this._li.hasIntersection())||(this._li.computeIntersection(e,t,this._corner[3],this._corner[0]),this._li.hasIntersection()))};$s.prototype.intersectsToleranceSquare=function(e,t){var n=!1,r=!1;return this._li.computeIntersection(e,t,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(e,t,this._corner[1],this._corner[2]),this._li.isProper())||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(e,t,this._corner[2],this._corner[3]),this._li.isProper())||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(e,t,this._corner[3],this._corner[0]),this._li.isProper())||n&&r||e.equals(this._pt)||t.equals(this._pt))};$s.prototype.addSnappedNode=function(e,t){var n=e.getCoordinate(t),r=e.getCoordinate(t+1);return this.intersects(n,r)?(e.addIntersection(this.getCoordinate(),t),!0):!1};$s.prototype.interfaces_=function(){return[]};$s.prototype.getClass=function(){return $s};R$.SAFE_ENV_EXPANSION_FACTOR.get=function(){return .75};Object.defineProperties($s,R$);var j1=function(){this.tempEnv1=new dn,this.selectedSegment=new pn};j1.prototype.select=function(){if(arguments.length!==1&&arguments.length===2){var e=arguments[0],t=arguments[1];e.getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}};j1.prototype.interfaces_=function(){return[]};j1.prototype.getClass=function(){return j1};var q_=function(){this._index=null;var e=arguments[0];this._index=e},M$={HotPixelSnapAction:{configurable:!0}};q_.prototype.snap=function(){if(arguments.length===1){var e=arguments[0];return this.snap(e,null,-1)}else if(arguments.length===3){var t=arguments[0],n=arguments[1],r=arguments[2],i=t.getSafeEnvelope(),o=new N$(t,n,r);return this._index.query(i,{interfaces_:function(){return[fd]},visitItem:function(u){var l=u;l.select(i,o)}}),o.isNodeAdded()}};q_.prototype.interfaces_=function(){return[]};q_.prototype.getClass=function(){return q_};M$.HotPixelSnapAction.get=function(){return N$};Object.defineProperties(q_,M$);var N$=function(e){function t(){e.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var n=arguments[0],r=arguments[1],i=arguments[2];this._hotPixel=n,this._parentEdge=r,this._hotPixelVertexIndex=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isNodeAdded=function(){return this._isNodeAdded},t.prototype.select=function(){if(arguments.length===2){var n=arguments[0],r=arguments[1],i=n.getContext();if(this._parentEdge!==null&&i===this._parentEdge&&r===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(i,r)}else return e.prototype.select.apply(this,arguments)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(j1),Pg=function(){this._li=null,this._interiorIntersections=null;var e=arguments[0];this._li=e,this._interiorIntersections=new qt};Pg.prototype.processIntersections=function(e,t,n,r){var i=this;if(e===n&&t===r)return null;var o=e.getCoordinates()[t],u=e.getCoordinates()[t+1],l=n.getCoordinates()[r],p=n.getCoordinates()[r+1];if(this._li.computeIntersection(o,u,l,p),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var g=0;g<this._li.getIntersectionNum();g++)i._interiorIntersections.add(i._li.getIntersection(g));e.addIntersections(this._li,t,0),n.addIntersections(this._li,r,1)}};Pg.prototype.isDone=function(){return!1};Pg.prototype.getInteriorIntersections=function(){return this._interiorIntersections};Pg.prototype.interfaces_=function(){return[Hp]};Pg.prototype.getClass=function(){return Pg};var Zc=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var e=arguments[0];this._pm=e,this._li=new am,this._li.setPrecisionModel(e),this._scaleFactor=e.getScale()};Zc.prototype.checkCorrectness=function(e){var t=Ri.getNodedSubstrings(e),n=new Xu(t);try{n.checkValid()}catch(r){if(r instanceof _$)r.printStackTrace();else throw r}finally{}};Zc.prototype.getNodedSubstrings=function(){return Ri.getNodedSubstrings(this._nodedSegStrings)};Zc.prototype.snapRound=function(e,t){var n=this.findInteriorIntersections(e,t);this.computeIntersectionSnaps(n),this.computeVertexSnaps(e)};Zc.prototype.findInteriorIntersections=function(e,t){var n=new Pg(t);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(e),n.getInteriorIntersections()};Zc.prototype.computeVertexSnaps=function(){var e=this;if(Sn(arguments[0],Vi))for(var t=arguments[0],n=t.iterator();n.hasNext();){var r=n.next();e.computeVertexSnaps(r)}else if(arguments[0]instanceof Ri)for(var i=arguments[0],o=i.getCoordinates(),u=0;u<o.length;u++){var l=new $s(o[u],e._scaleFactor,e._li),p=e._pointSnapper.snap(l,i,u);p&&i.addIntersection(o[u],u)}};Zc.prototype.computeNodes=function(e){this._nodedSegStrings=e,this._noder=new uO,this._pointSnapper=new q_(this._noder.getIndex()),this.snapRound(e,this._li)};Zc.prototype.computeIntersectionSnaps=function(e){for(var t=this,n=e.iterator();n.hasNext();){var r=n.next(),i=new $s(r,t._scaleFactor,t._li);t._pointSnapper.snap(i)}};Zc.prototype.interfaces_=function(){return[Vp]};Zc.prototype.getClass=function(){return Zc};var Oo=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new pr,this._resultGeometry=null,this._saveException=null,arguments.length===1){var e=arguments[0];this._argGeom=e}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this._argGeom=t,this._bufParams=n}},hv={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Oo.prototype.bufferFixedPrecision=function(e){var t=new md(new Zc(new mr(1)),e.getScale()),n=new us(this._bufParams);n.setWorkingPrecisionModel(e),n.setNoder(t),this._resultGeometry=n.buffer(this._argGeom,this._distance)};Oo.prototype.bufferReducedPrecision=function(){var e=this;if(arguments.length===0){for(var t=Oo.MAX_PRECISION_DIGITS;t>=0;t--){try{e.bufferReducedPrecision(t)}catch(o){if(o instanceof Qh)e._saveException=o;else throw o}finally{}if(e._resultGeometry!==null)return null}throw this._saveException}else if(arguments.length===1){var n=arguments[0],r=Oo.precisionScaleFactor(this._argGeom,this._distance,n),i=new mr(r);this.bufferFixedPrecision(i)}};Oo.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var e=this._argGeom.getFactory().getPrecisionModel();e.getType()===mr.FIXED?this.bufferFixedPrecision(e):this.bufferReducedPrecision()};Oo.prototype.setQuadrantSegments=function(e){this._bufParams.setQuadrantSegments(e)};Oo.prototype.bufferOriginalPrecision=function(){try{var e=new us(this._bufParams);this._resultGeometry=e.buffer(this._argGeom,this._distance)}catch(t){if(t instanceof Yh)this._saveException=t;else throw t}finally{}};Oo.prototype.getResultGeometry=function(e){return this._distance=e,this.computeGeometry(),this._resultGeometry};Oo.prototype.setEndCapStyle=function(e){this._bufParams.setEndCapStyle(e)};Oo.prototype.interfaces_=function(){return[]};Oo.prototype.getClass=function(){return Oo};Oo.bufferOp=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=new Oo(e),r=n.getResultGeometry(t);return r}else if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof bn&&typeof arguments[1]=="number"){var i=arguments[0],o=arguments[1],u=arguments[2],l=new Oo(i);l.setQuadrantSegments(u);var p=l.getResultGeometry(o);return p}else if(arguments[2]instanceof pr&&arguments[0]instanceof bn&&typeof arguments[1]=="number"){var g=arguments[0],x=arguments[1],y=arguments[2],_=new Oo(g,y),T=_.getResultGeometry(x);return T}}else if(arguments.length===4){var A=arguments[0],O=arguments[1],N=arguments[2],k=arguments[3],R=new Oo(A);R.setQuadrantSegments(N),R.setEndCapStyle(k);var z=R.getResultGeometry(O);return z}};Oo.precisionScaleFactor=function(e,t,n){var r=e.getEnvelopeInternal(),i=Ra.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY())),o=t>0?t:0,u=i+2*o,l=Math.trunc(Math.log(u)/Math.log(10)+1),p=n-l,g=Math.pow(10,p);return g};hv.CAP_ROUND.get=function(){return pr.CAP_ROUND};hv.CAP_BUTT.get=function(){return pr.CAP_FLAT};hv.CAP_FLAT.get=function(){return pr.CAP_FLAT};hv.CAP_SQUARE.get=function(){return pr.CAP_SQUARE};hv.MAX_PRECISION_DIGITS.get=function(){return 12};Object.defineProperties(Oo,hv);var os=function(){this._pt=[new nt,new nt],this._distance=On.NaN,this._isNull=!0};os.prototype.getCoordinates=function(){return this._pt};os.prototype.getCoordinate=function(e){return this._pt[e]};os.prototype.setMinimum=function(){if(arguments.length===1){var e=arguments[0];this.setMinimum(e._pt[0],e._pt[1])}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var r=t.distance(n);r<this._distance&&this.initialize(t,n,r)}};os.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var e=arguments[0],t=arguments[1];this._pt[0].setCoordinate(e),this._pt[1].setCoordinate(t),this._distance=e.distance(t),this._isNull=!1}else if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}};os.prototype.getDistance=function(){return this._distance};os.prototype.setMaximum=function(){if(arguments.length===1){var e=arguments[0];this.setMaximum(e._pt[0],e._pt[1])}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var r=t.distance(n);r>this._distance&&this.initialize(t,n,r)}};os.prototype.interfaces_=function(){return[]};os.prototype.getClass=function(){return os};var Oc=function(){};Oc.prototype.interfaces_=function(){return[]};Oc.prototype.getClass=function(){return Oc};Oc.computeDistance=function(){if(arguments[2]instanceof os&&arguments[0]instanceof vi&&arguments[1]instanceof nt)for(var e=arguments[0],t=arguments[1],n=arguments[2],r=e.getCoordinates(),i=new pn,o=0;o<r.length-1;o++){i.setCoordinates(r[o],r[o+1]);var u=i.closestPoint(t);n.setMinimum(u,t)}else if(arguments[2]instanceof os&&arguments[0]instanceof Xi&&arguments[1]instanceof nt){var l=arguments[0],p=arguments[1],g=arguments[2];Oc.computeDistance(l.getExteriorRing(),p,g);for(var x=0;x<l.getNumInteriorRing();x++)Oc.computeDistance(l.getInteriorRingN(x),p,g)}else if(arguments[2]instanceof os&&arguments[0]instanceof bn&&arguments[1]instanceof nt){var y=arguments[0],_=arguments[1],T=arguments[2];if(y instanceof vi)Oc.computeDistance(y,_,T);else if(y instanceof Xi)Oc.computeDistance(y,_,T);else if(y instanceof cs)for(var A=y,O=0;O<A.getNumGeometries();O++){var N=A.getGeometryN(O);Oc.computeDistance(N,_,T)}else T.setMinimum(y.getCoordinate(),_)}else if(arguments[2]instanceof os&&arguments[0]instanceof pn&&arguments[1]instanceof nt){var k=arguments[0],R=arguments[1],z=arguments[2],D=k.closestPoint(R);z.setMinimum(D,R)}};var Wp=function(e){this._maxPtDist=new os,this._inputGeom=e||null},cO={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};Wp.prototype.computeMaxMidpointDistance=function(e){var t=new gd(this._inputGeom);e.apply(t),this._maxPtDist.setMaximum(t.getMaxPointDistance())};Wp.prototype.computeMaxVertexDistance=function(e){var t=new Lg(this._inputGeom);e.apply(t),this._maxPtDist.setMaximum(t.getMaxPointDistance())};Wp.prototype.findDistance=function(e){return this.computeMaxVertexDistance(e),this.computeMaxMidpointDistance(e),this._maxPtDist.getDistance()};Wp.prototype.getDistancePoints=function(){return this._maxPtDist};Wp.prototype.interfaces_=function(){return[]};Wp.prototype.getClass=function(){return Wp};cO.MaxPointDistanceFilter.get=function(){return Lg};cO.MaxMidpointDistanceFilter.get=function(){return gd};Object.defineProperties(Wp,cO);var Lg=function(e){this._maxPtDist=new os,this._minPtDist=new os,this._geom=e||null};Lg.prototype.filter=function(e){this._minPtDist.initialize(),Oc.computeDistance(this._geom,e,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};Lg.prototype.getMaxPointDistance=function(){return this._maxPtDist};Lg.prototype.interfaces_=function(){return[Uc]};Lg.prototype.getClass=function(){return Lg};var gd=function(e){this._maxPtDist=new os,this._minPtDist=new os,this._geom=e||null};gd.prototype.filter=function(e,t){if(t===0)return null;var n=e.getCoordinate(t-1),r=e.getCoordinate(t),i=new nt((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),Oc.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};gd.prototype.isDone=function(){return!1};gd.prototype.isGeometryChanged=function(){return!1};gd.prototype.getMaxPointDistance=function(){return this._maxPtDist};gd.prototype.interfaces_=function(){return[Hl]};gd.prototype.getClass=function(){return gd};var Kh=function(e){this._comps=e||null};Kh.prototype.filter=function(e){e instanceof Xi&&this._comps.add(e)};Kh.prototype.interfaces_=function(){return[Gu]};Kh.prototype.getClass=function(){return Kh};Kh.getPolygons=function(){if(arguments.length===1){var e=arguments[0];return Kh.getPolygons(e,new qt)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];return t instanceof Xi?n.add(t):t instanceof cs&&t.apply(new Kh(n)),n}};var Lo=function(){if(this._lines=null,this._isForcedToLineString=!1,arguments.length===1){var e=arguments[0];this._lines=e}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this._lines=t,this._isForcedToLineString=n}};Lo.prototype.filter=function(e){if(this._isForcedToLineString&&e instanceof qc){var t=e.getFactory().createLineString(e.getCoordinateSequence());return this._lines.add(t),null}e instanceof vi&&this._lines.add(e)};Lo.prototype.setForceToLineString=function(e){this._isForcedToLineString=e};Lo.prototype.interfaces_=function(){return[Jh]};Lo.prototype.getClass=function(){return Lo};Lo.getGeometry=function(){if(arguments.length===1){var e=arguments[0];return e.getFactory().buildGeometry(Lo.getLines(e))}else if(arguments.length===2){var t=arguments[0],n=arguments[1];return t.getFactory().buildGeometry(Lo.getLines(t,n))}};Lo.getLines=function(){if(arguments.length===1){var e=arguments[0];return Lo.getLines(e,!1)}else if(arguments.length===2){if(Sn(arguments[0],Vi)&&Sn(arguments[1],Vi)){for(var t=arguments[0],n=arguments[1],r=t.iterator();r.hasNext();){var i=r.next();Lo.getLines(i,n)}return n}else if(arguments[0]instanceof bn&&typeof arguments[1]=="boolean"){var o=arguments[0],u=arguments[1],l=new qt;return o.apply(new Lo(l,u)),l}else if(arguments[0]instanceof bn&&Sn(arguments[1],Vi)){var p=arguments[0],g=arguments[1];return p instanceof vi?g.add(p):p.apply(new Lo(g)),g}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&Sn(arguments[0],Vi)&&Sn(arguments[1],Vi)){for(var x=arguments[0],y=arguments[1],_=arguments[2],T=x.iterator();T.hasNext();){var A=T.next();Lo.getLines(A,y,_)}return y}else if(typeof arguments[2]=="boolean"&&arguments[0]instanceof bn&&Sn(arguments[1],Vi)){var O=arguments[0],N=arguments[1],k=arguments[2];return O.apply(new Lo(N,k)),N}}};var Xl=function(){if(this._boundaryRule=hl.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,arguments.length!==0&&arguments.length===1){var e=arguments[0];if(e===null)throw new ri("Rule must be non-null");this._boundaryRule=e}};Xl.prototype.locateInternal=function(){var e=this;if(arguments[0]instanceof nt&&arguments[1]instanceof Xi){var t=arguments[0],n=arguments[1];if(n.isEmpty())return st.EXTERIOR;var r=n.getExteriorRing(),i=this.locateInPolygonRing(t,r);if(i===st.EXTERIOR)return st.EXTERIOR;if(i===st.BOUNDARY)return st.BOUNDARY;for(var o=0;o<n.getNumInteriorRing();o++){var u=n.getInteriorRingN(o),l=e.locateInPolygonRing(t,u);if(l===st.INTERIOR)return st.EXTERIOR;if(l===st.BOUNDARY)return st.BOUNDARY}return st.INTERIOR}else if(arguments[0]instanceof nt&&arguments[1]instanceof vi){var p=arguments[0],g=arguments[1];if(!g.getEnvelopeInternal().intersects(p))return st.EXTERIOR;var x=g.getCoordinates();return!g.isClosed()&&(p.equals(x[0])||p.equals(x[x.length-1]))?st.BOUNDARY:Yt.isOnLine(p,x)?st.INTERIOR:st.EXTERIOR}else if(arguments[0]instanceof nt&&arguments[1]instanceof oa){var y=arguments[0],_=arguments[1],T=_.getCoordinate();return T.equals2D(y)?st.INTERIOR:st.EXTERIOR}};Xl.prototype.locateInPolygonRing=function(e,t){return t.getEnvelopeInternal().intersects(e)?Yt.locatePointInRing(e,t.getCoordinates()):st.EXTERIOR};Xl.prototype.intersects=function(e,t){return this.locate(e,t)!==st.EXTERIOR};Xl.prototype.updateLocationInfo=function(e){e===st.INTERIOR&&(this._isIn=!0),e===st.BOUNDARY&&this._numBoundaries++};Xl.prototype.computeLocation=function(e,t){var n=this;if(t instanceof oa&&this.updateLocationInfo(this.locateInternal(e,t)),t instanceof vi)this.updateLocationInfo(this.locateInternal(e,t));else if(t instanceof Xi)this.updateLocationInfo(this.locateInternal(e,t));else if(t instanceof qp)for(var r=t,i=0;i<r.getNumGeometries();i++){var o=r.getGeometryN(i);n.updateLocationInfo(n.locateInternal(e,o))}else if(t instanceof zc)for(var u=t,l=0;l<u.getNumGeometries();l++){var p=u.getGeometryN(l);n.updateLocationInfo(n.locateInternal(e,p))}else if(t instanceof cs)for(var g=new Fc(t);g.hasNext();){var x=g.next();x!==t&&n.computeLocation(e,x)}};Xl.prototype.locate=function(e,t){return t.isEmpty()?st.EXTERIOR:t instanceof vi?this.locateInternal(e,t):t instanceof Xi?this.locateInternal(e,t):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(e,t),this._boundaryRule.isInBoundary(this._numBoundaries)?st.BOUNDARY:this._numBoundaries>0||this._isIn?st.INTERIOR:st.EXTERIOR)};Xl.prototype.interfaces_=function(){return[]};Xl.prototype.getClass=function(){return Xl};var ss=function e(){if(this._component=null,this._segIndex=null,this._pt=null,arguments.length===2){var t=arguments[0],n=arguments[1];e.call(this,t,e.INSIDE_AREA,n)}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];this._component=r,this._segIndex=i,this._pt=o}},D$={INSIDE_AREA:{configurable:!0}};ss.prototype.isInsideArea=function(){return this._segIndex===ss.INSIDE_AREA};ss.prototype.getCoordinate=function(){return this._pt};ss.prototype.getGeometryComponent=function(){return this._component};ss.prototype.getSegmentIndex=function(){return this._segIndex};ss.prototype.interfaces_=function(){return[]};ss.prototype.getClass=function(){return ss};D$.INSIDE_AREA.get=function(){return-1};Object.defineProperties(ss,D$);var nd=function(e){this._pts=e||null};nd.prototype.filter=function(e){e instanceof oa&&this._pts.add(e)};nd.prototype.interfaces_=function(){return[Gu]};nd.prototype.getClass=function(){return nd};nd.getPoints=function(){if(arguments.length===1){var e=arguments[0];return e instanceof oa?Wl.singletonList(e):nd.getPoints(e,new qt)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];return t instanceof oa?n.add(t):t instanceof cs&&t.apply(new nd(n)),n}};var Ag=function(){this._locations=null;var e=arguments[0];this._locations=e};Ag.prototype.filter=function(e){(e instanceof oa||e instanceof vi||e instanceof Xi)&&this._locations.add(new ss(e,0,e.getCoordinate()))};Ag.prototype.interfaces_=function(){return[Gu]};Ag.prototype.getClass=function(){return Ag};Ag.getLocations=function(e){var t=new qt;return e.apply(new Ag(t)),t};var No=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Xl,this._minDistanceLocation=null,this._minDistance=On.MAX_VALUE,arguments.length===2){var e=arguments[0],t=arguments[1];this._geom=[e,t],this._terminateDistance=0}else if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};No.prototype.computeContainmentDistance=function(){var e=this;if(arguments.length===0){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=1-n,o=Kh.getPolygons(this._geom[n]);if(o.size()>0){var u=Ag.getLocations(this._geom[i]);if(this.computeContainmentDistance(u,o,r),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[i]=r[0],this._minDistanceLocation[n]=r[1],null}}else if(arguments.length===3){if(arguments[2]instanceof Array&&Sn(arguments[0],$l)&&Sn(arguments[1],$l)){for(var l=arguments[0],p=arguments[1],g=arguments[2],x=0;x<l.size();x++)for(var y=l.get(x),_=0;_<p.size();_++)if(e.computeContainmentDistance(y,p.get(_),g),e._minDistance<=e._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof ss&&arguments[1]instanceof Xi){var T=arguments[0],A=arguments[1],O=arguments[2],N=T.getCoordinate();if(st.EXTERIOR!==this._ptLocator.locate(N,A))return this._minDistance=0,O[0]=T,O[1]=new ss(A,N),null}}};No.prototype.computeMinDistanceLinesPoints=function(e,t,n){for(var r=this,i=0;i<e.size();i++)for(var o=e.get(i),u=0;u<t.size();u++){var l=t.get(u);if(r.computeMinDistance(o,l,n),r._minDistance<=r._terminateDistance)return null}};No.prototype.computeFacetDistance=function(){var e=new Array(2).fill(null),t=Lo.getLines(this._geom[0]),n=Lo.getLines(this._geom[1]),r=nd.getPoints(this._geom[0]),i=nd.getPoints(this._geom[1]);if(this.computeMinDistanceLines(t,n,e),this.updateMinDistance(e,!1),this._minDistance<=this._terminateDistance||(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(t,i,e),this.updateMinDistance(e,!1),this._minDistance<=this._terminateDistance)||(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(n,r,e),this.updateMinDistance(e,!0),this._minDistance<=this._terminateDistance))return null;e[0]=null,e[1]=null,this.computeMinDistancePoints(r,i,e),this.updateMinDistance(e,!1)};No.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation};No.prototype.updateMinDistance=function(e,t){if(e[0]===null)return null;t?(this._minDistanceLocation[0]=e[1],this._minDistanceLocation[1]=e[0]):(this._minDistanceLocation[0]=e[0],this._minDistanceLocation[1]=e[1])};No.prototype.nearestPoints=function(){this.computeMinDistance();var e=[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()];return e};No.prototype.computeMinDistance=function(){var e=this;if(arguments.length===0){if(this._minDistanceLocation!==null||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(arguments.length===3){if(arguments[2]instanceof Array&&arguments[0]instanceof vi&&arguments[1]instanceof oa){var t=arguments[0],n=arguments[1],r=arguments[2];if(t.getEnvelopeInternal().distance(n.getEnvelopeInternal())>this._minDistance)return null;for(var i=t.getCoordinates(),o=n.getCoordinate(),u=0;u<i.length-1;u++){var l=Yt.distancePointLine(o,i[u],i[u+1]);if(l<e._minDistance){e._minDistance=l;var p=new pn(i[u],i[u+1]),g=p.closestPoint(o);r[0]=new ss(t,u,g),r[1]=new ss(n,0,o)}if(e._minDistance<=e._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof vi&&arguments[1]instanceof vi){var x=arguments[0],y=arguments[1],_=arguments[2];if(x.getEnvelopeInternal().distance(y.getEnvelopeInternal())>this._minDistance)return null;for(var T=x.getCoordinates(),A=y.getCoordinates(),O=0;O<T.length-1;O++)for(var N=0;N<A.length-1;N++){var k=Yt.distanceLineLine(T[O],T[O+1],A[N],A[N+1]);if(k<e._minDistance){e._minDistance=k;var R=new pn(T[O],T[O+1]),z=new pn(A[N],A[N+1]),D=R.closestPoints(z);_[0]=new ss(x,O,D[0]),_[1]=new ss(y,N,D[1])}if(e._minDistance<=e._terminateDistance)return null}}}};No.prototype.computeMinDistancePoints=function(e,t,n){for(var r=this,i=0;i<e.size();i++)for(var o=e.get(i),u=0;u<t.size();u++){var l=t.get(u),p=o.getCoordinate().distance(l.getCoordinate());if(p<r._minDistance&&(r._minDistance=p,n[0]=new ss(o,0,o.getCoordinate()),n[1]=new ss(l,0,l.getCoordinate())),r._minDistance<=r._terminateDistance)return null}};No.prototype.distance=function(){if(this._geom[0]===null||this._geom[1]===null)throw new ri("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)};No.prototype.computeMinDistanceLines=function(e,t,n){for(var r=this,i=0;i<e.size();i++)for(var o=e.get(i),u=0;u<t.size();u++){var l=t.get(u);if(r.computeMinDistance(o,l,n),r._minDistance<=r._terminateDistance)return null}};No.prototype.interfaces_=function(){return[]};No.prototype.getClass=function(){return No};No.distance=function(e,t){var n=new No(e,t);return n.distance()};No.isWithinDistance=function(e,t,n){var r=new No(e,t,n);return r.distance()<=n};No.nearestPoints=function(e,t){var n=new No(e,t);return n.nearestPoints()};var Uo=function(){this._pt=[new nt,new nt],this._distance=On.NaN,this._isNull=!0};Uo.prototype.getCoordinates=function(){return this._pt};Uo.prototype.getCoordinate=function(e){return this._pt[e]};Uo.prototype.setMinimum=function(){if(arguments.length===1){var e=arguments[0];this.setMinimum(e._pt[0],e._pt[1])}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var r=t.distance(n);r<this._distance&&this.initialize(t,n,r)}};Uo.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var e=arguments[0],t=arguments[1];this._pt[0].setCoordinate(e),this._pt[1].setCoordinate(t),this._distance=e.distance(t),this._isNull=!1}else if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}};Uo.prototype.toString=function(){return Gl.toLineString(this._pt[0],this._pt[1])};Uo.prototype.getDistance=function(){return this._distance};Uo.prototype.setMaximum=function(){if(arguments.length===1){var e=arguments[0];this.setMaximum(e._pt[0],e._pt[1])}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var r=t.distance(n);r>this._distance&&this.initialize(t,n,r)}};Uo.prototype.interfaces_=function(){return[]};Uo.prototype.getClass=function(){return Uo};var Ru=function(){};Ru.prototype.interfaces_=function(){return[]};Ru.prototype.getClass=function(){return Ru};Ru.computeDistance=function(){if(arguments[2]instanceof Uo&&arguments[0]instanceof vi&&arguments[1]instanceof nt)for(var e=arguments[0],t=arguments[1],n=arguments[2],r=new pn,i=e.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var u=r.closestPoint(t);n.setMinimum(u,t)}else if(arguments[2]instanceof Uo&&arguments[0]instanceof Xi&&arguments[1]instanceof nt){var l=arguments[0],p=arguments[1],g=arguments[2];Ru.computeDistance(l.getExteriorRing(),p,g);for(var x=0;x<l.getNumInteriorRing();x++)Ru.computeDistance(l.getInteriorRingN(x),p,g)}else if(arguments[2]instanceof Uo&&arguments[0]instanceof bn&&arguments[1]instanceof nt){var y=arguments[0],_=arguments[1],T=arguments[2];if(y instanceof vi)Ru.computeDistance(y,_,T);else if(y instanceof Xi)Ru.computeDistance(y,_,T);else if(y instanceof cs)for(var A=y,O=0;O<A.getNumGeometries();O++){var N=A.getGeometryN(O);Ru.computeDistance(N,_,T)}else T.setMinimum(y.getCoordinate(),_)}else if(arguments[2]instanceof Uo&&arguments[0]instanceof pn&&arguments[1]instanceof nt){var k=arguments[0],R=arguments[1],z=arguments[2],D=k.closestPoint(R);z.setMinimum(D,R)}};var ul=function(){this._g0=null,this._g1=null,this._ptDist=new Uo,this._densifyFrac=0;var e=arguments[0],t=arguments[1];this._g0=e,this._g1=t},hO={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};ul.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()};ul.prototype.setDensifyFraction=function(e){if(e>1||e<=0)throw new ri("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=e};ul.prototype.compute=function(e,t){this.computeOrientedDistance(e,t,this._ptDist),this.computeOrientedDistance(t,e,this._ptDist)};ul.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()};ul.prototype.computeOrientedDistance=function(e,t,n){var r=new Og(t);if(e.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new yd(t,this._densifyFrac);e.apply(i),n.setMaximum(i.getMaxPointDistance())}};ul.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()};ul.prototype.interfaces_=function(){return[]};ul.prototype.getClass=function(){return ul};ul.distance=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=new ul(e,t);return n.distance()}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2],u=new ul(r,i);return u.setDensifyFraction(o),u.distance()}};hO.MaxPointDistanceFilter.get=function(){return Og};hO.MaxDensifiedByFractionDistanceFilter.get=function(){return yd};Object.defineProperties(ul,hO);var Og=function(){this._maxPtDist=new Uo,this._minPtDist=new Uo,this._euclideanDist=new Ru,this._geom=null;var e=arguments[0];this._geom=e};Og.prototype.filter=function(e){this._minPtDist.initialize(),Ru.computeDistance(this._geom,e,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};Og.prototype.getMaxPointDistance=function(){return this._maxPtDist};Og.prototype.interfaces_=function(){return[Uc]};Og.prototype.getClass=function(){return Og};var yd=function(){this._maxPtDist=new Uo,this._minPtDist=new Uo,this._geom=null,this._numSubSegs=0;var e=arguments[0],t=arguments[1];this._geom=e,this._numSubSegs=Math.trunc(Math.round(1/t))};yd.prototype.filter=function(e,t){var n=this;if(t===0)return null;for(var r=e.getCoordinate(t-1),i=e.getCoordinate(t),o=(i.x-r.x)/this._numSubSegs,u=(i.y-r.y)/this._numSubSegs,l=0;l<this._numSubSegs;l++){var p=r.x+l*o,g=r.y+l*u,x=new nt(p,g);n._minPtDist.initialize(),Ru.computeDistance(n._geom,x,n._minPtDist),n._maxPtDist.setMaximum(n._minPtDist)}};yd.prototype.isDone=function(){return!1};yd.prototype.isGeometryChanged=function(){return!1};yd.prototype.getMaxPointDistance=function(){return this._maxPtDist};yd.prototype.interfaces_=function(){return[Hl]};yd.prototype.getClass=function(){return yd};var na=function(e,t,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=e||null,this._bufDistance=t||null,this._result=n||null},fO={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};na.prototype.checkMaximumDistance=function(e,t,n){var r=new ul(t,e);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=e.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Gl.toLineString(i[0],i[1])+")"}};na.prototype.isValid=function(){var e=Math.abs(this._bufDistance),t=na.MAX_DISTANCE_DIFF_FRAC*e;return this._minValidDistance=e-t,this._maxValidDistance=e+t,this._input.isEmpty()||this._result.isEmpty()?!0:(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),na.VERBOSE&&Mo.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)};na.prototype.checkNegativeValid=function(){if(!(this._input instanceof Xi||this._input instanceof zc||this._input instanceof cs))return null;var e=this.getPolygonLines(this._input);if(this.checkMinimumDistance(e,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(e,this._result,this._maxValidDistance)};na.prototype.getErrorIndicator=function(){return this._errorIndicator};na.prototype.checkMinimumDistance=function(e,t,n){var r=new No(e,t,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=e.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Gl.toLineString(i[0],i[1])+" )"}};na.prototype.checkPositiveValid=function(){var e=this._result.getBoundary();if(this.checkMinimumDistance(this._input,e,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,e,this._maxValidDistance)};na.prototype.getErrorLocation=function(){return this._errorLocation};na.prototype.getPolygonLines=function(e){for(var t=new qt,n=new Lo(t),r=Kh.getPolygons(e),i=r.iterator();i.hasNext();){var o=i.next();o.apply(n)}return e.getFactory().buildGeometry(t)};na.prototype.getErrorMessage=function(){return this._errMsg};na.prototype.interfaces_=function(){return[]};na.prototype.getClass=function(){return na};fO.VERBOSE.get=function(){return!1};fO.MAX_DISTANCE_DIFF_FRAC.get=function(){return .012};Object.defineProperties(na,fO);var Do=function(e,t,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=e||null,this._distance=t||null,this._result=n||null},dO={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Do.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid};Do.prototype.checkEnvelope=function(){if(this._distance<0)return null;var e=this._distance*Do.MAX_ENV_DIFF_FRAC;e===0&&(e=.001);var t=new dn(this._input.getEnvelopeInternal());t.expandBy(this._distance);var n=new dn(this._result.getEnvelopeInternal());n.expandBy(e),n.contains(t)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")};Do.prototype.checkDistance=function(){var e=new na(this._input,this._distance,this._result);e.isValid()||(this._isValid=!1,this._errorMsg=e.getErrorMessage(),this._errorLocation=e.getErrorLocation(),this._errorIndicator=e.getErrorIndicator()),this.report("Distance")};Do.prototype.checkArea=function(){var e=this._input.getArea(),t=this._result.getArea();this._distance>0&&e>t&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&e<t&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")};Do.prototype.checkPolygonal=function(){this._result instanceof Xi||this._result instanceof zc||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")};Do.prototype.getErrorIndicator=function(){return this._errorIndicator};Do.prototype.getErrorLocation=function(){return this._errorLocation};Do.prototype.checkExpectedEmpty=function(){if(this._input.getDimension()>=2||this._distance>0)return null;this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),this.report("ExpectedEmpty")};Do.prototype.report=function(e){if(!Do.VERBOSE)return null;Mo.out.println("Check "+e+": "+(this._isValid?"passed":"FAILED"))};Do.prototype.getErrorMessage=function(){return this._errorMsg};Do.prototype.interfaces_=function(){return[]};Do.prototype.getClass=function(){return Do};Do.isValidMsg=function(e,t,n){var r=new Do(e,t,n);return r.isValid()?null:r.getErrorMessage()};Do.isValid=function(e,t,n){var r=new Do(e,t,n);return!!r.isValid()};dO.VERBOSE.get=function(){return!1};dO.MAX_ENV_DIFF_FRAC.get=function(){return .012};Object.defineProperties(Do,dO);var Yu=function(){this._pts=null,this._data=null;var e=arguments[0],t=arguments[1];this._pts=e,this._data=t};Yu.prototype.getCoordinates=function(){return this._pts};Yu.prototype.size=function(){return this._pts.length};Yu.prototype.getCoordinate=function(e){return this._pts[e]};Yu.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])};Yu.prototype.getSegmentOctant=function(e){return e===this._pts.length-1?-1:Cg.octant(this.getCoordinate(e),this.getCoordinate(e+1))};Yu.prototype.setData=function(e){this._data=e};Yu.prototype.getData=function(){return this._data};Yu.prototype.toString=function(){return Gl.toLineString(new Pi(this._pts))};Yu.prototype.interfaces_=function(){return[Gc]};Yu.prototype.getClass=function(){return Yu};var Eo=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new qt,this._intersectionCount=0,this._keepIntersections=!0;var e=arguments[0];this._li=e,this._interiorIntersection=null};Eo.prototype.getInteriorIntersection=function(){return this._interiorIntersection};Eo.prototype.setCheckEndSegmentsOnly=function(e){this._isCheckEndSegmentsOnly=e};Eo.prototype.getIntersectionSegments=function(){return this._intSegments};Eo.prototype.count=function(){return this._intersectionCount};Eo.prototype.getIntersections=function(){return this._intersections};Eo.prototype.setFindAllIntersections=function(e){this._findAllIntersections=e};Eo.prototype.setKeepIntersections=function(e){this._keepIntersections=e};Eo.prototype.processIntersections=function(e,t,n,r){if(!this._findAllIntersections&&this.hasIntersection()||e===n&&t===r)return null;if(this._isCheckEndSegmentsOnly){var i=this.isEndSegment(e,t)||this.isEndSegment(n,r);if(!i)return null}var o=e.getCoordinates()[t],u=e.getCoordinates()[t+1],l=n.getCoordinates()[r],p=n.getCoordinates()[r+1];this._li.computeIntersection(o,u,l,p),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=o,this._intSegments[1]=u,this._intSegments[2]=l,this._intSegments[3]=p,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)};Eo.prototype.isEndSegment=function(e,t){return t===0||t>=e.size()-2};Eo.prototype.hasIntersection=function(){return this._interiorIntersection!==null};Eo.prototype.isDone=function(){return this._findAllIntersections?!1:this._interiorIntersection!==null};Eo.prototype.interfaces_=function(){return[Hp]};Eo.prototype.getClass=function(){return Eo};Eo.createAllIntersectionsFinder=function(e){var t=new Eo(e);return t.setFindAllIntersections(!0),t};Eo.createAnyIntersectionFinder=function(e){return new Eo(e)};Eo.createIntersectionCounter=function(e){var t=new Eo(e);return t.setFindAllIntersections(!0),t.setKeepIntersections(!1),t};var Yl=function(){this._li=new am,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var e=arguments[0];this._segStrings=e};Yl.prototype.execute=function(){if(this._segInt!==null)return null;this.checkInteriorIntersections()};Yl.prototype.getIntersections=function(){return this._segInt.getIntersections()};Yl.prototype.isValid=function(){return this.execute(),this._isValid};Yl.prototype.setFindAllIntersections=function(e){this._findAllIntersections=e};Yl.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Eo(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var e=new uO;if(e.setSegmentIntersector(this._segInt),e.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null};Yl.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Qh(this.getErrorMessage(),this._segInt.getInteriorIntersection())};Yl.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var e=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Gl.toLineString(e[0],e[1])+" and "+Gl.toLineString(e[2],e[3])};Yl.prototype.interfaces_=function(){return[]};Yl.prototype.getClass=function(){return Yl};Yl.computeIntersections=function(e){var t=new Yl(e);return t.setFindAllIntersections(!0),t.isValid(),t.getIntersections()};var Kp=function e(){this._nv=null;var t=arguments[0];this._nv=new Yl(e.toSegmentStrings(t))};Kp.prototype.checkValid=function(){this._nv.checkValid()};Kp.prototype.interfaces_=function(){return[]};Kp.prototype.getClass=function(){return Kp};Kp.toSegmentStrings=function(e){for(var t=new qt,n=e.iterator();n.hasNext();){var r=n.next();t.add(new Yu(r.getCoordinates(),r))}return t};Kp.checkValid=function(e){var t=new Kp(e);t.checkValid()};var kg=function(e){this._mapOp=e};kg.prototype.map=function(e){for(var t=this,n=new qt,r=0;r<e.getNumGeometries();r++){var i=t._mapOp.map(e.getGeometryN(r));i.isEmpty()||n.add(i)}return e.getFactory().createGeometryCollection(Wn.toGeometryArray(n))};kg.prototype.interfaces_=function(){return[]};kg.prototype.getClass=function(){return kg};kg.map=function(e,t){var n=new kg(t);return n.map(e)};var Ju=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new qt,this._resultLineList=new qt;var e=arguments[0],t=arguments[1],n=arguments[2];this._op=e,this._geometryFactory=t,this._ptLocator=n};Ju.prototype.collectLines=function(e){for(var t=this,n=this._op.getGraph().getEdgeEnds().iterator();n.hasNext();){var r=n.next();t.collectLineEdge(r,e,t._lineEdgesList),t.collectBoundaryTouchEdge(r,e,t._lineEdgesList)}};Ju.prototype.labelIsolatedLine=function(e,t){var n=this._ptLocator.locate(e.getCoordinate(),this._op.getArgGeometry(t));e.getLabel().setLocation(t,n)};Ju.prototype.build=function(e){return this.findCoveredLineEdges(),this.collectLines(e),this.buildLines(e),this._resultLineList};Ju.prototype.collectLineEdge=function(e,t,n){var r=e.getLabel(),i=e.getEdge();e.isLineEdge()&&!e.isVisited()&&Rn.isResultOfOp(r,t)&&!i.isCovered()&&(n.add(i),e.setVisitedEdge(!0))};Ju.prototype.findCoveredLineEdges=function(){for(var e=this,t=this._op.getGraph().getNodes().iterator();t.hasNext();){var n=t.next();n.getEdges().findCoveredLineEdges()}for(var r=this._op.getGraph().getEdgeEnds().iterator();r.hasNext();){var i=r.next(),o=i.getEdge();if(i.isLineEdge()&&!o.isCoveredSet()){var u=e._op.isCoveredByA(i.getCoordinate());o.setCovered(u)}}};Ju.prototype.labelIsolatedLines=function(e){for(var t=this,n=e.iterator();n.hasNext();){var r=n.next(),i=r.getLabel();r.isIsolated()&&(i.isNull(0)?t.labelIsolatedLine(r,0):t.labelIsolatedLine(r,1))}};Ju.prototype.buildLines=function(e){for(var t=this,n=this._lineEdgesList.iterator();n.hasNext();){var r=n.next(),i=t._geometryFactory.createLineString(r.getCoordinates());t._resultLineList.add(i),r.setInResult(!0)}};Ju.prototype.collectBoundaryTouchEdge=function(e,t,n){var r=e.getLabel();if(e.isLineEdge()||e.isVisited()||e.isInteriorAreaEdge()||e.getEdge().isInResult())return null;Dn.isTrue(!(e.isInResult()||e.getSym().isInResult())||!e.getEdge().isInResult()),Rn.isResultOfOp(r,t)&&t===Rn.INTERSECTION&&(n.add(e.getEdge()),e.setVisitedEdge(!0))};Ju.prototype.interfaces_=function(){return[]};Ju.prototype.getClass=function(){return Ju};var Rg=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new qt;var e=arguments[0],t=arguments[1];this._op=e,this._geometryFactory=t};Rg.prototype.filterCoveredNodeToPoint=function(e){var t=e.getCoordinate();if(!this._op.isCoveredByLA(t)){var n=this._geometryFactory.createPoint(t);this._resultPointList.add(n)}};Rg.prototype.extractNonCoveredResultNodes=function(e){for(var t=this,n=this._op.getGraph().getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isInResult()&&!r.isIncidentEdgeInResult()&&(r.getEdges().getDegree()===0||e===Rn.INTERSECTION)){var i=r.getLabel();Rn.isResultOfOp(i,e)&&t.filterCoveredNodeToPoint(r)}}};Rg.prototype.build=function(e){return this.extractNonCoveredResultNodes(e),this._resultPointList};Rg.prototype.interfaces_=function(){return[]};Rg.prototype.getClass=function(){return Rg};var Us=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Us.prototype.transformPoint=function(e,t){return this._factory.createPoint(this.transformCoordinates(e.getCoordinateSequence(),e))};Us.prototype.transformPolygon=function(e,t){var n=this,r=!0,i=this.transformLinearRing(e.getExteriorRing(),e);(i===null||!(i instanceof qc)||i.isEmpty())&&(r=!1);for(var o=new qt,u=0;u<e.getNumInteriorRing();u++){var l=n.transformLinearRing(e.getInteriorRingN(u),e);l===null||l.isEmpty()||(l instanceof qc||(r=!1),o.add(l))}if(r)return this._factory.createPolygon(i,o.toArray([]));var p=new qt;return i!==null&&p.add(i),p.addAll(o),this._factory.buildGeometry(p)};Us.prototype.createCoordinateSequence=function(e){return this._factory.getCoordinateSequenceFactory().create(e)};Us.prototype.getInputGeometry=function(){return this._inputGeom};Us.prototype.transformMultiLineString=function(e,t){for(var n=this,r=new qt,i=0;i<e.getNumGeometries();i++){var o=n.transformLineString(e.getGeometryN(i),e);o!==null&&(o.isEmpty()||r.add(o))}return this._factory.buildGeometry(r)};Us.prototype.transformCoordinates=function(e,t){return this.copy(e)};Us.prototype.transformLineString=function(e,t){return this._factory.createLineString(this.transformCoordinates(e.getCoordinateSequence(),e))};Us.prototype.transformMultiPoint=function(e,t){for(var n=this,r=new qt,i=0;i<e.getNumGeometries();i++){var o=n.transformPoint(e.getGeometryN(i),e);o!==null&&(o.isEmpty()||r.add(o))}return this._factory.buildGeometry(r)};Us.prototype.transformMultiPolygon=function(e,t){for(var n=this,r=new qt,i=0;i<e.getNumGeometries();i++){var o=n.transformPolygon(e.getGeometryN(i),e);o!==null&&(o.isEmpty()||r.add(o))}return this._factory.buildGeometry(r)};Us.prototype.copy=function(e){return e.copy()};Us.prototype.transformGeometryCollection=function(e,t){for(var n=this,r=new qt,i=0;i<e.getNumGeometries();i++){var o=n.transform(e.getGeometryN(i));o!==null&&(n._pruneEmptyGeometry&&o.isEmpty()||r.add(o))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(Wn.toGeometryArray(r)):this._factory.buildGeometry(r)};Us.prototype.transform=function(e){if(this._inputGeom=e,this._factory=e.getFactory(),e instanceof oa)return this.transformPoint(e,null);if(e instanceof F_)return this.transformMultiPoint(e,null);if(e instanceof qc)return this.transformLinearRing(e,null);if(e instanceof vi)return this.transformLineString(e,null);if(e instanceof qp)return this.transformMultiLineString(e,null);if(e instanceof Xi)return this.transformPolygon(e,null);if(e instanceof zc)return this.transformMultiPolygon(e,null);if(e instanceof cs)return this.transformGeometryCollection(e,null);throw new ri("Unknown Geometry subtype: "+e.getClass().getName())};Us.prototype.transformLinearRing=function(e,t){var n=this.transformCoordinates(e.getCoordinateSequence(),e);if(n===null)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)};Us.prototype.interfaces_=function(){return[]};Us.prototype.getClass=function(){return Us};var Wc=function e(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new pn,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof vi&&typeof arguments[1]=="number"){var t=arguments[0],n=arguments[1];e.call(this,t.getCoordinates(),n)}else if(arguments[0]instanceof Array&&typeof arguments[1]=="number"){var r=arguments[0],i=arguments[1];this._srcPts=r,this._isClosed=e.isClosed(r),this._snapTolerance=i}};Wc.prototype.snapVertices=function(e,t){for(var n=this,r=this._isClosed?e.size()-1:e.size(),i=0;i<r;i++){var o=e.get(i),u=n.findSnapForVertex(o,t);u!==null&&(e.set(i,new nt(u)),i===0&&n._isClosed&&e.set(e.size()-1,new nt(u)))}};Wc.prototype.findSnapForVertex=function(e,t){for(var n=this,r=0;r<t.length;r++){if(e.equals2D(t[r]))return null;if(e.distance(t[r])<n._snapTolerance)return t[r]}return null};Wc.prototype.snapTo=function(e){var t=new Tx(this._srcPts);this.snapVertices(t,e),this.snapSegments(t,e);var n=t.toCoordinateArray();return n};Wc.prototype.snapSegments=function(e,t){var n=this;if(t.length===0)return null;var r=t.length;t[0].equals2D(t[t.length-1])&&(r=t.length-1);for(var i=0;i<r;i++){var o=t[i],u=n.findSegmentIndexToSnap(o,e);u>=0&&e.add(u+1,new nt(o),!1)}};Wc.prototype.findSegmentIndexToSnap=function(e,t){for(var n=this,r=On.MAX_VALUE,i=-1,o=0;o<t.size()-1;o++){if(n._seg.p0=t.get(o),n._seg.p1=t.get(o+1),n._seg.p0.equals2D(e)||n._seg.p1.equals2D(e)){if(n._allowSnappingToSourceVertices)continue;return-1}var u=n._seg.distance(e);u<n._snapTolerance&&u<r&&(r=u,i=o)}return i};Wc.prototype.setAllowSnappingToSourceVertices=function(e){this._allowSnappingToSourceVertices=e};Wc.prototype.interfaces_=function(){return[]};Wc.prototype.getClass=function(){return Wc};Wc.isClosed=function(e){return e.length<=1?!1:e[0].equals2D(e[e.length-1])};var Li=function(e){this._srcGeom=e||null},z$={SNAP_PRECISION_FACTOR:{configurable:!0}};Li.prototype.snapTo=function(e,t){var n=this.extractTargetCoordinates(e),r=new F$(t,n);return r.transform(this._srcGeom)};Li.prototype.snapToSelf=function(e,t){var n=this.extractTargetCoordinates(this._srcGeom),r=new F$(e,n,!0),i=r.transform(this._srcGeom),o=i;return t&&Sn(o,hd)&&(o=i.buffer(0)),o};Li.prototype.computeSnapTolerance=function(e){var t=this.computeMinimumSegmentLength(e),n=t/10;return n};Li.prototype.extractTargetCoordinates=function(e){for(var t=new Vu,n=e.getCoordinates(),r=0;r<n.length;r++)t.add(n[r]);return t.toArray(new Array(0).fill(null))};Li.prototype.computeMinimumSegmentLength=function(e){for(var t=On.MAX_VALUE,n=0;n<e.length-1;n++){var r=e[n].distance(e[n+1]);r<t&&(t=r)}return t};Li.prototype.interfaces_=function(){return[]};Li.prototype.getClass=function(){return Li};Li.snap=function(e,t,n){var r=new Array(2).fill(null),i=new Li(e);r[0]=i.snapTo(t,n);var o=new Li(t);return r[1]=o.snapTo(r[0],n),r};Li.computeOverlaySnapTolerance=function(){if(arguments.length===1){var e=arguments[0],t=Li.computeSizeBasedSnapTolerance(e),n=e.getPrecisionModel();if(n.getType()===mr.FIXED){var r=1/n.getScale()*2/1.415;r>t&&(t=r)}return t}else if(arguments.length===2){var i=arguments[0],o=arguments[1];return Math.min(Li.computeOverlaySnapTolerance(i),Li.computeOverlaySnapTolerance(o))}};Li.computeSizeBasedSnapTolerance=function(e){var t=e.getEnvelopeInternal(),n=Math.min(t.getHeight(),t.getWidth()),r=n*Li.SNAP_PRECISION_FACTOR;return r};Li.snapToSelf=function(e,t,n){var r=new Li(e);return r.snapToSelf(t,n)};z$.SNAP_PRECISION_FACTOR.get=function(){return 1e-9};Object.defineProperties(Li,z$);var F$=function(e){function t(n,r,i){e.call(this),this._snapTolerance=n||null,this._snapPts=r||null,this._isSelfSnap=i!==void 0?i:!1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.snapLine=function(n,r){var i=new Wc(n,this._snapTolerance);return i.setAllowSnappingToSourceVertices(this._isSelfSnap),i.snapTo(r)},t.prototype.transformCoordinates=function(n,r){var i=n.toCoordinateArray(),o=this.snapLine(i,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(o)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Us),rs=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};rs.prototype.getCommon=function(){return On.longBitsToDouble(this._commonBits)};rs.prototype.add=function(e){var t=On.doubleToLongBits(e);if(this._isFirst)return this._commonBits=t,this._commonSignExp=rs.signExpBits(this._commonBits),this._isFirst=!1,null;var n=rs.signExpBits(t);if(n!==this._commonSignExp)return this._commonBits=0,null;this._commonMantissaBitsCount=rs.numCommonMostSigMantissaBits(this._commonBits,t),this._commonBits=rs.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))};rs.prototype.toString=function(){if(arguments.length===1){var e=arguments[0],t=On.longBitsToDouble(e),n=On.toBinaryString(e),r="0000000000000000000000000000000000000000000000000000000000000000"+n,i=r.substring(r.length-64),o=i.substring(0,1)+"  "+i.substring(1,12)+"(exp) "+i.substring(12)+" [ "+t+" ]";return o}};rs.prototype.interfaces_=function(){return[]};rs.prototype.getClass=function(){return rs};rs.getBit=function(e,t){var n=1<<t;return e&n?1:0};rs.signExpBits=function(e){return e>>52};rs.zeroLowerBits=function(e,t){var n=(1<<t)-1,r=~n,i=e&r;return i};rs.numCommonMostSigMantissaBits=function(e,t){for(var n=0,r=52;r>=0;r--){if(rs.getBit(e,r)!==rs.getBit(t,r))return n;n++}return 52};var _d=function(){this._commonCoord=null,this._ccFilter=new Mg},pO={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};_d.prototype.addCommonBits=function(e){var t=new vd(this._commonCoord);e.apply(t),e.geometryChanged()};_d.prototype.removeCommonBits=function(e){if(this._commonCoord.x===0&&this._commonCoord.y===0)return e;var t=new nt(this._commonCoord);t.x=-t.x,t.y=-t.y;var n=new vd(t);return e.apply(n),e.geometryChanged(),e};_d.prototype.getCommonCoordinate=function(){return this._commonCoord};_d.prototype.add=function(e){e.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()};_d.prototype.interfaces_=function(){return[]};_d.prototype.getClass=function(){return _d};pO.CommonCoordinateFilter.get=function(){return Mg};pO.Translater.get=function(){return vd};Object.defineProperties(_d,pO);var Mg=function(){this._commonBitsX=new rs,this._commonBitsY=new rs};Mg.prototype.filter=function(e){this._commonBitsX.add(e.x),this._commonBitsY.add(e.y)};Mg.prototype.getCommonCoordinate=function(){return new nt(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())};Mg.prototype.interfaces_=function(){return[Uc]};Mg.prototype.getClass=function(){return Mg};var vd=function(){this.trans=null;var e=arguments[0];this.trans=e};vd.prototype.filter=function(e,t){var n=e.getOrdinate(t,0)+this.trans.x,r=e.getOrdinate(t,1)+this.trans.y;e.setOrdinate(t,0,n),e.setOrdinate(t,1,r)};vd.prototype.isDone=function(){return!1};vd.prototype.isGeometryChanged=function(){return!0};vd.prototype.interfaces_=function(){return[Hl]};vd.prototype.getClass=function(){return vd};var So=function(e,t){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=e,this._geom[1]=t,this.computeSnapTolerance()};So.prototype.selfSnap=function(e){var t=new Li(e),n=t.snapTo(e,this._snapTolerance);return n};So.prototype.removeCommonBits=function(e){this._cbr=new _d,this._cbr.add(e[0]),this._cbr.add(e[1]);var t=new Array(2).fill(null);return t[0]=this._cbr.removeCommonBits(e[0].copy()),t[1]=this._cbr.removeCommonBits(e[1].copy()),t};So.prototype.prepareResult=function(e){return this._cbr.addCommonBits(e),e};So.prototype.getResultGeometry=function(e){var t=this.snap(this._geom),n=Rn.overlayOp(t[0],t[1],e);return this.prepareResult(n)};So.prototype.checkValid=function(e){e.isValid()||Mo.out.println("Snapped geometry is invalid")};So.prototype.computeSnapTolerance=function(){this._snapTolerance=Li.computeOverlaySnapTolerance(this._geom[0],this._geom[1])};So.prototype.snap=function(e){var t=this.removeCommonBits(e),n=Li.snap(t[0],t[1],this._snapTolerance);return n};So.prototype.interfaces_=function(){return[]};So.prototype.getClass=function(){return So};So.overlayOp=function(e,t,n){var r=new So(e,t);return r.getResultGeometry(n)};So.union=function(e,t){return So.overlayOp(e,t,Rn.UNION)};So.intersection=function(e,t){return So.overlayOp(e,t,Rn.INTERSECTION)};So.symDifference=function(e,t){return So.overlayOp(e,t,Rn.SYMDIFFERENCE)};So.difference=function(e,t){return So.overlayOp(e,t,Rn.DIFFERENCE)};var ds=function(e,t){this._geom=new Array(2).fill(null),this._geom[0]=e,this._geom[1]=t};ds.prototype.getResultGeometry=function(e){var t=null,n=!1,r=null;try{t=Rn.overlayOp(this._geom[0],this._geom[1],e);var i=!0;i&&(n=!0)}catch(o){if(o instanceof Yh)r=o;else throw o}finally{}if(!n)try{t=So.overlayOp(this._geom[0],this._geom[1],e)}catch(o){throw o instanceof Yh?r:o}finally{}return t};ds.prototype.interfaces_=function(){return[]};ds.prototype.getClass=function(){return ds};ds.overlayOp=function(e,t,n){var r=new ds(e,t);return r.getResultGeometry(n)};ds.union=function(e,t){return ds.overlayOp(e,t,Rn.UNION)};ds.intersection=function(e,t){return ds.overlayOp(e,t,Rn.INTERSECTION)};ds.symDifference=function(e,t){return ds.overlayOp(e,t,Rn.SYMDIFFERENCE)};ds.difference=function(e,t){return ds.overlayOp(e,t,Rn.DIFFERENCE)};var $1=function(){this.mce=null,this.chainIndex=null;var e=arguments[0],t=arguments[1];this.mce=e,this.chainIndex=t};$1.prototype.computeIntersections=function(e,t){this.mce.computeIntersectsForChain(this.chainIndex,e.mce,e.chainIndex,t)};$1.prototype.interfaces_=function(){return[]};$1.prototype.getClass=function(){return $1};var la=function e(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,arguments.length===2){var t=arguments[0],n=arguments[1];this._eventType=e.DELETE,this._xValue=t,this._insertEvent=n}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=e.INSERT,this._label=r,this._xValue=i,this._obj=o}},mO={INSERT:{configurable:!0},DELETE:{configurable:!0}};la.prototype.isDelete=function(){return this._eventType===la.DELETE};la.prototype.setDeleteEventIndex=function(e){this._deleteEventIndex=e};la.prototype.getObject=function(){return this._obj};la.prototype.compareTo=function(e){var t=e;return this._xValue<t._xValue?-1:this._xValue>t._xValue?1:this._eventType<t._eventType?-1:this._eventType>t._eventType?1:0};la.prototype.getInsertEvent=function(){return this._insertEvent};la.prototype.isInsert=function(){return this._eventType===la.INSERT};la.prototype.isSameLabel=function(e){return this._label===null?!1:this._label===e._label};la.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex};la.prototype.interfaces_=function(){return[pl]};la.prototype.getClass=function(){return la};mO.INSERT.get=function(){return 1};mO.DELETE.get=function(){return 2};Object.defineProperties(la,mO);var dE=function(){};dE.prototype.interfaces_=function(){return[]};dE.prototype.getClass=function(){return dE};var zo=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var e=arguments[0],t=arguments[1],n=arguments[2];this._li=e,this._includeProper=t,this._recordIsolated=n};zo.prototype.isTrivialIntersection=function(e,t,n,r){if(e===n&&this._li.getIntersectionNum()===1){if(zo.isAdjacentSegments(t,r))return!0;if(e.isClosed()){var i=e.getNumPoints()-1;if(t===0&&r===i||r===0&&t===i)return!0}}return!1};zo.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint};zo.prototype.setIsDoneIfProperInt=function(e){this._isDoneWhenProperInt=e};zo.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior};zo.prototype.isBoundaryPointInternal=function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next(),i=r.getCoordinate();if(e.isIntersection(i))return!0}return!1};zo.prototype.hasProperIntersection=function(){return this._hasProper};zo.prototype.hasIntersection=function(){return this._hasIntersection};zo.prototype.isDone=function(){return this._isDone};zo.prototype.isBoundaryPoint=function(e,t){return t===null?!1:!!(this.isBoundaryPointInternal(e,t[0])||this.isBoundaryPointInternal(e,t[1]))};zo.prototype.setBoundaryNodes=function(e,t){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=e,this._bdyNodes[1]=t};zo.prototype.addIntersections=function(e,t,n,r){if(e===n&&t===r)return null;this.numTests++;var i=e.getCoordinates()[t],o=e.getCoordinates()[t+1],u=n.getCoordinates()[r],l=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,u,l),this._li.hasIntersection()&&(this._recordIsolated&&(e.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(e,t,n,r)||(this._hasIntersection=!0,(this._includeProper||!this._li.isProper())&&(e.addIntersections(this._li,t,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))};zo.prototype.interfaces_=function(){return[]};zo.prototype.getClass=function(){return zo};zo.isAdjacentSegments=function(e,t){return Math.abs(e-t)===1};var mle=function(e){function t(){e.call(this),this.events=new qt,this.nOverlaps=null}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.prepareEvents=function(){var n=this;Wl.sort(this.events);for(var r=0;r<this.events.size();r++){var i=n.events.get(r);i.isDelete()&&i.getInsertEvent().setDeleteEventIndex(r)}},t.prototype.computeIntersections=function(){var n=this;if(arguments.length===1){var r=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var i=0;i<this.events.size();i++){var o=n.events.get(i);if(o.isInsert()&&n.processOverlaps(i,o.getDeleteEventIndex(),o,r),r.isDone())break}}else if(arguments.length===3){if(arguments[2]instanceof zo&&Sn(arguments[0],$l)&&Sn(arguments[1],$l)){var u=arguments[0],l=arguments[1],p=arguments[2];this.addEdges(u,u),this.addEdges(l,l),this.computeIntersections(p)}else if(typeof arguments[2]=="boolean"&&Sn(arguments[0],$l)&&arguments[1]instanceof zo){var g=arguments[0],x=arguments[1],y=arguments[2];y?this.addEdges(g,null):this.addEdges(g),this.computeIntersections(x)}}},t.prototype.addEdge=function(n,r){for(var i=this,o=n.getMonotoneChainEdge(),u=o.getStartIndexes(),l=0;l<u.length-1;l++){var p=new $1(o,l),g=new la(r,o.getMinX(l),p);i.events.add(g),i.events.add(new la(o.getMaxX(l),g))}},t.prototype.processOverlaps=function(n,r,i,o){for(var u=this,l=i.getObject(),p=n;p<r;p++){var g=u.events.get(p);if(g.isInsert()){var x=g.getObject();i.isSameLabel(g)||(l.computeIntersections(x,o),u.nOverlaps++)}}},t.prototype.addEdges=function(){var n=this;if(arguments.length===1)for(var r=arguments[0],i=r.iterator();i.hasNext();){var o=i.next();n.addEdge(o,o)}else if(arguments.length===2)for(var u=arguments[0],l=arguments[1],p=u.iterator();p.hasNext();){var g=p.next();n.addEdge(g,l)}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(dE),Kc=function(){this._min=On.POSITIVE_INFINITY,this._max=On.NEGATIVE_INFINITY},B$={NodeComparator:{configurable:!0}};Kc.prototype.getMin=function(){return this._min};Kc.prototype.intersects=function(e,t){return!(this._min>t||this._max<e)};Kc.prototype.getMax=function(){return this._max};Kc.prototype.toString=function(){return Gl.toLineString(new nt(this._min,0),new nt(this._max,0))};Kc.prototype.interfaces_=function(){return[]};Kc.prototype.getClass=function(){return Kc};B$.NodeComparator.get=function(){return U1};Object.defineProperties(Kc,B$);var U1=function(){};U1.prototype.compare=function(e,t){var n=e,r=t,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:i>o?1:0};U1.prototype.interfaces_=function(){return[O_]};U1.prototype.getClass=function(){return U1};var gle=function(e){function t(){e.call(this),this._item=null;var n=arguments[0],r=arguments[1],i=arguments[2];this._min=n,this._max=r,this._item=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.query=function(n,r,i){if(!this.intersects(n,r))return null;i.visitItem(this._item)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Kc),yle=function(e){function t(){e.call(this),this._node1=null,this._node2=null;var n=arguments[0],r=arguments[1];this._node1=n,this._node2=r,this.buildExtent(this._node1,this._node2)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.buildExtent=function(n,r){this._min=Math.min(n._min,r._min),this._max=Math.max(n._max,r._max)},t.prototype.query=function(n,r,i){if(!this.intersects(n,r))return null;this._node1!==null&&this._node1.query(n,r,i),this._node2!==null&&this._node2.query(n,r,i)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Kc),Xc=function(){this._leaves=new qt,this._root=null,this._level=0};Xc.prototype.buildTree=function(){var e=this;Wl.sort(this._leaves,new Kc.NodeComparator);for(var t=this._leaves,n=null,r=new qt;;){if(e.buildLevel(t,r),r.size()===1)return r.get(0);n=t,t=r,r=n}};Xc.prototype.insert=function(e,t,n){if(this._root!==null)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new gle(e,t,n))};Xc.prototype.query=function(e,t,n){this.init(),this._root.query(e,t,n)};Xc.prototype.buildRoot=function(){if(this._root!==null)return null;this._root=this.buildTree()};Xc.prototype.printNode=function(e){Mo.out.println(Gl.toLineString(new nt(e._min,this._level),new nt(e._max,this._level)))};Xc.prototype.init=function(){if(this._root!==null)return null;this.buildRoot()};Xc.prototype.buildLevel=function(e,t){this._level++,t.clear();for(var n=0;n<e.size();n+=2){var r=e.get(n),i=n+1<e.size()?e.get(n):null;if(i===null)t.add(r);else{var o=new yle(e.get(n),e.get(n+1));t.add(o)}}};Xc.prototype.interfaces_=function(){return[]};Xc.prototype.getClass=function(){return Xc};var V_=function(){this._items=new qt};V_.prototype.visitItem=function(e){this._items.add(e)};V_.prototype.getItems=function(){return this._items};V_.prototype.interfaces_=function(){return[fd]};V_.prototype.getClass=function(){return V_};var G_=function(){this._index=null;var e=arguments[0];if(!Sn(e,hd))throw new ri("Argument must be Polygonal");this._index=new Xp(e)},gO={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};G_.prototype.locate=function(e){var t=new Bu(e),n=new H_(t);return this._index.query(e.y,e.y,n),t.getLocation()};G_.prototype.interfaces_=function(){return[U_]};G_.prototype.getClass=function(){return G_};gO.SegmentVisitor.get=function(){return H_};gO.IntervalIndexedGeometry.get=function(){return Xp};Object.defineProperties(G_,gO);var H_=function(){this._counter=null;var e=arguments[0];this._counter=e};H_.prototype.visitItem=function(e){var t=e;this._counter.countSegment(t.getCoordinate(0),t.getCoordinate(1))};H_.prototype.interfaces_=function(){return[fd]};H_.prototype.getClass=function(){return H_};var Xp=function(){this._index=new Xc;var e=arguments[0];this.init(e)};Xp.prototype.init=function(e){for(var t=this,n=Lo.getLines(e),r=n.iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();t.addLine(o)}};Xp.prototype.addLine=function(e){for(var t=this,n=1;n<e.length;n++){var r=new pn(e[n-1],e[n]),i=Math.min(r.p0.y,r.p1.y),o=Math.max(r.p0.y,r.p1.y);t._index.insert(i,o,r)}};Xp.prototype.query=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=new V_;return this._index.query(e,t,n),n.getItems()}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}};Xp.prototype.interfaces_=function(){return[]};Xp.prototype.getClass=function(){return Xp};var d0=function(e){function t(){if(e.call(this),this._parentGeom=null,this._lineEdgeMap=new w$,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Xl,arguments.length===2){var n=arguments[0],r=arguments[1],i=hl.OGC_SFS_BOUNDARY_RULE;this._argIndex=n,this._parentGeom=r,this._boundaryNodeRule=i,r!==null&&this.add(r)}else if(arguments.length===3){var o=arguments[0],u=arguments[1],l=arguments[2];this._argIndex=o,this._parentGeom=u,this._boundaryNodeRule=l,u!==null&&this.add(u)}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.insertBoundaryPoint=function(n,r){var i=this._nodes.addNode(r),o=i.getLabel(),u=1,l=st.NONE;l=o.getLocation(n,Rt.ON),l===st.BOUNDARY&&u++;var p=t.determineBoundary(this._boundaryNodeRule,u);o.setLocation(n,p)},t.prototype.computeSelfNodes=function(){if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.computeSelfNodes(n,r,!1)}else if(arguments.length===3){var i=arguments[0],o=arguments[1],u=arguments[2],l=new zo(i,!0,!1);l.setIsDoneIfProperInt(u);var p=this.createEdgeSetIntersector(),g=this._parentGeom instanceof qc||this._parentGeom instanceof Xi||this._parentGeom instanceof zc,x=o||!g;return p.computeIntersections(this._edges,l,x),this.addSelfIntersectionNodes(this._argIndex),l}},t.prototype.computeSplitEdges=function(n){for(var r=this._edges.iterator();r.hasNext();){var i=r.next();i.eiList.addSplitEdges(n)}},t.prototype.computeEdgeIntersections=function(n,r,i){var o=new zo(r,i,!0);o.setBoundaryNodes(this.getBoundaryNodes(),n.getBoundaryNodes());var u=this.createEdgeSetIntersector();return u.computeIntersections(this._edges,n._edges,o),o},t.prototype.getGeometry=function(){return this._parentGeom},t.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},t.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},t.prototype.addPoint=function(){if(arguments[0]instanceof oa){var n=arguments[0],r=n.getCoordinate();this.insertPoint(this._argIndex,r,st.INTERIOR)}else if(arguments[0]instanceof nt){var i=arguments[0];this.insertPoint(this._argIndex,i,st.INTERIOR)}},t.prototype.addPolygon=function(n){var r=this;this.addPolygonRing(n.getExteriorRing(),st.EXTERIOR,st.INTERIOR);for(var i=0;i<n.getNumInteriorRing();i++){var o=n.getInteriorRingN(i);r.addPolygonRing(o,st.INTERIOR,st.EXTERIOR)}},t.prototype.addEdge=function(n){this.insertEdge(n);var r=n.getCoordinates();this.insertPoint(this._argIndex,r[0],st.BOUNDARY),this.insertPoint(this._argIndex,r[r.length-1],st.BOUNDARY)},t.prototype.addLineString=function(n){var r=Kn.removeRepeatedPoints(n.getCoordinates());if(r.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=new fE(r,new Sr(this._argIndex,st.INTERIOR));this._lineEdgeMap.put(n,i),this.insertEdge(i),Dn.isTrue(r.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,r[0]),this.insertBoundaryPoint(this._argIndex,r[r.length-1])},t.prototype.getInvalidPoint=function(){return this._invalidPoint},t.prototype.getBoundaryPoints=function(){for(var n=this.getBoundaryNodes(),r=new Array(n.size()).fill(null),i=0,o=n.iterator();o.hasNext();){var u=o.next();r[i++]=u.getCoordinate().copy()}return r},t.prototype.getBoundaryNodes=function(){return this._boundaryNodes===null&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},t.prototype.addSelfIntersectionNode=function(n,r,i){if(this.isBoundaryNode(n,r))return null;i===st.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(n,r):this.insertPoint(n,r,i)},t.prototype.addPolygonRing=function(n,r,i){if(n.isEmpty())return null;var o=Kn.removeRepeatedPoints(n.getCoordinates());if(o.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=o[0],null;var u=r,l=i;Yt.isCCW(o)&&(u=i,l=r);var p=new fE(o,new Sr(this._argIndex,st.BOUNDARY,u,l));this._lineEdgeMap.put(n,p),this.insertEdge(p),this.insertPoint(this._argIndex,o[0],st.BOUNDARY)},t.prototype.insertPoint=function(n,r,i){var o=this._nodes.addNode(r),u=o.getLabel();u===null?o._label=new Sr(n,i):u.setLocation(n,i)},t.prototype.createEdgeSetIntersector=function(){return new mle},t.prototype.addSelfIntersectionNodes=function(n){for(var r=this,i=this._edges.iterator();i.hasNext();)for(var o=i.next(),u=o.getLabel().getLocation(n),l=o.eiList.iterator();l.hasNext();){var p=l.next();r.addSelfIntersectionNode(n,p.coord,u)}},t.prototype.add=function(){if(arguments.length===1){var n=arguments[0];if(n.isEmpty())return null;if(n instanceof zc&&(this._useBoundaryDeterminationRule=!1),n instanceof Xi)this.addPolygon(n);else if(n instanceof vi)this.addLineString(n);else if(n instanceof oa)this.addPoint(n);else if(n instanceof F_)this.addCollection(n);else if(n instanceof qp)this.addCollection(n);else if(n instanceof zc)this.addCollection(n);else if(n instanceof cs)this.addCollection(n);else throw new Error(n.getClass().getName())}else return e.prototype.add.apply(this,arguments)},t.prototype.addCollection=function(n){for(var r=this,i=0;i<n.getNumGeometries();i++){var o=n.getGeometryN(i);r.add(o)}},t.prototype.locate=function(n){return Sn(this._parentGeom,hd)&&this._parentGeom.getNumGeometries()>50?(this._areaPtLocator===null&&(this._areaPtLocator=new G_(this._parentGeom)),this._areaPtLocator.locate(n)):this._ptLocator.locate(n,this._parentGeom)},t.prototype.findEdge=function(){if(arguments.length===1){var n=arguments[0];return this._lineEdgeMap.get(n)}else return e.prototype.findEdge.apply(this,arguments)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.determineBoundary=function(n,r){return n.isInBoundary(r)?st.BOUNDARY:st.INTERIOR},t}(ci),Z_=function(){if(this._li=new am,this._resultPrecisionModel=null,this._arg=null,arguments.length===1){var e=arguments[0];this.setComputationPrecision(e.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new d0(0,e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1],r=hl.OGC_SFS_BOUNDARY_RULE;t.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(t.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new d0(0,t,r),this._arg[1]=new d0(1,n,r)}else if(arguments.length===3){var i=arguments[0],o=arguments[1],u=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new d0(0,i,u),this._arg[1]=new d0(1,o,u)}};Z_.prototype.getArgGeometry=function(e){return this._arg[e].getGeometry()};Z_.prototype.setComputationPrecision=function(e){this._resultPrecisionModel=e,this._li.setPrecisionModel(this._resultPrecisionModel)};Z_.prototype.interfaces_=function(){return[]};Z_.prototype.getClass=function(){return Z_};var Mp=function(){};Mp.prototype.interfaces_=function(){return[]};Mp.prototype.getClass=function(){return Mp};Mp.map=function(){if(arguments[0]instanceof bn&&Sn(arguments[1],Mp.MapOp)){for(var e=arguments[0],t=arguments[1],n=new qt,r=0;r<e.getNumGeometries();r++){var i=t.map(e.getGeometryN(r));i!==null&&n.add(i)}return e.getFactory().buildGeometry(n)}else if(Sn(arguments[0],Vi)&&Sn(arguments[1],Mp.MapOp)){for(var o=arguments[0],u=arguments[1],l=new qt,p=o.iterator();p.hasNext();){var g=p.next(),x=u.map(g);x!==null&&l.add(x)}return l}};Mp.MapOp=function(){};var Rn=function(e){function t(){var n=arguments[0],r=arguments[1];e.call(this,n,r),this._ptLocator=new Xl,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Kl,this._resultPolyList=new qt,this._resultLineList=new qt,this._resultPointList=new qt,this._graph=new ci(new A$),this._geomFact=n.getFactory()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.insertUniqueEdge=function(n){var r=this._edgeList.findEqualEdge(n);if(r!==null){var i=r.getLabel(),o=n.getLabel();r.isPointwiseEqual(n)||(o=new Sr(n.getLabel()),o.flip());var u=r.getDepth();u.isNull()&&u.add(i),u.add(o),i.merge(o)}else this._edgeList.add(n)},t.prototype.getGraph=function(){return this._graph},t.prototype.cancelDuplicateResultEdges=function(){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getSym();r.isInResult()&&i.isInResult()&&(r.setInResult(!1),i.setInResult(!1))}},t.prototype.isCoveredByLA=function(n){return!!(this.isCovered(n,this._resultLineList)||this.isCovered(n,this._resultPolyList))},t.prototype.computeGeometry=function(n,r,i,o){var u=new qt;return u.addAll(n),u.addAll(r),u.addAll(i),u.isEmpty()?t.createEmptyResult(o,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(u)},t.prototype.mergeSymLabels=function(){for(var n=this._graph.getNodes().iterator();n.hasNext();){var r=n.next();r.getEdges().mergeSymLabels()}},t.prototype.isCovered=function(n,r){for(var i=this,o=r.iterator();o.hasNext();){var u=o.next(),l=i._ptLocator.locate(n,u);if(l!==st.EXTERIOR)return!0}return!1},t.prototype.replaceCollapsedEdges=function(){for(var n=new qt,r=this._edgeList.iterator();r.hasNext();){var i=r.next();i.isCollapsed()&&(r.remove(),n.add(i.getCollapsedEdge()))}this._edgeList.addAll(n)},t.prototype.updateNodeLabelling=function(){for(var n=this._graph.getNodes().iterator();n.hasNext();){var r=n.next(),i=r.getEdges().getLabel();r.getLabel().merge(i)}},t.prototype.getResultGeometry=function(n){return this.computeOverlay(n),this._resultGeom},t.prototype.insertUniqueEdges=function(n){for(var r=this,i=n.iterator();i.hasNext();){var o=i.next();r.insertUniqueEdge(o)}},t.prototype.computeOverlay=function(n){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var r=new qt;this._arg[0].computeSplitEdges(r),this._arg[1].computeSplitEdges(r),this.insertUniqueEdges(r),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Kp.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(n),this.cancelDuplicateResultEdges();var i=new sa(this._geomFact);i.add(this._graph),this._resultPolyList=i.getPolygons();var o=new Ju(this,this._geomFact,this._ptLocator);this._resultLineList=o.build(n);var u=new Rg(this,this._geomFact,this._ptLocator);this._resultPointList=u.build(n),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,n)},t.prototype.labelIncompleteNode=function(n,r){var i=this._ptLocator.locate(n.getCoordinate(),this._arg[r].getGeometry());n.getLabel().setLocation(r,i)},t.prototype.copyPoints=function(n){for(var r=this,i=this._arg[n].getNodeIterator();i.hasNext();){var o=i.next(),u=r._graph.addNode(o.getCoordinate());u.setLabel(n,o.getLabel().getLocation(n))}},t.prototype.findResultAreaEdges=function(n){for(var r=this._graph.getEdgeEnds().iterator();r.hasNext();){var i=r.next(),o=i.getLabel();o.isArea()&&!i.isInteriorAreaEdge()&&t.isResultOfOp(o.getLocation(0,Rt.RIGHT),o.getLocation(1,Rt.RIGHT),n)&&i.setInResult(!0)}},t.prototype.computeLabelsFromDepths=function(){for(var n=this._edgeList.iterator();n.hasNext();){var r=n.next(),i=r.getLabel(),o=r.getDepth();if(!o.isNull()){o.normalize();for(var u=0;u<2;u++)!i.isNull(u)&&i.isArea()&&!o.isNull(u)&&(o.getDelta(u)===0?i.toLine(u):(Dn.isTrue(!o.isNull(u,Rt.LEFT),"depth of LEFT side has not been initialized"),i.setLocation(u,Rt.LEFT,o.getLocation(u,Rt.LEFT)),Dn.isTrue(!o.isNull(u,Rt.RIGHT),"depth of RIGHT side has not been initialized"),i.setLocation(u,Rt.RIGHT,o.getLocation(u,Rt.RIGHT))))}}},t.prototype.computeLabelling=function(){for(var n=this,r=this._graph.getNodes().iterator();r.hasNext();){var i=r.next();i.getEdges().computeLabelling(n._arg)}this.mergeSymLabels(),this.updateNodeLabelling()},t.prototype.labelIncompleteNodes=function(){for(var n=this,r=this._graph.getNodes().iterator();r.hasNext();){var i=r.next(),o=i.getLabel();i.isIsolated()&&(o.isNull(0)?n.labelIncompleteNode(i,0):n.labelIncompleteNode(i,1)),i.getEdges().updateLabelling(o)}},t.prototype.isCoveredByA=function(n){return!!this.isCovered(n,this._resultPolyList)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Z_);Rn.overlayOp=function(e,t,n){var r=new Rn(e,t),i=r.getResultGeometry(n);return i};Rn.intersection=function(e,t){if(e.isEmpty()||t.isEmpty())return Rn.createEmptyResult(Rn.INTERSECTION,e,t,e.getFactory());if(e.isGeometryCollection()){var n=t;return kg.map(e,{interfaces_:function(){return[Mp.MapOp]},map:function(r){return r.intersection(n)}})}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),ds.overlayOp(e,t,Rn.INTERSECTION)};Rn.symDifference=function(e,t){if(e.isEmpty()||t.isEmpty()){if(e.isEmpty()&&t.isEmpty())return Rn.createEmptyResult(Rn.SYMDIFFERENCE,e,t,e.getFactory());if(e.isEmpty())return t.copy();if(t.isEmpty())return e.copy()}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),ds.overlayOp(e,t,Rn.SYMDIFFERENCE)};Rn.resultDimension=function(e,t,n){var r=t.getDimension(),i=n.getDimension(),o=-1;switch(e){case Rn.INTERSECTION:o=Math.min(r,i);break;case Rn.UNION:o=Math.max(r,i);break;case Rn.DIFFERENCE:o=r;break;case Rn.SYMDIFFERENCE:o=Math.max(r,i);break}return o};Rn.createEmptyResult=function(e,t,n,r){var i=null;switch(Rn.resultDimension(e,t,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon();break}return i};Rn.difference=function(e,t){return e.isEmpty()?Rn.createEmptyResult(Rn.DIFFERENCE,e,t,e.getFactory()):t.isEmpty()?e.copy():(e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),ds.overlayOp(e,t,Rn.DIFFERENCE))};Rn.isResultOfOp=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=e.getLocation(0),r=e.getLocation(1);return Rn.isResultOfOp(n,r,t)}else if(arguments.length===3){var i=arguments[0],o=arguments[1],u=arguments[2];switch(i===st.BOUNDARY&&(i=st.INTERIOR),o===st.BOUNDARY&&(o=st.INTERIOR),u){case Rn.INTERSECTION:return i===st.INTERIOR&&o===st.INTERIOR;case Rn.UNION:return i===st.INTERIOR||o===st.INTERIOR;case Rn.DIFFERENCE:return i===st.INTERIOR&&o!==st.INTERIOR;case Rn.SYMDIFFERENCE:return i===st.INTERIOR&&o!==st.INTERIOR||i!==st.INTERIOR&&o===st.INTERIOR}return!1}};Rn.INTERSECTION=1;Rn.UNION=2;Rn.DIFFERENCE=3;Rn.SYMDIFFERENCE=4;var rd=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Xl,this._seg=new pn;var e=arguments[0],t=arguments[1];this._g=e,this._boundaryDistanceTolerance=t,this._linework=this.extractLinework(e)};rd.prototype.isWithinToleranceOfBoundary=function(e){for(var t=this,n=0;n<this._linework.getNumGeometries();n++)for(var r=t._linework.getGeometryN(n),i=r.getCoordinateSequence(),o=0;o<i.size()-1;o++){i.getCoordinate(o,t._seg.p0),i.getCoordinate(o+1,t._seg.p1);var u=t._seg.distance(e);if(u<=t._boundaryDistanceTolerance)return!0}return!1};rd.prototype.getLocation=function(e){return this.isWithinToleranceOfBoundary(e)?st.BOUNDARY:this._ptLocator.locate(e,this._g)};rd.prototype.extractLinework=function(e){var t=new W_;e.apply(t);var n=t.getLinework(),r=Wn.toLineStringArray(n);return e.getFactory().createMultiLineString(r)};rd.prototype.interfaces_=function(){return[]};rd.prototype.getClass=function(){return rd};var W_=function(){this._linework=null,this._linework=new qt};W_.prototype.getLinework=function(){return this._linework};W_.prototype.filter=function(e){var t=this;if(e instanceof Xi){var n=e;this._linework.add(n.getExteriorRing());for(var r=0;r<n.getNumInteriorRing();r++)t._linework.add(n.getInteriorRingN(r))}};W_.prototype.interfaces_=function(){return[Gu]};W_.prototype.getClass=function(){return W_};var Yp=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var e=arguments[0];this._g=e};Yp.prototype.extractPoints=function(e,t,n){for(var r=this,i=e.getCoordinates(),o=0;o<i.length-1;o++)r.computeOffsetPoints(i[o],i[o+1],t,n)};Yp.prototype.setSidesToGenerate=function(e,t){this._doLeft=e,this._doRight=t};Yp.prototype.getPoints=function(e){for(var t=this,n=new qt,r=Lo.getLines(this._g),i=r.iterator();i.hasNext();){var o=i.next();t.extractPoints(o,e,n)}return n};Yp.prototype.computeOffsetPoints=function(e,t,n,r){var i=t.x-e.x,o=t.y-e.y,u=Math.sqrt(i*i+o*o),l=n*i/u,p=n*o/u,g=(t.x+e.x)/2,x=(t.y+e.y)/2;if(this._doLeft){var y=new nt(g-p,x+l);r.add(y)}if(this._doRight){var _=new nt(g+p,x-l);r.add(_)}};Yp.prototype.interfaces_=function(){return[]};Yp.prototype.getClass=function(){return Yp};var za=function e(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=e.TOLERANCE,this._testCoords=new qt;var t=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=e.computeBoundaryDistanceTolerance(t,n),this._geom=[t,n,r],this._locFinder=[new rd(this._geom[0],this._boundaryDistanceTolerance),new rd(this._geom[1],this._boundaryDistanceTolerance),new rd(this._geom[2],this._boundaryDistanceTolerance)]},j$={TOLERANCE:{configurable:!0}};za.prototype.reportResult=function(e,t,n){Mo.out.println("Overlay result invalid - A:"+st.toLocationSymbol(t[0])+" B:"+st.toLocationSymbol(t[1])+" expected:"+(n?"i":"e")+" actual:"+st.toLocationSymbol(t[2]))};za.prototype.isValid=function(e){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var t=this.checkValid(e);return t};za.prototype.checkValid=function(){var e=this;if(arguments.length===1){for(var t=arguments[0],n=0;n<this._testCoords.size();n++){var r=e._testCoords.get(n);if(!e.checkValid(t,r))return e._invalidLocation=r,!1}return!0}else if(arguments.length===2){var i=arguments[0],o=arguments[1];return this._location[0]=this._locFinder[0].getLocation(o),this._location[1]=this._locFinder[1].getLocation(o),this._location[2]=this._locFinder[2].getLocation(o),za.hasLocation(this._location,st.BOUNDARY)?!0:this.isValidResult(i,this._location)}};za.prototype.addTestPts=function(e){var t=new Yp(e);this._testCoords.addAll(t.getPoints(5*this._boundaryDistanceTolerance))};za.prototype.isValidResult=function(e,t){var n=Rn.isResultOfOp(t[0],t[1],e),r=t[2]===st.INTERIOR,i=!(n^r);return i||this.reportResult(e,t,n),i};za.prototype.getInvalidLocation=function(){return this._invalidLocation};za.prototype.interfaces_=function(){return[]};za.prototype.getClass=function(){return za};za.hasLocation=function(e,t){for(var n=0;n<3;n++)if(e[n]===t)return!0;return!1};za.computeBoundaryDistanceTolerance=function(e,t){return Math.min(Li.computeSizeBasedSnapTolerance(e),Li.computeSizeBasedSnapTolerance(t))};za.isValid=function(e,t,n,r){var i=new za(e,t,r);return i.isValid(n)};j$.TOLERANCE.get=function(){return 1e-6};Object.defineProperties(za,j$);var Pa=function e(t){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=e.extractFactory(t),this._inputGeoms=t};Pa.prototype.extractElements=function(e,t){var n=this;if(e===null)return null;for(var r=0;r<e.getNumGeometries();r++){var i=e.getGeometryN(r);n._skipEmpty&&i.isEmpty()||t.add(i)}};Pa.prototype.combine=function(){for(var e=this,t=new qt,n=this._inputGeoms.iterator();n.hasNext();){var r=n.next();e.extractElements(r,t)}return t.size()===0?this._geomFactory!==null?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)};Pa.prototype.interfaces_=function(){return[]};Pa.prototype.getClass=function(){return Pa};Pa.combine=function(){if(arguments.length===1){var e=arguments[0],t=new Pa(e);return t.combine()}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=new Pa(Pa.createList(n,r));return i.combine()}else if(arguments.length===3){var o=arguments[0],u=arguments[1],l=arguments[2],p=new Pa(Pa.createList(o,u,l));return p.combine()}};Pa.extractFactory=function(e){return e.isEmpty()?null:e.iterator().next().getFactory()};Pa.createList=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=new qt;return n.add(e),n.add(t),n}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2],u=new qt;return u.add(r),u.add(i),u.add(o),u}};var zi=function(){this._inputPolys=null,this._geomFactory=null;var e=arguments[0];this._inputPolys=e,this._inputPolys===null&&(this._inputPolys=new qt)},$$={STRTREE_NODE_CAPACITY:{configurable:!0}};zi.prototype.reduceToGeometries=function(e){for(var t=this,n=new qt,r=e.iterator();r.hasNext();){var i=r.next(),o=null;Sn(i,$l)?o=t.unionTree(i):i instanceof bn&&(o=i),n.add(o)}return n};zi.prototype.extractByEnvelope=function(e,t,n){for(var r=new qt,i=0;i<t.getNumGeometries();i++){var o=t.getGeometryN(i);o.getEnvelopeInternal().intersects(e)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)};zi.prototype.unionOptimized=function(e,t){var n=e.getEnvelopeInternal(),r=t.getEnvelopeInternal();if(!n.intersects(r)){var i=Pa.combine(e,t);return i}if(e.getNumGeometries()<=1&&t.getNumGeometries()<=1)return this.unionActual(e,t);var o=n.intersection(r);return this.unionUsingEnvelopeIntersection(e,t,o)};zi.prototype.union=function(){if(this._inputPolys===null)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var e=new C$(zi.STRTREE_NODE_CAPACITY),t=this._inputPolys.iterator();t.hasNext();){var n=t.next();e.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=e.itemsTree(),i=this.unionTree(r);return i};zi.prototype.binaryUnion=function(){if(arguments.length===1){var e=arguments[0];return this.binaryUnion(e,0,e.size())}else if(arguments.length===3){var t=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=zi.getGeometry(t,n);return this.unionSafe(i,null)}else{if(r-n===2)return this.unionSafe(zi.getGeometry(t,n),zi.getGeometry(t,n+1));var o=Math.trunc((r+n)/2),u=this.binaryUnion(t,n,o),l=this.binaryUnion(t,o,r);return this.unionSafe(u,l)}}};zi.prototype.repeatedUnion=function(e){for(var t=null,n=e.iterator();n.hasNext();){var r=n.next();t===null?t=r.copy():t=t.union(r)}return t};zi.prototype.unionSafe=function(e,t){return e===null&&t===null?null:e===null?t.copy():t===null?e.copy():this.unionOptimized(e,t)};zi.prototype.unionActual=function(e,t){return zi.restrictToPolygons(e.union(t))};zi.prototype.unionTree=function(e){var t=this.reduceToGeometries(e),n=this.binaryUnion(t);return n};zi.prototype.unionUsingEnvelopeIntersection=function(e,t,n){var r=new qt,i=this.extractByEnvelope(n,e,r),o=this.extractByEnvelope(n,t,r),u=this.unionActual(i,o);r.add(u);var l=Pa.combine(r);return l};zi.prototype.bufferUnion=function(){if(arguments.length===1){var e=arguments[0],t=e.get(0).getFactory(),n=t.buildGeometry(e),r=n.buffer(0);return r}else if(arguments.length===2){var i=arguments[0],o=arguments[1],u=i.getFactory(),l=u.createGeometryCollection([i,o]),p=l.buffer(0);return p}};zi.prototype.interfaces_=function(){return[]};zi.prototype.getClass=function(){return zi};zi.restrictToPolygons=function(e){if(Sn(e,hd))return e;var t=Kh.getPolygons(e);return t.size()===1?t.get(0):e.getFactory().createMultiPolygon(Wn.toPolygonArray(t))};zi.getGeometry=function(e,t){return t>=e.size()?null:e.get(t)};zi.union=function(e){var t=new zi(e);return t.union()};$$.STRTREE_NODE_CAPACITY.get=function(){return 4};Object.defineProperties(zi,$$);var pE=function(){};pE.prototype.interfaces_=function(){return[]};pE.prototype.getClass=function(){return pE};pE.union=function(e,t){if(e.isEmpty()||t.isEmpty()){if(e.isEmpty()&&t.isEmpty())return Rn.createEmptyResult(Rn.UNION,e,t,e.getFactory());if(e.isEmpty())return t.copy();if(t.isEmpty())return e.copy()}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),ds.overlayOp(e,t,Rn.UNION)};function lm(){return new mE}function mE(){this.reset()}mE.prototype={constructor:mE,reset:function(){this.s=this.t=0},add:function(e){R3(zb,e,this.t),R3(this,zb.s,this.s),this.s?this.t+=zb.t:this.s=zb.t},valueOf:function(){return this.s}};var zb=new mE;function R3(e,t,n){var r=e.s=t+n,i=r-t,o=r-i;e.t=t-o+(n-i)}var yi=1e-6,Mr=Math.PI,Hh=Mr/2,M3=Mr/4,nf=Mr*2,tp=180/Mr,Su=Mr/180,as=Math.abs,_le=Math.atan,K_=Math.atan2,Gi=Math.cos,Hi=Math.sin,fv=Math.sqrt;function U$(e){return e>1?0:e<-1?Mr:Math.acos(e)}function Ng(e){return e>1?Hh:e<-1?-Hh:Math.asin(e)}function P0(){}function gE(e,t){e&&D3.hasOwnProperty(e.type)&&D3[e.type](e,t)}var N3={Feature:function(e,t){gE(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)gE(n[r].geometry,t)}},D3={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){RP(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)RP(n[r],t,0)},Polygon:function(e,t){z3(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)z3(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)gE(n[r],t)}};function RP(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function z3(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)RP(e[n],t,1);t.polygonEnd()}function vle(e,t){e&&N3.hasOwnProperty(e.type)?N3[e.type](e,t):gE(e,t)}lm();lm();function MP(e){return[K_(e[1],e[0]),Ng(e[2])]}function X_(e){var t=e[0],n=e[1],r=Gi(n);return[r*Gi(t),r*Hi(t),Hi(n)]}function Fb(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function yE(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function eC(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Bb(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function NP(e){var t=fv(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}lm();function q$(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function DP(e,t){return[e>Mr?e-nf:e<-Mr?e+nf:e,t]}DP.invert=DP;function xle(e,t,n){return(e%=nf)?t||n?q$(B3(e),j3(t,n)):B3(e):t||n?j3(t,n):DP}function F3(e){return function(t,n){return t+=e,[t>Mr?t-nf:t<-Mr?t+nf:t,n]}}function B3(e){var t=F3(e);return t.invert=F3(-e),t}function j3(e,t){var n=Gi(e),r=Hi(e),i=Gi(t),o=Hi(t);function u(l,p){var g=Gi(p),x=Gi(l)*g,y=Hi(l)*g,_=Hi(p),T=_*n+x*r;return[K_(y*i-T*o,x*n-_*r),Ng(T*i+y*o)]}return u.invert=function(l,p){var g=Gi(p),x=Gi(l)*g,y=Hi(l)*g,_=Hi(p),T=_*i-y*o;return[K_(y*i+_*o,x*n+T*r),Ng(T*n-x*r)]},u}function ble(e,t,n,r,i,o){if(n){var u=Gi(t),l=Hi(t),p=r*n;i==null?(i=t+r*nf,o=t-p/2):(i=$3(u,i),o=$3(u,o),(r>0?i<o:i>o)&&(i+=r*nf));for(var g,x=i;r>0?x>o:x<o;x-=p)g=MP([u,-l*Gi(x),-l*Hi(x)]),e.point(g[0],g[1])}}function $3(e,t){t=X_(t),t[0]-=e,NP(t);var n=U$(-t[1]);return((-t[2]<0?-n:n)+nf-yi)%nf}function V$(){var e=[],t;return{point:function(n,r){t.push([n,r])},lineStart:function(){e.push(t=[])},lineEnd:P0,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function wle(e,t,n,r,i,o){var u=e[0],l=e[1],p=t[0],g=t[1],x=0,y=1,_=p-u,T=g-l,A;if(A=n-u,!(!_&&A>0)){if(A/=_,_<0){if(A<x)return;A<y&&(y=A)}else if(_>0){if(A>y)return;A>x&&(x=A)}if(A=i-u,!(!_&&A<0)){if(A/=_,_<0){if(A>y)return;A>x&&(x=A)}else if(_>0){if(A<x)return;A<y&&(y=A)}if(A=r-l,!(!T&&A>0)){if(A/=T,T<0){if(A<x)return;A<y&&(y=A)}else if(T>0){if(A>y)return;A>x&&(x=A)}if(A=o-l,!(!T&&A<0)){if(A/=T,T<0){if(A>y)return;A>x&&(x=A)}else if(T>0){if(A<x)return;A<y&&(y=A)}return x>0&&(e[0]=u+x*_,e[1]=l+x*T),y<1&&(t[0]=u+y*_,t[1]=l+y*T),!0}}}}}function bw(e,t){return as(e[0]-t[0])<yi&&as(e[1]-t[1])<yi}function jb(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function G$(e,t,n,r,i){var o=[],u=[],l,p;if(e.forEach(function(A){if(!((O=A.length-1)<=0)){var O,N=A[0],k=A[O],R;if(bw(N,k)){for(i.lineStart(),l=0;l<O;++l)i.point((N=A[l])[0],N[1]);i.lineEnd();return}o.push(R=new jb(N,A,null,!0)),u.push(R.o=new jb(N,null,R,!1)),o.push(R=new jb(k,A,null,!1)),u.push(R.o=new jb(k,null,R,!0))}}),!!o.length){for(u.sort(t),U3(o),U3(u),l=0,p=u.length;l<p;++l)u[l].e=n=!n;for(var g=o[0],x,y;;){for(var _=g,T=!0;_.v;)if((_=_.n)===g)return;x=_.z,i.lineStart();do{if(_.v=_.o.v=!0,_.e){if(T)for(l=0,p=x.length;l<p;++l)i.point((y=x[l])[0],y[1]);else r(_.x,_.n.x,1,i);_=_.n}else{if(T)for(x=_.p.z,l=x.length-1;l>=0;--l)i.point((y=x[l])[0],y[1]);else r(_.x,_.p.x,-1,i);_=_.p}_=_.o,x=_.z,T=!T}while(!_.v);i.lineEnd()}}}function U3(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function H$(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Ele(e){return e.length===1&&(e=Sle(e)),{left:function(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)<0?r=o+1:i=o}return r},right:function(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)>0?i=o:r=o+1}return r}}}function Sle(e){return function(t,n){return H$(e(t),n)}}Ele(H$);function Z$(e){for(var t=e.length,n,r=-1,i=0,o,u;++r<t;)i+=e[r].length;for(o=new Array(i);--t>=0;)for(u=e[t],n=u.length;--n>=0;)o[--i]=u[n];return o}var L0=1e9,$b=-L0;function Tle(e,t,n,r){function i(g,x){return e<=g&&g<=n&&t<=x&&x<=r}function o(g,x,y,_){var T=0,A=0;if(g==null||(T=u(g,y))!==(A=u(x,y))||p(g,x)<0^y>0)do _.point(T===0||T===3?e:n,T>1?r:t);while((T=(T+y+4)%4)!==A);else _.point(x[0],x[1])}function u(g,x){return as(g[0]-e)<yi?x>0?0:3:as(g[0]-n)<yi?x>0?2:1:as(g[1]-t)<yi?x>0?1:0:x>0?3:2}function l(g,x){return p(g.x,x.x)}function p(g,x){var y=u(g,1),_=u(x,1);return y!==_?y-_:y===0?x[1]-g[1]:y===1?g[0]-x[0]:y===2?g[1]-x[1]:x[0]-g[0]}return function(g){var x=g,y=V$(),_,T,A,O,N,k,R,z,D,U,q,G={point:H,lineStart:ee,lineEnd:ue,polygonStart:Y,polygonEnd:X};function H(we,Ne){i(we,Ne)&&x.point(we,Ne)}function J(){for(var we=0,Ne=0,Be=T.length;Ne<Be;++Ne)for(var De=T[Ne],Ae=1,ve=De.length,ce=De[0],xe,Ee,Ge=ce[0],$e=ce[1];Ae<ve;++Ae)xe=Ge,Ee=$e,ce=De[Ae],Ge=ce[0],$e=ce[1],Ee<=r?$e>r&&(Ge-xe)*(r-Ee)>($e-Ee)*(e-xe)&&++we:$e<=r&&(Ge-xe)*(r-Ee)<($e-Ee)*(e-xe)&&--we;return we}function Y(){x=y,_=[],T=[],q=!0}function X(){var we=J(),Ne=q&&we,Be=(_=Z$(_)).length;(Ne||Be)&&(g.polygonStart(),Ne&&(g.lineStart(),o(null,null,1,g),g.lineEnd()),Be&&G$(_,l,we,o,g),g.polygonEnd()),x=g,_=T=A=null}function ee(){G.point=oe,T&&T.push(A=[]),U=!0,D=!1,R=z=NaN}function ue(){_&&(oe(O,N),k&&D&&y.rejoin(),_.push(y.result())),G.point=H,D&&x.lineEnd()}function oe(we,Ne){var Be=i(we,Ne);if(T&&A.push([we,Ne]),U)O=we,N=Ne,k=Be,U=!1,Be&&(x.lineStart(),x.point(we,Ne));else if(Be&&D)x.point(we,Ne);else{var De=[R=Math.max($b,Math.min(L0,R)),z=Math.max($b,Math.min(L0,z))],Ae=[we=Math.max($b,Math.min(L0,we)),Ne=Math.max($b,Math.min(L0,Ne))];wle(De,Ae,e,t,n,r)?(D||(x.lineStart(),x.point(De[0],De[1])),x.point(Ae[0],Ae[1]),Be||x.lineEnd(),q=!1):Be&&(x.lineStart(),x.point(we,Ne),q=!1)}R=we,z=Ne,D=Be}return G}}var tC=lm();function Cle(e,t){var n=t[0],r=t[1],i=[Hi(n),-Gi(n),0],o=0,u=0;tC.reset();for(var l=0,p=e.length;l<p;++l)if(x=(g=e[l]).length)for(var g,x,y=g[x-1],_=y[0],T=y[1]/2+M3,A=Hi(T),O=Gi(T),N=0;N<x;++N,_=R,A=D,O=U,y=k){var k=g[N],R=k[0],z=k[1]/2+M3,D=Hi(z),U=Gi(z),q=R-_,G=q>=0?1:-1,H=G*q,J=H>Mr,Y=A*D;if(tC.add(K_(Y*G*Hi(H),O*U+Y*Gi(H))),o+=J?q+G*nf:q,J^_>=n^R>=n){var X=yE(X_(y),X_(k));NP(X);var ee=yE(i,X);NP(ee);var ue=(J^q>=0?-1:1)*Ng(ee[2]);(r>ue||r===ue&&(X[0]||X[1]))&&(u+=J^q>=0?1:-1)}}return(o<-yi||o<yi&&tC<-yi)^u&1}lm();function q3(e){return e}lm();lm();var Y_=1/0,_E=Y_,q1=-Y_,vE=q1,V3={point:Ile,lineStart:P0,lineEnd:P0,polygonStart:P0,polygonEnd:P0,result:function(){var e=[[Y_,_E],[q1,vE]];return q1=vE=-(_E=Y_=1/0),e}};function Ile(e,t){e<Y_&&(Y_=e),e>q1&&(q1=e),t<_E&&(_E=t),t>vE&&(vE=t)}lm();function W$(e,t,n,r){return function(i,o){var u=t(o),l=i.invert(r[0],r[1]),p=V$(),g=t(p),x=!1,y,_,T,A={point:O,lineStart:k,lineEnd:R,polygonStart:function(){A.point=z,A.lineStart=D,A.lineEnd=U,_=[],y=[]},polygonEnd:function(){A.point=O,A.lineStart=k,A.lineEnd=R,_=Z$(_);var q=Cle(y,l);_.length?(x||(o.polygonStart(),x=!0),G$(_,Lle,q,n,o)):q&&(x||(o.polygonStart(),x=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),x&&(o.polygonEnd(),x=!1),_=y=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function O(q,G){var H=i(q,G);e(q=H[0],G=H[1])&&o.point(q,G)}function N(q,G){var H=i(q,G);u.point(H[0],H[1])}function k(){A.point=N,u.lineStart()}function R(){A.point=O,u.lineEnd()}function z(q,G){T.push([q,G]);var H=i(q,G);g.point(H[0],H[1])}function D(){g.lineStart(),T=[]}function U(){z(T[0][0],T[0][1]),g.lineEnd();var q=g.clean(),G=p.result(),H,J=G.length,Y,X,ee;if(T.pop(),y.push(T),T=null,!!J){if(q&1){if(X=G[0],(Y=X.length-1)>0){for(x||(o.polygonStart(),x=!0),o.lineStart(),H=0;H<Y;++H)o.point((ee=X[H])[0],ee[1]);o.lineEnd()}return}J>1&&q&2&&G.push(G.pop().concat(G.shift())),_.push(G.filter(Ple))}}return A}}function Ple(e){return e.length>1}function Lle(e,t){return((e=e.x)[0]<0?e[1]-Hh-yi:Hh-e[1])-((t=t.x)[0]<0?t[1]-Hh-yi:Hh-t[1])}const G3=W$(function(){return!0},Ale,kle,[-Mr,-Hh]);function Ale(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,u){var l=o>0?Mr:-Mr,p=as(o-t);as(p-Mr)<yi?(e.point(t,n=(n+u)/2>0?Hh:-Hh),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(l,n),e.point(o,n),i=0):r!==l&&p>=Mr&&(as(t-r)<yi&&(t-=r*yi),as(o-l)<yi&&(o-=l*yi),n=Ole(t,n,o,u),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(l,n),i=0),e.point(t=o,n=u),r=l},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function Ole(e,t,n,r){var i,o,u=Hi(e-n);return as(u)>yi?_le((Hi(t)*(o=Gi(r))*Hi(n)-Hi(r)*(i=Gi(t))*Hi(e))/(i*o*u)):(t+r)/2}function kle(e,t,n,r){var i;if(e==null)i=n*Hh,r.point(-Mr,i),r.point(0,i),r.point(Mr,i),r.point(Mr,0),r.point(Mr,-i),r.point(0,-i),r.point(-Mr,-i),r.point(-Mr,0),r.point(-Mr,i);else if(as(e[0]-t[0])>yi){var o=e[0]<t[0]?Mr:-Mr;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function Rle(e,t){var n=Gi(e),r=n>0,i=as(n)>yi;function o(x,y,_,T){ble(T,e,t,_,x,y)}function u(x,y){return Gi(x)*Gi(y)>n}function l(x){var y,_,T,A,O;return{lineStart:function(){A=T=!1,O=1},point:function(N,k){var R=[N,k],z,D=u(N,k),U=r?D?0:g(N,k):D?g(N+(N<0?Mr:-Mr),k):0;if(!y&&(A=T=D)&&x.lineStart(),D!==T&&(z=p(y,R),(!z||bw(y,z)||bw(R,z))&&(R[0]+=yi,R[1]+=yi,D=u(R[0],R[1]))),D!==T)O=0,D?(x.lineStart(),z=p(R,y),x.point(z[0],z[1])):(z=p(y,R),x.point(z[0],z[1]),x.lineEnd()),y=z;else if(i&&y&&r^D){var q;!(U&_)&&(q=p(R,y,!0))&&(O=0,r?(x.lineStart(),x.point(q[0][0],q[0][1]),x.point(q[1][0],q[1][1]),x.lineEnd()):(x.point(q[1][0],q[1][1]),x.lineEnd(),x.lineStart(),x.point(q[0][0],q[0][1])))}D&&(!y||!bw(y,R))&&x.point(R[0],R[1]),y=R,T=D,_=U},lineEnd:function(){T&&x.lineEnd(),y=null},clean:function(){return O|(A&&T)<<1}}}function p(x,y,_){var T=X_(x),A=X_(y),O=[1,0,0],N=yE(T,A),k=Fb(N,N),R=N[0],z=k-R*R;if(!z)return!_&&x;var D=n*k/z,U=-n*R/z,q=yE(O,N),G=Bb(O,D),H=Bb(N,U);eC(G,H);var J=q,Y=Fb(G,J),X=Fb(J,J),ee=Y*Y-X*(Fb(G,G)-1);if(!(ee<0)){var ue=fv(ee),oe=Bb(J,(-Y-ue)/X);if(eC(oe,G),oe=MP(oe),!_)return oe;var we=x[0],Ne=y[0],Be=x[1],De=y[1],Ae;Ne<we&&(Ae=we,we=Ne,Ne=Ae);var ve=Ne-we,ce=as(ve-Mr)<yi,xe=ce||ve<yi;if(!ce&&De<Be&&(Ae=Be,Be=De,De=Ae),xe?ce?Be+De>0^oe[1]<(as(oe[0]-we)<yi?Be:De):Be<=oe[1]&&oe[1]<=De:ve>Mr^(we<=oe[0]&&oe[0]<=Ne)){var Ee=Bb(J,(-Y+ue)/X);return eC(Ee,G),[oe,MP(Ee)]}}}function g(x,y){var _=r?e:Mr-e,T=0;return x<-_?T|=1:x>_&&(T|=2),y<-_?T|=4:y>_&&(T|=8),T}return W$(u,l,o,r?[0,-e]:[-Mr,e-Mr])}function K$(e){return function(t){var n=new zP;for(var r in e)n[r]=e[r];return n.stream=t,n}}function zP(){}zP.prototype={constructor:zP,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function X$(e,t,n){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1],o=e.clipExtent&&e.clipExtent();e.scale(150).translate([0,0]),o!=null&&e.clipExtent(null),vle(n,e.stream(V3));var u=V3.result(),l=Math.min(r/(u[1][0]-u[0][0]),i/(u[1][1]-u[0][1])),p=+t[0][0]+(r-l*(u[1][0]+u[0][0]))/2,g=+t[0][1]+(i-l*(u[1][1]+u[0][1]))/2;return o!=null&&e.clipExtent(o),e.scale(l*150).translate([p,g])}function Mle(e,t,n){return X$(e,[[0,0],t],n)}var H3=16,Nle=Gi(30*Su);function Z3(e,t){return+t?zle(e,t):Dle(e)}function Dle(e){return K$({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function zle(e,t){function n(r,i,o,u,l,p,g,x,y,_,T,A,O,N){var k=g-r,R=x-i,z=k*k+R*R;if(z>4*t&&O--){var D=u+_,U=l+T,q=p+A,G=fv(D*D+U*U+q*q),H=Ng(q/=G),J=as(as(q)-1)<yi||as(o-y)<yi?(o+y)/2:K_(U,D),Y=e(J,H),X=Y[0],ee=Y[1],ue=X-r,oe=ee-i,we=R*ue-k*oe;(we*we/z>t||as((k*ue+R*oe)/z-.5)>.3||u*_+l*T+p*A<Nle)&&(n(r,i,o,u,l,p,X,ee,J,D/=G,U/=G,q,O,N),N.point(X,ee),n(X,ee,J,D,U,q,g,x,y,_,T,A,O,N))}}return function(r){var i,o,u,l,p,g,x,y,_,T,A,O,N={point:k,lineStart:R,lineEnd:D,polygonStart:function(){r.polygonStart(),N.lineStart=U},polygonEnd:function(){r.polygonEnd(),N.lineStart=R}};function k(H,J){H=e(H,J),r.point(H[0],H[1])}function R(){y=NaN,N.point=z,r.lineStart()}function z(H,J){var Y=X_([H,J]),X=e(H,J);n(y,_,x,T,A,O,y=X[0],_=X[1],x=H,T=Y[0],A=Y[1],O=Y[2],H3,r),r.point(y,_)}function D(){N.point=k,r.lineEnd()}function U(){R(),N.point=q,N.lineEnd=G}function q(H,J){z(i=H,J),o=y,u=_,l=T,p=A,g=O,N.point=z}function G(){n(y,_,x,T,A,O,o,u,i,l,p,g,H3,r),N.lineEnd=D,D()}return N}}var Fle=K$({point:function(e,t){this.stream.point(e*Su,t*Su)}});function Ble(e){return jle(function(){return e})()}function jle(e){var t,n=150,r=480,i=250,o,u,l=0,p=0,g=0,x=0,y=0,_,T,A=null,O=G3,N=null,k,R,z,D=q3,U=.5,q=Z3(X,U),G,H;function J(oe){return oe=T(oe[0]*Su,oe[1]*Su),[oe[0]*n+o,u-oe[1]*n]}function Y(oe){return oe=T.invert((oe[0]-o)/n,(u-oe[1])/n),oe&&[oe[0]*tp,oe[1]*tp]}function X(oe,we){return oe=t(oe,we),[oe[0]*n+o,u-oe[1]*n]}J.stream=function(oe){return G&&H===oe?G:G=Fle(O(_,q(D(H=oe))))},J.clipAngle=function(oe){return arguments.length?(O=+oe?Rle(A=oe*Su,6*Su):(A=null,G3),ue()):A*tp},J.clipExtent=function(oe){return arguments.length?(D=oe==null?(N=k=R=z=null,q3):Tle(N=+oe[0][0],k=+oe[0][1],R=+oe[1][0],z=+oe[1][1]),ue()):N==null?null:[[N,k],[R,z]]},J.scale=function(oe){return arguments.length?(n=+oe,ee()):n},J.translate=function(oe){return arguments.length?(r=+oe[0],i=+oe[1],ee()):[r,i]},J.center=function(oe){return arguments.length?(l=oe[0]%360*Su,p=oe[1]%360*Su,ee()):[l*tp,p*tp]},J.rotate=function(oe){return arguments.length?(g=oe[0]%360*Su,x=oe[1]%360*Su,y=oe.length>2?oe[2]%360*Su:0,ee()):[g*tp,x*tp,y*tp]},J.precision=function(oe){return arguments.length?(q=Z3(X,U=oe*oe),ue()):fv(U)},J.fitExtent=function(oe,we){return X$(J,oe,we)},J.fitSize=function(oe,we){return Mle(J,oe,we)};function ee(){T=q$(_=xle(g,x,y),t);var oe=t(l,p);return o=r-oe[0]*n,u=i+oe[1]*n,ue()}function ue(){return G=H=null,J}return function(){return t=e.apply(this,arguments),J.invert=t.invert&&Y,ee()}}function Y$(e){return function(t,n){var r=Gi(t),i=Gi(n),o=e(r*i);return[o*i*Hi(t),o*Hi(n)]}}function J$(e){return function(t,n){var r=fv(t*t+n*n),i=e(r),o=Hi(i),u=Gi(i);return[K_(t*o,r*u),Ng(r&&n*o/r)]}}var $le=Y$(function(e){return fv(2/(1+e))});$le.invert=J$(function(e){return 2*Ng(e/2)});var Q$=Y$(function(e){return(e=U$(e))&&e/Hi(e)});Q$.invert=J$(function(e){return e});function Ule(){return Ble(Q$).scale(79.4188).clipAngle(180-.001)}function W3(e,t){return[e,t]}W3.invert=W3;function qle(e,t,n){n=n||{};var r=n.units||"kilometers",i=n.steps||8;if(!e)throw new Error("geojson is required");if(typeof n!="object")throw new Error("options must be an object");if(typeof i!="number")throw new Error("steps must be an number");if(t===void 0)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");var o=[];switch(e.type){case"GeometryCollection":return p$(e,function(u){var l=ww(u,t,r,i);l&&o.push(l)}),AP(o);case"FeatureCollection":return P3(e,function(u){var l=ww(u,t,r,i);l&&P3(l,function(p){p&&o.push(p)})}),AP(o)}return ww(e,t,r,i)}function ww(e,t,n,r){var i=e.properties||{},o=e.type==="Feature"?e.geometry:e;if(o.type==="GeometryCollection"){var u=[];return p$(e,function(O){var N=ww(O,t,n,r);N&&u.push(N)}),AP(u)}var l=Vle(o),p={type:o.type,coordinates:t8(o.coordinates,l)},g=new lO,x=g.read(p),y=Yae(Jae(t,n),"meters"),_=Oo.bufferOp(x,y,r),T=new S$;if(_=T.write(_),!e8(_.coordinates)){var A={type:_.type,coordinates:n8(_.coordinates,l)};return FS(A,i)}}function e8(e){return Array.isArray(e[0])?e8(e[0]):isNaN(e[0])}function t8(e,t){return typeof e[0]!="object"?t(e):e.map(function(n){return t8(n,t)})}function n8(e,t){return typeof e[0]!="object"?t.invert(e):e.map(function(n){return n8(n,t)})}function Vle(e){var t=ele(e).geometry.coordinates,n=[-t[0],-t[1]];return Ule().rotate(n).scale(ba)}function Gle(e,t){var n=uE(e),r=uE(t),i=e.properties||{},o=u$.difference(n.coordinates,r.coordinates);return o.length===0?null:o.length===1?h$(o[0],i):f$(o,i)}function K3(e){let t;for(const n of e)t&&n[0]-t[0]>=180?n[0]-=360:t&&n[0]-t[0]<-180&&(n[0]+=360),t=n}function X3(e,t){const n=Gle({type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]},e);if(!n)return;n.properties={isMask:"y"};const r=qle(e,0);if(r.geometry.type==="Polygon")for(const i of r.geometry.coordinates)K3(i);else for(const i of r.geometry.coordinates)for(const o of i)K3(o);t({type:"FeatureCollection",features:[r,n]})}let Y3={type:"FeatureCollection",features:[]};function Hle(e,t,n=!0,r=!0,i={},o={},u={fill:{paint:{"fill-color":"#000","fill-opacity":.1},filter:["all",["==",["geometry-type"],"Polygon"],["has","isMask"]]},line:{layout:{"line-cap":"square"},paint:{"line-width":["case",["==",["geometry-type"],"Polygon"],2,3],"line-dasharray":[1,1],"line-color":"#3170fe"},filter:["!",["has","isMask"]]}}){let l,p=[],g,x;function y(){(u!=null&&u.fill||u!=null&&u.line)&&e.addSource("full-geom",{type:"geojson",data:Y3}),u!=null&&u.fill&&e.addLayer({...u==null?void 0:u.fill,id:"full-geom-fill",type:"fill",source:"full-geom"}),u!=null&&u.line&&e.addLayer({...u==null?void 0:u.line,id:"full-geom-line",type:"line",source:"full-geom"})}e.loaded()?y():e.once("load",()=>{y()});const _=A=>{l==null||l({type:"mapClick",coordinates:[A.lngLat.lng,A.lngLat.lat]})};function T(A=!1){if(!t)throw new Error;const O=document.createElement("div");return A&&O.classList.add("marker-interactive"),new rae({props:{displayIn:"maplibre"},target:O}),new t.Marker({element:O,offset:[1,-13]})}return{setEventHandler(A){A?(l=A,e.on("click",_)):(l=void 0,e.off("click",_))},flyTo(A,O){e.flyTo({center:A,zoom:O,...i})},fitBounds(A,O,N){e.fitBounds([[A[0],A[1]],[A[2],A[3]]],{padding:O,maxZoom:N,...o})},indicateReverse(A){e.getCanvasContainer().style.cursor=A?"crosshair":""},setReverseMarker(A){!t||!n||(x?A?x.setLngLat(A):(x.remove(),x=void 0):A&&(x=(typeof n=="object"?new t.Marker(n):T()).setLngLat(A).addTo(e),x.getElement().classList.add("marker-reverse")))},setMarkers(A,O){if(!n)return;function N(k){var R;(R=e.getSource("full-geom"))==null||R.setData(k)}for(const k of p)k.remove();if(p.length=0,N(Y3),!!t){if(O){let k=!1;if(O.geometry.type==="GeometryCollection"){const R=O.geometry.geometries.filter(z=>z.type==="Polygon"||z.type==="MultiPolygon");if(R.length>0){let z=R.pop();for(const D of R)z=Qae(z,D);X3({...O,geometry:z},N),k=!0}else{const z=O.geometry.geometries.filter(D=>D.type==="LineString"||D.type==="MultiLineString");z.length>0&&(N({...O,geometry:{type:"GeometryCollection",geometries:z}}),k=!0)}}if(!k){if(O.geometry.type==="Polygon"||O.geometry.type==="MultiPolygon")X3(O,N);else if(O.geometry.type==="LineString"||O.geometry.type==="MultiLineString"){N(O);return}}n&&p.push((typeof n=="object"?new t.Marker(n):T()).setLngLat(O.center).addTo(e))}if(r)for(const k of A??[]){if(k===O)continue;const R=(typeof r=="object"?new t.Marker(r):T(!0)).setLngLat(k.center).setPopup(new t.Popup({offset:[1,-27],closeButton:!1,closeOnMove:!0,className:"maptiler-gc-popup"}).setText(k.place_type[0]==="reverse"?k.place_name:k.place_name.replace(/,.*/,""))).addTo(e),z=R.getElement();z.addEventListener("click",D=>{D.stopPropagation(),l==null||l({type:"markerClick",id:k.id})}),z.addEventListener("mouseenter",()=>{l==null||l({type:"markerMouseEnter",id:k.id}),R.togglePopup()}),z.addEventListener("mouseleave",()=>{l==null||l({type:"markerMouseLeave",id:k.id}),R.togglePopup()}),p.push(R)}}},setSelectedMarker(A){g&&g.getElement().classList.toggle("marker-selected",!1),g=A>-1?p[A]:void 0,g==null||g.getElement().classList.toggle("marker-selected",!0)},getCenterAndZoom(){const A=e.getCenter();return[e.getZoom(),A.lng,A.lat]}}}var bu,Ly;class Zle extends EventTarget{constructor(t={}){super(),JD(this,bu,void 0),JD(this,Ly,void 0),X2(this,Ly,t)}onAddInt(t){const n=document.createElement("div");n.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl maplibregl-ctrl-geocoder maplibregl-ctrl mapboxgl-ctrl-group";const{marker:r,showResultMarkers:i,flyTo:o,fullGeometryStyle:u,...l}=wc(this,Ly),p=typeof o=="boolean"?{}:o,g=this.getExtraProps(t,n),x={mapController:Hle(t,this.getMapLibreGl(),r,i,p,p,u),flyTo:o===void 0?!0:!!o,apiKey:"",...g,...l};if(!x.apiKey)throw new Error("no apiKey provided");X2(this,bu,new Iae({target:n,props:x}));for(const y of["select","pick","featuresListed","featuresMarked","response","optionsVisibilityChange","reverseToggle","queryChange"])wc(this,bu).$on(y,_=>this.dispatchEvent(_));return n}setOptions(t){var n;X2(this,Ly,t);const{marker:r,showResultMarkers:i,flyTo:o,fullGeometryStyle:u,...l}=wc(this,Ly);(n=wc(this,bu))==null||n.$set(l)}setQuery(t,n=!0){var r;(r=wc(this,bu))==null||r.setQuery(t,n)}clearMap(){var t;(t=wc(this,bu))==null||t.clearMap()}clearList(){var t;(t=wc(this,bu))==null||t.clearList()}setReverseMode(t){var n;(n=wc(this,bu))==null||n.$set({reverseActive:t})}focus(){var t;(t=wc(this,bu))==null||t.focus()}blur(){var t;(t=wc(this,bu))==null||t.blur()}onRemove(){var t;(t=wc(this,bu))==null||t.$destroy()}}bu=new WeakMap,Ly=new WeakMap;class Wle extends Zle{getMapLibreGl(){return yse}onAdd(t){return super.onAddInt(t)}getExtraProps(t,n){const r={};if(!("getSdkConfig"in t&&typeof t.getSdkConfig=="function"))throw new Error("MapTiler SDK not detected");const{primaryLanguage:i,apiKey:o}=t.getSdkConfig();r.apiKey=o;const u=/^([a-z]{2})($|_|-)/.exec(i);return u&&(r.language=u[1]),n.className+=" maptiler-ctrl",r}}function Kle(e,t){function n(i){const o=i.coords.longitude,u=i.coords.latitude;e([o,u]),t(!1)}function r(){e(null),ar.error("You have denied the location access",{autoClose:2e3}),t(!1)}navigator.geolocation?navigator.geolocation.getCurrentPosition(n,r,{enableHighAccuracy:!0}):(e(null),ar.error("Your browser doesn't support current location feature",{autoClose:2e3}),t(!1))}function Xle({handleDone:e,latLng:t}){const[n,r]=qe.useState(),[i,o]=qe.useState(null),[u,l]=qe.useState(!0);return ns.apiKey="6ATpjqubAVOsSMm33WCc",qe.useEffect(()=>{if(!i&&u)return Kle(o,l);const p=new HA({container:"map",style:kS.STREETS,center:i||[78.9629,20.5937],zoom:4}),g=new Gj({draggable:!0}).setLngLat(i||[78.9629,20.5937]).addTo(p),x=new Wle({country:"IN",marker:!1,markerOnSelected:!1});x.addEventListener("pick",({detail:y})=>{g.setLngLat(y.center)}),p.addControl(x,"top-left"),r(g)},[u]),u?he.jsx("div",{children:"Loading..."}):he.jsx("div",{id:"map",className:"maptiler-map",children:he.jsx("button",{className:"maptiler-done-button",onClick:()=>e(n),children:"Done"})})}function Yle({_id:e,users:t,messages:n,setChatId:r,lastMessage:i}){const o=qL(),u=nm(),l=qe.useContext(aS),{userAuth:p}=qe.useContext(eu),g=t[0],x=+n.length;console.log("Message Component--->",x,n,n.length);function y(){l.emit("chat-connected",{chatId:e,userId:p==null?void 0:p._id}),r(e),u.setQueryData(["chats"],_=>_.map(T=>(T==null?void 0:T._id)===e?{...T,messages:[]}:T)),o(aZ(x))}return he.jsxs("div",{className:"message-container",onClick:y,children:[he.jsx("img",{src:g.avatar,alt:"avatar-image"}),he.jsx("span",{children:g.username}),he.jsx("p",{children:i}),x>0&&he.jsx("span",{className:"notification-count",children:x})]})}function Jle(){const[e,t]=TF({minPrice:0,maxPrice:0,address:"",type:"buy"}),n=Yc(),r=Object.fromEntries(e.entries());function i(l){t({...r,type:l})}function o(l){t({...r,[l.target.name]:l.target.value})}function u(l){if(l.preventDefault(),r.minPrice>r.maxPrice)return ar.error("Min price can't be greater than max price",{autoClose:2e3});n(`/list${AA(r)}`)}return he.jsxs("div",{className:"form-container",children:[he.jsx("div",{className:"upper-portion",children:hA.map((l,p)=>he.jsx("button",{className:`${e.get("type")==l?"activeType":""}`,onClick:()=>i(l),children:l},p))}),he.jsxs("form",{onSubmit:u,children:[he.jsx("input",{type:"text",name:"address",placeholder:"Address",onChange:o}),he.jsx("input",{type:"number",name:"minPrice",min:0,max:1e10,placeholder:"Min price",onChange:o}),he.jsx("input",{type:"number",name:"maxPrice",min:0,max:1e10,placeholder:"Max price",onChange:o}),he.jsx("button",{children:he.jsx("img",{src:"/search.png"})})]})]})}function p0({optionValues:e,selectName:t,selectId:n,labelText:r,defaultOption:i,handleChange:o,handleBlur:u,className:l}){return he.jsxs("div",{className:"default-styling "+l,children:[he.jsx("label",{htmlFor:n,children:r}),he.jsxs("select",{name:t,id:n,onChange:o,onBlur:u,children:[he.jsx("option",{hidden:!0,children:i}),e.map((p,g)=>he.jsx("option",{value:p,children:p},g))]})]})}function Qle({images:e}){const[t,n]=qe.useState(0),[r,i]=qe.useState(!1),u=+e.length>=4?e:new Array(4).fill(0,0,4).map((g,x)=>e[x]||qB);function l(g,x){let y=t+g;y=y<0||y>=+u.length?x:y,n(y)}function p(g,x){i(g),n(x)}return he.jsxs("div",{className:"slider-container",children:[he.jsxs("div",{className:`${r?"slider-full":"slider-close"} `,children:[he.jsx("div",{className:"left-arrow",children:he.jsx("img",{src:"/arrow.png",alt:"left-arrow",onClick:()=>l(-1,+u.length-1)})}),he.jsx("div",{className:"image-container",children:u.map((g,x)=>he.jsx("img",{src:g,alt:"house-image",style:{display:x==t?"block":"none"}},x))}),he.jsx("div",{className:"right-arrow",children:he.jsx("img",{src:"/arrow.png",alt:"right-arrow",onClick:()=>l(1,0)})}),he.jsx("button",{className:"close-button",onClick:()=>p(!1),children:"X"})]}),he.jsx("div",{className:"slider-left-section",children:he.jsx("img",{src:u[0],alt:"house-image",onClick:()=>p(!0,0)})}),he.jsx("div",{className:"slider-right-section",children:u.slice(1).map((g,x)=>he.jsx("img",{onClick:()=>p(!0,x+1),src:g,alt:"house-image"},x))})]})}function eue(){this.__data__=[],this.size=0}var tue=eue;function nue(e,t){return e===t||e!==e&&t!==t}var r8=nue,rue=r8;function iue(e,t){for(var n=e.length;n--;)if(rue(e[n][0],t))return n;return-1}var YS=iue,oue=YS,sue=Array.prototype,aue=sue.splice;function lue(e){var t=this.__data__,n=oue(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():aue.call(t,n,1),--this.size,!0}var uue=lue,cue=YS;function hue(e){var t=this.__data__,n=cue(t,e);return n<0?void 0:t[n][1]}var fue=hue,due=YS;function pue(e){return due(this.__data__,e)>-1}var mue=pue,gue=YS;function yue(e,t){var n=this.__data__,r=gue(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var _ue=yue,vue=tue,xue=uue,bue=fue,wue=mue,Eue=_ue;function dv(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}dv.prototype.clear=vue;dv.prototype.delete=xue;dv.prototype.get=bue;dv.prototype.has=wue;dv.prototype.set=Eue;var JS=dv,Sue=JS;function Tue(){this.__data__=new Sue,this.size=0}var Cue=Tue;function Iue(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var Pue=Iue;function Lue(e){return this.__data__.get(e)}var Aue=Lue;function Oue(e){return this.__data__.has(e)}var kue=Oue,Rue=typeof wr=="object"&&wr&&wr.Object===Object&&wr,i8=Rue,Mue=i8,Nue=typeof self=="object"&&self&&self.Object===Object&&self,Due=Mue||Nue||Function("return this")(),Cd=Due,zue=Cd,Fue=zue.Symbol,yO=Fue,J3=yO,o8=Object.prototype,Bue=o8.hasOwnProperty,jue=o8.toString,m0=J3?J3.toStringTag:void 0;function $ue(e){var t=Bue.call(e,m0),n=e[m0];try{e[m0]=void 0;var r=!0}catch{}var i=jue.call(e);return r&&(t?e[m0]=n:delete e[m0]),i}var Uue=$ue,que=Object.prototype,Vue=que.toString;function Gue(e){return Vue.call(e)}var Hue=Gue,Q3=yO,Zue=Uue,Wue=Hue,Kue="[object Null]",Xue="[object Undefined]",e5=Q3?Q3.toStringTag:void 0;function Yue(e){return e==null?e===void 0?Xue:Kue:e5&&e5 in Object(e)?Zue(e):Wue(e)}var QS=Yue;function Jue(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var s8=Jue,Que=QS,ece=s8,tce="[object AsyncFunction]",nce="[object Function]",rce="[object GeneratorFunction]",ice="[object Proxy]";function oce(e){if(!ece(e))return!1;var t=Que(e);return t==nce||t==rce||t==tce||t==ice}var a8=oce,sce=Cd,ace=sce["__core-js_shared__"],lce=ace,nC=lce,t5=function(){var e=/[^.]+$/.exec(nC&&nC.keys&&nC.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function uce(e){return!!t5&&t5 in e}var cce=uce,hce=Function.prototype,fce=hce.toString;function dce(e){if(e!=null){try{return fce.call(e)}catch{}try{return e+""}catch{}}return""}var l8=dce,pce=a8,mce=cce,gce=s8,yce=l8,_ce=/[\\^$.*+?()[\]{}|]/g,vce=/^\[object .+?Constructor\]$/,xce=Function.prototype,bce=Object.prototype,wce=xce.toString,Ece=bce.hasOwnProperty,Sce=RegExp("^"+wce.call(Ece).replace(_ce,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Tce(e){if(!gce(e)||mce(e))return!1;var t=pce(e)?Sce:vce;return t.test(yce(e))}var Cce=Tce;function Ice(e,t){return e==null?void 0:e[t]}var Pce=Ice,Lce=Cce,Ace=Pce;function Oce(e,t){var n=Ace(e,t);return Lce(n)?n:void 0}var pv=Oce,kce=pv,Rce=Cd,Mce=kce(Rce,"Map"),_O=Mce,Nce=pv,Dce=Nce(Object,"create"),eT=Dce,n5=eT;function zce(){this.__data__=n5?n5(null):{},this.size=0}var Fce=zce;function Bce(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var jce=Bce,$ce=eT,Uce="__lodash_hash_undefined__",qce=Object.prototype,Vce=qce.hasOwnProperty;function Gce(e){var t=this.__data__;if($ce){var n=t[e];return n===Uce?void 0:n}return Vce.call(t,e)?t[e]:void 0}var Hce=Gce,Zce=eT,Wce=Object.prototype,Kce=Wce.hasOwnProperty;function Xce(e){var t=this.__data__;return Zce?t[e]!==void 0:Kce.call(t,e)}var Yce=Xce,Jce=eT,Qce="__lodash_hash_undefined__";function ehe(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Jce&&t===void 0?Qce:t,this}var the=ehe,nhe=Fce,rhe=jce,ihe=Hce,ohe=Yce,she=the;function mv(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}mv.prototype.clear=nhe;mv.prototype.delete=rhe;mv.prototype.get=ihe;mv.prototype.has=ohe;mv.prototype.set=she;var ahe=mv,r5=ahe,lhe=JS,uhe=_O;function che(){this.size=0,this.__data__={hash:new r5,map:new(uhe||lhe),string:new r5}}var hhe=che;function fhe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var dhe=fhe,phe=dhe;function mhe(e,t){var n=e.__data__;return phe(t)?n[typeof t=="string"?"string":"hash"]:n.map}var tT=mhe,ghe=tT;function yhe(e){var t=ghe(this,e).delete(e);return this.size-=t?1:0,t}var _he=yhe,vhe=tT;function xhe(e){return vhe(this,e).get(e)}var bhe=xhe,whe=tT;function Ehe(e){return whe(this,e).has(e)}var She=Ehe,The=tT;function Che(e,t){var n=The(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var Ihe=Che,Phe=hhe,Lhe=_he,Ahe=bhe,Ohe=She,khe=Ihe;function gv(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}gv.prototype.clear=Phe;gv.prototype.delete=Lhe;gv.prototype.get=Ahe;gv.prototype.has=Ohe;gv.prototype.set=khe;var u8=gv,Rhe=JS,Mhe=_O,Nhe=u8,Dhe=200;function zhe(e,t){var n=this.__data__;if(n instanceof Rhe){var r=n.__data__;if(!Mhe||r.length<Dhe-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Nhe(r)}return n.set(e,t),this.size=n.size,this}var Fhe=zhe,Bhe=JS,jhe=Cue,$he=Pue,Uhe=Aue,qhe=kue,Vhe=Fhe;function yv(e){var t=this.__data__=new Bhe(e);this.size=t.size}yv.prototype.clear=jhe;yv.prototype.delete=$he;yv.prototype.get=Uhe;yv.prototype.has=qhe;yv.prototype.set=Vhe;var Ghe=yv,Hhe="__lodash_hash_undefined__";function Zhe(e){return this.__data__.set(e,Hhe),this}var Whe=Zhe;function Khe(e){return this.__data__.has(e)}var Xhe=Khe,Yhe=u8,Jhe=Whe,Qhe=Xhe;function xE(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Yhe;++t<n;)this.add(e[t])}xE.prototype.add=xE.prototype.push=Jhe;xE.prototype.has=Qhe;var efe=xE;function tfe(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var nfe=tfe;function rfe(e,t){return e.has(t)}var ife=rfe,ofe=efe,sfe=nfe,afe=ife,lfe=1,ufe=2;function cfe(e,t,n,r,i,o){var u=n&lfe,l=e.length,p=t.length;if(l!=p&&!(u&&p>l))return!1;var g=o.get(e),x=o.get(t);if(g&&x)return g==t&&x==e;var y=-1,_=!0,T=n&ufe?new ofe:void 0;for(o.set(e,t),o.set(t,e);++y<l;){var A=e[y],O=t[y];if(r)var N=u?r(O,A,y,t,e,o):r(A,O,y,e,t,o);if(N!==void 0){if(N)continue;_=!1;break}if(T){if(!sfe(t,function(k,R){if(!afe(T,R)&&(A===k||i(A,k,n,r,o)))return T.push(R)})){_=!1;break}}else if(!(A===O||i(A,O,n,r,o))){_=!1;break}}return o.delete(e),o.delete(t),_}var c8=cfe,hfe=Cd,ffe=hfe.Uint8Array,dfe=ffe;function pfe(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}var mfe=pfe;function gfe(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var yfe=gfe,i5=yO,o5=dfe,_fe=r8,vfe=c8,xfe=mfe,bfe=yfe,wfe=1,Efe=2,Sfe="[object Boolean]",Tfe="[object Date]",Cfe="[object Error]",Ife="[object Map]",Pfe="[object Number]",Lfe="[object RegExp]",Afe="[object Set]",Ofe="[object String]",kfe="[object Symbol]",Rfe="[object ArrayBuffer]",Mfe="[object DataView]",s5=i5?i5.prototype:void 0,rC=s5?s5.valueOf:void 0;function Nfe(e,t,n,r,i,o,u){switch(n){case Mfe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Rfe:return!(e.byteLength!=t.byteLength||!o(new o5(e),new o5(t)));case Sfe:case Tfe:case Pfe:return _fe(+e,+t);case Cfe:return e.name==t.name&&e.message==t.message;case Lfe:case Ofe:return e==t+"";case Ife:var l=xfe;case Afe:var p=r&wfe;if(l||(l=bfe),e.size!=t.size&&!p)return!1;var g=u.get(e);if(g)return g==t;r|=Efe,u.set(e,t);var x=vfe(l(e),l(t),r,i,o,u);return u.delete(e),x;case kfe:if(rC)return rC.call(e)==rC.call(t)}return!1}var Dfe=Nfe;function zfe(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var Ffe=zfe,Bfe=Array.isArray,vO=Bfe,jfe=Ffe,$fe=vO;function Ufe(e,t,n){var r=t(e);return $fe(e)?r:jfe(r,n(e))}var qfe=Ufe;function Vfe(e,t){for(var n=-1,r=e==null?0:e.length,i=0,o=[];++n<r;){var u=e[n];t(u,n,e)&&(o[i++]=u)}return o}var Gfe=Vfe;function Hfe(){return[]}var Zfe=Hfe,Wfe=Gfe,Kfe=Zfe,Xfe=Object.prototype,Yfe=Xfe.propertyIsEnumerable,a5=Object.getOwnPropertySymbols,Jfe=a5?function(e){return e==null?[]:(e=Object(e),Wfe(a5(e),function(t){return Yfe.call(e,t)}))}:Kfe,Qfe=Jfe;function ede(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var tde=ede;function nde(e){return e!=null&&typeof e=="object"}var nT=nde,rde=QS,ide=nT,ode="[object Arguments]";function sde(e){return ide(e)&&rde(e)==ode}var ade=sde,l5=ade,lde=nT,h8=Object.prototype,ude=h8.hasOwnProperty,cde=h8.propertyIsEnumerable,hde=l5(function(){return arguments}())?l5:function(e){return lde(e)&&ude.call(e,"callee")&&!cde.call(e,"callee")},fde=hde,bE={exports:{}};function dde(){return!1}var pde=dde;bE.exports;(function(e,t){var n=Cd,r=pde,i=t&&!t.nodeType&&t,o=i&&!0&&e&&!e.nodeType&&e,u=o&&o.exports===i,l=u?n.Buffer:void 0,p=l?l.isBuffer:void 0,g=p||r;e.exports=g})(bE,bE.exports);var f8=bE.exports,mde=9007199254740991,gde=/^(?:0|[1-9]\d*)$/;function yde(e,t){var n=typeof e;return t=t??mde,!!t&&(n=="number"||n!="symbol"&&gde.test(e))&&e>-1&&e%1==0&&e<t}var _de=yde,vde=9007199254740991;function xde(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=vde}var d8=xde,bde=QS,wde=d8,Ede=nT,Sde="[object Arguments]",Tde="[object Array]",Cde="[object Boolean]",Ide="[object Date]",Pde="[object Error]",Lde="[object Function]",Ade="[object Map]",Ode="[object Number]",kde="[object Object]",Rde="[object RegExp]",Mde="[object Set]",Nde="[object String]",Dde="[object WeakMap]",zde="[object ArrayBuffer]",Fde="[object DataView]",Bde="[object Float32Array]",jde="[object Float64Array]",$de="[object Int8Array]",Ude="[object Int16Array]",qde="[object Int32Array]",Vde="[object Uint8Array]",Gde="[object Uint8ClampedArray]",Hde="[object Uint16Array]",Zde="[object Uint32Array]",Ci={};Ci[Bde]=Ci[jde]=Ci[$de]=Ci[Ude]=Ci[qde]=Ci[Vde]=Ci[Gde]=Ci[Hde]=Ci[Zde]=!0;Ci[Sde]=Ci[Tde]=Ci[zde]=Ci[Cde]=Ci[Fde]=Ci[Ide]=Ci[Pde]=Ci[Lde]=Ci[Ade]=Ci[Ode]=Ci[kde]=Ci[Rde]=Ci[Mde]=Ci[Nde]=Ci[Dde]=!1;function Wde(e){return Ede(e)&&wde(e.length)&&!!Ci[bde(e)]}var Kde=Wde;function Xde(e){return function(t){return e(t)}}var Yde=Xde,wE={exports:{}};wE.exports;(function(e,t){var n=i8,r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===r,u=o&&n.process,l=function(){try{var p=i&&i.require&&i.require("util").types;return p||u&&u.binding&&u.binding("util")}catch{}}();e.exports=l})(wE,wE.exports);var Jde=wE.exports,Qde=Kde,epe=Yde,u5=Jde,c5=u5&&u5.isTypedArray,tpe=c5?epe(c5):Qde,p8=tpe,npe=tde,rpe=fde,ipe=vO,ope=f8,spe=_de,ape=p8,lpe=Object.prototype,upe=lpe.hasOwnProperty;function cpe(e,t){var n=ipe(e),r=!n&&rpe(e),i=!n&&!r&&ope(e),o=!n&&!r&&!i&&ape(e),u=n||r||i||o,l=u?npe(e.length,String):[],p=l.length;for(var g in e)(t||upe.call(e,g))&&!(u&&(g=="length"||i&&(g=="offset"||g=="parent")||o&&(g=="buffer"||g=="byteLength"||g=="byteOffset")||spe(g,p)))&&l.push(g);return l}var hpe=cpe,fpe=Object.prototype;function dpe(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||fpe;return e===n}var ppe=dpe;function mpe(e,t){return function(n){return e(t(n))}}var gpe=mpe,ype=gpe,_pe=ype(Object.keys,Object),vpe=_pe,xpe=ppe,bpe=vpe,wpe=Object.prototype,Epe=wpe.hasOwnProperty;function Spe(e){if(!xpe(e))return bpe(e);var t=[];for(var n in Object(e))Epe.call(e,n)&&n!="constructor"&&t.push(n);return t}var Tpe=Spe,Cpe=a8,Ipe=d8;function Ppe(e){return e!=null&&Ipe(e.length)&&!Cpe(e)}var Lpe=Ppe,Ape=hpe,Ope=Tpe,kpe=Lpe;function Rpe(e){return kpe(e)?Ape(e):Ope(e)}var Mpe=Rpe,Npe=qfe,Dpe=Qfe,zpe=Mpe;function Fpe(e){return Npe(e,zpe,Dpe)}var Bpe=Fpe,h5=Bpe,jpe=1,$pe=Object.prototype,Upe=$pe.hasOwnProperty;function qpe(e,t,n,r,i,o){var u=n&jpe,l=h5(e),p=l.length,g=h5(t),x=g.length;if(p!=x&&!u)return!1;for(var y=p;y--;){var _=l[y];if(!(u?_ in t:Upe.call(t,_)))return!1}var T=o.get(e),A=o.get(t);if(T&&A)return T==t&&A==e;var O=!0;o.set(e,t),o.set(t,e);for(var N=u;++y<p;){_=l[y];var k=e[_],R=t[_];if(r)var z=u?r(R,k,_,t,e,o):r(k,R,_,e,t,o);if(!(z===void 0?k===R||i(k,R,n,r,o):z)){O=!1;break}N||(N=_=="constructor")}if(O&&!N){var D=e.constructor,U=t.constructor;D!=U&&"constructor"in e&&"constructor"in t&&!(typeof D=="function"&&D instanceof D&&typeof U=="function"&&U instanceof U)&&(O=!1)}return o.delete(e),o.delete(t),O}var Vpe=qpe,Gpe=pv,Hpe=Cd,Zpe=Gpe(Hpe,"DataView"),Wpe=Zpe,Kpe=pv,Xpe=Cd,Ype=Kpe(Xpe,"Promise"),Jpe=Ype,Qpe=pv,eme=Cd,tme=Qpe(eme,"Set"),nme=tme,rme=pv,ime=Cd,ome=rme(ime,"WeakMap"),sme=ome,FP=Wpe,BP=_O,jP=Jpe,$P=nme,UP=sme,m8=QS,_v=l8,f5="[object Map]",ame="[object Object]",d5="[object Promise]",p5="[object Set]",m5="[object WeakMap]",g5="[object DataView]",lme=_v(FP),ume=_v(BP),cme=_v(jP),hme=_v($P),fme=_v(UP),qm=m8;(FP&&qm(new FP(new ArrayBuffer(1)))!=g5||BP&&qm(new BP)!=f5||jP&&qm(jP.resolve())!=d5||$P&&qm(new $P)!=p5||UP&&qm(new UP)!=m5)&&(qm=function(e){var t=m8(e),n=t==ame?e.constructor:void 0,r=n?_v(n):"";if(r)switch(r){case lme:return g5;case ume:return f5;case cme:return d5;case hme:return p5;case fme:return m5}return t});var dme=qm,iC=Ghe,pme=c8,mme=Dfe,gme=Vpe,y5=dme,_5=vO,v5=f8,yme=p8,_me=1,x5="[object Arguments]",b5="[object Array]",Ub="[object Object]",vme=Object.prototype,w5=vme.hasOwnProperty;function xme(e,t,n,r,i,o){var u=_5(e),l=_5(t),p=u?b5:y5(e),g=l?b5:y5(t);p=p==x5?Ub:p,g=g==x5?Ub:g;var x=p==Ub,y=g==Ub,_=p==g;if(_&&v5(e)){if(!v5(t))return!1;u=!0,x=!1}if(_&&!x)return o||(o=new iC),u||yme(e)?pme(e,t,n,r,i,o):mme(e,t,p,n,r,i,o);if(!(n&_me)){var T=x&&w5.call(e,"__wrapped__"),A=y&&w5.call(t,"__wrapped__");if(T||A){var O=T?e.value():e,N=A?t.value():t;return o||(o=new iC),i(O,N,n,r,o)}}return _?(o||(o=new iC),gme(e,t,n,r,i,o)):!1}var bme=xme,wme=bme,E5=nT;function g8(e,t,n,r,i){return e===t?!0:e==null||t==null||!E5(e)&&!E5(t)?e!==e&&t!==t:wme(e,t,n,r,g8,i)}var Eme=g8,Sme=Eme;function Tme(e,t){return Sme(e,t)}var Cme=Tme,y8={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(e,t){(function(r,i){e.exports=i()})(typeof self<"u"?self:wr,function(){return function(n){var r={};function i(o){if(r[o])return r[o].exports;var u=r[o]={i:o,l:!1,exports:{}};return n[o].call(u.exports,u,u.exports,i),u.l=!0,u.exports}return i.m=n,i.c=r,i.d=function(o,u,l){i.o(o,u)||Object.defineProperty(o,u,{configurable:!1,enumerable:!0,get:l})},i.n=function(o){var u=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(u,"a",u),u},i.o=function(o,u){return Object.prototype.hasOwnProperty.call(o,u)},i.p="",i(i.s=109)}([function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(17),u=i(18),l=i(19),p=i(45),g=i(46),x=i(47),y=i(48),_=i(49),T=i(12),A=i(32),O=i(33),N=i(31),k=i(1),R={Scope:k.Scope,create:k.create,find:k.find,query:k.query,register:k.register,Container:o.default,Format:u.default,Leaf:l.default,Embed:y.default,Scroll:p.default,Block:x.default,Inline:g.default,Text:_.default,Attributor:{Attribute:T.default,Class:A.default,Style:O.default,Store:N.default}};r.default=R},function(n,r,i){var o=this&&this.__extends||function(){var N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,R){k.__proto__=R}||function(k,R){for(var z in R)R.hasOwnProperty(z)&&(k[z]=R[z])};return function(k,R){N(k,R);function z(){this.constructor=k}k.prototype=R===null?Object.create(R):(z.prototype=R.prototype,new z)}}();Object.defineProperty(r,"__esModule",{value:!0});var u=function(N){o(k,N);function k(R){var z=this;return R="[Parchment] "+R,z=N.call(this,R)||this,z.message=R,z.name=z.constructor.name,z}return k}(Error);r.ParchmentError=u;var l={},p={},g={},x={};r.DATA_KEY="__blot";var y;(function(N){N[N.TYPE=3]="TYPE",N[N.LEVEL=12]="LEVEL",N[N.ATTRIBUTE=13]="ATTRIBUTE",N[N.BLOT=14]="BLOT",N[N.INLINE=7]="INLINE",N[N.BLOCK=11]="BLOCK",N[N.BLOCK_BLOT=10]="BLOCK_BLOT",N[N.INLINE_BLOT=6]="INLINE_BLOT",N[N.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",N[N.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",N[N.ANY=15]="ANY"})(y=r.Scope||(r.Scope={}));function _(N,k){var R=A(N);if(R==null)throw new u("Unable to create "+N+" blot");var z=R,D=N instanceof Node||N.nodeType===Node.TEXT_NODE?N:z.create(k);return new z(D,k)}r.create=_;function T(N,k){return k===void 0&&(k=!1),N==null?null:N[r.DATA_KEY]!=null?N[r.DATA_KEY].blot:k?T(N.parentNode,k):null}r.find=T;function A(N,k){k===void 0&&(k=y.ANY);var R;if(typeof N=="string")R=x[N]||l[N];else if(N instanceof Text||N.nodeType===Node.TEXT_NODE)R=x.text;else if(typeof N=="number")N&y.LEVEL&y.BLOCK?R=x.block:N&y.LEVEL&y.INLINE&&(R=x.inline);else if(N instanceof HTMLElement){var z=(N.getAttribute("class")||"").split(/\s+/);for(var D in z)if(R=p[z[D]],R)break;R=R||g[N.tagName]}return R==null?null:k&y.LEVEL&R.scope&&k&y.TYPE&R.scope?R:null}r.query=A;function O(){for(var N=[],k=0;k<arguments.length;k++)N[k]=arguments[k];if(N.length>1)return N.map(function(D){return O(D)});var R=N[0];if(typeof R.blotName!="string"&&typeof R.attrName!="string")throw new u("Invalid definition");if(R.blotName==="abstract")throw new u("Cannot register abstract class");if(x[R.blotName||R.attrName]=R,typeof R.keyName=="string")l[R.keyName]=R;else if(R.className!=null&&(p[R.className]=R),R.tagName!=null){Array.isArray(R.tagName)?R.tagName=R.tagName.map(function(D){return D.toUpperCase()}):R.tagName=R.tagName.toUpperCase();var z=Array.isArray(R.tagName)?R.tagName:[R.tagName];z.forEach(function(D){(g[D]==null||R.className==null)&&(g[D]=R)})}return R}r.register=O},function(n,r,i){var o=i(51),u=i(11),l=i(3),p=i(20),g="\0",x=function(y){Array.isArray(y)?this.ops=y:y!=null&&Array.isArray(y.ops)?this.ops=y.ops:this.ops=[]};x.prototype.insert=function(y,_){var T={};return y.length===0?this:(T.insert=y,_!=null&&typeof _=="object"&&Object.keys(_).length>0&&(T.attributes=_),this.push(T))},x.prototype.delete=function(y){return y<=0?this:this.push({delete:y})},x.prototype.retain=function(y,_){if(y<=0)return this;var T={retain:y};return _!=null&&typeof _=="object"&&Object.keys(_).length>0&&(T.attributes=_),this.push(T)},x.prototype.push=function(y){var _=this.ops.length,T=this.ops[_-1];if(y=l(!0,{},y),typeof T=="object"){if(typeof y.delete=="number"&&typeof T.delete=="number")return this.ops[_-1]={delete:T.delete+y.delete},this;if(typeof T.delete=="number"&&y.insert!=null&&(_-=1,T=this.ops[_-1],typeof T!="object"))return this.ops.unshift(y),this;if(u(y.attributes,T.attributes)){if(typeof y.insert=="string"&&typeof T.insert=="string")return this.ops[_-1]={insert:T.insert+y.insert},typeof y.attributes=="object"&&(this.ops[_-1].attributes=y.attributes),this;if(typeof y.retain=="number"&&typeof T.retain=="number")return this.ops[_-1]={retain:T.retain+y.retain},typeof y.attributes=="object"&&(this.ops[_-1].attributes=y.attributes),this}}return _===this.ops.length?this.ops.push(y):this.ops.splice(_,0,y),this},x.prototype.chop=function(){var y=this.ops[this.ops.length-1];return y&&y.retain&&!y.attributes&&this.ops.pop(),this},x.prototype.filter=function(y){return this.ops.filter(y)},x.prototype.forEach=function(y){this.ops.forEach(y)},x.prototype.map=function(y){return this.ops.map(y)},x.prototype.partition=function(y){var _=[],T=[];return this.forEach(function(A){var O=y(A)?_:T;O.push(A)}),[_,T]},x.prototype.reduce=function(y,_){return this.ops.reduce(y,_)},x.prototype.changeLength=function(){return this.reduce(function(y,_){return _.insert?y+p.length(_):_.delete?y-_.delete:y},0)},x.prototype.length=function(){return this.reduce(function(y,_){return y+p.length(_)},0)},x.prototype.slice=function(y,_){y=y||0,typeof _!="number"&&(_=1/0);for(var T=[],A=p.iterator(this.ops),O=0;O<_&&A.hasNext();){var N;O<y?N=A.next(y-O):(N=A.next(_-O),T.push(N)),O+=p.length(N)}return new x(T)},x.prototype.compose=function(y){var _=p.iterator(this.ops),T=p.iterator(y.ops),A=[],O=T.peek();if(O!=null&&typeof O.retain=="number"&&O.attributes==null){for(var N=O.retain;_.peekType()==="insert"&&_.peekLength()<=N;)N-=_.peekLength(),A.push(_.next());O.retain-N>0&&T.next(O.retain-N)}for(var k=new x(A);_.hasNext()||T.hasNext();)if(T.peekType()==="insert")k.push(T.next());else if(_.peekType()==="delete")k.push(_.next());else{var R=Math.min(_.peekLength(),T.peekLength()),z=_.next(R),D=T.next(R);if(typeof D.retain=="number"){var U={};typeof z.retain=="number"?U.retain=R:U.insert=z.insert;var q=p.attributes.compose(z.attributes,D.attributes,typeof z.retain=="number");if(q&&(U.attributes=q),k.push(U),!T.hasNext()&&u(k.ops[k.ops.length-1],U)){var G=new x(_.rest());return k.concat(G).chop()}}else typeof D.delete=="number"&&typeof z.retain=="number"&&k.push(D)}return k.chop()},x.prototype.concat=function(y){var _=new x(this.ops.slice());return y.ops.length>0&&(_.push(y.ops[0]),_.ops=_.ops.concat(y.ops.slice(1))),_},x.prototype.diff=function(y,_){if(this.ops===y.ops)return new x;var T=[this,y].map(function(R){return R.map(function(z){if(z.insert!=null)return typeof z.insert=="string"?z.insert:g;var D=R===y?"on":"with";throw new Error("diff() called "+D+" non-document")}).join("")}),A=new x,O=o(T[0],T[1],_),N=p.iterator(this.ops),k=p.iterator(y.ops);return O.forEach(function(R){for(var z=R[1].length;z>0;){var D=0;switch(R[0]){case o.INSERT:D=Math.min(k.peekLength(),z),A.push(k.next(D));break;case o.DELETE:D=Math.min(z,N.peekLength()),N.next(D),A.delete(D);break;case o.EQUAL:D=Math.min(N.peekLength(),k.peekLength(),z);var U=N.next(D),q=k.next(D);u(U.insert,q.insert)?A.retain(D,p.attributes.diff(U.attributes,q.attributes)):A.push(q).delete(D);break}z-=D}}),A.chop()},x.prototype.eachLine=function(y,_){_=_||`
`;for(var T=p.iterator(this.ops),A=new x,O=0;T.hasNext();){if(T.peekType()!=="insert")return;var N=T.peek(),k=p.length(N)-T.peekLength(),R=typeof N.insert=="string"?N.insert.indexOf(_,k)-k:-1;if(R<0)A.push(T.next());else if(R>0)A.push(T.next(R));else{if(y(A,T.next(1).attributes||{},O)===!1)return;O+=1,A=new x}}A.length()>0&&y(A,{},O)},x.prototype.transform=function(y,_){if(_=!!_,typeof y=="number")return this.transformPosition(y,_);for(var T=p.iterator(this.ops),A=p.iterator(y.ops),O=new x;T.hasNext()||A.hasNext();)if(T.peekType()==="insert"&&(_||A.peekType()!=="insert"))O.retain(p.length(T.next()));else if(A.peekType()==="insert")O.push(A.next());else{var N=Math.min(T.peekLength(),A.peekLength()),k=T.next(N),R=A.next(N);if(k.delete)continue;R.delete?O.push(R):O.retain(N,p.attributes.transform(k.attributes,R.attributes,_))}return O.chop()},x.prototype.transformPosition=function(y,_){_=!!_;for(var T=p.iterator(this.ops),A=0;T.hasNext()&&A<=y;){var O=T.peekLength(),N=T.peekType();if(T.next(),N==="delete"){y-=Math.min(O,y-A);continue}else N==="insert"&&(A<y||!_)&&(y+=O);A+=O}return y},n.exports=x},function(n,r){var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,u=Object.defineProperty,l=Object.getOwnPropertyDescriptor,p=function(T){return typeof Array.isArray=="function"?Array.isArray(T):o.call(T)==="[object Array]"},g=function(T){if(!T||o.call(T)!=="[object Object]")return!1;var A=i.call(T,"constructor"),O=T.constructor&&T.constructor.prototype&&i.call(T.constructor.prototype,"isPrototypeOf");if(T.constructor&&!A&&!O)return!1;var N;for(N in T);return typeof N>"u"||i.call(T,N)},x=function(T,A){u&&A.name==="__proto__"?u(T,A.name,{enumerable:!0,configurable:!0,value:A.newValue,writable:!0}):T[A.name]=A.newValue},y=function(T,A){if(A==="__proto__")if(i.call(T,A)){if(l)return l(T,A).value}else return;return T[A]};n.exports=function _(){var T,A,O,N,k,R,z=arguments[0],D=1,U=arguments.length,q=!1;for(typeof z=="boolean"&&(q=z,z=arguments[1]||{},D=2),(z==null||typeof z!="object"&&typeof z!="function")&&(z={});D<U;++D)if(T=arguments[D],T!=null)for(A in T)O=y(z,A),N=y(T,A),z!==N&&(q&&N&&(g(N)||(k=p(N)))?(k?(k=!1,R=O&&p(O)?O:[]):R=O&&g(O)?O:{},x(z,{name:A,newValue:_(q,R,N)})):typeof N<"u"&&x(z,{name:A,newValue:N}));return z}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BlockEmbed=r.bubbleFormats=void 0;var o=function(){function X(ee,ue){for(var oe=0;oe<ue.length;oe++){var we=ue[oe];we.enumerable=we.enumerable||!1,we.configurable=!0,"value"in we&&(we.writable=!0),Object.defineProperty(ee,we.key,we)}}return function(ee,ue,oe){return ue&&X(ee.prototype,ue),oe&&X(ee,oe),ee}}(),u=function X(ee,ue,oe){ee===null&&(ee=Function.prototype);var we=Object.getOwnPropertyDescriptor(ee,ue);if(we===void 0){var Ne=Object.getPrototypeOf(ee);return Ne===null?void 0:X(Ne,ue,oe)}else{if("value"in we)return we.value;var Be=we.get;return Be===void 0?void 0:Be.call(oe)}},l=i(3),p=z(l),g=i(2),x=z(g),y=i(0),_=z(y),T=i(16),A=z(T),O=i(6),N=z(O),k=i(7),R=z(k);function z(X){return X&&X.__esModule?X:{default:X}}function D(X,ee){if(!(X instanceof ee))throw new TypeError("Cannot call a class as a function")}function U(X,ee){if(!X)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ee&&(typeof ee=="object"||typeof ee=="function")?ee:X}function q(X,ee){if(typeof ee!="function"&&ee!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ee);X.prototype=Object.create(ee&&ee.prototype,{constructor:{value:X,enumerable:!1,writable:!0,configurable:!0}}),ee&&(Object.setPrototypeOf?Object.setPrototypeOf(X,ee):X.__proto__=ee)}var G=1,H=function(X){q(ee,X);function ee(){return D(this,ee),U(this,(ee.__proto__||Object.getPrototypeOf(ee)).apply(this,arguments))}return o(ee,[{key:"attach",value:function(){u(ee.prototype.__proto__||Object.getPrototypeOf(ee.prototype),"attach",this).call(this),this.attributes=new _.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new x.default().insert(this.value(),(0,p.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(oe,we){var Ne=_.default.query(oe,_.default.Scope.BLOCK_ATTRIBUTE);Ne!=null&&this.attributes.attribute(Ne,we)}},{key:"formatAt",value:function(oe,we,Ne,Be){this.format(Ne,Be)}},{key:"insertAt",value:function(oe,we,Ne){if(typeof we=="string"&&we.endsWith(`
`)){var Be=_.default.create(J.blotName);this.parent.insertBefore(Be,oe===0?this:this.next),Be.insertAt(0,we.slice(0,-1))}else u(ee.prototype.__proto__||Object.getPrototypeOf(ee.prototype),"insertAt",this).call(this,oe,we,Ne)}}]),ee}(_.default.Embed);H.scope=_.default.Scope.BLOCK_BLOT;var J=function(X){q(ee,X);function ee(ue){D(this,ee);var oe=U(this,(ee.__proto__||Object.getPrototypeOf(ee)).call(this,ue));return oe.cache={},oe}return o(ee,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(_.default.Leaf).reduce(function(oe,we){return we.length()===0?oe:oe.insert(we.value(),Y(we))},new x.default).insert(`
`,Y(this))),this.cache.delta}},{key:"deleteAt",value:function(oe,we){u(ee.prototype.__proto__||Object.getPrototypeOf(ee.prototype),"deleteAt",this).call(this,oe,we),this.cache={}}},{key:"formatAt",value:function(oe,we,Ne,Be){we<=0||(_.default.query(Ne,_.default.Scope.BLOCK)?oe+we===this.length()&&this.format(Ne,Be):u(ee.prototype.__proto__||Object.getPrototypeOf(ee.prototype),"formatAt",this).call(this,oe,Math.min(we,this.length()-oe-1),Ne,Be),this.cache={})}},{key:"insertAt",value:function(oe,we,Ne){if(Ne!=null)return u(ee.prototype.__proto__||Object.getPrototypeOf(ee.prototype),"insertAt",this).call(this,oe,we,Ne);if(we.length!==0){var Be=we.split(`
`),De=Be.shift();De.length>0&&(oe<this.length()-1||this.children.tail==null?u(ee.prototype.__proto__||Object.getPrototypeOf(ee.prototype),"insertAt",this).call(this,Math.min(oe,this.length()-1),De):this.children.tail.insertAt(this.children.tail.length(),De),this.cache={});var Ae=this;Be.reduce(function(ve,ce){return Ae=Ae.split(ve,!0),Ae.insertAt(0,ce),ce.length},oe+De.length)}}},{key:"insertBefore",value:function(oe,we){var Ne=this.children.head;u(ee.prototype.__proto__||Object.getPrototypeOf(ee.prototype),"insertBefore",this).call(this,oe,we),Ne instanceof A.default&&Ne.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=u(ee.prototype.__proto__||Object.getPrototypeOf(ee.prototype),"length",this).call(this)+G),this.cache.length}},{key:"moveChildren",value:function(oe,we){u(ee.prototype.__proto__||Object.getPrototypeOf(ee.prototype),"moveChildren",this).call(this,oe,we),this.cache={}}},{key:"optimize",value:function(oe){u(ee.prototype.__proto__||Object.getPrototypeOf(ee.prototype),"optimize",this).call(this,oe),this.cache={}}},{key:"path",value:function(oe){return u(ee.prototype.__proto__||Object.getPrototypeOf(ee.prototype),"path",this).call(this,oe,!0)}},{key:"removeChild",value:function(oe){u(ee.prototype.__proto__||Object.getPrototypeOf(ee.prototype),"removeChild",this).call(this,oe),this.cache={}}},{key:"split",value:function(oe){var we=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(we&&(oe===0||oe>=this.length()-G)){var Ne=this.clone();return oe===0?(this.parent.insertBefore(Ne,this),this):(this.parent.insertBefore(Ne,this.next),Ne)}else{var Be=u(ee.prototype.__proto__||Object.getPrototypeOf(ee.prototype),"split",this).call(this,oe,we);return this.cache={},Be}}}]),ee}(_.default.Block);J.blotName="block",J.tagName="P",J.defaultChild="break",J.allowedChildren=[N.default,_.default.Embed,R.default];function Y(X){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return X==null||(typeof X.formats=="function"&&(ee=(0,p.default)(ee,X.formats())),X.parent==null||X.parent.blotName=="scroll"||X.parent.statics.scope!==X.statics.scope)?ee:Y(X.parent,ee)}r.bubbleFormats=Y,r.BlockEmbed=H,r.default=J},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.overload=r.expandConfig=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ae){return typeof Ae}:function(Ae){return Ae&&typeof Symbol=="function"&&Ae.constructor===Symbol&&Ae!==Symbol.prototype?"symbol":typeof Ae},u=function(){function Ae(ve,ce){var xe=[],Ee=!0,Ge=!1,$e=void 0;try{for(var be=ve[Symbol.iterator](),He;!(Ee=(He=be.next()).done)&&(xe.push(He.value),!(ce&&xe.length===ce));Ee=!0);}catch(it){Ge=!0,$e=it}finally{try{!Ee&&be.return&&be.return()}finally{if(Ge)throw $e}}return xe}return function(ve,ce){if(Array.isArray(ve))return ve;if(Symbol.iterator in Object(ve))return Ae(ve,ce);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function Ae(ve,ce){for(var xe=0;xe<ce.length;xe++){var Ee=ce[xe];Ee.enumerable=Ee.enumerable||!1,Ee.configurable=!0,"value"in Ee&&(Ee.writable=!0),Object.defineProperty(ve,Ee.key,Ee)}}return function(ve,ce,xe){return ce&&Ae(ve.prototype,ce),xe&&Ae(ve,xe),ve}}();i(50);var p=i(2),g=Y(p),x=i(14),y=Y(x),_=i(8),T=Y(_),A=i(9),O=Y(A),N=i(0),k=Y(N),R=i(15),z=Y(R),D=i(3),U=Y(D),q=i(10),G=Y(q),H=i(34),J=Y(H);function Y(Ae){return Ae&&Ae.__esModule?Ae:{default:Ae}}function X(Ae,ve,ce){return ve in Ae?Object.defineProperty(Ae,ve,{value:ce,enumerable:!0,configurable:!0,writable:!0}):Ae[ve]=ce,Ae}function ee(Ae,ve){if(!(Ae instanceof ve))throw new TypeError("Cannot call a class as a function")}var ue=(0,G.default)("quill"),oe=function(){l(Ae,null,[{key:"debug",value:function(ce){ce===!0&&(ce="log"),G.default.level(ce)}},{key:"find",value:function(ce){return ce.__quill||k.default.find(ce)}},{key:"import",value:function(ce){return this.imports[ce]==null&&ue.error("Cannot import "+ce+". Are you sure it was registered?"),this.imports[ce]}},{key:"register",value:function(ce,xe){var Ee=this,Ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof ce!="string"){var $e=ce.attrName||ce.blotName;typeof $e=="string"?this.register("formats/"+$e,ce,xe):Object.keys(ce).forEach(function(be){Ee.register(be,ce[be],xe)})}else this.imports[ce]!=null&&!Ge&&ue.warn("Overwriting "+ce+" with",xe),this.imports[ce]=xe,(ce.startsWith("blots/")||ce.startsWith("formats/"))&&xe.blotName!=="abstract"?k.default.register(xe):ce.startsWith("modules")&&typeof xe.register=="function"&&xe.register()}}]);function Ae(ve){var ce=this,xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(ee(this,Ae),this.options=we(ve,xe),this.container=this.options.container,this.container==null)return ue.error("Invalid Quill container",ve);this.options.debug&&Ae.debug(this.options.debug);var Ee=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new T.default,this.scroll=k.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new y.default(this.scroll),this.selection=new z.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(T.default.events.EDITOR_CHANGE,function($e){$e===T.default.events.TEXT_CHANGE&&ce.root.classList.toggle("ql-blank",ce.editor.isBlank())}),this.emitter.on(T.default.events.SCROLL_UPDATE,function($e,be){var He=ce.selection.lastRange,it=He&&He.length===0?He.index:void 0;Ne.call(ce,function(){return ce.editor.update(null,be,it)},$e)});var Ge=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+Ee+"<p><br></p></div>");this.setContents(Ge),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return l(Ae,[{key:"addContainer",value:function(ce){var xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof ce=="string"){var Ee=ce;ce=document.createElement("div"),ce.classList.add(Ee)}return this.container.insertBefore(ce,xe),ce}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(ce,xe,Ee){var Ge=this,$e=Be(ce,xe,Ee),be=u($e,4);return ce=be[0],xe=be[1],Ee=be[3],Ne.call(this,function(){return Ge.editor.deleteText(ce,xe)},Ee,ce,-1*xe)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(ce),this.container.classList.toggle("ql-disabled",!ce)}},{key:"focus",value:function(){var ce=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=ce,this.scrollIntoView()}},{key:"format",value:function(ce,xe){var Ee=this,Ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:T.default.sources.API;return Ne.call(this,function(){var $e=Ee.getSelection(!0),be=new g.default;if($e==null)return be;if(k.default.query(ce,k.default.Scope.BLOCK))be=Ee.editor.formatLine($e.index,$e.length,X({},ce,xe));else{if($e.length===0)return Ee.selection.format(ce,xe),be;be=Ee.editor.formatText($e.index,$e.length,X({},ce,xe))}return Ee.setSelection($e,T.default.sources.SILENT),be},Ge)}},{key:"formatLine",value:function(ce,xe,Ee,Ge,$e){var be=this,He=void 0,it=Be(ce,xe,Ee,Ge,$e),ct=u(it,4);return ce=ct[0],xe=ct[1],He=ct[2],$e=ct[3],Ne.call(this,function(){return be.editor.formatLine(ce,xe,He)},$e,ce,0)}},{key:"formatText",value:function(ce,xe,Ee,Ge,$e){var be=this,He=void 0,it=Be(ce,xe,Ee,Ge,$e),ct=u(it,4);return ce=ct[0],xe=ct[1],He=ct[2],$e=ct[3],Ne.call(this,function(){return be.editor.formatText(ce,xe,He)},$e,ce,0)}},{key:"getBounds",value:function(ce){var xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Ee=void 0;typeof ce=="number"?Ee=this.selection.getBounds(ce,xe):Ee=this.selection.getBounds(ce.index,ce.length);var Ge=this.container.getBoundingClientRect();return{bottom:Ee.bottom-Ge.top,height:Ee.height,left:Ee.left-Ge.left,right:Ee.right-Ge.left,top:Ee.top-Ge.top,width:Ee.width}}},{key:"getContents",value:function(){var ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-ce,Ee=Be(ce,xe),Ge=u(Ee,2);return ce=Ge[0],xe=Ge[1],this.editor.getContents(ce,xe)}},{key:"getFormat",value:function(){var ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof ce=="number"?this.editor.getFormat(ce,xe):this.editor.getFormat(ce.index,ce.length)}},{key:"getIndex",value:function(ce){return ce.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(ce){return this.scroll.leaf(ce)}},{key:"getLine",value:function(ce){return this.scroll.line(ce)}},{key:"getLines",value:function(){var ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof ce!="number"?this.scroll.lines(ce.index,ce.length):this.scroll.lines(ce,xe)}},{key:"getModule",value:function(ce){return this.theme.modules[ce]}},{key:"getSelection",value:function(){var ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return ce&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-ce,Ee=Be(ce,xe),Ge=u(Ee,2);return ce=Ge[0],xe=Ge[1],this.editor.getText(ce,xe)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(ce,xe,Ee){var Ge=this,$e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Ae.sources.API;return Ne.call(this,function(){return Ge.editor.insertEmbed(ce,xe,Ee)},$e,ce)}},{key:"insertText",value:function(ce,xe,Ee,Ge,$e){var be=this,He=void 0,it=Be(ce,0,Ee,Ge,$e),ct=u(it,4);return ce=ct[0],He=ct[2],$e=ct[3],Ne.call(this,function(){return be.editor.insertText(ce,xe,He)},$e,ce,xe.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(ce,xe,Ee){this.clipboard.dangerouslyPasteHTML(ce,xe,Ee)}},{key:"removeFormat",value:function(ce,xe,Ee){var Ge=this,$e=Be(ce,xe,Ee),be=u($e,4);return ce=be[0],xe=be[1],Ee=be[3],Ne.call(this,function(){return Ge.editor.removeFormat(ce,xe)},Ee,ce)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(ce){var xe=this,Ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:T.default.sources.API;return Ne.call(this,function(){ce=new g.default(ce);var Ge=xe.getLength(),$e=xe.editor.deleteText(0,Ge),be=xe.editor.applyDelta(ce),He=be.ops[be.ops.length-1];He!=null&&typeof He.insert=="string"&&He.insert[He.insert.length-1]===`
`&&(xe.editor.deleteText(xe.getLength()-1,1),be.delete(1));var it=$e.compose(be);return it},Ee)}},{key:"setSelection",value:function(ce,xe,Ee){if(ce==null)this.selection.setRange(null,xe||Ae.sources.API);else{var Ge=Be(ce,xe,Ee),$e=u(Ge,4);ce=$e[0],xe=$e[1],Ee=$e[3],this.selection.setRange(new R.Range(ce,xe),Ee),Ee!==T.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(ce){var xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:T.default.sources.API,Ee=new g.default().insert(ce);return this.setContents(Ee,xe)}},{key:"update",value:function(){var ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:T.default.sources.USER,xe=this.scroll.update(ce);return this.selection.update(ce),xe}},{key:"updateContents",value:function(ce){var xe=this,Ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:T.default.sources.API;return Ne.call(this,function(){return ce=new g.default(ce),xe.editor.applyDelta(ce,Ee)},Ee,!0)}}]),Ae}();oe.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},oe.events=T.default.events,oe.sources=T.default.sources,oe.version="1.3.7",oe.imports={delta:g.default,parchment:k.default,"core/module":O.default,"core/theme":J.default};function we(Ae,ve){if(ve=(0,U.default)(!0,{container:Ae,modules:{clipboard:!0,keyboard:!0,history:!0}},ve),!ve.theme||ve.theme===oe.DEFAULTS.theme)ve.theme=J.default;else if(ve.theme=oe.import("themes/"+ve.theme),ve.theme==null)throw new Error("Invalid theme "+ve.theme+". Did you register it?");var ce=(0,U.default)(!0,{},ve.theme.DEFAULTS);[ce,ve].forEach(function(Ge){Ge.modules=Ge.modules||{},Object.keys(Ge.modules).forEach(function($e){Ge.modules[$e]===!0&&(Ge.modules[$e]={})})});var xe=Object.keys(ce.modules).concat(Object.keys(ve.modules)),Ee=xe.reduce(function(Ge,$e){var be=oe.import("modules/"+$e);return be==null?ue.error("Cannot load "+$e+" module. Are you sure you registered it?"):Ge[$e]=be.DEFAULTS||{},Ge},{});return ve.modules!=null&&ve.modules.toolbar&&ve.modules.toolbar.constructor!==Object&&(ve.modules.toolbar={container:ve.modules.toolbar}),ve=(0,U.default)(!0,{},oe.DEFAULTS,{modules:Ee},ce,ve),["bounds","container","scrollingContainer"].forEach(function(Ge){typeof ve[Ge]=="string"&&(ve[Ge]=document.querySelector(ve[Ge]))}),ve.modules=Object.keys(ve.modules).reduce(function(Ge,$e){return ve.modules[$e]&&(Ge[$e]=ve.modules[$e]),Ge},{}),ve}function Ne(Ae,ve,ce,xe){if(this.options.strict&&!this.isEnabled()&&ve===T.default.sources.USER)return new g.default;var Ee=ce==null?null:this.getSelection(),Ge=this.editor.delta,$e=Ae();if(Ee!=null&&(ce===!0&&(ce=Ee.index),xe==null?Ee=De(Ee,$e,ve):xe!==0&&(Ee=De(Ee,ce,xe,ve)),this.setSelection(Ee,T.default.sources.SILENT)),$e.length()>0){var be,He=[T.default.events.TEXT_CHANGE,$e,Ge,ve];if((be=this.emitter).emit.apply(be,[T.default.events.EDITOR_CHANGE].concat(He)),ve!==T.default.sources.SILENT){var it;(it=this.emitter).emit.apply(it,He)}}return $e}function Be(Ae,ve,ce,xe,Ee){var Ge={};return typeof Ae.index=="number"&&typeof Ae.length=="number"?typeof ve!="number"?(Ee=xe,xe=ce,ce=ve,ve=Ae.length,Ae=Ae.index):(ve=Ae.length,Ae=Ae.index):typeof ve!="number"&&(Ee=xe,xe=ce,ce=ve,ve=0),(typeof ce>"u"?"undefined":o(ce))==="object"?(Ge=ce,Ee=xe):typeof ce=="string"&&(xe!=null?Ge[ce]=xe:Ee=ce),Ee=Ee||T.default.sources.API,[Ae,ve,Ge,Ee]}function De(Ae,ve,ce,xe){if(Ae==null)return null;var Ee=void 0,Ge=void 0;if(ve instanceof g.default){var $e=[Ae.index,Ae.index+Ae.length].map(function(ct){return ve.transformPosition(ct,xe!==T.default.sources.USER)}),be=u($e,2);Ee=be[0],Ge=be[1]}else{var He=[Ae.index,Ae.index+Ae.length].map(function(ct){return ct<ve||ct===ve&&xe===T.default.sources.USER?ct:ce>=0?ct+ce:Math.max(ve,ct+ce)}),it=u(He,2);Ee=it[0],Ge=it[1]}return new R.Range(Ee,Ge-Ee)}r.expandConfig=we,r.overload=Be,r.default=oe},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function N(k,R){for(var z=0;z<R.length;z++){var D=R[z];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(k,D.key,D)}}return function(k,R,z){return R&&N(k.prototype,R),z&&N(k,z),k}}(),u=function N(k,R,z){k===null&&(k=Function.prototype);var D=Object.getOwnPropertyDescriptor(k,R);if(D===void 0){var U=Object.getPrototypeOf(k);return U===null?void 0:N(U,R,z)}else{if("value"in D)return D.value;var q=D.get;return q===void 0?void 0:q.call(z)}},l=i(7),p=y(l),g=i(0),x=y(g);function y(N){return N&&N.__esModule?N:{default:N}}function _(N,k){if(!(N instanceof k))throw new TypeError("Cannot call a class as a function")}function T(N,k){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:N}function A(N,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);N.prototype=Object.create(k&&k.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(N,k):N.__proto__=k)}var O=function(N){A(k,N);function k(){return _(this,k),T(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return o(k,[{key:"formatAt",value:function(z,D,U,q){if(k.compare(this.statics.blotName,U)<0&&x.default.query(U,x.default.Scope.BLOT)){var G=this.isolate(z,D);q&&G.wrap(U,q)}else u(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"formatAt",this).call(this,z,D,U,q)}},{key:"optimize",value:function(z){if(u(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"optimize",this).call(this,z),this.parent instanceof k&&k.compare(this.statics.blotName,this.parent.statics.blotName)>0){var D=this.parent.isolate(this.offset(),this.length());this.moveChildren(D),D.wrap(this)}}}],[{key:"compare",value:function(z,D){var U=k.order.indexOf(z),q=k.order.indexOf(D);return U>=0||q>=0?U-q:z===D?0:z<D?-1:1}}]),k}(x.default.Inline);O.allowedChildren=[O,x.default.Embed,p.default],O.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],r.default=O},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),u=l(o);function l(_){return _&&_.__esModule?_:{default:_}}function p(_,T){if(!(_ instanceof T))throw new TypeError("Cannot call a class as a function")}function g(_,T){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:_}function x(_,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);_.prototype=Object.create(T&&T.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(_,T):_.__proto__=T)}var y=function(_){x(T,_);function T(){return p(this,T),g(this,(T.__proto__||Object.getPrototypeOf(T)).apply(this,arguments))}return T}(u.default.Text);r.default=y},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function R(z,D){for(var U=0;U<D.length;U++){var q=D[U];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(z,q.key,q)}}return function(z,D,U){return D&&R(z.prototype,D),U&&R(z,U),z}}(),u=function R(z,D,U){z===null&&(z=Function.prototype);var q=Object.getOwnPropertyDescriptor(z,D);if(q===void 0){var G=Object.getPrototypeOf(z);return G===null?void 0:R(G,D,U)}else{if("value"in q)return q.value;var H=q.get;return H===void 0?void 0:H.call(U)}},l=i(54),p=y(l),g=i(10),x=y(g);function y(R){return R&&R.__esModule?R:{default:R}}function _(R,z){if(!(R instanceof z))throw new TypeError("Cannot call a class as a function")}function T(R,z){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z&&(typeof z=="object"||typeof z=="function")?z:R}function A(R,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof z);R.prototype=Object.create(z&&z.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),z&&(Object.setPrototypeOf?Object.setPrototypeOf(R,z):R.__proto__=z)}var O=(0,x.default)("quill:events"),N=["selectionchange","mousedown","mouseup","click"];N.forEach(function(R){document.addEventListener(R,function(){for(var z=arguments.length,D=Array(z),U=0;U<z;U++)D[U]=arguments[U];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(q){if(q.__quill&&q.__quill.emitter){var G;(G=q.__quill.emitter).handleDOM.apply(G,D)}})})});var k=function(R){A(z,R);function z(){_(this,z);var D=T(this,(z.__proto__||Object.getPrototypeOf(z)).call(this));return D.listeners={},D.on("error",O.error),D}return o(z,[{key:"emit",value:function(){O.log.apply(O,arguments),u(z.prototype.__proto__||Object.getPrototypeOf(z.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(U){for(var q=arguments.length,G=Array(q>1?q-1:0),H=1;H<q;H++)G[H-1]=arguments[H];(this.listeners[U.type]||[]).forEach(function(J){var Y=J.node,X=J.handler;(U.target===Y||Y.contains(U.target))&&X.apply(void 0,[U].concat(G))})}},{key:"listenDOM",value:function(U,q,G){this.listeners[U]||(this.listeners[U]=[]),this.listeners[U].push({node:q,handler:G})}}]),z}(p.default);k.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},k.sources={API:"api",SILENT:"silent",USER:"user"},r.default=k},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});function o(l,p){if(!(l instanceof p))throw new TypeError("Cannot call a class as a function")}var u=function l(p){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o(this,l),this.quill=p,this.options=g};u.DEFAULTS={},r.default=u},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=["error","warn","log","info"],u="warn";function l(g){if(o.indexOf(g)<=o.indexOf(u)){for(var x,y=arguments.length,_=Array(y>1?y-1:0),T=1;T<y;T++)_[T-1]=arguments[T];(x=console)[g].apply(x,_)}}function p(g){return o.reduce(function(x,y){return x[y]=l.bind(console,y,g),x},{})}l.level=p.level=function(g){u=g},r.default=p},function(n,r,i){var o=Array.prototype.slice,u=i(52),l=i(53),p=n.exports=function(_,T,A){return A||(A={}),_===T?!0:_ instanceof Date&&T instanceof Date?_.getTime()===T.getTime():!_||!T||typeof _!="object"&&typeof T!="object"?A.strict?_===T:_==T:y(_,T,A)};function g(_){return _==null}function x(_){return!(!_||typeof _!="object"||typeof _.length!="number"||typeof _.copy!="function"||typeof _.slice!="function"||_.length>0&&typeof _[0]!="number")}function y(_,T,A){var O,N;if(g(_)||g(T)||_.prototype!==T.prototype)return!1;if(l(_))return l(T)?(_=o.call(_),T=o.call(T),p(_,T,A)):!1;if(x(_)){if(!x(T)||_.length!==T.length)return!1;for(O=0;O<_.length;O++)if(_[O]!==T[O])return!1;return!0}try{var k=u(_),R=u(T)}catch{return!1}if(k.length!=R.length)return!1;for(k.sort(),R.sort(),O=k.length-1;O>=0;O--)if(k[O]!=R[O])return!1;for(O=k.length-1;O>=0;O--)if(N=k[O],!p(_[N],T[N],A))return!1;return typeof _==typeof T}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(1),u=function(){function l(p,g,x){x===void 0&&(x={}),this.attrName=p,this.keyName=g;var y=o.Scope.TYPE&o.Scope.ATTRIBUTE;x.scope!=null?this.scope=x.scope&o.Scope.LEVEL|y:this.scope=o.Scope.ATTRIBUTE,x.whitelist!=null&&(this.whitelist=x.whitelist)}return l.keys=function(p){return[].map.call(p.attributes,function(g){return g.name})},l.prototype.add=function(p,g){return this.canAdd(p,g)?(p.setAttribute(this.keyName,g),!0):!1},l.prototype.canAdd=function(p,g){var x=o.query(p,o.Scope.BLOT&(this.scope|o.Scope.TYPE));return x==null?!1:this.whitelist==null?!0:typeof g=="string"?this.whitelist.indexOf(g.replace(/["']/g,""))>-1:this.whitelist.indexOf(g)>-1},l.prototype.remove=function(p){p.removeAttribute(this.keyName)},l.prototype.value=function(p){var g=p.getAttribute(this.keyName);return this.canAdd(p,g)&&g?g:""},l}();r.default=u},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Code=void 0;var o=function(){function H(J,Y){var X=[],ee=!0,ue=!1,oe=void 0;try{for(var we=J[Symbol.iterator](),Ne;!(ee=(Ne=we.next()).done)&&(X.push(Ne.value),!(Y&&X.length===Y));ee=!0);}catch(Be){ue=!0,oe=Be}finally{try{!ee&&we.return&&we.return()}finally{if(ue)throw oe}}return X}return function(J,Y){if(Array.isArray(J))return J;if(Symbol.iterator in Object(J))return H(J,Y);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function H(J,Y){for(var X=0;X<Y.length;X++){var ee=Y[X];ee.enumerable=ee.enumerable||!1,ee.configurable=!0,"value"in ee&&(ee.writable=!0),Object.defineProperty(J,ee.key,ee)}}return function(J,Y,X){return Y&&H(J.prototype,Y),X&&H(J,X),J}}(),l=function H(J,Y,X){J===null&&(J=Function.prototype);var ee=Object.getOwnPropertyDescriptor(J,Y);if(ee===void 0){var ue=Object.getPrototypeOf(J);return ue===null?void 0:H(ue,Y,X)}else{if("value"in ee)return ee.value;var oe=ee.get;return oe===void 0?void 0:oe.call(X)}},p=i(2),g=R(p),x=i(0),y=R(x),_=i(4),T=R(_),A=i(6),O=R(A),N=i(7),k=R(N);function R(H){return H&&H.__esModule?H:{default:H}}function z(H,J){if(!(H instanceof J))throw new TypeError("Cannot call a class as a function")}function D(H,J){if(!H)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return J&&(typeof J=="object"||typeof J=="function")?J:H}function U(H,J){if(typeof J!="function"&&J!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof J);H.prototype=Object.create(J&&J.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}),J&&(Object.setPrototypeOf?Object.setPrototypeOf(H,J):H.__proto__=J)}var q=function(H){U(J,H);function J(){return z(this,J),D(this,(J.__proto__||Object.getPrototypeOf(J)).apply(this,arguments))}return J}(O.default);q.blotName="code",q.tagName="CODE";var G=function(H){U(J,H);function J(){return z(this,J),D(this,(J.__proto__||Object.getPrototypeOf(J)).apply(this,arguments))}return u(J,[{key:"delta",value:function(){var X=this,ee=this.domNode.textContent;return ee.endsWith(`
`)&&(ee=ee.slice(0,-1)),ee.split(`
`).reduce(function(ue,oe){return ue.insert(oe).insert(`
`,X.formats())},new g.default)}},{key:"format",value:function(X,ee){if(!(X===this.statics.blotName&&ee)){var ue=this.descendant(k.default,this.length()-1),oe=o(ue,1),we=oe[0];we!=null&&we.deleteAt(we.length()-1,1),l(J.prototype.__proto__||Object.getPrototypeOf(J.prototype),"format",this).call(this,X,ee)}}},{key:"formatAt",value:function(X,ee,ue,oe){if(ee!==0&&!(y.default.query(ue,y.default.Scope.BLOCK)==null||ue===this.statics.blotName&&oe===this.statics.formats(this.domNode))){var we=this.newlineIndex(X);if(!(we<0||we>=X+ee)){var Ne=this.newlineIndex(X,!0)+1,Be=we-Ne+1,De=this.isolate(Ne,Be),Ae=De.next;De.format(ue,oe),Ae instanceof J&&Ae.formatAt(0,X-Ne+ee-Be,ue,oe)}}}},{key:"insertAt",value:function(X,ee,ue){if(ue==null){var oe=this.descendant(k.default,X),we=o(oe,2),Ne=we[0],Be=we[1];Ne.insertAt(Be,ee)}}},{key:"length",value:function(){var X=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?X:X+1}},{key:"newlineIndex",value:function(X){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(ee)return this.domNode.textContent.slice(0,X).lastIndexOf(`
`);var ue=this.domNode.textContent.slice(X).indexOf(`
`);return ue>-1?X+ue:-1}},{key:"optimize",value:function(X){this.domNode.textContent.endsWith(`
`)||this.appendChild(y.default.create("text",`
`)),l(J.prototype.__proto__||Object.getPrototypeOf(J.prototype),"optimize",this).call(this,X);var ee=this.next;ee!=null&&ee.prev===this&&ee.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===ee.statics.formats(ee.domNode)&&(ee.optimize(X),ee.moveChildren(this),ee.remove())}},{key:"replace",value:function(X){l(J.prototype.__proto__||Object.getPrototypeOf(J.prototype),"replace",this).call(this,X),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(ee){var ue=y.default.find(ee);ue==null?ee.parentNode.removeChild(ee):ue instanceof y.default.Embed?ue.remove():ue.unwrap()})}}],[{key:"create",value:function(X){var ee=l(J.__proto__||Object.getPrototypeOf(J),"create",this).call(this,X);return ee.setAttribute("spellcheck",!1),ee}},{key:"formats",value:function(){return!0}}]),J}(T.default);G.blotName="code-block",G.tagName="PRE",G.TAB="  ",r.Code=q,r.default=G},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ae){return typeof Ae}:function(Ae){return Ae&&typeof Symbol=="function"&&Ae.constructor===Symbol&&Ae!==Symbol.prototype?"symbol":typeof Ae},u=function(){function Ae(ve,ce){var xe=[],Ee=!0,Ge=!1,$e=void 0;try{for(var be=ve[Symbol.iterator](),He;!(Ee=(He=be.next()).done)&&(xe.push(He.value),!(ce&&xe.length===ce));Ee=!0);}catch(it){Ge=!0,$e=it}finally{try{!Ee&&be.return&&be.return()}finally{if(Ge)throw $e}}return xe}return function(ve,ce){if(Array.isArray(ve))return ve;if(Symbol.iterator in Object(ve))return Ae(ve,ce);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function Ae(ve,ce){for(var xe=0;xe<ce.length;xe++){var Ee=ce[xe];Ee.enumerable=Ee.enumerable||!1,Ee.configurable=!0,"value"in Ee&&(Ee.writable=!0),Object.defineProperty(ve,Ee.key,Ee)}}return function(ve,ce,xe){return ce&&Ae(ve.prototype,ce),xe&&Ae(ve,xe),ve}}(),p=i(2),g=ee(p),x=i(20),y=ee(x),_=i(0),T=ee(_),A=i(13),O=ee(A),N=i(24),k=ee(N),R=i(4),z=ee(R),D=i(16),U=ee(D),q=i(21),G=ee(q),H=i(11),J=ee(H),Y=i(3),X=ee(Y);function ee(Ae){return Ae&&Ae.__esModule?Ae:{default:Ae}}function ue(Ae,ve,ce){return ve in Ae?Object.defineProperty(Ae,ve,{value:ce,enumerable:!0,configurable:!0,writable:!0}):Ae[ve]=ce,Ae}function oe(Ae,ve){if(!(Ae instanceof ve))throw new TypeError("Cannot call a class as a function")}var we=/^[ -~]*$/,Ne=function(){function Ae(ve){oe(this,Ae),this.scroll=ve,this.delta=this.getDelta()}return l(Ae,[{key:"applyDelta",value:function(ce){var xe=this,Ee=!1;this.scroll.update();var Ge=this.scroll.length();return this.scroll.batchStart(),ce=De(ce),ce.reduce(function($e,be){var He=be.retain||be.delete||be.insert.length||1,it=be.attributes||{};if(be.insert!=null){if(typeof be.insert=="string"){var ct=be.insert;ct.endsWith(`
`)&&Ee&&(Ee=!1,ct=ct.slice(0,-1)),$e>=Ge&&!ct.endsWith(`
`)&&(Ee=!0),xe.scroll.insertAt($e,ct);var xt=xe.scroll.line($e),Dt=u(xt,2),Qt=Dt[0],Ft=Dt[1],Kt=(0,X.default)({},(0,R.bubbleFormats)(Qt));if(Qt instanceof z.default){var Gt=Qt.descendant(T.default.Leaf,Ft),Tr=u(Gt,1),rt=Tr[0];Kt=(0,X.default)(Kt,(0,R.bubbleFormats)(rt))}it=y.default.attributes.diff(Kt,it)||{}}else if(o(be.insert)==="object"){var lt=Object.keys(be.insert)[0];if(lt==null)return $e;xe.scroll.insertAt($e,lt,be.insert[lt])}Ge+=He}return Object.keys(it).forEach(function(gt){xe.scroll.formatAt($e,He,gt,it[gt])}),$e+He},0),ce.reduce(function($e,be){return typeof be.delete=="number"?(xe.scroll.deleteAt($e,be.delete),$e):$e+(be.retain||be.insert.length||1)},0),this.scroll.batchEnd(),this.update(ce)}},{key:"deleteText",value:function(ce,xe){return this.scroll.deleteAt(ce,xe),this.update(new g.default().retain(ce).delete(xe))}},{key:"formatLine",value:function(ce,xe){var Ee=this,Ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(Ge).forEach(function($e){if(!(Ee.scroll.whitelist!=null&&!Ee.scroll.whitelist[$e])){var be=Ee.scroll.lines(ce,Math.max(xe,1)),He=xe;be.forEach(function(it){var ct=it.length();if(!(it instanceof O.default))it.format($e,Ge[$e]);else{var xt=ce-it.offset(Ee.scroll),Dt=it.newlineIndex(xt+He)-xt+1;it.formatAt(xt,Dt,$e,Ge[$e])}He-=ct})}}),this.scroll.optimize(),this.update(new g.default().retain(ce).retain(xe,(0,G.default)(Ge)))}},{key:"formatText",value:function(ce,xe){var Ee=this,Ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(Ge).forEach(function($e){Ee.scroll.formatAt(ce,xe,$e,Ge[$e])}),this.update(new g.default().retain(ce).retain(xe,(0,G.default)(Ge)))}},{key:"getContents",value:function(ce,xe){return this.delta.slice(ce,ce+xe)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(ce,xe){return ce.concat(xe.delta())},new g.default)}},{key:"getFormat",value:function(ce){var xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Ee=[],Ge=[];xe===0?this.scroll.path(ce).forEach(function(be){var He=u(be,1),it=He[0];it instanceof z.default?Ee.push(it):it instanceof T.default.Leaf&&Ge.push(it)}):(Ee=this.scroll.lines(ce,xe),Ge=this.scroll.descendants(T.default.Leaf,ce,xe));var $e=[Ee,Ge].map(function(be){if(be.length===0)return{};for(var He=(0,R.bubbleFormats)(be.shift());Object.keys(He).length>0;){var it=be.shift();if(it==null)return He;He=Be((0,R.bubbleFormats)(it),He)}return He});return X.default.apply(X.default,$e)}},{key:"getText",value:function(ce,xe){return this.getContents(ce,xe).filter(function(Ee){return typeof Ee.insert=="string"}).map(function(Ee){return Ee.insert}).join("")}},{key:"insertEmbed",value:function(ce,xe,Ee){return this.scroll.insertAt(ce,xe,Ee),this.update(new g.default().retain(ce).insert(ue({},xe,Ee)))}},{key:"insertText",value:function(ce,xe){var Ee=this,Ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return xe=xe.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(ce,xe),Object.keys(Ge).forEach(function($e){Ee.scroll.formatAt(ce,xe.length,$e,Ge[$e])}),this.update(new g.default().retain(ce).insert(xe,(0,G.default)(Ge)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var ce=this.scroll.children.head;return ce.statics.blotName!==z.default.blotName||ce.children.length>1?!1:ce.children.head instanceof U.default}},{key:"removeFormat",value:function(ce,xe){var Ee=this.getText(ce,xe),Ge=this.scroll.line(ce+xe),$e=u(Ge,2),be=$e[0],He=$e[1],it=0,ct=new g.default;be!=null&&(be instanceof O.default?it=be.newlineIndex(He)-He+1:it=be.length()-He,ct=be.delta().slice(He,He+it-1).insert(`
`));var xt=this.getContents(ce,xe+it),Dt=xt.diff(new g.default().insert(Ee).concat(ct)),Qt=new g.default().retain(ce).concat(Dt);return this.applyDelta(Qt)}},{key:"update",value:function(ce){var xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],Ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,Ge=this.delta;if(xe.length===1&&xe[0].type==="characterData"&&xe[0].target.data.match(we)&&T.default.find(xe[0].target)){var $e=T.default.find(xe[0].target),be=(0,R.bubbleFormats)($e),He=$e.offset(this.scroll),it=xe[0].oldValue.replace(k.default.CONTENTS,""),ct=new g.default().insert(it),xt=new g.default().insert($e.value()),Dt=new g.default().retain(He).concat(ct.diff(xt,Ee));ce=Dt.reduce(function(Qt,Ft){return Ft.insert?Qt.insert(Ft.insert,be):Qt.push(Ft)},new g.default),this.delta=Ge.compose(ce)}else this.delta=this.getDelta(),(!ce||!(0,J.default)(Ge.compose(ce),this.delta))&&(ce=Ge.diff(this.delta,Ee));return ce}}]),Ae}();function Be(Ae,ve){return Object.keys(ve).reduce(function(ce,xe){return Ae[xe]==null||(ve[xe]===Ae[xe]?ce[xe]=ve[xe]:Array.isArray(ve[xe])?ve[xe].indexOf(Ae[xe])<0&&(ce[xe]=ve[xe].concat([Ae[xe]])):ce[xe]=[ve[xe],Ae[xe]]),ce},{})}function De(Ae){return Ae.reduce(function(ve,ce){if(ce.insert===1){var xe=(0,G.default)(ce.attributes);return delete xe.image,ve.insert({image:ce.attributes.image},xe)}if(ce.attributes!=null&&(ce.attributes.list===!0||ce.attributes.bullet===!0)&&(ce=(0,G.default)(ce),ce.attributes.list?ce.attributes.list="ordered":(ce.attributes.list="bullet",delete ce.attributes.bullet)),typeof ce.insert=="string"){var Ee=ce.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return ve.insert(Ee,ce.attributes)}return ve.push(ce)},new g.default)}r.default=Ne},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Range=void 0;var o=function(){function H(J,Y){var X=[],ee=!0,ue=!1,oe=void 0;try{for(var we=J[Symbol.iterator](),Ne;!(ee=(Ne=we.next()).done)&&(X.push(Ne.value),!(Y&&X.length===Y));ee=!0);}catch(Be){ue=!0,oe=Be}finally{try{!ee&&we.return&&we.return()}finally{if(ue)throw oe}}return X}return function(J,Y){if(Array.isArray(J))return J;if(Symbol.iterator in Object(J))return H(J,Y);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function H(J,Y){for(var X=0;X<Y.length;X++){var ee=Y[X];ee.enumerable=ee.enumerable||!1,ee.configurable=!0,"value"in ee&&(ee.writable=!0),Object.defineProperty(J,ee.key,ee)}}return function(J,Y,X){return Y&&H(J.prototype,Y),X&&H(J,X),J}}(),l=i(0),p=k(l),g=i(21),x=k(g),y=i(11),_=k(y),T=i(8),A=k(T),O=i(10),N=k(O);function k(H){return H&&H.__esModule?H:{default:H}}function R(H){if(Array.isArray(H)){for(var J=0,Y=Array(H.length);J<H.length;J++)Y[J]=H[J];return Y}else return Array.from(H)}function z(H,J){if(!(H instanceof J))throw new TypeError("Cannot call a class as a function")}var D=(0,N.default)("quill:selection"),U=function H(J){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;z(this,H),this.index=J,this.length=Y},q=function(){function H(J,Y){var X=this;z(this,H),this.emitter=Y,this.scroll=J,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=p.default.create("cursor",this),this.lastRange=this.savedRange=new U(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){X.mouseDown||setTimeout(X.update.bind(X,A.default.sources.USER),1)}),this.emitter.on(A.default.events.EDITOR_CHANGE,function(ee,ue){ee===A.default.events.TEXT_CHANGE&&ue.length()>0&&X.update(A.default.sources.SILENT)}),this.emitter.on(A.default.events.SCROLL_BEFORE_UPDATE,function(){if(X.hasFocus()){var ee=X.getNativeRange();ee!=null&&ee.start.node!==X.cursor.textNode&&X.emitter.once(A.default.events.SCROLL_UPDATE,function(){try{X.setNativeRange(ee.start.node,ee.start.offset,ee.end.node,ee.end.offset)}catch{}})}}),this.emitter.on(A.default.events.SCROLL_OPTIMIZE,function(ee,ue){if(ue.range){var oe=ue.range,we=oe.startNode,Ne=oe.startOffset,Be=oe.endNode,De=oe.endOffset;X.setNativeRange(we,Ne,Be,De)}}),this.update(A.default.sources.SILENT)}return u(H,[{key:"handleComposition",value:function(){var Y=this;this.root.addEventListener("compositionstart",function(){Y.composing=!0}),this.root.addEventListener("compositionend",function(){if(Y.composing=!1,Y.cursor.parent){var X=Y.cursor.restore();if(!X)return;setTimeout(function(){Y.setNativeRange(X.startNode,X.startOffset,X.endNode,X.endOffset)},1)}})}},{key:"handleDragging",value:function(){var Y=this;this.emitter.listenDOM("mousedown",document.body,function(){Y.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){Y.mouseDown=!1,Y.update(A.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(Y,X){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[Y])){this.scroll.update();var ee=this.getNativeRange();if(!(ee==null||!ee.native.collapsed||p.default.query(Y,p.default.Scope.BLOCK))){if(ee.start.node!==this.cursor.textNode){var ue=p.default.find(ee.start.node,!1);if(ue==null)return;if(ue instanceof p.default.Leaf){var oe=ue.split(ee.start.offset);ue.parent.insertBefore(this.cursor,oe)}else ue.insertBefore(this.cursor,ee.start.node);this.cursor.attach()}this.cursor.format(Y,X),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(Y){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,ee=this.scroll.length();Y=Math.min(Y,ee-1),X=Math.min(Y+X,ee-1)-Y;var ue=void 0,oe=this.scroll.leaf(Y),we=o(oe,2),Ne=we[0],Be=we[1];if(Ne==null)return null;var De=Ne.position(Be,!0),Ae=o(De,2);ue=Ae[0],Be=Ae[1];var ve=document.createRange();if(X>0){ve.setStart(ue,Be);var ce=this.scroll.leaf(Y+X),xe=o(ce,2);if(Ne=xe[0],Be=xe[1],Ne==null)return null;var Ee=Ne.position(Be,!0),Ge=o(Ee,2);return ue=Ge[0],Be=Ge[1],ve.setEnd(ue,Be),ve.getBoundingClientRect()}else{var $e="left",be=void 0;return ue instanceof Text?(Be<ue.data.length?(ve.setStart(ue,Be),ve.setEnd(ue,Be+1)):(ve.setStart(ue,Be-1),ve.setEnd(ue,Be),$e="right"),be=ve.getBoundingClientRect()):(be=Ne.domNode.getBoundingClientRect(),Be>0&&($e="right")),{bottom:be.top+be.height,height:be.height,left:be[$e],right:be[$e],top:be.top,width:0}}}},{key:"getNativeRange",value:function(){var Y=document.getSelection();if(Y==null||Y.rangeCount<=0)return null;var X=Y.getRangeAt(0);if(X==null)return null;var ee=this.normalizeNative(X);return D.info("getNativeRange",ee),ee}},{key:"getRange",value:function(){var Y=this.getNativeRange();if(Y==null)return[null,null];var X=this.normalizedToRange(Y);return[X,Y]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(Y){var X=this,ee=[[Y.start.node,Y.start.offset]];Y.native.collapsed||ee.push([Y.end.node,Y.end.offset]);var ue=ee.map(function(Ne){var Be=o(Ne,2),De=Be[0],Ae=Be[1],ve=p.default.find(De,!0),ce=ve.offset(X.scroll);return Ae===0?ce:ve instanceof p.default.Container?ce+ve.length():ce+ve.index(De,Ae)}),oe=Math.min(Math.max.apply(Math,R(ue)),this.scroll.length()-1),we=Math.min.apply(Math,[oe].concat(R(ue)));return new U(we,oe-we)}},{key:"normalizeNative",value:function(Y){if(!G(this.root,Y.startContainer)||!Y.collapsed&&!G(this.root,Y.endContainer))return null;var X={start:{node:Y.startContainer,offset:Y.startOffset},end:{node:Y.endContainer,offset:Y.endOffset},native:Y};return[X.start,X.end].forEach(function(ee){for(var ue=ee.node,oe=ee.offset;!(ue instanceof Text)&&ue.childNodes.length>0;)if(ue.childNodes.length>oe)ue=ue.childNodes[oe],oe=0;else if(ue.childNodes.length===oe)ue=ue.lastChild,oe=ue instanceof Text?ue.data.length:ue.childNodes.length+1;else break;ee.node=ue,ee.offset=oe}),X}},{key:"rangeToNative",value:function(Y){var X=this,ee=Y.collapsed?[Y.index]:[Y.index,Y.index+Y.length],ue=[],oe=this.scroll.length();return ee.forEach(function(we,Ne){we=Math.min(oe-1,we);var Be=void 0,De=X.scroll.leaf(we),Ae=o(De,2),ve=Ae[0],ce=Ae[1],xe=ve.position(ce,Ne!==0),Ee=o(xe,2);Be=Ee[0],ce=Ee[1],ue.push(Be,ce)}),ue.length<2&&(ue=ue.concat(ue)),ue}},{key:"scrollIntoView",value:function(Y){var X=this.lastRange;if(X!=null){var ee=this.getBounds(X.index,X.length);if(ee!=null){var ue=this.scroll.length()-1,oe=this.scroll.line(Math.min(X.index,ue)),we=o(oe,1),Ne=we[0],Be=Ne;if(X.length>0){var De=this.scroll.line(Math.min(X.index+X.length,ue)),Ae=o(De,1);Be=Ae[0]}if(!(Ne==null||Be==null)){var ve=Y.getBoundingClientRect();ee.top<ve.top?Y.scrollTop-=ve.top-ee.top:ee.bottom>ve.bottom&&(Y.scrollTop+=ee.bottom-ve.bottom)}}}}},{key:"setNativeRange",value:function(Y,X){var ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Y,ue=arguments.length>3&&arguments[3]!==void 0?arguments[3]:X,oe=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(D.info("setNativeRange",Y,X,ee,ue),!(Y!=null&&(this.root.parentNode==null||Y.parentNode==null||ee.parentNode==null))){var we=document.getSelection();if(we!=null)if(Y!=null){this.hasFocus()||this.root.focus();var Ne=(this.getNativeRange()||{}).native;if(Ne==null||oe||Y!==Ne.startContainer||X!==Ne.startOffset||ee!==Ne.endContainer||ue!==Ne.endOffset){Y.tagName=="BR"&&(X=[].indexOf.call(Y.parentNode.childNodes,Y),Y=Y.parentNode),ee.tagName=="BR"&&(ue=[].indexOf.call(ee.parentNode.childNodes,ee),ee=ee.parentNode);var Be=document.createRange();Be.setStart(Y,X),Be.setEnd(ee,ue),we.removeAllRanges(),we.addRange(Be)}}else we.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(Y){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:A.default.sources.API;if(typeof X=="string"&&(ee=X,X=!1),D.info("setRange",Y),Y!=null){var ue=this.rangeToNative(Y);this.setNativeRange.apply(this,R(ue).concat([X]))}else this.setNativeRange(null);this.update(ee)}},{key:"update",value:function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:A.default.sources.USER,X=this.lastRange,ee=this.getRange(),ue=o(ee,2),oe=ue[0],we=ue[1];if(this.lastRange=oe,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,_.default)(X,this.lastRange)){var Ne;!this.composing&&we!=null&&we.native.collapsed&&we.start.node!==this.cursor.textNode&&this.cursor.restore();var Be=[A.default.events.SELECTION_CHANGE,(0,x.default)(this.lastRange),(0,x.default)(X),Y];if((Ne=this.emitter).emit.apply(Ne,[A.default.events.EDITOR_CHANGE].concat(Be)),Y!==A.default.sources.SILENT){var De;(De=this.emitter).emit.apply(De,Be)}}}}]),H}();function G(H,J){try{J.parentNode}catch{return!1}return J instanceof Text&&(J=J.parentNode),H.contains(J)}r.Range=U,r.default=q},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function A(O,N){for(var k=0;k<N.length;k++){var R=N[k];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(O,R.key,R)}}return function(O,N,k){return N&&A(O.prototype,N),k&&A(O,k),O}}(),u=function A(O,N,k){O===null&&(O=Function.prototype);var R=Object.getOwnPropertyDescriptor(O,N);if(R===void 0){var z=Object.getPrototypeOf(O);return z===null?void 0:A(z,N,k)}else{if("value"in R)return R.value;var D=R.get;return D===void 0?void 0:D.call(k)}},l=i(0),p=g(l);function g(A){return A&&A.__esModule?A:{default:A}}function x(A,O){if(!(A instanceof O))throw new TypeError("Cannot call a class as a function")}function y(A,O){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:A}function _(A,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);A.prototype=Object.create(O&&O.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(A,O):A.__proto__=O)}var T=function(A){_(O,A);function O(){return x(this,O),y(this,(O.__proto__||Object.getPrototypeOf(O)).apply(this,arguments))}return o(O,[{key:"insertInto",value:function(k,R){k.children.length===0?u(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertInto",this).call(this,k,R):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),O}(p.default.Embed);T.blotName="break",T.tagName="BR",r.default=T},function(n,r,i){var o=this&&this.__extends||function(){var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,T){_.__proto__=T}||function(_,T){for(var A in T)T.hasOwnProperty(A)&&(_[A]=T[A])};return function(_,T){y(_,T);function A(){this.constructor=_}_.prototype=T===null?Object.create(T):(A.prototype=T.prototype,new A)}}();Object.defineProperty(r,"__esModule",{value:!0});var u=i(44),l=i(30),p=i(1),g=function(y){o(_,y);function _(T){var A=y.call(this,T)||this;return A.build(),A}return _.prototype.appendChild=function(T){this.insertBefore(T)},_.prototype.attach=function(){y.prototype.attach.call(this),this.children.forEach(function(T){T.attach()})},_.prototype.build=function(){var T=this;this.children=new u.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(A){try{var O=x(A);T.insertBefore(O,T.children.head||void 0)}catch(N){if(N instanceof p.ParchmentError)return;throw N}})},_.prototype.deleteAt=function(T,A){if(T===0&&A===this.length())return this.remove();this.children.forEachAt(T,A,function(O,N,k){O.deleteAt(N,k)})},_.prototype.descendant=function(T,A){var O=this.children.find(A),N=O[0],k=O[1];return T.blotName==null&&T(N)||T.blotName!=null&&N instanceof T?[N,k]:N instanceof _?N.descendant(T,k):[null,-1]},_.prototype.descendants=function(T,A,O){A===void 0&&(A=0),O===void 0&&(O=Number.MAX_VALUE);var N=[],k=O;return this.children.forEachAt(A,O,function(R,z,D){(T.blotName==null&&T(R)||T.blotName!=null&&R instanceof T)&&N.push(R),R instanceof _&&(N=N.concat(R.descendants(T,z,k))),k-=D}),N},_.prototype.detach=function(){this.children.forEach(function(T){T.detach()}),y.prototype.detach.call(this)},_.prototype.formatAt=function(T,A,O,N){this.children.forEachAt(T,A,function(k,R,z){k.formatAt(R,z,O,N)})},_.prototype.insertAt=function(T,A,O){var N=this.children.find(T),k=N[0],R=N[1];if(k)k.insertAt(R,A,O);else{var z=O==null?p.create("text",A):p.create(A,O);this.appendChild(z)}},_.prototype.insertBefore=function(T,A){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(O){return T instanceof O}))throw new p.ParchmentError("Cannot insert "+T.statics.blotName+" into "+this.statics.blotName);T.insertInto(this,A)},_.prototype.length=function(){return this.children.reduce(function(T,A){return T+A.length()},0)},_.prototype.moveChildren=function(T,A){this.children.forEach(function(O){T.insertBefore(O,A)})},_.prototype.optimize=function(T){if(y.prototype.optimize.call(this,T),this.children.length===0)if(this.statics.defaultChild!=null){var A=p.create(this.statics.defaultChild);this.appendChild(A),A.optimize(T)}else this.remove()},_.prototype.path=function(T,A){A===void 0&&(A=!1);var O=this.children.find(T,A),N=O[0],k=O[1],R=[[this,T]];return N instanceof _?R.concat(N.path(k,A)):(N!=null&&R.push([N,k]),R)},_.prototype.removeChild=function(T){this.children.remove(T)},_.prototype.replace=function(T){T instanceof _&&T.moveChildren(this),y.prototype.replace.call(this,T)},_.prototype.split=function(T,A){if(A===void 0&&(A=!1),!A){if(T===0)return this;if(T===this.length())return this.next}var O=this.clone();return this.parent.insertBefore(O,this.next),this.children.forEachAt(T,this.length(),function(N,k,R){N=N.split(k,A),O.appendChild(N)}),O},_.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},_.prototype.update=function(T,A){var O=this,N=[],k=[];T.forEach(function(R){R.target===O.domNode&&R.type==="childList"&&(N.push.apply(N,R.addedNodes),k.push.apply(k,R.removedNodes))}),k.forEach(function(R){if(!(R.parentNode!=null&&R.tagName!=="IFRAME"&&document.body.compareDocumentPosition(R)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var z=p.find(R);z!=null&&(z.domNode.parentNode==null||z.domNode.parentNode===O.domNode)&&z.detach()}}),N.filter(function(R){return R.parentNode==O.domNode}).sort(function(R,z){return R===z?0:R.compareDocumentPosition(z)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(R){var z=null;R.nextSibling!=null&&(z=p.find(R.nextSibling));var D=x(R);(D.next!=z||D.next==null)&&(D.parent!=null&&D.parent.removeChild(O),O.insertBefore(D,z||void 0))})},_}(l.default);function x(y){var _=p.find(y);if(_==null)try{_=p.create(y)}catch{_=p.create(p.Scope.INLINE),[].slice.call(y.childNodes).forEach(function(A){_.domNode.appendChild(A)}),y.parentNode&&y.parentNode.replaceChild(_.domNode,y),_.attach()}return _}r.default=g},function(n,r,i){var o=this&&this.__extends||function(){var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,T){_.__proto__=T}||function(_,T){for(var A in T)T.hasOwnProperty(A)&&(_[A]=T[A])};return function(_,T){y(_,T);function A(){this.constructor=_}_.prototype=T===null?Object.create(T):(A.prototype=T.prototype,new A)}}();Object.defineProperty(r,"__esModule",{value:!0});var u=i(12),l=i(31),p=i(17),g=i(1),x=function(y){o(_,y);function _(T){var A=y.call(this,T)||this;return A.attributes=new l.default(A.domNode),A}return _.formats=function(T){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return T.tagName.toLowerCase()},_.prototype.format=function(T,A){var O=g.query(T);O instanceof u.default?this.attributes.attribute(O,A):A&&O!=null&&(T!==this.statics.blotName||this.formats()[T]!==A)&&this.replaceWith(T,A)},_.prototype.formats=function(){var T=this.attributes.values(),A=this.statics.formats(this.domNode);return A!=null&&(T[this.statics.blotName]=A),T},_.prototype.replaceWith=function(T,A){var O=y.prototype.replaceWith.call(this,T,A);return this.attributes.copy(O),O},_.prototype.update=function(T,A){var O=this;y.prototype.update.call(this,T,A),T.some(function(N){return N.target===O.domNode&&N.type==="attributes"})&&this.attributes.build()},_.prototype.wrap=function(T,A){var O=y.prototype.wrap.call(this,T,A);return O instanceof _&&O.statics.scope===this.statics.scope&&this.attributes.move(O),O},_}(p.default);r.default=x},function(n,r,i){var o=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,y){x.__proto__=y}||function(x,y){for(var _ in y)y.hasOwnProperty(_)&&(x[_]=y[_])};return function(x,y){g(x,y);function _(){this.constructor=x}x.prototype=y===null?Object.create(y):(_.prototype=y.prototype,new _)}}();Object.defineProperty(r,"__esModule",{value:!0});var u=i(30),l=i(1),p=function(g){o(x,g);function x(){return g!==null&&g.apply(this,arguments)||this}return x.value=function(y){return!0},x.prototype.index=function(y,_){return this.domNode===y||this.domNode.compareDocumentPosition(y)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(_,1):-1},x.prototype.position=function(y,_){var T=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return y>0&&(T+=1),[this.parent.domNode,T]},x.prototype.value=function(){var y;return y={},y[this.statics.blotName]=this.statics.value(this.domNode)||!0,y},x.scope=l.Scope.INLINE_BLOT,x}(u.default);r.default=p},function(n,r,i){var o=i(11),u=i(3),l={attributes:{compose:function(g,x,y){typeof g!="object"&&(g={}),typeof x!="object"&&(x={});var _=u(!0,{},x);y||(_=Object.keys(_).reduce(function(A,O){return _[O]!=null&&(A[O]=_[O]),A},{}));for(var T in g)g[T]!==void 0&&x[T]===void 0&&(_[T]=g[T]);return Object.keys(_).length>0?_:void 0},diff:function(g,x){typeof g!="object"&&(g={}),typeof x!="object"&&(x={});var y=Object.keys(g).concat(Object.keys(x)).reduce(function(_,T){return o(g[T],x[T])||(_[T]=x[T]===void 0?null:x[T]),_},{});return Object.keys(y).length>0?y:void 0},transform:function(g,x,y){if(typeof g!="object")return x;if(typeof x=="object"){if(!y)return x;var _=Object.keys(x).reduce(function(T,A){return g[A]===void 0&&(T[A]=x[A]),T},{});return Object.keys(_).length>0?_:void 0}}},iterator:function(g){return new p(g)},length:function(g){return typeof g.delete=="number"?g.delete:typeof g.retain=="number"?g.retain:typeof g.insert=="string"?g.insert.length:1}};function p(g){this.ops=g,this.index=0,this.offset=0}p.prototype.hasNext=function(){return this.peekLength()<1/0},p.prototype.next=function(g){g||(g=1/0);var x=this.ops[this.index];if(x){var y=this.offset,_=l.length(x);if(g>=_-y?(g=_-y,this.index+=1,this.offset=0):this.offset+=g,typeof x.delete=="number")return{delete:g};var T={};return x.attributes&&(T.attributes=x.attributes),typeof x.retain=="number"?T.retain=g:typeof x.insert=="string"?T.insert=x.insert.substr(y,g):T.insert=x.insert,T}else return{retain:1/0}},p.prototype.peek=function(){return this.ops[this.index]},p.prototype.peekLength=function(){return this.ops[this.index]?l.length(this.ops[this.index])-this.offset:1/0},p.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},p.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var g=this.offset,x=this.index,y=this.next(),_=this.ops.slice(this.index);return this.offset=g,this.index=x,[y].concat(_)}else return[]},n.exports=l},function(n,r){var i=function(){function o(O,N){return N!=null&&O instanceof N}var u;try{u=Map}catch{u=function(){}}var l;try{l=Set}catch{l=function(){}}var p;try{p=Promise}catch{p=function(){}}function g(O,N,k,R,z){typeof N=="object"&&(k=N.depth,R=N.prototype,z=N.includeNonEnumerable,N=N.circular);var D=[],U=[],q=typeof Buffer<"u";typeof N>"u"&&(N=!0),typeof k>"u"&&(k=1/0);function G(H,J){if(H===null)return null;if(J===0)return H;var Y,X;if(typeof H!="object")return H;if(o(H,u))Y=new u;else if(o(H,l))Y=new l;else if(o(H,p))Y=new p(function(ve,ce){H.then(function(xe){ve(G(xe,J-1))},function(xe){ce(G(xe,J-1))})});else if(g.__isArray(H))Y=[];else if(g.__isRegExp(H))Y=new RegExp(H.source,A(H)),H.lastIndex&&(Y.lastIndex=H.lastIndex);else if(g.__isDate(H))Y=new Date(H.getTime());else{if(q&&Buffer.isBuffer(H))return Buffer.allocUnsafe?Y=Buffer.allocUnsafe(H.length):Y=new Buffer(H.length),H.copy(Y),Y;o(H,Error)?Y=Object.create(H):typeof R>"u"?(X=Object.getPrototypeOf(H),Y=Object.create(X)):(Y=Object.create(R),X=R)}if(N){var ee=D.indexOf(H);if(ee!=-1)return U[ee];D.push(H),U.push(Y)}o(H,u)&&H.forEach(function(ve,ce){var xe=G(ce,J-1),Ee=G(ve,J-1);Y.set(xe,Ee)}),o(H,l)&&H.forEach(function(ve){var ce=G(ve,J-1);Y.add(ce)});for(var ue in H){var oe;X&&(oe=Object.getOwnPropertyDescriptor(X,ue)),!(oe&&oe.set==null)&&(Y[ue]=G(H[ue],J-1))}if(Object.getOwnPropertySymbols)for(var we=Object.getOwnPropertySymbols(H),ue=0;ue<we.length;ue++){var Ne=we[ue],Be=Object.getOwnPropertyDescriptor(H,Ne);Be&&!Be.enumerable&&!z||(Y[Ne]=G(H[Ne],J-1),Be.enumerable||Object.defineProperty(Y,Ne,{enumerable:!1}))}if(z)for(var De=Object.getOwnPropertyNames(H),ue=0;ue<De.length;ue++){var Ae=De[ue],Be=Object.getOwnPropertyDescriptor(H,Ae);Be&&Be.enumerable||(Y[Ae]=G(H[Ae],J-1),Object.defineProperty(Y,Ae,{enumerable:!1}))}return Y}return G(O,k)}g.clonePrototype=function(N){if(N===null)return null;var k=function(){};return k.prototype=N,new k};function x(O){return Object.prototype.toString.call(O)}g.__objToStr=x;function y(O){return typeof O=="object"&&x(O)==="[object Date]"}g.__isDate=y;function _(O){return typeof O=="object"&&x(O)==="[object Array]"}g.__isArray=_;function T(O){return typeof O=="object"&&x(O)==="[object RegExp]"}g.__isRegExp=T;function A(O){var N="";return O.global&&(N+="g"),O.ignoreCase&&(N+="i"),O.multiline&&(N+="m"),N}return g.__getRegExpFlags=A,g}();typeof n=="object"&&n.exports&&(n.exports=i)},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function Y(X,ee){var ue=[],oe=!0,we=!1,Ne=void 0;try{for(var Be=X[Symbol.iterator](),De;!(oe=(De=Be.next()).done)&&(ue.push(De.value),!(ee&&ue.length===ee));oe=!0);}catch(Ae){we=!0,Ne=Ae}finally{try{!oe&&Be.return&&Be.return()}finally{if(we)throw Ne}}return ue}return function(X,ee){if(Array.isArray(X))return X;if(Symbol.iterator in Object(X))return Y(X,ee);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function Y(X,ee){for(var ue=0;ue<ee.length;ue++){var oe=ee[ue];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(X,oe.key,oe)}}return function(X,ee,ue){return ee&&Y(X.prototype,ee),ue&&Y(X,ue),X}}(),l=function Y(X,ee,ue){X===null&&(X=Function.prototype);var oe=Object.getOwnPropertyDescriptor(X,ee);if(oe===void 0){var we=Object.getPrototypeOf(X);return we===null?void 0:Y(we,ee,ue)}else{if("value"in oe)return oe.value;var Ne=oe.get;return Ne===void 0?void 0:Ne.call(ue)}},p=i(0),g=D(p),x=i(8),y=D(x),_=i(4),T=D(_),A=i(16),O=D(A),N=i(13),k=D(N),R=i(25),z=D(R);function D(Y){return Y&&Y.__esModule?Y:{default:Y}}function U(Y,X){if(!(Y instanceof X))throw new TypeError("Cannot call a class as a function")}function q(Y,X){if(!Y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return X&&(typeof X=="object"||typeof X=="function")?X:Y}function G(Y,X){if(typeof X!="function"&&X!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof X);Y.prototype=Object.create(X&&X.prototype,{constructor:{value:Y,enumerable:!1,writable:!0,configurable:!0}}),X&&(Object.setPrototypeOf?Object.setPrototypeOf(Y,X):Y.__proto__=X)}function H(Y){return Y instanceof T.default||Y instanceof _.BlockEmbed}var J=function(Y){G(X,Y);function X(ee,ue){U(this,X);var oe=q(this,(X.__proto__||Object.getPrototypeOf(X)).call(this,ee));return oe.emitter=ue.emitter,Array.isArray(ue.whitelist)&&(oe.whitelist=ue.whitelist.reduce(function(we,Ne){return we[Ne]=!0,we},{})),oe.domNode.addEventListener("DOMNodeInserted",function(){}),oe.optimize(),oe.enable(),oe}return u(X,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(ue,oe){var we=this.line(ue),Ne=o(we,2),Be=Ne[0],De=Ne[1],Ae=this.line(ue+oe),ve=o(Ae,1),ce=ve[0];if(l(X.prototype.__proto__||Object.getPrototypeOf(X.prototype),"deleteAt",this).call(this,ue,oe),ce!=null&&Be!==ce&&De>0){if(Be instanceof _.BlockEmbed||ce instanceof _.BlockEmbed){this.optimize();return}if(Be instanceof k.default){var xe=Be.newlineIndex(Be.length(),!0);if(xe>-1&&(Be=Be.split(xe+1),Be===ce)){this.optimize();return}}else if(ce instanceof k.default){var Ee=ce.newlineIndex(0);Ee>-1&&ce.split(Ee+1)}var Ge=ce.children.head instanceof O.default?null:ce.children.head;Be.moveChildren(ce,Ge),Be.remove()}this.optimize()}},{key:"enable",value:function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",ue)}},{key:"formatAt",value:function(ue,oe,we,Ne){this.whitelist!=null&&!this.whitelist[we]||(l(X.prototype.__proto__||Object.getPrototypeOf(X.prototype),"formatAt",this).call(this,ue,oe,we,Ne),this.optimize())}},{key:"insertAt",value:function(ue,oe,we){if(!(we!=null&&this.whitelist!=null&&!this.whitelist[oe])){if(ue>=this.length())if(we==null||g.default.query(oe,g.default.Scope.BLOCK)==null){var Ne=g.default.create(this.statics.defaultChild);this.appendChild(Ne),we==null&&oe.endsWith(`
`)&&(oe=oe.slice(0,-1)),Ne.insertAt(0,oe,we)}else{var Be=g.default.create(oe,we);this.appendChild(Be)}else l(X.prototype.__proto__||Object.getPrototypeOf(X.prototype),"insertAt",this).call(this,ue,oe,we);this.optimize()}}},{key:"insertBefore",value:function(ue,oe){if(ue.statics.scope===g.default.Scope.INLINE_BLOT){var we=g.default.create(this.statics.defaultChild);we.appendChild(ue),ue=we}l(X.prototype.__proto__||Object.getPrototypeOf(X.prototype),"insertBefore",this).call(this,ue,oe)}},{key:"leaf",value:function(ue){return this.path(ue).pop()||[null,-1]}},{key:"line",value:function(ue){return ue===this.length()?this.line(ue-1):this.descendant(H,ue)}},{key:"lines",value:function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,we=function Ne(Be,De,Ae){var ve=[],ce=Ae;return Be.children.forEachAt(De,Ae,function(xe,Ee,Ge){H(xe)?ve.push(xe):xe instanceof g.default.Container&&(ve=ve.concat(Ne(xe,Ee,ce))),ce-=Ge}),ve};return we(this,ue,oe)}},{key:"optimize",value:function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(l(X.prototype.__proto__||Object.getPrototypeOf(X.prototype),"optimize",this).call(this,ue,oe),ue.length>0&&this.emitter.emit(y.default.events.SCROLL_OPTIMIZE,ue,oe))}},{key:"path",value:function(ue){return l(X.prototype.__proto__||Object.getPrototypeOf(X.prototype),"path",this).call(this,ue).slice(1)}},{key:"update",value:function(ue){if(this.batch!==!0){var oe=y.default.sources.USER;typeof ue=="string"&&(oe=ue),Array.isArray(ue)||(ue=this.observer.takeRecords()),ue.length>0&&this.emitter.emit(y.default.events.SCROLL_BEFORE_UPDATE,oe,ue),l(X.prototype.__proto__||Object.getPrototypeOf(X.prototype),"update",this).call(this,ue.concat([])),ue.length>0&&this.emitter.emit(y.default.events.SCROLL_UPDATE,oe,ue)}}}]),X}(g.default.Scroll);J.blotName="scroll",J.className="ql-editor",J.tagName="DIV",J.defaultChild="block",J.allowedChildren=[T.default,_.BlockEmbed,z.default],r.default=J},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SHORTKEY=r.default=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(be){return typeof be}:function(be){return be&&typeof Symbol=="function"&&be.constructor===Symbol&&be!==Symbol.prototype?"symbol":typeof be},u=function(){function be(He,it){var ct=[],xt=!0,Dt=!1,Qt=void 0;try{for(var Ft=He[Symbol.iterator](),Kt;!(xt=(Kt=Ft.next()).done)&&(ct.push(Kt.value),!(it&&ct.length===it));xt=!0);}catch(Gt){Dt=!0,Qt=Gt}finally{try{!xt&&Ft.return&&Ft.return()}finally{if(Dt)throw Qt}}return ct}return function(He,it){if(Array.isArray(He))return He;if(Symbol.iterator in Object(He))return be(He,it);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function be(He,it){for(var ct=0;ct<it.length;ct++){var xt=it[ct];xt.enumerable=xt.enumerable||!1,xt.configurable=!0,"value"in xt&&(xt.writable=!0),Object.defineProperty(He,xt.key,xt)}}return function(He,it,ct){return it&&be(He.prototype,it),ct&&be(He,ct),He}}(),p=i(21),g=Y(p),x=i(11),y=Y(x),_=i(3),T=Y(_),A=i(2),O=Y(A),N=i(20),k=Y(N),R=i(0),z=Y(R),D=i(5),U=Y(D),q=i(10),G=Y(q),H=i(9),J=Y(H);function Y(be){return be&&be.__esModule?be:{default:be}}function X(be,He,it){return He in be?Object.defineProperty(be,He,{value:it,enumerable:!0,configurable:!0,writable:!0}):be[He]=it,be}function ee(be,He){if(!(be instanceof He))throw new TypeError("Cannot call a class as a function")}function ue(be,He){if(!be)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return He&&(typeof He=="object"||typeof He=="function")?He:be}function oe(be,He){if(typeof He!="function"&&He!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof He);be.prototype=Object.create(He&&He.prototype,{constructor:{value:be,enumerable:!1,writable:!0,configurable:!0}}),He&&(Object.setPrototypeOf?Object.setPrototypeOf(be,He):be.__proto__=He)}var we=(0,G.default)("quill:keyboard"),Ne=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",Be=function(be){oe(He,be),l(He,null,[{key:"match",value:function(ct,xt){return xt=$e(xt),["altKey","ctrlKey","metaKey","shiftKey"].some(function(Dt){return!!xt[Dt]!==ct[Dt]&&xt[Dt]!==null})?!1:xt.key===(ct.which||ct.keyCode)}}]);function He(it,ct){ee(this,He);var xt=ue(this,(He.__proto__||Object.getPrototypeOf(He)).call(this,it,ct));return xt.bindings={},Object.keys(xt.options.bindings).forEach(function(Dt){Dt==="list autofill"&&it.scroll.whitelist!=null&&!it.scroll.whitelist.list||xt.options.bindings[Dt]&&xt.addBinding(xt.options.bindings[Dt])}),xt.addBinding({key:He.keys.ENTER,shiftKey:null},xe),xt.addBinding({key:He.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(xt.addBinding({key:He.keys.BACKSPACE},{collapsed:!0},Ae),xt.addBinding({key:He.keys.DELETE},{collapsed:!0},ve)):(xt.addBinding({key:He.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},Ae),xt.addBinding({key:He.keys.DELETE},{collapsed:!0,suffix:/^.?$/},ve)),xt.addBinding({key:He.keys.BACKSPACE},{collapsed:!1},ce),xt.addBinding({key:He.keys.DELETE},{collapsed:!1},ce),xt.addBinding({key:He.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},Ae),xt.listen(),xt}return l(He,[{key:"addBinding",value:function(ct){var xt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Dt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Qt=$e(ct);if(Qt==null||Qt.key==null)return we.warn("Attempted to add invalid keyboard binding",Qt);typeof xt=="function"&&(xt={handler:xt}),typeof Dt=="function"&&(Dt={handler:Dt}),Qt=(0,T.default)(Qt,xt,Dt),this.bindings[Qt.key]=this.bindings[Qt.key]||[],this.bindings[Qt.key].push(Qt)}},{key:"listen",value:function(){var ct=this;this.quill.root.addEventListener("keydown",function(xt){if(!xt.defaultPrevented){var Dt=xt.which||xt.keyCode,Qt=(ct.bindings[Dt]||[]).filter(function(Un){return He.match(xt,Un)});if(Qt.length!==0){var Ft=ct.quill.getSelection();if(!(Ft==null||!ct.quill.hasFocus())){var Kt=ct.quill.getLine(Ft.index),Gt=u(Kt,2),Tr=Gt[0],rt=Gt[1],lt=ct.quill.getLeaf(Ft.index),gt=u(lt,2),_t=gt[0],Pt=gt[1],je=Ft.length===0?[_t,Pt]:ct.quill.getLeaf(Ft.index+Ft.length),vt=u(je,2),St=vt[0],Lt=vt[1],en=_t instanceof z.default.Text?_t.value().slice(0,Pt):"",wn=St instanceof z.default.Text?St.value().slice(Lt):"",gn={collapsed:Ft.length===0,empty:Ft.length===0&&Tr.length()<=1,format:ct.quill.getFormat(Ft),offset:rt,prefix:en,suffix:wn},bt=Qt.some(function(Un){if(Un.collapsed!=null&&Un.collapsed!==gn.collapsed||Un.empty!=null&&Un.empty!==gn.empty||Un.offset!=null&&Un.offset!==gn.offset)return!1;if(Array.isArray(Un.format)){if(Un.format.every(function(yr){return gn.format[yr]==null}))return!1}else if(o(Un.format)==="object"&&!Object.keys(Un.format).every(function(yr){return Un.format[yr]===!0?gn.format[yr]!=null:Un.format[yr]===!1?gn.format[yr]==null:(0,y.default)(Un.format[yr],gn.format[yr])}))return!1;return Un.prefix!=null&&!Un.prefix.test(gn.prefix)||Un.suffix!=null&&!Un.suffix.test(gn.suffix)?!1:Un.handler.call(ct,Ft,gn)!==!0});bt&&xt.preventDefault()}}}})}}]),He}(J.default);Be.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},Be.DEFAULTS={bindings:{bold:Ge("bold"),italic:Ge("italic"),underline:Ge("underline"),indent:{key:Be.keys.TAB,format:["blockquote","indent","list"],handler:function(He,it){if(it.collapsed&&it.offset!==0)return!0;this.quill.format("indent","+1",U.default.sources.USER)}},outdent:{key:Be.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(He,it){if(it.collapsed&&it.offset!==0)return!0;this.quill.format("indent","-1",U.default.sources.USER)}},"outdent backspace":{key:Be.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(He,it){it.format.indent!=null?this.quill.format("indent","-1",U.default.sources.USER):it.format.list!=null&&this.quill.format("list",!1,U.default.sources.USER)}},"indent code-block":Ee(!0),"outdent code-block":Ee(!1),"remove tab":{key:Be.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(He){this.quill.deleteText(He.index-1,1,U.default.sources.USER)}},tab:{key:Be.keys.TAB,handler:function(He){this.quill.history.cutoff();var it=new O.default().retain(He.index).delete(He.length).insert("	");this.quill.updateContents(it,U.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(He.index+1,U.default.sources.SILENT)}},"list empty enter":{key:Be.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(He,it){this.quill.format("list",!1,U.default.sources.USER),it.format.indent&&this.quill.format("indent",!1,U.default.sources.USER)}},"checklist enter":{key:Be.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(He){var it=this.quill.getLine(He.index),ct=u(it,2),xt=ct[0],Dt=ct[1],Qt=(0,T.default)({},xt.formats(),{list:"checked"}),Ft=new O.default().retain(He.index).insert(`
`,Qt).retain(xt.length()-Dt-1).retain(1,{list:"unchecked"});this.quill.updateContents(Ft,U.default.sources.USER),this.quill.setSelection(He.index+1,U.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:Be.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(He,it){var ct=this.quill.getLine(He.index),xt=u(ct,2),Dt=xt[0],Qt=xt[1],Ft=new O.default().retain(He.index).insert(`
`,it.format).retain(Dt.length()-Qt-1).retain(1,{header:null});this.quill.updateContents(Ft,U.default.sources.USER),this.quill.setSelection(He.index+1,U.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(He,it){var ct=it.prefix.length,xt=this.quill.getLine(He.index),Dt=u(xt,2),Qt=Dt[0],Ft=Dt[1];if(Ft>ct)return!0;var Kt=void 0;switch(it.prefix.trim()){case"[]":case"[ ]":Kt="unchecked";break;case"[x]":Kt="checked";break;case"-":case"*":Kt="bullet";break;default:Kt="ordered"}this.quill.insertText(He.index," ",U.default.sources.USER),this.quill.history.cutoff();var Gt=new O.default().retain(He.index-Ft).delete(ct+1).retain(Qt.length()-2-Ft).retain(1,{list:Kt});this.quill.updateContents(Gt,U.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(He.index-ct,U.default.sources.SILENT)}},"code exit":{key:Be.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(He){var it=this.quill.getLine(He.index),ct=u(it,2),xt=ct[0],Dt=ct[1],Qt=new O.default().retain(He.index+xt.length()-Dt-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(Qt,U.default.sources.USER)}},"embed left":De(Be.keys.LEFT,!1),"embed left shift":De(Be.keys.LEFT,!0),"embed right":De(Be.keys.RIGHT,!1),"embed right shift":De(Be.keys.RIGHT,!0)}};function De(be,He){var it,ct=be===Be.keys.LEFT?"prefix":"suffix";return it={key:be,shiftKey:He,altKey:null},X(it,ct,/^$/),X(it,"handler",function(Dt){var Qt=Dt.index;be===Be.keys.RIGHT&&(Qt+=Dt.length+1);var Ft=this.quill.getLeaf(Qt),Kt=u(Ft,1),Gt=Kt[0];return Gt instanceof z.default.Embed?(be===Be.keys.LEFT?He?this.quill.setSelection(Dt.index-1,Dt.length+1,U.default.sources.USER):this.quill.setSelection(Dt.index-1,U.default.sources.USER):He?this.quill.setSelection(Dt.index,Dt.length+1,U.default.sources.USER):this.quill.setSelection(Dt.index+Dt.length+1,U.default.sources.USER),!1):!0}),it}function Ae(be,He){if(!(be.index===0||this.quill.getLength()<=1)){var it=this.quill.getLine(be.index),ct=u(it,1),xt=ct[0],Dt={};if(He.offset===0){var Qt=this.quill.getLine(be.index-1),Ft=u(Qt,1),Kt=Ft[0];if(Kt!=null&&Kt.length()>1){var Gt=xt.formats(),Tr=this.quill.getFormat(be.index-1,1);Dt=k.default.attributes.diff(Gt,Tr)||{}}}var rt=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(He.prefix)?2:1;this.quill.deleteText(be.index-rt,rt,U.default.sources.USER),Object.keys(Dt).length>0&&this.quill.formatLine(be.index-rt,rt,Dt,U.default.sources.USER),this.quill.focus()}}function ve(be,He){var it=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(He.suffix)?2:1;if(!(be.index>=this.quill.getLength()-it)){var ct={},xt=0,Dt=this.quill.getLine(be.index),Qt=u(Dt,1),Ft=Qt[0];if(He.offset>=Ft.length()-1){var Kt=this.quill.getLine(be.index+1),Gt=u(Kt,1),Tr=Gt[0];if(Tr){var rt=Ft.formats(),lt=this.quill.getFormat(be.index,1);ct=k.default.attributes.diff(rt,lt)||{},xt=Tr.length()}}this.quill.deleteText(be.index,it,U.default.sources.USER),Object.keys(ct).length>0&&this.quill.formatLine(be.index+xt-1,it,ct,U.default.sources.USER)}}function ce(be){var He=this.quill.getLines(be),it={};if(He.length>1){var ct=He[0].formats(),xt=He[He.length-1].formats();it=k.default.attributes.diff(xt,ct)||{}}this.quill.deleteText(be,U.default.sources.USER),Object.keys(it).length>0&&this.quill.formatLine(be.index,1,it,U.default.sources.USER),this.quill.setSelection(be.index,U.default.sources.SILENT),this.quill.focus()}function xe(be,He){var it=this;be.length>0&&this.quill.scroll.deleteAt(be.index,be.length);var ct=Object.keys(He.format).reduce(function(xt,Dt){return z.default.query(Dt,z.default.Scope.BLOCK)&&!Array.isArray(He.format[Dt])&&(xt[Dt]=He.format[Dt]),xt},{});this.quill.insertText(be.index,`
`,ct,U.default.sources.USER),this.quill.setSelection(be.index+1,U.default.sources.SILENT),this.quill.focus(),Object.keys(He.format).forEach(function(xt){ct[xt]==null&&(Array.isArray(He.format[xt])||xt!=="link"&&it.quill.format(xt,He.format[xt],U.default.sources.USER))})}function Ee(be){return{key:Be.keys.TAB,shiftKey:!be,format:{"code-block":!0},handler:function(it){var ct=z.default.query("code-block"),xt=it.index,Dt=it.length,Qt=this.quill.scroll.descendant(ct,xt),Ft=u(Qt,2),Kt=Ft[0],Gt=Ft[1];if(Kt!=null){var Tr=this.quill.getIndex(Kt),rt=Kt.newlineIndex(Gt,!0)+1,lt=Kt.newlineIndex(Tr+Gt+Dt),gt=Kt.domNode.textContent.slice(rt,lt).split(`
`);Gt=0,gt.forEach(function(_t,Pt){be?(Kt.insertAt(rt+Gt,ct.TAB),Gt+=ct.TAB.length,Pt===0?xt+=ct.TAB.length:Dt+=ct.TAB.length):_t.startsWith(ct.TAB)&&(Kt.deleteAt(rt+Gt,ct.TAB.length),Gt-=ct.TAB.length,Pt===0?xt-=ct.TAB.length:Dt-=ct.TAB.length),Gt+=_t.length+1}),this.quill.update(U.default.sources.USER),this.quill.setSelection(xt,Dt,U.default.sources.SILENT)}}}}function Ge(be){return{key:be[0].toUpperCase(),shortKey:!0,handler:function(it,ct){this.quill.format(be,!ct.format[be],U.default.sources.USER)}}}function $e(be){if(typeof be=="string"||typeof be=="number")return $e({key:be});if((typeof be>"u"?"undefined":o(be))==="object"&&(be=(0,g.default)(be,!1)),typeof be.key=="string")if(Be.keys[be.key.toUpperCase()]!=null)be.key=Be.keys[be.key.toUpperCase()];else if(be.key.length===1)be.key=be.key.toUpperCase().charCodeAt(0);else return null;return be.shortKey&&(be[Ne]=be.shortKey,delete be.shortKey),be}r.default=Be,r.SHORTKEY=Ne},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function k(R,z){var D=[],U=!0,q=!1,G=void 0;try{for(var H=R[Symbol.iterator](),J;!(U=(J=H.next()).done)&&(D.push(J.value),!(z&&D.length===z));U=!0);}catch(Y){q=!0,G=Y}finally{try{!U&&H.return&&H.return()}finally{if(q)throw G}}return D}return function(R,z){if(Array.isArray(R))return R;if(Symbol.iterator in Object(R))return k(R,z);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function k(R,z,D){R===null&&(R=Function.prototype);var U=Object.getOwnPropertyDescriptor(R,z);if(U===void 0){var q=Object.getPrototypeOf(R);return q===null?void 0:k(q,z,D)}else{if("value"in U)return U.value;var G=U.get;return G===void 0?void 0:G.call(D)}},l=function(){function k(R,z){for(var D=0;D<z.length;D++){var U=z[D];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(R,U.key,U)}}return function(R,z,D){return z&&k(R.prototype,z),D&&k(R,D),R}}(),p=i(0),g=_(p),x=i(7),y=_(x);function _(k){return k&&k.__esModule?k:{default:k}}function T(k,R){if(!(k instanceof R))throw new TypeError("Cannot call a class as a function")}function A(k,R){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:k}function O(k,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);k.prototype=Object.create(R&&R.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(k,R):k.__proto__=R)}var N=function(k){O(R,k),l(R,null,[{key:"value",value:function(){}}]);function R(z,D){T(this,R);var U=A(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,z));return U.selection=D,U.textNode=document.createTextNode(R.CONTENTS),U.domNode.appendChild(U.textNode),U._length=0,U}return l(R,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(D,U){if(this._length!==0)return u(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"format",this).call(this,D,U);for(var q=this,G=0;q!=null&&q.statics.scope!==g.default.Scope.BLOCK_BLOT;)G+=q.offset(q.parent),q=q.parent;q!=null&&(this._length=R.CONTENTS.length,q.optimize(),q.formatAt(G,R.CONTENTS.length,D,U),this._length=0)}},{key:"index",value:function(D,U){return D===this.textNode?0:u(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"index",this).call(this,D,U)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){u(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var D=this.textNode,U=this.selection.getNativeRange(),q=void 0,G=void 0,H=void 0;if(U!=null&&U.start.node===D&&U.end.node===D){var J=[D,U.start.offset,U.end.offset];q=J[0],G=J[1],H=J[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==R.CONTENTS){var Y=this.textNode.data.split(R.CONTENTS).join("");this.next instanceof y.default?(q=this.next.domNode,this.next.insertAt(0,Y),this.textNode.data=R.CONTENTS):(this.textNode.data=Y,this.parent.insertBefore(g.default.create(this.textNode),this),this.textNode=document.createTextNode(R.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),G!=null){var X=[G,H].map(function(ue){return Math.max(0,Math.min(q.data.length,ue-1))}),ee=o(X,2);return G=ee[0],H=ee[1],{startNode:q,startOffset:G,endNode:q,endOffset:H}}}}},{key:"update",value:function(D,U){var q=this;if(D.some(function(H){return H.type==="characterData"&&H.target===q.textNode})){var G=this.restore();G&&(U.range=G)}}},{key:"value",value:function(){return""}}]),R}(g.default.Embed);N.blotName="cursor",N.className="ql-cursor",N.tagName="span",N.CONTENTS="\uFEFF",r.default=N},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),u=g(o),l=i(4),p=g(l);function g(A){return A&&A.__esModule?A:{default:A}}function x(A,O){if(!(A instanceof O))throw new TypeError("Cannot call a class as a function")}function y(A,O){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:A}function _(A,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);A.prototype=Object.create(O&&O.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(A,O):A.__proto__=O)}var T=function(A){_(O,A);function O(){return x(this,O),y(this,(O.__proto__||Object.getPrototypeOf(O)).apply(this,arguments))}return O}(u.default.Container);T.allowedChildren=[p.default,l.BlockEmbed,T],r.default=T},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.ColorStyle=r.ColorClass=r.ColorAttributor=void 0;var o=function(){function N(k,R){for(var z=0;z<R.length;z++){var D=R[z];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(k,D.key,D)}}return function(k,R,z){return R&&N(k.prototype,R),z&&N(k,z),k}}(),u=function N(k,R,z){k===null&&(k=Function.prototype);var D=Object.getOwnPropertyDescriptor(k,R);if(D===void 0){var U=Object.getPrototypeOf(k);return U===null?void 0:N(U,R,z)}else{if("value"in D)return D.value;var q=D.get;return q===void 0?void 0:q.call(z)}},l=i(0),p=g(l);function g(N){return N&&N.__esModule?N:{default:N}}function x(N,k){if(!(N instanceof k))throw new TypeError("Cannot call a class as a function")}function y(N,k){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:N}function _(N,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);N.prototype=Object.create(k&&k.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(N,k):N.__proto__=k)}var T=function(N){_(k,N);function k(){return x(this,k),y(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return o(k,[{key:"value",value:function(z){var D=u(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"value",this).call(this,z);return D.startsWith("rgb(")?(D=D.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+D.split(",").map(function(U){return("00"+parseInt(U).toString(16)).slice(-2)}).join("")):D}}]),k}(p.default.Attributor.Style),A=new p.default.Attributor.Class("color","ql-color",{scope:p.default.Scope.INLINE}),O=new T("color","color",{scope:p.default.Scope.INLINE});r.ColorAttributor=T,r.ColorClass=A,r.ColorStyle=O},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.sanitize=r.default=void 0;var o=function(){function O(N,k){for(var R=0;R<k.length;R++){var z=k[R];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(N,z.key,z)}}return function(N,k,R){return k&&O(N.prototype,k),R&&O(N,R),N}}(),u=function O(N,k,R){N===null&&(N=Function.prototype);var z=Object.getOwnPropertyDescriptor(N,k);if(z===void 0){var D=Object.getPrototypeOf(N);return D===null?void 0:O(D,k,R)}else{if("value"in z)return z.value;var U=z.get;return U===void 0?void 0:U.call(R)}},l=i(6),p=g(l);function g(O){return O&&O.__esModule?O:{default:O}}function x(O,N){if(!(O instanceof N))throw new TypeError("Cannot call a class as a function")}function y(O,N){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:O}function _(O,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);O.prototype=Object.create(N&&N.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(O,N):O.__proto__=N)}var T=function(O){_(N,O);function N(){return x(this,N),y(this,(N.__proto__||Object.getPrototypeOf(N)).apply(this,arguments))}return o(N,[{key:"format",value:function(R,z){if(R!==this.statics.blotName||!z)return u(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"format",this).call(this,R,z);z=this.constructor.sanitize(z),this.domNode.setAttribute("href",z)}}],[{key:"create",value:function(R){var z=u(N.__proto__||Object.getPrototypeOf(N),"create",this).call(this,R);return R=this.sanitize(R),z.setAttribute("href",R),z.setAttribute("rel","noopener noreferrer"),z.setAttribute("target","_blank"),z}},{key:"formats",value:function(R){return R.getAttribute("href")}},{key:"sanitize",value:function(R){return A(R,this.PROTOCOL_WHITELIST)?R:this.SANITIZED_URL}}]),N}(p.default);T.blotName="link",T.tagName="A",T.SANITIZED_URL="about:blank",T.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function A(O,N){var k=document.createElement("a");k.href=O;var R=k.href.slice(0,k.href.indexOf(":"));return N.indexOf(R)>-1}r.default=T,r.sanitize=A},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},u=function(){function N(k,R){for(var z=0;z<R.length;z++){var D=R[z];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(k,D.key,D)}}return function(k,R,z){return R&&N(k.prototype,R),z&&N(k,z),k}}(),l=i(23),p=y(l),g=i(107),x=y(g);function y(N){return N&&N.__esModule?N:{default:N}}function _(N,k){if(!(N instanceof k))throw new TypeError("Cannot call a class as a function")}var T=0;function A(N,k){N.setAttribute(k,N.getAttribute(k)!=="true")}var O=function(){function N(k){var R=this;_(this,N),this.select=k,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){R.togglePicker()}),this.label.addEventListener("keydown",function(z){switch(z.keyCode){case p.default.keys.ENTER:R.togglePicker();break;case p.default.keys.ESCAPE:R.escape(),z.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return u(N,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),A(this.label,"aria-expanded"),A(this.options,"aria-hidden")}},{key:"buildItem",value:function(R){var z=this,D=document.createElement("span");return D.tabIndex="0",D.setAttribute("role","button"),D.classList.add("ql-picker-item"),R.hasAttribute("value")&&D.setAttribute("data-value",R.getAttribute("value")),R.textContent&&D.setAttribute("data-label",R.textContent),D.addEventListener("click",function(){z.selectItem(D,!0)}),D.addEventListener("keydown",function(U){switch(U.keyCode){case p.default.keys.ENTER:z.selectItem(D,!0),U.preventDefault();break;case p.default.keys.ESCAPE:z.escape(),U.preventDefault();break}}),D}},{key:"buildLabel",value:function(){var R=document.createElement("span");return R.classList.add("ql-picker-label"),R.innerHTML=x.default,R.tabIndex="0",R.setAttribute("role","button"),R.setAttribute("aria-expanded","false"),this.container.appendChild(R),R}},{key:"buildOptions",value:function(){var R=this,z=document.createElement("span");z.classList.add("ql-picker-options"),z.setAttribute("aria-hidden","true"),z.tabIndex="-1",z.id="ql-picker-options-"+T,T+=1,this.label.setAttribute("aria-controls",z.id),this.options=z,[].slice.call(this.select.options).forEach(function(D){var U=R.buildItem(D);z.appendChild(U),D.selected===!0&&R.selectItem(U)}),this.container.appendChild(z)}},{key:"buildPicker",value:function(){var R=this;[].slice.call(this.select.attributes).forEach(function(z){R.container.setAttribute(z.name,z.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var R=this;this.close(),setTimeout(function(){return R.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(R){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,D=this.container.querySelector(".ql-selected");if(R!==D&&(D!=null&&D.classList.remove("ql-selected"),R!=null&&(R.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(R.parentNode.children,R),R.hasAttribute("data-value")?this.label.setAttribute("data-value",R.getAttribute("data-value")):this.label.removeAttribute("data-value"),R.hasAttribute("data-label")?this.label.setAttribute("data-label",R.getAttribute("data-label")):this.label.removeAttribute("data-label"),z))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":o(Event))==="object"){var U=document.createEvent("Event");U.initEvent("change",!0,!0),this.select.dispatchEvent(U)}this.close()}}},{key:"update",value:function(){var R=void 0;if(this.select.selectedIndex>-1){var z=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];R=this.select.options[this.select.selectedIndex],this.selectItem(z)}else this.selectItem(null);var D=R!=null&&R!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",D)}}]),N}();r.default=O},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),u=we(o),l=i(5),p=we(l),g=i(4),x=we(g),y=i(16),_=we(y),T=i(25),A=we(T),O=i(24),N=we(O),k=i(35),R=we(k),z=i(6),D=we(z),U=i(22),q=we(U),G=i(7),H=we(G),J=i(55),Y=we(J),X=i(42),ee=we(X),ue=i(23),oe=we(ue);function we(Ne){return Ne&&Ne.__esModule?Ne:{default:Ne}}p.default.register({"blots/block":x.default,"blots/block/embed":g.BlockEmbed,"blots/break":_.default,"blots/container":A.default,"blots/cursor":N.default,"blots/embed":R.default,"blots/inline":D.default,"blots/scroll":q.default,"blots/text":H.default,"modules/clipboard":Y.default,"modules/history":ee.default,"modules/keyboard":oe.default}),u.default.register(x.default,_.default,N.default,D.default,q.default,H.default),r.default=p.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(1),u=function(){function l(p){this.domNode=p,this.domNode[o.DATA_KEY]={blot:this}}return Object.defineProperty(l.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),l.create=function(p){if(this.tagName==null)throw new o.ParchmentError("Blot definition missing tagName");var g;return Array.isArray(this.tagName)?(typeof p=="string"&&(p=p.toUpperCase(),parseInt(p).toString()===p&&(p=parseInt(p))),typeof p=="number"?g=document.createElement(this.tagName[p-1]):this.tagName.indexOf(p)>-1?g=document.createElement(p):g=document.createElement(this.tagName[0])):g=document.createElement(this.tagName),this.className&&g.classList.add(this.className),g},l.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},l.prototype.clone=function(){var p=this.domNode.cloneNode(!1);return o.create(p)},l.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[o.DATA_KEY]},l.prototype.deleteAt=function(p,g){var x=this.isolate(p,g);x.remove()},l.prototype.formatAt=function(p,g,x,y){var _=this.isolate(p,g);if(o.query(x,o.Scope.BLOT)!=null&&y)_.wrap(x,y);else if(o.query(x,o.Scope.ATTRIBUTE)!=null){var T=o.create(this.statics.scope);_.wrap(T),T.format(x,y)}},l.prototype.insertAt=function(p,g,x){var y=x==null?o.create("text",g):o.create(g,x),_=this.split(p);this.parent.insertBefore(y,_)},l.prototype.insertInto=function(p,g){g===void 0&&(g=null),this.parent!=null&&this.parent.children.remove(this);var x=null;p.children.insertBefore(this,g),g!=null&&(x=g.domNode),(this.domNode.parentNode!=p.domNode||this.domNode.nextSibling!=x)&&p.domNode.insertBefore(this.domNode,x),this.parent=p,this.attach()},l.prototype.isolate=function(p,g){var x=this.split(p);return x.split(g),x},l.prototype.length=function(){return 1},l.prototype.offset=function(p){return p===void 0&&(p=this.parent),this.parent==null||this==p?0:this.parent.children.offset(this)+this.parent.offset(p)},l.prototype.optimize=function(p){this.domNode[o.DATA_KEY]!=null&&delete this.domNode[o.DATA_KEY].mutations},l.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},l.prototype.replace=function(p){p.parent!=null&&(p.parent.insertBefore(this,p.next),p.remove())},l.prototype.replaceWith=function(p,g){var x=typeof p=="string"?o.create(p,g):p;return x.replace(this),x},l.prototype.split=function(p,g){return p===0?this:this.next},l.prototype.update=function(p,g){},l.prototype.wrap=function(p,g){var x=typeof p=="string"?o.create(p,g):p;return this.parent!=null&&this.parent.insertBefore(x,this.next),x.appendChild(this),x},l.blotName="abstract",l}();r.default=u},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(12),u=i(32),l=i(33),p=i(1),g=function(){function x(y){this.attributes={},this.domNode=y,this.build()}return x.prototype.attribute=function(y,_){_?y.add(this.domNode,_)&&(y.value(this.domNode)!=null?this.attributes[y.attrName]=y:delete this.attributes[y.attrName]):(y.remove(this.domNode),delete this.attributes[y.attrName])},x.prototype.build=function(){var y=this;this.attributes={};var _=o.default.keys(this.domNode),T=u.default.keys(this.domNode),A=l.default.keys(this.domNode);_.concat(T).concat(A).forEach(function(O){var N=p.query(O,p.Scope.ATTRIBUTE);N instanceof o.default&&(y.attributes[N.attrName]=N)})},x.prototype.copy=function(y){var _=this;Object.keys(this.attributes).forEach(function(T){var A=_.attributes[T].value(_.domNode);y.format(T,A)})},x.prototype.move=function(y){var _=this;this.copy(y),Object.keys(this.attributes).forEach(function(T){_.attributes[T].remove(_.domNode)}),this.attributes={}},x.prototype.values=function(){var y=this;return Object.keys(this.attributes).reduce(function(_,T){return _[T]=y.attributes[T].value(y.domNode),_},{})},x}();r.default=g},function(n,r,i){var o=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,y){x.__proto__=y}||function(x,y){for(var _ in y)y.hasOwnProperty(_)&&(x[_]=y[_])};return function(x,y){g(x,y);function _(){this.constructor=x}x.prototype=y===null?Object.create(y):(_.prototype=y.prototype,new _)}}();Object.defineProperty(r,"__esModule",{value:!0});var u=i(12);function l(g,x){var y=g.getAttribute("class")||"";return y.split(/\s+/).filter(function(_){return _.indexOf(x+"-")===0})}var p=function(g){o(x,g);function x(){return g!==null&&g.apply(this,arguments)||this}return x.keys=function(y){return(y.getAttribute("class")||"").split(/\s+/).map(function(_){return _.split("-").slice(0,-1).join("-")})},x.prototype.add=function(y,_){return this.canAdd(y,_)?(this.remove(y),y.classList.add(this.keyName+"-"+_),!0):!1},x.prototype.remove=function(y){var _=l(y,this.keyName);_.forEach(function(T){y.classList.remove(T)}),y.classList.length===0&&y.removeAttribute("class")},x.prototype.value=function(y){var _=l(y,this.keyName)[0]||"",T=_.slice(this.keyName.length+1);return this.canAdd(y,T)?T:""},x}(u.default);r.default=p},function(n,r,i){var o=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,y){x.__proto__=y}||function(x,y){for(var _ in y)y.hasOwnProperty(_)&&(x[_]=y[_])};return function(x,y){g(x,y);function _(){this.constructor=x}x.prototype=y===null?Object.create(y):(_.prototype=y.prototype,new _)}}();Object.defineProperty(r,"__esModule",{value:!0});var u=i(12);function l(g){var x=g.split("-"),y=x.slice(1).map(function(_){return _[0].toUpperCase()+_.slice(1)}).join("");return x[0]+y}var p=function(g){o(x,g);function x(){return g!==null&&g.apply(this,arguments)||this}return x.keys=function(y){return(y.getAttribute("style")||"").split(";").map(function(_){var T=_.split(":");return T[0].trim()})},x.prototype.add=function(y,_){return this.canAdd(y,_)?(y.style[l(this.keyName)]=_,!0):!1},x.prototype.remove=function(y){y.style[l(this.keyName)]="",y.getAttribute("style")||y.removeAttribute("style")},x.prototype.value=function(y){var _=y.style[l(this.keyName)];return this.canAdd(y,_)?_:""},x}(u.default);r.default=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function p(g,x){for(var y=0;y<x.length;y++){var _=x[y];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(g,_.key,_)}}return function(g,x,y){return x&&p(g.prototype,x),y&&p(g,y),g}}();function u(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}var l=function(){function p(g,x){u(this,p),this.quill=g,this.options=x,this.modules={}}return o(p,[{key:"init",value:function(){var x=this;Object.keys(this.options.modules).forEach(function(y){x.modules[y]==null&&x.addModule(y)})}},{key:"addModule",value:function(x){var y=this.quill.constructor.import("modules/"+x);return this.modules[x]=new y(this.quill,this.options.modules[x]||{}),this.modules[x]}}]),p}();l.DEFAULTS={modules:{}},l.themes={default:l},r.default=l},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function k(R,z){for(var D=0;D<z.length;D++){var U=z[D];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(R,U.key,U)}}return function(R,z,D){return z&&k(R.prototype,z),D&&k(R,D),R}}(),u=function k(R,z,D){R===null&&(R=Function.prototype);var U=Object.getOwnPropertyDescriptor(R,z);if(U===void 0){var q=Object.getPrototypeOf(R);return q===null?void 0:k(q,z,D)}else{if("value"in U)return U.value;var G=U.get;return G===void 0?void 0:G.call(D)}},l=i(0),p=y(l),g=i(7),x=y(g);function y(k){return k&&k.__esModule?k:{default:k}}function _(k,R){if(!(k instanceof R))throw new TypeError("Cannot call a class as a function")}function T(k,R){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:k}function A(k,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);k.prototype=Object.create(R&&R.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(k,R):k.__proto__=R)}var O="\uFEFF",N=function(k){A(R,k);function R(z){_(this,R);var D=T(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,z));return D.contentNode=document.createElement("span"),D.contentNode.setAttribute("contenteditable",!1),[].slice.call(D.domNode.childNodes).forEach(function(U){D.contentNode.appendChild(U)}),D.leftGuard=document.createTextNode(O),D.rightGuard=document.createTextNode(O),D.domNode.appendChild(D.leftGuard),D.domNode.appendChild(D.contentNode),D.domNode.appendChild(D.rightGuard),D}return o(R,[{key:"index",value:function(D,U){return D===this.leftGuard?0:D===this.rightGuard?1:u(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"index",this).call(this,D,U)}},{key:"restore",value:function(D){var U=void 0,q=void 0,G=D.data.split(O).join("");if(D===this.leftGuard)if(this.prev instanceof x.default){var H=this.prev.length();this.prev.insertAt(H,G),U={startNode:this.prev.domNode,startOffset:H+G.length}}else q=document.createTextNode(G),this.parent.insertBefore(p.default.create(q),this),U={startNode:q,startOffset:G.length};else D===this.rightGuard&&(this.next instanceof x.default?(this.next.insertAt(0,G),U={startNode:this.next.domNode,startOffset:G.length}):(q=document.createTextNode(G),this.parent.insertBefore(p.default.create(q),this.next),U={startNode:q,startOffset:G.length}));return D.data=O,U}},{key:"update",value:function(D,U){var q=this;D.forEach(function(G){if(G.type==="characterData"&&(G.target===q.leftGuard||G.target===q.rightGuard)){var H=q.restore(G.target);H&&(U.range=H)}})}}]),R}(p.default.Embed);r.default=N},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.AlignStyle=r.AlignClass=r.AlignAttribute=void 0;var o=i(0),u=l(o);function l(_){return _&&_.__esModule?_:{default:_}}var p={scope:u.default.Scope.BLOCK,whitelist:["right","center","justify"]},g=new u.default.Attributor.Attribute("align","align",p),x=new u.default.Attributor.Class("align","ql-align",p),y=new u.default.Attributor.Style("align","text-align",p);r.AlignAttribute=g,r.AlignClass=x,r.AlignStyle=y},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.BackgroundStyle=r.BackgroundClass=void 0;var o=i(0),u=p(o),l=i(26);function p(y){return y&&y.__esModule?y:{default:y}}var g=new u.default.Attributor.Class("background","ql-bg",{scope:u.default.Scope.INLINE}),x=new l.ColorAttributor("background","background-color",{scope:u.default.Scope.INLINE});r.BackgroundClass=g,r.BackgroundStyle=x},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.DirectionStyle=r.DirectionClass=r.DirectionAttribute=void 0;var o=i(0),u=l(o);function l(_){return _&&_.__esModule?_:{default:_}}var p={scope:u.default.Scope.BLOCK,whitelist:["rtl"]},g=new u.default.Attributor.Attribute("direction","dir",p),x=new u.default.Attributor.Class("direction","ql-direction",p),y=new u.default.Attributor.Style("direction","direction",p);r.DirectionAttribute=g,r.DirectionClass=x,r.DirectionStyle=y},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.FontClass=r.FontStyle=void 0;var o=function(){function k(R,z){for(var D=0;D<z.length;D++){var U=z[D];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(R,U.key,U)}}return function(R,z,D){return z&&k(R.prototype,z),D&&k(R,D),R}}(),u=function k(R,z,D){R===null&&(R=Function.prototype);var U=Object.getOwnPropertyDescriptor(R,z);if(U===void 0){var q=Object.getPrototypeOf(R);return q===null?void 0:k(q,z,D)}else{if("value"in U)return U.value;var G=U.get;return G===void 0?void 0:G.call(D)}},l=i(0),p=g(l);function g(k){return k&&k.__esModule?k:{default:k}}function x(k,R){if(!(k instanceof R))throw new TypeError("Cannot call a class as a function")}function y(k,R){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:k}function _(k,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);k.prototype=Object.create(R&&R.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(k,R):k.__proto__=R)}var T={scope:p.default.Scope.INLINE,whitelist:["serif","monospace"]},A=new p.default.Attributor.Class("font","ql-font",T),O=function(k){_(R,k);function R(){return x(this,R),y(this,(R.__proto__||Object.getPrototypeOf(R)).apply(this,arguments))}return o(R,[{key:"value",value:function(D){return u(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"value",this).call(this,D).replace(/["']/g,"")}}]),R}(p.default.Attributor.Style),N=new O("font","font-family",T);r.FontStyle=N,r.FontClass=A},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SizeStyle=r.SizeClass=void 0;var o=i(0),u=l(o);function l(x){return x&&x.__esModule?x:{default:x}}var p=new u.default.Attributor.Class("size","ql-size",{scope:u.default.Scope.INLINE,whitelist:["small","large","huge"]}),g=new u.default.Attributor.Style("size","font-size",{scope:u.default.Scope.INLINE,whitelist:["10px","18px","32px"]});r.SizeClass=p,r.SizeStyle=g},function(n,r,i){n.exports={align:{"":i(76),center:i(77),right:i(78),justify:i(79)},background:i(80),blockquote:i(81),bold:i(82),clean:i(83),code:i(58),"code-block":i(58),color:i(84),direction:{"":i(85),rtl:i(86)},float:{center:i(87),full:i(88),left:i(89),right:i(90)},formula:i(91),header:{1:i(92),2:i(93)},italic:i(94),image:i(95),indent:{"+1":i(96),"-1":i(97)},link:i(98),list:{ordered:i(99),bullet:i(100),check:i(101)},script:{sub:i(102),super:i(103)},strike:i(104),underline:i(105),video:i(106)}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.getLastChangeIndex=r.default=void 0;var o=function(){function z(D,U){for(var q=0;q<U.length;q++){var G=U[q];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(D,G.key,G)}}return function(D,U,q){return U&&z(D.prototype,U),q&&z(D,q),D}}(),u=i(0),l=_(u),p=i(5),g=_(p),x=i(9),y=_(x);function _(z){return z&&z.__esModule?z:{default:z}}function T(z,D){if(!(z instanceof D))throw new TypeError("Cannot call a class as a function")}function A(z,D){if(!z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D&&(typeof D=="object"||typeof D=="function")?D:z}function O(z,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);z.prototype=Object.create(D&&D.prototype,{constructor:{value:z,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(z,D):z.__proto__=D)}var N=function(z){O(D,z);function D(U,q){T(this,D);var G=A(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,U,q));return G.lastRecorded=0,G.ignoreChange=!1,G.clear(),G.quill.on(g.default.events.EDITOR_CHANGE,function(H,J,Y,X){H!==g.default.events.TEXT_CHANGE||G.ignoreChange||(!G.options.userOnly||X===g.default.sources.USER?G.record(J,Y):G.transform(J))}),G.quill.keyboard.addBinding({key:"Z",shortKey:!0},G.undo.bind(G)),G.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},G.redo.bind(G)),/Win/i.test(navigator.platform)&&G.quill.keyboard.addBinding({key:"Y",shortKey:!0},G.redo.bind(G)),G}return o(D,[{key:"change",value:function(q,G){if(this.stack[q].length!==0){var H=this.stack[q].pop();this.stack[G].push(H),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(H[q],g.default.sources.USER),this.ignoreChange=!1;var J=R(H[q]);this.quill.setSelection(J)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(q,G){if(q.ops.length!==0){this.stack.redo=[];var H=this.quill.getContents().diff(G),J=Date.now();if(this.lastRecorded+this.options.delay>J&&this.stack.undo.length>0){var Y=this.stack.undo.pop();H=H.compose(Y.undo),q=Y.redo.compose(q)}else this.lastRecorded=J;this.stack.undo.push({redo:q,undo:H}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(q){this.stack.undo.forEach(function(G){G.undo=q.transform(G.undo,!0),G.redo=q.transform(G.redo,!0)}),this.stack.redo.forEach(function(G){G.undo=q.transform(G.undo,!0),G.redo=q.transform(G.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),D}(y.default);N.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function k(z){var D=z.ops[z.ops.length-1];return D==null?!1:D.insert!=null?typeof D.insert=="string"&&D.insert.endsWith(`
`):D.attributes!=null?Object.keys(D.attributes).some(function(U){return l.default.query(U,l.default.Scope.BLOCK)!=null}):!1}function R(z){var D=z.reduce(function(q,G){return q+=G.delete||0,q},0),U=z.length()-D;return k(z)&&(U-=1),U}r.default=N,r.getLastChangeIndex=R},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BaseTooltip=void 0;var o=function(){function xe(Ee,Ge){for(var $e=0;$e<Ge.length;$e++){var be=Ge[$e];be.enumerable=be.enumerable||!1,be.configurable=!0,"value"in be&&(be.writable=!0),Object.defineProperty(Ee,be.key,be)}}return function(Ee,Ge,$e){return Ge&&xe(Ee.prototype,Ge),$e&&xe(Ee,$e),Ee}}(),u=function xe(Ee,Ge,$e){Ee===null&&(Ee=Function.prototype);var be=Object.getOwnPropertyDescriptor(Ee,Ge);if(be===void 0){var He=Object.getPrototypeOf(Ee);return He===null?void 0:xe(He,Ge,$e)}else{if("value"in be)return be.value;var it=be.get;return it===void 0?void 0:it.call($e)}},l=i(3),p=J(l),g=i(2),x=J(g),y=i(8),_=J(y),T=i(23),A=J(T),O=i(34),N=J(O),k=i(59),R=J(k),z=i(60),D=J(z),U=i(28),q=J(U),G=i(61),H=J(G);function J(xe){return xe&&xe.__esModule?xe:{default:xe}}function Y(xe,Ee){if(!(xe instanceof Ee))throw new TypeError("Cannot call a class as a function")}function X(xe,Ee){if(!xe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ee&&(typeof Ee=="object"||typeof Ee=="function")?Ee:xe}function ee(xe,Ee){if(typeof Ee!="function"&&Ee!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ee);xe.prototype=Object.create(Ee&&Ee.prototype,{constructor:{value:xe,enumerable:!1,writable:!0,configurable:!0}}),Ee&&(Object.setPrototypeOf?Object.setPrototypeOf(xe,Ee):xe.__proto__=Ee)}var ue=[!1,"center","right","justify"],oe=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],we=[!1,"serif","monospace"],Ne=["1","2","3",!1],Be=["small",!1,"large","huge"],De=function(xe){ee(Ee,xe);function Ee(Ge,$e){Y(this,Ee);var be=X(this,(Ee.__proto__||Object.getPrototypeOf(Ee)).call(this,Ge,$e)),He=function it(ct){if(!document.body.contains(Ge.root))return document.body.removeEventListener("click",it);be.tooltip!=null&&!be.tooltip.root.contains(ct.target)&&document.activeElement!==be.tooltip.textbox&&!be.quill.hasFocus()&&be.tooltip.hide(),be.pickers!=null&&be.pickers.forEach(function(xt){xt.container.contains(ct.target)||xt.close()})};return Ge.emitter.listenDOM("click",document.body,He),be}return o(Ee,[{key:"addModule",value:function($e){var be=u(Ee.prototype.__proto__||Object.getPrototypeOf(Ee.prototype),"addModule",this).call(this,$e);return $e==="toolbar"&&this.extendToolbar(be),be}},{key:"buildButtons",value:function($e,be){$e.forEach(function(He){var it=He.getAttribute("class")||"";it.split(/\s+/).forEach(function(ct){if(ct.startsWith("ql-")&&(ct=ct.slice(3),be[ct]!=null))if(ct==="direction")He.innerHTML=be[ct][""]+be[ct].rtl;else if(typeof be[ct]=="string")He.innerHTML=be[ct];else{var xt=He.value||"";xt!=null&&be[ct][xt]&&(He.innerHTML=be[ct][xt])}})})}},{key:"buildPickers",value:function($e,be){var He=this;this.pickers=$e.map(function(ct){if(ct.classList.contains("ql-align"))return ct.querySelector("option")==null&&ce(ct,ue),new D.default(ct,be.align);if(ct.classList.contains("ql-background")||ct.classList.contains("ql-color")){var xt=ct.classList.contains("ql-background")?"background":"color";return ct.querySelector("option")==null&&ce(ct,oe,xt==="background"?"#ffffff":"#000000"),new R.default(ct,be[xt])}else return ct.querySelector("option")==null&&(ct.classList.contains("ql-font")?ce(ct,we):ct.classList.contains("ql-header")?ce(ct,Ne):ct.classList.contains("ql-size")&&ce(ct,Be)),new q.default(ct)});var it=function(){He.pickers.forEach(function(xt){xt.update()})};this.quill.on(_.default.events.EDITOR_CHANGE,it)}}]),Ee}(N.default);De.DEFAULTS=(0,p.default)(!0,{},N.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var Ee=this,Ge=this.container.querySelector("input.ql-image[type=file]");Ge==null&&(Ge=document.createElement("input"),Ge.setAttribute("type","file"),Ge.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),Ge.classList.add("ql-image"),Ge.addEventListener("change",function(){if(Ge.files!=null&&Ge.files[0]!=null){var $e=new FileReader;$e.onload=function(be){var He=Ee.quill.getSelection(!0);Ee.quill.updateContents(new x.default().retain(He.index).delete(He.length).insert({image:be.target.result}),_.default.sources.USER),Ee.quill.setSelection(He.index+1,_.default.sources.SILENT),Ge.value=""},$e.readAsDataURL(Ge.files[0])}}),this.container.appendChild(Ge)),Ge.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var Ae=function(xe){ee(Ee,xe);function Ee(Ge,$e){Y(this,Ee);var be=X(this,(Ee.__proto__||Object.getPrototypeOf(Ee)).call(this,Ge,$e));return be.textbox=be.root.querySelector('input[type="text"]'),be.listen(),be}return o(Ee,[{key:"listen",value:function(){var $e=this;this.textbox.addEventListener("keydown",function(be){A.default.match(be,"enter")?($e.save(),be.preventDefault()):A.default.match(be,"escape")&&($e.cancel(),be.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var $e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),be!=null?this.textbox.value=be:$e!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+$e)||""),this.root.setAttribute("data-mode",$e)}},{key:"restoreFocus",value:function(){var $e=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=$e}},{key:"save",value:function(){var $e=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var be=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",$e,_.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",$e,_.default.sources.USER)),this.quill.root.scrollTop=be;break}case"video":$e=ve($e);case"formula":{if(!$e)break;var He=this.quill.getSelection(!0);if(He!=null){var it=He.index+He.length;this.quill.insertEmbed(it,this.root.getAttribute("data-mode"),$e,_.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(it+1," ",_.default.sources.USER),this.quill.setSelection(it+2,_.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),Ee}(H.default);function ve(xe){var Ee=xe.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||xe.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return Ee?(Ee[1]||"https")+"://www.youtube.com/embed/"+Ee[2]+"?showinfo=0":(Ee=xe.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(Ee[1]||"https")+"://player.vimeo.com/video/"+Ee[2]+"/":xe}function ce(xe,Ee){var Ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;Ee.forEach(function($e){var be=document.createElement("option");$e===Ge?be.setAttribute("selected","selected"):be.setAttribute("value",$e),xe.appendChild(be)})}r.BaseTooltip=Ae,r.default=De},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function u(){this.head=this.tail=null,this.length=0}return u.prototype.append=function(){for(var l=[],p=0;p<arguments.length;p++)l[p]=arguments[p];this.insertBefore(l[0],null),l.length>1&&this.append.apply(this,l.slice(1))},u.prototype.contains=function(l){for(var p,g=this.iterator();p=g();)if(p===l)return!0;return!1},u.prototype.insertBefore=function(l,p){l&&(l.next=p,p!=null?(l.prev=p.prev,p.prev!=null&&(p.prev.next=l),p.prev=l,p===this.head&&(this.head=l)):this.tail!=null?(this.tail.next=l,l.prev=this.tail,this.tail=l):(l.prev=null,this.head=this.tail=l),this.length+=1)},u.prototype.offset=function(l){for(var p=0,g=this.head;g!=null;){if(g===l)return p;p+=g.length(),g=g.next}return-1},u.prototype.remove=function(l){this.contains(l)&&(l.prev!=null&&(l.prev.next=l.next),l.next!=null&&(l.next.prev=l.prev),l===this.head&&(this.head=l.next),l===this.tail&&(this.tail=l.prev),this.length-=1)},u.prototype.iterator=function(l){return l===void 0&&(l=this.head),function(){var p=l;return l!=null&&(l=l.next),p}},u.prototype.find=function(l,p){p===void 0&&(p=!1);for(var g,x=this.iterator();g=x();){var y=g.length();if(l<y||p&&l===y&&(g.next==null||g.next.length()!==0))return[g,l];l-=y}return[null,0]},u.prototype.forEach=function(l){for(var p,g=this.iterator();p=g();)l(p)},u.prototype.forEachAt=function(l,p,g){if(!(p<=0))for(var x=this.find(l),y=x[0],_=x[1],T,A=l-_,O=this.iterator(y);(T=O())&&A<l+p;){var N=T.length();l>A?g(T,l-A,Math.min(p,A+N-l)):g(T,0,Math.min(N,l+p-A)),A+=N}},u.prototype.map=function(l){return this.reduce(function(p,g){return p.push(l(g)),p},[])},u.prototype.reduce=function(l,p){for(var g,x=this.iterator();g=x();)p=l(p,g);return p},u}();r.default=o},function(n,r,i){var o=this&&this.__extends||function(){var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,T){_.__proto__=T}||function(_,T){for(var A in T)T.hasOwnProperty(A)&&(_[A]=T[A])};return function(_,T){y(_,T);function A(){this.constructor=_}_.prototype=T===null?Object.create(T):(A.prototype=T.prototype,new A)}}();Object.defineProperty(r,"__esModule",{value:!0});var u=i(17),l=i(1),p={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},g=100,x=function(y){o(_,y);function _(T){var A=y.call(this,T)||this;return A.scroll=A,A.observer=new MutationObserver(function(O){A.update(O)}),A.observer.observe(A.domNode,p),A.attach(),A}return _.prototype.detach=function(){y.prototype.detach.call(this),this.observer.disconnect()},_.prototype.deleteAt=function(T,A){this.update(),T===0&&A===this.length()?this.children.forEach(function(O){O.remove()}):y.prototype.deleteAt.call(this,T,A)},_.prototype.formatAt=function(T,A,O,N){this.update(),y.prototype.formatAt.call(this,T,A,O,N)},_.prototype.insertAt=function(T,A,O){this.update(),y.prototype.insertAt.call(this,T,A,O)},_.prototype.optimize=function(T,A){var O=this;T===void 0&&(T=[]),A===void 0&&(A={}),y.prototype.optimize.call(this,A);for(var N=[].slice.call(this.observer.takeRecords());N.length>0;)T.push(N.pop());for(var k=function(U,q){q===void 0&&(q=!0),!(U==null||U===O)&&U.domNode.parentNode!=null&&(U.domNode[l.DATA_KEY].mutations==null&&(U.domNode[l.DATA_KEY].mutations=[]),q&&k(U.parent))},R=function(U){U.domNode[l.DATA_KEY]==null||U.domNode[l.DATA_KEY].mutations==null||(U instanceof u.default&&U.children.forEach(R),U.optimize(A))},z=T,D=0;z.length>0;D+=1){if(D>=g)throw new Error("[Parchment] Maximum optimize iterations reached");for(z.forEach(function(U){var q=l.find(U.target,!0);q!=null&&(q.domNode===U.target&&(U.type==="childList"?(k(l.find(U.previousSibling,!1)),[].forEach.call(U.addedNodes,function(G){var H=l.find(G,!1);k(H,!1),H instanceof u.default&&H.children.forEach(function(J){k(J,!1)})})):U.type==="attributes"&&k(q.prev)),k(q))}),this.children.forEach(R),z=[].slice.call(this.observer.takeRecords()),N=z.slice();N.length>0;)T.push(N.pop())}},_.prototype.update=function(T,A){var O=this;A===void 0&&(A={}),T=T||this.observer.takeRecords(),T.map(function(N){var k=l.find(N.target,!0);return k==null?null:k.domNode[l.DATA_KEY].mutations==null?(k.domNode[l.DATA_KEY].mutations=[N],k):(k.domNode[l.DATA_KEY].mutations.push(N),null)}).forEach(function(N){N==null||N===O||N.domNode[l.DATA_KEY]==null||N.update(N.domNode[l.DATA_KEY].mutations||[],A)}),this.domNode[l.DATA_KEY].mutations!=null&&y.prototype.update.call(this,this.domNode[l.DATA_KEY].mutations,A),this.optimize(T,A)},_.blotName="scroll",_.defaultChild="block",_.scope=l.Scope.BLOCK_BLOT,_.tagName="DIV",_}(u.default);r.default=x},function(n,r,i){var o=this&&this.__extends||function(){var x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,_){y.__proto__=_}||function(y,_){for(var T in _)_.hasOwnProperty(T)&&(y[T]=_[T])};return function(y,_){x(y,_);function T(){this.constructor=y}y.prototype=_===null?Object.create(_):(T.prototype=_.prototype,new T)}}();Object.defineProperty(r,"__esModule",{value:!0});var u=i(18),l=i(1);function p(x,y){if(Object.keys(x).length!==Object.keys(y).length)return!1;for(var _ in x)if(x[_]!==y[_])return!1;return!0}var g=function(x){o(y,x);function y(){return x!==null&&x.apply(this,arguments)||this}return y.formats=function(_){if(_.tagName!==y.tagName)return x.formats.call(this,_)},y.prototype.format=function(_,T){var A=this;_===this.statics.blotName&&!T?(this.children.forEach(function(O){O instanceof u.default||(O=O.wrap(y.blotName,!0)),A.attributes.copy(O)}),this.unwrap()):x.prototype.format.call(this,_,T)},y.prototype.formatAt=function(_,T,A,O){if(this.formats()[A]!=null||l.query(A,l.Scope.ATTRIBUTE)){var N=this.isolate(_,T);N.format(A,O)}else x.prototype.formatAt.call(this,_,T,A,O)},y.prototype.optimize=function(_){x.prototype.optimize.call(this,_);var T=this.formats();if(Object.keys(T).length===0)return this.unwrap();var A=this.next;A instanceof y&&A.prev===this&&p(T,A.formats())&&(A.moveChildren(this),A.remove())},y.blotName="inline",y.scope=l.Scope.INLINE_BLOT,y.tagName="SPAN",y}(u.default);r.default=g},function(n,r,i){var o=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,y){x.__proto__=y}||function(x,y){for(var _ in y)y.hasOwnProperty(_)&&(x[_]=y[_])};return function(x,y){g(x,y);function _(){this.constructor=x}x.prototype=y===null?Object.create(y):(_.prototype=y.prototype,new _)}}();Object.defineProperty(r,"__esModule",{value:!0});var u=i(18),l=i(1),p=function(g){o(x,g);function x(){return g!==null&&g.apply(this,arguments)||this}return x.formats=function(y){var _=l.query(x.blotName).tagName;if(y.tagName!==_)return g.formats.call(this,y)},x.prototype.format=function(y,_){l.query(y,l.Scope.BLOCK)!=null&&(y===this.statics.blotName&&!_?this.replaceWith(x.blotName):g.prototype.format.call(this,y,_))},x.prototype.formatAt=function(y,_,T,A){l.query(T,l.Scope.BLOCK)!=null?this.format(T,A):g.prototype.formatAt.call(this,y,_,T,A)},x.prototype.insertAt=function(y,_,T){if(T==null||l.query(_,l.Scope.INLINE)!=null)g.prototype.insertAt.call(this,y,_,T);else{var A=this.split(y),O=l.create(_,T);A.parent.insertBefore(O,A)}},x.prototype.update=function(y,_){navigator.userAgent.match(/Trident/)?this.build():g.prototype.update.call(this,y,_)},x.blotName="block",x.scope=l.Scope.BLOCK_BLOT,x.tagName="P",x}(u.default);r.default=p},function(n,r,i){var o=this&&this.__extends||function(){var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,x){g.__proto__=x}||function(g,x){for(var y in x)x.hasOwnProperty(y)&&(g[y]=x[y])};return function(g,x){p(g,x);function y(){this.constructor=g}g.prototype=x===null?Object.create(x):(y.prototype=x.prototype,new y)}}();Object.defineProperty(r,"__esModule",{value:!0});var u=i(19),l=function(p){o(g,p);function g(){return p!==null&&p.apply(this,arguments)||this}return g.formats=function(x){},g.prototype.format=function(x,y){p.prototype.formatAt.call(this,0,this.length(),x,y)},g.prototype.formatAt=function(x,y,_,T){x===0&&y===this.length()?this.format(_,T):p.prototype.formatAt.call(this,x,y,_,T)},g.prototype.formats=function(){return this.statics.formats(this.domNode)},g}(u.default);r.default=l},function(n,r,i){var o=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,y){x.__proto__=y}||function(x,y){for(var _ in y)y.hasOwnProperty(_)&&(x[_]=y[_])};return function(x,y){g(x,y);function _(){this.constructor=x}x.prototype=y===null?Object.create(y):(_.prototype=y.prototype,new _)}}();Object.defineProperty(r,"__esModule",{value:!0});var u=i(19),l=i(1),p=function(g){o(x,g);function x(y){var _=g.call(this,y)||this;return _.text=_.statics.value(_.domNode),_}return x.create=function(y){return document.createTextNode(y)},x.value=function(y){var _=y.data;return _.normalize&&(_=_.normalize()),_},x.prototype.deleteAt=function(y,_){this.domNode.data=this.text=this.text.slice(0,y)+this.text.slice(y+_)},x.prototype.index=function(y,_){return this.domNode===y?_:-1},x.prototype.insertAt=function(y,_,T){T==null?(this.text=this.text.slice(0,y)+_+this.text.slice(y),this.domNode.data=this.text):g.prototype.insertAt.call(this,y,_,T)},x.prototype.length=function(){return this.text.length},x.prototype.optimize=function(y){g.prototype.optimize.call(this,y),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof x&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},x.prototype.position=function(y,_){return[this.domNode,y]},x.prototype.split=function(y,_){if(_===void 0&&(_=!1),!_){if(y===0)return this;if(y===this.length())return this.next}var T=l.create(this.domNode.splitText(y));return this.parent.insertBefore(T,this.next),this.text=this.statics.value(this.domNode),T},x.prototype.update=function(y,_){var T=this;y.some(function(A){return A.type==="characterData"&&A.target===T.domNode})&&(this.text=this.statics.value(this.domNode))},x.prototype.value=function(){return this.text},x.blotName="text",x.scope=l.Scope.INLINE_BLOT,x}(u.default);r.default=p},function(n,r,i){var o=document.createElement("div");if(o.classList.toggle("test-class",!1),o.classList.contains("test-class")){var u=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(l,p){return arguments.length>1&&!this.contains(l)==!p?p:u.call(this,l)}}String.prototype.startsWith||(String.prototype.startsWith=function(l,p){return p=p||0,this.substr(p,l.length)===l}),String.prototype.endsWith||(String.prototype.endsWith=function(l,p){var g=this.toString();(typeof p!="number"||!isFinite(p)||Math.floor(p)!==p||p>g.length)&&(p=g.length),p-=l.length;var x=g.indexOf(l,p);return x!==-1&&x===p}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(p){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof p!="function")throw new TypeError("predicate must be a function");for(var g=Object(this),x=g.length>>>0,y=arguments[1],_,T=0;T<x;T++)if(_=g[T],p.call(y,_,T,g))return _}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(n,r){var i=-1,o=1,u=0;function l(D,U,q){if(D==U)return D?[[u,D]]:[];(q<0||D.length<q)&&(q=null);var G=y(D,U),H=D.substring(0,G);D=D.substring(G),U=U.substring(G),G=_(D,U);var J=D.substring(D.length-G);D=D.substring(0,D.length-G),U=U.substring(0,U.length-G);var Y=p(D,U);return H&&Y.unshift([u,H]),J&&Y.push([u,J]),A(Y),q!=null&&(Y=k(Y,q)),Y=R(Y),Y}function p(D,U){var q;if(!D)return[[o,U]];if(!U)return[[i,D]];var G=D.length>U.length?D:U,H=D.length>U.length?U:D,J=G.indexOf(H);if(J!=-1)return q=[[o,G.substring(0,J)],[u,H],[o,G.substring(J+H.length)]],D.length>U.length&&(q[0][0]=q[2][0]=i),q;if(H.length==1)return[[i,D],[o,U]];var Y=T(D,U);if(Y){var X=Y[0],ee=Y[1],ue=Y[2],oe=Y[3],we=Y[4],Ne=l(X,ue),Be=l(ee,oe);return Ne.concat([[u,we]],Be)}return g(D,U)}function g(D,U){for(var q=D.length,G=U.length,H=Math.ceil((q+G)/2),J=H,Y=2*H,X=new Array(Y),ee=new Array(Y),ue=0;ue<Y;ue++)X[ue]=-1,ee[ue]=-1;X[J+1]=0,ee[J+1]=0;for(var oe=q-G,we=oe%2!=0,Ne=0,Be=0,De=0,Ae=0,ve=0;ve<H;ve++){for(var ce=-ve+Ne;ce<=ve-Be;ce+=2){var xe=J+ce,Ee;ce==-ve||ce!=ve&&X[xe-1]<X[xe+1]?Ee=X[xe+1]:Ee=X[xe-1]+1;for(var Ge=Ee-ce;Ee<q&&Ge<G&&D.charAt(Ee)==U.charAt(Ge);)Ee++,Ge++;if(X[xe]=Ee,Ee>q)Be+=2;else if(Ge>G)Ne+=2;else if(we){var $e=J+oe-ce;if($e>=0&&$e<Y&&ee[$e]!=-1){var be=q-ee[$e];if(Ee>=be)return x(D,U,Ee,Ge)}}}for(var He=-ve+De;He<=ve-Ae;He+=2){var $e=J+He,be;He==-ve||He!=ve&&ee[$e-1]<ee[$e+1]?be=ee[$e+1]:be=ee[$e-1]+1;for(var it=be-He;be<q&&it<G&&D.charAt(q-be-1)==U.charAt(G-it-1);)be++,it++;if(ee[$e]=be,be>q)Ae+=2;else if(it>G)De+=2;else if(!we){var xe=J+oe-He;if(xe>=0&&xe<Y&&X[xe]!=-1){var Ee=X[xe],Ge=J+Ee-xe;if(be=q-be,Ee>=be)return x(D,U,Ee,Ge)}}}}return[[i,D],[o,U]]}function x(D,U,q,G){var H=D.substring(0,q),J=U.substring(0,G),Y=D.substring(q),X=U.substring(G),ee=l(H,J),ue=l(Y,X);return ee.concat(ue)}function y(D,U){if(!D||!U||D.charAt(0)!=U.charAt(0))return 0;for(var q=0,G=Math.min(D.length,U.length),H=G,J=0;q<H;)D.substring(J,H)==U.substring(J,H)?(q=H,J=q):G=H,H=Math.floor((G-q)/2+q);return H}function _(D,U){if(!D||!U||D.charAt(D.length-1)!=U.charAt(U.length-1))return 0;for(var q=0,G=Math.min(D.length,U.length),H=G,J=0;q<H;)D.substring(D.length-H,D.length-J)==U.substring(U.length-H,U.length-J)?(q=H,J=q):G=H,H=Math.floor((G-q)/2+q);return H}function T(D,U){var q=D.length>U.length?D:U,G=D.length>U.length?U:D;if(q.length<4||G.length*2<q.length)return null;function H(Be,De,Ae){for(var ve=Be.substring(Ae,Ae+Math.floor(Be.length/4)),ce=-1,xe="",Ee,Ge,$e,be;(ce=De.indexOf(ve,ce+1))!=-1;){var He=y(Be.substring(Ae),De.substring(ce)),it=_(Be.substring(0,Ae),De.substring(0,ce));xe.length<it+He&&(xe=De.substring(ce-it,ce)+De.substring(ce,ce+He),Ee=Be.substring(0,Ae-it),Ge=Be.substring(Ae+He),$e=De.substring(0,ce-it),be=De.substring(ce+He))}return xe.length*2>=Be.length?[Ee,Ge,$e,be,xe]:null}var J=H(q,G,Math.ceil(q.length/4)),Y=H(q,G,Math.ceil(q.length/2)),X;if(!J&&!Y)return null;Y?J?X=J[4].length>Y[4].length?J:Y:X=Y:X=J;var ee,ue,oe,we;D.length>U.length?(ee=X[0],ue=X[1],oe=X[2],we=X[3]):(oe=X[0],we=X[1],ee=X[2],ue=X[3]);var Ne=X[4];return[ee,ue,oe,we,Ne]}function A(D){D.push([u,""]);for(var U=0,q=0,G=0,H="",J="",Y;U<D.length;)switch(D[U][0]){case o:G++,J+=D[U][1],U++;break;case i:q++,H+=D[U][1],U++;break;case u:q+G>1?(q!==0&&G!==0&&(Y=y(J,H),Y!==0&&(U-q-G>0&&D[U-q-G-1][0]==u?D[U-q-G-1][1]+=J.substring(0,Y):(D.splice(0,0,[u,J.substring(0,Y)]),U++),J=J.substring(Y),H=H.substring(Y)),Y=_(J,H),Y!==0&&(D[U][1]=J.substring(J.length-Y)+D[U][1],J=J.substring(0,J.length-Y),H=H.substring(0,H.length-Y))),q===0?D.splice(U-G,q+G,[o,J]):G===0?D.splice(U-q,q+G,[i,H]):D.splice(U-q-G,q+G,[i,H],[o,J]),U=U-q-G+(q?1:0)+(G?1:0)+1):U!==0&&D[U-1][0]==u?(D[U-1][1]+=D[U][1],D.splice(U,1)):U++,G=0,q=0,H="",J="";break}D[D.length-1][1]===""&&D.pop();var X=!1;for(U=1;U<D.length-1;)D[U-1][0]==u&&D[U+1][0]==u&&(D[U][1].substring(D[U][1].length-D[U-1][1].length)==D[U-1][1]?(D[U][1]=D[U-1][1]+D[U][1].substring(0,D[U][1].length-D[U-1][1].length),D[U+1][1]=D[U-1][1]+D[U+1][1],D.splice(U-1,1),X=!0):D[U][1].substring(0,D[U+1][1].length)==D[U+1][1]&&(D[U-1][1]+=D[U+1][1],D[U][1]=D[U][1].substring(D[U+1][1].length)+D[U+1][1],D.splice(U+1,1),X=!0)),U++;X&&A(D)}var O=l;O.INSERT=o,O.DELETE=i,O.EQUAL=u,n.exports=O;function N(D,U){if(U===0)return[u,D];for(var q=0,G=0;G<D.length;G++){var H=D[G];if(H[0]===i||H[0]===u){var J=q+H[1].length;if(U===J)return[G+1,D];if(U<J){D=D.slice();var Y=U-q,X=[H[0],H[1].slice(0,Y)],ee=[H[0],H[1].slice(Y)];return D.splice(G,1,X,ee),[G+1,D]}else q=J}}throw new Error("cursor_pos is out of bounds!")}function k(D,U){var q=N(D,U),G=q[1],H=q[0],J=G[H],Y=G[H+1];if(J==null)return D;if(J[0]!==u)return D;if(Y!=null&&J[1]+Y[1]===Y[1]+J[1])return G.splice(H,2,Y,J),z(G,H,2);if(Y!=null&&Y[1].indexOf(J[1])===0){G.splice(H,2,[Y[0],J[1]],[0,J[1]]);var X=Y[1].slice(J[1].length);return X.length>0&&G.splice(H+2,0,[Y[0],X]),z(G,H,3)}else return D}function R(D){for(var U=!1,q=function(Y){return Y.charCodeAt(0)>=56320&&Y.charCodeAt(0)<=57343},G=function(Y){return Y.charCodeAt(Y.length-1)>=55296&&Y.charCodeAt(Y.length-1)<=56319},H=2;H<D.length;H+=1)D[H-2][0]===u&&G(D[H-2][1])&&D[H-1][0]===i&&q(D[H-1][1])&&D[H][0]===o&&q(D[H][1])&&(U=!0,D[H-1][1]=D[H-2][1].slice(-1)+D[H-1][1],D[H][1]=D[H-2][1].slice(-1)+D[H][1],D[H-2][1]=D[H-2][1].slice(0,-1));if(!U)return D;for(var J=[],H=0;H<D.length;H+=1)D[H][1].length>0&&J.push(D[H]);return J}function z(D,U,q){for(var G=U+q-1;G>=0&&G>=U-1;G--)if(G+1<D.length){var H=D[G],J=D[G+1];H[0]===J[1]&&D.splice(G,2,[H[0],H[1]+J[1]])}return D}},function(n,r){r=n.exports=typeof Object.keys=="function"?Object.keys:i,r.shim=i;function i(o){var u=[];for(var l in o)u.push(l);return u}},function(n,r){var i=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";r=n.exports=i?o:u,r.supported=o;function o(l){return Object.prototype.toString.call(l)=="[object Arguments]"}r.unsupported=u;function u(l){return l&&typeof l=="object"&&typeof l.length=="number"&&Object.prototype.hasOwnProperty.call(l,"callee")&&!Object.prototype.propertyIsEnumerable.call(l,"callee")||!1}},function(n,r){var i=Object.prototype.hasOwnProperty,o="~";function u(){}Object.create&&(u.prototype=Object.create(null),new u().__proto__||(o=!1));function l(g,x,y){this.fn=g,this.context=x,this.once=y||!1}function p(){this._events=new u,this._eventsCount=0}p.prototype.eventNames=function(){var x=[],y,_;if(this._eventsCount===0)return x;for(_ in y=this._events)i.call(y,_)&&x.push(o?_.slice(1):_);return Object.getOwnPropertySymbols?x.concat(Object.getOwnPropertySymbols(y)):x},p.prototype.listeners=function(x,y){var _=o?o+x:x,T=this._events[_];if(y)return!!T;if(!T)return[];if(T.fn)return[T.fn];for(var A=0,O=T.length,N=new Array(O);A<O;A++)N[A]=T[A].fn;return N},p.prototype.emit=function(x,y,_,T,A,O){var N=o?o+x:x;if(!this._events[N])return!1;var k=this._events[N],R=arguments.length,z,D;if(k.fn){switch(k.once&&this.removeListener(x,k.fn,void 0,!0),R){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,y),!0;case 3:return k.fn.call(k.context,y,_),!0;case 4:return k.fn.call(k.context,y,_,T),!0;case 5:return k.fn.call(k.context,y,_,T,A),!0;case 6:return k.fn.call(k.context,y,_,T,A,O),!0}for(D=1,z=new Array(R-1);D<R;D++)z[D-1]=arguments[D];k.fn.apply(k.context,z)}else{var U=k.length,q;for(D=0;D<U;D++)switch(k[D].once&&this.removeListener(x,k[D].fn,void 0,!0),R){case 1:k[D].fn.call(k[D].context);break;case 2:k[D].fn.call(k[D].context,y);break;case 3:k[D].fn.call(k[D].context,y,_);break;case 4:k[D].fn.call(k[D].context,y,_,T);break;default:if(!z)for(q=1,z=new Array(R-1);q<R;q++)z[q-1]=arguments[q];k[D].fn.apply(k[D].context,z)}}return!0},p.prototype.on=function(x,y,_){var T=new l(y,_||this),A=o?o+x:x;return this._events[A]?this._events[A].fn?this._events[A]=[this._events[A],T]:this._events[A].push(T):(this._events[A]=T,this._eventsCount++),this},p.prototype.once=function(x,y,_){var T=new l(y,_||this,!0),A=o?o+x:x;return this._events[A]?this._events[A].fn?this._events[A]=[this._events[A],T]:this._events[A].push(T):(this._events[A]=T,this._eventsCount++),this},p.prototype.removeListener=function(x,y,_,T){var A=o?o+x:x;if(!this._events[A])return this;if(!y)return--this._eventsCount===0?this._events=new u:delete this._events[A],this;var O=this._events[A];if(O.fn)O.fn===y&&(!T||O.once)&&(!_||O.context===_)&&(--this._eventsCount===0?this._events=new u:delete this._events[A]);else{for(var N=0,k=[],R=O.length;N<R;N++)(O[N].fn!==y||T&&!O[N].once||_&&O[N].context!==_)&&k.push(O[N]);k.length?this._events[A]=k.length===1?k[0]:k:--this._eventsCount===0?this._events=new u:delete this._events[A]}return this},p.prototype.removeAllListeners=function(x){var y;return x?(y=o?o+x:x,this._events[y]&&(--this._eventsCount===0?this._events=new u:delete this._events[y])):(this._events=new u,this._eventsCount=0),this},p.prototype.off=p.prototype.removeListener,p.prototype.addListener=p.prototype.on,p.prototype.setMaxListeners=function(){return this},p.prefixed=o,p.EventEmitter=p,typeof n<"u"&&(n.exports=p)},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.matchText=r.matchSpacing=r.matchNewline=r.matchBlot=r.matchAttributor=r.default=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(lt){return typeof lt}:function(lt){return lt&&typeof Symbol=="function"&&lt.constructor===Symbol&&lt!==Symbol.prototype?"symbol":typeof lt},u=function(){function lt(gt,_t){var Pt=[],je=!0,vt=!1,St=void 0;try{for(var Lt=gt[Symbol.iterator](),en;!(je=(en=Lt.next()).done)&&(Pt.push(en.value),!(_t&&Pt.length===_t));je=!0);}catch(wn){vt=!0,St=wn}finally{try{!je&&Lt.return&&Lt.return()}finally{if(vt)throw St}}return Pt}return function(gt,_t){if(Array.isArray(gt))return gt;if(Symbol.iterator in Object(gt))return lt(gt,_t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function lt(gt,_t){for(var Pt=0;Pt<_t.length;Pt++){var je=_t[Pt];je.enumerable=je.enumerable||!1,je.configurable=!0,"value"in je&&(je.writable=!0),Object.defineProperty(gt,je.key,je)}}return function(gt,_t,Pt){return _t&&lt(gt.prototype,_t),Pt&&lt(gt,Pt),gt}}(),p=i(3),g=ee(p),x=i(2),y=ee(x),_=i(0),T=ee(_),A=i(5),O=ee(A),N=i(10),k=ee(N),R=i(9),z=ee(R),D=i(36),U=i(37),q=i(13),G=ee(q),H=i(26),J=i(38),Y=i(39),X=i(40);function ee(lt){return lt&&lt.__esModule?lt:{default:lt}}function ue(lt,gt,_t){return gt in lt?Object.defineProperty(lt,gt,{value:_t,enumerable:!0,configurable:!0,writable:!0}):lt[gt]=_t,lt}function oe(lt,gt){if(!(lt instanceof gt))throw new TypeError("Cannot call a class as a function")}function we(lt,gt){if(!lt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return gt&&(typeof gt=="object"||typeof gt=="function")?gt:lt}function Ne(lt,gt){if(typeof gt!="function"&&gt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof gt);lt.prototype=Object.create(gt&&gt.prototype,{constructor:{value:lt,enumerable:!1,writable:!0,configurable:!0}}),gt&&(Object.setPrototypeOf?Object.setPrototypeOf(lt,gt):lt.__proto__=gt)}var Be=(0,k.default)("quill:clipboard"),De="__ql-matcher",Ae=[[Node.TEXT_NODE,rt],[Node.TEXT_NODE,Kt],["br",Dt],[Node.ELEMENT_NODE,Kt],[Node.ELEMENT_NODE,xt],[Node.ELEMENT_NODE,Gt],[Node.ELEMENT_NODE,ct],[Node.ELEMENT_NODE,Tr],["li",Ft],["b",it.bind(it,"bold")],["i",it.bind(it,"italic")],["style",Qt]],ve=[D.AlignAttribute,J.DirectionAttribute].reduce(function(lt,gt){return lt[gt.keyName]=gt,lt},{}),ce=[D.AlignStyle,U.BackgroundStyle,H.ColorStyle,J.DirectionStyle,Y.FontStyle,X.SizeStyle].reduce(function(lt,gt){return lt[gt.keyName]=gt,lt},{}),xe=function(lt){Ne(gt,lt);function gt(_t,Pt){oe(this,gt);var je=we(this,(gt.__proto__||Object.getPrototypeOf(gt)).call(this,_t,Pt));return je.quill.root.addEventListener("paste",je.onPaste.bind(je)),je.container=je.quill.addContainer("ql-clipboard"),je.container.setAttribute("contenteditable",!0),je.container.setAttribute("tabindex",-1),je.matchers=[],Ae.concat(je.options.matchers).forEach(function(vt){var St=u(vt,2),Lt=St[0],en=St[1];!Pt.matchVisual&&en===Gt||je.addMatcher(Lt,en)}),je}return l(gt,[{key:"addMatcher",value:function(Pt,je){this.matchers.push([Pt,je])}},{key:"convert",value:function(Pt){if(typeof Pt=="string")return this.container.innerHTML=Pt.replace(/\>\r?\n +\</g,"><"),this.convert();var je=this.quill.getFormat(this.quill.selection.savedRange.index);if(je[G.default.blotName]){var vt=this.container.innerText;return this.container.innerHTML="",new y.default().insert(vt,ue({},G.default.blotName,je[G.default.blotName]))}var St=this.prepareMatching(),Lt=u(St,2),en=Lt[0],wn=Lt[1],gn=He(this.container,en,wn);return $e(gn,`
`)&&gn.ops[gn.ops.length-1].attributes==null&&(gn=gn.compose(new y.default().retain(gn.length()-1).delete(1))),Be.log("convert",this.container.innerHTML,gn),this.container.innerHTML="",gn}},{key:"dangerouslyPasteHTML",value:function(Pt,je){var vt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:O.default.sources.API;if(typeof Pt=="string")this.quill.setContents(this.convert(Pt),je),this.quill.setSelection(0,O.default.sources.SILENT);else{var St=this.convert(je);this.quill.updateContents(new y.default().retain(Pt).concat(St),vt),this.quill.setSelection(Pt+St.length(),O.default.sources.SILENT)}}},{key:"onPaste",value:function(Pt){var je=this;if(!(Pt.defaultPrevented||!this.quill.isEnabled())){var vt=this.quill.getSelection(),St=new y.default().retain(vt.index),Lt=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(O.default.sources.SILENT),setTimeout(function(){St=St.concat(je.convert()).delete(vt.length),je.quill.updateContents(St,O.default.sources.USER),je.quill.setSelection(St.length()-vt.length,O.default.sources.SILENT),je.quill.scrollingContainer.scrollTop=Lt,je.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var Pt=this,je=[],vt=[];return this.matchers.forEach(function(St){var Lt=u(St,2),en=Lt[0],wn=Lt[1];switch(en){case Node.TEXT_NODE:vt.push(wn);break;case Node.ELEMENT_NODE:je.push(wn);break;default:[].forEach.call(Pt.container.querySelectorAll(en),function(gn){gn[De]=gn[De]||[],gn[De].push(wn)});break}}),[je,vt]}}]),gt}(z.default);xe.DEFAULTS={matchers:[],matchVisual:!0};function Ee(lt,gt,_t){return(typeof gt>"u"?"undefined":o(gt))==="object"?Object.keys(gt).reduce(function(Pt,je){return Ee(Pt,je,gt[je])},lt):lt.reduce(function(Pt,je){return je.attributes&&je.attributes[gt]?Pt.push(je):Pt.insert(je.insert,(0,g.default)({},ue({},gt,_t),je.attributes))},new y.default)}function Ge(lt){if(lt.nodeType!==Node.ELEMENT_NODE)return{};var gt="__ql-computed-style";return lt[gt]||(lt[gt]=window.getComputedStyle(lt))}function $e(lt,gt){for(var _t="",Pt=lt.ops.length-1;Pt>=0&&_t.length<gt.length;--Pt){var je=lt.ops[Pt];if(typeof je.insert!="string")break;_t=je.insert+_t}return _t.slice(-1*gt.length)===gt}function be(lt){if(lt.childNodes.length===0)return!1;var gt=Ge(lt);return["block","list-item"].indexOf(gt.display)>-1}function He(lt,gt,_t){return lt.nodeType===lt.TEXT_NODE?_t.reduce(function(Pt,je){return je(lt,Pt)},new y.default):lt.nodeType===lt.ELEMENT_NODE?[].reduce.call(lt.childNodes||[],function(Pt,je){var vt=He(je,gt,_t);return je.nodeType===lt.ELEMENT_NODE&&(vt=gt.reduce(function(St,Lt){return Lt(je,St)},vt),vt=(je[De]||[]).reduce(function(St,Lt){return Lt(je,St)},vt)),Pt.concat(vt)},new y.default):new y.default}function it(lt,gt,_t){return Ee(_t,lt,!0)}function ct(lt,gt){var _t=T.default.Attributor.Attribute.keys(lt),Pt=T.default.Attributor.Class.keys(lt),je=T.default.Attributor.Style.keys(lt),vt={};return _t.concat(Pt).concat(je).forEach(function(St){var Lt=T.default.query(St,T.default.Scope.ATTRIBUTE);Lt!=null&&(vt[Lt.attrName]=Lt.value(lt),vt[Lt.attrName])||(Lt=ve[St],Lt!=null&&(Lt.attrName===St||Lt.keyName===St)&&(vt[Lt.attrName]=Lt.value(lt)||void 0),Lt=ce[St],Lt!=null&&(Lt.attrName===St||Lt.keyName===St)&&(Lt=ce[St],vt[Lt.attrName]=Lt.value(lt)||void 0))}),Object.keys(vt).length>0&&(gt=Ee(gt,vt)),gt}function xt(lt,gt){var _t=T.default.query(lt);if(_t==null)return gt;if(_t.prototype instanceof T.default.Embed){var Pt={},je=_t.value(lt);je!=null&&(Pt[_t.blotName]=je,gt=new y.default().insert(Pt,_t.formats(lt)))}else typeof _t.formats=="function"&&(gt=Ee(gt,_t.blotName,_t.formats(lt)));return gt}function Dt(lt,gt){return $e(gt,`
`)||gt.insert(`
`),gt}function Qt(){return new y.default}function Ft(lt,gt){var _t=T.default.query(lt);if(_t==null||_t.blotName!=="list-item"||!$e(gt,`
`))return gt;for(var Pt=-1,je=lt.parentNode;!je.classList.contains("ql-clipboard");)(T.default.query(je)||{}).blotName==="list"&&(Pt+=1),je=je.parentNode;return Pt<=0?gt:gt.compose(new y.default().retain(gt.length()-1).retain(1,{indent:Pt}))}function Kt(lt,gt){return $e(gt,`
`)||(be(lt)||gt.length()>0&&lt.nextSibling&&be(lt.nextSibling))&&gt.insert(`
`),gt}function Gt(lt,gt){if(be(lt)&&lt.nextElementSibling!=null&&!$e(gt,`

`)){var _t=lt.offsetHeight+parseFloat(Ge(lt).marginTop)+parseFloat(Ge(lt).marginBottom);lt.nextElementSibling.offsetTop>lt.offsetTop+_t*1.5&&gt.insert(`
`)}return gt}function Tr(lt,gt){var _t={},Pt=lt.style||{};return Pt.fontStyle&&Ge(lt).fontStyle==="italic"&&(_t.italic=!0),Pt.fontWeight&&(Ge(lt).fontWeight.startsWith("bold")||parseInt(Ge(lt).fontWeight)>=700)&&(_t.bold=!0),Object.keys(_t).length>0&&(gt=Ee(gt,_t)),parseFloat(Pt.textIndent||0)>0&&(gt=new y.default().insert("	").concat(gt)),gt}function rt(lt,gt){var _t=lt.data;if(lt.parentNode.tagName==="O:P")return gt.insert(_t.trim());if(_t.trim().length===0&&lt.parentNode.classList.contains("ql-clipboard"))return gt;if(!Ge(lt.parentNode).whiteSpace.startsWith("pre")){var Pt=function(vt,St){return St=St.replace(/[^\u00a0]/g,""),St.length<1&&vt?" ":St};_t=_t.replace(/\r\n/g," ").replace(/\n/g," "),_t=_t.replace(/\s\s+/g,Pt.bind(Pt,!0)),(lt.previousSibling==null&&be(lt.parentNode)||lt.previousSibling!=null&&be(lt.previousSibling))&&(_t=_t.replace(/^\s+/,Pt.bind(Pt,!1))),(lt.nextSibling==null&&be(lt.parentNode)||lt.nextSibling!=null&&be(lt.nextSibling))&&(_t=_t.replace(/\s+$/,Pt.bind(Pt,!1)))}return gt.insert(_t)}r.default=xe,r.matchAttributor=ct,r.matchBlot=xt,r.matchNewline=Kt,r.matchSpacing=Gt,r.matchText=rt},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function A(O,N){for(var k=0;k<N.length;k++){var R=N[k];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(O,R.key,R)}}return function(O,N,k){return N&&A(O.prototype,N),k&&A(O,k),O}}(),u=function A(O,N,k){O===null&&(O=Function.prototype);var R=Object.getOwnPropertyDescriptor(O,N);if(R===void 0){var z=Object.getPrototypeOf(O);return z===null?void 0:A(z,N,k)}else{if("value"in R)return R.value;var D=R.get;return D===void 0?void 0:D.call(k)}},l=i(6),p=g(l);function g(A){return A&&A.__esModule?A:{default:A}}function x(A,O){if(!(A instanceof O))throw new TypeError("Cannot call a class as a function")}function y(A,O){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:A}function _(A,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);A.prototype=Object.create(O&&O.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(A,O):A.__proto__=O)}var T=function(A){_(O,A);function O(){return x(this,O),y(this,(O.__proto__||Object.getPrototypeOf(O)).apply(this,arguments))}return o(O,[{key:"optimize",value:function(k){u(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"optimize",this).call(this,k),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return u(O.__proto__||Object.getPrototypeOf(O),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),O}(p.default);T.blotName="bold",T.tagName=["STRONG","B"],r.default=T},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.addControls=r.default=void 0;var o=function(){function X(ee,ue){var oe=[],we=!0,Ne=!1,Be=void 0;try{for(var De=ee[Symbol.iterator](),Ae;!(we=(Ae=De.next()).done)&&(oe.push(Ae.value),!(ue&&oe.length===ue));we=!0);}catch(ve){Ne=!0,Be=ve}finally{try{!we&&De.return&&De.return()}finally{if(Ne)throw Be}}return oe}return function(ee,ue){if(Array.isArray(ee))return ee;if(Symbol.iterator in Object(ee))return X(ee,ue);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function X(ee,ue){for(var oe=0;oe<ue.length;oe++){var we=ue[oe];we.enumerable=we.enumerable||!1,we.configurable=!0,"value"in we&&(we.writable=!0),Object.defineProperty(ee,we.key,we)}}return function(ee,ue,oe){return ue&&X(ee.prototype,ue),oe&&X(ee,oe),ee}}(),l=i(2),p=k(l),g=i(0),x=k(g),y=i(5),_=k(y),T=i(10),A=k(T),O=i(9),N=k(O);function k(X){return X&&X.__esModule?X:{default:X}}function R(X,ee,ue){return ee in X?Object.defineProperty(X,ee,{value:ue,enumerable:!0,configurable:!0,writable:!0}):X[ee]=ue,X}function z(X,ee){if(!(X instanceof ee))throw new TypeError("Cannot call a class as a function")}function D(X,ee){if(!X)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ee&&(typeof ee=="object"||typeof ee=="function")?ee:X}function U(X,ee){if(typeof ee!="function"&&ee!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ee);X.prototype=Object.create(ee&&ee.prototype,{constructor:{value:X,enumerable:!1,writable:!0,configurable:!0}}),ee&&(Object.setPrototypeOf?Object.setPrototypeOf(X,ee):X.__proto__=ee)}var q=(0,A.default)("quill:toolbar"),G=function(X){U(ee,X);function ee(ue,oe){z(this,ee);var we=D(this,(ee.__proto__||Object.getPrototypeOf(ee)).call(this,ue,oe));if(Array.isArray(we.options.container)){var Ne=document.createElement("div");J(Ne,we.options.container),ue.container.parentNode.insertBefore(Ne,ue.container),we.container=Ne}else typeof we.options.container=="string"?we.container=document.querySelector(we.options.container):we.container=we.options.container;if(!(we.container instanceof HTMLElement)){var Be;return Be=q.error("Container required for toolbar",we.options),D(we,Be)}return we.container.classList.add("ql-toolbar"),we.controls=[],we.handlers={},Object.keys(we.options.handlers).forEach(function(De){we.addHandler(De,we.options.handlers[De])}),[].forEach.call(we.container.querySelectorAll("button, select"),function(De){we.attach(De)}),we.quill.on(_.default.events.EDITOR_CHANGE,function(De,Ae){De===_.default.events.SELECTION_CHANGE&&we.update(Ae)}),we.quill.on(_.default.events.SCROLL_OPTIMIZE,function(){var De=we.quill.selection.getRange(),Ae=o(De,1),ve=Ae[0];we.update(ve)}),we}return u(ee,[{key:"addHandler",value:function(oe,we){this.handlers[oe]=we}},{key:"attach",value:function(oe){var we=this,Ne=[].find.call(oe.classList,function(De){return De.indexOf("ql-")===0});if(Ne){if(Ne=Ne.slice(3),oe.tagName==="BUTTON"&&oe.setAttribute("type","button"),this.handlers[Ne]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[Ne]==null){q.warn("ignoring attaching to disabled format",Ne,oe);return}if(x.default.query(Ne)==null){q.warn("ignoring attaching to nonexistent format",Ne,oe);return}}var Be=oe.tagName==="SELECT"?"change":"click";oe.addEventListener(Be,function(De){var Ae=void 0;if(oe.tagName==="SELECT"){if(oe.selectedIndex<0)return;var ve=oe.options[oe.selectedIndex];ve.hasAttribute("selected")?Ae=!1:Ae=ve.value||!1}else oe.classList.contains("ql-active")?Ae=!1:Ae=oe.value||!oe.hasAttribute("value"),De.preventDefault();we.quill.focus();var ce=we.quill.selection.getRange(),xe=o(ce,1),Ee=xe[0];if(we.handlers[Ne]!=null)we.handlers[Ne].call(we,Ae);else if(x.default.query(Ne).prototype instanceof x.default.Embed){if(Ae=prompt("Enter "+Ne),!Ae)return;we.quill.updateContents(new p.default().retain(Ee.index).delete(Ee.length).insert(R({},Ne,Ae)),_.default.sources.USER)}else we.quill.format(Ne,Ae,_.default.sources.USER);we.update(Ee)}),this.controls.push([Ne,oe])}}},{key:"update",value:function(oe){var we=oe==null?{}:this.quill.getFormat(oe);this.controls.forEach(function(Ne){var Be=o(Ne,2),De=Be[0],Ae=Be[1];if(Ae.tagName==="SELECT"){var ve=void 0;if(oe==null)ve=null;else if(we[De]==null)ve=Ae.querySelector("option[selected]");else if(!Array.isArray(we[De])){var ce=we[De];typeof ce=="string"&&(ce=ce.replace(/\"/g,'\\"')),ve=Ae.querySelector('option[value="'+ce+'"]')}ve==null?(Ae.value="",Ae.selectedIndex=-1):ve.selected=!0}else if(oe==null)Ae.classList.remove("ql-active");else if(Ae.hasAttribute("value")){var xe=we[De]===Ae.getAttribute("value")||we[De]!=null&&we[De].toString()===Ae.getAttribute("value")||we[De]==null&&!Ae.getAttribute("value");Ae.classList.toggle("ql-active",xe)}else Ae.classList.toggle("ql-active",we[De]!=null)})}}]),ee}(N.default);G.DEFAULTS={};function H(X,ee,ue){var oe=document.createElement("button");oe.setAttribute("type","button"),oe.classList.add("ql-"+ee),ue!=null&&(oe.value=ue),X.appendChild(oe)}function J(X,ee){Array.isArray(ee[0])||(ee=[ee]),ee.forEach(function(ue){var oe=document.createElement("span");oe.classList.add("ql-formats"),ue.forEach(function(we){if(typeof we=="string")H(oe,we);else{var Ne=Object.keys(we)[0],Be=we[Ne];Array.isArray(Be)?Y(oe,Ne,Be):H(oe,Ne,Be)}}),X.appendChild(oe)})}function Y(X,ee,ue){var oe=document.createElement("select");oe.classList.add("ql-"+ee),ue.forEach(function(we){var Ne=document.createElement("option");we!==!1?Ne.setAttribute("value",we):Ne.setAttribute("selected","selected"),oe.appendChild(Ne)}),X.appendChild(oe)}G.DEFAULTS={container:null,handlers:{clean:function(){var ee=this,ue=this.quill.getSelection();if(ue!=null)if(ue.length==0){var oe=this.quill.getFormat();Object.keys(oe).forEach(function(we){x.default.query(we,x.default.Scope.INLINE)!=null&&ee.quill.format(we,!1)})}else this.quill.removeFormat(ue,_.default.sources.USER)},direction:function(ee){var ue=this.quill.getFormat().align;ee==="rtl"&&ue==null?this.quill.format("align","right",_.default.sources.USER):!ee&&ue==="right"&&this.quill.format("align",!1,_.default.sources.USER),this.quill.format("direction",ee,_.default.sources.USER)},indent:function(ee){var ue=this.quill.getSelection(),oe=this.quill.getFormat(ue),we=parseInt(oe.indent||0);if(ee==="+1"||ee==="-1"){var Ne=ee==="+1"?1:-1;oe.direction==="rtl"&&(Ne*=-1),this.quill.format("indent",we+Ne,_.default.sources.USER)}},link:function(ee){ee===!0&&(ee=prompt("Enter link URL:")),this.quill.format("link",ee,_.default.sources.USER)},list:function(ee){var ue=this.quill.getSelection(),oe=this.quill.getFormat(ue);ee==="check"?oe.list==="checked"||oe.list==="unchecked"?this.quill.format("list",!1,_.default.sources.USER):this.quill.format("list","unchecked",_.default.sources.USER):this.quill.format("list",ee,_.default.sources.USER)}}},r.default=G,r.addControls=J},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function A(O,N){for(var k=0;k<N.length;k++){var R=N[k];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(O,R.key,R)}}return function(O,N,k){return N&&A(O.prototype,N),k&&A(O,k),O}}(),u=function A(O,N,k){O===null&&(O=Function.prototype);var R=Object.getOwnPropertyDescriptor(O,N);if(R===void 0){var z=Object.getPrototypeOf(O);return z===null?void 0:A(z,N,k)}else{if("value"in R)return R.value;var D=R.get;return D===void 0?void 0:D.call(k)}},l=i(28),p=g(l);function g(A){return A&&A.__esModule?A:{default:A}}function x(A,O){if(!(A instanceof O))throw new TypeError("Cannot call a class as a function")}function y(A,O){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:A}function _(A,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);A.prototype=Object.create(O&&O.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(A,O):A.__proto__=O)}var T=function(A){_(O,A);function O(N,k){x(this,O);var R=y(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,N));return R.label.innerHTML=k,R.container.classList.add("ql-color-picker"),[].slice.call(R.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(z){z.classList.add("ql-primary")}),R}return o(O,[{key:"buildItem",value:function(k){var R=u(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"buildItem",this).call(this,k);return R.style.backgroundColor=k.getAttribute("value")||"",R}},{key:"selectItem",value:function(k,R){u(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"selectItem",this).call(this,k,R);var z=this.label.querySelector(".ql-color-label"),D=k&&k.getAttribute("data-value")||"";z&&(z.tagName==="line"?z.style.stroke=D:z.style.fill=D)}}]),O}(p.default);r.default=T},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function A(O,N){for(var k=0;k<N.length;k++){var R=N[k];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(O,R.key,R)}}return function(O,N,k){return N&&A(O.prototype,N),k&&A(O,k),O}}(),u=function A(O,N,k){O===null&&(O=Function.prototype);var R=Object.getOwnPropertyDescriptor(O,N);if(R===void 0){var z=Object.getPrototypeOf(O);return z===null?void 0:A(z,N,k)}else{if("value"in R)return R.value;var D=R.get;return D===void 0?void 0:D.call(k)}},l=i(28),p=g(l);function g(A){return A&&A.__esModule?A:{default:A}}function x(A,O){if(!(A instanceof O))throw new TypeError("Cannot call a class as a function")}function y(A,O){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:A}function _(A,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);A.prototype=Object.create(O&&O.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(A,O):A.__proto__=O)}var T=function(A){_(O,A);function O(N,k){x(this,O);var R=y(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,N));return R.container.classList.add("ql-icon-picker"),[].forEach.call(R.container.querySelectorAll(".ql-picker-item"),function(z){z.innerHTML=k[z.getAttribute("data-value")||""]}),R.defaultItem=R.container.querySelector(".ql-selected"),R.selectItem(R.defaultItem),R}return o(O,[{key:"selectItem",value:function(k,R){u(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"selectItem",this).call(this,k,R),k=k||this.defaultItem,this.label.innerHTML=k.innerHTML}}]),O}(p.default);r.default=T},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function p(g,x){for(var y=0;y<x.length;y++){var _=x[y];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(g,_.key,_)}}return function(g,x,y){return x&&p(g.prototype,x),y&&p(g,y),g}}();function u(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}var l=function(){function p(g,x){var y=this;u(this,p),this.quill=g,this.boundsContainer=x||document.body,this.root=g.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){y.root.style.marginTop=-1*y.quill.root.scrollTop+"px"}),this.hide()}return o(p,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(x){var y=x.left+x.width/2-this.root.offsetWidth/2,_=x.bottom+this.quill.root.scrollTop;this.root.style.left=y+"px",this.root.style.top=_+"px",this.root.classList.remove("ql-flip");var T=this.boundsContainer.getBoundingClientRect(),A=this.root.getBoundingClientRect(),O=0;if(A.right>T.right&&(O=T.right-A.right,this.root.style.left=y+O+"px"),A.left<T.left&&(O=T.left-A.left,this.root.style.left=y+O+"px"),A.bottom>T.bottom){var N=A.bottom-A.top,k=x.bottom-x.top+N;this.root.style.top=_-k+"px",this.root.classList.add("ql-flip")}return O}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),p}();r.default=l},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function Y(X,ee){var ue=[],oe=!0,we=!1,Ne=void 0;try{for(var Be=X[Symbol.iterator](),De;!(oe=(De=Be.next()).done)&&(ue.push(De.value),!(ee&&ue.length===ee));oe=!0);}catch(Ae){we=!0,Ne=Ae}finally{try{!oe&&Be.return&&Be.return()}finally{if(we)throw Ne}}return ue}return function(X,ee){if(Array.isArray(X))return X;if(Symbol.iterator in Object(X))return Y(X,ee);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function Y(X,ee,ue){X===null&&(X=Function.prototype);var oe=Object.getOwnPropertyDescriptor(X,ee);if(oe===void 0){var we=Object.getPrototypeOf(X);return we===null?void 0:Y(we,ee,ue)}else{if("value"in oe)return oe.value;var Ne=oe.get;return Ne===void 0?void 0:Ne.call(ue)}},l=function(){function Y(X,ee){for(var ue=0;ue<ee.length;ue++){var oe=ee[ue];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(X,oe.key,oe)}}return function(X,ee,ue){return ee&&Y(X.prototype,ee),ue&&Y(X,ue),X}}(),p=i(3),g=z(p),x=i(8),y=z(x),_=i(43),T=z(_),A=i(27),O=z(A),N=i(15),k=i(41),R=z(k);function z(Y){return Y&&Y.__esModule?Y:{default:Y}}function D(Y,X){if(!(Y instanceof X))throw new TypeError("Cannot call a class as a function")}function U(Y,X){if(!Y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return X&&(typeof X=="object"||typeof X=="function")?X:Y}function q(Y,X){if(typeof X!="function"&&X!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof X);Y.prototype=Object.create(X&&X.prototype,{constructor:{value:Y,enumerable:!1,writable:!0,configurable:!0}}),X&&(Object.setPrototypeOf?Object.setPrototypeOf(Y,X):Y.__proto__=X)}var G=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],H=function(Y){q(X,Y);function X(ee,ue){D(this,X),ue.modules.toolbar!=null&&ue.modules.toolbar.container==null&&(ue.modules.toolbar.container=G);var oe=U(this,(X.__proto__||Object.getPrototypeOf(X)).call(this,ee,ue));return oe.quill.container.classList.add("ql-snow"),oe}return l(X,[{key:"extendToolbar",value:function(ue){ue.container.classList.add("ql-snow"),this.buildButtons([].slice.call(ue.container.querySelectorAll("button")),R.default),this.buildPickers([].slice.call(ue.container.querySelectorAll("select")),R.default),this.tooltip=new J(this.quill,this.options.bounds),ue.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(oe,we){ue.handlers.link.call(ue,!we.format.link)})}}]),X}(T.default);H.DEFAULTS=(0,g.default)(!0,{},T.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(X){if(X){var ee=this.quill.getSelection();if(ee==null||ee.length==0)return;var ue=this.quill.getText(ee);/^\S+@\S+\.\S+$/.test(ue)&&ue.indexOf("mailto:")!==0&&(ue="mailto:"+ue);var oe=this.quill.theme.tooltip;oe.edit("link",ue)}else this.quill.format("link",!1)}}}}});var J=function(Y){q(X,Y);function X(ee,ue){D(this,X);var oe=U(this,(X.__proto__||Object.getPrototypeOf(X)).call(this,ee,ue));return oe.preview=oe.root.querySelector("a.ql-preview"),oe}return l(X,[{key:"listen",value:function(){var ue=this;u(X.prototype.__proto__||Object.getPrototypeOf(X.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(oe){ue.root.classList.contains("ql-editing")?ue.save():ue.edit("link",ue.preview.textContent),oe.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(oe){if(ue.linkRange!=null){var we=ue.linkRange;ue.restoreFocus(),ue.quill.formatText(we,"link",!1,y.default.sources.USER),delete ue.linkRange}oe.preventDefault(),ue.hide()}),this.quill.on(y.default.events.SELECTION_CHANGE,function(oe,we,Ne){if(oe!=null){if(oe.length===0&&Ne===y.default.sources.USER){var Be=ue.quill.scroll.descendant(O.default,oe.index),De=o(Be,2),Ae=De[0],ve=De[1];if(Ae!=null){ue.linkRange=new N.Range(oe.index-ve,Ae.length());var ce=O.default.formats(Ae.domNode);ue.preview.textContent=ce,ue.preview.setAttribute("href",ce),ue.show(),ue.position(ue.quill.getBounds(ue.linkRange));return}}else delete ue.linkRange;ue.hide()}})}},{key:"show",value:function(){u(X.prototype.__proto__||Object.getPrototypeOf(X.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),X}(_.BaseTooltip);J.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),r.default=H},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(29),u=je(o),l=i(36),p=i(38),g=i(64),x=i(65),y=je(x),_=i(66),T=je(_),A=i(67),O=je(A),N=i(37),k=i(26),R=i(39),z=i(40),D=i(56),U=je(D),q=i(68),G=je(q),H=i(27),J=je(H),Y=i(69),X=je(Y),ee=i(70),ue=je(ee),oe=i(71),we=je(oe),Ne=i(72),Be=je(Ne),De=i(73),Ae=je(De),ve=i(13),ce=je(ve),xe=i(74),Ee=je(xe),Ge=i(75),$e=je(Ge),be=i(57),He=je(be),it=i(41),ct=je(it),xt=i(28),Dt=je(xt),Qt=i(59),Ft=je(Qt),Kt=i(60),Gt=je(Kt),Tr=i(61),rt=je(Tr),lt=i(108),gt=je(lt),_t=i(62),Pt=je(_t);function je(vt){return vt&&vt.__esModule?vt:{default:vt}}u.default.register({"attributors/attribute/direction":p.DirectionAttribute,"attributors/class/align":l.AlignClass,"attributors/class/background":N.BackgroundClass,"attributors/class/color":k.ColorClass,"attributors/class/direction":p.DirectionClass,"attributors/class/font":R.FontClass,"attributors/class/size":z.SizeClass,"attributors/style/align":l.AlignStyle,"attributors/style/background":N.BackgroundStyle,"attributors/style/color":k.ColorStyle,"attributors/style/direction":p.DirectionStyle,"attributors/style/font":R.FontStyle,"attributors/style/size":z.SizeStyle},!0),u.default.register({"formats/align":l.AlignClass,"formats/direction":p.DirectionClass,"formats/indent":g.IndentClass,"formats/background":N.BackgroundStyle,"formats/color":k.ColorStyle,"formats/font":R.FontClass,"formats/size":z.SizeClass,"formats/blockquote":y.default,"formats/code-block":ce.default,"formats/header":T.default,"formats/list":O.default,"formats/bold":U.default,"formats/code":ve.Code,"formats/italic":G.default,"formats/link":J.default,"formats/script":X.default,"formats/strike":ue.default,"formats/underline":we.default,"formats/image":Be.default,"formats/video":Ae.default,"formats/list/item":A.ListItem,"modules/formula":Ee.default,"modules/syntax":$e.default,"modules/toolbar":He.default,"themes/bubble":gt.default,"themes/snow":Pt.default,"ui/icons":ct.default,"ui/picker":Dt.default,"ui/icon-picker":Gt.default,"ui/color-picker":Ft.default,"ui/tooltip":rt.default},!0),r.default=u.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.IndentClass=void 0;var o=function(){function O(N,k){for(var R=0;R<k.length;R++){var z=k[R];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(N,z.key,z)}}return function(N,k,R){return k&&O(N.prototype,k),R&&O(N,R),N}}(),u=function O(N,k,R){N===null&&(N=Function.prototype);var z=Object.getOwnPropertyDescriptor(N,k);if(z===void 0){var D=Object.getPrototypeOf(N);return D===null?void 0:O(D,k,R)}else{if("value"in z)return z.value;var U=z.get;return U===void 0?void 0:U.call(R)}},l=i(0),p=g(l);function g(O){return O&&O.__esModule?O:{default:O}}function x(O,N){if(!(O instanceof N))throw new TypeError("Cannot call a class as a function")}function y(O,N){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:O}function _(O,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);O.prototype=Object.create(N&&N.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(O,N):O.__proto__=N)}var T=function(O){_(N,O);function N(){return x(this,N),y(this,(N.__proto__||Object.getPrototypeOf(N)).apply(this,arguments))}return o(N,[{key:"add",value:function(R,z){if(z==="+1"||z==="-1"){var D=this.value(R)||0;z=z==="+1"?D+1:D-1}return z===0?(this.remove(R),!0):u(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"add",this).call(this,R,z)}},{key:"canAdd",value:function(R,z){return u(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"canAdd",this).call(this,R,z)||u(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"canAdd",this).call(this,R,parseInt(z))}},{key:"value",value:function(R){return parseInt(u(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"value",this).call(this,R))||void 0}}]),N}(p.default.Attributor.Class),A=new T("indent","ql-indent",{scope:p.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});r.IndentClass=A},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(4),u=l(o);function l(_){return _&&_.__esModule?_:{default:_}}function p(_,T){if(!(_ instanceof T))throw new TypeError("Cannot call a class as a function")}function g(_,T){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:_}function x(_,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);_.prototype=Object.create(T&&T.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(_,T):_.__proto__=T)}var y=function(_){x(T,_);function T(){return p(this,T),g(this,(T.__proto__||Object.getPrototypeOf(T)).apply(this,arguments))}return T}(u.default);y.blotName="blockquote",y.tagName="blockquote",r.default=y},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function T(A,O){for(var N=0;N<O.length;N++){var k=O[N];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(A,k.key,k)}}return function(A,O,N){return O&&T(A.prototype,O),N&&T(A,N),A}}(),u=i(4),l=p(u);function p(T){return T&&T.__esModule?T:{default:T}}function g(T,A){if(!(T instanceof A))throw new TypeError("Cannot call a class as a function")}function x(T,A){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:T}function y(T,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);T.prototype=Object.create(A&&A.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(T,A):T.__proto__=A)}var _=function(T){y(A,T);function A(){return g(this,A),x(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return o(A,null,[{key:"formats",value:function(N){return this.tagName.indexOf(N.tagName)+1}}]),A}(l.default);_.blotName="header",_.tagName=["H1","H2","H3","H4","H5","H6"],r.default=_},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ListItem=void 0;var o=function(){function D(U,q){for(var G=0;G<q.length;G++){var H=q[G];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(U,H.key,H)}}return function(U,q,G){return q&&D(U.prototype,q),G&&D(U,G),U}}(),u=function D(U,q,G){U===null&&(U=Function.prototype);var H=Object.getOwnPropertyDescriptor(U,q);if(H===void 0){var J=Object.getPrototypeOf(U);return J===null?void 0:D(J,q,G)}else{if("value"in H)return H.value;var Y=H.get;return Y===void 0?void 0:Y.call(G)}},l=i(0),p=T(l),g=i(4),x=T(g),y=i(25),_=T(y);function T(D){return D&&D.__esModule?D:{default:D}}function A(D,U,q){return U in D?Object.defineProperty(D,U,{value:q,enumerable:!0,configurable:!0,writable:!0}):D[U]=q,D}function O(D,U){if(!(D instanceof U))throw new TypeError("Cannot call a class as a function")}function N(D,U){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U&&(typeof U=="object"||typeof U=="function")?U:D}function k(D,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof U);D.prototype=Object.create(U&&U.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}}),U&&(Object.setPrototypeOf?Object.setPrototypeOf(D,U):D.__proto__=U)}var R=function(D){k(U,D);function U(){return O(this,U),N(this,(U.__proto__||Object.getPrototypeOf(U)).apply(this,arguments))}return o(U,[{key:"format",value:function(G,H){G===z.blotName&&!H?this.replaceWith(p.default.create(this.statics.scope)):u(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"format",this).call(this,G,H)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():u(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(G,H){return this.parent.isolate(this.offset(this.parent),this.length()),G===this.parent.statics.blotName?(this.parent.replaceWith(G,H),this):(this.parent.unwrap(),u(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"replaceWith",this).call(this,G,H))}}],[{key:"formats",value:function(G){return G.tagName===this.tagName?void 0:u(U.__proto__||Object.getPrototypeOf(U),"formats",this).call(this,G)}}]),U}(x.default);R.blotName="list-item",R.tagName="LI";var z=function(D){k(U,D),o(U,null,[{key:"create",value:function(G){var H=G==="ordered"?"OL":"UL",J=u(U.__proto__||Object.getPrototypeOf(U),"create",this).call(this,H);return(G==="checked"||G==="unchecked")&&J.setAttribute("data-checked",G==="checked"),J}},{key:"formats",value:function(G){if(G.tagName==="OL")return"ordered";if(G.tagName==="UL")return G.hasAttribute("data-checked")?G.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function U(q){O(this,U);var G=N(this,(U.__proto__||Object.getPrototypeOf(U)).call(this,q)),H=function(Y){if(Y.target.parentNode===q){var X=G.statics.formats(q),ee=p.default.find(Y.target);X==="checked"?ee.format("list","unchecked"):X==="unchecked"&&ee.format("list","checked")}};return q.addEventListener("touchstart",H),q.addEventListener("mousedown",H),G}return o(U,[{key:"format",value:function(G,H){this.children.length>0&&this.children.tail.format(G,H)}},{key:"formats",value:function(){return A({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(G,H){if(G instanceof R)u(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"insertBefore",this).call(this,G,H);else{var J=H==null?this.length():H.offset(this),Y=this.split(J);Y.parent.insertBefore(G,Y)}}},{key:"optimize",value:function(G){u(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"optimize",this).call(this,G);var H=this.next;H!=null&&H.prev===this&&H.statics.blotName===this.statics.blotName&&H.domNode.tagName===this.domNode.tagName&&H.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(H.moveChildren(this),H.remove())}},{key:"replace",value:function(G){if(G.statics.blotName!==this.statics.blotName){var H=p.default.create(this.statics.defaultChild);G.moveChildren(H),this.appendChild(H)}u(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"replace",this).call(this,G)}}]),U}(_.default);z.blotName="list",z.scope=p.default.Scope.BLOCK_BLOT,z.tagName=["OL","UL"],z.defaultChild="list-item",z.allowedChildren=[R],r.ListItem=R,r.default=z},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(56),u=l(o);function l(_){return _&&_.__esModule?_:{default:_}}function p(_,T){if(!(_ instanceof T))throw new TypeError("Cannot call a class as a function")}function g(_,T){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:_}function x(_,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);_.prototype=Object.create(T&&T.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(_,T):_.__proto__=T)}var y=function(_){x(T,_);function T(){return p(this,T),g(this,(T.__proto__||Object.getPrototypeOf(T)).apply(this,arguments))}return T}(u.default);y.blotName="italic",y.tagName=["EM","I"],r.default=y},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function A(O,N){for(var k=0;k<N.length;k++){var R=N[k];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(O,R.key,R)}}return function(O,N,k){return N&&A(O.prototype,N),k&&A(O,k),O}}(),u=function A(O,N,k){O===null&&(O=Function.prototype);var R=Object.getOwnPropertyDescriptor(O,N);if(R===void 0){var z=Object.getPrototypeOf(O);return z===null?void 0:A(z,N,k)}else{if("value"in R)return R.value;var D=R.get;return D===void 0?void 0:D.call(k)}},l=i(6),p=g(l);function g(A){return A&&A.__esModule?A:{default:A}}function x(A,O){if(!(A instanceof O))throw new TypeError("Cannot call a class as a function")}function y(A,O){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:A}function _(A,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);A.prototype=Object.create(O&&O.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(A,O):A.__proto__=O)}var T=function(A){_(O,A);function O(){return x(this,O),y(this,(O.__proto__||Object.getPrototypeOf(O)).apply(this,arguments))}return o(O,null,[{key:"create",value:function(k){return k==="super"?document.createElement("sup"):k==="sub"?document.createElement("sub"):u(O.__proto__||Object.getPrototypeOf(O),"create",this).call(this,k)}},{key:"formats",value:function(k){if(k.tagName==="SUB")return"sub";if(k.tagName==="SUP")return"super"}}]),O}(p.default);T.blotName="script",T.tagName=["SUB","SUP"],r.default=T},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(6),u=l(o);function l(_){return _&&_.__esModule?_:{default:_}}function p(_,T){if(!(_ instanceof T))throw new TypeError("Cannot call a class as a function")}function g(_,T){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:_}function x(_,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);_.prototype=Object.create(T&&T.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(_,T):_.__proto__=T)}var y=function(_){x(T,_);function T(){return p(this,T),g(this,(T.__proto__||Object.getPrototypeOf(T)).apply(this,arguments))}return T}(u.default);y.blotName="strike",y.tagName="S",r.default=y},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(6),u=l(o);function l(_){return _&&_.__esModule?_:{default:_}}function p(_,T){if(!(_ instanceof T))throw new TypeError("Cannot call a class as a function")}function g(_,T){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:_}function x(_,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);_.prototype=Object.create(T&&T.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(_,T):_.__proto__=T)}var y=function(_){x(T,_);function T(){return p(this,T),g(this,(T.__proto__||Object.getPrototypeOf(T)).apply(this,arguments))}return T}(u.default);y.blotName="underline",y.tagName="U",r.default=y},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function N(k,R){for(var z=0;z<R.length;z++){var D=R[z];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(k,D.key,D)}}return function(k,R,z){return R&&N(k.prototype,R),z&&N(k,z),k}}(),u=function N(k,R,z){k===null&&(k=Function.prototype);var D=Object.getOwnPropertyDescriptor(k,R);if(D===void 0){var U=Object.getPrototypeOf(k);return U===null?void 0:N(U,R,z)}else{if("value"in D)return D.value;var q=D.get;return q===void 0?void 0:q.call(z)}},l=i(0),p=x(l),g=i(27);function x(N){return N&&N.__esModule?N:{default:N}}function y(N,k){if(!(N instanceof k))throw new TypeError("Cannot call a class as a function")}function _(N,k){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:N}function T(N,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);N.prototype=Object.create(k&&k.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(N,k):N.__proto__=k)}var A=["alt","height","width"],O=function(N){T(k,N);function k(){return y(this,k),_(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return o(k,[{key:"format",value:function(z,D){A.indexOf(z)>-1?D?this.domNode.setAttribute(z,D):this.domNode.removeAttribute(z):u(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"format",this).call(this,z,D)}}],[{key:"create",value:function(z){var D=u(k.__proto__||Object.getPrototypeOf(k),"create",this).call(this,z);return typeof z=="string"&&D.setAttribute("src",this.sanitize(z)),D}},{key:"formats",value:function(z){return A.reduce(function(D,U){return z.hasAttribute(U)&&(D[U]=z.getAttribute(U)),D},{})}},{key:"match",value:function(z){return/\.(jpe?g|gif|png)$/.test(z)||/^data:image\/.+;base64/.test(z)}},{key:"sanitize",value:function(z){return(0,g.sanitize)(z,["http","https","data"])?z:"//:0"}},{key:"value",value:function(z){return z.getAttribute("src")}}]),k}(p.default.Embed);O.blotName="image",O.tagName="IMG",r.default=O},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function N(k,R){for(var z=0;z<R.length;z++){var D=R[z];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(k,D.key,D)}}return function(k,R,z){return R&&N(k.prototype,R),z&&N(k,z),k}}(),u=function N(k,R,z){k===null&&(k=Function.prototype);var D=Object.getOwnPropertyDescriptor(k,R);if(D===void 0){var U=Object.getPrototypeOf(k);return U===null?void 0:N(U,R,z)}else{if("value"in D)return D.value;var q=D.get;return q===void 0?void 0:q.call(z)}},l=i(4),p=i(27),g=x(p);function x(N){return N&&N.__esModule?N:{default:N}}function y(N,k){if(!(N instanceof k))throw new TypeError("Cannot call a class as a function")}function _(N,k){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:N}function T(N,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);N.prototype=Object.create(k&&k.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(N,k):N.__proto__=k)}var A=["height","width"],O=function(N){T(k,N);function k(){return y(this,k),_(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return o(k,[{key:"format",value:function(z,D){A.indexOf(z)>-1?D?this.domNode.setAttribute(z,D):this.domNode.removeAttribute(z):u(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"format",this).call(this,z,D)}}],[{key:"create",value:function(z){var D=u(k.__proto__||Object.getPrototypeOf(k),"create",this).call(this,z);return D.setAttribute("frameborder","0"),D.setAttribute("allowfullscreen",!0),D.setAttribute("src",this.sanitize(z)),D}},{key:"formats",value:function(z){return A.reduce(function(D,U){return z.hasAttribute(U)&&(D[U]=z.getAttribute(U)),D},{})}},{key:"sanitize",value:function(z){return g.default.sanitize(z)}},{key:"value",value:function(z){return z.getAttribute("src")}}]),k}(l.BlockEmbed);O.blotName="video",O.className="ql-video",O.tagName="IFRAME",r.default=O},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.FormulaBlot=void 0;var o=function(){function z(D,U){for(var q=0;q<U.length;q++){var G=U[q];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(D,G.key,G)}}return function(D,U,q){return U&&z(D.prototype,U),q&&z(D,q),D}}(),u=function z(D,U,q){D===null&&(D=Function.prototype);var G=Object.getOwnPropertyDescriptor(D,U);if(G===void 0){var H=Object.getPrototypeOf(D);return H===null?void 0:z(H,U,q)}else{if("value"in G)return G.value;var J=G.get;return J===void 0?void 0:J.call(q)}},l=i(35),p=T(l),g=i(5),x=T(g),y=i(9),_=T(y);function T(z){return z&&z.__esModule?z:{default:z}}function A(z,D){if(!(z instanceof D))throw new TypeError("Cannot call a class as a function")}function O(z,D){if(!z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D&&(typeof D=="object"||typeof D=="function")?D:z}function N(z,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);z.prototype=Object.create(D&&D.prototype,{constructor:{value:z,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(z,D):z.__proto__=D)}var k=function(z){N(D,z);function D(){return A(this,D),O(this,(D.__proto__||Object.getPrototypeOf(D)).apply(this,arguments))}return o(D,null,[{key:"create",value:function(q){var G=u(D.__proto__||Object.getPrototypeOf(D),"create",this).call(this,q);return typeof q=="string"&&(window.katex.render(q,G,{throwOnError:!1,errorColor:"#f00"}),G.setAttribute("data-value",q)),G}},{key:"value",value:function(q){return q.getAttribute("data-value")}}]),D}(p.default);k.blotName="formula",k.className="ql-formula",k.tagName="SPAN";var R=function(z){N(D,z),o(D,null,[{key:"register",value:function(){x.default.register(k,!0)}}]);function D(){A(this,D);var U=O(this,(D.__proto__||Object.getPrototypeOf(D)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return U}return D}(_.default);r.FormulaBlot=k,r.default=R},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.CodeToken=r.CodeBlock=void 0;var o=function(){function q(G,H){for(var J=0;J<H.length;J++){var Y=H[J];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(G,Y.key,Y)}}return function(G,H,J){return H&&q(G.prototype,H),J&&q(G,J),G}}(),u=function q(G,H,J){G===null&&(G=Function.prototype);var Y=Object.getOwnPropertyDescriptor(G,H);if(Y===void 0){var X=Object.getPrototypeOf(G);return X===null?void 0:q(X,H,J)}else{if("value"in Y)return Y.value;var ee=Y.get;return ee===void 0?void 0:ee.call(J)}},l=i(0),p=O(l),g=i(5),x=O(g),y=i(9),_=O(y),T=i(13),A=O(T);function O(q){return q&&q.__esModule?q:{default:q}}function N(q,G){if(!(q instanceof G))throw new TypeError("Cannot call a class as a function")}function k(q,G){if(!q)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return G&&(typeof G=="object"||typeof G=="function")?G:q}function R(q,G){if(typeof G!="function"&&G!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof G);q.prototype=Object.create(G&&G.prototype,{constructor:{value:q,enumerable:!1,writable:!0,configurable:!0}}),G&&(Object.setPrototypeOf?Object.setPrototypeOf(q,G):q.__proto__=G)}var z=function(q){R(G,q);function G(){return N(this,G),k(this,(G.__proto__||Object.getPrototypeOf(G)).apply(this,arguments))}return o(G,[{key:"replaceWith",value:function(J){this.domNode.textContent=this.domNode.textContent,this.attach(),u(G.prototype.__proto__||Object.getPrototypeOf(G.prototype),"replaceWith",this).call(this,J)}},{key:"highlight",value:function(J){var Y=this.domNode.textContent;this.cachedText!==Y&&((Y.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=J(Y),this.domNode.normalize(),this.attach()),this.cachedText=Y)}}]),G}(A.default);z.className="ql-syntax";var D=new p.default.Attributor.Class("token","hljs",{scope:p.default.Scope.INLINE}),U=function(q){R(G,q),o(G,null,[{key:"register",value:function(){x.default.register(D,!0),x.default.register(z,!0)}}]);function G(H,J){N(this,G);var Y=k(this,(G.__proto__||Object.getPrototypeOf(G)).call(this,H,J));if(typeof Y.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var X=null;return Y.quill.on(x.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(X),X=setTimeout(function(){Y.highlight(),X=null},Y.options.interval)}),Y.highlight(),Y}return o(G,[{key:"highlight",value:function(){var J=this;if(!this.quill.selection.composing){this.quill.update(x.default.sources.USER);var Y=this.quill.getSelection();this.quill.scroll.descendants(z).forEach(function(X){X.highlight(J.options.highlight)}),this.quill.update(x.default.sources.SILENT),Y!=null&&this.quill.setSelection(Y,x.default.sources.SILENT)}}}]),G}(_.default);U.DEFAULTS={highlight:function(){return window.hljs==null?null:function(q){var G=window.hljs.highlightAuto(q);return G.value}}(),interval:1e3},r.CodeBlock=z,r.CodeToken=D,r.default=U},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(n,r){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(n,r){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(n,r){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(n,r){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BubbleTooltip=void 0;var o=function G(H,J,Y){H===null&&(H=Function.prototype);var X=Object.getOwnPropertyDescriptor(H,J);if(X===void 0){var ee=Object.getPrototypeOf(H);return ee===null?void 0:G(ee,J,Y)}else{if("value"in X)return X.value;var ue=X.get;return ue===void 0?void 0:ue.call(Y)}},u=function(){function G(H,J){for(var Y=0;Y<J.length;Y++){var X=J[Y];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(H,X.key,X)}}return function(H,J,Y){return J&&G(H.prototype,J),Y&&G(H,Y),H}}(),l=i(3),p=N(l),g=i(8),x=N(g),y=i(43),_=N(y),T=i(15),A=i(41),O=N(A);function N(G){return G&&G.__esModule?G:{default:G}}function k(G,H){if(!(G instanceof H))throw new TypeError("Cannot call a class as a function")}function R(G,H){if(!G)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H&&(typeof H=="object"||typeof H=="function")?H:G}function z(G,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof H);G.prototype=Object.create(H&&H.prototype,{constructor:{value:G,enumerable:!1,writable:!0,configurable:!0}}),H&&(Object.setPrototypeOf?Object.setPrototypeOf(G,H):G.__proto__=H)}var D=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],U=function(G){z(H,G);function H(J,Y){k(this,H),Y.modules.toolbar!=null&&Y.modules.toolbar.container==null&&(Y.modules.toolbar.container=D);var X=R(this,(H.__proto__||Object.getPrototypeOf(H)).call(this,J,Y));return X.quill.container.classList.add("ql-bubble"),X}return u(H,[{key:"extendToolbar",value:function(Y){this.tooltip=new q(this.quill,this.options.bounds),this.tooltip.root.appendChild(Y.container),this.buildButtons([].slice.call(Y.container.querySelectorAll("button")),O.default),this.buildPickers([].slice.call(Y.container.querySelectorAll("select")),O.default)}}]),H}(_.default);U.DEFAULTS=(0,p.default)(!0,{},_.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(H){H?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var q=function(G){z(H,G);function H(J,Y){k(this,H);var X=R(this,(H.__proto__||Object.getPrototypeOf(H)).call(this,J,Y));return X.quill.on(x.default.events.EDITOR_CHANGE,function(ee,ue,oe,we){if(ee===x.default.events.SELECTION_CHANGE)if(ue!=null&&ue.length>0&&we===x.default.sources.USER){X.show(),X.root.style.left="0px",X.root.style.width="",X.root.style.width=X.root.offsetWidth+"px";var Ne=X.quill.getLines(ue.index,ue.length);if(Ne.length===1)X.position(X.quill.getBounds(ue));else{var Be=Ne[Ne.length-1],De=X.quill.getIndex(Be),Ae=Math.min(Be.length()-1,ue.index+ue.length-De),ve=X.quill.getBounds(new T.Range(De,Ae));X.position(ve)}}else document.activeElement!==X.textbox&&X.quill.hasFocus()&&X.hide()}),X}return u(H,[{key:"listen",value:function(){var Y=this;o(H.prototype.__proto__||Object.getPrototypeOf(H.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){Y.root.classList.remove("ql-editing")}),this.quill.on(x.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!Y.root.classList.contains("ql-hidden")){var X=Y.quill.getSelection();X!=null&&Y.position(Y.quill.getBounds(X))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(Y){var X=o(H.prototype.__proto__||Object.getPrototypeOf(H.prototype),"position",this).call(this,Y),ee=this.root.querySelector(".ql-tooltip-arrow");if(ee.style.marginLeft="",X===0)return X;ee.style.marginLeft=-1*X-ee.offsetWidth/2+"px"}}]),H}(y.BaseTooltip);q.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),r.BubbleTooltip=q,r.default=U},function(n,r,i){n.exports=i(63)}]).default})})(y8);var Ime=y8.exports,Pme=wr&&wr.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),EE=wr&&wr.__assign||function(){return EE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},EE.apply(this,arguments)},Lme=wr&&wr.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var o=arguments[t],u=0,l=o.length;u<l;u++,i++)r[i]=o[u];return r},rT=wr&&wr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Oh=rT(qe),Ame=rT(VE),g0=rT(Cme),S5=rT(Ime),Ome=function(e){Pme(t,e);function t(n){var r=e.call(this,n)||this;r.dirtyProps=["modules","formats","bounds","theme","children"],r.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],r.state={generation:0},r.selection=null,r.onEditorChange=function(o,u,l,p){var g,x,y,_;o==="text-change"?(x=(g=r).onEditorChangeText)===null||x===void 0||x.call(g,r.editor.root.innerHTML,u,p,r.unprivilegedEditor):o==="selection-change"&&((_=(y=r).onEditorChangeSelection)===null||_===void 0||_.call(y,u,p,r.unprivilegedEditor))};var i=r.isControlled()?n.value:n.defaultValue;return r.value=i??"",r}return t.prototype.validateProps=function(n){var r;if(Oh.default.Children.count(n.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(Oh.default.Children.count(n.children)){var i=Oh.default.Children.only(n.children);if(((r=i)===null||r===void 0?void 0:r.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&n.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},t.prototype.shouldComponentUpdate=function(n,r){var i=this,o;if(this.validateProps(n),!this.editor||this.state.generation!==r.generation)return!0;if("value"in n){var u=this.getEditorContents(),l=(o=n.value,o??"");this.isEqualValue(l,u)||this.setEditorContents(this.editor,l)}return n.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,n.readOnly),Lme(this.cleanProps,this.dirtyProps).some(function(p){return!g0.default(n[p],i.props[p])})},t.prototype.shouldComponentRegenerate=function(n){var r=this;return this.dirtyProps.some(function(i){return!g0.default(n[i],r.props[i])})},t.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},t.prototype.componentWillUnmount=function(){this.destroyEditor()},t.prototype.componentDidUpdate=function(n,r){var i=this;if(this.editor&&this.shouldComponentRegenerate(n)){var o=this.editor.getContents(),u=this.editor.getSelection();this.regenerationSnapshot={delta:o,selection:u},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==r.generation){var l=this.regenerationSnapshot,o=l.delta,p=l.selection;delete this.regenerationSnapshot,this.instantiateEditor();var g=this.editor;g.setContents(o),T5(function(){return i.setEditorSelection(g,p)})}},t.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},t.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},t.prototype.isControlled=function(){return"value"in this.props},t.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},t.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},t.prototype.createEditor=function(n,r){var i=new S5.default(n,r);return r.tabIndex!=null&&this.setEditorTabIndex(i,r.tabIndex),this.hookEditor(i),i},t.prototype.hookEditor=function(n){this.unprivilegedEditor=this.makeUnprivilegedEditor(n),n.on("editor-change",this.onEditorChange)},t.prototype.unhookEditor=function(n){n.off("editor-change",this.onEditorChange)},t.prototype.getEditorContents=function(){return this.value},t.prototype.getEditorSelection=function(){return this.selection},t.prototype.isDelta=function(n){return n&&n.ops},t.prototype.isEqualValue=function(n,r){return this.isDelta(n)&&this.isDelta(r)?g0.default(n.ops,r.ops):g0.default(n,r)},t.prototype.setEditorContents=function(n,r){var i=this;this.value=r;var o=this.getEditorSelection();typeof r=="string"?n.setContents(n.clipboard.convert(r)):n.setContents(r),T5(function(){return i.setEditorSelection(n,o)})},t.prototype.setEditorSelection=function(n,r){if(this.selection=r,r){var i=n.getLength();r.index=Math.max(0,Math.min(r.index,i-1)),r.length=Math.max(0,Math.min(r.length,i-1-r.index)),n.setSelection(r)}},t.prototype.setEditorTabIndex=function(n,r){var i,o;!((o=(i=n)===null||i===void 0?void 0:i.scroll)===null||o===void 0)&&o.domNode&&(n.scroll.domNode.tabIndex=r)},t.prototype.setEditorReadOnly=function(n,r){r?n.disable():n.enable()},t.prototype.makeUnprivilegedEditor=function(n){var r=n;return{getHTML:function(){return r.root.innerHTML},getLength:r.getLength.bind(r),getText:r.getText.bind(r),getContents:r.getContents.bind(r),getSelection:r.getSelection.bind(r),getBounds:r.getBounds.bind(r)}},t.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var n=Ame.default.findDOMNode(this.editingArea);if(!n)throw new Error("Cannot find element for editing area");if(n.nodeType===3)throw new Error("Editing area cannot be a text node");return n},t.prototype.renderEditingArea=function(){var n=this,r=this.props,i=r.children,o=r.preserveWhitespace,u=this.state.generation,l={key:u,ref:function(p){n.editingArea=p}};return Oh.default.Children.count(i)?Oh.default.cloneElement(Oh.default.Children.only(i),l):o?Oh.default.createElement("pre",EE({},l)):Oh.default.createElement("div",EE({},l))},t.prototype.render=function(){var n;return Oh.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(n=this.props.className,n??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},t.prototype.onEditorChangeText=function(n,r,i,o){var u,l;if(this.editor){var p=this.isDelta(this.value)?o.getContents():o.getHTML();p!==this.getEditorContents()&&(this.lastDeltaChangeSet=r,this.value=p,(l=(u=this.props).onChange)===null||l===void 0||l.call(u,n,r,i,o))}},t.prototype.onEditorChangeSelection=function(n,r,i){var o,u,l,p,g,x;if(this.editor){var y=this.getEditorSelection(),_=!y&&n,T=y&&!n;g0.default(n,y)||(this.selection=n,(u=(o=this.props).onChangeSelection)===null||u===void 0||u.call(o,n,r,i),_?(p=(l=this.props).onFocus)===null||p===void 0||p.call(l,n,r,i):T&&((x=(g=this.props).onBlur)===null||x===void 0||x.call(g,y,r,i)))}},t.prototype.focus=function(){this.editor&&this.editor.focus()},t.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},t.displayName="React Quill",t.Quill=S5.default,t.defaultProps={theme:"snow",modules:{},readOnly:!1},t}(Oh.default.Component);function T5(e){Promise.resolve().then(e)}var kme=Ome;const Rme=xd(kme);function Mme({handleChange:e}){return he.jsx(Rme,{className:"description-editor",theme:"snow",onChange:e})}function _8({setValue:e,widgetConfig:t,buttonText:n="Upload"}){const r=qe.useRef(),i=qe.useRef();return qe.useEffect(()=>{var o;r.current=window.cloudinary,i.current=(o=r.current)==null?void 0:o.createUploadWidget(t,function(u,l){!u&&l.event==="success"&&e(l.info.secure_url)})},[]),he.jsx(he.Fragment,{children:he.jsx("button",{type:"button",className:"upload-button",onClick:()=>i.current.open(),children:n})})}function xO({inputFields:e,initialValues:t,handleSubmitApiRequest:n,buttonText:r,validationSchema:i}){const{isSubmitting:o,values:u,handleChange:l,handleBlur:p,handleSubmit:g,touched:x,errors:y}=E6({initialValues:t,onSubmit:async(_,T)=>{await n(_),T.setSubmitting(!1)},validationSchema:i});return he.jsxs("form",{className:"container",onSubmit:g,children:[e.map((_,T)=>he.jsxs("div",{className:"textField-container",children:[he.jsx("label",{htmlFor:_.id,children:_.labelText}),he.jsx("input",{id:_.id,onChange:l,onBlur:p,type:_.type,placeholder:_.placeholder||"",name:_.name,value:u[_.name]}),y[_.name]&&x[_.name]&&he.jsx("p",{className:"error",children:y[_.name]})]},T)),he.jsx("button",{type:"submit",disabled:o,children:o?"Loading...":r})]})}function Nme(){const[e,t]=qe.useState(!1),[n,r]=qe.useState(null),[i,o]=qe.useState(!1),u=Yc(),{userAuth:l}=qe.useContext(eu),p=nm(),{errors:g,touched:x,handleChange:y,handleBlur:_,handleSubmit:T,values:A,isSubmitting:O,setSubmitting:N}=E6({initialValues:xX,onSubmit:q=>{k(q)},validationSchema:$te});async function k(q){if(q.type==="buy"&&(q.deposit=void 0),!n)return ar.error("Please set the address",{autoClose:2e3}),N(!1);try{const G=await Er.post("https://magic-estate-server.onrender.com/api/posts",{...q,...n});p.invalidateQueries({queryKey:[l.username,"createdPost"]}),u(`/list/${G.data.postID}`)}catch(G){ar.error(G.response.data.message,{autoClose:2e3})}finally{N(!1)}}async function R(q){t(!1),N(!0);const{lng:G,lat:H}=q.getLngLat();try{const J=await cX(G,H);r(J),o(!0)}catch(J){ar.error(`${J.message} is caused please select location again`,{autoClose:2e3})}finally{N(!1)}}function z(q){A.desc=q}function D(q){n.address!==""&&o(!1)}function U(q){A.images.push(q)}return he.jsxs("div",{className:"addPostPage-container",children:[O&&he.jsx(B6,{}),he.jsxs("form",{onSubmit:T,className:"add-post-form",children:[he.jsx("div",{className:"all-textField-container",children:vX.map((q,G)=>he.jsxs("div",{className:"addPost-inputField",children:[he.jsx("label",{htmlFor:q.id,children:q.labelText}),he.jsx("input",{name:q.name,onChange:y,onBlur:_,type:q.type,id:q.id}),x[q.name]&&g[q.name]&&he.jsx("p",{className:"addPost-error",children:g[q.name]})]},G))}),he.jsxs("div",{className:"addPost-editor",children:[he.jsx("label",{children:"Description"}),he.jsx(Mme,{handleChange:z}),g.desc&&x.desc&&he.jsx("p",{className:"addPost-error",children:g.desc})]}),he.jsxs("div",{className:"select-container",children:[he.jsxs("div",{className:"addPost-select",children:[he.jsx(p0,{optionValues:hA,handleChange:y,handleBlur:_,selectId:"type",selectName:"type",labelText:"Type",defaultOption:"Please select type"}),g.type&&x.type&&he.jsx("p",{className:"addPost-error",children:g.type})]}),he.jsxs("div",{className:"addPost-select",children:[he.jsx(p0,{optionValues:UB,handleChange:y,handleBlur:_,selectId:"property",selectName:"property",labelText:"Property",defaultOption:"Please select property type"}),g.property&&x.property&&he.jsx("p",{className:"addPost-error",children:g.property})]}),he.jsx("div",{className:"addPost-select",children:he.jsx(p0,{optionValues:hX,selectId:"petAllowance",handleChange:y,handleBlur:_,selectName:"petAllowance",labelText:"Pet Allowance",defaultOption:"Please select pet allowance"})}),he.jsx("div",{className:"addPost-select",children:he.jsx(p0,{optionValues:fX,selectId:"utilities",handleChange:y,handleBlur:_,selectName:"utilities",labelText:"Utilities Policy",defaultOption:"Please select utilities policy"})}),A.type!=="buy"&&he.jsx("div",{className:"addPost-select",children:he.jsx(p0,{optionValues:dX,selectId:"deposit",handleChange:y,handleBlur:_,selectName:"deposit",labelText:"Deposit Policy",defaultOption:"Please select deposit policy"})})]}),i&&he.jsx("div",{className:"dialog-container",children:he.jsxs("div",{className:"dialog",children:[he.jsx("p",{children:"Success! Your address has been fetched successfullly, If you notice any inaccuracies please do the required modifications"}),he.jsxs("div",{className:"textarea-container",children:[he.jsx("textarea",{defaultValue:n==null?void 0:n.address,onChange:q=>r({...n,address:q.target.value})}),!(n!=null&&n.address)&&he.jsx("p",{children:"Address is a required field"})]}),he.jsx("button",{onClick:D,children:"Save"})]})}),he.jsxs("div",{className:"button-container",children:[he.jsx(_8,{widgetConfig:{cloudName:"dpslrt6y5",uploadPreset:"yff0sfms",multiple:!0},buttonText:"Upload Images",setValue:U}),he.jsx("button",{type:"button",onClick:()=>t(!0),className:"addPostPage-button",children:"Set Address"}),e&&he.jsx(Xle,{handleDone:R}),he.jsx("button",{type:"submit",className:"addPostPage-button",children:"Add Post"})]})]}),he.jsx("div",{className:"right-addPost-section",children:he.jsx("img",{src:"/bg.png",alt:"house-image"})})]})}function Dme(){return he.jsxs("div",{className:"hero-section",children:[he.jsxs("div",{className:"left-hero-section",children:[he.jsxs("div",{className:"text-wrapper",children:[he.jsx("h1",{children:"Find Real Estate & Get Your Dream Place"}),he.jsx("p",{children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Nobis veniam pariatur praesentium error natus temporibus deserunt eaque explicabo aspernatur quod obcaecati incidunt impedit voluptate sunt, tenetur dolorum fugit aut tempora!"})]}),he.jsx(Jle,{}),he.jsxs("div",{className:"boxes",children:[he.jsxs("div",{className:"box",children:[he.jsx("h1",{children:"16+"}),he.jsx("span",{children:"Years of Experience"})]}),he.jsxs("div",{className:"box",children:[he.jsx("h1",{children:"200"}),he.jsx("span",{children:"Awards Gained"})]}),he.jsxs("div",{className:"box",children:[he.jsx("h1",{children:"1200+"}),he.jsx("span",{children:"Property Ready"})]})]})]}),he.jsx("div",{className:"right-hero-section",children:he.jsx("img",{src:"/bg.png",alt:"bg-image"})})]})}function zme(){const[e,t]=TF(),[n,r]=qe.useState(Object.fromEntries(e.entries())),[i,o]=qe.useState(),{isPending:u,error:l,data:p,isFetching:g}=gx({queryKey:["posts"],queryFn:async()=>{const y=AA(n);return(await Er.get("https://magic-estate-server.onrender.com/api/posts"+y)).data},staleTime:0});function x(y){const _=y.latitude,T=y.longitude;i.flyTo([_,T],14,{duration:3}),setTimeout(()=>{Zf.popup({offset:[0,-8]}).setLatLng([_,T]).setContent(YI(y)).openOn(i)},3e3)}return u?he.jsx(kA,{}):l?he.jsx("div",{children:l.message}):he.jsxs(he.Fragment,{children:[g&&he.jsx(B6,{}),he.jsxs("div",{className:"listPage-container",children:[he.jsx("div",{className:"listContainer",children:he.jsxs("div",{className:"wrapper",children:[he.jsx(pne,{list:p,filterParams:n,setSearchParams:t,setFilterParams:r}),p.length==0&&he.jsxs("div",{className:"no-result-container",children:[he.jsx("img",{src:"/no-results.png",alt:"no-results"}),he.jsx("span",{children:"No match found"})]}),p.map(y=>he.jsx(N6,{handleFlyToHouse:x,...y},y._id))]})}),he.jsx("div",{className:"mapContainer",children:he.jsx(j6,{List:p,map:i,setMap:o})})]})]})}function Fme(){const[e,t]=qe.useState(),{updateUser:n}=qe.useContext(eu),{state:r}=Ed(),i=Yc();async function o(u){t();try{const l=await Er.post("https://magic-estate-server.onrender.com/api/auth/login",u);n(l.data._doc),i(r||"/",{replace:!0})}catch(l){t(l.response.data.message)}}return he.jsxs("div",{className:"login-container",children:[he.jsxs("div",{className:"left-login-section",children:[he.jsx(xO,{inputFields:yX,initialValues:{username:"",password:""},handleSubmitApiRequest:o,buttonText:"Login",validationSchema:Bte}),e&&he.jsx("p",{className:"login-error",children:e})]}),he.jsx("div",{className:"right-login-section",children:he.jsx("img",{src:"/bg.png",alt:"house-image"})})]})}function Bme(){const{userAuth:e,updateUser:t}=qe.useContext(eu),n=Yc(),r=nm(),{state:i}=Ed(),[o,u]=qe.useState(!1),[l,p]=qe.useState(i),{data:g,isFetching:x,error:y}=gx({queryKey:["chats"],queryFn:async()=>{const T=await Er.get("https://magic-estate-server.onrender.com/api/chats");return console.log("Profile Component--->",T.data),T.data}});async function _(){u(!0);try{await Er.post("https://magic-estate-server.onrender.com/api/auth/logout",{message:"Try for loggout"}),t(null),r.invalidateQueries(["chats"]),r.invalidateQueries(["chat"]),n("/")}catch{ar.error("Something went wrong",{autoClose:1500})}finally{u(!1)}}return he.jsxs("div",{className:"profile-page-container",children:[he.jsx("div",{className:"user-related-container",children:he.jsxs("div",{className:"wrapper",children:[he.jsxs("div",{className:"user-info",children:[he.jsxs("div",{className:"top-section",children:[he.jsx("h2",{children:"User Information"}),he.jsx(oo,{to:"/update/profile",className:"link-css",children:"Update Profile"})]}),he.jsxs("div",{className:"bottom-section",children:[he.jsxs("div",{children:["Avatar: ",he.jsx("img",{src:e.avatar,alt:"avatar-image"})]}),he.jsxs("div",{children:["Username: ",he.jsx("span",{children:e.username})]}),he.jsxs("div",{children:["E-mail: ",he.jsx("span",{children:e.email})]}),he.jsx("button",{onClick:_,children:o?"loading..":"Logout"})]})]}),he.jsxs("div",{className:"my-list",children:[he.jsxs("div",{className:"top-section",children:[he.jsx("h2",{children:"My List"}),he.jsx(oo,{to:"/add/post",className:"link-css",children:"Create New Post"})]}),he.jsx(hD,{requestEndpoint:"https://magic-estate-server.onrender.com/api/users/post/created",queryKey:[e.username,"createdPost"]})]}),he.jsxs("div",{className:"saved-list",children:[he.jsx("h2",{className:"saved-list-header",children:"Saved List"}),he.jsx(hD,{requestEndpoint:"https://magic-estate-server.onrender.com/api/users/post/saved",queryKey:[e.username,"savedPost"]})]})]})}),he.jsxs("div",{className:"chat-related-container",children:[he.jsxs("div",{className:"messages-container",children:[he.jsx("div",{className:"message-heading",children:he.jsx("h1",{children:"Messages"})}),x?he.jsx("span",{children:"Loading"}):g==null?void 0:g.map(T=>he.jsx(Yle,{setChatId:p,...T},T._id))]}),l&&he.jsx(dne,{chatId:l,setChatId:p})]})]})}function jme(){const[e,t]=qe.useState(),{updateUser:n}=qe.useContext(eu),{state:r}=Ed(),i=Yc();async function o(u){t();try{const l=await Er.post("https://magic-estate-server.onrender.com/api/auth/register",u);n(l.data),i(r||"/",{replace:!0})}catch(l){t(l.response.data.message)}}return he.jsxs("div",{className:"register-container",children:[he.jsxs("div",{className:"left-register-section",children:[he.jsx(xO,{inputFields:gX,initialValues:{username:"",password:"",email:""},handleSubmitApiRequest:o,buttonText:"Register",validationSchema:Fte}),e&&he.jsx("p",{className:"register-error",children:e})]}),he.jsx("div",{className:"right-register-section",children:he.jsx("img",{src:"/bg.png",alt:"house-image"})})]})}var v8={},bO={},wO={};Object.defineProperty(wO,"__esModule",{value:!0});var C5="html",I5="head",qb="body",$me=/<([a-zA-Z]+[0-9]?)/,P5=/<head[^]*>/i,L5=/<body[^]*>/i,SE=function(e,t){throw new Error("This browser does not support `document.implementation.createHTMLDocument`")},qP=function(e,t){throw new Error("This browser does not support `DOMParser.prototype.parseFromString`")},A5=typeof window=="object"&&window.DOMParser;if(typeof A5=="function"){var Ume=new A5,qme="text/html";qP=function(e,t){return t&&(e="<".concat(t,">").concat(e,"</").concat(t,">")),Ume.parseFromString(e,qme)},SE=qP}if(typeof document=="object"&&document.implementation){var Vb=document.implementation.createHTMLDocument();SE=function(e,t){if(t){var n=Vb.documentElement.querySelector(t);return n&&(n.innerHTML=e),Vb}return Vb.documentElement.innerHTML=e,Vb}}var Gb=typeof document=="object"&&document.createElement("template"),VP;Gb&&Gb.content&&(VP=function(e){return Gb.innerHTML=e,Gb.content.childNodes});function Vme(e){var t,n,r=e.match($me),i=r&&r[1]?r[1].toLowerCase():"";switch(i){case C5:{var o=qP(e);if(!P5.test(e)){var u=o.querySelector(I5);(t=u==null?void 0:u.parentNode)===null||t===void 0||t.removeChild(u)}if(!L5.test(e)){var u=o.querySelector(qb);(n=u==null?void 0:u.parentNode)===null||n===void 0||n.removeChild(u)}return o.querySelectorAll(C5)}case I5:case qb:{var l=SE(e).querySelectorAll(i);return L5.test(e)&&P5.test(e)?l[0].parentNode.childNodes:l}default:{if(VP)return VP(e);var u=SE(e,qb).querySelector(qb);return u.childNodes}}}wO.default=Vme;var J_={},EO={},SO={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Doctype=e.CDATA=e.Tag=e.Style=e.Script=e.Comment=e.Directive=e.Text=e.Root=e.isTag=e.ElementType=void 0;var t;(function(r){r.Root="root",r.Text="text",r.Directive="directive",r.Comment="comment",r.Script="script",r.Style="style",r.Tag="tag",r.CDATA="cdata",r.Doctype="doctype"})(t=e.ElementType||(e.ElementType={}));function n(r){return r.type===t.Tag||r.type===t.Script||r.type===t.Style}e.isTag=n,e.Root=t.Root,e.Text=t.Text,e.Directive=t.Directive,e.Comment=t.Comment,e.Script=t.Script,e.Style=t.Style,e.Tag=t.Tag,e.CDATA=t.CDATA,e.Doctype=t.Doctype})(SO);var fr={},um=wr&&wr.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),W0=wr&&wr.__assign||function(){return W0=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},W0.apply(this,arguments)};Object.defineProperty(fr,"__esModule",{value:!0});fr.cloneNode=fr.hasChildren=fr.isDocument=fr.isDirective=fr.isComment=fr.isText=fr.isCDATA=fr.isTag=fr.Element=fr.Document=fr.CDATA=fr.NodeWithChildren=fr.ProcessingInstruction=fr.Comment=fr.Text=fr.DataNode=fr.Node=void 0;var cl=SO,TO=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(t){this.parent=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(t){this.prev=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(t){this.next=t},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(t){return t===void 0&&(t=!1),CO(this,t)},e}();fr.Node=TO;var iT=function(e){um(t,e);function t(n){var r=e.call(this)||this;return r.data=n,r}return Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(n){this.data=n},enumerable:!1,configurable:!0}),t}(TO);fr.DataNode=iT;var x8=function(e){um(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=cl.ElementType.Text,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),t}(iT);fr.Text=x8;var b8=function(e){um(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=cl.ElementType.Comment,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),t}(iT);fr.Comment=b8;var w8=function(e){um(t,e);function t(n,r){var i=e.call(this,r)||this;return i.name=n,i.type=cl.ElementType.Directive,i}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),t}(iT);fr.ProcessingInstruction=w8;var oT=function(e){um(t,e);function t(n){var r=e.call(this)||this;return r.children=n,r}return Object.defineProperty(t.prototype,"firstChild",{get:function(){var n;return(n=this.children[0])!==null&&n!==void 0?n:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(n){this.children=n},enumerable:!1,configurable:!0}),t}(TO);fr.NodeWithChildren=oT;var E8=function(e){um(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=cl.ElementType.CDATA,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),t}(oT);fr.CDATA=E8;var S8=function(e){um(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=cl.ElementType.Root,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),t}(oT);fr.Document=S8;var T8=function(e){um(t,e);function t(n,r,i,o){i===void 0&&(i=[]),o===void 0&&(o=n==="script"?cl.ElementType.Script:n==="style"?cl.ElementType.Style:cl.ElementType.Tag);var u=e.call(this,i)||this;return u.name=n,u.attribs=r,u.type=o,u}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(n){this.name=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var n=this;return Object.keys(this.attribs).map(function(r){var i,o;return{name:r,value:n.attribs[r],namespace:(i=n["x-attribsNamespace"])===null||i===void 0?void 0:i[r],prefix:(o=n["x-attribsPrefix"])===null||o===void 0?void 0:o[r]}})},enumerable:!1,configurable:!0}),t}(oT);fr.Element=T8;function C8(e){return(0,cl.isTag)(e)}fr.isTag=C8;function I8(e){return e.type===cl.ElementType.CDATA}fr.isCDATA=I8;function P8(e){return e.type===cl.ElementType.Text}fr.isText=P8;function L8(e){return e.type===cl.ElementType.Comment}fr.isComment=L8;function A8(e){return e.type===cl.ElementType.Directive}fr.isDirective=A8;function O8(e){return e.type===cl.ElementType.Root}fr.isDocument=O8;function Gme(e){return Object.prototype.hasOwnProperty.call(e,"children")}fr.hasChildren=Gme;function CO(e,t){t===void 0&&(t=!1);var n;if(P8(e))n=new x8(e.data);else if(L8(e))n=new b8(e.data);else if(C8(e)){var r=t?oC(e.children):[],i=new T8(e.name,W0({},e.attribs),r);r.forEach(function(p){return p.parent=i}),e.namespace!=null&&(i.namespace=e.namespace),e["x-attribsNamespace"]&&(i["x-attribsNamespace"]=W0({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(i["x-attribsPrefix"]=W0({},e["x-attribsPrefix"])),n=i}else if(I8(e)){var r=t?oC(e.children):[],o=new E8(r);r.forEach(function(g){return g.parent=o}),n=o}else if(O8(e)){var r=t?oC(e.children):[],u=new S8(r);r.forEach(function(g){return g.parent=u}),e["x-mode"]&&(u["x-mode"]=e["x-mode"]),n=u}else if(A8(e)){var l=new w8(e.name,e.data);e["x-name"]!=null&&(l["x-name"]=e["x-name"],l["x-publicId"]=e["x-publicId"],l["x-systemId"]=e["x-systemId"]),n=l}else throw new Error("Not implemented yet: ".concat(e.type));return n.startIndex=e.startIndex,n.endIndex=e.endIndex,e.sourceCodeLocation!=null&&(n.sourceCodeLocation=e.sourceCodeLocation),n}fr.cloneNode=CO;function oC(e){for(var t=e.map(function(r){return CO(r,!0)}),n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}(function(e){var t=wr&&wr.__createBinding||(Object.create?function(l,p,g,x){x===void 0&&(x=g);var y=Object.getOwnPropertyDescriptor(p,g);(!y||("get"in y?!p.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return p[g]}}),Object.defineProperty(l,x,y)}:function(l,p,g,x){x===void 0&&(x=g),l[x]=p[g]}),n=wr&&wr.__exportStar||function(l,p){for(var g in l)g!=="default"&&!Object.prototype.hasOwnProperty.call(p,g)&&t(p,l,g)};Object.defineProperty(e,"__esModule",{value:!0}),e.DomHandler=void 0;var r=SO,i=fr;n(fr,e);var o={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},u=function(){function l(p,g,x){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof g=="function"&&(x=g,g=o),typeof p=="object"&&(g=p,p=void 0),this.callback=p??null,this.options=g??o,this.elementCB=x??null}return l.prototype.onparserinit=function(p){this.parser=p},l.prototype.onreset=function(){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},l.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},l.prototype.onerror=function(p){this.handleCallback(p)},l.prototype.onclosetag=function(){this.lastNode=null;var p=this.tagStack.pop();this.options.withEndIndices&&(p.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(p)},l.prototype.onopentag=function(p,g){var x=this.options.xmlMode?r.ElementType.Tag:void 0,y=new i.Element(p,g,void 0,x);this.addNode(y),this.tagStack.push(y)},l.prototype.ontext=function(p){var g=this.lastNode;if(g&&g.type===r.ElementType.Text)g.data+=p,this.options.withEndIndices&&(g.endIndex=this.parser.endIndex);else{var x=new i.Text(p);this.addNode(x),this.lastNode=x}},l.prototype.oncomment=function(p){if(this.lastNode&&this.lastNode.type===r.ElementType.Comment){this.lastNode.data+=p;return}var g=new i.Comment(p);this.addNode(g),this.lastNode=g},l.prototype.oncommentend=function(){this.lastNode=null},l.prototype.oncdatastart=function(){var p=new i.Text(""),g=new i.CDATA([p]);this.addNode(g),p.parent=g,this.lastNode=p},l.prototype.oncdataend=function(){this.lastNode=null},l.prototype.onprocessinginstruction=function(p,g){var x=new i.ProcessingInstruction(p,g);this.addNode(x)},l.prototype.handleCallback=function(p){if(typeof this.callback=="function")this.callback(p,this.dom);else if(p)throw p},l.prototype.addNode=function(p){var g=this.tagStack[this.tagStack.length-1],x=g.children[g.children.length-1];this.options.withStartIndices&&(p.startIndex=this.parser.startIndex),this.options.withEndIndices&&(p.endIndex=this.parser.endIndex),g.children.push(p),x&&(p.prev=x,x.next=p),p.parent=g,this.lastNode=null},l}();e.DomHandler=u,e.default=u})(EO);var k8={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CASE_SENSITIVE_TAG_NAMES_MAP=e.CASE_SENSITIVE_TAG_NAMES=void 0,e.CASE_SENSITIVE_TAG_NAMES=["animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","linearGradient","radialGradient","textPath"],e.CASE_SENSITIVE_TAG_NAMES_MAP=e.CASE_SENSITIVE_TAG_NAMES.reduce(function(t,n){return t[n.toLowerCase()]=n,t},{})})(k8);Object.defineProperty(J_,"__esModule",{value:!0});J_.formatDOM=J_.formatAttributes=void 0;var Hb=EO,Hme=k8;function Zme(e){return Hme.CASE_SENSITIVE_TAG_NAMES_MAP[e]}function R8(e){for(var t={},n=0,r=e.length;n<r;n++){var i=e[n];t[i.name]=i.value}return t}J_.formatAttributes=R8;function Wme(e){e=e.toLowerCase();var t=Zme(e);return t||e}function M8(e,t,n){t===void 0&&(t=null);for(var r=[],i,o=0,u=e.length;o<u;o++){var l=e[o];switch(l.nodeType){case 1:{var p=Wme(l.nodeName);i=new Hb.Element(p,R8(l.attributes)),i.children=M8(p==="template"?l.content.childNodes:l.childNodes,i);break}case 3:i=new Hb.Text(l.nodeValue);break;case 8:i=new Hb.Comment(l.nodeValue);break;default:continue}var g=r[o-1]||null;g&&(g.next=i),i.parent=t,i.prev=g,i.next=null,r.push(i)}return n&&(i=new Hb.ProcessingInstruction(n.substring(0,n.indexOf(" ")).toLowerCase(),n),i.next=r[0]||null,i.parent=t,r.unshift(i),r[1]&&(r[1].prev=r[0])),r}J_.formatDOM=M8;var Kme=wr&&wr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(bO,"__esModule",{value:!0});var Xme=Kme(wO),Yme=J_,Jme=/<(![a-zA-Z\s]+)>/;function Qme(e){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];var t=e.match(Jme),n=t?t[1]:void 0;return(0,Yme.formatDOM)((0,Xme.default)(e),null,n)}bO.default=Qme;var sT={},eh={},aT={},ege=0;aT.SAME=ege;var tge=1;aT.CAMELCASE=tge;aT.possibleStandardNames={accept:0,acceptCharset:1,"accept-charset":"acceptCharset",accessKey:1,action:0,allowFullScreen:1,alt:0,as:0,async:0,autoCapitalize:1,autoComplete:1,autoCorrect:1,autoFocus:1,autoPlay:1,autoSave:1,capture:0,cellPadding:1,cellSpacing:1,challenge:0,charSet:1,checked:0,children:0,cite:0,class:"className",classID:1,className:1,cols:0,colSpan:1,content:0,contentEditable:1,contextMenu:1,controls:0,controlsList:1,coords:0,crossOrigin:1,dangerouslySetInnerHTML:1,data:0,dateTime:1,default:0,defaultChecked:1,defaultValue:1,defer:0,dir:0,disabled:0,disablePictureInPicture:1,disableRemotePlayback:1,download:0,draggable:0,encType:1,enterKeyHint:1,for:"htmlFor",form:0,formMethod:1,formAction:1,formEncType:1,formNoValidate:1,formTarget:1,frameBorder:1,headers:0,height:0,hidden:0,high:0,href:0,hrefLang:1,htmlFor:1,httpEquiv:1,"http-equiv":"httpEquiv",icon:0,id:0,innerHTML:1,inputMode:1,integrity:0,is:0,itemID:1,itemProp:1,itemRef:1,itemScope:1,itemType:1,keyParams:1,keyType:1,kind:0,label:0,lang:0,list:0,loop:0,low:0,manifest:0,marginWidth:1,marginHeight:1,max:0,maxLength:1,media:0,mediaGroup:1,method:0,min:0,minLength:1,multiple:0,muted:0,name:0,noModule:1,nonce:0,noValidate:1,open:0,optimum:0,pattern:0,placeholder:0,playsInline:1,poster:0,preload:0,profile:0,radioGroup:1,readOnly:1,referrerPolicy:1,rel:0,required:0,reversed:0,role:0,rows:0,rowSpan:1,sandbox:0,scope:0,scoped:0,scrolling:0,seamless:0,selected:0,shape:0,size:0,sizes:0,span:0,spellCheck:1,src:0,srcDoc:1,srcLang:1,srcSet:1,start:0,step:0,style:0,summary:0,tabIndex:1,target:0,title:0,type:0,useMap:1,value:0,width:0,wmode:0,wrap:0,about:0,accentHeight:1,"accent-height":"accentHeight",accumulate:0,additive:0,alignmentBaseline:1,"alignment-baseline":"alignmentBaseline",allowReorder:1,alphabetic:0,amplitude:0,arabicForm:1,"arabic-form":"arabicForm",ascent:0,attributeName:1,attributeType:1,autoReverse:1,azimuth:0,baseFrequency:1,baselineShift:1,"baseline-shift":"baselineShift",baseProfile:1,bbox:0,begin:0,bias:0,by:0,calcMode:1,capHeight:1,"cap-height":"capHeight",clip:0,clipPath:1,"clip-path":"clipPath",clipPathUnits:1,clipRule:1,"clip-rule":"clipRule",color:0,colorInterpolation:1,"color-interpolation":"colorInterpolation",colorInterpolationFilters:1,"color-interpolation-filters":"colorInterpolationFilters",colorProfile:1,"color-profile":"colorProfile",colorRendering:1,"color-rendering":"colorRendering",contentScriptType:1,contentStyleType:1,cursor:0,cx:0,cy:0,d:0,datatype:0,decelerate:0,descent:0,diffuseConstant:1,direction:0,display:0,divisor:0,dominantBaseline:1,"dominant-baseline":"dominantBaseline",dur:0,dx:0,dy:0,edgeMode:1,elevation:0,enableBackground:1,"enable-background":"enableBackground",end:0,exponent:0,externalResourcesRequired:1,fill:0,fillOpacity:1,"fill-opacity":"fillOpacity",fillRule:1,"fill-rule":"fillRule",filter:0,filterRes:1,filterUnits:1,floodOpacity:1,"flood-opacity":"floodOpacity",floodColor:1,"flood-color":"floodColor",focusable:0,fontFamily:1,"font-family":"fontFamily",fontSize:1,"font-size":"fontSize",fontSizeAdjust:1,"font-size-adjust":"fontSizeAdjust",fontStretch:1,"font-stretch":"fontStretch",fontStyle:1,"font-style":"fontStyle",fontVariant:1,"font-variant":"fontVariant",fontWeight:1,"font-weight":"fontWeight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:1,"glyph-name":"glyphName",glyphOrientationHorizontal:1,"glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphOrientationVertical:1,"glyph-orientation-vertical":"glyphOrientationVertical",glyphRef:1,gradientTransform:1,gradientUnits:1,hanging:0,horizAdvX:1,"horiz-adv-x":"horizAdvX",horizOriginX:1,"horiz-origin-x":"horizOriginX",ideographic:0,imageRendering:1,"image-rendering":"imageRendering",in2:0,in:0,inlist:0,intercept:0,k1:0,k2:0,k3:0,k4:0,k:0,kernelMatrix:1,kernelUnitLength:1,kerning:0,keyPoints:1,keySplines:1,keyTimes:1,lengthAdjust:1,letterSpacing:1,"letter-spacing":"letterSpacing",lightingColor:1,"lighting-color":"lightingColor",limitingConeAngle:1,local:0,markerEnd:1,"marker-end":"markerEnd",markerHeight:1,markerMid:1,"marker-mid":"markerMid",markerStart:1,"marker-start":"markerStart",markerUnits:1,markerWidth:1,mask:0,maskContentUnits:1,maskUnits:1,mathematical:0,mode:0,numOctaves:1,offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:1,"overline-position":"overlinePosition",overlineThickness:1,"overline-thickness":"overlineThickness",paintOrder:1,"paint-order":"paintOrder",panose1:0,"panose-1":"panose1",pathLength:1,patternContentUnits:1,patternTransform:1,patternUnits:1,pointerEvents:1,"pointer-events":"pointerEvents",points:0,pointsAtX:1,pointsAtY:1,pointsAtZ:1,prefix:0,preserveAlpha:1,preserveAspectRatio:1,primitiveUnits:1,property:0,r:0,radius:0,refX:1,refY:1,renderingIntent:1,"rendering-intent":"renderingIntent",repeatCount:1,repeatDur:1,requiredExtensions:1,requiredFeatures:1,resource:0,restart:0,result:0,results:0,rotate:0,rx:0,ry:0,scale:0,security:0,seed:0,shapeRendering:1,"shape-rendering":"shapeRendering",slope:0,spacing:0,specularConstant:1,specularExponent:1,speed:0,spreadMethod:1,startOffset:1,stdDeviation:1,stemh:0,stemv:0,stitchTiles:1,stopColor:1,"stop-color":"stopColor",stopOpacity:1,"stop-opacity":"stopOpacity",strikethroughPosition:1,"strikethrough-position":"strikethroughPosition",strikethroughThickness:1,"strikethrough-thickness":"strikethroughThickness",string:0,stroke:0,strokeDasharray:1,"stroke-dasharray":"strokeDasharray",strokeDashoffset:1,"stroke-dashoffset":"strokeDashoffset",strokeLinecap:1,"stroke-linecap":"strokeLinecap",strokeLinejoin:1,"stroke-linejoin":"strokeLinejoin",strokeMiterlimit:1,"stroke-miterlimit":"strokeMiterlimit",strokeWidth:1,"stroke-width":"strokeWidth",strokeOpacity:1,"stroke-opacity":"strokeOpacity",suppressContentEditableWarning:1,suppressHydrationWarning:1,surfaceScale:1,systemLanguage:1,tableValues:1,targetX:1,targetY:1,textAnchor:1,"text-anchor":"textAnchor",textDecoration:1,"text-decoration":"textDecoration",textLength:1,textRendering:1,"text-rendering":"textRendering",to:0,transform:0,typeof:0,u1:0,u2:0,underlinePosition:1,"underline-position":"underlinePosition",underlineThickness:1,"underline-thickness":"underlineThickness",unicode:0,unicodeBidi:1,"unicode-bidi":"unicodeBidi",unicodeRange:1,"unicode-range":"unicodeRange",unitsPerEm:1,"units-per-em":"unitsPerEm",unselectable:0,vAlphabetic:1,"v-alphabetic":"vAlphabetic",values:0,vectorEffect:1,"vector-effect":"vectorEffect",version:0,vertAdvY:1,"vert-adv-y":"vertAdvY",vertOriginX:1,"vert-origin-x":"vertOriginX",vertOriginY:1,"vert-origin-y":"vertOriginY",vHanging:1,"v-hanging":"vHanging",vIdeographic:1,"v-ideographic":"vIdeographic",viewBox:1,viewTarget:1,visibility:0,vMathematical:1,"v-mathematical":"vMathematical",vocab:0,widths:0,wordSpacing:1,"word-spacing":"wordSpacing",writingMode:1,"writing-mode":"writingMode",x1:0,x2:0,x:0,xChannelSelector:1,xHeight:1,"x-height":"xHeight",xlinkActuate:1,"xlink:actuate":"xlinkActuate",xlinkArcrole:1,"xlink:arcrole":"xlinkArcrole",xlinkHref:1,"xlink:href":"xlinkHref",xlinkRole:1,"xlink:role":"xlinkRole",xlinkShow:1,"xlink:show":"xlinkShow",xlinkTitle:1,"xlink:title":"xlinkTitle",xlinkType:1,"xlink:type":"xlinkType",xmlBase:1,"xml:base":"xmlBase",xmlLang:1,"xml:lang":"xmlLang",xmlns:0,"xml:space":"xmlSpace",xmlnsXlink:1,"xmlns:xlink":"xmlnsXlink",xmlSpace:1,y1:0,y2:0,y:0,yChannelSelector:1,z:0,zoomAndPan:1};const N8=0,cm=1,lT=2,uT=3,IO=4,D8=5,z8=6;function nge(e){return qs.hasOwnProperty(e)?qs[e]:null}function ja(e,t,n,r,i,o,u){this.acceptsBooleans=t===lT||t===uT||t===IO,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=u}const qs={},rge=["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"];rge.forEach(e=>{qs[e]=new ja(e,N8,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(([e,t])=>{qs[e]=new ja(e,cm,!1,t,null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(e=>{qs[e]=new ja(e,lT,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(e=>{qs[e]=new ja(e,lT,!1,e,null,!1,!1)});["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach(e=>{qs[e]=new ja(e,uT,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(e=>{qs[e]=new ja(e,uT,!0,e,null,!1,!1)});["capture","download"].forEach(e=>{qs[e]=new ja(e,IO,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(e=>{qs[e]=new ja(e,z8,!1,e,null,!1,!1)});["rowSpan","start"].forEach(e=>{qs[e]=new ja(e,D8,!1,e.toLowerCase(),null,!1,!1)});const PO=/[\-\:]([a-z])/g,LO=e=>e[1].toUpperCase();["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach(e=>{const t=e.replace(PO,LO);qs[t]=new ja(t,cm,!1,e,null,!1,!1)});["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach(e=>{const t=e.replace(PO,LO);qs[t]=new ja(t,cm,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(e=>{const t=e.replace(PO,LO);qs[t]=new ja(t,cm,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(e=>{qs[e]=new ja(e,cm,!1,e.toLowerCase(),null,!1,!1)});const ige="xlinkHref";qs[ige]=new ja("xlinkHref",cm,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(e=>{qs[e]=new ja(e,cm,!1,e.toLowerCase(),null,!0,!0)});const{CAMELCASE:oge,SAME:sge,possibleStandardNames:O5}=aT,age=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",lge=age+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",uge=RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+lge+"]*$")),cge=Object.keys(O5).reduce((e,t)=>{const n=O5[t];return n===sge?e[t]=t:n===oge?e[t.toLowerCase()]=t:e[t]=n,e},{});eh.BOOLEAN=uT;eh.BOOLEANISH_STRING=lT;eh.NUMERIC=D8;eh.OVERLOADED_BOOLEAN=IO;eh.POSITIVE_NUMERIC=z8;eh.RESERVED=N8;eh.STRING=cm;eh.getPropertyInfo=nge;eh.isCustomAttribute=uge;eh.possibleStandardNames=cge;var AO={},OO={},k5=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,hge=/\n/g,fge=/^\s*/,dge=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,pge=/^:\s*/,mge=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,gge=/^[;\s]*/,yge=/^\s+|\s+$/g,_ge=`
`,R5="/",M5="*",Vm="",vge="comment",xge="declaration",bge=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(A){var O=A.match(hge);O&&(n+=O.length);var N=A.lastIndexOf(_ge);r=~N?A.length-N:r+A.length}function o(){var A={line:n,column:r};return function(O){return O.position=new u(A),g(),O}}function u(A){this.start=A,this.end={line:n,column:r},this.source=t.source}u.prototype.content=e;function l(A){var O=new Error(t.source+":"+n+":"+r+": "+A);if(O.reason=A,O.filename=t.source,O.line=n,O.column=r,O.source=e,!t.silent)throw O}function p(A){var O=A.exec(e);if(O){var N=O[0];return i(N),e=e.slice(N.length),O}}function g(){p(fge)}function x(A){var O;for(A=A||[];O=y();)O!==!1&&A.push(O);return A}function y(){var A=o();if(!(R5!=e.charAt(0)||M5!=e.charAt(1))){for(var O=2;Vm!=e.charAt(O)&&(M5!=e.charAt(O)||R5!=e.charAt(O+1));)++O;if(O+=2,Vm===e.charAt(O-1))return l("End of comment missing");var N=e.slice(2,O-2);return r+=2,i(N),e=e.slice(O),r+=2,A({type:vge,comment:N})}}function _(){var A=o(),O=p(dge);if(O){if(y(),!p(pge))return l("property missing ':'");var N=p(mge),k=A({type:xge,property:N5(O[0].replace(k5,Vm)),value:N?N5(N[0].replace(k5,Vm)):Vm});return p(gge),k}}function T(){var A=[];x(A);for(var O;O=_();)O!==!1&&(A.push(O),x(A));return A}return g(),T()};function N5(e){return e?e.replace(yge,Vm):Vm}var wge=wr&&wr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(OO,"__esModule",{value:!0});var Ege=wge(bge);function Sge(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,Ege.default)(e),i=typeof t=="function";return r.forEach(function(o){if(o.type==="declaration"){var u=o.property,l=o.value;i?t(u,l,o):l&&(n=n||{},n[u]=l)}}),n}OO.default=Sge;var cT={};Object.defineProperty(cT,"__esModule",{value:!0});cT.camelCase=void 0;var Tge=/^--[a-zA-Z0-9-]+$/,Cge=/-([a-z])/g,Ige=/^[^-]+$/,Pge=/^-(webkit|moz|ms|o|khtml)-/,Lge=/^-(ms)-/,Age=function(e){return!e||Ige.test(e)||Tge.test(e)},Oge=function(e,t){return t.toUpperCase()},D5=function(e,t){return"".concat(t,"-")},kge=function(e,t){return t===void 0&&(t={}),Age(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(Lge,D5):e=e.replace(Pge,D5),e.replace(Cge,Oge))};cT.camelCase=kge;var Rge=wr&&wr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Mge=Rge(OO),Nge=cT;function GP(e,t){var n={};return!e||typeof e!="string"||(0,Mge.default)(e,function(r,i){r&&i&&(n[(0,Nge.camelCase)(r,t)]=i)}),n}GP.default=GP;var Dge=GP;(function(e){var t=wr&&wr.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(e,"__esModule",{value:!0}),e.returnFirstArg=e.canTextBeChildOfNode=e.ELEMENTS_WITH_NO_TEXT_CHILDREN=e.PRESERVE_CUSTOM_ATTRIBUTES=e.setStyleProp=e.isCustomComponent=void 0;var n=qe,r=t(Dge),i=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]);function o(x,y){return x.includes("-")?!i.has(x):!!(y&&typeof y.is=="string")}e.isCustomComponent=o;var u={reactCompat:!0};function l(x,y){if(typeof x=="string"){if(!x.trim()){y.style={};return}try{y.style=(0,r.default)(x,u)}catch{y.style={}}}}e.setStyleProp=l,e.PRESERVE_CUSTOM_ATTRIBUTES=Number(n.version.split(".")[0])>=16,e.ELEMENTS_WITH_NO_TEXT_CHILDREN=new Set(["tr","tbody","thead","tfoot","colgroup","table","head","html","frameset"]);var p=function(x){return!e.ELEMENTS_WITH_NO_TEXT_CHILDREN.has(x.name)};e.canTextBeChildOfNode=p;var g=function(x){return x};e.returnFirstArg=g})(AO);Object.defineProperty(sT,"__esModule",{value:!0});var A0=eh,z5=AO,zge=["checked","value"],Fge=["input","select","textarea"],Bge={reset:!0,submit:!0};function jge(e,t){e===void 0&&(e={});var n={},r=!!(e.type&&Bge[e.type]);for(var i in e){var o=e[i];if((0,A0.isCustomAttribute)(i)){n[i]=o;continue}var u=i.toLowerCase(),l=F5(u);if(l){var p=(0,A0.getPropertyInfo)(l);switch(zge.includes(l)&&Fge.includes(t)&&!r&&(l=F5("default"+u)),n[l]=o,p&&p.type){case A0.BOOLEAN:n[l]=!0;break;case A0.OVERLOADED_BOOLEAN:o===""&&(n[l]=!0);break}continue}z5.PRESERVE_CUSTOM_ATTRIBUTES&&(n[i]=o)}return(0,z5.setStyleProp)(e.style,n),n}sT.default=jge;function F5(e){return A0.possibleStandardNames[e]}var kO={},$ge=wr&&wr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(kO,"__esModule",{value:!0});var sC=qe,Uge=$ge(sT),K0=AO,qge={cloneElement:sC.cloneElement,createElement:sC.createElement,isValidElement:sC.isValidElement};function F8(e,t){t===void 0&&(t={});for(var n=[],r=typeof t.replace=="function",i=t.transform||K0.returnFirstArg,o=t.library||qge,u=o.cloneElement,l=o.createElement,p=o.isValidElement,g=e.length,x=0;x<g;x++){var y=e[x];if(r){var _=t.replace(y,x);if(p(_)){g>1&&(_=u(_,{key:_.key||x})),n.push(i(_,y,x));continue}}if(y.type==="text"){var T=!y.data.trim().length;if(T&&y.parent&&!(0,K0.canTextBeChildOfNode)(y.parent)||t.trim&&T)continue;n.push(i(y.data,y,x));continue}var A=y,O={};Vge(A)?((0,K0.setStyleProp)(A.attribs.style,A.attribs),O=A.attribs):A.attribs&&(O=(0,Uge.default)(A.attribs,A.name));var N=void 0;switch(y.type){case"script":case"style":y.children[0]&&(O.dangerouslySetInnerHTML={__html:y.children[0].data});break;case"tag":y.name==="textarea"&&y.children[0]?O.defaultValue=y.children[0].data:y.children&&y.children.length&&(N=F8(y.children,t));break;default:continue}g>1&&(O.key=x),n.push(i(l(y.name,O,N),y,x))}return n.length===1?n[0]:n}kO.default=F8;function Vge(e){return K0.PRESERVE_CUSTOM_ATTRIBUTES&&e.type==="tag"&&(0,K0.isCustomComponent)(e.name,e.attribs)}(function(e){var t=wr&&wr.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(e,"__esModule",{value:!0}),e.htmlToDOM=e.domToReact=e.attributesToProps=e.Text=e.ProcessingInstruction=e.Element=e.Comment=void 0;var n=t(bO);e.htmlToDOM=n.default;var r=t(sT);e.attributesToProps=r.default;var i=t(kO);e.domToReact=i.default;var o=EO;Object.defineProperty(e,"Comment",{enumerable:!0,get:function(){return o.Comment}}),Object.defineProperty(e,"Element",{enumerable:!0,get:function(){return o.Element}}),Object.defineProperty(e,"ProcessingInstruction",{enumerable:!0,get:function(){return o.ProcessingInstruction}}),Object.defineProperty(e,"Text",{enumerable:!0,get:function(){return o.Text}});var u={lowerCaseAttributeNames:!1};function l(p,g){if(typeof p!="string")throw new TypeError("First argument must be a string");return p?(0,i.default)((0,n.default)(p,(g==null?void 0:g.htmlparser2)||u),g):[]}e.default=l})(v8);const B5=xd(v8),Gge=B5.default||B5;function Hge(){var g,x;const{id:e}=XV(),t=nm(),{userAuth:n}=qe.useContext(eu),r=Yc(),{isPending:i,error:o,data:u}=gx({queryKey:["postDetail",e],queryFn:async()=>(await Er.get(`https://magic-estate-server.onrender.com/api/posts/${e}`)).data});async function l(){var y,_;if(!n)return r("/login");try{const T=await Er.post("https://magic-estate-server.onrender.com/api/users/post/save",{postId:e});ar.success((y=T.data)==null?void 0:y.message,{autoClose:2e3}),t.setQueryData(["postDetail",e],A=>({...A,saved:!A.saved})),t.invalidateQueries([n.username,"savedPost"])}catch(T){ar.error((_=T.response.data)==null?void 0:_.message,{autoClose:2e3})}}async function p(){var y,_;if(!n)return r("/login");try{const T=await Er.post("https://magic-estate-server.onrender.com/api/chats",{receiverId:u==null?void 0:u.user._id});r("/profile",{state:(y=T.data)==null?void 0:y.chatId}),t.invalidateQueries(["chats"])}catch(T){ar.error((_=T.response.data)==null?void 0:_.message,{autoClose:2e3})}}return i?he.jsx(OA,{variant:"EDITOR"}):o?he.jsx("div",{children:(x=(g=o==null?void 0:o.response)==null?void 0:g.data)==null?void 0:x.message}):he.jsxs("div",{className:"singlePostContainer",children:[he.jsx("div",{className:"details",children:he.jsxs("div",{className:"wrapper",children:[he.jsx("div",{className:"slider",children:he.jsx(Qle,{images:u.images})}),he.jsxs("div",{className:"overview-details",children:[he.jsxs("div",{className:"left-section",children:[he.jsx("h1",{children:u.title}),he.jsxs("div",{className:"address",children:[he.jsx("img",{src:"/pin.png",alt:"pin-image"}),he.jsx("span",{children:u.address})]}),he.jsxs("p",{className:"price",children:["$ ",u.price]})]}),he.jsxs("div",{className:"right-section",children:[he.jsx("img",{src:u.user.avatar}),he.jsx("span",{children:u.user.username})]})]}),he.jsx("div",{className:"desc",children:Gge(u.postDetail.desc)})]})}),he.jsxs("div",{className:"features",children:[he.jsx("h4",{className:"feature-header",children:"General"}),he.jsxs("div",{className:"generalContainer",children:[he.jsxs("div",{className:"item-container",children:[he.jsx("div",{children:he.jsx("img",{src:"/utility.png",alt:"icon-image"})}),he.jsxs("div",{className:"right-section",children:[he.jsx("h4",{children:"Utilities"}),he.jsx("span",{children:u.postDetail.utilities})]})]}),he.jsxs("div",{className:"item-container",children:[he.jsx("div",{children:he.jsx("img",{src:"/pet.png",alt:"icon-image"})}),he.jsxs("div",{children:[he.jsx("h4",{children:"Pet Policy"}),he.jsx("span",{children:u.postDetail.petAllowance})]})]}),he.jsxs("div",{className:"item-container",children:[he.jsx("div",{children:he.jsx("img",{src:"/fee.png",alt:"icon-image"})}),he.jsxs("div",{children:[he.jsx("h4",{children:"Deposit Policy"}),he.jsx("span",{children:u.postDetail.deposit})]})]})]}),he.jsx("h4",{className:"feature-header",children:"Room Sizes"}),he.jsxs("div",{className:"roomSizeContainer",children:[he.jsxs("div",{className:"rs-item-container",children:[he.jsx("img",{src:"/size.png",alt:"icon-image"}),he.jsxs("span",{children:[u.postDetail.size," sqft"]})]}),he.jsxs("div",{className:"rs-item-container",children:[he.jsx("img",{src:"/bed.png",alt:"icon-image"}),he.jsxs("span",{children:[u.bedroom," Bedroom"]})]}),he.jsxs("div",{className:"rs-item-container",children:[he.jsx("img",{src:"/bath.png",alt:"icon-image"}),he.jsxs("span",{children:[u.bathroom," Bathroom"]})]})]}),he.jsx("h4",{className:"feature-header",children:"Nearby Places"}),he.jsxs("div",{className:"nearByContainer",children:[he.jsxs("div",{className:"item-container",children:[he.jsx("img",{src:"/school.png",alt:"icon-image"}),he.jsxs("div",{className:"right-section",children:[he.jsx("h4",{children:"School"}),he.jsx("span",{children:u.postDetail.school?u.postDetail.school+"m away":"N/A"})]})]}),he.jsxs("div",{className:"item-container",children:[he.jsx("img",{src:"/bus.png",alt:"icon-image"}),he.jsxs("div",{className:"right-section",children:[he.jsx("h4",{children:"Bus Stop"}),he.jsx("span",{children:u.postDetail.bus?u.postDetail.bus+"m away":"N/A"})]})]}),he.jsxs("div",{className:"item-container",children:[he.jsx("img",{src:"/restaurant.png",alt:"icon-image"}),he.jsxs("div",{className:"right-section",children:[he.jsx("h4",{children:"Restraunts"}),he.jsx("span",{children:u.postDetail.restraunt?u.postDetail.restraunt+"m away":"N/A"})]})]})]}),he.jsx("h4",{className:"feature-header",children:"Location"}),he.jsx("div",{className:"locationContainer",children:he.jsx(j6,{List:[u],geoExtent:[u.latitude,u.longitude]})}),he.jsxs("div",{className:"bottomSection",children:[he.jsxs("button",{onClick:p,children:[he.jsx("img",{src:"/chat.png",alt:"chat"}),"Send a message"]}),he.jsxs("button",{className:u.saved?"saved":"",onClick:l,children:[he.jsx("img",{src:"/save.png"}),u.saved?"Place saved":"Save the place"]})]})]})]})}function Zge(){const{userAuth:e,updateUser:t}=qe.useContext(eu),[n,r]=qe.useState(e.avatar),i=Yc();async function o(u){try{const l=await Er.patch(`https://magic-estate-server.onrender.com/api/users/${e._id}`,{...u,avatar:n});t(l.data._doc),i("/profile")}catch(l){ar.error(l.response.data.message,{autoClose:2e3})}}return he.jsxs("div",{className:"update-profilePage-container",children:[he.jsx("div",{className:"left-section",children:he.jsx(xO,{initialValues:{username:e.username,email:e.email},inputFields:_X,buttonText:"Update",handleSubmitApiRequest:o,validationSchema:jte})}),he.jsxs("div",{className:"right-section",children:[he.jsx("div",{className:"avatar-container",children:he.jsx("img",{src:n,alt:"avatar-image"})}),he.jsx(_8,{buttonText:"Change Avatar",setValue:r,widgetConfig:{cloudName:"dpslrt6y5",uploadPreset:"yff0sfms",multiple:!1}})]})]})}function Wge(){return he.jsxs("div",{className:"error-container",children:[he.jsx("h1",{className:"error-header",children:"404"}),he.jsx("p",{className:"error-subHeader",children:"Oops! Looks like you're lost."}),he.jsxs("p",{className:"error-link",children:["Let's get you back ",he.jsx(oo,{className:"text-blue-500",to:"/",children:"home"}),"."]})]})}function Kge(){const{userAuth:e}=qe.useContext(eu),t=vG(oI(he.jsxs(vu,{path:"/",element:he.jsx(lX,{}),children:[he.jsx(vu,{path:"/",element:he.jsx(Dme,{})}),he.jsx(vu,{path:"/about",element:he.jsx(uX,{})}),he.jsx(vu,{path:"/list",element:he.jsx(zme,{})}),he.jsx(vu,{path:"/list/:id",element:he.jsx(Hge,{})}),he.jsx(vu,{path:"/profile",element:he.jsx(F2,{children:he.jsx(Bme,{})})}),he.jsx(vu,{path:"/register",element:he.jsx(jme,{})}),he.jsx(vu,{path:"/login",element:he.jsx(Fme,{})}),he.jsx(vu,{path:"/update/profile",element:he.jsx(F2,{children:he.jsx(Zge,{})})}),he.jsx(vu,{path:"/add/post",element:he.jsx(F2,{children:he.jsx(Nme,{})})}),he.jsx(vu,{path:"*",element:he.jsx(Wge,{})})]})));return he.jsx(he.Fragment,{children:e?he.jsx(aX,{children:he.jsx(MM,{router:t})}):he.jsx(MM,{router:t})})}const Xge=BH({reducer:{unreadNotifications:uZ}}),Yge=new tK({defaultOptions:{queries:{staleTime:1/0,refetchOnWindowFocus:!1}}});lC.createRoot(document.getElementById("root")).render(he.jsx(kG,{children:he.jsx(oK,{client:Yge,children:he.jsx(eH,{store:Xge,children:he.jsx(Kge,{})})})}))});export default Jge();
